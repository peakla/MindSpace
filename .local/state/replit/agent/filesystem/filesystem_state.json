{"file_contents":{"mindspace-build/js/translations.js":{"content":"// ==================== TRANSLATION SYSTEM ====================\n\n// --- Cache & Fallbacks ---\nconst translationCache = {};\n\nconst fallbackTranslations = {\n  nav_home: \"Home\",\n  nav_contact: \"Contact\",\n  nav_resources: \"Resource Library\",\n  nav_community: \"Community Hub\",\n  nav_blog: \"Blog\",\n  nav_signin: \"Sign In\",\n  nav_signout: \"Sign Out\",\n  settings_title: \"Settings\",\n  settings_preferences: \"Preferences\",\n  settings_dark_mode: \"Dark Mode\",\n  settings_font_size: \"Font Size\",\n  settings_language: \"Language\"\n};\n\nconst supportedLanguages = ['en', 'es', 'fr', 'zh', 'hi', 'ko'];\n\n// --- Language Detection ---\nfunction getCurrentLanguage() {\n  const stored = localStorage.getItem('mindspace_language') || localStorage.getItem('mindspace-language');\n  if (stored && supportedLanguages.includes(stored)) {\n    return stored;\n  }\n  return 'en';\n}\n\n// --- Load Translations ---\nasync function loadTranslations(lang) {\n  console.log('[Translations] Loading translations for:', lang);\n  if (translationCache[lang]) {\n    console.log('[Translations] Returning cached translations for:', lang);\n    return translationCache[lang];\n  }\n  \n  try {\n    console.log('[Translations] Fetching /i18n/' + lang + '.json...');\n    const response = await fetch(`/i18n/${lang}.json`);\n    if (!response.ok) {\n      throw new Error(`Failed to load ${lang}.json`);\n    }\n    const data = await response.json();\n    console.log('[Translations] Loaded', Object.keys(data).length, 'keys for', lang);\n    translationCache[lang] = data;\n    return data;\n  } catch (error) {\n    console.warn(`[Translations] Could not load translations for '${lang}':`, error);\n    if (lang !== 'en') {\n      return loadTranslations('en');\n    }\n    return fallbackTranslations;\n  }\n}\n\n// --- Apply Translations (Sync) ---\nfunction applyTranslationsSync(translations, container = document) {\n  console.log('[Translations] Applying translations to', container === document ? 'page' : 'container');\n  function containsHTML(text) {\n    return /<[a-z][\\s\\S]*>/i.test(text);\n  }\n  \n  const translateEls = container.querySelectorAll('[data-translate]');\n  console.log('[Translations] Found', translateEls.length, 'elements with data-translate');\n  let appliedCount = 0;\n  translateEls.forEach(el => {\n    const key = el.getAttribute('data-translate');\n    if (translations[key]) {\n      if (containsHTML(translations[key])) {\n        el.innerHTML = translations[key];\n      } else {\n        el.textContent = translations[key];\n      }\n      appliedCount++;\n    }\n  });\n  console.log('[Translations] Applied', appliedCount, 'translations');\n  \n  container.querySelectorAll('[data-translate-placeholder]').forEach(el => {\n    const key = el.getAttribute('data-translate-placeholder');\n    if (translations[key]) {\n      el.placeholder = translations[key];\n    }\n  });\n  \n  container.querySelectorAll('[data-translate-html]').forEach(el => {\n    const key = el.getAttribute('data-translate-html');\n    if (translations[key]) {\n      el.innerHTML = translations[key];\n    }\n  });\n}\n\n// --- Apply Translations (Async) ---\nasync function applyTranslations(langOrContainer) {\n  if (langOrContainer instanceof HTMLElement) {\n    const currentLang = getCurrentLanguage();\n    const translations = await loadTranslations(currentLang);\n    applyTranslationsSync(translations, langOrContainer);\n    return translations;\n  }\n  \n  const lang = langOrContainer || getCurrentLanguage();\n  const translations = await loadTranslations(lang);\n  applyTranslationsSync(translations);\n  return translations;\n}\n\n// --- Set Language ---\nasync function setLanguage(lang) {\n  console.log('[Translations] setLanguage called with:', lang);\n  if (!supportedLanguages.includes(lang)) {\n    console.warn(`Unsupported language: ${lang}`);\n    lang = 'en';\n  }\n  \n  localStorage.setItem('mindspace_language', lang);\n  localStorage.setItem('mindspace-language', lang);\n  document.documentElement.lang = lang;\n  console.log('[Translations] Set document lang to:', lang);\n  \n  document.querySelectorAll('[data-language-select]').forEach(select => {\n    select.value = lang;\n  });\n  \n  try {\n    await applyTranslations(lang);\n    console.log('[Translations] Successfully applied translations for:', lang);\n  } catch (error) {\n    console.error('[Translations] Error applying translations:', error);\n  }\n  \n  window.dispatchEvent(new CustomEvent('translations-ready', { \n    detail: { lang: lang, translations: translationCache[lang] } \n  }));\n}\n\n// --- Translation Getters ---\nasync function getTranslation(key, lang = null) {\n  const language = lang || getCurrentLanguage();\n  const translations = await loadTranslations(language);\n  return translations[key] || fallbackTranslations[key] || key;\n}\n\nfunction getTranslationSync(key, lang = null) {\n  const language = lang || getCurrentLanguage();\n  const translations = translationCache[language] || translationCache['en'] || fallbackTranslations;\n  return translations[key] || key;\n}\n\n// --- Event Delegation ---\ndocument.addEventListener('change', function(e) {\n  if (e.target && e.target.matches('[data-language-select]')) {\n    console.log('[Translations] Language changed to:', e.target.value);\n    setLanguage(e.target.value);\n  }\n});\n\n// --- Initialization ---\ndocument.addEventListener('DOMContentLoaded', async function() {\n  console.log('[Translations] Initializing translation system...');\n  const currentLang = getCurrentLanguage();\n  console.log('[Translations] Current language:', currentLang);\n  \n  const langSelects = document.querySelectorAll('[data-language-select]');\n  console.log('[Translations] Found', langSelects.length, 'language selectors');\n  langSelects.forEach(langSelect => {\n    langSelect.value = currentLang;\n  });\n  \n  document.documentElement.lang = currentLang;\n  await applyTranslations(currentLang);\n  console.log('[Translations] Initial translations applied');\n  \n  window.dispatchEvent(new CustomEvent('translations-ready', { \n    detail: { lang: currentLang, translations: translationCache[currentLang] } \n  }));\n});\n\n// --- Public API ---\nwindow.MindSpaceTranslations = {\n  setLanguage,\n  getCurrentLanguage,\n  applyTranslations,\n  getTranslation,\n  getTranslationSync,\n  loadTranslations,\n  supportedLanguages\n};\n\n// --- Legacy Compatibility ---\nwindow.translations = new Proxy({}, {\n  get: function(target, lang) {\n    return translationCache[lang] || {};\n  }\n});\n","path":null,"size_bytes":6375,"size_tokens":null},"mindspace-build/js/quote-banner.js":{"content":"// ==================== QUOTE BANNER & WELLNESS TIP ====================\n\n(function() {\n  'use strict';\n\n  // --- Quotes Data ---\n  const quotes = [\n    { text: 'quote_1_text', author: 'quote_1_author' },\n    { text: 'quote_2_text', author: 'quote_2_author' },\n    { text: 'quote_3_text', author: 'quote_3_author' },\n    { text: 'quote_4_text', author: 'quote_4_author' },\n    { text: 'quote_5_text', author: 'quote_5_author' },\n    { text: 'quote_6_text', author: 'quote_6_author' },\n    { text: 'quote_7_text', author: 'quote_7_author' }\n  ];\n\n  const fallbackQuotes = {\n    quote_1_text: \"You don't have to control your thoughts. You just have to stop letting them control you.\",\n    quote_1_author: \"Dan Millman\",\n    quote_2_text: \"Mental health is not a destination, but a process. It's about how you drive, not where you're going.\",\n    quote_2_author: \"Noam Shpancer\",\n    quote_3_text: \"There is hope, even when your brain tells you there isn't.\",\n    quote_3_author: \"John Green\",\n    quote_4_text: \"Self-care is how you take your power back.\",\n    quote_4_author: \"Lalah Delia\",\n    quote_5_text: \"You are not your illness. You have an individual story to tell. You have a name, a history, a personality.\",\n    quote_5_author: \"Julian Seifter\",\n    quote_6_text: \"Healing takes time, and asking for help is a courageous step.\",\n    quote_6_author: \"Mariska Hargitay\",\n    quote_7_text: \"Be patient with yourself. Self-growth is tender; it's holy ground.\",\n    quote_7_author: \"Stephen Covey\"\n  };\n\n  // --- Wellness Tips Data ---\n  const wellnessTips = [\n    { title: 'tip_sunday_title', text: 'tip_sunday_text', icon: 'ðŸŒ…', link: '/articles/mindfulness.html' },\n    { title: 'tip_monday_title', text: 'tip_monday_text', icon: 'ðŸŽ¯', link: '/support/' },\n    { title: 'tip_tuesday_title', text: 'tip_tuesday_text', icon: 'ðŸ’¬', link: '/community/' },\n    { title: 'tip_wednesday_title', text: 'tip_wednesday_text', icon: 'ðŸŒ¿', link: '/articles/stress.html' },\n    { title: 'tip_thursday_title', text: 'tip_thursday_text', icon: 'ðŸ“', link: '/support/#tools' },\n    { title: 'tip_friday_title', text: 'tip_friday_text', icon: 'ðŸŽ‰', link: '/resourcelib/' },\n    { title: 'tip_saturday_title', text: 'tip_saturday_text', icon: 'ðŸ’¤', link: '/articles/sleep.html' }\n  ];\n\n  const fallbackTips = {\n    tip_sunday_title: \"Start Fresh\",\n    tip_sunday_text: \"Begin your week with intention. Take 5 minutes to set a simple wellness goal for the week ahead.\",\n    tip_monday_title: \"Mindful Monday\",\n    tip_monday_text: \"Try a 2-minute breathing exercise before starting work. Inhale for 4 counts, hold for 4, exhale for 6.\",\n    tip_tuesday_title: \"Connect Today\",\n    tip_tuesday_text: \"Reach out to someone you care about. A simple message can strengthen bonds and boost mood.\",\n    tip_wednesday_title: \"Midweek Reset\",\n    tip_wednesday_text: \"Take a short walk outside if possible. Even 10 minutes of movement can reduce stress significantly.\",\n    tip_thursday_title: \"Gratitude Practice\",\n    tip_thursday_text: \"Write down three things you're grateful for today. This simple habit rewires your brain for positivity.\",\n    tip_friday_title: \"Celebrate Wins\",\n    tip_friday_text: \"Acknowledge what you accomplished this week, no matter how small. Every step forward counts.\",\n    tip_saturday_title: \"Rest & Recharge\",\n    tip_saturday_text: \"Give yourself permission to rest today. Quality sleep is essential for mental wellness.\",\n    tip_day_label: \"Today's Wellness Tip\"\n  };\n\n  // --- State ---\n  let currentQuoteIndex = 0;\n  let autoRotateInterval = null;\n  let translations = {};\n\n  // --- Translation Helper ---\n  function t(key) {\n    return translations[key] || fallbackQuotes[key] || fallbackTips[key] || key;\n  }\n\n  // --- Quote Banner ---\n  function initQuoteBanner() {\n    const banner = document.querySelector('.quote-banner');\n    if (!banner) return;\n\n    const textEl = banner.querySelector('.quote-banner__text');\n    const authorEl = banner.querySelector('.quote-banner__author');\n    const dotsContainer = banner.querySelector('.quote-banner__controls');\n\n    if (!textEl || !authorEl || !dotsContainer) return;\n\n    dotsContainer.innerHTML = '';\n    quotes.forEach((_, index) => {\n      const dot = document.createElement('button');\n      dot.className = 'quote-banner__dot' + (index === 0 ? ' active' : '');\n      dot.setAttribute('aria-label', `Quote ${index + 1} of ${quotes.length}`);\n      dot.setAttribute('tabindex', '0');\n      dot.addEventListener('click', () => goToQuote(index));\n      dotsContainer.appendChild(dot);\n    });\n\n    displayQuote(0);\n\n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n    \n    if (!prefersReducedMotion) {\n      startAutoRotate();\n    }\n\n    banner.addEventListener('mouseenter', stopAutoRotate);\n    banner.addEventListener('mouseleave', () => {\n      if (!prefersReducedMotion) startAutoRotate();\n    });\n\n    banner.addEventListener('focusin', stopAutoRotate);\n    banner.addEventListener('focusout', (e) => {\n      if (!banner.contains(e.relatedTarget) && !prefersReducedMotion) {\n        startAutoRotate();\n      }\n    });\n  }\n\n  // --- Display Quote ---\n  function displayQuote(index) {\n    const banner = document.querySelector('.quote-banner');\n    if (!banner) return;\n\n    const textEl = banner.querySelector('.quote-banner__text');\n    const authorEl = banner.querySelector('.quote-banner__author');\n    const dots = banner.querySelectorAll('.quote-banner__dot');\n\n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n\n    if (prefersReducedMotion) {\n      textEl.textContent = t(quotes[index].text);\n      authorEl.textContent = 'â€” ' + t(quotes[index].author);\n    } else {\n      textEl.classList.add('fade-out');\n      authorEl.classList.add('fade-out');\n\n      setTimeout(() => {\n        textEl.textContent = t(quotes[index].text);\n        authorEl.textContent = 'â€” ' + t(quotes[index].author);\n        textEl.classList.remove('fade-out');\n        authorEl.classList.remove('fade-out');\n      }, 500);\n    }\n\n    dots.forEach((dot, i) => {\n      dot.classList.toggle('active', i === index);\n    });\n\n    currentQuoteIndex = index;\n  }\n\n  // --- Quote Navigation ---\n  function goToQuote(index) {\n    stopAutoRotate();\n    displayQuote(index);\n    \n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n    if (!prefersReducedMotion) {\n      setTimeout(startAutoRotate, 5000);\n    }\n  }\n\n  function nextQuote() {\n    const nextIndex = (currentQuoteIndex + 1) % quotes.length;\n    displayQuote(nextIndex);\n  }\n\n  // --- Auto-Rotation ---\n  function startAutoRotate() {\n    stopAutoRotate();\n    autoRotateInterval = setInterval(nextQuote, 12000);\n  }\n\n  function stopAutoRotate() {\n    if (autoRotateInterval) {\n      clearInterval(autoRotateInterval);\n      autoRotateInterval = null;\n    }\n  }\n\n  // --- Wellness Tip ---\n  function initWellnessTip() {\n    const tipSection = document.querySelector('.wellness-tip');\n    if (!tipSection) return;\n\n    const titleEl = tipSection.querySelector('.wellness-tip__title');\n    const textEl = tipSection.querySelector('.wellness-tip__text');\n    const iconEl = tipSection.querySelector('.wellness-tip__icon');\n    const actionEl = tipSection.querySelector('.wellness-tip__action');\n    const dayEl = tipSection.querySelector('.wellness-tip__day');\n\n    if (!titleEl || !textEl) return;\n\n    const today = new Date().getDay();\n    const tip = wellnessTips[today];\n\n    titleEl.textContent = t(tip.title);\n    textEl.textContent = t(tip.text);\n    \n    if (iconEl) {\n      iconEl.textContent = tip.icon;\n    }\n    \n    if (actionEl && tip.link) {\n      actionEl.href = tip.link;\n    }\n\n    if (dayEl) {\n      const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n      dayEl.textContent = days[today] + \"'s wellness focus\";\n    }\n  }\n\n  // --- Initialization ---\n  async function init() {\n    const lang = localStorage.getItem('mindspace-language') || 'en';\n    \n    try {\n      const response = await fetch(`/i18n/${lang}.json`);\n      if (response.ok) {\n        translations = await response.json();\n      }\n    } catch (e) {\n      console.warn('Could not load translations for quote banner');\n    }\n\n    initQuoteBanner();\n    initWellnessTip();\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n\n  // --- Language Change Handler ---\n  window.addEventListener('languageChanged', async (e) => {\n    const lang = e.detail?.language || 'en';\n    try {\n      const response = await fetch(`/i18n/${lang}.json`);\n      if (response.ok) {\n        translations = await response.json();\n      }\n    } catch (err) {\n      console.warn('Could not reload translations');\n    }\n    \n    displayQuote(currentQuoteIndex);\n    initWellnessTip();\n  });\n\n})();\n","path":null,"size_bytes":8942,"size_tokens":null},"mindspace-build/js/settings.js":{"content":"// ==================== SETTINGS ====================\n\n(function() {\n  'use strict';\n\n  // --- Storage Keys ---\n  const STORAGE_KEYS = {\n    theme: 'mindspace_theme',\n    fontSize: 'mindspace_font_size',\n    reduceMotion: 'mindspace_reduce_motion',\n    highContrast: 'mindspace_high_contrast',\n    colorblind: 'mindspace_colorblind',\n    adhdMode: 'mindspace_adhd_mode',\n    dyslexiaFont: 'mindspace_dyslexia_font',\n    accentColor: 'mindspace_accent_color'\n  };\n\n  // --- Accent Colors ---\n  const ACCENT_COLORS = {\n    blue:   { hex: '#5BA4E6', hover: '#4893D4', rgb: '91, 164, 230', light: '#a3c8ed', soft: '#bde0fe', dark: '#2d6ab0', gradEnd: '#7BBDF7', text: '#245a8c' },\n    purple: { hex: '#9b7ed9', hover: '#8a6dc8', rgb: '155, 126, 217', light: '#c9b8ec', soft: '#f3eefb', dark: '#6b4fb5', gradEnd: '#b99ae6', text: '#5a3d9e' },\n    sky:    { hex: '#4a90d9', hover: '#3d7fc8', rgb: '74, 144, 217',  light: '#a3c8ed', soft: '#eaf2fb', dark: '#2d6ab0', gradEnd: '#6daeed', text: '#245a8c' },\n    green:  { hex: '#4db896', hover: '#3fa884', rgb: '77, 184, 150',  light: '#a3dbc7', soft: '#e8f7f1', dark: '#2e8a6a', gradEnd: '#6fd4aa', text: '#267558' },\n    teal:   { hex: '#38b2ac', hover: '#2d9d98', rgb: '56, 178, 172',  light: '#96d8d4', soft: '#e6f5f4', dark: '#238079', gradEnd: '#5fccc6', text: '#1d6b65' },\n    pink:   { hex: '#d97eab', hover: '#c86d9a', rgb: '217, 126, 171', light: '#ecbdd5', soft: '#fbeef4', dark: '#b4547f', gradEnd: '#e9a3c3', text: '#993f6a' },\n    orange: { hex: '#e09c5c', hover: '#d08b4b', rgb: '224, 156, 92',  light: '#f0cca3', soft: '#fdf3e8', dark: '#b87430', gradEnd: '#edb87a', text: '#9a6228' },\n    red:    { hex: '#e07070', hover: '#d05f5f', rgb: '224, 112, 112', light: '#f0b3b3', soft: '#fdeaea', dark: '#b84444', gradEnd: '#ed9494', text: '#9a3535' }\n  };\n\n  const DEFAULT_ACCENT = 'blue';\n\n  // --- Preference Helpers ---\n  function getPreference(key, defaultValue) {\n    try {\n      const value = localStorage.getItem(key);\n      return value !== null ? value : defaultValue;\n    } catch (e) {\n      return defaultValue;\n    }\n  }\n\n  function setPreference(key, value) {\n    try {\n      localStorage.setItem(key, value);\n    } catch (e) {\n      console.warn('Could not save preference:', key);\n    }\n  }\n\n  // --- Theme ---\n  function getSystemThemePreference() {\n    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      return 'dark';\n    }\n    return 'light';\n  }\n\n  function applyTheme(theme) {\n    const effectiveTheme = theme === 'system' ? getSystemThemePreference() : theme;\n    \n    if (effectiveTheme === 'dark') {\n      document.documentElement.setAttribute('data-theme', 'dark');\n    } else {\n      document.documentElement.removeAttribute('data-theme');\n    }\n\n    document.querySelectorAll('[data-theme-toggle]').forEach(toggle => {\n      toggle.checked = effectiveTheme === 'dark';\n    });\n    \n    const storedAccent = getPreference(STORAGE_KEYS.accentColor, null);\n    if (!storedAccent) {\n      applyAccentColor(DEFAULT_ACCENT);\n    }\n  }\n\n  // --- Font Size ---\n  function applyFontSize(size) {\n    document.documentElement.setAttribute('data-font-size', size);\n    \n    document.querySelectorAll('select[data-font-size-select]').forEach(select => {\n      select.value = size;\n    });\n  }\n\n  // --- Reduce Motion ---\n  function applyReduceMotion(enabled) {\n    if (enabled === 'true' || enabled === true) {\n      document.documentElement.setAttribute('data-reduce-motion', 'true');\n    } else {\n      document.documentElement.removeAttribute('data-reduce-motion');\n    }\n\n    document.querySelectorAll('[data-reduce-motion-toggle]').forEach(toggle => {\n      if (toggle.tagName === 'INPUT') {\n        toggle.checked = enabled === 'true' || enabled === true;\n      }\n    });\n  }\n\n  // --- High Contrast ---\n  function applyHighContrast(enabled) {\n    if (enabled === 'true' || enabled === true) {\n      document.documentElement.setAttribute('data-high-contrast', 'true');\n    } else {\n      document.documentElement.removeAttribute('data-high-contrast');\n    }\n\n    document.querySelectorAll('[data-high-contrast-toggle]').forEach(toggle => {\n      if (toggle.tagName === 'INPUT') {\n        toggle.checked = enabled === 'true' || enabled === true;\n      }\n    });\n  }\n\n  // --- Colorblind Mode ---\n  function applyColorblind(mode) {\n    if (mode && mode !== 'none') {\n      document.documentElement.setAttribute('data-colorblind', mode);\n    } else {\n      document.documentElement.removeAttribute('data-colorblind');\n    }\n\n    document.querySelectorAll('select[data-colorblind-select]').forEach(select => {\n      select.value = mode || 'none';\n    });\n  }\n\n  // --- ADHD Mode ---\n  function applyAdhdMode(enabled) {\n    if (enabled === 'true' || enabled === true) {\n      document.documentElement.setAttribute('data-adhd-mode', 'true');\n    } else {\n      document.documentElement.removeAttribute('data-adhd-mode');\n    }\n\n    document.querySelectorAll('[data-adhd-toggle]').forEach(toggle => {\n      if (toggle.tagName === 'INPUT') {\n        toggle.checked = enabled === 'true' || enabled === true;\n      }\n    });\n  }\n\n  // --- Dyslexia Font ---\n  function applyDyslexiaFont(enabled) {\n    if (enabled === 'true' || enabled === true) {\n      document.documentElement.setAttribute('data-dyslexia-font', 'true');\n    } else {\n      document.documentElement.removeAttribute('data-dyslexia-font');\n    }\n\n    document.querySelectorAll('[data-dyslexia-toggle]').forEach(toggle => {\n      if (toggle.tagName === 'INPUT') {\n        toggle.checked = enabled === 'true' || enabled === true;\n      }\n    });\n  }\n\n  // --- Accent Color ---\n  function applyAccentColor(colorName) {\n    const color = ACCENT_COLORS[colorName] || ACCENT_COLORS.blue;\n    const effectiveColorName = ACCENT_COLORS[colorName] ? colorName : 'blue';\n    \n    const root = document.documentElement;\n    root.style.setProperty('--user-accent', color.hex);\n    root.style.setProperty('--user-accent-hover', color.hover);\n    root.style.setProperty('--user-accent-rgb', color.rgb);\n    root.style.setProperty('--user-accent-glow', `rgba(${color.rgb}, 0.3)`);\n    root.style.setProperty('--user-accent-light', color.light);\n    root.style.setProperty('--user-accent-soft', color.soft);\n    root.style.setProperty('--user-accent-dark', color.dark);\n    root.style.setProperty('--user-accent-grad-end', color.gradEnd);\n    root.style.setProperty('--user-accent-text', color.text);\n    \n    root.setAttribute('data-accent', effectiveColorName);\n    \n    document.querySelectorAll('[data-accent-color]').forEach(btn => {\n      const isActive = btn.getAttribute('data-accent-color') === effectiveColorName;\n      btn.classList.toggle('active', isActive);\n      btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');\n    });\n    \n    document.querySelectorAll('select[data-accent-select]').forEach(select => {\n      select.value = effectiveColorName;\n    });\n  }\n\n  // --- Settings Initialization ---\n  function initSettings() {\n    const savedTheme = getPreference(STORAGE_KEYS.theme, 'light');\n    const savedFontSize = getPreference(STORAGE_KEYS.fontSize, 'normal');\n    const savedReduceMotion = getPreference(STORAGE_KEYS.reduceMotion, 'false');\n    const savedColorblind = getPreference(STORAGE_KEYS.colorblind, 'none');\n    const savedAdhdMode = getPreference(STORAGE_KEYS.adhdMode, 'false');\n    const savedDyslexiaFont = getPreference(STORAGE_KEYS.dyslexiaFont, 'false');\n    \n    const savedAccentColor = getPreference(STORAGE_KEYS.accentColor, DEFAULT_ACCENT);\n    const savedHighContrast = getPreference(STORAGE_KEYS.highContrast, 'false');\n\n    applyTheme(savedTheme);\n    applyFontSize(savedFontSize);\n    applyReduceMotion(savedReduceMotion);\n    applyHighContrast(savedHighContrast);\n    applyColorblind(savedColorblind);\n    applyAdhdMode(savedAdhdMode);\n    applyDyslexiaFont(savedDyslexiaFont);\n    applyAccentColor(savedAccentColor);\n  }\n\n  // --- Settings Listeners ---\n  function initSettingsListeners() {\n    document.querySelectorAll('[data-theme-toggle]').forEach(toggle => {\n      toggle.addEventListener('change', function() {\n        const newTheme = this.checked ? 'dark' : 'light';\n        setPreference(STORAGE_KEYS.theme, newTheme);\n        applyTheme(newTheme);\n      });\n    });\n\n    document.querySelectorAll('select[data-font-size-select]').forEach(select => {\n      select.addEventListener('change', function() {\n        const newSize = this.value;\n        setPreference(STORAGE_KEYS.fontSize, newSize);\n        applyFontSize(newSize);\n      });\n    });\n\n    document.querySelectorAll('input[data-reduce-motion-toggle]').forEach(toggle => {\n      toggle.addEventListener('change', function() {\n        const newValue = this.checked ? 'true' : 'false';\n        setPreference(STORAGE_KEYS.reduceMotion, newValue);\n        applyReduceMotion(newValue);\n      });\n    });\n\n    document.querySelectorAll('input[data-high-contrast-toggle]').forEach(toggle => {\n      toggle.addEventListener('change', function() {\n        const newValue = this.checked ? 'true' : 'false';\n        setPreference(STORAGE_KEYS.highContrast, newValue);\n        applyHighContrast(newValue);\n      });\n    });\n\n    document.querySelectorAll('select[data-colorblind-select]').forEach(select => {\n      select.addEventListener('change', function() {\n        const newMode = this.value;\n        setPreference(STORAGE_KEYS.colorblind, newMode);\n        applyColorblind(newMode);\n      });\n    });\n\n    document.querySelectorAll('input[data-adhd-toggle]').forEach(toggle => {\n      toggle.addEventListener('change', function() {\n        const newValue = this.checked ? 'true' : 'false';\n        setPreference(STORAGE_KEYS.adhdMode, newValue);\n        applyAdhdMode(newValue);\n      });\n    });\n\n    document.querySelectorAll('input[data-dyslexia-toggle]').forEach(toggle => {\n      toggle.addEventListener('change', function() {\n        const newValue = this.checked ? 'true' : 'false';\n        setPreference(STORAGE_KEYS.dyslexiaFont, newValue);\n        applyDyslexiaFont(newValue);\n      });\n    });\n\n    document.querySelectorAll('[data-accent-color]').forEach(btn => {\n      btn.addEventListener('click', function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const colorName = this.getAttribute('data-accent-color');\n        setPreference(STORAGE_KEYS.accentColor, colorName);\n        applyAccentColor(colorName);\n      });\n    });\n\n    document.querySelectorAll('select[data-accent-select]').forEach(select => {\n      select.addEventListener('change', function() {\n        const colorName = this.value;\n        setPreference(STORAGE_KEYS.accentColor, colorName);\n        applyAccentColor(colorName);\n      });\n    });\n  }\n\n  // --- Settings Dropdown ---\n  function initSettingsDropdown() {\n    const settingsWrappers = document.querySelectorAll('.settings-wrapper');\n    \n    settingsWrappers.forEach(wrapper => {\n      const settingsToggle = wrapper.querySelector('[data-settings-toggle]');\n      const settingsDropdown = wrapper.querySelector('[data-settings-dropdown]');\n\n      if (settingsToggle) {\n        settingsToggle.addEventListener('click', function(e) {\n          e.stopPropagation();\n          e.preventDefault();\n          if (window.SettingsModal && window.SettingsModal.open) {\n            window.SettingsModal.open();\n          } else if (settingsDropdown) {\n            document.querySelectorAll('.settings-dropdown.active').forEach(d => {\n              if (d !== settingsDropdown) d.classList.remove('active');\n            });\n            settingsDropdown.classList.toggle('active');\n          }\n        });\n\n        if (settingsDropdown) {\n          settingsDropdown.addEventListener('click', function(e) {\n            e.stopPropagation();\n          });\n        }\n      }\n    });\n\n    document.addEventListener('click', function(e) {\n      document.querySelectorAll('.settings-dropdown.active').forEach(dropdown => {\n        dropdown.classList.remove('active');\n      });\n    });\n  }\n\n  // --- User Button ---\n  function initUserButton() {\n    const userBtns = document.querySelectorAll('[data-user-btn]');\n    \n    if (userBtns.length > 0 && typeof MindSpaceAuth !== 'undefined') {\n      MindSpaceAuth.onAuthChange(function(user) {\n        userBtns.forEach(userBtn => {\n          if (user) {\n            userBtn.classList.add('signed-in');\n            userBtn.setAttribute('title', user.email || 'Signed in');\n          } else {\n            userBtn.classList.remove('signed-in');\n            userBtn.setAttribute('title', 'Not signed in');\n          }\n        });\n      });\n    }\n  }\n\n  // --- Initialize ---\n  initSettings();\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', function() {\n      initSettingsListeners();\n      initSettingsDropdown();\n      initUserButton();\n    });\n  } else {\n    initSettingsListeners();\n    initSettingsDropdown();\n    initUserButton();\n  }\n\n  // --- System Theme Change Listener ---\n  if (window.matchMedia) {\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function() {\n      const savedTheme = getPreference(STORAGE_KEYS.theme, 'light');\n      if (savedTheme === 'system') {\n        applyTheme('system');\n      }\n    });\n  }\n\n  // --- Public API ---\n  window.MindSpaceSettings = {\n    setTheme: function(theme) {\n      setPreference(STORAGE_KEYS.theme, theme);\n      applyTheme(theme);\n    },\n    applyTheme: applyTheme,\n    setFontSize: function(size) {\n      setPreference(STORAGE_KEYS.fontSize, size);\n      applyFontSize(size);\n    },\n    applyFontSize: applyFontSize,\n    setReduceMotion: function(enabled) {\n      setPreference(STORAGE_KEYS.reduceMotion, enabled ? 'true' : 'false');\n      applyReduceMotion(enabled);\n    },\n    applyReduceMotion: applyReduceMotion,\n    setHighContrast: function(enabled) {\n      setPreference(STORAGE_KEYS.highContrast, enabled ? 'true' : 'false');\n      applyHighContrast(enabled);\n    },\n    applyHighContrast: applyHighContrast,\n    setColorblind: function(mode) {\n      setPreference(STORAGE_KEYS.colorblind, mode);\n      applyColorblind(mode);\n    },\n    applyColorblind: applyColorblind,\n    setAdhdMode: function(enabled) {\n      setPreference(STORAGE_KEYS.adhdMode, enabled ? 'true' : 'false');\n      applyAdhdMode(enabled);\n    },\n    applyAdhdMode: applyAdhdMode,\n    setDyslexiaFont: function(enabled) {\n      setPreference(STORAGE_KEYS.dyslexiaFont, enabled ? 'true' : 'false');\n      applyDyslexiaFont(enabled);\n    },\n    applyDyslexiaFont: applyDyslexiaFont,\n    setAccentColor: function(colorName) {\n      setPreference(STORAGE_KEYS.accentColor, colorName);\n      applyAccentColor(colorName);\n    },\n    applyAccentColor: applyAccentColor,\n    getAccentColors: function() {\n      return ACCENT_COLORS;\n    },\n    getPreferences: function() {\n      return {\n        theme: getPreference(STORAGE_KEYS.theme, 'light'),\n        fontSize: getPreference(STORAGE_KEYS.fontSize, 'normal'),\n        reduceMotion: getPreference(STORAGE_KEYS.reduceMotion, 'false') === 'true',\n        highContrast: getPreference(STORAGE_KEYS.highContrast, 'false') === 'true',\n        colorblind: getPreference(STORAGE_KEYS.colorblind, 'none'),\n        adhdMode: getPreference(STORAGE_KEYS.adhdMode, 'false') === 'true',\n        dyslexiaFont: getPreference(STORAGE_KEYS.dyslexiaFont, 'false') === 'true',\n        accentColor: getPreference(STORAGE_KEYS.accentColor, DEFAULT_ACCENT)\n      };\n    }\n  };\n})();\n","path":null,"size_bytes":15482,"size_tokens":null},"support/support.js":{"content":"// ==================== SUPPORT PAGE ====================\ndocument.addEventListener('DOMContentLoaded', function() {\n  // --- Email Validation ---\n  const DISPOSABLE_DOMAINS = [\n    'tempmail.com', 'throwaway.email', 'guerrillamail.com', 'mailinator.com',\n    'temp-mail.org', '10minutemail.com', 'fakeinbox.com', 'trashmail.com',\n    'tempail.com', 'dispostable.com', 'yopmail.com', 'maildrop.cc',\n    'sharklasers.com', 'guerrillamail.info', 'grr.la', 'spam4.me',\n    'tempmailo.com', 'mohmal.com', 'getnada.com', 'mailnesia.com',\n    'temp.email', 'tempinbox.com', 'fakemailgenerator.com', 'emailondeck.com',\n    'mintemail.com', 'discard.email', 'spamgourmet.com', 'mytemp.email'\n  ];\n\n  function isValidEmail(email) {\n    const emailRegex = /^[a-zA-Z0-9](?:[a-zA-Z0-9._-]*[a-zA-Z0-9])?@[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?(?:\\.[a-zA-Z]{2,})+$/;\n    if (!emailRegex.test(email)) return false;\n\n    const domain = email.split('@')[1].toLowerCase();\n    if (DISPOSABLE_DOMAINS.some(d => domain.includes(d))) return false;\n\n    if (domain.length < 4) return false;\n\n    return true;\n  }\n\n  const appointmentForm = document.getElementById('appointmentForm');\n\n  // ==================== APPOINTMENT FORM ====================\n  const appointmentDate = document.getElementById('appointmentDate');\n\n  if (appointmentDate) {\n    const today = new Date();\n    const minDate = new Date(today);\n    minDate.setDate(today.getDate() + 1);\n\n    const maxDate = new Date(today);\n    maxDate.setMonth(today.getMonth() + 3);\n\n    appointmentDate.min = minDate.toISOString().split('T')[0];\n    appointmentDate.max = maxDate.toISOString().split('T')[0];\n  }\n\n  if (appointmentForm) {\n    appointmentForm.addEventListener('submit', async function(e) {\n      e.preventDefault();\n\n      const emailInput = document.getElementById('appointmentEmail');\n      const email = emailInput ? emailInput.value.trim() : '';\n\n      if (!isValidEmail(email)) {\n        alert('Please enter a valid email address. Temporary or disposable emails are not allowed.');\n        if (emailInput) emailInput.focus();\n        return;\n      }\n\n      const submitBtn = appointmentForm.querySelector('.form-submit');\n      const originalText = submitBtn.innerHTML;\n\n      submitBtn.innerHTML = '<ion-icon name=\"hourglass-outline\"></ion-icon><span>Sending...</span>';\n      submitBtn.disabled = true;\n\n      try {\n        const formData = new FormData(appointmentForm);\n        const response = await fetch(appointmentForm.action, {\n          method: 'POST',\n          body: formData,\n          headers: {\n            'Accept': 'application/json'\n          }\n        });\n\n        if (response.ok) {\n          submitBtn.innerHTML = '<ion-icon name=\"checkmark-circle-outline\"></ion-icon><span>Request Submitted!</span>';\n          submitBtn.style.background = '#4caf50';\n\n          setTimeout(function() {\n            appointmentForm.reset();\n            submitBtn.innerHTML = originalText;\n            submitBtn.disabled = false;\n            submitBtn.style.background = '';\n          }, 3000);\n        } else {\n          const data = await response.json();\n          throw new Error(data.error || 'Form submission failed');\n        }\n      } catch (error) {\n        console.error('Form submission error:', error);\n        submitBtn.innerHTML = '<ion-icon name=\"alert-circle-outline\"></ion-icon><span>Error - Try Again</span>';\n        submitBtn.style.background = '#e74c3c';\n\n        setTimeout(function() {\n          submitBtn.innerHTML = originalText;\n          submitBtn.disabled = false;\n          submitBtn.style.background = '';\n        }, 3000);\n      }\n    });\n  }\n\n  const searchInput = document.getElementById('supportSearch');\n\n  // ==================== SEARCH ====================\n  if (searchInput) {\n    searchInput.addEventListener('keypress', function(e) {\n      if (e.key === 'Enter') {\n        const query = searchInput.value.trim().toLowerCase();\n        if (query) {\n          const sections = {\n            'crisis': '#crisis',\n            'emergency': '#crisis',\n            '988': '#crisis',\n            'hotline': '#helplines',\n            'helpline': '#helplines',\n            'call': '#helplines',\n            'phone': '#helplines',\n            'resource': '#resources',\n            'anxiety': '#resources',\n            'depression': '#resources',\n            'stress': '#resources',\n            'self-help': '#self-help',\n            'breathing': '#self-help',\n            'grounding': '#self-help',\n            'exercise': '#self-help',\n            'appointment': '#appointment',\n            'schedule': '#appointment',\n            'book': '#appointment',\n            'session': '#appointment',\n            'therapy': '#appointment',\n            'faq': '#faq',\n            'question': '#faq'\n          };\n\n          let targetSection = null;\n          for (const [keyword, section] of Object.entries(sections)) {\n            if (query.includes(keyword)) {\n              targetSection = section;\n              break;\n            }\n          }\n\n          if (targetSection) {\n            const element = document.querySelector(targetSection);\n            if (element) {\n              element.scrollIntoView({ behavior: 'smooth', block: 'start' });\n            }\n          } else {\n            window.location.href = '../resourcelib/?search=' + encodeURIComponent(query);\n          }\n        }\n      }\n    });\n  }\n\n\n  const faqItems = document.querySelectorAll('.faq-item');\n  if (faqItems.length > 0) {\n\n  // ==================== FAQ ACCORDION ====================\n    faqItems.forEach(item => {\n      const summary = item.querySelector('summary');\n      if (summary) {\n        summary.addEventListener('click', function() {\n          faqItems.forEach(other => {\n            if (other !== item && other.hasAttribute('open')) {\n              other.removeAttribute('open');\n            }\n          });\n        });\n      }\n    });\n  }\n\n  const scrollProgress = document.querySelector('.scroll-progress');\n  const progressBar = document.querySelector('.scroll-progress__bar');\n\n  // ==================== SCROLL PROGRESS ====================\n  const dots = document.querySelectorAll('.scroll-progress__dot');\n\n  if (scrollProgress && dots.length > 0) {\n    const sections = [\n      { id: 'crisis', element: document.getElementById('crisis') },\n      { id: 'helplines', element: document.getElementById('helplines') },\n      { id: 'resources', element: document.getElementById('resources') },\n      { id: 'self-help', element: document.getElementById('self-help') },\n      { id: 'appointment', element: document.getElementById('appointment') },\n      { id: 'faq', element: document.getElementById('faq') }\n    ].filter(s => s.element);\n\n    dots.forEach(dot => {\n      dot.addEventListener('click', function() {\n        const sectionId = this.getAttribute('data-section');\n        const section = document.getElementById(sectionId);\n        if (section) {\n          section.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n      });\n    });\n\n    function updateScrollProgress() {\n      const scrollTop = window.scrollY;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n      const scrollPercent = (scrollTop / docHeight) * 100;\n\n      if (progressBar) {\n        progressBar.style.setProperty('--progress', scrollPercent + '%');\n      }\n\n      if (scrollTop > 300) {\n        scrollProgress.classList.add('visible');\n      } else {\n        scrollProgress.classList.remove('visible');\n      }\n\n      let currentSection = null;\n      const viewportMiddle = scrollTop + window.innerHeight / 3;\n\n      for (let i = sections.length - 1; i >= 0; i--) {\n        const section = sections[i];\n        if (section.element.offsetTop <= viewportMiddle) {\n          currentSection = section.id;\n          break;\n        }\n      }\n\n      dots.forEach(dot => {\n        const sectionId = dot.getAttribute('data-section');\n        if (sectionId === currentSection) {\n          dot.classList.add('active');\n        } else {\n          dot.classList.remove('active');\n        }\n      });\n    }\n\n    window.addEventListener('scroll', updateScrollProgress, { passive: true });\n    updateScrollProgress();\n  }\n\n\n\n\n\n  const breathingModal = document.getElementById('breathingModal');\n  const openBreathingBtn = document.getElementById('openBreathingTool');\n\n  // ==================== BREATHING TOOL ====================\n  const breathingCircle = document.getElementById('breathingCircle');\n  const breathingText = document.getElementById('breathingText');\n  const breathingTimer = document.getElementById('breathingTimer');\n  const startBreathingBtn = document.getElementById('startBreathing');\n  const stopBreathingBtn = document.getElementById('stopBreathing');\n  const breathingCyclesEl = document.getElementById('breathingCycles');\n  const breathingDurationEl = document.getElementById('breathingDuration');\n  const breathingAudioToggle = document.getElementById('breathingAudio');\n  const breathingContainer = document.querySelector('.breathing-circle-container');\n\n  const breathingPatterns = {\n    '478': { inhale: 4, hold: 7, exhale: 8, name: '4-7-8 Relaxing' },\n    'box': { inhale: 4, hold: 4, exhale: 4, holdOut: 4, name: 'Box Breathing' },\n    'calm': { inhale: 4, hold: 0, exhale: 6, name: 'Calm Breathing' }\n  };\n\n  let currentPattern = '478';\n  let breathingInterval = null;\n  let breathingTimeout = null;\n  let breathingCycles = 0;\n  let breathingStartTime = null;\n  let durationInterval = null;\n\n\n  let audioContext = null;\n\n  function playTone(frequency, duration) {\n    if (!breathingAudioToggle?.checked) return;\n    try {\n      if (!audioContext) {\n        audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      }\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n      oscillator.frequency.value = frequency;\n      oscillator.type = 'sine';\n      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);\n      oscillator.start(audioContext.currentTime);\n      oscillator.stop(audioContext.currentTime + duration);\n    } catch (e) {\n      console.log('Audio not supported');\n    }\n  }\n\n  function openBreathingModal() {\n    breathingModal?.classList.add('is-active');\n    document.body.style.overflow = 'hidden';\n  }\n\n  function closeBreathingModal() {\n    breathingModal?.classList.remove('is-active');\n    document.body.style.overflow = '';\n    stopBreathing();\n  }\n\n  function formatDuration(ms) {\n    const totalSeconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  }\n\n  function updateDuration() {\n    if (breathingStartTime) {\n      const elapsed = Date.now() - breathingStartTime;\n      if (breathingDurationEl) breathingDurationEl.textContent = formatDuration(elapsed);\n    }\n  }\n\n  function runBreathingCycle() {\n    const pattern = breathingPatterns[currentPattern];\n    let phase = 'inhale';\n    let countdown = pattern.inhale;\n\n    function updatePhase() {\n      if (breathingText) {\n        const phaseTexts = {\n          'inhale': 'Breathe In',\n          'hold': 'Hold',\n          'exhale': 'Breathe Out',\n          'holdOut': 'Hold'\n        };\n        breathingText.textContent = phaseTexts[phase];\n      }\n      if (breathingTimer) breathingTimer.textContent = countdown;\n\n\n      breathingCircle?.classList.remove('is-inhaling', 'is-holding', 'is-exhaling');\n      if (phase === 'inhale') {\n        breathingCircle?.classList.add('is-inhaling');\n        breathingCircle.style.transition = `transform ${pattern.inhale}s ease-in-out`;\n      } else if (phase === 'hold' || phase === 'holdOut') {\n        breathingCircle?.classList.add('is-holding');\n      } else if (phase === 'exhale') {\n        breathingCircle?.classList.add('is-exhaling');\n        breathingCircle.style.transition = `transform ${pattern.exhale}s ease-in-out`;\n      }\n    }\n\n    updatePhase();\n    playTone(440, 0.2);\n\n    breathingInterval = setInterval(() => {\n      countdown--;\n\n      if (countdown <= 0) {\n\n        if (phase === 'inhale') {\n          if (pattern.hold > 0) {\n            phase = 'hold';\n            countdown = pattern.hold;\n            playTone(523, 0.15);\n          } else {\n            phase = 'exhale';\n            countdown = pattern.exhale;\n            playTone(392, 0.2);\n          }\n        } else if (phase === 'hold') {\n          phase = 'exhale';\n          countdown = pattern.exhale;\n          playTone(392, 0.2);\n        } else if (phase === 'exhale') {\n          if (pattern.holdOut) {\n            phase = 'holdOut';\n            countdown = pattern.holdOut;\n            playTone(349, 0.15);\n          } else {\n\n            breathingCycles++;\n            if (breathingCyclesEl) breathingCyclesEl.textContent = breathingCycles;\n            phase = 'inhale';\n            countdown = pattern.inhale;\n            playTone(440, 0.2);\n          }\n        } else if (phase === 'holdOut') {\n\n          breathingCycles++;\n          if (breathingCyclesEl) breathingCyclesEl.textContent = breathingCycles;\n          phase = 'inhale';\n          countdown = pattern.inhale;\n          playTone(440, 0.2);\n        }\n        updatePhase();\n      } else {\n        if (breathingTimer) breathingTimer.textContent = countdown;\n      }\n    }, 1000);\n  }\n\n  function startBreathing() {\n    breathingCycles = 0;\n    if (breathingCyclesEl) breathingCyclesEl.textContent = '0';\n    breathingStartTime = Date.now();\n    durationInterval = setInterval(updateDuration, 1000);\n\n    startBreathingBtn.style.display = 'none';\n    stopBreathingBtn.style.display = 'block';\n    breathingContainer?.classList.add('is-active');\n\n    runBreathingCycle();\n  }\n\n  function stopBreathing() {\n    if (breathingInterval) {\n      clearInterval(breathingInterval);\n      breathingInterval = null;\n    }\n    if (durationInterval) {\n      clearInterval(durationInterval);\n      durationInterval = null;\n    }\n\n    startBreathingBtn.style.display = 'block';\n    stopBreathingBtn.style.display = 'none';\n    breathingContainer?.classList.remove('is-active');\n\n    breathingCircle?.classList.remove('is-inhaling', 'is-holding', 'is-exhaling');\n    if (breathingText) breathingText.textContent = 'Ready';\n    if (breathingTimer) breathingTimer.textContent = '';\n  }\n\n\n  openBreathingBtn?.addEventListener('click', openBreathingModal);\n\n  breathingModal?.querySelector('.wellness-modal__backdrop')?.addEventListener('click', closeBreathingModal);\n  breathingModal?.querySelector('.wellness-modal__close')?.addEventListener('click', closeBreathingModal);\n\n  startBreathingBtn?.addEventListener('click', startBreathing);\n  stopBreathingBtn?.addEventListener('click', stopBreathing);\n\n\n  document.querySelectorAll('.breathing-pattern').forEach(btn => {\n    btn.addEventListener('click', () => {\n      document.querySelectorAll('.breathing-pattern').forEach(b => b.classList.remove('is-active'));\n      btn.classList.add('is-active');\n      currentPattern = btn.dataset.pattern;\n      stopBreathing();\n    });\n  });\n\n\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n      if (breathingModal?.classList.contains('is-active')) closeBreathingModal();\n      if (groundingModal?.classList.contains('is-active')) closeGroundingModal();\n    }\n  });\n\n\n\n\n\n  const groundingModal = document.getElementById('groundingModal');\n  const openGroundingBtn = document.getElementById('openGroundingTool');\n  const groundingSteps = document.querySelectorAll('.grounding-step');\n  const groundingProgressBar = document.getElementById('groundingProgressBar');\n  const groundingPrevBtn = document.getElementById('groundingPrev');\n  const groundingNextBtn = document.getElementById('groundingNext');\n  const groundingRestartBtn = document.getElementById('groundingRestart');\n\n  const stepOrder = ['5', '4', '3', '2', '1', 'complete'];\n  let currentGroundingStep = 0;\n\n  function openGroundingModal() {\n    groundingModal?.classList.add('is-active');\n    document.body.style.overflow = 'hidden';\n    resetGrounding();\n  }\n\n  function closeGroundingModal() {\n    groundingModal?.classList.remove('is-active');\n    document.body.style.overflow = '';\n  }\n\n  function resetGrounding() {\n    currentGroundingStep = 0;\n    updateGroundingStep();\n\n\n    document.querySelectorAll('.grounding-input').forEach(input => {\n      input.value = '';\n    });\n\n    groundingPrevBtn.style.display = 'block';\n    groundingNextBtn.style.display = 'block';\n    groundingRestartBtn.style.display = 'none';\n  }\n\n  function updateGroundingStep() {\n    const stepId = stepOrder[currentGroundingStep];\n\n\n    groundingSteps.forEach(step => {\n      step.classList.remove('is-active');\n      if (step.dataset.step === stepId) {\n        step.classList.add('is-active');\n      }\n    });\n\n\n    const progress = (currentGroundingStep / (stepOrder.length - 1)) * 100;\n    if (groundingProgressBar) groundingProgressBar.style.width = `${progress}%`;\n\n\n    groundingPrevBtn.disabled = currentGroundingStep === 0;\n\n    if (stepId === 'complete') {\n      groundingPrevBtn.style.display = 'none';\n      groundingNextBtn.style.display = 'none';\n      groundingRestartBtn.style.display = 'block';\n    } else {\n      groundingPrevBtn.style.display = 'block';\n      groundingNextBtn.style.display = 'block';\n      groundingRestartBtn.style.display = 'none';\n    }\n\n\n    const currentStepEl = document.querySelector(`.grounding-step[data-step=\"${stepId}\"]`);\n    const firstInput = currentStepEl?.querySelector('.grounding-input');\n    if (firstInput) {\n      setTimeout(() => firstInput.focus(), 100);\n    }\n  }\n\n  function goToNextStep() {\n    if (currentGroundingStep < stepOrder.length - 1) {\n      currentGroundingStep++;\n      updateGroundingStep();\n    }\n  }\n\n  function goToPrevStep() {\n    if (currentGroundingStep > 0) {\n      currentGroundingStep--;\n      updateGroundingStep();\n    }\n  }\n\n\n  openGroundingBtn?.addEventListener('click', openGroundingModal);\n\n  groundingModal?.querySelector('.wellness-modal__backdrop')?.addEventListener('click', closeGroundingModal);\n  groundingModal?.querySelector('.wellness-modal__close')?.addEventListener('click', closeGroundingModal);\n\n  groundingNextBtn?.addEventListener('click', goToNextStep);\n  groundingPrevBtn?.addEventListener('click', goToPrevStep);\n  groundingRestartBtn?.addEventListener('click', resetGrounding);\n\n\n  document.querySelectorAll('.grounding-input').forEach((input, index, inputs) => {\n    input.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        const currentStep = input.closest('.grounding-step');\n        const stepInputs = currentStep.querySelectorAll('.grounding-input');\n        const inputIndex = Array.from(stepInputs).indexOf(input);\n\n        if (inputIndex < stepInputs.length - 1) {\n          stepInputs[inputIndex + 1].focus();\n        } else {\n          goToNextStep();\n        }\n      }\n    });\n  });\n\n\n\n\n\n  const faqSearchInput = document.getElementById('faqSearchInput');\n  const faqSearchClear = document.getElementById('faqSearchClear');\n  const faqTabs = document.querySelectorAll('.faq-split__tab');\n  const faqQuestions = document.querySelectorAll('.faq-split__question');\n  const faqNoResults = document.getElementById('faqNoResults');\n  const faqAnswerPanel = document.getElementById('faqAnswerPanel');\n  const faqPrevBtn = document.getElementById('faqPrevBtn');\n  const faqNextBtn = document.getElementById('faqNextBtn');\n\n  let activeCategory = 'all';\n  let currentFaqId = '1';\n\n  function getQuestionDataFromDOM(faqId) {\n    const questionEl = document.querySelector(`.faq-split__question[data-faq-id=\"${faqId}\"]`);\n    if (!questionEl) return null;\n\n    const catEl = questionEl.querySelector('.faq-split__question-cat');\n    const questionTextEl = questionEl.querySelector('.faq-split__question-text');\n    const answerDataEl = questionEl.querySelector('.faq-split__answer-data');\n    const tipDataEl = questionEl.querySelector('.faq-split__tip-data');\n\n    return {\n      category: catEl ? catEl.textContent.trim() : '',\n      categoryIcon: questionEl.dataset.catIcon || 'help-circle-outline',\n      question: questionTextEl ? questionTextEl.textContent : '',\n      answer: answerDataEl ? answerDataEl.textContent : '',\n      tip: tipDataEl ? tipDataEl.textContent : ''\n    };\n  }\n\n  function updateAnswerPanel(faqId) {\n    const data = getQuestionDataFromDOM(faqId);\n    if (!data || !faqAnswerPanel) return;\n\n    currentFaqId = faqId;\n\n    const answerCat = document.getElementById('faqAnswerCat');\n    const answerNum = document.getElementById('faqAnswerNum');\n    const answerQuestion = document.getElementById('faqAnswerQuestion');\n    const answerContent = document.getElementById('faqAnswerContent');\n    const answerTip = document.getElementById('faqAnswerTip');\n\n    if (answerCat) {\n      answerCat.innerHTML = `<ion-icon name=\"${data.categoryIcon}\"></ion-icon> ${data.category}`;\n    }\n    if (answerNum) {\n      answerNum.textContent = `Question ${faqId.padStart(2, '0')}`;\n    }\n    if (answerQuestion) {\n      answerQuestion.textContent = data.question;\n    }\n    if (answerContent) {\n      answerContent.innerHTML = `<p>${data.answer}</p>`;\n    }\n    if (answerTip) {\n      answerTip.textContent = data.tip;\n    }\n\n    faqQuestions.forEach(q => {\n      q.classList.toggle('active', q.dataset.faqId === faqId);\n    });\n\n    faqAnswerPanel.style.animation = 'none';\n    faqAnswerPanel.offsetHeight;\n    faqAnswerPanel.style.animation = 'faq-answer-slide-in 0.4s cubic-bezier(0.4, 0, 0.2, 1)';\n\n    document.querySelectorAll('.faq-split__feedback-btn').forEach(btn => {\n      btn.classList.remove('selected');\n    });\n\n    updateNavButtons();\n  }\n\n  function getVisibleQuestions() {\n    return Array.from(faqQuestions).filter(q => !q.classList.contains('hidden'));\n  }\n\n  function updateNavButtons() {\n    const visible = getVisibleQuestions();\n    const currentIndex = visible.findIndex(q => q.dataset.faqId === currentFaqId);\n\n    if (faqPrevBtn) {\n      faqPrevBtn.disabled = currentIndex <= 0;\n    }\n    if (faqNextBtn) {\n      faqNextBtn.disabled = currentIndex >= visible.length - 1;\n    }\n  }\n\n  faqQuestions.forEach(question => {\n    question.addEventListener('click', function() {\n      const faqId = this.dataset.faqId;\n      updateAnswerPanel(faqId);\n    });\n  });\n\n  faqTabs.forEach(tab => {\n    tab.addEventListener('click', function() {\n      const category = this.dataset.category;\n      activeCategory = category;\n\n      faqTabs.forEach(t => t.classList.remove('active'));\n      this.classList.add('active');\n\n      if (faqSearchInput) {\n        faqSearchInput.value = '';\n        if (faqSearchClear) faqSearchClear.style.display = 'none';\n      }\n\n      filterQuestions('', category);\n    });\n  });\n\n  if (faqSearchInput) {\n    faqSearchInput.addEventListener('input', function() {\n      const query = this.value.trim().toLowerCase();\n\n      if (faqSearchClear) {\n        faqSearchClear.style.display = query.length > 0 ? 'block' : 'none';\n      }\n\n      if (query.length > 0) {\n        faqTabs.forEach(t => t.classList.remove('active'));\n        document.querySelector('.faq-split__tab[data-category=\"all\"]')?.classList.add('active');\n        activeCategory = 'all';\n      }\n\n      filterQuestions(query, 'all');\n    });\n\n    if (faqSearchClear) {\n      faqSearchClear.addEventListener('click', function() {\n        faqSearchInput.value = '';\n        faqSearchClear.style.display = 'none';\n        filterQuestions('', activeCategory);\n        faqSearchInput.focus();\n      });\n    }\n  }\n\n  function filterQuestions(query, category) {\n    let visibleCount = 0;\n    let firstVisible = null;\n\n    faqQuestions.forEach(question => {\n      const qCategory = question.dataset.category;\n      const qId = question.dataset.faqId;\n\n      const questionTextEl = question.querySelector('.faq-split__question-text');\n      const answerDataEl = question.querySelector('.faq-split__answer-data');\n      const questionText = questionTextEl ? questionTextEl.textContent : '';\n      const answerText = answerDataEl ? answerDataEl.textContent : '';\n      const searchText = (questionText + ' ' + answerText).toLowerCase();\n      const matchesCategory = category === 'all' || qCategory === category;\n      const matchesSearch = query === '' || searchText.includes(query);\n\n      if (matchesCategory && matchesSearch) {\n        question.classList.remove('hidden');\n        visibleCount++;\n        if (!firstVisible) firstVisible = question;\n\n        const textEl = question.querySelector('.faq-split__question-text');\n        if (textEl) {\n          if (query.length > 0) {\n            const originalText = textEl.getAttribute('data-original-text') || textEl.textContent;\n            textEl.setAttribute('data-original-text', originalText);\n            textEl.innerHTML = originalText.replace(\n              new RegExp(`(${escapeRegex(query)})`, 'gi'),\n              '<mark class=\"faq-split__highlight\">$1</mark>'\n            );\n          } else {\n            const originalText = textEl.getAttribute('data-original-text');\n            if (originalText) textEl.textContent = originalText;\n          }\n        }\n      } else {\n        question.classList.add('hidden');\n        const textEl = question.querySelector('.faq-split__question-text');\n        if (textEl) {\n          const originalText = textEl.getAttribute('data-original-text');\n          if (originalText) textEl.textContent = originalText;\n        }\n      }\n    });\n\n    if (faqNoResults) {\n      faqNoResults.style.display = visibleCount === 0 ? 'flex' : 'none';\n    }\n\n    if (firstVisible && !firstVisible.classList.contains('active')) {\n      updateAnswerPanel(firstVisible.dataset.faqId);\n    }\n\n    updateNavButtons();\n  }\n\n  if (faqPrevBtn) {\n    faqPrevBtn.addEventListener('click', function() {\n      const visible = getVisibleQuestions();\n      const currentIndex = visible.findIndex(q => q.dataset.faqId === currentFaqId);\n      if (currentIndex > 0) {\n        updateAnswerPanel(visible[currentIndex - 1].dataset.faqId);\n      }\n    });\n  }\n\n  if (faqNextBtn) {\n    faqNextBtn.addEventListener('click', function() {\n      const visible = getVisibleQuestions();\n      const currentIndex = visible.findIndex(q => q.dataset.faqId === currentFaqId);\n      if (currentIndex < visible.length - 1) {\n        updateAnswerPanel(visible[currentIndex + 1].dataset.faqId);\n      }\n    });\n  }\n\n  function escapeRegex(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  }\n\n  const feedbackBtns = document.querySelectorAll('.faq-split__feedback-btn');\n  feedbackBtns.forEach(btn => {\n    btn.addEventListener('click', function() {\n      const feedback = this.dataset.feedback;\n      const wasSelected = this.classList.contains('selected');\n\n      feedbackBtns.forEach(b => b.classList.remove('selected'));\n\n      if (!wasSelected) {\n        this.classList.add('selected');\n\n        const icon = this.querySelector('ion-icon');\n        if (icon) {\n          icon.style.transform = 'scale(1.3)';\n          setTimeout(() => {\n            icon.style.transform = '';\n          }, 200);\n        }\n\n        console.log(`FAQ #${currentFaqId} feedback: ${feedback}`);\n      }\n    });\n  });\n\n  updateNavButtons();\n\n  // --- Hash-based auto-open for tools ---\n  function handleHash() {\n    const hash = window.location.hash.replace('#', '');\n    if (hash === 'breathing') {\n      const el = document.getElementById('self-help');\n      if (el) el.scrollIntoView({ behavior: 'smooth' });\n      setTimeout(() => openBreathingModal(), 600);\n    } else if (hash === 'grounding') {\n      const el = document.getElementById('self-help');\n      if (el) el.scrollIntoView({ behavior: 'smooth' });\n      setTimeout(() => openGroundingModal(), 600);\n    } else if (hash === 'journaling') {\n      const el = document.getElementById('self-help');\n      if (el) el.scrollIntoView({ behavior: 'smooth' });\n    }\n  }\n  handleHash();\n  window.addEventListener('hashchange', handleHash);\n});\n","path":null,"size_bytes":28261,"size_tokens":null},"mindspace-build/community/community.js":{"content":"// ==================== COMMUNITY ====================\n\nlet sb = null;\nlet currentUser = null;\n// --- State ---\nlet initialized = false;\nlet realtimeChannel = null;\nlet realtimeSetup = false;\nlet postsLoaded = false;\nlet loadingPosts = false;\nlet suppressRealtimeUntil = 0;\nlet lastLoadedTimestamp = null;\nlet authHandled = false;\nlet pendingAuthDebounce = null;\nconst recentlyPostedIds = new Set();\nconst renderedPostIds = new Set();\nconst ADMIN_EMAIL = 'marlonsalmeron871@gmail.com';\n\n\nlet selectedMediaFile = null;\nlet mediaPreviewUrl = null;\n\n\nlet mentionDropdown = null;\nlet mentionSearchTimeout = null;\nlet mentionUsers = [];\nlet mentionStartPos = 0;\nlet activeMentionInput = null;\n\nconst profileCache = {};\n\nasync function fetchUserProfile(userId) {\n  if (profileCache[userId]) return profileCache[userId];\n  const client = initSupabase();\n  if (!client) return null;\n  try {\n    const { data } = await client.from('profiles').select('avatar_url, display_name').eq('id', userId).single();\n    if (data) profileCache[userId] = data;\n    return data;\n  } catch (e) { return null; }\n}\n\nfunction showConfetti() {\n  const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--user-accent').trim() || '#5BA4E6';\n  const colors = [accentColor, '#2068A8', '#143E6B', '#4caf50', '#2196f3', '#ff9800'];\n  for (let i = 0; i < 30; i++) {\n    const confetti = document.createElement('div');\n    confetti.style.cssText = 'position:fixed;width:' + (Math.random()*10+5) + 'px;height:' + (Math.random()*10+5) + 'px;background:' + colors[Math.floor(Math.random()*colors.length)] + ';left:' + (Math.random()*100) + 'vw;top:-20px;border-radius:' + (Math.random()>0.5?'50%':'2px') + ';z-index:10000;pointer-events:none;animation:confettiFall ' + (Math.random()*2+1.5) + 's ease forwards;';\n    document.body.appendChild(confetti);\n    setTimeout(() => confetti.remove(), 3500);\n  }\n}\n\n// --- Helpers ---\nfunction getTranslation(key, fallback) {\n  if (window.translations && window.MindSpaceSettings) {\n    const lang = localStorage.getItem('mindspace-language') || 'en';\n    const langMap = { en: 'en', es: 'es', fr: 'fr', zh: 'zh', hi: 'hi', ko: 'ko' };\n    const langKey = langMap[lang] || 'en';\n    if (window.translations[langKey] && window.translations[langKey][key]) {\n      return window.translations[langKey][key];\n    }\n  }\n  return fallback;\n}\n\nfunction clearMediaPreview() {\n  selectedMediaFile = null;\n  if (mediaPreviewUrl) {\n    URL.revokeObjectURL(mediaPreviewUrl);\n    mediaPreviewUrl = null;\n  }\n  const mediaPreview = document.getElementById('mediaPreview');\n  const mediaInput = document.getElementById('mediaInput');\n  const mediaBtn = document.getElementById('mediaBtn');\n\n  if (mediaPreview) mediaPreview.style.display = 'none';\n  if (mediaInput) mediaInput.value = '';\n  if (mediaBtn) {\n    mediaBtn.textContent = 'ðŸ“Ž Media';\n    mediaBtn.setAttribute('data-translate', 'community_media_btn');\n  }\n}\n\nfunction generateUUID() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = Math.random() * 16 | 0;\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n// --- Profanity Filter ---\nconst BLOCKED_WORDS = [\n  'fuck', 'shit', 'ass', 'bitch', 'damn', 'crap', 'piss', 'dick', 'cock', 'pussy',\n  'bastard', 'slut', 'whore', 'fag', 'faggot', 'retard', 'retarded', 'nigger', 'nigga',\n  'cunt', 'twat', 'wanker', 'bollocks', 'arsehole', 'asshole', 'motherfucker',\n  'bullshit', 'horseshit', 'dumbass', 'jackass', 'dipshit', 'shithead',\n  'kike', 'spic', 'chink', 'gook', 'wetback', 'beaner', 'cracker', 'honky',\n  'tranny', 'shemale', 'dyke', 'homo', 'queer', 'negro', 'coon', 'darkie',\n  'paki', 'raghead', 'towelhead', 'jap', 'chinaman', 'redskin', 'injun',\n  'nazi', 'hitler', 'kkk', 'stfu', 'gtfo', 'wtf', 'fck', 'sht', 'btch',\n  'fuk', 'fuq', 'fuc', 'azz', 'a55', 'b1tch', 'd1ck', 'p1ss', 'c0ck',\n  'fvck', 'sh1t', 'b!tch', 'n1gger', 'n1gga', 'f4g', 'f4gg0t'\n];\n\nconst SLUR_PATTERNS = [\n  /n+[i1!]+g+[e3]+r/i,\n  /n+[i1!]+g+[a4@]+/i,\n  /f+[a4@]+g+[o0]+t/i,\n  /f+[a4@]+g+/i,\n  /r+[e3]+t+[a4@]+r+d/i,\n  /c+[u]+n+t/i,\n  /b+[i1!]+t+c+h/i,\n  /s+h+[i1!]+t/i,\n  /f+[u]+c+k/i,\n  /a+s+s+h+[o0]+l+[e3]/i,\n  /w+h+[o0]+r+[e3]/i,\n  /s+l+[u]+t/i,\n  /d+[i1!]+c+k/i,\n  /c+[o0]+c+k/i,\n  /p+[u]+s+s+y/i,\n  /k+[i1!]+k+[e3]/i,\n  /s+p+[i1!]+c/i,\n  /c+h+[i1!]+n+k/i,\n  /g+[o0]+[o0]+k/i,\n  /t+r+[a4@]+n+n+y/i\n];\n\nfunction containsProfanity(text) {\n  if (!text) return false;\n\n  let normalized = text.toLowerCase();\n  normalized = normalized\n    .replace(/0/g, 'o')\n    .replace(/1/g, 'i')\n    .replace(/3/g, 'e')\n    .replace(/4/g, 'a')\n    .replace(/5/g, 's')\n    .replace(/7/g, 't')\n    .replace(/@/g, 'a')\n    .replace(/\\$/g, 's')\n    .replace(/\\!/g, 'i')\n    .replace(/\\|/g, 'i');\n\n  const fullyStripped = normalized.replace(/[^a-z]/g, '');\n\n  for (const blocked of BLOCKED_WORDS) {\n    if (fullyStripped.includes(blocked)) {\n      return true;\n    }\n  }\n\n  for (const pattern of SLUR_PATTERNS) {\n    if (pattern.test(text) || pattern.test(normalized) || pattern.test(fullyStripped)) {\n      return true;\n    }\n  }\n\n  const words = normalized.split(/[\\s.,!?;:'\"()\\-\\[\\]{}|\\\\/<>_]+/);\n\n  for (const word of words) {\n    const cleanWord = word.replace(/[^a-z]/g, '');\n    if (cleanWord.length >= 2 && BLOCKED_WORDS.includes(cleanWord)) {\n      return true;\n    }\n\n    for (const blocked of BLOCKED_WORDS) {\n      if (blocked.length >= 4 && cleanWord.length >= 4) {\n        if (cleanWord.includes(blocked) || blocked.includes(cleanWord)) {\n          return true;\n        }\n      }\n    }\n  }\n\n  return false;\n}\n\n// --- Supabase Client ---\nfunction initSupabase() {\n  if (window.MindSpaceAuth && window.MindSpaceAuth.getSupabase) {\n    sb = window.MindSpaceAuth.getSupabase();\n  }\n\n  if (!sb && typeof supabase !== 'undefined') {\n    const SUPABASE_URL = \"https://cxjqessxarjayqxvhnhs.supabase.co\";\n    const SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4anFlc3N4YXJqYXlxeHZobmhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwMjQwOTEsImV4cCI6MjA4MzYwMDA5MX0.SUI4sPOSPxDiGwqwQr19UOKtbK7KmjMqkX6HUT6-yps\";\n    sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n  }\n  return sb;\n}\n\n// --- Authentication ---\nasync function checkAuth() {\n  const client = initSupabase();\n  if (!client) return null;\n\n  const { data } = await client.auth.getSession();\n  currentUser = data?.session?.user || null;\n  return currentUser;\n}\n\n// --- UI Updates ---\nfunction updateCommunityUI(user) {\n  currentUser = user;\n\n  const authPill = document.getElementById('authStatusPill');\n  const avatarCircle = document.getElementById('avatarCircle');\n  const postText = document.getElementById('postText');\n  const postBtn = document.getElementById('postBtn');\n  const sidebarSignIn = document.querySelector('.mb-navLink[href=\"../auth/\"]');\n\n  if (user) {\n\n    loadNotificationCount();\n\n    if (authPill) {\n      authPill.textContent = 'Signed in';\n      authPill.style.background = '#dcfce7';\n      authPill.style.color = '#166534';\n    }\n\n    const userName = user.email ? user.email.split('@')[0] : 'User';\n    const sidebarUserCard = document.getElementById('sidebarUserCard');\n    const sidebarUserName = document.getElementById('sidebarUserName');\n    const sidebarUserAvatar = document.getElementById('sidebarUserAvatar');\n    if (sidebarUserCard) {\n      sidebarUserCard.style.display = 'flex';\n      if (sidebarUserName) sidebarUserName.textContent = userName || 'User';\n    }\n\n    const initials = user.email ? user.email.substring(0, 2).toUpperCase() : 'ME';\n\n    fetchUserProfile(user.id).then(function(profile) {\n      if (profile && profile.avatar_url) {\n        if (avatarCircle) {\n          avatarCircle.innerHTML = '<img src=\"' + profile.avatar_url + '\" alt=\"Avatar\" style=\"width:100%;height:100%;object-fit:cover;border-radius:50%;\" onerror=\"this.parentElement.textContent=\\'' + initials + '\\'\">';\n          avatarCircle.style.background = 'transparent';\n          avatarCircle.style.padding = '0';\n          avatarCircle.style.overflow = 'hidden';\n        }\n        if (sidebarUserAvatar) {\n          sidebarUserAvatar.innerHTML = '<img src=\"' + profile.avatar_url + '\" alt=\"Avatar\" style=\"width:100%;height:100%;object-fit:cover;border-radius:50%;\" onerror=\"this.parentElement.textContent=\\'' + initials + '\\'\">';\n          sidebarUserAvatar.style.background = 'transparent';\n          sidebarUserAvatar.style.padding = '0';\n          sidebarUserAvatar.style.overflow = 'hidden';\n        }\n      } else {\n        if (avatarCircle) {\n          avatarCircle.textContent = initials;\n          avatarCircle.style.background = '#3b82f6';\n        }\n        if (sidebarUserAvatar) {\n          const sideInitials = (userName || 'U').split(' ').map(w => w[0]).join('').substring(0,2).toUpperCase();\n          sidebarUserAvatar.textContent = sideInitials;\n        }\n      }\n    });\n\n\n    if (postText) {\n      postText.disabled = false;\n      postText.placeholder = getTranslation('community_share_placeholder', \"What's on your mind? Share with the community...\");\n    }\n\n    if (postBtn) {\n      postBtn.disabled = false;\n    }\n\n    if (sidebarSignIn) {\n      sidebarSignIn.textContent = 'Signed in as ' + user.email.split('@')[0];\n      sidebarSignIn.style.color = '#166534';\n    }\n\n    const welcomeCard = document.getElementById('welcomeCard');\n    if (welcomeCard) welcomeCard.style.display = 'none';\n\n    enableInteractions();\n    updateDeleteButtons();\n  } else {\n    if (authPill) {\n      authPill.textContent = 'Guest mode';\n      authPill.style.background = '';\n      authPill.style.color = '';\n    }\n\n    const sidebarUserCardGuest = document.getElementById('sidebarUserCard');\n    if (sidebarUserCardGuest) {\n      sidebarUserCardGuest.style.display = 'none';\n    }\n\n    if (avatarCircle) {\n      avatarCircle.textContent = 'MB';\n      avatarCircle.style.background = '';\n    }\n\n    if (postText) {\n      postText.disabled = true;\n      postText.placeholder = getTranslation('community_signin_placeholder', 'Sign in to share an update...');\n    }\n\n    if (postBtn) {\n      postBtn.disabled = true;\n    }\n\n    if (sidebarSignIn) {\n      sidebarSignIn.textContent = 'Sign in / Register';\n      sidebarSignIn.style.color = '';\n    }\n\n    const welcomeCard = document.getElementById('welcomeCard');\n    if (welcomeCard) welcomeCard.style.display = '';\n\n    enableInteractions();\n    hideDeleteButtons();\n  }\n}\n\n// --- Permissions ---\nfunction isAdmin() {\n  return currentUser && currentUser.email === ADMIN_EMAIL;\n}\n\nfunction canDeletePost(postEmail) {\n  if (!currentUser) return false;\n  return currentUser.email === postEmail || isAdmin();\n}\n\nfunction updateDeleteButtons() {\n  if (!currentUser) return;\n\n  const posts = document.querySelectorAll('.mb-post[data-email]');\n  posts.forEach(post => {\n    const postEmail = post.getAttribute('data-email');\n    const canDelete = canDeletePost(postEmail);\n    let deleteBtn = post.querySelector('.mb-deleteBtn');\n\n    if (canDelete && !deleteBtn) {\n      const footer = post.querySelector('.mb-postFooter');\n      if (footer) {\n        deleteBtn = document.createElement('button');\n        deleteBtn.className = 'mb-btn mb-deleteBtn';\n        deleteBtn.type = 'button';\n        deleteBtn.textContent = 'Delete';\n        deleteBtn.style.marginLeft = 'auto';\n        deleteBtn.style.color = '#dc2626';\n        deleteBtn.addEventListener('click', () => handleDelete(post));\n        footer.appendChild(deleteBtn);\n      }\n    }\n  });\n}\n\nfunction hideDeleteButtons() {\n  const deleteBtns = document.querySelectorAll('.mb-deleteBtn');\n  deleteBtns.forEach(btn => btn.remove());\n}\n\n// --- Post Management ---\nasync function handleDelete(postElement) {\n  const postId = postElement.getAttribute('data-id');\n\n  if (!currentUser) {\n    alert('You must be signed in to delete posts.');\n    return;\n  }\n\n  if (!confirm('Are you sure you want to delete this post? This cannot be undone.')) {\n    return;\n  }\n\n  const client = initSupabase();\n  if (client) {\n    const { error } = await client\n      .from('posts')\n      .delete()\n      .eq('id', postId);\n\n    if (error) {\n      console.error('Error deleting post:', error);\n      alert('Failed to delete post. Please try again.');\n      return;\n    }\n  }\n\n\n  renderedPostIds.delete(postId);\n\n  postElement.style.transition = 'opacity 0.3s, transform 0.3s';\n  postElement.style.opacity = '0';\n  postElement.style.transform = 'translateX(-20px)';\n\n  setTimeout(() => {\n    postElement.remove();\n  }, 300);\n}\n\n// --- Interactions ---\nfunction enableInteractions() {\n  const posts = document.querySelectorAll('.mb-post');\n  posts.forEach(post => {\n\n    const likeBtn = post.querySelector('.mb-likeBtn');\n    if (likeBtn && !likeBtn.dataset.bound) {\n      likeBtn.dataset.bound = 'true';\n      likeBtn.addEventListener('click', handleLike);\n    }\n\n\n    const commentBtn = post.querySelector('.mb-commentBtn');\n    if (commentBtn && !commentBtn.dataset.bound) {\n      commentBtn.dataset.bound = 'true';\n      commentBtn.addEventListener('click', handleComment);\n    }\n\n\n    const shareBtn = post.querySelector('.mb-shareBtn');\n    if (shareBtn && !shareBtn.dataset.bound) {\n      shareBtn.dataset.bound = 'true';\n      shareBtn.addEventListener('click', handleShare);\n    }\n\n\n    const reportBtn = post.querySelector('.mb-reportBtn');\n    if (reportBtn && !reportBtn.dataset.bound) {\n      reportBtn.dataset.bound = 'true';\n      reportBtn.addEventListener('click', handleReport);\n    }\n\n\n    const editBtn = post.querySelector('.mb-editBtn');\n    if (editBtn && !editBtn.dataset.bound) {\n      editBtn.dataset.bound = 'true';\n      editBtn.addEventListener('click', handleEdit);\n    }\n\n\n    const buttons = post.querySelectorAll('.mb-btn:not(.mb-likeBtn):not(.mb-commentBtn):not(.mb-shareBtn):not(.mb-reportBtn):not(.mb-editBtn):not(.mb-deleteBtn)');\n    buttons.forEach(btn => {\n      if (btn.textContent.includes('Like') && !btn.dataset.bound) {\n        btn.classList.add('mb-likeBtn');\n        btn.dataset.bound = 'true';\n        btn.addEventListener('click', handleLike);\n      } else if (btn.textContent.includes('Comment') && !btn.dataset.bound) {\n        btn.classList.add('mb-commentBtn');\n        btn.dataset.bound = 'true';\n        btn.addEventListener('click', handleComment);\n      } else if (btn.textContent.includes('Share') && !btn.dataset.bound) {\n        btn.classList.add('mb-shareBtn');\n        btn.dataset.bound = 'true';\n        btn.addEventListener('click', handleShare);\n      }\n    });\n  });\n}\n\nasync function handleShare(e) {\n  const post = e.target.closest('.mb-post');\n  const postId = post.getAttribute('data-id');\n  const postContent = post.getAttribute('data-text') || '';\n  const shareUrl = `${window.location.origin}${window.location.pathname}#post-${postId}`;\n\n  const shareData = {\n    title: 'MindSpace Community Post',\n    text: postContent.substring(0, 100) + (postContent.length > 100 ? '...' : ''),\n    url: shareUrl\n  };\n\n  if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {\n    try {\n      await navigator.share(shareData);\n    } catch (err) {\n      if (err.name !== 'AbortError') {\n        copyToClipboard(shareUrl);\n      }\n    }\n  } else {\n    copyToClipboard(shareUrl);\n  }\n}\n\nfunction copyToClipboard(text) {\n  navigator.clipboard.writeText(text).then(() => {\n    const toast = document.createElement('div');\n    toast.textContent = 'Link copied to clipboard!';\n    toast.style.cssText = `\n      position: fixed;\n      bottom: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: #252542;\n      color: #fff;\n      padding: 12px 24px;\n      border-radius: 8px;\n      font-size: 14px;\n      z-index: 9999;\n      animation: fadeInOut 2s ease-in-out;\n    `;\n    document.body.appendChild(toast);\n    setTimeout(() => toast.remove(), 2000);\n  }).catch(() => {\n    alert('Failed to copy link. The URL is: ' + text);\n  });\n}\n\nasync function handleLike(e) {\n  if (!currentUser) {\n    alert('Please sign in to like posts');\n    return;\n  }\n\n  const btn = e.currentTarget || e.target.closest('.mb-likeBtn, .mb-btn');\n  const post = btn.closest('.mb-post');\n  const postId = post.getAttribute('data-id');\n  const client = initSupabase();\n\n  if (!client || !btn) return;\n\n\n  if (btn.dataset.processing === 'true') return;\n  btn.dataset.processing = 'true';\n\n  let likeCountSpan = btn.querySelector('.like-count');\n  const currentCount = parseInt(likeCountSpan?.textContent) || 0;\n\n  const heartIcon = btn.querySelector('.heart-icon');\n  const chosenEmoji = heartIcon ? heartIcon.textContent : 'â™¡';\n\n  if (btn.dataset.liked === 'true') {\n\n    const { error } = await client\n      .from('post_likes')\n      .delete()\n      .eq('post_id', postId)\n      .eq('user_id', currentUser.id);\n\n    if (!error) {\n      btn.dataset.liked = 'false';\n      const newCount = currentCount - 1;\n      if (heartIcon) heartIcon.textContent = 'â™¡';\n      if (likeCountSpan) likeCountSpan.textContent = newCount > 0 ? newCount : '';\n      btn.classList.remove('like-animating');\n\n      try {\n        await client.from('posts').update({ like_count: Math.max(0, newCount) }).eq('id', postId);\n      } catch (updateErr) {\n        console.warn('Failed to update like_count:', updateErr);\n      }\n    }\n  } else {\n\n    const { error } = await client\n      .from('post_likes')\n      .insert({ post_id: postId, user_id: currentUser.id });\n\n    if (!error) {\n      btn.dataset.liked = 'true';\n      const newCount = currentCount + 1;\n      if (heartIcon) heartIcon.textContent = chosenEmoji === 'â™¡' ? 'â™¥' : chosenEmoji;\n      if (likeCountSpan) likeCountSpan.textContent = newCount > 0 ? newCount : '';\n\n      btn.classList.add('like-animating');\n      setTimeout(() => btn.classList.remove('like-animating'), 400);\n\n      const pop = document.createElement('span');\n      pop.className = 'like-pop';\n      pop.textContent = '+1';\n      btn.appendChild(pop);\n      setTimeout(() => pop.remove(), 600);\n\n      try {\n        await client.from('posts').update({ like_count: newCount }).eq('id', postId);\n      } catch (updateErr) {\n        console.warn('Failed to update like_count:', updateErr);\n      }\n\n      const postAuthorId = post.getAttribute('data-author-id');\n      if (postAuthorId && postAuthorId !== currentUser.id) {\n        const fromName = currentUser.user_metadata?.display_name || currentUser.email?.split('@')[0] || 'Someone';\n        try {\n          await client.from('notifications').insert({\n            user_id: postAuthorId,\n            type: 'like',\n            from_user_name: fromName,\n            post_id: postId,\n            content: `${fromName} liked your post`,\n            read: false\n          });\n        } catch (notifErr) {\n          console.warn('Failed to create like notification:', notifErr);\n        }\n      }\n    }\n  }\n\n  btn.dataset.processing = 'false';\n}\n\nasync function handleEdit(e) {\n  if (!currentUser) return;\n\n  const post = e.target.closest('.mb-post');\n  const postEmail = post.getAttribute('data-email');\n\n\n  if (currentUser.email !== postEmail) return;\n\n  const postBody = post.querySelector('.mb-postBody');\n  const originalContent = post.getAttribute('data-text');\n  const wasEdited = post.dataset.edited === 'true' || postBody.querySelector('.mb-edited-tag') !== null;\n\n\n  if (wasEdited) post.dataset.edited = 'true';\n\n\n  if (post.querySelector('.mb-editTextarea')) return;\n\n\n  const editHTML = `\n    <textarea class=\"mb-editTextarea\"></textarea>\n    <div class=\"mb-editActions\">\n      <button class=\"mb-btn mb-saveBtn\" type=\"button\">Save</button>\n      <button class=\"mb-btn mb-cancelBtn\" type=\"button\">Cancel</button>\n    </div>\n  `;\n\n  postBody.innerHTML = editHTML;\n\n  const textarea = postBody.querySelector('.mb-editTextarea');\n  const saveBtn = postBody.querySelector('.mb-saveBtn');\n  const cancelBtn = postBody.querySelector('.mb-cancelBtn');\n\n\n  textarea.value = originalContent;\n  textarea.focus();\n  textarea.setSelectionRange(textarea.value.length, textarea.value.length);\n\n  cancelBtn.addEventListener('click', () => {\n\n    const editedSuffix = post.dataset.edited === 'true' ? ' <span class=\"mb-edited-tag\">(edited)</span>' : '';\n    postBody.innerHTML = escapeHtml(originalContent) + editedSuffix;\n  });\n\n  saveBtn.addEventListener('click', async () => {\n    const newContent = textarea.value.trim();\n\n    if (!newContent) {\n      alert('Post content cannot be empty.');\n      return;\n    }\n\n    if (containsProfanity(newContent)) {\n      alert('Your post contains inappropriate language. Please revise and try again.');\n      return;\n    }\n\n    if (newContent === originalContent) {\n      postBody.innerHTML = escapeHtml(originalContent);\n      return;\n    }\n\n    const client = initSupabase();\n    const postId = post.getAttribute('data-id');\n\n    const { error } = await client\n      .from('posts')\n      .update({ content: newContent, edited_at: new Date().toISOString() })\n      .eq('id', postId)\n      .eq('author_email', currentUser.email);\n\n    if (error) {\n      alert('Failed to save changes. Please try again.');\n      return;\n    }\n\n    post.setAttribute('data-text', newContent);\n    postBody.innerHTML = escapeHtml(newContent) + ' <span class=\"mb-edited-tag\">(edited)</span>';\n  });\n}\n\n// --- Reporting ---\nfunction showReportModal(postId) {\n\n  const existingModal = document.querySelector('.mb-reportModal');\n  if (existingModal) existingModal.remove();\n\n  const modal = document.createElement('div');\n  modal.className = 'mb-reportModal';\n  modal.innerHTML = `\n    <div class=\"mb-reportModalContent\">\n      <div class=\"mb-reportModalTitle\">${getTranslation('community_report_title', 'Report this post')}</div>\n      <div class=\"mb-reportOptions\">\n        <label class=\"mb-reportOption\">\n          <input type=\"radio\" name=\"reportReason\" value=\"spam\">\n          <span>${getTranslation('community_report_spam', 'Spam or misleading')}</span>\n        </label>\n        <label class=\"mb-reportOption\">\n          <input type=\"radio\" name=\"reportReason\" value=\"harassment\">\n          <span>${getTranslation('community_report_harassment', 'Harassment or bullying')}</span>\n        </label>\n        <label class=\"mb-reportOption\">\n          <input type=\"radio\" name=\"reportReason\" value=\"inappropriate\">\n          <span>${getTranslation('community_report_inappropriate', 'Inappropriate content')}</span>\n        </label>\n        <label class=\"mb-reportOption\">\n          <input type=\"radio\" name=\"reportReason\" value=\"self-harm\">\n          <span>${getTranslation('community_report_self_harm', 'Self-harm or dangerous content')}</span>\n        </label>\n        <label class=\"mb-reportOption\">\n          <input type=\"radio\" name=\"reportReason\" value=\"other\">\n          <span>${getTranslation('community_report_other', 'Other')}</span>\n        </label>\n      </div>\n      <div class=\"mb-reportModalActions\">\n        <button class=\"mb-btn mb-cancelReportBtn\" type=\"button\">${getTranslation('community_cancel', 'Cancel')}</button>\n        <button class=\"mb-btn mb-submitReportBtn\" type=\"button\" disabled>${getTranslation('community_submit_report', 'Submit Report')}</button>\n      </div>\n    </div>\n  `;\n\n  document.body.appendChild(modal);\n\n\n  requestAnimationFrame(() => modal.classList.add('is-active'));\n\n  const submitBtn = modal.querySelector('.mb-submitReportBtn');\n  const cancelBtn = modal.querySelector('.mb-cancelReportBtn');\n  const radios = modal.querySelectorAll('input[name=\"reportReason\"]');\n\n  radios.forEach(radio => {\n    radio.addEventListener('change', () => {\n      submitBtn.disabled = false;\n    });\n  });\n\n  cancelBtn.addEventListener('click', () => {\n    modal.classList.remove('is-active');\n    setTimeout(() => modal.remove(), 200);\n  });\n\n  modal.addEventListener('click', (e) => {\n    if (e.target === modal) {\n      modal.classList.remove('is-active');\n      setTimeout(() => modal.remove(), 200);\n    }\n  });\n\n  submitBtn.addEventListener('click', async () => {\n    const selectedReason = modal.querySelector('input[name=\"reportReason\"]:checked');\n    if (!selectedReason || !currentUser) return;\n\n    submitBtn.disabled = true;\n    submitBtn.textContent = 'Submitting...';\n\n    const client = initSupabase();\n\n    const { error } = await client\n      .from('post_reports')\n      .insert({\n        post_id: postId,\n        reporter_id: currentUser.id,\n        reporter_email: currentUser.email,\n        reason: selectedReason.value\n      });\n\n    if (error) {\n      console.error('Report error:', error);\n      if (error.message?.includes('does not exist') || error.code === '42P01') {\n        alert('Report system needs setup. Please run supabase-setup.sql in your Supabase SQL Editor.');\n      } else if (error.message?.includes('duplicate') || error.code === '23505') {\n        alert('You have already reported this post.');\n      } else if (error.message?.includes('violates row-level security') || error.code === '42501') {\n        alert('Permission denied. Please make sure you are signed in and the database is properly configured.');\n      } else {\n        alert('Failed to submit report: ' + (error.message || 'Unknown error'));\n      }\n      submitBtn.disabled = false;\n      submitBtn.textContent = 'Submit Report';\n      return;\n    }\n\n    modal.classList.remove('is-active');\n    setTimeout(() => modal.remove(), 200);\n\n\n    const toast = document.createElement('div');\n    toast.textContent = 'Report submitted. Thank you for helping keep the community safe.';\n    toast.style.cssText = `\n      position: fixed;\n      bottom: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: #27ae60;\n      color: #fff;\n      padding: 12px 24px;\n      border-radius: 8px;\n      font-size: 14px;\n      z-index: 9999;\n    `;\n    document.body.appendChild(toast);\n    setTimeout(() => toast.remove(), 3000);\n  });\n}\n\nasync function handleReport(e) {\n  if (!currentUser) {\n    alert('Please sign in to report posts');\n    return;\n  }\n\n  const post = e.target.closest('.mb-post');\n  const postId = post.getAttribute('data-id');\n\n  showReportModal(postId);\n}\n\n// --- Comments ---\nasync function handleComment(e) {\n  const post = e.target.closest('.mb-post');\n  const postId = post.getAttribute('data-id');\n  let commentBox = post.querySelector('.mb-commentBox');\n\n  if (!commentBox) {\n    commentBox = document.createElement('div');\n    commentBox.className = 'mb-commentBox';\n\n\n    const inputHtml = currentUser ? `\n      <div class=\"mb-commentInputRow\">\n        <input type=\"text\" class=\"mb-commentInput\" placeholder=\"Write a comment...\" />\n        <button class=\"mb-btn mb-btnPrimary mb-sendBtn\" type=\"button\">Send</button>\n      </div>\n    ` : `\n      <div class=\"mb-commentInputRow mb-guestPrompt\" style=\"padding: 10px; background: rgba(0,0,0,0.03); border-radius: 8px; text-align: center; color: #666;\">\n        <a href=\"../auth/\" style=\"color: #3b82f6; text-decoration: underline;\">Sign in</a> to leave a comment\n      </div>\n    `;\n\n    commentBox.innerHTML = `\n      ${inputHtml}\n      <div class=\"mb-comments\"></div>\n    `;\n    post.appendChild(commentBox);\n\n\n    await loadComments(postId, commentBox.querySelector('.mb-comments'));\n\n\n    if (currentUser) {\n      const sendBtn = commentBox.querySelector('.mb-btnPrimary');\n      const input = commentBox.querySelector('.mb-commentInput');\n\n\n      input.addEventListener('input', handleMentionInput);\n      input.addEventListener('keydown', handleMentionKeydown);\n\n      sendBtn.addEventListener('click', async () => {\n        const text = input.value.trim();\n        if (!text) return;\n\n        if (containsProfanity(text)) {\n          alert('Your comment contains inappropriate language. Please revise and try again.');\n          return;\n        }\n\n        if (text && currentUser) {\n          const client = initSupabase();\n          if (!client) return;\n\n          const { data, error } = await client\n            .from('post_comments')\n            .insert({\n              post_id: postId,\n              author_id: currentUser.id,\n              author_email: currentUser.email,\n              author_name: currentUser.email.split('@')[0],\n              content: text\n            })\n            .select()\n            .single();\n\n          if (!error && data) {\n            const commentsContainer = commentBox.querySelector('.mb-comments');\n            const comment = createCommentElement(data);\n            commentsContainer.appendChild(comment);\n            input.value = '';\n\n            const commentBtn = post.querySelector('.mb-postFooter .mb-btn:nth-child(2)');\n            if (commentBtn) {\n              const currentCount = parseInt(commentBtn.textContent.match(/\\d+/)?.[0] || '0');\n              commentBtn.textContent = `Comment (${currentCount + 1})`;\n            }\n\n            const postAuthorId = post.getAttribute('data-author-id');\n            if (postAuthorId && postAuthorId !== currentUser.id) {\n              const fromName = currentUser.user_metadata?.display_name || currentUser.email?.split('@')[0] || 'Someone';\n              try {\n                await client.from('notifications').insert({\n                  user_id: postAuthorId,\n                  type: 'comment',\n                  from_user_name: fromName,\n                  post_id: postId,\n                  content: `${fromName} commented on your post`,\n                  read: false\n                });\n              } catch (notifErr) {\n                console.warn('Failed to create comment notification:', notifErr);\n              }\n            }\n\n            processMentions(text, postId, data.id);\n          }\n        }\n      });\n\n      input.addEventListener('keypress', (e) => {\n        if (e.key === 'Enter') {\n          sendBtn.click();\n        }\n      });\n    }\n  } else {\n    commentBox.style.display = commentBox.style.display === 'none' ? 'block' : 'none';\n  }\n}\n\nasync function loadComments(postId, container) {\n  const client = initSupabase();\n  if (!client) return;\n\n  const { data, error } = await client\n    .from('post_comments')\n    .select('*')\n    .eq('post_id', postId)\n    .order('created_at', { ascending: true });\n\n  if (!error && data) {\n    const authorIds = [...new Set(data.filter(c => c.author_id).map(c => c.author_id))];\n    if (authorIds.length > 0) {\n      try {\n        const { data: profiles } = await client\n          .from('profiles')\n          .select('id, avatar_url, display_name')\n          .in('id', authorIds);\n        if (profiles) {\n          profiles.forEach(p => {\n            profileCache[p.id] = p;\n          });\n          data.forEach(comment => {\n            if (comment.author_id && profileCache[comment.author_id]) {\n              comment.avatar_url = profileCache[comment.author_id].avatar_url;\n              if (!comment.author_name && profileCache[comment.author_id].display_name) {\n                comment.author_name = profileCache[comment.author_id].display_name;\n              }\n            }\n          });\n        }\n      } catch (e) {\n        console.warn('Could not fetch comment author profiles:', e);\n      }\n    }\n    data.forEach(comment => {\n      container.appendChild(createCommentElement(comment));\n    });\n  }\n}\n\nasync function deleteComment(commentId, commentEl) {\n  if (!currentUser) return;\n  if (!confirm('Delete this comment?')) return;\n\n  const client = initSupabase();\n  if (!client) return;\n\n  const { error } = await client\n    .from('post_comments')\n    .delete()\n    .eq('id', commentId)\n    .eq('author_id', currentUser.id);\n\n  if (!error) {\n    commentEl.style.transition = 'opacity 0.3s, transform 0.3s';\n    commentEl.style.opacity = '0';\n    commentEl.style.transform = 'translateX(10px)';\n    setTimeout(() => {\n      commentEl.remove();\n      const post = commentEl.closest('.mb-post');\n      if (post) {\n        const commentBtn = post.querySelector('.mb-postFooter .mb-btn:nth-child(2)');\n        if (commentBtn) {\n          const currentCount = parseInt(commentBtn.textContent.match(/\\d+/)?.[0] || '1');\n          commentBtn.textContent = `Comment (${Math.max(0, currentCount - 1)})`;\n        }\n      }\n    }, 300);\n  } else {\n    console.error('Error deleting comment:', error);\n  }\n}\n\nfunction createCommentElement(commentData) {\n  const comment = document.createElement('div');\n  comment.className = 'mb-comment';\n  comment.setAttribute('data-comment-id', commentData.id);\n\n  const isTeamComment = !commentData.author_id;\n  const displayName = commentData.author_name || (isTeamComment ? 'MindSpace Team' : 'Anonymous');\n\n  const avatarColors = ['#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899', '#06b6d4', '#84cc16'];\n  const colorIndex = (commentData.author_id || '').split('').reduce((acc, c) => acc + c.charCodeAt(0), 0) % avatarColors.length;\n  const initials = displayName.split(' ').map(w => w[0]).join('').substring(0, 2).toUpperCase();\n\n  let avatarHtml;\n  if (isTeamComment) {\n    avatarHtml = '<div class=\"mb-commentAvatar mb-commentAvatar--team\">MB</div>';\n  } else if (commentData.avatar_url) {\n    avatarHtml = `<div class=\"mb-commentAvatar\"><img src=\"${escapeHtml(commentData.avatar_url)}\" alt=\"${escapeHtml(displayName)}\" /></div>`;\n  } else {\n    avatarHtml = `<div class=\"mb-commentAvatar\" style=\"background: ${avatarColors[colorIndex]}; color: #fff;\">${initials}</div>`;\n  }\n\n  const level = isTeamComment ? null : getUserLevel(commentData.author_id || displayName);\n  const levelBadgeHtml = level ? `<span class=\"mb-levelBadge mb-levelBadge--sm ${level.cls}\">${level.label}</span>` : '';\n  const teamBadgeHtml = isTeamComment ? '<span class=\"mb-teamBadge\">Team</span>' : '';\n\n  let authorHtml;\n  if (commentData.author_id) {\n    authorHtml = `<a href=\"/profile/?user=${commentData.author_id}\" class=\"mb-commentAuthorLink\">${escapeHtml(displayName)}</a>`;\n  } else {\n    authorHtml = `<span class=\"mb-commentAuthorName--team\">${escapeHtml(displayName)}</span>`;\n  }\n\n  const timeStr = commentData.created_at ? formatTime(commentData.created_at) : '';\n\n  const isOwnComment = currentUser && commentData.author_id === currentUser.id;\n  const deleteHtml = isOwnComment ? `<button class=\"mb-commentDeleteBtn\" title=\"Delete comment\"><ion-icon name=\"trash-outline\"></ion-icon></button>` : '';\n\n  comment.innerHTML = `\n    <div class=\"mb-commentLeft\">\n      ${avatarHtml}\n    </div>\n    <div class=\"mb-commentRight\">\n      <div class=\"mb-commentHeader\">\n        <div class=\"mb-commentMeta\">\n          ${authorHtml} ${teamBadgeHtml} ${levelBadgeHtml}\n          <span class=\"mb-commentTime\">${timeStr}</span>\n        </div>\n        ${deleteHtml}\n      </div>\n      <div class=\"mb-commentBody\">${escapeHtml(commentData.content)}</div>\n    </div>\n  `;\n\n  if (isOwnComment) {\n    const deleteBtn = comment.querySelector('.mb-commentDeleteBtn');\n    if (deleteBtn) {\n      deleteBtn.addEventListener('click', () => deleteComment(commentData.id, comment));\n    }\n  }\n\n  return comment;\n}\n\n// --- HTML Escaping ---\nfunction escapeHtml(text) {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n// --- Post Creation ---\nasync function handlePost() {\n  const postText = document.getElementById('postText');\n  const feedList = document.getElementById('feedList');\n  const text = postText.value.trim();\n\n  if (!text || !currentUser) return;\n\n  if (containsProfanity(text)) {\n    alert('Your post contains inappropriate language. Please revise and try again.');\n    return;\n  }\n\n  const client = initSupabase();\n  if (!client) {\n    alert('Unable to connect. Please try again.');\n    return;\n  }\n\n  const userName = currentUser.email.split('@')[0];\n\n  const categorySelect = document.getElementById('postCategory');\n  const category = categorySelect ? categorySelect.value : '';\n  const fullContent = category ? `[${category}] ${text}` : text;\n\n  let uploadedMediaUrl = null;\n  if (selectedMediaFile) {\n    const fileExt = selectedMediaFile.name.split('.').pop();\n    const fileName = `${generateUUID()}.${fileExt}`;\n    const filePath = `posts/${currentUser.id}/${fileName}`;\n\n    const { data: uploadData, error: uploadError } = await client.storage\n      .from('Post-Media')\n      .upload(filePath, selectedMediaFile);\n\n    if (uploadError) {\n      console.error('Media upload error:', uploadError);\n\n      if (uploadError.message?.includes('bucket') || uploadError.message?.includes('not found')) {\n        alert('Media upload requires storage setup. Please create a \"Post-Media\" bucket in Supabase Storage. Your post will be created without the image.');\n      } else {\n        alert('Image upload failed: ' + (uploadError.message || 'Unknown error') + '. Your post will be created without the image.');\n      }\n\n      clearMediaPreview();\n    } else {\n      const { data: { publicUrl } } = client.storage\n        .from('Post-Media')\n        .getPublicUrl(filePath);\n      uploadedMediaUrl = publicUrl;\n    }\n  }\n\n\n  const placeholderId = generateUUID();\n  const placeholder = document.createElement('article');\n  placeholder.className = 'mb-post mb-post-pending card-animated hover-lift';\n  placeholder.setAttribute('data-placeholder-id', placeholderId);\n  placeholder.style.opacity = '0.6';\n  const mediaPreviewHtml = uploadedMediaUrl ? `<div class=\"mb-postMedia\"><img src=\"${uploadedMediaUrl}\" alt=\"Post media\" /></div>` : '';\n  placeholder.innerHTML = `\n    <div class=\"mb-postHead\">\n      <div class=\"mb-postMeta\">\n        <div class=\"mb-postName\">${escapeHtml(userName)} <span class=\"mb-pill\">Community</span></div>\n        <div class=\"mb-postTime\">Posting...</div>\n      </div>\n    </div>\n    <div class=\"mb-postBody\">${escapeHtml(text)}</div>\n    ${mediaPreviewHtml}\n    <div class=\"mb-postFooter\">\n      <button class=\"mb-btn\" type=\"button\" disabled>Like</button>\n      <button class=\"mb-btn\" type=\"button\" disabled>Comment</button>\n      <button class=\"mb-btn\" type=\"button\" disabled>Share</button>\n    </div>\n  `;\n  feedList.insertBefore(placeholder, feedList.firstChild);\n  postText.value = '';\n  clearMediaPreview();\n\n  const { data, error } = await client\n    .from('posts')\n    .insert({\n      author_id: currentUser.id,\n      author_email: currentUser.email,\n      author_name: userName,\n      content: fullContent,\n      media_url: uploadedMediaUrl\n    })\n    .select()\n    .single();\n\n  if (error) {\n    console.error('Error creating post:', error.message || error);\n    console.error('Full error details:', JSON.stringify(error, null, 2));\n    placeholder.remove();\n    if (error.message && error.message.includes('does not exist')) {\n      alert('The forum database needs to be set up. Please run the supabase-setup.sql script in your Supabase SQL Editor.');\n    } else {\n      alert('Failed to create post: ' + (error.message || 'Unknown error'));\n    }\n    return;\n  }\n\n\n  recentlyPostedIds.add(data.id);\n  suppressRealtimeUntil = Date.now() + 1000;\n\n\n  setTimeout(() => recentlyPostedIds.delete(data.id), 10000);\n\n\n  placeholder.remove();\n\n\n  if (!renderedPostIds.has(data.id)) {\n    renderedPostIds.add(data.id);\n    const userProfile = await fetchUserProfile(currentUser.id);\n    if (userProfile && userProfile.avatar_url) {\n      data.avatar_url = userProfile.avatar_url;\n    }\n    const newPost = createPostElement(data, 'Just now');\n    feedList.insertBefore(newPost, feedList.firstChild);\n    enableInteractions();\n    updateDeleteButtons();\n  }\n\n  const hasPosted = localStorage.getItem('mb-first-post');\n  if (!hasPosted) {\n    localStorage.setItem('mb-first-post', 'true');\n    showConfetti();\n  }\n\n  if (categorySelect) categorySelect.value = '';\n\n  processMentions(text, data.id, null);\n}\n\n// --- Post Rendering ---\nfunction getUserLevel(authorId) {\n  const hash = (authorId || '').split('').reduce((a, c) => a + c.charCodeAt(0), 0);\n  const level = hash % 4;\n  if (level === 3) return { label: 'ðŸ† ' + getTranslation('community_level_champion', 'Champion'), cls: 'mb-levelBadge--champion' };\n  if (level === 2) return { label: 'ðŸ’ª ' + getTranslation('community_level_supporter', 'Supporter'), cls: 'mb-levelBadge--supporter' };\n  if (level === 1) return { label: 'ðŸ‘¤ ' + getTranslation('community_level_regular', 'Regular'), cls: 'mb-levelBadge--regular' };\n  return { label: 'ðŸŒ± ' + getTranslation('community_level_newcomer', 'Newcomer'), cls: 'mb-levelBadge--newcomer' };\n}\n\nfunction createPostElement(postData, timeStr) {\n  const article = document.createElement('article');\n  article.className = 'mb-post card-animated hover-lift' + (postData.is_pinned ? ' mb-post-pinned' : '');\n  article.setAttribute('data-text', postData.content);\n  article.setAttribute('data-id', postData.id);\n  article.setAttribute('data-email', postData.author_email);\n  article.setAttribute('data-author-id', postData.author_id || '');\n  article.setAttribute('data-pinned', postData.is_pinned ? 'true' : 'false');\n\n  const isOwnPost = currentUser && currentUser.email === postData.author_email;\n  const isAdmin = currentUser && currentUser.email === ADMIN_EMAIL;\n  const showDeleteButton = canDeletePost(postData.author_email);\n  const deleteButton = showDeleteButton\n    ? `<button class=\"mb-btn mb-deleteBtn\" type=\"button\" style=\"color: #dc2626;\">${getTranslation('community_delete', 'Delete')}</button>`\n    : '';\n  const editButton = isOwnPost\n    ? `<button class=\"mb-btn mb-editBtn\" type=\"button\">${getTranslation('community_edit', 'Edit')}</button>`\n    : '';\n  const pinButton = isAdmin\n    ? `<button class=\"mb-btn mb-pinBtn\" type=\"button\" title=\"${postData.is_pinned ? 'Unpin post' : 'Pin post'}\" data-translate=\"${postData.is_pinned ? 'community_unpin' : 'community_pin'}\">${postData.is_pinned ? 'ðŸ“Œ Unpin' : 'ðŸ“Œ Pin'}</button>`\n    : '';\n\n  const likeCount = postData.like_count || 0;\n  const commentCount = postData.comment_count || 0;\n  const isEdited = postData.edited_at ? ' <span class=\"mb-edited-tag\">(edited)</span>' : '';\n  const pinnedBadge = postData.is_pinned ? '<span class=\"mb-pinned-badge\" data-translate=\"community_pinned\">ðŸ“Œ Pinned</span>' : '';\n\n\n  const mediaHtml = postData.media_url ? `<div class=\"mb-postMedia\"><img src=\"${escapeHtml(postData.media_url)}\" alt=\"Post media\" loading=\"lazy\" /></div>` : '';\n\n\n  if (postData.edited_at) {\n    article.dataset.edited = 'true';\n  }\n\n  const displayName = postData.author_name || 'MindSpace Team';\n  const authorLink = postData.author_id\n    ? `<a href=\"/profile/?user=${postData.author_id}\" class=\"mb-postAuthorLink\">${escapeHtml(displayName)}</a>`\n    : escapeHtml(displayName);\n\n  const isTeamPost = !postData.author_id || displayName === 'MindSpace Team';\n  const initials = displayName.split(' ').map(w => w[0]).join('').substring(0, 2).toUpperCase();\n  const avatarColors = ['#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899', '#06b6d4', '#84cc16'];\n  const colorIndex = (postData.author_id || '').split('').reduce((acc, c) => acc + c.charCodeAt(0), 0) % avatarColors.length;\n  const avatarColor = avatarColors[colorIndex];\n\n  let categoryHtml = '';\n  let displayContent = postData.content;\n  const catMatch = displayContent.match(/^\\[(motivation|question|story|resource|tip)\\]\\s*/i);\n  if (catMatch) {\n    const cat = catMatch[1].toLowerCase();\n    const catEmojis = { motivation: 'ðŸ’ª', question: 'â“', story: 'ðŸ“–', resource: 'ðŸ“š', tip: 'ðŸ’¡' };\n    categoryHtml = `<span class=\"mb-categoryTag mb-categoryTag--${cat}\">${catEmojis[cat] || ''} ${cat.charAt(0).toUpperCase() + cat.slice(1)}</span>`;\n    displayContent = displayContent.replace(catMatch[0], '');\n  }\n\n  const level = isTeamPost ? null : getUserLevel(postData.author_id || displayName);\n  const levelBadgeHtml = level ? `<span class=\"mb-levelBadge ${level.cls}\">${level.label}</span>` : '';\n\n  let avatarHtml;\n  if (isTeamPost) {\n    avatarHtml = `<div class=\"mb-postAvatar mb-postAvatar--team\">MB</div>`;\n  } else if (postData.avatar_url) {\n    avatarHtml = `<div class=\"mb-postAvatar\" style=\"padding:0; overflow:hidden;\"><img src=\"${escapeHtml(postData.avatar_url)}\" alt=\"${escapeHtml(displayName)}\" style=\"width:100%; height:100%; object-fit:cover; border-radius:50%;\" /></div>`;\n  } else {\n    avatarHtml = `<div class=\"mb-postAvatar\" style=\"background: ${avatarColor}; display: grid; place-items: center; color: #fff; font-weight: 700; font-size: 15px;\">${initials}</div>`;\n  }\n\n  article.innerHTML = `\n    <div class=\"mb-postHead\">\n      ${avatarHtml}\n      <div class=\"mb-postMeta\">\n        <div class=\"mb-postName\">${authorLink} ${levelBadgeHtml} ${categoryHtml} ${pinnedBadge}</div>\n        <div class=\"mb-postTime\">${timeStr || formatTime(postData.created_at)}</div>\n      </div>\n    </div>\n    <div class=\"mb-postBody\">${escapeHtml(displayContent)}${isEdited}</div>\n    ${mediaHtml}\n    <div class=\"mb-postFooter\">\n      <div class=\"mb-reactions\">\n        <button class=\"mb-btn mb-likeBtn mb-reactionBtn--like\" type=\"button\"><span class=\"heart-icon\">â™¡</span> ${getTranslation('community_like', 'Like')} <span class=\"like-count\">${likeCount > 0 ? likeCount : ''}</span></button>\n        <div class=\"mb-reactionPicker\" style=\"display:none;\">\n          <button class=\"mb-reactionOption\" data-reaction=\"support\" title=\"${getTranslation('community_reaction_support', 'Support')}\">â¤ï¸</button>\n          <button class=\"mb-reactionOption\" data-reaction=\"insightful\" title=\"${getTranslation('community_reaction_insightful', 'Insightful')}\">ðŸ’¡</button>\n          <button class=\"mb-reactionOption\" data-reaction=\"hug\" title=\"${getTranslation('community_reaction_hug', 'Hug')}\">ðŸ¤—</button>\n          <button class=\"mb-reactionOption\" data-reaction=\"applause\" title=\"${getTranslation('community_reaction_applause', 'Applause')}\">ðŸ‘</button>\n        </div>\n      </div>\n      <button class=\"mb-btn mb-commentBtn\" type=\"button\">${getTranslation('community_comment', 'Comment')} ${commentCount > 0 ? '(' + commentCount + ')' : ''}</button>\n      <button class=\"mb-btn mb-shareBtn\" type=\"button\">${getTranslation('community_share', 'Share')}</button>\n      <button class=\"mb-btn mb-bookmarkBtn\" type=\"button\" title=\"${getTranslation('community_bookmark', 'Bookmark')}\">ðŸ”–</button>\n      ${editButton}\n      ${pinButton}\n      ${deleteButton}\n      <button class=\"mb-btn mb-reportBtn\" type=\"button\" title=\"${getTranslation('community_report', 'Report post')}\">âš‘</button>\n    </div>\n  `;\n\n\n  const likeBtn = article.querySelector('.mb-likeBtn');\n  const commentBtn = article.querySelector('.mb-commentBtn');\n  const shareBtn = article.querySelector('.mb-shareBtn');\n  const reportBtn = article.querySelector('.mb-reportBtn');\n\n  if (likeBtn) {\n    likeBtn.dataset.bound = 'true';\n    likeBtn.addEventListener('click', handleLike);\n  }\n\n  if (commentBtn) {\n    commentBtn.dataset.bound = 'true';\n    commentBtn.addEventListener('click', handleComment);\n  }\n\n  if (shareBtn) {\n    shareBtn.dataset.bound = 'true';\n    shareBtn.addEventListener('click', handleShare);\n  }\n\n  if (reportBtn) {\n    reportBtn.dataset.bound = 'true';\n    reportBtn.addEventListener('click', handleReport);\n  }\n\n  if (showDeleteButton) {\n    const deleteBtn = article.querySelector('.mb-deleteBtn');\n    if (deleteBtn) {\n      deleteBtn.addEventListener('click', () => handleDelete(article));\n    }\n  }\n\n  if (isOwnPost) {\n    const editBtn = article.querySelector('.mb-editBtn');\n    if (editBtn) {\n      editBtn.addEventListener('click', handleEdit);\n    }\n  }\n\n\n  if (isAdmin) {\n    const pinBtn = article.querySelector('.mb-pinBtn');\n    if (pinBtn) {\n      pinBtn.addEventListener('click', handlePin);\n    }\n  }\n\n  const reactionBtn = article.querySelector('.mb-reactionBtn--like');\n  const reactionPicker = article.querySelector('.mb-reactionPicker');\n  if (reactionBtn && reactionPicker) {\n    let pickerTimeout;\n    reactionBtn.addEventListener('mouseenter', () => {\n      clearTimeout(pickerTimeout);\n      reactionPicker.style.display = 'flex';\n    });\n    reactionBtn.addEventListener('mouseleave', () => {\n      pickerTimeout = setTimeout(() => { reactionPicker.style.display = 'none'; }, 400);\n    });\n    reactionPicker.addEventListener('mouseenter', () => clearTimeout(pickerTimeout));\n    reactionPicker.addEventListener('mouseleave', () => {\n      pickerTimeout = setTimeout(() => { reactionPicker.style.display = 'none'; }, 300);\n    });\n    reactionPicker.querySelectorAll('.mb-reactionOption').forEach(opt => {\n      opt.addEventListener('click', (e) => {\n        e.stopPropagation();\n        reactionBtn.querySelector('.heart-icon').textContent = opt.textContent;\n        reactionPicker.style.display = 'none';\n        if (!reactionBtn.dataset.liked || reactionBtn.dataset.liked !== 'true') {\n          reactionBtn.click();\n        }\n      });\n    });\n  }\n\n  const postBody = article.querySelector('.mb-postBody');\n  if (postBody && (displayContent || postData.content).length > 200) {\n    postBody.classList.add('mb-postBody--truncated');\n    const readMore = document.createElement('button');\n    readMore.className = 'mb-readMore';\n    readMore.textContent = 'Read more';\n    readMore.addEventListener('click', () => {\n      postBody.classList.toggle('mb-postBody--truncated');\n      readMore.textContent = postBody.classList.contains('mb-postBody--truncated') ? 'Read more' : 'Show less';\n    });\n    postBody.after(readMore);\n  }\n\n  const bookmarkBtn = article.querySelector('.mb-bookmarkBtn');\n  if (bookmarkBtn) {\n    const bookmarks = JSON.parse(localStorage.getItem('mb-bookmarks') || '[]');\n    if (bookmarks.includes(postData.id)) bookmarkBtn.classList.add('is-bookmarked');\n    bookmarkBtn.addEventListener('click', () => {\n      const bm = JSON.parse(localStorage.getItem('mb-bookmarks') || '[]');\n      const idx = bm.indexOf(postData.id);\n      if (idx > -1) { bm.splice(idx, 1); bookmarkBtn.classList.remove('is-bookmarked'); }\n      else { bm.push(postData.id); bookmarkBtn.classList.add('is-bookmarked'); }\n      localStorage.setItem('mb-bookmarks', JSON.stringify(bm));\n    });\n  }\n\n  return article;\n}\n\n// --- Pinning ---\nasync function handlePin(e) {\n  if (!currentUser || currentUser.email !== ADMIN_EMAIL) return;\n\n  const btn = e.target.closest('.mb-pinBtn');\n  const post = e.target.closest('.mb-post');\n  const postId = post.getAttribute('data-id');\n  const isPinned = post.getAttribute('data-pinned') === 'true';\n\n  btn.disabled = true;\n  btn.textContent = isPinned ? 'Unpinning...' : 'Pinning...';\n\n  const client = initSupabase();\n\n  const { error } = await client\n    .from('posts')\n    .update({\n      is_pinned: !isPinned,\n      pinned_at: isPinned ? null : new Date().toISOString()\n    })\n    .eq('id', postId);\n\n  if (error) {\n    console.error('Pin error:', error);\n    alert('Failed to ' + (isPinned ? 'unpin' : 'pin') + ' post: ' + (error.message || 'Unknown error'));\n    btn.disabled = false;\n    btn.textContent = isPinned ? 'ðŸ“Œ Unpin' : 'ðŸ“Œ Pin';\n    return;\n  }\n\n\n  post.setAttribute('data-pinned', isPinned ? 'false' : 'true');\n  btn.textContent = isPinned ? 'ðŸ“Œ Pin' : 'ðŸ“Œ Unpin';\n  btn.setAttribute('data-translate', isPinned ? 'community_pin' : 'community_unpin');\n  btn.title = isPinned ? 'Pin post' : 'Unpin post';\n  btn.disabled = false;\n\n\n  const nameDiv = post.querySelector('.mb-postName');\n  const existingBadge = nameDiv.querySelector('.mb-pinned-badge');\n\n  if (isPinned && existingBadge) {\n    existingBadge.remove();\n    post.classList.remove('mb-post-pinned');\n  } else if (!isPinned && !existingBadge) {\n    const badge = document.createElement('span');\n    badge.className = 'mb-pinned-badge';\n    badge.textContent = 'ðŸ“Œ Pinned';\n    badge.setAttribute('data-translate', 'community_pinned');\n    nameDiv.appendChild(badge);\n    post.classList.add('mb-post-pinned');\n  }\n\n\n  await loadPosts(true);\n}\n\n// --- Time Formatting ---\nfunction formatTime(isoString) {\n  const date = new Date(isoString);\n  const now = new Date();\n  const diffMs = now - date;\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMs / 3600000);\n  const diffDays = Math.floor(diffMs / 86400000);\n\n  if (diffMins < 1) return 'Just now';\n  if (diffMins < 60) return `${diffMins} min ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n}\n\n// --- Feed Loading ---\nasync function loadPosts(forceReload = false) {\n\n  if (loadingPosts) return;\n  loadingPosts = true;\n  suppressRealtimeUntil = Date.now() + 2000;\n\n  if (postsLoaded && !forceReload) {\n    loadingPosts = false;\n    return;\n  }\n\n  const feedList = document.getElementById('feedList');\n  if (feedList) {\n    feedList.innerHTML = Array(3).fill('').map(() => `\n      <div class=\"mb-skeleton\">\n        <div class=\"mb-skeleton__head\">\n          <div class=\"mb-skeleton__circle\"></div>\n          <div style=\"flex:1; display:grid; gap:6px;\">\n            <div class=\"mb-skeleton__line mb-skeleton__line--short\"></div>\n            <div class=\"mb-skeleton__line mb-skeleton__line--medium\" style=\"height:8px;\"></div>\n          </div>\n        </div>\n        <div class=\"mb-skeleton__body\">\n          <div class=\"mb-skeleton__line mb-skeleton__line--long\"></div>\n          <div class=\"mb-skeleton__line mb-skeleton__line--medium\"></div>\n        </div>\n      </div>\n    `).join('');\n  }\n\n  const client = initSupabase();\n  if (!client) {\n    loadingPosts = false;\n    return;\n  }\n\n  if (!feedList) {\n    loadingPosts = false;\n    return;\n  }\n\n\n  renderedPostIds.clear();\n\n  const { data, error } = await client\n    .from('posts')\n    .select('*')\n    .order('is_pinned', { ascending: false, nullsFirst: false })\n    .order('pinned_at', { ascending: false, nullsFirst: true })\n    .order('created_at', { ascending: false })\n    .limit(50);\n\n  if (error) {\n    console.error('Error loading posts:', error);\n    loadingPosts = false;\n    if (error.message && error.message.includes('does not exist')) {\n      feedList.innerHTML = `\n        <div style=\"text-align: center; padding: 40px 20px; color: #666;\">\n          <div style=\"font-size: 48px; margin-bottom: 16px;\">ðŸ”§</div>\n          <h3 style=\"margin-bottom: 8px; color: #333;\">Forum Setup Required</h3>\n          <p style=\"max-width: 400px; margin: 0 auto; line-height: 1.5;\">\n            The community forum database needs to be set up. Please run the <code>supabase-setup.sql</code> script in your Supabase SQL Editor.\n          </p>\n        </div>\n      `;\n    }\n    return;\n  }\n\n  feedList.innerHTML = '';\n\n  if (data && data.length > 0) {\n    const uniqueAuthorIds = [...new Set(data.map(p => p.author_id).filter(Boolean))];\n    if (uniqueAuthorIds.length > 0) {\n      const { data: profiles } = await client.from('profiles').select('id, avatar_url').in('id', uniqueAuthorIds);\n      if (profiles) {\n        const profileMap = {};\n        profiles.forEach(p => { profileMap[p.id] = p; });\n        data.forEach(post => {\n          if (post.author_id && profileMap[post.author_id]) {\n            post.avatar_url = profileMap[post.author_id].avatar_url;\n          }\n        });\n      }\n    }\n\n    if (currentUser) {\n      const { data: userLikes } = await client\n        .from('post_likes')\n        .select('post_id')\n        .eq('user_id', currentUser.id);\n\n      const likedPostIds = new Set(userLikes?.map(l => l.post_id) || []);\n\n      data.forEach(postData => {\n        if (renderedPostIds.has(postData.id)) return;\n        renderedPostIds.add(postData.id);\n        const article = createPostElement(postData);\n        if (likedPostIds.has(postData.id)) {\n          const likeBtn = article.querySelector('.mb-likeBtn');\n          if (likeBtn) {\n            likeBtn.dataset.liked = 'true';\n            likeBtn.innerHTML = `<span class=\"heart-icon\">â™¥</span> Liked <span class=\"like-count\">${postData.like_count || ''}</span>`;\n          }\n        }\n        feedList.appendChild(article);\n      });\n    } else {\n      data.forEach(postData => {\n        if (renderedPostIds.has(postData.id)) return;\n        renderedPostIds.add(postData.id);\n        const article = createPostElement(postData);\n        feedList.appendChild(article);\n      });\n    }\n\n    enableInteractions();\n    updateDeleteButtons();\n\n\n    if (data.length > 0) {\n      lastLoadedTimestamp = new Date(data[0].created_at).getTime();\n    }\n  }\n\n  postsLoaded = true;\n  loadingPosts = false;\n\n  scrollToHashPost();\n}\n\nfunction scrollToHashPost() {\n  const hash = window.location.hash;\n  if (!hash || !hash.startsWith('#post-')) return;\n  const postId = hash.replace('#post-', '');\n  const targetPost = document.querySelector(`.mb-post[data-id=\"${postId}\"]`);\n  if (targetPost) {\n    setTimeout(() => {\n      targetPost.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      targetPost.style.transition = 'box-shadow 0.4s ease';\n      targetPost.style.boxShadow = '0 0 0 3px var(--accent-color, #5BA4E6), 0 4px 20px rgba(0,0,0,0.15)';\n      setTimeout(() => {\n        targetPost.style.boxShadow = '';\n      }, 3000);\n    }, 300);\n  }\n}\n\nasync function loadCommunityStats() {\n  try {\n    const client = initSupabase();\n    if (!client) return;\n    const { count: postCount } = await client.from('posts').select('*', { count: 'exact', head: true });\n    const postsEl = document.getElementById('statPosts');\n    if (postsEl) postsEl.textContent = postCount || 0;\n\n    const membersEl = document.getElementById('statMembers');\n    if (membersEl) membersEl.textContent = Math.floor((postCount || 0) * 2.5 + 12);\n\n    const activeEl = document.getElementById('statActive');\n    if (activeEl) activeEl.textContent = Math.floor(Math.random() * 5) + 1;\n  } catch (e) {\n    console.log('Stats load error:', e);\n  }\n}\n\nasync function loadTopContributors() {\n  try {\n    const client = initSupabase();\n    if (!client) return;\n    const { data: posts } = await client\n      .from('posts')\n      .select('author_name, author_id')\n      .order('created_at', { ascending: false })\n      .limit(100);\n    if (!posts) return;\n    const counts = {};\n    posts.forEach(p => {\n      const key = p.author_name || 'MindSpace Team';\n      if (!counts[key]) counts[key] = { name: key, count: 0 };\n      counts[key].count++;\n    });\n    const sorted = Object.values(counts).sort((a, b) => b.count - a.count).slice(0, 5);\n    const container = document.getElementById('topContributors');\n    if (!container) return;\n    const avatarColors = ['#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6'];\n    container.innerHTML = sorted.map((c, i) => {\n      const initials = c.name.split(' ').map(w => w[0]).join('').substring(0, 2).toUpperCase();\n      return '<div class=\"mb-contributor\"><div class=\"mb-contributor__avatar\" style=\"background:' + avatarColors[i % avatarColors.length] + ';\">' + initials + '</div><div class=\"mb-contributor__info\"><span class=\"mb-contributor__name\">' + c.name + '</span><span class=\"mb-contributor__posts\">' + c.count + ' post' + (c.count !== 1 ? 's' : '') + '</span></div></div>';\n    }).join('');\n  } catch (e) { console.log('Top contributors error:', e); }\n}\n\n// --- Realtime ---\nfunction setupRealtimeSubscription() {\n\n  if (realtimeSetup) return;\n  realtimeSetup = true;\n\n  const client = initSupabase();\n  if (!client) {\n    realtimeSetup = false;\n    return;\n  }\n\n  if (realtimeChannel) {\n    client.removeChannel(realtimeChannel);\n  }\n\n  realtimeChannel = client\n    .channel('community-posts')\n    .on('postgres_changes',\n      { event: 'INSERT', schema: 'public', table: 'posts' },\n      (payload) => {\n        const feedList = document.getElementById('feedList');\n        if (!feedList) return;\n\n\n        if (Date.now() < suppressRealtimeUntil) return;\n\n\n        if (loadingPosts) return;\n\n\n        if (renderedPostIds.has(payload.new.id)) return;\n\n\n        if (recentlyPostedIds.has(payload.new.id)) return;\n\n\n        if (lastLoadedTimestamp && payload.new.created_at) {\n          const postTime = new Date(payload.new.created_at).getTime();\n          if (postTime <= lastLoadedTimestamp) return;\n        }\n\n\n        const existingPost = feedList.querySelector(`[data-id=\"${payload.new.id}\"]`);\n        if (!existingPost) {\n          renderedPostIds.add(payload.new.id);\n          if (payload.new.author_id) {\n            fetchUserProfile(payload.new.author_id).then(function(profile) {\n              if (profile && profile.avatar_url) {\n                payload.new.avatar_url = profile.avatar_url;\n              }\n              const article = createPostElement(payload.new, 'Just now');\n              feedList.insertBefore(article, feedList.firstChild);\n              enableInteractions();\n              updateDeleteButtons();\n            });\n          } else {\n            const article = createPostElement(payload.new, 'Just now');\n            feedList.insertBefore(article, feedList.firstChild);\n            enableInteractions();\n            updateDeleteButtons();\n          }\n        }\n      }\n    )\n    .on('postgres_changes',\n      { event: 'DELETE', schema: 'public', table: 'posts' },\n      (payload) => {\n        const feedList = document.getElementById('feedList');\n        if (!feedList) return;\n\n\n        renderedPostIds.delete(payload.old.id);\n\n        const deletedPost = feedList.querySelector(`[data-id=\"${payload.old.id}\"]`);\n        if (deletedPost) {\n          deletedPost.style.transition = 'opacity 0.3s';\n          deletedPost.style.opacity = '0';\n          setTimeout(() => deletedPost.remove(), 300);\n        }\n      }\n    )\n    .on('postgres_changes',\n      { event: 'UPDATE', schema: 'public', table: 'posts' },\n      (payload) => {\n        const feedList = document.getElementById('feedList');\n        if (!feedList) return;\n\n        const updatedPost = feedList.querySelector(`[data-id=\"${payload.new.id}\"]`);\n        if (updatedPost) {\n\n          const likeBtn = updatedPost.querySelector('.mb-likeBtn');\n          if (likeBtn) {\n            let likeCountSpan = likeBtn.querySelector('.like-count');\n            if (likeCountSpan) {\n              likeCountSpan.textContent = payload.new.like_count > 0 ? payload.new.like_count : '';\n            }\n          }\n\n\n          const commentBtn = updatedPost.querySelector('.mb-commentBtn');\n          if (commentBtn) {\n            const commentCount = payload.new.comment_count || 0;\n            commentBtn.textContent = commentCount > 0 ? `Comment (${commentCount})` : 'Comment';\n          }\n\n\n          if (payload.new.edited_at) {\n            const postBody = updatedPost.querySelector('.mb-postBody');\n            if (postBody && !postBody.querySelector('.mb-editTextarea')) {\n              updatedPost.setAttribute('data-text', payload.new.content);\n              postBody.innerHTML = escapeHtml(payload.new.content) + ' <span class=\"mb-edited-tag\">(edited)</span>';\n            }\n          }\n        }\n      }\n    )\n    .subscribe();\n}\n\n// --- Auth Change Handler ---\nfunction handleAuthChange(user) {\n\n  if (pendingAuthDebounce) {\n    clearTimeout(pendingAuthDebounce);\n  }\n\n  pendingAuthDebounce = setTimeout(() => {\n    pendingAuthDebounce = null;\n    currentUser = user;\n    updateCommunityUI(user);\n\n\n    if (postsLoaded) {\n      loadPosts(true);\n    } else if (!authHandled) {\n      authHandled = true;\n      loadPosts();\n    }\n\n    if (user) {\n      enableInteractions();\n      updateDeleteButtons();\n    }\n  }, 100);\n}\n\n// --- Initialization ---\nasync function init() {\n  if (initialized) return;\n  initialized = true;\n\n  const postBtn = document.getElementById('postBtn');\n  if (postBtn) {\n    postBtn.addEventListener('click', handlePost);\n  }\n\n  const postText = document.getElementById('postText');\n  if (postText) {\n    postText.addEventListener('keypress', (e) => {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        handlePost();\n      }\n    });\n  }\n\n\n  const mediaBtn = document.getElementById('mediaBtn');\n  const mediaInput = document.getElementById('mediaInput');\n  const mediaPreview = document.getElementById('mediaPreview');\n  const mediaPreviewImg = document.getElementById('mediaPreviewImg');\n  const removeMediaBtn = document.getElementById('removeMediaBtn');\n\n  if (mediaBtn && mediaInput) {\n    mediaBtn.addEventListener('click', () => {\n      if (!currentUser) {\n        alert(getTranslation('signin_required', 'Please sign in to add media'));\n        return;\n      }\n      mediaInput.click();\n    });\n\n    mediaInput.addEventListener('change', (e) => {\n      const file = e.target.files[0];\n      if (!file) return;\n\n\n      if (!file.type.startsWith('image/')) {\n        alert('Please select an image file');\n        mediaInput.value = '';\n        return;\n      }\n\n\n      if (file.size > 5 * 1024 * 1024) {\n        alert('Image must be less than 5MB');\n        mediaInput.value = '';\n        return;\n      }\n\n      selectedMediaFile = file;\n      mediaPreviewUrl = URL.createObjectURL(file);\n\n      if (mediaPreview && mediaPreviewImg) {\n        mediaPreviewImg.src = mediaPreviewUrl;\n        mediaPreview.style.display = 'block';\n      }\n\n      mediaBtn.textContent = 'ðŸ“Ž Change';\n      mediaBtn.setAttribute('data-translate', 'community_media_change');\n    });\n  }\n\n  if (removeMediaBtn) {\n    removeMediaBtn.addEventListener('click', () => {\n      clearMediaPreview();\n    });\n  }\n\n  setupRealtimeSubscription();\n\n  if (window.MindSpaceAuth && window.MindSpaceAuth.onAuthReady) {\n\n\n\n    window.MindSpaceAuth.onAuthChange(handleAuthChange);\n  } else {\n\n    const user = await checkAuth();\n    currentUser = user;\n    updateCommunityUI(user);\n\n\n    if (!authHandled) {\n      authHandled = true;\n      await loadPosts();\n    }\n\n\n    const client = initSupabase();\n    if (client) {\n      client.auth.onAuthStateChange((event, session) => {\n\n        if (event === 'SIGNED_IN' || event === 'SIGNED_OUT') {\n          handleAuthChange(session?.user || null);\n        }\n      });\n    }\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', init);\n\n\n\n// ==================== FOLLOWING FEED ====================\nasync function loadFollowingPosts() {\n  if (!currentUser) return;\n\n  const feedList = document.getElementById('feedList');\n  if (!feedList) return;\n\n  const existingSignIn = feedList.querySelector('.mb-followingSignIn');\n  if (existingSignIn) existingSignIn.remove();\n  const existingEmpty = feedList.querySelector('.mb-followingEmpty');\n  if (existingEmpty) existingEmpty.remove();\n\n  const posts = Array.from(feedList.querySelectorAll('.mb-post'));\n  posts.forEach(p => p.style.display = 'none');\n\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n    const { data: follows, error: followError } = await client\n      .from('followers')\n      .select('following_id')\n      .eq('follower_id', currentUser.id);\n\n    if (followError) {\n      console.warn('Follows table may not exist yet:', followError.message);\n      showFollowingEmpty(feedList, true);\n      return;\n    }\n\n    const followedIds = (follows || []).map(f => f.following_id);\n\n    if (followedIds.length === 0) {\n      showFollowingEmpty(feedList, false);\n      return;\n    }\n\n    let visibleCount = 0;\n    posts.forEach(post => {\n      const postAuthorId = post.getAttribute('data-author-id');\n      if (postAuthorId && followedIds.includes(postAuthorId)) {\n        post.style.display = '';\n        visibleCount++;\n      }\n    });\n\n    if (visibleCount === 0) {\n      showFollowingEmpty(feedList, false);\n    }\n  } catch (err) {\n    console.error('Error loading following posts:', err);\n    showFollowingEmpty(feedList, true);\n  }\n}\n\nfunction showFollowingEmpty(feedList, isError) {\n  const el = document.createElement('div');\n  el.className = 'mb-followingEmpty';\n  if (isError) {\n    el.innerHTML = `\n      <div style=\"text-align:center; padding:60px 20px;\">\n        <div style=\"font-size:48px; margin-bottom:16px;\">ðŸ‘¥</div>\n        <h3 style=\"margin-bottom:8px; color:#333; font-size:18px;\" data-translate=\"community_following_empty_title\">No followed posts yet</h3>\n        <p style=\"color:#666; max-width:360px; margin:0 auto; line-height:1.5;\" data-translate=\"community_following_empty_text\">Follow members by clicking the follow button on their posts to see their updates here.</p>\n      </div>\n    `;\n  } else {\n    el.innerHTML = `\n      <div style=\"text-align:center; padding:60px 20px;\">\n        <div style=\"font-size:48px; margin-bottom:16px;\">ðŸ‘¥</div>\n        <h3 style=\"margin-bottom:8px; color:#333; font-size:18px;\" data-translate=\"community_following_empty_title\">No followed posts yet</h3>\n        <p style=\"color:#666; max-width:360px; margin:0 auto; line-height:1.5;\" data-translate=\"community_following_empty_text\">Follow members by clicking the follow button on their posts to see their updates here.</p>\n      </div>\n    `;\n  }\n  feedList.appendChild(el);\n  if (typeof applyTranslations === 'function') applyTranslations();\n}\n\n// ==================== POPULAR DISCUSSIONS ====================\nasync function loadPopularDiscussions() {\n  const container = document.getElementById('popularDiscussions');\n  if (!container) return;\n\n\n  let client = initSupabase();\n  if (!client) {\n\n    if (typeof supabase !== 'undefined') {\n      const SUPABASE_URL = \"https://cxjqessxarjayqxvhnhs.supabase.co\";\n      const SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4anFlc3N4YXJqYXlxeHZobmhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwMjQwOTEsImV4cCI6MjA4MzYwMDA5MX0.SUI4sPOSPxDiGwqwQr19UOKtbK7KmjMqkX6HUT6-yps\";\n      client = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n    }\n  }\n\n  if (!client) {\n    container.innerHTML = '<div class=\"mb-miniItem\"><div class=\"mb-miniSub\">Unable to load</div></div>';\n    return;\n  }\n\n  try {\n\n    const { data: posts, error } = await client\n      .from('posts')\n      .select('id, content, like_count, comment_count')\n      .order('like_count', { ascending: false, nullsFirst: false })\n      .limit(5);\n\n    if (error) throw error;\n\n    if (!posts || posts.length === 0) {\n      container.innerHTML = '<div class=\"mb-miniItem\"><div class=\"mb-miniSub\">No discussions yet</div></div>';\n      return;\n    }\n\n    container.innerHTML = '';\n    posts.forEach((post, index) => {\n      const link = document.createElement('a');\n      link.href = '#post-' + post.id;\n      link.className = 'mb-miniItem mb-miniLink';\n      link.onclick = (e) => {\n        e.preventDefault();\n        scrollToPost(post.id);\n      };\n\n      const title = document.createElement('div');\n      title.className = 'mb-miniTitle';\n      title.textContent = truncateText(post.content, 50);\n\n      const sub = document.createElement('div');\n      sub.className = 'mb-miniSub';\n      const likes = post.like_count || 0;\n      const comments = post.comment_count || 0;\n      const labels = ['Most active', 'Trending', 'Popular', 'Hot', 'Discussed'];\n      sub.textContent = `${likes} likes Â· ${comments} replies Â· ${labels[index] || 'Popular'}`;\n\n      link.appendChild(title);\n      link.appendChild(sub);\n      container.appendChild(link);\n    });\n  } catch (err) {\n    console.error('Error loading popular discussions:', err);\n    container.innerHTML = '<div class=\"mb-miniItem\"><div class=\"mb-miniSub\">Unable to load</div></div>';\n  }\n}\n\nfunction truncateText(text, maxLength) {\n  if (!text) return '';\n  if (text.length <= maxLength) return text;\n  return text.substring(0, maxLength).trim() + '...';\n}\n\n// --- Scroll to Post ---\nfunction scrollToPost(postId) {\n  const postEl = document.querySelector(`[data-id=\"${postId}\"]`);\n  if (postEl) {\n    postEl.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    postEl.style.transition = 'box-shadow 0.3s ease';\n    postEl.style.boxShadow = '0 0 0 3px rgba(184, 155, 94, 0.5)';\n    setTimeout(() => {\n      postEl.style.boxShadow = '';\n    }, 2000);\n  }\n}\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  setTimeout(loadPopularDiscussions, 1500);\n  setTimeout(loadCommunityStats, 500);\n  setTimeout(loadTopContributors, 800);\n  setupMentions();\n  loadNotificationCount();\n});\n\n\n\n// ==================== MENTIONS SYSTEM ====================\nfunction setupMentions() {\n  const postInput = document.getElementById('postInput');\n  if (postInput) {\n    postInput.addEventListener('input', handleMentionInput);\n    postInput.addEventListener('keydown', handleMentionKeydown);\n  }\n}\n\nasync function handleMentionInput(e) {\n  const input = e.target;\n  const text = input.value;\n  const cursorPos = input.selectionStart;\n\n\n  const beforeCursor = text.substring(0, cursorPos);\n  const atMatch = beforeCursor.match(/@(\\w*)$/);\n\n  if (atMatch) {\n    const searchTerm = atMatch[1];\n    mentionStartPos = cursorPos - searchTerm.length - 1;\n    activeMentionInput = input;\n\n    if (searchTerm.length >= 1) {\n      clearTimeout(mentionSearchTimeout);\n      mentionSearchTimeout = setTimeout(() => searchUsers(searchTerm, input), 200);\n    } else {\n      showMentionDropdown([], input);\n    }\n  } else {\n    hideMentionDropdown();\n  }\n}\n\nasync function searchUsers(term, input) {\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n    const { data: users, error } = await client\n      .from('profiles')\n      .select('id, display_name, avatar_url')\n      .ilike('display_name', `%${term}%`)\n      .limit(5);\n\n    if (error) throw error;\n    mentionUsers = users || [];\n    showMentionDropdown(mentionUsers, input);\n  } catch (err) {\n    console.error('Error searching users:', err);\n  }\n}\n\nfunction showMentionDropdown(users, input) {\n  hideMentionDropdown();\n\n  if (users.length === 0) return;\n\n  mentionDropdown = document.createElement('div');\n  mentionDropdown.className = 'mb-mention-dropdown';\n\n  users.forEach((user, index) => {\n    const item = document.createElement('div');\n    item.className = 'mb-mention-item';\n    if (index === 0) item.classList.add('active');\n    item.dataset.userId = user.id;\n    item.dataset.name = user.display_name || 'User';\n\n    const avatar = document.createElement('img');\n    avatar.className = 'mb-mention-avatar';\n    avatar.src = user.avatar_url || '/assets/images/default-avatar.png';\n    avatar.onerror = () => { avatar.src = '/assets/images/default-avatar.png'; };\n\n    const name = document.createElement('span');\n    name.className = 'mb-mention-name';\n    name.textContent = user.display_name || 'User';\n\n    item.appendChild(avatar);\n    item.appendChild(name);\n    item.onclick = () => selectMention(user, input);\n    mentionDropdown.appendChild(item);\n  });\n\n\n  const rect = input.getBoundingClientRect();\n  mentionDropdown.style.position = 'absolute';\n  mentionDropdown.style.top = (rect.bottom + window.scrollY + 5) + 'px';\n  mentionDropdown.style.left = rect.left + 'px';\n  mentionDropdown.style.width = rect.width + 'px';\n\n  document.body.appendChild(mentionDropdown);\n}\n\nfunction hideMentionDropdown() {\n  if (mentionDropdown) {\n    mentionDropdown.remove();\n    mentionDropdown = null;\n  }\n  mentionUsers = [];\n}\n\nfunction selectMention(user, input) {\n  const text = input.value;\n  const cursorPos = input.selectionStart;\n  const beforeAt = text.substring(0, mentionStartPos);\n  const afterCursor = text.substring(cursorPos);\n\n  const mentionText = `@${user.display_name || 'User'} `;\n  input.value = beforeAt + mentionText + afterCursor;\n\n  const newPos = mentionStartPos + mentionText.length;\n  input.setSelectionRange(newPos, newPos);\n  input.focus();\n\n  hideMentionDropdown();\n}\n\nfunction handleMentionKeydown(e) {\n  if (!mentionDropdown) return;\n\n  const items = mentionDropdown.querySelectorAll('.mb-mention-item');\n  if (items.length === 0) return;\n\n  const activeIndex = Array.from(items).findIndex(i => i.classList.contains('active'));\n\n  if (e.key === 'ArrowDown') {\n    e.preventDefault();\n    items[activeIndex]?.classList.remove('active');\n    const nextIndex = (activeIndex + 1) % items.length;\n    items[nextIndex]?.classList.add('active');\n  } else if (e.key === 'ArrowUp') {\n    e.preventDefault();\n    items[activeIndex]?.classList.remove('active');\n    const prevIndex = (activeIndex - 1 + items.length) % items.length;\n    items[prevIndex]?.classList.add('active');\n  } else if (e.key === 'Enter' && mentionDropdown) {\n    e.preventDefault();\n    const activeItem = mentionDropdown.querySelector('.mb-mention-item.active');\n    if (activeItem) {\n      const user = {\n        id: activeItem.dataset.userId,\n        display_name: activeItem.dataset.name\n      };\n      selectMention(user, e.target);\n    }\n  } else if (e.key === 'Escape') {\n    hideMentionDropdown();\n  }\n}\n\n\nasync function processMentions(text, postId, commentId = null) {\n\n// ==================== NOTIFICATIONS SYSTEM ====================\n  if (!currentUser) return;\n\n  const mentionRegex = /@(\\w+(?:\\s\\w+)?)/g;\n  const mentions = [];\n  let match;\n\n  while ((match = mentionRegex.exec(text)) !== null) {\n    mentions.push(match[1]);\n  }\n\n  if (mentions.length === 0) return;\n\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n\n    for (const mentionName of mentions) {\n      const { data: users } = await client\n        .from('profiles')\n        .select('id')\n        .ilike('display_name', mentionName)\n        .limit(1);\n\n      if (users && users.length > 0 && users[0].id !== currentUser.id) {\n\n        await client.from('notifications').insert({\n          user_id: users[0].id,\n          type: 'mention',\n          from_user_id: currentUser.id,\n          from_user_name: currentUser.user_metadata?.display_name || currentUser.email?.split('@')[0] || 'Someone',\n          post_id: postId,\n          comment_id: commentId,\n          content: text.substring(0, 100)\n        });\n      }\n    }\n  } catch (err) {\n    console.error('Error processing mentions:', err);\n  }\n}\n\n\nasync function loadNotificationCount() {\n  if (!currentUser) return;\n\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n    const { count, error } = await client\n      .from('notifications')\n      .select('*', { count: 'exact', head: true })\n      .eq('user_id', currentUser.id)\n      .eq('read', false);\n\n    if (error) throw error;\n\n    updateNotificationBadge(count || 0);\n  } catch (err) {\n    console.error('Error loading notification count:', err);\n  }\n}\n\nfunction updateNotificationBadge(count) {\n  const badge = document.getElementById('notifBadge');\n  if (badge) {\n    if (count > 0) {\n      badge.textContent = count > 99 ? '99+' : count;\n      badge.hidden = false;\n    } else {\n      badge.hidden = true;\n    }\n  }\n}\n\nasync function loadNotifications() {\n  if (!currentUser) return [];\n\n  const client = initSupabase();\n  if (!client) return [];\n\n  try {\n    const { data: notifications, error } = await client\n      .from('notifications')\n      .select('*')\n      .eq('user_id', currentUser.id)\n      .order('created_at', { ascending: false })\n      .limit(20);\n\n    if (error) throw error;\n    return notifications || [];\n  } catch (err) {\n    console.error('Error loading notifications:', err);\n    return [];\n  }\n}\n\nasync function markNotificationRead(notifId) {\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n    await client\n      .from('notifications')\n      .update({ read: true })\n      .eq('id', notifId);\n\n    loadNotificationCount();\n  } catch (err) {\n    console.error('Error marking notification read:', err);\n  }\n}\n\nasync function markAllNotificationsRead() {\n  if (!currentUser) return;\n\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n    await client\n      .from('notifications')\n      .update({ read: true })\n      .eq('user_id', currentUser.id)\n      .eq('read', false);\n\n    updateNotificationBadge(0);\n  } catch (err) {\n    console.error('Error marking all notifications read:', err);\n  }\n}\n\nlet lastFocusedElement = null;\n\nfunction openInbox() {\n  const modal = document.getElementById('inboxModal');\n// --- Inbox Modal ---\n  if (modal) {\n    lastFocusedElement = document.activeElement;\n    modal.hidden = false;\n    loadAndRenderNotifications();\n\n\n    const closeBtn = modal.querySelector('.mb-inbox-close');\n    if (closeBtn) {\n      setTimeout(() => closeBtn.focus(), 100);\n    }\n  }\n}\n\nfunction closeInbox() {\n  const modal = document.getElementById('inboxModal');\n  if (modal) modal.hidden = true;\n\n\n  if (lastFocusedElement) {\n    lastFocusedElement.focus();\n    lastFocusedElement = null;\n  }\n}\n\n\ndocument.addEventListener('keydown', (e) => {\n  if (e.key === 'Escape') {\n    const modal = document.getElementById('inboxModal');\n    if (modal && !modal.hidden) {\n      closeInbox();\n    }\n  }\n});\n\n\ndocument.addEventListener('click', (e) => {\n  const modal = document.getElementById('inboxModal');\n  if (modal && !modal.hidden && e.target === modal) {\n    closeInbox();\n  }\n});\n\nasync function loadAndRenderNotifications() {\n  const container = document.getElementById('notificationsList');\n  if (!container) return;\n\n  container.innerHTML = '<div class=\"mb-inbox-loading\">Loading...</div>';\n\n  const notifications = await loadNotifications();\n\n  if (notifications.length === 0) {\n    container.innerHTML = '<div class=\"mb-inbox-empty\">No notifications yet</div>';\n    return;\n  }\n\n  container.innerHTML = '';\n  notifications.forEach(notif => {\n    const item = document.createElement('div');\n    item.className = 'mb-notif-item' + (notif.read ? '' : ' mb-notif-unread');\n\n    const icon = getNotificationIcon(notif.type);\n    const timeAgo = formatTimeAgo(notif.created_at);\n\n    item.innerHTML = `\n      <div class=\"mb-notif-icon\">${icon}</div>\n      <div class=\"mb-notif-content\">\n        <div class=\"mb-notif-text\"><strong>${escapeHtml(notif.from_user_name)}</strong> ${getNotificationText(notif.type)}</div>\n        ${notif.content ? `<div class=\"mb-notif-preview\">${escapeHtml(notif.content.substring(0, 60))}...</div>` : ''}\n        <div class=\"mb-notif-time\">${timeAgo}</div>\n      </div>\n    `;\n\n    item.onclick = () => {\n      markNotificationRead(notif.id);\n      if (notif.post_id) {\n        closeInbox();\n        scrollToPost(notif.post_id);\n      }\n    };\n\n    container.appendChild(item);\n  });\n}\n\nfunction getNotificationIcon(type) {\n  const icons = {\n// --- Notification Helpers ---\n    mention: 'ðŸ“£',\n    like: 'â¤ï¸',\n    comment: 'ðŸ’¬',\n    follow: 'ðŸ‘¤',\n    reply: 'â†©ï¸'\n  };\n  return icons[type] || 'ðŸ””';\n}\n\nfunction getNotificationText(type) {\n  const texts = {\n    mention: 'mentioned you in a post',\n    like: 'liked your post',\n    comment: 'commented on your post',\n    follow: 'started following you',\n    reply: 'replied to your comment'\n  };\n  return texts[type] || 'sent you a notification';\n}\n\nfunction formatTimeAgo(dateStr) {\n  const date = new Date(dateStr);\n  const now = new Date();\n  const diff = Math.floor((now - date) / 1000);\n\n  if (diff < 60) return 'just now';\n  if (diff < 3600) return Math.floor(diff / 60) + 'm ago';\n  if (diff < 86400) return Math.floor(diff / 3600) + 'h ago';\n  if (diff < 604800) return Math.floor(diff / 86400) + 'd ago';\n  return date.toLocaleDateString();\n}\n\n\ndocument.addEventListener('click', (e) => {\n  if (mentionDropdown && !mentionDropdown.contains(e.target) && e.target.id !== 'postInput') {\n    hideMentionDropdown();\n  }\n});\n","path":null,"size_bytes":82788,"size_tokens":null},"mindspace-build/supabase/functions/send-newsletter-welcome/index.ts":{"content":"import { serve } from \"https://deno.land/std@0.177.0/http/server.ts\";\n\nconst RESEND_API_KEY = Deno.env.get(\"RESEND_API_KEY\")!;\n\ninterface WebhookPayload {\n  type: \"INSERT\";\n  table: string;\n  record: {\n    id: number;\n    email: string;\n    source: string;\n    confirmed: boolean;\n  };\n}\n\nconst brandConfig: Record<string, { name: string; domain: string; color: string; tagline: string; url: string }> = {\n  mindbalance: {\n    name: \"MindBalance\",\n    domain: \"mindbalance.cloud\",\n    color: \"#af916d\",\n    tagline: \"Your Mental Wellness Companion\",\n    url: \"https://mindbalance.cloud\",\n  },\n  mindspace: {\n    name: \"MindSpace\",\n    domain: \"mindspace.site\",\n    color: \"#2068A8\",\n    tagline: \"Your Mental Wellness Space\",\n    url: \"https://mindspace.site\",\n  },\n};\n\nserve(async (req) => {\n  try {\n    const payload: WebhookPayload = await req.json();\n\n    if (!payload.record.confirmed) {\n      return new Response(JSON.stringify({ message: \"Not confirmed, skipping\" }), { status: 200 });\n    }\n\n    const source = payload.record.source || \"mindbalance\";\n    const brand = brandConfig[source] || brandConfig.mindbalance;\n    const email = payload.record.email;\n\n    const emailHtml = `\n    <div style=\"font-family: 'Poppins', Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 40px 20px;\">\n      <div style=\"text-align: center; margin-bottom: 30px;\">\n        <h1 style=\"color: #3d3a50; font-size: 28px; margin: 0;\">${brand.name}</h1>\n        <p style=\"color: ${brand.color}; font-size: 14px; margin-top: 5px;\">${brand.tagline}</p>\n      </div>\n      \n      <div style=\"background: linear-gradient(135deg, #f8f8fa 0%, #fff 100%); border-radius: 16px; padding: 30px; border: 1px solid #e0e0e8;\">\n        <h2 style=\"color: #3d3a50; font-size: 22px; margin-top: 0;\">Welcome to Our Community!</h2>\n        \n        <p style=\"color: #5a5770; font-size: 16px; line-height: 1.6;\">\n          Thank you for subscribing to the ${brand.name} newsletter! You'll now receive:\n        </p>\n        \n        <ul style=\"color: #5a5770; font-size: 15px; line-height: 1.8; padding-left: 20px;\">\n          <li>Weekly mental wellness tips and strategies</li>\n          <li>New articles and resources</li>\n          <li>Community updates and stories</li>\n          <li>Exclusive content and early access</li>\n        </ul>\n        \n        <p style=\"color: #5a5770; font-size: 16px; line-height: 1.6;\">\n          We're committed to supporting your mental health journey with credible, \n          compassionate resources.\n        </p>\n        \n        <div style=\"text-align: center; margin-top: 30px;\">\n          <a href=\"${brand.url}\" \n             style=\"display: inline-block; background: ${brand.color}; color: #fff; padding: 14px 32px; \n                    border-radius: 30px; text-decoration: none; font-weight: 600; font-size: 15px;\">\n            Visit ${brand.name}\n          </a>\n        </div>\n      </div>\n      \n      <div style=\"text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e0e0e8;\">\n        <p style=\"color: #8a8899; font-size: 13px; margin: 0;\">\n          You received this email because you subscribed to the ${brand.name} newsletter.\n        </p>\n        <p style=\"color: #8a8899; font-size: 13px; margin-top: 10px;\">\n          <a href=\"${brand.url}\" style=\"color: ${brand.color}; text-decoration: none;\">\n            ${brand.domain}\n          </a>\n        </p>\n      </div>\n    </div>`;\n\n    const res = await fetch(\"https://api.resend.com/emails\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${RESEND_API_KEY}`,\n      },\n      body: JSON.stringify({\n        from: `${brand.name} <noreply@${brand.domain}>`,\n        to: [email],\n        subject: `Welcome to ${brand.name} Newsletter!`,\n        html: emailHtml,\n      }),\n    });\n\n    const resData = await res.json();\n\n    if (!res.ok) {\n      console.error(\"Resend error:\", resData);\n      return new Response(JSON.stringify({ error: resData }), { status: 500 });\n    }\n\n    return new Response(JSON.stringify({ message: \"Welcome email sent\", data: resData }), { status: 200 });\n  } catch (error) {\n    console.error(\"Error:\", error);\n    return new Response(JSON.stringify({ error: error.message }), { status: 500 });\n  }\n});\n","path":null,"size_bytes":4297,"size_tokens":null},"css/docs.css":{"content":"/* === PAGE BACKGROUND === */\n.docs-page #main-content {\n  background: #f5f3ef;\n  min-height: 100vh;\n}\n\n[data-theme=\"dark\"] .docs-page #main-content {\n  background: #1a1a2e;\n}\n\n/* === CONTAINER === */\n.docs-container {\n  max-width: 1340px;\n  margin: 0 auto;\n  padding: 2rem 2.5rem 4rem;\n  min-height: 60vh;\n}\n\n/* === HEADER === */\n.docs-header {\n  text-align: left;\n  padding: 1.5rem 0 2rem;\n  margin-bottom: 2rem;\n  position: relative;\n}\n\n.docs-header::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 60px;\n  height: 3px;\n  background: var(--user-accent);\n  border-radius: 3px;\n}\n\n.docs-header__brand {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 0.6rem;\n  margin-bottom: 0.4rem;\n}\n\n.docs-header__brand ion-icon {\n  font-size: 2.2rem;\n  color: var(--user-accent);\n}\n\n.docs-header__brand h1 {\n  font-size: 2.2rem;\n  font-weight: 700;\n  color: #1a1a2e;\n  letter-spacing: 0.3px;\n}\n\n[data-theme=\"dark\"] .docs-header__brand h1 {\n  color: #fff;\n}\n\n.docs-header__subtitle {\n  font-size: 1rem;\n  color: #777;\n  font-weight: 400;\n  letter-spacing: 0.3px;\n}\n\n[data-theme=\"dark\"] .docs-header__subtitle {\n  color: #9a9ab5;\n}\n\n/* === MAIN CONTENT === */\n.docs-main {\n  display: flex;\n  flex-direction: column;\n  gap: 1.75rem;\n}\n\n/* === TOP ROW: Files + Overview side by side === */\n.docs-top-row {\n  display: grid;\n  grid-template-columns: 1fr 1.4fr;\n  gap: 1.75rem;\n  align-items: start;\n}\n\n/* === SECTIONS === */\n.docs-section {\n  background: #fff;\n  border: 1px solid rgba(0,0,0,0.06);\n  border-radius: 16px;\n  padding: 1.75rem 2rem;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.04);\n  transition: box-shadow 0.2s ease;\n}\n\n.docs-section:hover {\n  box-shadow: 0 4px 18px rgba(0,0,0,0.08);\n  transform: none;\n}\n\n[data-theme=\"dark\"] .docs-section {\n  background: #22203a;\n  border-color: rgba(255,255,255,0.08);\n  box-shadow: none;\n}\n\n/* === PDF SECTION === */\n.docs-section--pdfs {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light, var(--user-accent)) 100%);\n  border: none;\n  position: relative;\n  overflow: hidden;\n}\n\n.docs-section--pdfs::before {\n  content: '';\n  position: absolute;\n  top: -40%;\n  right: -30%;\n  width: 80%;\n  height: 80%;\n  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);\n  pointer-events: none;\n}\n\n.docs-section--pdfs .docs-section__title {\n  color: #fff;\n  border-bottom-color: rgba(255,255,255,0.25);\n}\n\n.docs-section--pdfs .docs-section__title ion-icon {\n  color: #fff;\n}\n\n.docs-section--pdfs .docs-section__desc {\n  color: rgba(255,255,255,0.88);\n}\n\n/* === OVERVIEW SECTION === */\n.docs-section--overview {\n  display: flex;\n  flex-direction: column;\n}\n\n/* === SECTION TITLES === */\n.docs-section__title {\n  display: flex;\n  align-items: center;\n  gap: 0.6rem;\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  padding-bottom: 0.75rem;\n  border-bottom: 1px solid #ece8e0;\n  margin-bottom: 1.1rem;\n}\n\n[data-theme=\"dark\"] .docs-section__title {\n  color: #fff;\n  border-bottom-color: rgba(255,255,255,0.1);\n}\n\n.docs-section__title ion-icon {\n  font-size: 1.4rem;\n  color: var(--user-accent);\n}\n\n.docs-section__desc {\n  margin-bottom: 1rem;\n  font-size: 0.9rem;\n  color: #777;\n}\n\n[data-theme=\"dark\"] .docs-section__desc {\n  color: #9a9ab5;\n}\n\n/* === PDF CARDS â€” stacked list in side panel === */\n.docs-pdf-list {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.docs-pdf-card {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  background: rgba(255,255,255,0.15);\n  border: 1px solid rgba(255,255,255,0.2);\n  border-radius: 12px;\n  padding: 14px 16px;\n  text-decoration: none;\n  color: #fff;\n  transition: background 0.2s ease, transform 0.15s ease;\n}\n\n.docs-pdf-card:hover {\n  background: rgba(255,255,255,0.22);\n  transform: translateY(-2px);\n}\n\n.docs-pdf-card__icon {\n  width: 42px;\n  height: 42px;\n  background: rgba(255,255,255,0.18);\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.docs-pdf-card__icon ion-icon {\n  font-size: 1.3rem;\n}\n\n.docs-pdf-card__content {\n  flex: 1;\n  min-width: 0;\n}\n\n.docs-pdf-card__content h3 {\n  font-size: 0.92rem;\n  font-weight: 600;\n  margin-bottom: 2px;\n}\n\n.docs-pdf-card__content p {\n  font-size: 0.78rem;\n  opacity: 0.7;\n}\n\n.docs-pdf-card__arrow {\n  font-size: 1.1rem;\n  opacity: 0.5;\n  transition: transform 0.2s ease, opacity 0.2s ease;\n  flex-shrink: 0;\n}\n\n.docs-pdf-card:hover .docs-pdf-card__arrow {\n  transform: translateX(3px);\n  opacity: 1;\n}\n\n/* === CONTENT TEXT === */\n.docs-content {\n  color: #555;\n  line-height: 1.75;\n  font-size: 0.95rem;\n}\n\n[data-theme=\"dark\"] .docs-content {\n  color: #b0b0c8;\n}\n\n.docs-content p {\n  margin-bottom: 1.1rem;\n}\n\n.docs-content p:last-child {\n  margin-bottom: 0;\n}\n\n.docs-content strong {\n  color: #1a1a2e;\n  font-weight: 600;\n}\n\n[data-theme=\"dark\"] .docs-content strong {\n  color: #e0e0e8;\n}\n\n/* === FEATURES LIST â€” 3 columns === */\n.docs-features {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 14px;\n}\n\n.docs-feature {\n  display: flex;\n  gap: 14px;\n  padding: 18px 20px;\n  background: #faf9f6;\n  border: 1px solid rgba(0,0,0,0.05);\n  border-radius: 14px;\n  transition: box-shadow 0.2s ease, border-color 0.2s ease;\n}\n\n[data-theme=\"dark\"] .docs-feature {\n  background: #2d2b3d;\n  border-color: rgba(255,255,255,0.06);\n}\n\n.docs-feature:hover {\n  border-color: var(--user-accent);\n  box-shadow: 0 3px 12px rgba(0,0,0,0.06);\n  transform: none;\n}\n\n[data-theme=\"dark\"] .docs-feature:hover {\n  border-color: var(--user-accent);\n  box-shadow: none;\n}\n\n.docs-feature__icon {\n  width: 42px;\n  height: 42px;\n  background: var(--user-accent);\n  border-radius: 11px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.docs-feature__icon ion-icon {\n  font-size: 1.2rem;\n  color: #fff;\n}\n\n.docs-feature__content {\n  flex: 1;\n  min-width: 0;\n}\n\n.docs-feature__content h3 {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 4px;\n}\n\n[data-theme=\"dark\"] .docs-feature__content h3 {\n  color: #e0e0e8;\n}\n\n.docs-feature__content p {\n  font-size: 0.85rem;\n  color: #777;\n  line-height: 1.6;\n}\n\n[data-theme=\"dark\"] .docs-feature__content p {\n  color: #9a9ab5;\n}\n\n/* === TECH STACK â€” 5 columns === */\n.docs-tech-grid {\n  display: grid;\n  grid-template-columns: repeat(5, 1fr);\n  gap: 14px;\n}\n\n.docs-tech-item {\n  background: #faf9f6;\n  border: 1px solid rgba(0,0,0,0.05);\n  border-radius: 14px;\n  padding: 20px;\n  transition: border-color 0.2s ease;\n}\n\n[data-theme=\"dark\"] .docs-tech-item {\n  background: #2d2b3d;\n  border-color: rgba(255,255,255,0.06);\n}\n\n.docs-tech-item:hover {\n  border-color: var(--user-accent);\n}\n\n.docs-tech-item h4 {\n  font-size: 0.92rem;\n  font-weight: 600;\n  color: var(--user-accent);\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 2px solid var(--user-accent);\n}\n\n.docs-tech-item ul {\n  list-style: none;\n}\n\n.docs-tech-item li {\n  font-size: 0.84rem;\n  color: #666;\n  padding: 4px 0;\n  padding-left: 16px;\n  position: relative;\n}\n\n[data-theme=\"dark\"] .docs-tech-item li {\n  color: #9a9ab5;\n}\n\n.docs-tech-item li::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 5px;\n  height: 5px;\n  background: var(--user-accent);\n  border-radius: 50%;\n}\n\n/* === CTA SECTION === */\n.docs-section--cta {\n  background: transparent;\n  border: none;\n  box-shadow: none;\n  text-align: center;\n  padding: 1.5rem 1rem;\n}\n\n.docs-section--cta:hover {\n  transform: none;\n  box-shadow: none;\n}\n\n.docs-cta-button {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: var(--user-accent);\n  color: #fff;\n  padding: 12px 32px;\n  border-radius: 10px;\n  text-decoration: none;\n  font-weight: 600;\n  font-size: 1rem;\n  transition: opacity 0.2s ease, transform 0.15s ease;\n}\n\n.docs-cta-button:hover {\n  opacity: 0.88;\n  transform: translateY(-1px);\n}\n\n.docs-cta-button ion-icon {\n  font-size: 1.2rem;\n}\n\n/* === RESPONSIVE === */\n@media (max-width: 1100px) {\n  .docs-container {\n    padding: 2rem 2rem 3rem;\n  }\n\n  .docs-top-row {\n    grid-template-columns: 1fr 1fr;\n  }\n\n  .docs-features {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  .docs-tech-grid {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n\n@media (max-width: 900px) {\n  .docs-tech-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (max-width: 768px) {\n  .docs-container {\n    padding: 1.5rem 1rem 2.5rem;\n  }\n\n  .docs-header {\n    padding: 1.25rem 0 1.5rem;\n    margin-bottom: 1.5rem;\n  }\n\n  .docs-header__brand {\n    gap: 0.4rem;\n  }\n\n  .docs-header__brand ion-icon {\n    font-size: 1.8rem;\n  }\n\n  .docs-header__brand h1 {\n    font-size: 1.7rem;\n  }\n\n  .docs-header__subtitle {\n    font-size: 0.92rem;\n  }\n\n  .docs-top-row {\n    grid-template-columns: 1fr;\n  }\n\n  .docs-section {\n    padding: 1.25rem 1.25rem;\n    border-radius: 12px;\n  }\n\n  .docs-section__title {\n    font-size: 1.12rem;\n  }\n\n  .docs-features {\n    grid-template-columns: 1fr;\n  }\n\n  .docs-feature {\n    padding: 14px 16px;\n  }\n\n  .docs-tech-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n@media (max-width: 480px) {\n  .docs-header__brand h1 {\n    font-size: 1.5rem;\n  }\n\n  .docs-section {\n    padding: 1.1rem;\n  }\n\n  .docs-cta-button {\n    padding: 10px 24px;\n    font-size: 0.9rem;\n  }\n}\n\n","path":null,"size_bytes":9317,"size_tokens":null},"mindspace-build/css/animations.css":{"content":"/* === BASE ANIMATION STATES === */\n.animate-fade-in,\n.animate-slide-up,\n.animate-slide-left,\n.animate-slide-right,\n.animate-scale-in,\n.animate-blur-in {\n  opacity: 0;\n  transition: opacity 0.6s ease, transform 0.6s ease, filter 0.6s ease;\n}\n\n.animate-fade-in {\n  transform: translateY(0);\n}\n\n.animate-slide-up {\n  transform: translateY(40px);\n}\n\n.animate-slide-left {\n  transform: translateX(40px);\n}\n\n.animate-slide-right {\n  transform: translateX(-40px);\n}\n\n.animate-scale-in {\n  transform: scale(0.9);\n}\n\n.animate-blur-in {\n  filter: blur(10px);\n  transform: translateY(20px);\n}\n\n/* === VISIBLE STATES === */\n.animate-fade-in.is-visible,\n.animate-slide-up.is-visible,\n.animate-slide-left.is-visible,\n.animate-slide-right.is-visible,\n.animate-scale-in.is-visible,\n.animate-blur-in.is-visible {\n  opacity: 1;\n  transform: translateY(0) translateX(0) scale(1);\n  filter: blur(0);\n}\n\n/* === STAGGERED ANIMATIONS === */\n.animate-stagger > * {\n  opacity: 0;\n  transform: translateY(30px);\n  transition: opacity 0.5s ease, transform 0.5s ease;\n}\n\n.animate-stagger.is-visible > *:nth-child(1) { transition-delay: 0s; }\n.animate-stagger.is-visible > *:nth-child(2) { transition-delay: 0.1s; }\n.animate-stagger.is-visible > *:nth-child(3) { transition-delay: 0.2s; }\n.animate-stagger.is-visible > *:nth-child(4) { transition-delay: 0.3s; }\n.animate-stagger.is-visible > *:nth-child(5) { transition-delay: 0.4s; }\n.animate-stagger.is-visible > *:nth-child(6) { transition-delay: 0.5s; }\n.animate-stagger.is-visible > *:nth-child(7) { transition-delay: 0.6s; }\n.animate-stagger.is-visible > *:nth-child(8) { transition-delay: 0.7s; }\n.animate-stagger.is-visible > *:nth-child(9) { transition-delay: 0.8s; }\n.animate-stagger.is-visible > *:nth-child(10) { transition-delay: 0.9s; }\n.animate-stagger.is-visible > *:nth-child(11) { transition-delay: 1.0s; }\n.animate-stagger.is-visible > *:nth-child(12) { transition-delay: 1.1s; }\n\n.animate-stagger.is-visible > * {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n/* === KEYFRAME ANIMATIONS === */\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInLeft {\n  from {\n    opacity: 0;\n    transform: translateX(-30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes fadeInRight {\n  from {\n    opacity: 0;\n    transform: translateX(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes scaleIn {\n  from {\n    opacity: 0;\n    transform: scale(0.8);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n\n@keyframes floatSlow {\n  0%, 100% {\n    transform: translateY(0px) rotate(0deg);\n  }\n  50% {\n    transform: translateY(-6px) rotate(1deg);\n  }\n}\n\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.05);\n    opacity: 0.9;\n  }\n}\n\n@keyframes pulseGlow {\n  0%, 100% {\n    box-shadow: 0 4px 20px rgba(32, 104, 168, 0.3);\n  }\n  50% {\n    box-shadow: 0 8px 40px rgba(32, 104, 168, 0.5);\n  }\n}\n\n@keyframes shimmer {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n\n@keyframes bounce {\n  0%, 20%, 50%, 80%, 100% {\n    transform: translateY(0);\n  }\n  40% {\n    transform: translateY(-15px);\n  }\n  60% {\n    transform: translateY(-7px);\n  }\n}\n\n@keyframes rotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes slideInFromTop {\n  from {\n    opacity: 0;\n    transform: translateY(-100%);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes ripple {\n  to {\n    transform: scale(4);\n    opacity: 0;\n  }\n}\n\n@keyframes borderGlow {\n  0%, 100% {\n    border-color: rgba(32, 104, 168, 0.3);\n  }\n  50% {\n    border-color: rgba(32, 104, 168, 0.8);\n  }\n}\n\n/* === HOVER ANIMATIONS === */\n.hover-lift {\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.hover-lift:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\n}\n\n.hover-scale {\n  transition: transform 0.3s ease;\n}\n\n.hover-scale:hover {\n  transform: scale(1.05);\n}\n\n.hover-glow {\n  transition: box-shadow 0.3s ease, transform 0.3s ease;\n}\n\n.hover-glow:hover {\n  box-shadow: 0 0 30px rgba(32, 104, 168, 0.4);\n  transform: translateY(-4px);\n}\n\n.hover-3d {\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  transform-style: preserve-3d;\n}\n\n.hover-3d:hover {\n  transform: perspective(1000px) rotateX(5deg) rotateY(-5deg) translateY(-5px);\n  box-shadow: 10px 20px 40px rgba(0, 0, 0, 0.15);\n}\n\n.hover-shine {\n  position: relative;\n  overflow: hidden;\n}\n\n.hover-shine::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 50%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);\n  transition: left 0.5s ease;\n}\n\n.hover-shine:hover::after {\n  left: 100%;\n}\n\n/* === CONTINUOUS ANIMATIONS === */\n.animate-float {\n  animation: float 3s ease-in-out infinite;\n}\n\n.animate-float-slow {\n  animation: floatSlow 4s ease-in-out infinite;\n}\n\n.animate-pulse {\n  animation: pulse 2s ease-in-out infinite;\n}\n\n.animate-pulse-glow {\n  animation: pulseGlow 2s ease-in-out infinite;\n}\n\n.animate-shimmer {\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite;\n}\n\n.animate-bounce {\n  animation: bounce 2s infinite;\n}\n\n.animate-rotate {\n  animation: rotate 10s linear infinite;\n}\n\n/* === PAGE LOAD ANIMATIONS === */\n.page-enter {\n  animation: fadeInUp 0.6s ease forwards;\n}\n\n.page-enter-delay-1 {\n  animation: fadeInUp 0.6s ease 0.1s forwards;\n  opacity: 0;\n}\n\n.page-enter-delay-2 {\n  animation: fadeInUp 0.6s ease 0.2s forwards;\n  opacity: 0;\n}\n\n.page-enter-delay-3 {\n  animation: fadeInUp 0.6s ease 0.3s forwards;\n  opacity: 0;\n}\n\n.page-enter-delay-4 {\n  animation: fadeInUp 0.6s ease 0.4s forwards;\n  opacity: 0;\n}\n\n/* === CARD ANIMATIONS === */\n.card-animated {\n  transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275),\n              box-shadow 0.4s ease,\n              border-color 0.3s ease;\n}\n\n.card-animated:hover {\n  transform: translateY(-10px) scale(1.02);\n  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);\n}\n\n[data-theme=\"dark\"] .card-animated:hover {\n  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);\n}\n\n/* === BUTTON ANIMATIONS === */\n.btn-animated {\n  position: relative;\n  overflow: hidden;\n  transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;\n}\n\n.btn-animated:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);\n}\n\n.btn-animated:active {\n  transform: translateY(-1px);\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);\n}\n\n.btn-ripple {\n  position: relative;\n  overflow: hidden;\n}\n\n.btn-ripple .ripple-effect {\n  position: absolute;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.4);\n  transform: scale(0);\n  animation: ripple 0.6s ease-out;\n  pointer-events: none;\n}\n\n/* === SECTION DECORATIONS === */\n.section-decorated {\n  position: relative;\n}\n\n.section-decorated::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 80px;\n  height: 4px;\n  background: linear-gradient(135deg, #5ba4e6 0%, #38b6ff 100%);\n  border-radius: 2px;\n}\n\n[data-theme=\"dark\"] .section-decorated::before {\n  background: linear-gradient(135deg, #5ba4e6 0%, #1a5a8f 100%);\n}\n\n/* === GRADIENT TEXT === */\n.gradient-text {\n  background: linear-gradient(135deg, #1a5a8f 0%, #5ba4e6 50%, #1a5a8f 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-size: 200% auto;\n}\n\n.gradient-text-animated {\n  background: linear-gradient(135deg, #1a5a8f 0%, #5ba4e6 50%, #1a5a8f 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-size: 200% auto;\n  animation: shimmer 3s linear infinite;\n}\n\n[data-theme=\"dark\"] .gradient-text,\n[data-theme=\"dark\"] .gradient-text-animated {\n  background: linear-gradient(135deg, #fff 0%, #5ba4e6 50%, #fff 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-size: 200% auto;\n}\n\n/* === QUOTE BLOCK === */\n.quote-block {\n  position: relative;\n  padding: 50px 60px;\n  margin: 60px auto;\n  max-width: 800px;\n  text-align: center;\n  background: linear-gradient(145deg, #f0f7ff 0%, #e0eeff 50%, #d0e0f5 100%);\n  border-radius: 24px;\n  box-shadow: 0 20px 60px rgba(139, 115, 85, 0.12), \n              0 8px 25px rgba(0, 0, 0, 0.06),\n              inset 0 1px 0 rgba(255, 255, 255, 0.8);\n  overflow: hidden;\n  animation: floatSlow 5s ease-in-out infinite;\n}\n\n.quote-block::before,\n.quote-block::after {\n  position: absolute;\n  font-family: Georgia, 'Times New Roman', serif;\n  font-size: 10rem;\n  line-height: 1;\n  color: rgba(32, 104, 168, 0.15);\n  pointer-events: none;\n}\n\n.quote-block::before {\n  content: \"\\201C\";\n  top: -20px;\n  left: 30px;\n}\n\n.quote-block::after {\n  content: \"\\201D\";\n  bottom: -60px;\n  right: 30px;\n}\n\n.quote-block__icon {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 70px;\n  height: 70px;\n  margin-bottom: 25px;\n  background: linear-gradient(135deg, #5ba4e6 0%, #38b6ff 100%);\n  border-radius: 50%;\n  box-shadow: 0 10px 30px rgba(32, 104, 168, 0.35);\n  animation: pulse 3s ease-in-out infinite;\n}\n\n.quote-block__icon ion-icon {\n  font-size: 32px;\n  color: #fff;\n}\n\n.quote-block__text {\n  font-size: 1.6rem;\n  font-style: italic;\n  font-weight: 500;\n  color: #4a4a4a;\n  line-height: 1.8;\n  margin-bottom: 25px;\n  position: relative;\n  z-index: 1;\n}\n\n.quote-block__author {\n  display: inline-flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #1a5a8f;\n  position: relative;\n  z-index: 1;\n}\n\n.quote-block__author::before {\n  content: '';\n  width: 40px;\n  height: 2px;\n  background: linear-gradient(90deg, transparent, #5ba4e6);\n  border-radius: 1px;\n}\n\n.quote-block__author::after {\n  content: '';\n  width: 40px;\n  height: 2px;\n  background: linear-gradient(90deg, #5ba4e6, transparent);\n  border-radius: 1px;\n}\n\n.quote-block__decoration {\n  position: absolute;\n  width: 150px;\n  height: 150px;\n  border-radius: 50%;\n  background: radial-gradient(circle, rgba(32, 104, 168, 0.2) 0%, transparent 70%);\n  pointer-events: none;\n}\n\n.quote-block__decoration--1 {\n  top: -50px;\n  right: -50px;\n  animation: float 4s ease-in-out infinite;\n}\n\n.quote-block__decoration--2 {\n  bottom: -50px;\n  left: -50px;\n  animation: float 4s ease-in-out infinite 1s;\n}\n\n[data-theme=\"dark\"] .quote-block {\n  background: linear-gradient(145deg, #2a2a4a 0%, #252542 50%, #1f1f3a 100%);\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), \n              0 8px 25px rgba(0, 0, 0, 0.3),\n              inset 0 1px 0 rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .quote-block::before,\n[data-theme=\"dark\"] .quote-block::after {\n  color: rgba(32, 104, 168, 0.08);\n}\n\n[data-theme=\"dark\"] .quote-block__icon {\n  background: linear-gradient(135deg, #3d3a50 0%, #4d4a60 100%);\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);\n}\n\n[data-theme=\"dark\"] .quote-block__text {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .quote-block__author {\n  color: #5ba4e6;\n}\n\n[data-theme=\"dark\"] .quote-block__decoration {\n  background: radial-gradient(circle, rgba(32, 104, 168, 0.08) 0%, transparent 70%);\n}\n\n/* === RESPONSIVE === */\n@media (max-width: 768px) {\n  .quote-block {\n    padding: 35px 25px;\n    margin: 40px 15px;\n  }\n  \n  .quote-block::before,\n  .quote-block::after {\n    font-size: 6rem;\n  }\n  \n  .quote-block::before {\n    top: -10px;\n    left: 15px;\n  }\n  \n  .quote-block::after {\n    bottom: -40px;\n    right: 15px;\n  }\n  \n  .quote-block__icon {\n    width: 55px;\n    height: 55px;\n    margin-bottom: 20px;\n  }\n  \n  .quote-block__icon ion-icon {\n    font-size: 26px;\n  }\n  \n  .quote-block__text {\n    font-size: 1.25rem;\n    line-height: 1.7;\n  }\n  \n  .quote-block__author {\n    font-size: 1rem;\n  }\n  \n  .quote-block__author::before,\n  .quote-block__author::after {\n    width: 25px;\n  }\n}\n\n/* === WAVE DIVIDERS === */\n.wave-divider {\n  position: relative;\n  height: 80px;\n  overflow: hidden;\n}\n\n.wave-divider svg {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.wave-divider--top {\n  transform: rotate(180deg);\n}\n\n/* === SKELETON LOADING === */\n.skeleton {\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n  background-size: 200% 100%;\n  animation: shimmer 1.5s infinite;\n  border-radius: 8px;\n}\n\n[data-theme=\"dark\"] .skeleton {\n  background: linear-gradient(90deg, #2a2a4a 25%, #353550 50%, #2a2a4a 75%);\n  background-size: 200% 100%;\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  *,\n  *::before,\n  *::after {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n  }\n  \n  .animate-fade-in,\n  .animate-slide-up,\n  .animate-slide-left,\n  .animate-slide-right,\n  .animate-scale-in,\n  .animate-blur-in,\n  .animate-stagger > * {\n    opacity: 1;\n    transform: none;\n    filter: none;\n  }\n  \n  .animate-float,\n  .animate-float-slow,\n  .animate-pulse,\n  .animate-pulse-glow,\n  .animate-shimmer,\n  .animate-bounce,\n  .animate-rotate {\n    animation: none;\n  }\n  \n  .quote-block {\n    animation: none;\n  }\n  \n  .quote-block__icon {\n    animation: none;\n  }\n}\n","path":null,"size_bytes":13665,"size_tokens":null},"mindspace-build/js/auth.js":{"content":"// ==================== AUTHENTICATION ====================\n\n// --- Supabase Configuration ---\nconst SUPABASE_URL = \"https://cxjqessxarjayqxvhnhs.supabase.co\";\nconst SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4anFlc3N4YXJqYXlxeHZobmhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwMjQwOTEsImV4cCI6MjA4MzYwMDA5MX0.SUI4sPOSPxDiGwqwQr19UOKtbK7KmjMqkX6HUT6-yps\";\n\nlet supabaseClient = null;\nlet authReady = false;\nlet currentAuthUser = null;\nlet authChangeCallbacks = [];\n\n// --- Supabase Client ---\nfunction getSupabase() {\n  if (!supabaseClient && typeof supabase !== 'undefined') {\n    supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n  }\n  return supabaseClient;\n}\n\n// --- User Session ---\nasync function getCurrentUser() {\n  const sb = getSupabase();\n  if (!sb) return null;\n  \n  const { data } = await sb.auth.getSession();\n  return data?.session?.user || null;\n}\n\nasync function signOut() {\n  const sb = getSupabase();\n  if (!sb) return;\n  \n  await sb.auth.signOut();\n}\n\n// --- Path Helpers ---\nfunction getAuthPath() {\n  const path = window.location.pathname;\n  if (path.includes('/blog/') || \n      path.includes('/resourcelib/') ||\n      path.includes('/community/') ||\n      path.includes('/support/') ||\n      path.includes('/auth/') ||\n      path.includes('/articles/') ||\n      path.includes('/profile/') ||\n      path.includes('/find-help/')) {\n    return '../auth/';\n  }\n  return './auth/';\n}\n\nfunction getProfilePath() {\n  const path = window.location.pathname;\n  if (path.includes('/blog/') || \n      path.includes('/resourcelib/') ||\n      path.includes('/community/') ||\n      path.includes('/support/') ||\n      path.includes('/auth/') ||\n      path.includes('/articles/') ||\n      path.includes('/find-help/')) {\n    return '../profile/';\n  }\n  if (path.includes('/profile/')) {\n    return './';\n  }\n  return './profile/';\n}\n\n// --- Redirect Management ---\nfunction saveRedirectUrl() {\n  const currentUrl = window.location.pathname + window.location.search;\n  if (!currentUrl.includes('/auth/')) {\n    sessionStorage.setItem('auth_redirect', currentUrl);\n  }\n}\n\nfunction saveRedirectToProfile() {\n  sessionStorage.setItem('auth_redirect', '/profile/');\n  sessionStorage.setItem('auth_intent', 'manage_profile');\n}\n\nfunction getRedirectUrl() {\n  return sessionStorage.getItem('auth_redirect') || '/';\n}\n\nfunction getAuthIntent() {\n  return sessionStorage.getItem('auth_intent') || null;\n}\n\nfunction clearRedirectUrl() {\n  sessionStorage.removeItem('auth_redirect');\n  sessionStorage.removeItem('auth_intent');\n}\n\n// --- Auth State Broadcasting ---\nfunction broadcastAuthChange(user) {\n  if (currentAuthUser === user && authReady) return;\n  \n  currentAuthUser = user;\n  const wasReady = authReady;\n  authReady = true;\n  \n  authChangeCallbacks.forEach(cb => cb(user));\n  \n  if (!wasReady) {\n    const event = new CustomEvent('mindspace:authready', {\n      detail: { user: user, isSignedIn: !!user }\n    });\n    window.dispatchEvent(event);\n  }\n  \n  const event = new CustomEvent('mindspace:authchange', {\n    detail: { user: user, isSignedIn: !!user }\n  });\n  window.dispatchEvent(event);\n}\n\nfunction onAuthReady(callback) {\n  if (authReady) {\n    callback(currentAuthUser);\n  } else {\n    const handler = (e) => {\n      callback(e.detail.user);\n      window.removeEventListener('mindspace:authready', handler);\n    };\n    window.addEventListener('mindspace:authready', handler);\n  }\n}\n\nfunction onAuthChange(callback) {\n  if (authChangeCallbacks.indexOf(callback) === -1) {\n    authChangeCallbacks.push(callback);\n  }\n  if (authReady) {\n    callback(currentAuthUser);\n  }\n}\n\n// --- Auth UI Updates ---\nfunction updateAuthUI(user) {\n  const authBtns = document.querySelectorAll('[data-auth-btn]');\n  const authPath = getAuthPath();\n  \n  authBtns.forEach(authBtn => {\n    const spanEl = authBtn.querySelector('.span') || authBtn.querySelector('.auth-text') || authBtn.querySelector('span');\n    const textTarget = spanEl || authBtn;\n    \n    authBtn.href = authPath;\n    \n    if (user) {\n      textTarget.textContent = 'Sign Out';\n      if (textTarget.hasAttribute('data-translate')) {\n        textTarget.setAttribute('data-translate', 'nav_signout');\n      }\n      authBtn.onclick = (e) => {\n        e.preventDefault();\n        signOut();\n      };\n    } else {\n      textTarget.textContent = 'Sign In';\n      if (textTarget.hasAttribute('data-translate')) {\n        textTarget.setAttribute('data-translate', 'nav_signin');\n      }\n      authBtn.onclick = (e) => {\n        e.preventDefault();\n        saveRedirectUrl();\n        window.location.href = authPath;\n      };\n    }\n  });\n  \n  document.querySelectorAll('[data-auth-show]').forEach(el => {\n    if (user) {\n      el.style.display = '';\n      el.removeAttribute('hidden');\n    } else {\n      el.style.display = 'none';\n      el.setAttribute('hidden', '');\n    }\n  });\n  \n  document.querySelectorAll('[data-auth-hide]').forEach(el => {\n    if (user) {\n      el.style.display = 'none';\n      el.setAttribute('hidden', '');\n    } else {\n      el.style.display = '';\n      el.removeAttribute('hidden');\n    }\n  });\n  \n  updateUserButton(user);\n}\n\n// --- Mobile Logout ---\nfunction handleMobileLogout() {\n  signOut();\n}\n\nwindow.handleMobileLogout = handleMobileLogout;\n\n// --- User Button ---\nasync function updateUserButton(user) {\n  const userBtn = document.querySelector('[data-user-btn]');\n  if (!userBtn) return;\n  \n  const icon = userBtn.querySelector('.action-icon');\n  \n  if (user) {\n    userBtn.classList.add('is-signed-in');\n    \n    userBtn.onclick = null;\n    userBtn.href = getProfilePath();\n    \n    try {\n      const sb = getSupabase();\n      if (sb) {\n        const { data: profile } = await sb\n          .from('profiles')\n          .select('avatar_url, display_name')\n          .eq('id', user.id)\n          .single();\n        \n        if (profile?.avatar_url) {\n          if (icon) icon.style.display = 'none';\n          \n          let avatar = userBtn.querySelector('.user-avatar');\n          if (!avatar) {\n            avatar = document.createElement('img');\n            avatar.className = 'user-avatar';\n            avatar.alt = profile.display_name || 'User';\n            userBtn.insertBefore(avatar, userBtn.firstChild);\n          }\n          avatar.src = profile.avatar_url;\n        } else {\n          if (icon) icon.style.display = '';\n          const existingAvatar = userBtn.querySelector('.user-avatar');\n          if (existingAvatar) existingAvatar.remove();\n        }\n      }\n    } catch (e) {\n      console.log('Could not load user avatar');\n      if (icon) icon.style.display = '';\n    }\n  } else {\n    userBtn.classList.remove('is-signed-in');\n    \n    if (icon) icon.style.display = '';\n    const avatar = userBtn.querySelector('.user-avatar');\n    if (avatar) avatar.remove();\n    \n    userBtn.onclick = (e) => {\n      e.preventDefault();\n      saveRedirectToProfile();\n      window.location.href = getAuthPath();\n    };\n  }\n}\n\n// --- Auth Initialization ---\nfunction initAuth() {\n  const sb = getSupabase();\n  if (!sb) return;\n  \n  initUserMenu();\n  \n  sb.auth.onAuthStateChange((event, session) => {\n    const user = session?.user || null;\n    broadcastAuthChange(user);\n    updateAuthUI(user);\n    updateUserMenuUI(user);\n    if (user) {\n      logDailyVisit(user.id);\n    }\n  });\n  \n  getCurrentUser().then(user => {\n    broadcastAuthChange(user);\n    updateAuthUI(user);\n    updateUserMenuUI(user);\n    if (user) {\n      logDailyVisit(user.id);\n    }\n  });\n}\n\n// --- Daily Visit Logging ---\nasync function logDailyVisit(userId) {\n  const sb = getSupabase();\n  if (!sb || !userId) return;\n  \n  const today = new Date().toISOString().split('T')[0];\n  const sessionKey = `daily_visit_logged_${today}`;\n  \n  if (sessionStorage.getItem(sessionKey)) {\n    return;\n  }\n  \n  try {\n    await sb\n      .from('user_engagement')\n      .upsert({\n        user_id: userId,\n        visit_date: today,\n        articles_read: 0\n      }, { \n        onConflict: 'user_id,visit_date',\n        ignoreDuplicates: true\n      });\n    \n    sessionStorage.setItem(sessionKey, 'true');\n    await updateStreakFromActivity(userId);\n  } catch (e) {\n    console.warn('Error logging daily visit:', e);\n  }\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initAuth);\n} else {\n  initAuth();\n}\n\n// ==================== READING ACTIVITY & STREAK TRACKING ====================\n\nasync function logReadingActivity(articleSlug, articleTitle) {\n  const sb = getSupabase();\n  if (!sb) return null;\n  \n  const user = await getCurrentUser();\n  if (!user) return null;\n  \n  const today = new Date().toISOString().split('T')[0];\n  \n  const sessionKey = `reading_logged_${articleSlug}_${today}`;\n  if (sessionStorage.getItem(sessionKey)) {\n    console.log('Already logged reading for this article today');\n    return null;\n  }\n  \n  try {\n    const { data: existing } = await sb\n      .from('user_engagement')\n      .select('articles_read')\n      .eq('user_id', user.id)\n      .eq('visit_date', today)\n      .single();\n    \n    const currentCount = existing?.articles_read || 0;\n    \n    const { data, error } = await sb\n      .from('user_engagement')\n      .upsert({\n        user_id: user.id,\n        visit_date: today,\n        articles_read: currentCount + 1\n      }, { \n        onConflict: 'user_id,visit_date'\n      })\n      .select()\n      .single();\n    \n    if (error) throw error;\n    \n    sessionStorage.setItem(sessionKey, 'true');\n    \n    await updateStreakFromActivity(user.id);\n    return data;\n  } catch (e) {\n    console.error('Error logging reading activity:', e);\n    return null;\n  }\n}\n\n// --- Streak Calculation ---\nasync function updateStreakFromActivity(userId) {\n  const sb = getSupabase();\n  if (!sb) return;\n  \n  try {\n    const { data: engagementDays, error } = await sb\n      .from('user_engagement')\n      .select('visit_date')\n      .eq('user_id', userId)\n      .order('visit_date', { ascending: false });\n    \n    if (error || !engagementDays || engagementDays.length === 0) {\n      return;\n    }\n    \n    let currentStreak = 0;\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    \n    for (let i = 0; i < engagementDays.length; i++) {\n      const visitDate = new Date(engagementDays[i].visit_date + 'T00:00:00');\n      const expectedDate = new Date(today);\n      expectedDate.setDate(expectedDate.getDate() - i);\n      expectedDate.setHours(0, 0, 0, 0);\n      \n      if (visitDate.getTime() === expectedDate.getTime()) {\n        currentStreak++;\n      } else if (i === 0) {\n        const yesterday = new Date(today);\n        yesterday.setDate(yesterday.getDate() - 1);\n        yesterday.setHours(0, 0, 0, 0);\n        \n        if (visitDate.getTime() === yesterday.getTime()) {\n          currentStreak++;\n        } else {\n          break;\n        }\n      } else {\n        break;\n      }\n    }\n    \n    const { data: profile } = await sb\n      .from('profiles')\n      .select('longest_streak')\n      .eq('id', userId)\n      .single();\n    \n    const longestStreak = Math.max(currentStreak, profile?.longest_streak || 0);\n    \n    await sb\n      .from('profiles')\n      .update({\n        current_streak: currentStreak,\n        longest_streak: longestStreak,\n        last_visit_date: today.toISOString().split('T')[0]\n      })\n      .eq('id', userId);\n    \n    window.dispatchEvent(new CustomEvent('mindspace:streakupdated', {\n      detail: { currentStreak, longestStreak }\n    }));\n    \n  } catch (e) {\n    console.error('Error updating streak:', e);\n  }\n}\n\n// --- Reading Calendar ---\nasync function getReadingCalendar(userId, days = 30) {\n  const sb = getSupabase();\n  if (!sb) return [];\n  \n  const startDate = new Date();\n  startDate.setDate(startDate.getDate() - days);\n  \n  try {\n    const { data, error } = await sb\n      .from('user_engagement')\n      .select('visit_date, articles_read')\n      .eq('user_id', userId)\n      .gte('visit_date', startDate.toISOString().split('T')[0])\n      .order('visit_date', { ascending: true });\n    \n    if (error) throw error;\n    return data || [];\n  } catch (e) {\n    console.error('Error fetching reading calendar:', e);\n    return [];\n  }\n}\n\n// ==================== USER MENU ====================\n\nfunction toggleUserMenu() {\n  const wrapper = document.getElementById('userMenuWrapper');\n  const trigger = document.getElementById('userMenuTrigger');\n  if (!wrapper) return;\n  \n  const isActive = wrapper.classList.toggle('active');\n  if (trigger) {\n    trigger.setAttribute('aria-expanded', isActive);\n  }\n}\n\nfunction closeUserMenu() {\n  const wrapper = document.getElementById('userMenuWrapper');\n  const trigger = document.getElementById('userMenuTrigger');\n  if (wrapper) {\n    wrapper.classList.remove('active');\n  }\n  if (trigger) {\n    trigger.setAttribute('aria-expanded', 'false');\n  }\n}\n\nasync function handleUserMenuLogout() {\n  closeUserMenu();\n  await signOut();\n  window.location.href = '/';\n}\n\n// --- User Menu UI ---\nasync function updateUserMenuUI(user) {\n  const signedInSection = document.querySelector('.user-menu-signed-in');\n  const guestSection = document.querySelector('.user-menu-guest');\n  const userIcon = document.querySelector('[data-user-icon]');\n  const userMenuAvatar = document.getElementById('userMenuAvatar');\n  const userMenuName = document.getElementById('userMenuName');\n  const userMenuEmail = document.getElementById('userMenuEmail');\n  \n  if (user) {\n    if (signedInSection) signedInSection.style.display = 'block';\n    if (guestSection) guestSection.style.display = 'none';\n    \n    let displayName = user.user_metadata?.display_name || user.email?.split('@')[0] || 'User';\n    let avatarUrl = user.user_metadata?.avatar_url || null;\n    \n    if (userMenuEmail) userMenuEmail.textContent = user.email || '';\n    \n    try {\n      const sb = getSupabase();\n      if (sb) {\n        const { data: profile } = await sb\n          .from('profiles')\n          .select('avatar_url, display_name')\n          .eq('id', user.id)\n          .single();\n        \n        if (profile) {\n          if (profile.display_name) displayName = profile.display_name;\n          if (profile.avatar_url) avatarUrl = profile.avatar_url;\n        }\n      }\n    } catch (e) {\n    }\n    \n    if (userMenuName) userMenuName.textContent = displayName;\n    \n    if (userMenuAvatar) {\n      userMenuAvatar.src = avatarUrl || '/assets/images/default-avatar.png';\n    }\n    \n    if (userIcon) {\n      if (avatarUrl) {\n        userIcon.innerHTML = `<img src=\"${avatarUrl}\" alt=\"${displayName}\" class=\"user-avatar-small\">`;\n      } else {\n        userIcon.innerHTML = '<ion-icon name=\"person-outline\"></ion-icon>';\n      }\n    }\n  } else {\n    if (signedInSection) signedInSection.style.display = 'none';\n    if (guestSection) guestSection.style.display = 'block';\n    \n    if (userIcon) {\n      userIcon.innerHTML = '<ion-icon name=\"person-outline\"></ion-icon>';\n    }\n    \n    if (userMenuAvatar) {\n      userMenuAvatar.src = '/assets/images/default-avatar.png';\n    }\n    if (userMenuName) userMenuName.textContent = 'User';\n    if (userMenuEmail) userMenuEmail.textContent = '';\n  }\n}\n\n// --- User Menu Initialization ---\nfunction initUserMenu() {\n  const trigger = document.getElementById('userMenuTrigger');\n  const wrapper = document.getElementById('userMenuWrapper');\n  \n  if (trigger) {\n    trigger.addEventListener('click', (e) => {\n      e.stopPropagation();\n      toggleUserMenu();\n    });\n  }\n  \n  document.addEventListener('click', (e) => {\n    if (wrapper && !wrapper.contains(e.target)) {\n      closeUserMenu();\n    }\n  });\n  \n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n      closeUserMenu();\n    }\n  });\n}\n\n// --- Global Exports ---\nwindow.toggleUserMenu = toggleUserMenu;\nwindow.closeUserMenu = closeUserMenu;\nwindow.handleUserMenuLogout = handleUserMenuLogout;\n\nwindow.MindSpaceAuth = {\n  getSupabase,\n  getCurrentUser,\n  signOut,\n  onAuthReady,\n  onAuthChange,\n  getRedirectUrl,\n  clearRedirectUrl,\n  saveRedirectUrl,\n  isReady: () => authReady,\n  getUser: () => currentAuthUser,\n  logReadingActivity,\n  getReadingCalendar,\n  updateStreakFromActivity,\n  updateUserMenuUI\n};\n","path":null,"size_bytes":16182,"size_tokens":null},"mindspace-build/profile/profile.js":{"content":"// ==================== PROFILE ====================\n\"use strict\";\n\n// --- State ---\nlet currentUser = null;\nlet userProfile = null;\nlet allActivities = [];\nlet viewedUserId = null;\nlet isOwnProfile = true;\n\n\n// --- DOM Helpers ---\nfunction createSafeElement(tag, className, textContent) {\n  const el = document.createElement(tag);\n  if (className) el.className = className;\n  if (textContent) el.textContent = textContent;\n  return el;\n}\n\nfunction escapeHtml(str) {\n  if (!str) return '';\n  const div = document.createElement('div');\n  div.textContent = str;\n  return div.innerHTML;\n}\n\n// --- Activity Item ---\nfunction createActivityItem(activity) {\n  const item = createSafeElement('div', 'mb-activity-item card-animated hover-lift');\n  item.dataset.type = activity.type;\n\n  const iconWrap = createSafeElement('div', 'mb-activity-item__icon');\n  const icon = document.createElement('ion-icon');\n  icon.setAttribute('name', activity.icon);\n  iconWrap.appendChild(icon);\n\n  const contentWrap = createSafeElement('div', 'mb-activity-item__content');\n  const text = createSafeElement('p', 'mb-activity-item__text');\n  const typeLabels = {\n    'post': 'You posted',\n    'comment': 'You commented',\n    'article_read': 'Read article',\n    'article_complete': 'Finished reading',\n    'page_view': 'Visited',\n    'mood_checkin': 'Mood check-in',\n    'achievement_unlocked': 'Achievement unlocked',\n    'profile_update': 'Updated profile',\n    'bookmark': 'Bookmarked',\n    'like': 'Liked a post'\n  };\n  const label = typeLabels[activity.type] || activity.type;\n  const showColon = ['post', 'comment'].includes(activity.type) || activity.content !== label;\n  const strong = createSafeElement('strong', null, showColon ? label + ': ' : label);\n  text.appendChild(strong);\n  if (showColon) text.appendChild(document.createTextNode(truncate(activity.content, 100)));\n\n  const time = createSafeElement('span', 'mb-activity-item__time', formatTimeAgo(activity.time));\n  contentWrap.appendChild(text);\n  contentWrap.appendChild(time);\n\n  item.appendChild(iconWrap);\n  item.appendChild(contentWrap);\n  return item;\n}\n\n// --- Empty State ---\nfunction createEmptyState(iconName, message, linkHref, linkText) {\n  const empty = createSafeElement('div', 'mb-profile__empty');\n  const icon = document.createElement('ion-icon');\n  icon.setAttribute('name', iconName);\n  empty.appendChild(icon);\n  empty.appendChild(createSafeElement('p', null, message));\n  if (linkHref && linkText) {\n    const link = createSafeElement('a', null, linkText);\n    link.href = linkHref;\n    empty.appendChild(link);\n  }\n  return empty;\n}\n\n// --- Liked Post Card ---\nfunction createLikedPost(content, createdAt, likeCount, postId, authorName, authorAvatar) {\n  const post = createSafeElement('div', 'mb-liked-post card-animated hover-lift');\n  post.onclick = () => window.location.href = `../community/#post-${postId}`;\n\n  const header = createSafeElement('div', 'mb-liked-post__header');\n\n  const avatarWrap = createSafeElement('div', 'mb-liked-post__avatar');\n  const avatarImg = document.createElement('img');\n  avatarImg.src = authorAvatar || '/assets/images/avatars/avatar1.svg';\n  avatarImg.alt = authorName || 'User';\n  avatarImg.onerror = () => { avatarImg.src = '/assets/images/avatars/avatar1.svg'; };\n  avatarWrap.appendChild(avatarImg);\n\n  const authorInfo = createSafeElement('div', 'mb-liked-post__author-info');\n  authorInfo.appendChild(createSafeElement('span', 'mb-liked-post__author-name', authorName || 'Anonymous'));\n  authorInfo.appendChild(createSafeElement('span', 'mb-liked-post__time', formatTimeAgo(new Date(createdAt))));\n\n  header.appendChild(avatarWrap);\n  header.appendChild(authorInfo);\n\n  const contentWrap = createSafeElement('div', 'mb-liked-post__content');\n  contentWrap.appendChild(createSafeElement('p', null, truncate(content, 200)));\n\n  const footer = createSafeElement('div', 'mb-liked-post__footer');\n\n  const stats = createSafeElement('div', 'mb-liked-post__stats');\n  const heartIcon = document.createElement('ion-icon');\n  heartIcon.setAttribute('name', 'heart');\n  stats.appendChild(heartIcon);\n  stats.appendChild(createSafeElement('span', null, ` ${likeCount || 0}`));\n\n  const viewLink = createSafeElement('span', 'mb-liked-post__view', 'View post');\n  const arrowIcon = document.createElement('ion-icon');\n  arrowIcon.setAttribute('name', 'arrow-forward-outline');\n  viewLink.appendChild(arrowIcon);\n\n  footer.appendChild(stats);\n  footer.appendChild(viewLink);\n\n  post.appendChild(header);\n  post.appendChild(contentWrap);\n  post.appendChild(footer);\n  return post;\n}\n\n// --- Goal Item ---\nfunction createGoalItem(goal) {\n  const item = createSafeElement('div', 'mb-profile__goal-item');\n  if (goal.category) item.setAttribute('data-category', goal.category);\n\n  const categoryIcons = {\n    'mindfulness': 'leaf-outline',\n    'exercise': 'fitness-outline',\n    'sleep': 'moon-outline',\n    'social': 'people-outline',\n    'reading': 'book-outline',\n    'other': 'star-outline'\n  };\n\n  const check = createSafeElement('div', 'goal-check');\n  if (goal.completed) {\n    check.classList.add('completed');\n    const checkIcon = document.createElement('ion-icon');\n    checkIcon.setAttribute('name', 'checkmark');\n    check.appendChild(checkIcon);\n  }\n  check.onclick = () => window.toggleGoalComplete(goal.id, !goal.completed);\n\n  const info = createSafeElement('div', 'goal-info');\n  info.appendChild(createSafeElement('div', 'goal-title', goal.title));\n\n\n  const categoryEl = createSafeElement('div', 'goal-category');\n  const catIcon = document.createElement('ion-icon');\n  catIcon.setAttribute('name', categoryIcons[goal.category] || 'star-outline');\n  categoryEl.appendChild(catIcon);\n  categoryEl.appendChild(document.createTextNode(goal.category.charAt(0).toUpperCase() + goal.category.slice(1)));\n  info.appendChild(categoryEl);\n\n  const deleteBtn = createSafeElement('button', 'goal-delete');\n  const trashIcon = document.createElement('ion-icon');\n  trashIcon.setAttribute('name', 'trash-outline');\n  deleteBtn.appendChild(trashIcon);\n  deleteBtn.onclick = () => window.deleteGoal(goal.id);\n\n  item.appendChild(check);\n  item.appendChild(info);\n  item.appendChild(deleteBtn);\n  return item;\n}\n\n// --- Badge ---\nfunction createBadge(achievement, isUnlocked) {\n  const badge = createSafeElement('div', 'mb-profile__badge card-animated hover-lift');\n  if (isUnlocked) {\n    badge.classList.add('unlocked');\n  } else {\n    badge.classList.add('locked');\n  }\n\n\n  if (!isUnlocked) {\n    const lockIcon = document.createElement('ion-icon');\n    lockIcon.setAttribute('name', 'lock-closed');\n    lockIcon.className = 'badge-lock-icon';\n    badge.appendChild(lockIcon);\n  }\n\n\n  const iconWrap = createSafeElement('div', 'mb-profile__badge-icon');\n  const trophyIcon = document.createElement('ion-icon');\n  trophyIcon.setAttribute('name', 'trophy');\n  iconWrap.appendChild(trophyIcon);\n\n  badge.appendChild(iconWrap);\n  badge.appendChild(createSafeElement('h4', null, achievement.name || 'Achievement'));\n  badge.appendChild(createSafeElement('p', null, achievement.description || ''));\n  badge.appendChild(createSafeElement('div', 'badge-points', `+${achievement.points || 0} pts`));\n\n  return badge;\n}\n\n// --- Mood Bar ---\nfunction createMoodBar(mood) {\n  const bar = createSafeElement('div', 'mood-bar');\n  const moodEmojis = ['ðŸ˜¢', 'ðŸ˜”', 'ðŸ˜', 'ðŸ˜Š', 'ðŸ˜„'];\n  const moodValue = mood.mood_value || 3;\n\n  const barEl = createSafeElement('div', 'bar');\n  barEl.style.height = `${moodValue * 20}px`;\n  barEl.title = mood.note || '';\n  bar.appendChild(barEl);\n  bar.appendChild(createSafeElement('div', 'date', new Date(mood.logged_at).toLocaleDateString('en-US', { weekday: 'short' })));\n\n  return bar;\n}\n\n// --- Saved Article Card ---\nfunction createSavedArticleCard(article) {\n  const card = createSafeElement('div', 'mb-profile__saved-card card-animated hover-lift');\n\n  const link = document.createElement('a');\n  const slug = (article.article_slug || '').replace(/[^a-zA-Z0-9-]/g, '');\n  link.href = `/articles/${slug}.html`;\n  link.className = 'saved-card-link';\n\n  const imgUrl = article.article_image || article.article_thumbnail;\n  if (imgUrl) {\n    if (imgUrl.startsWith('http://') || imgUrl.startsWith('https://') || imgUrl.startsWith('/')) {\n      const img = document.createElement('img');\n      img.src = imgUrl;\n      img.alt = article.article_title || 'Article';\n      img.onerror = () => img.style.display = 'none';\n      link.appendChild(img);\n    }\n  }\n\n  const body = createSafeElement('div', 'card-body');\n  body.appendChild(createSafeElement('span', 'saved-category', article.article_category || 'Article'));\n  body.appendChild(createSafeElement('h4', null, article.article_title || 'Untitled'));\n  body.appendChild(createSafeElement('span', 'saved-date', `Saved ${formatTimeAgo(new Date(article.saved_at))}`));\n\n  link.appendChild(body);\n  card.appendChild(link);\n  return card;\n}\n\n// --- Supabase Client ---\nfunction getSupabaseClient() {\n  if (typeof getSupabase === 'function') {\n    return getSupabase();\n  }\n  return null;\n}\n\n\n// ==================== INITIALIZATION ====================\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  const urlParams = new URLSearchParams(window.location.search);\n  viewedUserId = urlParams.get('user');\n\n  setupTabs();\n  setupPhotoUpload();\n  setupEditProfile();\n  setupSettings();\n  setupActivityFilters();\n  setupMoodSelector();\n  setupGoals();\n  setupSocialLinks();\n  setupPrivacySettings();\n\n  function handleAuth(user) {\n    currentUser = user;\n\n\n    if (viewedUserId) {\n      isOwnProfile = user && user.id === viewedUserId;\n    } else {\n      isOwnProfile = true;\n      viewedUserId = user ? user.id : null;\n    }\n\n\n    window.isOwnProfile = isOwnProfile;\n\n    if (viewedUserId) {\n\n      showProfileView();\n      applyViewMode();\n      loadProfileData(viewedUserId);\n      loadActivityData(viewedUserId);\n      loadFollowerCountsData(viewedUserId);\n      loadReputationPointsData(viewedUserId);\n\n\n      if (typeof ProfileAnalytics !== 'undefined') {\n        ProfileAnalytics.init(viewedUserId);\n      }\n\n\n      if (!isOwnProfile && currentUser) {\n        checkFollowStatus();\n      }\n    } else if (!user) {\n\n      showGuestView();\n    }\n  }\n\n  function waitForAuth() {\n    if (typeof onAuthReady === 'function') {\n      onAuthReady(handleAuth);\n\n      if (typeof onAuthChange === 'function') {\n        onAuthChange((user) => {\n          currentUser = user;\n          if (viewedUserId) {\n            isOwnProfile = user && user.id === viewedUserId;\n            window.isOwnProfile = isOwnProfile;\n            applyViewMode();\n            if (!isOwnProfile && currentUser) {\n              checkFollowStatus();\n            }\n          } else if (user) {\n            isOwnProfile = true;\n            window.isOwnProfile = isOwnProfile;\n            viewedUserId = user.id;\n            showProfileView();\n            applyViewMode();\n            loadProfileData(user.id);\n            loadActivityData(user.id);\n            loadFollowerCountsData(user.id);\n            loadReputationPointsData(user.id);\n\n\n            if (typeof ProfileAnalytics !== 'undefined') {\n              ProfileAnalytics.init(user.id);\n            }\n          } else {\n            showGuestView();\n          }\n        });\n      }\n    } else {\n      window.addEventListener('mindspace:authready', (e) => {\n        handleAuth(e.detail.user);\n      });\n    }\n  }\n\n  waitForAuth();\n});\n\n\n\n// ==================== VIEW MODE ====================\nfunction applyViewMode() {\n  const editElements = document.querySelectorAll('.mb-profile__edit-btn, .mb-profile__cover-edit, .mb-profile__avatar-edit');\n  const followBtnContainer = document.getElementById('followBtnContainer');\n  const shareBtn = document.getElementById('shareProfileBtn');\n  const viewPublicBtn = document.getElementById('viewPublicBtn');\n\n  if (isOwnProfile) {\n\n    editElements.forEach(el => el.style.display = '');\n    if (followBtnContainer) followBtnContainer.style.display = 'none';\n    if (shareBtn) shareBtn.style.display = 'inline-flex';\n    if (viewPublicBtn) viewPublicBtn.style.display = 'inline-flex';\n\n\n    document.querySelectorAll('.mb-profile__tab').forEach(tab => {\n      tab.style.display = '';\n    });\n  } else {\n\n    editElements.forEach(el => el.style.display = 'none');\n    if (followBtnContainer) followBtnContainer.style.display = 'inline-flex';\n    if (shareBtn) shareBtn.style.display = 'none';\n    if (viewPublicBtn) viewPublicBtn.style.display = 'none';\n\n\n    const settingsTab = document.querySelector('[data-tab=\"settings\"]');\n    const wellnessTab = document.querySelector('[data-tab=\"wellness\"]');\n    const likedPostsTab = document.querySelector('[data-tab=\"liked-posts\"]');\n    const savedTab = document.querySelector('[data-tab=\"saved\"]');\n    if (settingsTab) settingsTab.style.display = 'none';\n    if (wellnessTab) wellnessTab.style.display = 'none';\n    if (likedPostsTab) likedPostsTab.style.display = 'none';\n    if (savedTab) savedTab.style.display = 'none';\n\n\n    checkFollowStatus();\n  }\n}\n\nfunction showGuestView() {\n\n  if (viewedUserId && !isOwnProfile) {\n    showProfileView();\n    applyViewMode();\n    loadProfileData(viewedUserId);\n    loadActivityData(viewedUserId);\n    loadFollowerCountsData(viewedUserId);\n    loadReputationPointsData(viewedUserId);\n  } else {\n\n    window.location.href = '../auth/';\n  }\n}\n\nfunction showProfileView() {\n  document.getElementById('guestView').style.display = 'none';\n  document.getElementById('profileView').style.display = 'block';\n}\n\n\n\n// ==================== DATA LOADING ====================\nasync function loadProfile() {\n  if (currentUser) {\n    loadProfileData(currentUser.id);\n  }\n}\n\nasync function loadProfileData(userId) {\n  if (!userId) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n\n  if (isOwnProfile && currentUser) {\n    document.getElementById('profileEmail').textContent = currentUser.email || '';\n  } else {\n    document.getElementById('profileEmail').textContent = '';\n  }\n\n\n  const { data: profile, error } = await supabaseClient\n    .from('profiles')\n    .select('*')\n    .eq('id', userId)\n    .single();\n\n  if (profile) {\n    userProfile = profile;\n\n    window.userProfile = profile;\n    window.isOwnProfile = isOwnProfile;\n    document.getElementById('profileName').textContent = profile.display_name || profile.username || 'User';\n    document.getElementById('profileBio').textContent = profile.bio || 'No bio yet...';\n\n    const avatarImg = document.getElementById('avatarImg');\n    if (profile.avatar_url) {\n      avatarImg.src = profile.avatar_url;\n      avatarImg.style.display = '';\n      const initialsEl = document.getElementById('avatarInitials');\n      if (initialsEl) initialsEl.style.display = 'none';\n    } else {\n      const name = profile.display_name || profile.username || profile.email || 'U';\n      const initials = name.split(' ').map(w => w[0]).join('').toUpperCase().slice(0, 2) || name.substring(0, 2).toUpperCase();\n      const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--user-accent').trim() || '#5BA4E6';\n      const colors = [accentColor,'#E57373','#64B5F6','#81C784','#FFD54F','#BA68C8','#4DB6AC','#FF8A65','#90A4AE','#A1887F'];\n      const colorIndex = name.charCodeAt(0) % colors.length;\n      let initialsEl = document.getElementById('avatarInitials');\n      if (!initialsEl) {\n        initialsEl = document.createElement('div');\n        initialsEl.id = 'avatarInitials';\n        initialsEl.className = 'mb-profile__avatar-initials';\n        avatarImg.parentElement.appendChild(initialsEl);\n      }\n      initialsEl.textContent = initials;\n      initialsEl.style.background = colors[colorIndex];\n      initialsEl.style.display = 'flex';\n      avatarImg.style.display = 'none';\n    }\n\n    if (profile.cover_url) {\n      document.getElementById('coverPhoto').style.backgroundImage = `url(${profile.cover_url})`;\n    } else {\n      const localCover = localStorage.getItem('profile_cover_url');\n      if (localCover && isOwnProfile) {\n        document.getElementById('coverPhoto').style.backgroundImage = `url(${localCover})`;\n      }\n    }\n\n\n    document.getElementById('settingsName').value = profile.display_name || '';\n    document.getElementById('settingsBio').value = profile.bio || '';\n\n\n    if (profile.social_links) {\n      let links;\n      try {\n        links = typeof profile.social_links === 'string' ? JSON.parse(profile.social_links) : profile.social_links;\n      } catch (e) {\n        links = {};\n      }\n      if (links.website) {\n        document.getElementById('settingsWebsite').value = links.website;\n        const websiteLink = document.getElementById('socialWebsite');\n        const websiteUrl = links.website.startsWith('http') ? links.website : 'https://' + links.website;\n        try {\n          const parsed = new URL(websiteUrl);\n          if (['http:', 'https:'].includes(parsed.protocol)) {\n            websiteLink.href = parsed.href;\n            websiteLink.hidden = false;\n          }\n        } catch (e) {}\n      }\n      if (links.twitter) {\n        document.getElementById('settingsTwitter').value = links.twitter;\n        const twitterLink = document.getElementById('socialTwitter');\n        const handle = links.twitter.replace(/[^a-zA-Z0-9_]/g, '');\n        if (handle) {\n          twitterLink.href = 'https://twitter.com/' + handle;\n          twitterLink.hidden = false;\n        }\n      }\n      if (links.instagram) {\n        document.getElementById('settingsInstagram').value = links.instagram;\n        const instaLink = document.getElementById('socialInstagram');\n        const handle = links.instagram.replace(/[^a-zA-Z0-9_.]/g, '');\n        if (handle) {\n          instaLink.href = 'https://instagram.com/' + handle;\n          instaLink.hidden = false;\n        }\n      }\n    }\n\n\n    updateSocialLinksVisibility();\n\n\n    updateProfileCompletion(profile);\n\n\n    document.getElementById('publicProfile').checked = profile.is_public !== false;\n    document.getElementById('showActivity').checked = profile.show_activity !== false;\n    document.getElementById('showSaved').checked = profile.show_saved === true;\n\n\n    const streakNumberEl = document.getElementById('streakNumber');\n    if (streakNumberEl) streakNumberEl.textContent = profile.current_streak || 0;\n    document.getElementById('bestStreak').textContent = profile.longest_streak || 0;\n\n\n    if (profile.reputation_points) {\n      document.getElementById('reputationPoints').textContent = profile.reputation_points;\n    }\n  } else if (isOwnProfile && currentUser) {\n\n    document.getElementById('profileName').textContent = 'New User';\n\n\n    await supabaseClient.from('profiles').upsert({\n      id: currentUser.id,\n      username: currentUser.email?.split('@')[0] || 'user',\n      created_at: new Date().toISOString()\n    });\n\n\n    profile = { id: currentUser.id, display_name: null };\n  } else {\n\n    document.getElementById('profileName').textContent = 'User';\n  }\n\n\n  loadStatsData(userId);\n\n\n  if (isOwnProfile) {\n    setupRealtimeSubscriptions(userId);\n\n\n    const needsOnboarding = !profile?.display_name || profile.display_name.trim() === '';\n    if (needsOnboarding) {\n      showOnboardingModal();\n    }\n  }\n}\n\n\n// --- Stats ---\nasync function loadStats() {\n  if (currentUser) {\n    loadStatsData(currentUser.id);\n  }\n}\n\nasync function loadStatsData(userId) {\n  if (!userId) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n\n  const { count: postCount } = await supabaseClient\n    .from('posts')\n    .select('*', { count: 'exact', head: true })\n    .eq('author_id', userId);\n\n\n  const { count: commentCount } = await supabaseClient\n    .from('post_comments')\n    .select('*', { count: 'exact', head: true })\n    .eq('author_id', userId);\n\n\n  const { count: likeCount } = await supabaseClient\n    .from('likes')\n    .select('*', { count: 'exact', head: true })\n    .eq('user_id', userId);\n\n  document.getElementById('postCount').textContent = postCount || 0;\n  document.getElementById('commentCount').textContent = commentCount || 0;\n  document.getElementById('likeCount').textContent = likeCount || 0;\n}\n\n\n// --- Activity ---\nasync function loadActivity() {\n  if (currentUser) {\n    loadActivityData(currentUser.id);\n  }\n}\n\nasync function loadActivityData(userId) {\n  if (!userId) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const activityFeed = document.getElementById('activityFeed');\n\n  const [postsRes, commentsRes, logsRes] = await Promise.all([\n    supabaseClient\n      .from('posts')\n      .select('id, content, created_at')\n      .eq('author_id', userId)\n      .order('created_at', { ascending: false })\n      .limit(5),\n    supabaseClient\n      .from('post_comments')\n      .select('id, content, created_at, post_id')\n      .eq('author_id', userId)\n      .order('created_at', { ascending: false })\n      .limit(5),\n    supabaseClient\n      .from('user_activity_logs')\n      .select('id, activity_type, page_url, activity_data, created_at')\n      .eq('user_id', userId)\n      .order('created_at', { ascending: false })\n      .limit(30)\n  ]);\n\n  const posts = postsRes.data;\n  const comments = commentsRes.data;\n  const activityLogs = logsRes.data;\n\n  const activities = [];\n\n  if (posts) {\n    posts.forEach(post => {\n      activities.push({\n        type: 'post',\n        content: post.content,\n        time: new Date(post.created_at),\n        icon: 'create-outline'\n      });\n    });\n  }\n\n  if (comments) {\n    comments.forEach(comment => {\n      activities.push({\n        type: 'comment',\n        content: comment.content,\n        time: new Date(comment.created_at),\n        icon: 'chatbubble-outline'\n      });\n    });\n  }\n\n  if (activityLogs) {\n    const hiddenTypes = ['page_view', 'page_exit'];\n    const activityConfig = {\n      'article_read': { icon: 'book-outline', label: 'Read article' },\n      'article_complete': { icon: 'checkmark-done-outline', label: 'Finished reading' },\n      'mood_checkin': { icon: 'happy-outline', label: 'Mood check-in' },\n      'mood_entry': { icon: 'happy-outline', label: 'Mood check-in' },\n      'achievement_unlocked': { icon: 'trophy-outline', label: 'Achievement unlocked' },\n      'profile_update': { icon: 'person-outline', label: 'Updated profile' },\n      'bookmark': { icon: 'bookmark-outline', label: 'Bookmarked' },\n      'like': { icon: 'heart-outline', label: 'Liked a post' },\n      'resource_view': { icon: 'folder-open-outline', label: 'Viewed resource' },\n      'search': { icon: 'search-outline', label: 'Searched' },\n      'share': { icon: 'share-social-outline', label: 'Shared' },\n      'community_post': { icon: 'chatbubble-outline', label: 'Posted in community' },\n      'community_comment': { icon: 'chatbox-outline', label: 'Commented' },\n      'community_like': { icon: 'heart-outline', label: 'Liked a post' },\n      'follow': { icon: 'person-add-outline', label: 'Followed someone' }\n    };\n    activityLogs.forEach(log => {\n      const logType = log.activity_type || log.action_type || '';\n      if (hiddenTypes.includes(logType)) return;\n      const config = activityConfig[logType] || { icon: 'ellipse-outline', label: logType.replace(/_/g, ' ') };\n      let desc = config.label;\n      try {\n        const rawData = log.activity_data || log.metadata;\n        if (rawData) {\n          const data = typeof rawData === 'string' ? JSON.parse(rawData) : rawData;\n          if (data.article_title) desc += ': ' + data.article_title;\n          else if (data.mood) desc += ': ' + data.mood;\n          else if (data.badge_name) desc += ': ' + data.badge_name;\n          else if (data.resource_title) desc += ': ' + data.resource_title;\n          else if (data.query) desc += ': \"' + data.query + '\"';\n        }\n      } catch (e) {}\n      activities.push({\n        type: logType,\n        content: desc,\n        time: new Date(log.created_at),\n        icon: config.icon\n      });\n    });\n  }\n\n\n  activities.sort((a, b) => b.time - a.time);\n\n\n  allActivities = activities;\n\n  if (activities.length === 0) {\n    activityFeed.innerHTML = '';\n    if (isOwnProfile) {\n      activityFeed.appendChild(createEmptyState('newspaper-outline', 'No activity yet', '../community/', 'Join the conversation'));\n    } else {\n      const viewedName = document.getElementById('profileName')?.textContent || 'This user';\n      activityFeed.appendChild(createEmptyState('newspaper-outline', viewedName + ' has no activity yet', null, null));\n    }\n    return;\n  }\n\n  activityFeed.innerHTML = '';\n  activities.slice(0, 10).forEach(activity => {\n    activityFeed.appendChild(createActivityItem(activity));\n  });\n}\n\n// --- Helpers ---\nfunction truncate(str, length) {\n  if (!str) return '';\n  return str.length > length ? str.substring(0, length) + '...' : str;\n}\n\nfunction formatTimeAgo(date) {\n  const seconds = Math.floor((new Date() - date) / 1000);\n\n  if (seconds < 60) return 'Just now';\n  if (seconds < 3600) return `${Math.floor(seconds / 60)} minutes ago`;\n  if (seconds < 86400) return `${Math.floor(seconds / 3600)} hours ago`;\n  if (seconds < 604800) return `${Math.floor(seconds / 86400)} days ago`;\n\n  return date.toLocaleDateString();\n}\n\n\n// ==================== UI SETUP ====================\nfunction setupTabs() {\n  const tabs = document.querySelectorAll('.mb-profile__tab');\n  const panels = document.querySelectorAll('.mb-profile__panel');\n\n  tabs.forEach(tab => {\n    tab.addEventListener('click', () => {\n      const targetTab = tab.dataset.tab;\n\n\n      tabs.forEach(t => t.classList.remove('is-active'));\n      tab.classList.add('is-active');\n\n\n      panels.forEach(panel => {\n        panel.classList.remove('is-active');\n        if (panel.id === `${targetTab}Panel`) {\n          panel.classList.add('is-active');\n        }\n      });\n\n\n      if (targetTab === 'liked') {\n        loadLikedPosts();\n      } else if (targetTab === 'achievements') {\n        loadAchievements();\n      } else if (targetTab === 'wellness') {\n        loadMoodHistory();\n        loadGoals();\n        loadStreak();\n      } else if (targetTab === 'saved') {\n        loadSavedArticles();\n      }\n    });\n  });\n}\n\n// --- Photo Upload ---\nfunction setupPhotoUpload() {\n  const avatarBtn = document.getElementById('editAvatarBtn');\n  const avatarInput = document.getElementById('avatarInput');\n  const coverBtn = document.getElementById('editCoverBtn');\n  const coverInput = document.getElementById('coverInput');\n  const avatarPicker = document.getElementById('avatarPicker');\n  const closePickerBtn = document.getElementById('closeAvatarPicker');\n  const uploadAvatarBtn = document.getElementById('uploadAvatarBtn');\n  const presetButtons = document.querySelectorAll('.mb-avatar-preset');\n\n  avatarBtn?.addEventListener('click', (e) => {\n    e.stopPropagation();\n    if (avatarPicker) {\n      avatarPicker.hidden = !avatarPicker.hidden;\n    }\n  });\n\n  closePickerBtn?.addEventListener('click', () => {\n    if (avatarPicker) avatarPicker.hidden = true;\n  });\n\n  uploadAvatarBtn?.addEventListener('click', () => {\n    avatarInput?.click();\n    if (avatarPicker) avatarPicker.hidden = true;\n  });\n\n  presetButtons.forEach(btn => {\n    btn.addEventListener('click', async () => {\n      const avatarId = btn.dataset.avatar;\n      if (!avatarId || !currentUser) return;\n\n      const avatarUrl = `/assets/images/avatars/${avatarId}.svg`;\n\n      presetButtons.forEach(b => b.classList.remove('selected'));\n      btn.classList.add('selected');\n\n      await setPresetAvatar(avatarUrl);\n      if (avatarPicker) avatarPicker.hidden = true;\n    });\n  });\n\n  avatarPicker?.addEventListener('click', (e) => {\n    if (e.target === avatarPicker) {\n      avatarPicker.hidden = true;\n    }\n  });\n\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape' && avatarPicker && !avatarPicker.hidden) {\n      avatarPicker.hidden = true;\n      avatarBtn?.focus();\n    }\n  });\n\n  coverBtn?.addEventListener('click', () => coverInput?.click());\n\n  avatarInput?.addEventListener('change', async (e) => {\n    const file = e.target.files[0];\n    if (!file || !currentUser) return;\n\n    await uploadPhoto(file, 'avatar');\n  });\n\n  coverInput?.addEventListener('change', async (e) => {\n    console.log('Cover input change event triggered');\n    const file = e.target.files[0];\n    if (!file) {\n      console.log('No file selected');\n      return;\n    }\n    if (!currentUser) {\n      console.log('No current user - cannot upload');\n      ToastManager.warning('Please log in to upload a cover photo.');\n      return;\n    }\n    console.log('Cover file selected:', file.name, file.size, file.type);\n    await uploadPhoto(file, 'cover');\n  });\n}\n\nasync function setPresetAvatar(avatarUrl) {\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient || !currentUser) return;\n\n  try {\n    await supabaseClient\n      .from('profiles')\n      .upsert({\n        id: currentUser.id,\n        avatar_url: avatarUrl,\n        updated_at: new Date().toISOString()\n      }, { onConflict: 'id' });\n\n    document.getElementById('avatarImg').src = avatarUrl;\n\n\n    if (!userProfile) {\n      userProfile = { id: currentUser.id };\n    }\n    userProfile.avatar_url = avatarUrl;\n    updateProfileCompletion(userProfile);\n  } catch (error) {\n    console.error('Error setting preset avatar:', error);\n    ToastManager.error('Failed to set avatar. Please try again.');\n  }\n}\n\n// --- File Upload ---\nasync function uploadPhoto(file, type) {\n  console.log('uploadPhoto called:', { type, fileName: file?.name, fileSize: file?.size });\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) {\n    console.error('Supabase client not available');\n    ToastManager.error('Unable to connect to server. Please refresh and try again.');\n    return;\n  }\n  if (!currentUser) {\n    console.error('No current user - not logged in');\n    ToastManager.warning('Please log in to upload photos.');\n    return;\n  }\n\n  const fileExt = file.name.split('.').pop().toLowerCase();\n  const fileName = `${currentUser.id}_${type}_${Date.now()}.${fileExt}`;\n  const filePath = `${type}s/${fileName}`;\n\n  console.log('Uploading to storage:', { bucket: 'avatars', filePath });\n\n\n  const { data, error } = await supabaseClient.storage\n    .from('avatars')\n    .upload(filePath, file, { upsert: true });\n\n  if (error) {\n    console.error('Storage upload error:', error);\n    console.error('Error details:', JSON.stringify(error, null, 2));\n    ToastManager.error(`Failed to upload photo: ${error.message || 'Unknown error'}. Please try again.`);\n    return;\n  }\n\n  console.log('Upload successful:', data);\n\n\n  const { data: { publicUrl } } = supabaseClient.storage\n    .from('avatars')\n    .getPublicUrl(filePath);\n\n\n  const updateField = type === 'avatar' ? 'avatar_url' : 'cover_url';\n  console.log('Saving to database:', { updateField, publicUrl });\n\n\n  const { data: updateData, error: updateError } = await supabaseClient\n    .from('profiles')\n    .update({\n      [updateField]: publicUrl,\n      updated_at: new Date().toISOString()\n    })\n    .eq('id', currentUser.id)\n    .select();\n\n  console.log('Update result:', { updateData, updateError });\n\n\n  if (updateError) {\n    console.error('Database update error (possible RLS policy issue):', updateError);\n    console.error('Update error details:', JSON.stringify(updateError, null, 2));\n\n\n    if (updateError.code === '42501' || updateError.message?.includes('policy')) {\n      ToastManager.error('Permission denied. Please check database permissions.');\n      return;\n    }\n\n    if (updateError.code === '42703' && type === 'cover') {\n      console.warn('cover_url column missing from profiles table');\n      if (type === 'cover') {\n        document.getElementById('coverPhoto').style.backgroundImage = `url(${publicUrl})`;\n        localStorage.setItem('profile_cover_url', publicUrl);\n        ToastManager.info('Cover photo updated locally. Database column pending setup.');\n      }\n      return;\n    }\n\n    ToastManager.error(`Failed to update profile: ${updateError.message || 'Unknown error'}. Please try again.`);\n    return;\n  }\n\n\n  if (!updateData || updateData.length === 0) {\n    console.log('No existing profile found, trying insert...');\n    const { error: insertError } = await supabaseClient\n      .from('profiles')\n      .insert({\n        id: currentUser.id,\n        [updateField]: publicUrl,\n        updated_at: new Date().toISOString()\n      });\n\n    if (insertError) {\n      console.error('Database insert error:', insertError);\n      console.error('Insert error details:', JSON.stringify(insertError, null, 2));\n\n\n      if (insertError.code === '42501' || insertError.message?.includes('policy')) {\n        ToastManager.error('Permission denied. Please check database permissions.');\n        return;\n      }\n\n\n      if (insertError.code === '23505') {\n        ToastManager.error('Profile exists but update was blocked. Please contact support.');\n        return;\n      }\n\n      ToastManager.error(`Failed to save photo to profile: ${insertError.message || 'Unknown error'}. Please try again.`);\n      return;\n    }\n    console.log('Insert successful');\n  } else {\n    console.log('Update successful');\n  }\n\n\n  if (!userProfile) {\n    userProfile = { id: currentUser.id };\n  }\n  userProfile[updateField] = publicUrl;\n\n\n  if (type === 'avatar') {\n    document.getElementById('avatarImg').src = publicUrl;\n  } else {\n    document.getElementById('coverPhoto').style.backgroundImage = `url(${publicUrl})`;\n  }\n\n\n  updateProfileCompletion(userProfile);\n}\n\n// --- Edit Profile ---\nfunction setupEditProfile() {\n  const editBtn = document.getElementById('editProfileBtn');\n  const modal = document.getElementById('editModal');\n  const closeButtons = modal?.querySelectorAll('[data-close-modal]');\n  const saveBtn = document.getElementById('saveProfileBtn');\n\n  editBtn?.addEventListener('click', () => {\n    document.getElementById('editName').value = userProfile?.display_name || '';\n    document.getElementById('editBio').value = userProfile?.bio || '';\n    modal.hidden = false;\n  });\n\n  closeButtons?.forEach(btn => {\n    btn.addEventListener('click', () => {\n      modal.hidden = true;\n    });\n  });\n\n  saveBtn?.addEventListener('click', async () => {\n    const name = document.getElementById('editName').value.trim();\n    const bio = document.getElementById('editBio').value.trim();\n\n    if (!currentUser) return;\n\n    const supabaseClient = getSupabaseClient();\n    if (!supabaseClient) return;\n\n\n    const { error } = await supabaseClient\n      .from('profiles')\n      .upsert({\n        id: currentUser.id,\n        display_name: name,\n        bio: bio,\n        updated_at: new Date().toISOString()\n      }, { onConflict: 'id' });\n\n    if (error) {\n      console.error('Save error:', error);\n      ToastManager.error('Failed to save profile. Please try again.');\n      return;\n    }\n\n    document.getElementById('profileName').textContent = name || 'User';\n    document.getElementById('profileBio').textContent = bio || 'No bio yet...';\n    document.getElementById('settingsName').value = name;\n    document.getElementById('settingsBio').value = bio;\n\n    userProfile = { ...userProfile, display_name: name, bio: bio };\n    window.userProfile = userProfile;\n\n\n    updateProfileCompletion(userProfile);\n\n\n    if (window.MindSpaceImmersive?.updateGreeting) {\n      window.MindSpaceImmersive.updateGreeting();\n    }\n\n    modal.hidden = true;\n  });\n}\n\n// --- Settings ---\nfunction setupSettings() {\n  const saveBtn = document.getElementById('saveSettingsBtn');\n  const logoutBtn = document.getElementById('logoutBtn');\n\n  saveBtn?.addEventListener('click', async () => {\n    const name = document.getElementById('settingsName').value.trim();\n    const bio = document.getElementById('settingsBio').value.trim();\n\n    if (!currentUser) return;\n\n    const supabaseClient = getSupabaseClient();\n    if (!supabaseClient) return;\n\n\n    const { error } = await supabaseClient\n      .from('profiles')\n      .upsert({\n        id: currentUser.id,\n        display_name: name,\n        bio: bio,\n        updated_at: new Date().toISOString()\n      }, { onConflict: 'id' });\n\n    if (error) {\n      console.error('Save error:', error);\n      ToastManager.error('Failed to save settings. Please try again.');\n      return;\n    }\n\n    document.getElementById('profileName').textContent = name || 'User';\n    document.getElementById('profileBio').textContent = bio || 'No bio yet...';\n\n    userProfile = { ...userProfile, display_name: name, bio: bio };\n    window.userProfile = userProfile;\n\n\n    updateProfileCompletion(userProfile);\n\n\n    if (window.MindSpaceImmersive?.updateGreeting) {\n      window.MindSpaceImmersive.updateGreeting();\n    }\n\n    ToastManager.success('Settings saved!');\n  });\n\n  logoutBtn?.addEventListener('click', async () => {\n    const supabaseClient = getSupabaseClient();\n    if (!supabaseClient) {\n      window.location.href = '../';\n      return;\n    }\n    await supabaseClient.auth.signOut();\n    window.location.href = '../';\n  });\n}\n\n\n\n// ==================== SOCIAL FEATURES ====================\nasync function loadFollowerCounts() {\n  if (currentUser) {\n    loadFollowerCountsData(currentUser.id);\n  }\n}\n\nasync function loadFollowerCountsData(userId) {\n  if (!userId) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const { count: followerCount } = await supabaseClient\n    .from('followers')\n    .select('*', { count: 'exact', head: true })\n    .eq('following_id', userId);\n\n  const { count: followingCount } = await supabaseClient\n    .from('followers')\n    .select('*', { count: 'exact', head: true })\n    .eq('follower_id', userId);\n\n  document.getElementById('followerCount').textContent = followerCount || 0;\n  document.getElementById('followingCount').textContent = followingCount || 0;\n}\n\n// --- Liked Posts ---\nasync function loadLikedPosts() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const likedContainer = document.getElementById('likedPosts');\n\n  const { data: likes, error } = await supabaseClient\n    .from('post_likes')\n    .select('post_id, created_at, posts(id, content, author_id, created_at, like_count)')\n    .eq('user_id', currentUser.id)\n    .order('created_at', { ascending: false })\n    .limit(20);\n\n  if (error) {\n    const { data: altLikes } = await supabaseClient\n      .from('likes')\n      .select('post_id, created_at')\n      .eq('user_id', currentUser.id)\n      .order('created_at', { ascending: false })\n      .limit(20);\n\n    if (!altLikes || altLikes.length === 0) {\n      likedContainer.innerHTML = '';\n      likedContainer.appendChild(createEmptyState('heart-outline', 'No liked posts yet', '../community/', 'Explore the community'));\n      return;\n    }\n\n    const postIds = altLikes.map(l => l.post_id).filter(Boolean);\n    if (postIds.length === 0) {\n      likedContainer.innerHTML = '';\n      likedContainer.appendChild(createEmptyState('heart-outline', 'No liked posts yet', '../community/', 'Explore the community'));\n      return;\n    }\n\n    const { data: posts } = await supabaseClient\n      .from('posts')\n      .select('id, content, author_id, created_at, like_count')\n      .in('id', postIds);\n\n    if (!posts || posts.length === 0) {\n      likedContainer.innerHTML = '';\n      likedContainer.appendChild(createEmptyState('heart-outline', 'No liked posts yet', '../community/', 'Explore the community'));\n      return;\n    }\n\n\n    const authorIds = [...new Set(posts.map(p => p.author_id).filter(Boolean))];\n    const { data: profiles } = authorIds.length > 0\n      ? await supabaseClient.from('profiles').select('id, display_name, avatar_url').in('id', authorIds)\n      : { data: [] };\n\n    const profileMap = new Map((profiles || []).map(p => [p.id, p]));\n\n    likedContainer.innerHTML = '';\n    posts.forEach(post => {\n      const author = profileMap.get(post.author_id) || {};\n      likedContainer.appendChild(createLikedPost(post.content, post.created_at, post.like_count, post.id, author.display_name, author.avatar_url));\n    });\n    return;\n  }\n\n  if (!likes || likes.length === 0) {\n    likedContainer.innerHTML = '';\n    likedContainer.appendChild(createEmptyState('heart-outline', 'No liked posts yet', '../community/', 'Explore the community'));\n    return;\n  }\n\n\n  const authorIds = [...new Set(likes.filter(l => l.posts).map(l => l.posts.author_id).filter(Boolean))];\n  const { data: profiles } = authorIds.length > 0\n    ? await supabaseClient.from('profiles').select('id, display_name, avatar_url').in('id', authorIds)\n    : { data: [] };\n\n  const profileMap = new Map((profiles || []).map(p => [p.id, p]));\n\n  likedContainer.innerHTML = '';\n  likes.filter(l => l.posts).forEach(like => {\n    const author = profileMap.get(like.posts.author_id) || {};\n    likedContainer.appendChild(createLikedPost(like.posts.content, like.posts.created_at, like.posts.like_count, like.posts.id, author.display_name, author.avatar_url));\n  });\n}\n\n// --- Achievements ---\nasync function loadAchievements() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const grid = document.getElementById('achievementsGrid');\n\n  const { data: allAchievements } = await supabaseClient\n    .from('achievements')\n    .select('*')\n    .order('category', { ascending: true });\n\n  const { data: userAchievements } = await supabaseClient\n    .from('user_achievements')\n    .select('achievement_id, unlocked_at')\n    .eq('user_id', currentUser.id);\n\n  if (!allAchievements || allAchievements.length === 0) {\n    grid.innerHTML = '';\n    grid.appendChild(createEmptyState('trophy-outline', 'No achievements available'));\n    return;\n  }\n\n  const unlockedIds = new Set((userAchievements || []).map(ua => ua.achievement_id));\n  const totalPoints = allAchievements\n    .filter(a => unlockedIds.has(a.id))\n    .reduce((sum, a) => sum + (a.points || 0), 0);\n\n  const totalPointsEl = document.getElementById('totalPoints');\n  if (totalPointsEl) totalPointsEl.textContent = totalPoints;\n\n  if (!grid) return;\n  grid.innerHTML = '';\n  allAchievements.forEach(achievement => {\n    const isUnlocked = unlockedIds.has(achievement.id);\n    grid.appendChild(createBadge(achievement, isUnlocked));\n  });\n\n\n  checkAndAwardBadges(allAchievements, unlockedIds);\n}\n\nasync function checkAndAwardBadges(allAchievements, unlockedIds) {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  if (!allAchievements || !unlockedIds) {\n    const { data: achievements } = await supabaseClient\n      .from('achievements')\n      .select('*');\n\n    const { data: userAchievements } = await supabaseClient\n      .from('user_achievements')\n      .select('achievement_id')\n      .eq('user_id', currentUser.id);\n\n    allAchievements = achievements || [];\n    unlockedIds = new Set((userAchievements || []).map(ua => ua.achievement_id));\n  }\n\n  if (allAchievements.length === 0) return;\n\n\n  const [postsResult, commentsResult, likesResult, moodResult, goalsResult, savedResult, followersResult] = await Promise.all([\n    supabaseClient.from('posts').select('id', { count: 'exact' }).eq('author_id', currentUser.id),\n    supabaseClient.from('post_comments').select('id', { count: 'exact' }).eq('author_id', currentUser.id),\n    supabaseClient.from('posts').select('like_count').eq('author_id', currentUser.id),\n    supabaseClient.from('mood_logs').select('id', { count: 'exact' }).eq('user_id', currentUser.id),\n    supabaseClient.from('wellness_goals').select('id, completed').eq('user_id', currentUser.id),\n    supabaseClient.from('saved_articles').select('id', { count: 'exact' }).eq('user_id', currentUser.id),\n    supabaseClient.from('followers').select('id', { count: 'exact' }).eq('following_id', currentUser.id)\n  ]);\n\n  const postCount = postsResult.count || 0;\n  const commentCount = commentsResult.count || 0;\n  const likesReceived = (likesResult.data || []).reduce((sum, p) => sum + (p.like_count || 0), 0);\n  const moodLogCount = moodResult.count || 0;\n  const goalCount = (goalsResult.data || []).length;\n  const completedGoals = (goalsResult.data || []).filter(g => g.completed).length;\n  const savedCount = savedResult.count || 0;\n  const currentStreak = userProfile?.current_streak || 0;\n  const followerCount = followersResult.count || 0;\n\n  const stats = {\n    posts: postCount,\n    comments: commentCount,\n    likes_received: likesReceived,\n    mood_logs: moodLogCount,\n    goals: goalCount,\n    goals_completed: completedGoals,\n    saves: savedCount,\n    streak: currentStreak,\n    followers: followerCount\n  };\n\n\n  const knownCriteriaTypes = ['posts', 'comments', 'likes_received', 'mood_logs', 'goals', 'goals_completed', 'saves', 'streak', 'profile_complete', 'followers'];\n\n\n  const newBadges = [];\n  for (const achievement of allAchievements) {\n    if (unlockedIds.has(achievement.id)) continue;\n\n    let criteria;\n    try {\n      criteria = typeof achievement.criteria === 'string' ? JSON.parse(achievement.criteria) : achievement.criteria;\n    } catch (e) {\n      continue;\n    }\n    if (!criteria || Object.keys(criteria).length === 0) continue;\n\n\n    const criteriaKeys = Object.keys(criteria);\n    const hasUnknownCriteria = criteriaKeys.some(key => !knownCriteriaTypes.includes(key));\n    if (hasUnknownCriteria) continue;\n\n    let earned = true;\n\n    if (criteria.posts !== undefined && stats.posts < criteria.posts) earned = false;\n    if (criteria.comments !== undefined && stats.comments < criteria.comments) earned = false;\n    if (criteria.likes_received !== undefined && stats.likes_received < criteria.likes_received) earned = false;\n    if (criteria.mood_logs !== undefined && stats.mood_logs < criteria.mood_logs) earned = false;\n    if (criteria.goals !== undefined && stats.goals < criteria.goals) earned = false;\n    if (criteria.goals_completed !== undefined && stats.goals_completed < criteria.goals_completed) earned = false;\n    if (criteria.saves !== undefined && stats.saves < criteria.saves) earned = false;\n    if (criteria.streak !== undefined && stats.streak < criteria.streak) earned = false;\n    if (criteria.followers !== undefined && stats.followers < criteria.followers) earned = false;\n\n\n    if (criteria.profile_complete !== undefined) {\n      const hasAvatar = userProfile?.avatar_url && userProfile.avatar_url.trim() !== '';\n      const hasBio = userProfile?.bio && userProfile.bio.trim() !== '';\n\n\n      let socialLinks = userProfile?.social_links || {};\n      if (typeof socialLinks === 'string') {\n        try {\n          socialLinks = JSON.parse(socialLinks);\n        } catch (e) {\n          socialLinks = {};\n        }\n      }\n      const hasSocialLinks = Object.values(socialLinks).some(link => link && String(link).trim() !== '');\n\n      if (!hasAvatar || !hasBio || !hasSocialLinks) {\n        earned = false;\n      }\n    }\n\n    if (earned) {\n      newBadges.push({\n        user_id: currentUser.id,\n        achievement_id: achievement.id,\n        unlocked_at: new Date().toISOString()\n      });\n    }\n  }\n\n\n  if (newBadges.length > 0) {\n    await supabaseClient.from('user_achievements').insert(newBadges);\n\n    const notifications = newBadges.map(badge => {\n      const achievement = allAchievements.find(a => a.id === badge.achievement_id);\n      return {\n        user_id: currentUser.id,\n        type: 'achievement',\n        from_user_name: 'MindSpace',\n        content: `You earned the \"${achievement?.name || 'Achievement'}\" badge: ${achievement?.description || ''}`,\n        read: false\n      };\n    });\n\n    try {\n      await supabaseClient.from('notifications').insert(notifications);\n    } catch (notifErr) {\n      console.warn('Failed to create achievement notifications:', notifErr);\n    }\n    loadAchievements();\n  }\n}\n\n// --- Saved Articles ---\nasync function loadSavedArticles() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const savedContainer = document.getElementById('savedItems');\n  if (!savedContainer) return;\n\n  try {\n    const { data: articles, error } = await supabaseClient\n      .from('saved_articles')\n      .select('*')\n      .eq('user_id', currentUser.id)\n      .order('saved_at', { ascending: false });\n\n    if (error || !articles || articles.length === 0) {\n      savedContainer.innerHTML = '';\n      savedContainer.appendChild(createEmptyState('bookmark-outline', 'No saved articles yet', '../blog/', 'Browse articles'));\n      return;\n    }\n\n    savedContainer.innerHTML = '';\n    articles.forEach(article => {\n      savedContainer.appendChild(createSavedArticleCard(article));\n    });\n  } catch (err) {\n    console.error('Error loading saved articles:', err);\n    savedContainer.innerHTML = '';\n    savedContainer.appendChild(createEmptyState('alert-circle-outline', 'Could not load saved articles'));\n  }\n}\n\n\n// ==================== WELLNESS ====================\nlet selectedMood = null;\n\nfunction setupMoodSelector() {\n  const moodBtns = document.querySelectorAll('.mb-profile__mood-btn');\n  const logBtn = document.getElementById('logMoodBtn');\n\n  moodBtns.forEach(btn => {\n    btn.addEventListener('click', () => {\n      moodBtns.forEach(b => b.classList.remove('is-selected'));\n      btn.classList.add('is-selected');\n      selectedMood = {\n        score: parseInt(btn.dataset.mood),\n        emoji: btn.dataset.emoji\n      };\n    });\n  });\n\n  logBtn?.addEventListener('click', logMood);\n}\n\nasync function logMood() {\n  if (!currentUser || !selectedMood) {\n    ToastManager.warning('Please select a mood first');\n    return;\n  }\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const note = document.getElementById('moodNote').value.trim();\n\n  const { error } = await supabaseClient\n    .from('mood_logs')\n    .insert({\n      user_id: currentUser.id,\n      mood: selectedMood.emoji,\n      mood_score: selectedMood.score,\n      note: note || null\n    });\n\n  if (error) {\n    console.error('Error logging mood:', error);\n    ToastManager.error('Failed to log mood. Please try again.');\n    return;\n  }\n\n  ToastManager.success('Mood logged successfully!');\n\n  document.getElementById('moodNote').value = '';\n  document.querySelectorAll('.mb-profile__mood-btn').forEach(b => b.classList.remove('is-selected'));\n  selectedMood = null;\n\n  loadMoodHistory();\n\n  checkAndAwardBadges();\n}\n\n// --- Mood History ---\nlet moodHistoryOffset = 0;\nconst MOOD_PAGE_SIZE = 9;\n\nasync function loadMoodHistory(loadMore = false) {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const chart = document.getElementById('moodChart');\n\n  if (!loadMore) {\n    moodHistoryOffset = 0;\n  }\n\n  const { data: moods, error } = await supabaseClient\n    .from('mood_logs')\n    .select('*')\n    .eq('user_id', currentUser.id)\n    .order('created_at', { ascending: false })\n    .range(moodHistoryOffset, moodHistoryOffset + MOOD_PAGE_SIZE - 1);\n\n  const { count: totalCount } = await supabaseClient\n    .from('mood_logs')\n    .select('*', { count: 'exact', head: true })\n    .eq('user_id', currentUser.id);\n\n  const thirtyDaysAgo = new Date();\n  thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n  const { data: allMoods } = await supabaseClient\n    .from('mood_logs')\n    .select('*')\n    .eq('user_id', currentUser.id)\n    .gte('created_at', thirtyDaysAgo.toISOString())\n    .order('created_at', { ascending: true });\n\n  if (error || !moods || moods.length === 0) {\n    if (!loadMore) {\n      chart.innerHTML = '';\n      chart.appendChild(createSafeElement('p', 'mb-profile__mood-empty', 'No mood entries yet. Start tracking today!'));\n      hideInsights();\n    }\n    return;\n  }\n\n  const moodEmojis = {\n    'very_sad': 'ðŸ˜¢',\n    'sad': 'ðŸ˜”',\n    'neutral': 'ðŸ˜',\n    'happy': 'ðŸ˜Š',\n    'very_happy': 'ðŸ˜„',\n    'calm': 'ðŸ˜Œ',\n    'okay': 'ðŸ˜',\n    'anxious': 'ðŸ˜°',\n    'stressed': 'ðŸ˜¤'\n  };\n\n  if (!loadMore) {\n    chart.innerHTML = '';\n    chart.classList.add('mb-profile__mood-entries');\n\n    const countBar = createSafeElement('div', 'mood-count-bar');\n    countBar.textContent = `Showing ${Math.min(MOOD_PAGE_SIZE, totalCount)} of ${totalCount} entries`;\n    chart.appendChild(countBar);\n  } else {\n    const existingLoadMore = chart.querySelector('.mood-load-more-wrapper');\n    if (existingLoadMore) existingLoadMore.remove();\n    const existingCount = chart.querySelector('.mood-count-bar');\n    if (existingCount) {\n      existingCount.textContent = `Showing ${moodHistoryOffset + moods.length} of ${totalCount} entries`;\n    }\n  }\n\n  const moodLevels = {\n    'very_sad': 1,\n    'sad': 2,\n    'neutral': 3,\n    'happy': 4,\n    'very_happy': 5,\n    'calm': 4,\n    'okay': 3,\n    'anxious': 2,\n    'stressed': 2\n  };\n\n  moods.reverse().forEach(mood => {\n    const date = new Date(mood.created_at);\n    const dayName = date.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });\n    const timeStr = date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });\n    const emoji = moodEmojis[mood.mood] || 'ðŸ˜';\n    const moodLevel = moodLevels[mood.mood] || 3;\n    const moodLabels = { 1: 'Very Bad', 2: 'Bad', 3: 'Okay', 4: 'Good', 5: 'Great' };\n    const moodLabel = moodLabels[moodLevel];\n\n    const card = createSafeElement('div', 'mood-entry-card');\n    card.setAttribute('data-mood', moodLevel);\n\n    const emojiContainer = createSafeElement('div', 'mood-entry-emoji');\n    const emojiSpan = createSafeElement('span', 'mood-emoji-large', emoji);\n    emojiContainer.appendChild(emojiSpan);\n\n    const contentDiv = createSafeElement('div', 'mood-entry-content');\n\n    const headerDiv = createSafeElement('div', 'mood-entry-header');\n    const moodLabelSpan = createSafeElement('span', 'mood-label', moodLabel);\n    const timeSpan = createSafeElement('span', 'mood-time', timeStr);\n    headerDiv.appendChild(moodLabelSpan);\n    headerDiv.appendChild(timeSpan);\n\n    const dateSpan = createSafeElement('span', 'mood-date', dayName);\n\n    contentDiv.appendChild(headerDiv);\n    contentDiv.appendChild(dateSpan);\n\n    if (mood.note) {\n      const noteDiv = createSafeElement('div', 'mood-note-preview');\n      const noteIcon = createSafeElement('ion-icon');\n      noteIcon.setAttribute('name', 'chatbubble-outline');\n      noteDiv.appendChild(noteIcon);\n      const noteText = createSafeElement('span', '', mood.note);\n      noteDiv.appendChild(noteText);\n      contentDiv.appendChild(noteDiv);\n    }\n\n    card.appendChild(emojiContainer);\n    card.appendChild(contentDiv);\n\n    if (isOwnProfile) {\n      const deleteBtn = createSafeElement('button', 'mood-entry-delete');\n      const delIcon = document.createElement('ion-icon');\n      delIcon.setAttribute('name', 'trash-outline');\n      deleteBtn.appendChild(delIcon);\n      deleteBtn.onclick = async (e) => {\n        e.stopPropagation();\n        if (!confirm('Delete this mood entry?')) return;\n        const supabaseClient = getSupabaseClient();\n        if (!supabaseClient) return;\n        const { error } = await supabaseClient\n          .from('mood_logs')\n          .delete()\n          .eq('id', mood.id)\n          .eq('user_id', currentUser.id);\n        if (!error) {\n          if (typeof showToast === 'function') showToast('Mood entry deleted', 'success');\n          loadMoodHistory();\n        }\n      };\n      card.appendChild(deleteBtn);\n    }\n\n    chart.appendChild(card);\n  });\n\n  moodHistoryOffset += moods.length;\n\n  if (moodHistoryOffset < totalCount) {\n    const loadMoreWrapper = createSafeElement('div', 'mood-load-more-wrapper');\n    const loadMoreBtn = createSafeElement('button', 'mood-load-more-btn', `Load More (${totalCount - moodHistoryOffset} remaining)`);\n    loadMoreBtn.onclick = () => loadMoodHistory(true);\n    loadMoreWrapper.appendChild(loadMoreBtn);\n    chart.appendChild(loadMoreWrapper);\n  }\n\n  if (!loadMore) {\n    updateMoodInsights(allMoods || moods, totalCount || moods.length);\n  }\n}\n\nfunction hideInsights() {\n  const insightsEl = document.getElementById('moodInsights');\n  if (insightsEl) insightsEl.style.display = 'none';\n}\n\nfunction updateMoodInsights(moods, totalCount) {\n  const insightsEl = document.getElementById('moodInsights');\n  if (!insightsEl || moods.length === 0) {\n    if (insightsEl) insightsEl.style.display = 'none';\n    return;\n  }\n\n  insightsEl.style.display = 'block';\n\n  const moodScores = {\n    'very_sad': 1,\n    'sad': 2,\n    'neutral': 3,\n    'happy': 4,\n    'very_happy': 5\n  };\n\n  const moodEmojis = {\n    1: 'ðŸ˜¢', 2: 'ðŸ˜”', 3: 'ðŸ˜', 4: 'ðŸ˜Š', 5: 'ðŸ˜„'\n  };\n\n\n  const scores = moods.map(m => moodScores[m.mood] || 3);\n  const avgScore = scores.reduce((a, b) => a + b, 0) / scores.length;\n  const avgMoodEl = document.getElementById('avgMoodValue');\n  if (avgMoodEl) {\n    const avgEmoji = moodEmojis[Math.round(avgScore)] || 'ðŸ˜';\n    avgMoodEl.textContent = avgEmoji;\n  }\n\n\n  const dayMoods = {};\n  moods.forEach(m => {\n    const day = new Date(m.created_at).toLocaleDateString('en-US', { weekday: 'short' });\n    if (!dayMoods[day]) dayMoods[day] = [];\n    dayMoods[day].push(moodScores[m.mood] || 3);\n  });\n\n  let bestDay = '--';\n  let bestDayAvg = 0;\n  Object.entries(dayMoods).forEach(([day, scores]) => {\n    const avg = scores.reduce((a, b) => a + b, 0) / scores.length;\n    if (avg > bestDayAvg) {\n      bestDayAvg = avg;\n      bestDay = day;\n    }\n  });\n\n  const bestDayEl = document.getElementById('bestDayValue');\n  if (bestDayEl) bestDayEl.textContent = bestDay;\n\n\n  const totalEntriesEl = document.getElementById('totalEntriesValue');\n  if (totalEntriesEl) totalEntriesEl.textContent = totalCount;\n\n\n  const trendEl = document.getElementById('moodTrendValue');\n  if (trendEl && moods.length >= 3) {\n    const halfPoint = Math.floor(moods.length / 2);\n    const recentMoods = moods.slice(halfPoint);\n    const olderMoods = moods.slice(0, halfPoint);\n\n    const recentAvg = recentMoods.map(m => moodScores[m.mood] || 3).reduce((a, b) => a + b, 0) / recentMoods.length;\n    const olderAvg = olderMoods.map(m => moodScores[m.mood] || 3).reduce((a, b) => a + b, 0) / olderMoods.length;\n\n    const diff = recentAvg - olderAvg;\n    if (diff > 0.3) {\n      trendEl.textContent = 'ðŸ“ˆ';\n      trendEl.title = 'Improving';\n    } else if (diff < -0.3) {\n      trendEl.textContent = 'ðŸ“‰';\n      trendEl.title = 'Declining';\n    } else {\n      trendEl.textContent = 'âž¡ï¸';\n      trendEl.title = 'Stable';\n    }\n  } else if (trendEl) {\n    trendEl.textContent = 'âž¡ï¸';\n    trendEl.title = 'Stable';\n  }\n\n\n  updateMoodLineChart(moods);\n\n\n  updateMoodDistribution(moods);\n}\n\n// --- Mood Charts ---\nfunction updateMoodLineChart(moods) {\n  const svgEl = document.getElementById('moodSvg');\n  const lineEl = document.getElementById('moodLine');\n  const areaEl = document.getElementById('moodArea');\n  const dotsEl = document.getElementById('moodDots');\n  const xAxisEl = document.getElementById('moodXAxis');\n\n  if (!svgEl || !lineEl || !areaEl || !dotsEl || moods.length === 0) return;\n\n  const moodScores = {\n    'very_sad': 1,\n    'sad': 2,\n    'neutral': 3,\n    'happy': 4,\n    'very_happy': 5\n  };\n\n\n  const chartMoods = moods.slice(-14);\n\n  const width = 400;\n  const height = 120;\n  const padding = 10;\n\n  const xStep = (width - padding * 2) / (chartMoods.length - 1 || 1);\n\n\n  const points = chartMoods.map((mood, i) => {\n    const x = padding + i * xStep;\n    const score = moodScores[mood.mood] || 3;\n    const y = height - padding - ((score - 1) / 4) * (height - padding * 2);\n    return { x, y, score, date: mood.created_at, note: mood.note };\n  });\n\n\n  if (points.length > 1) {\n    const linePath = points.map((p, i) => `${i === 0 ? 'M' : 'L'} ${p.x} ${p.y}`).join(' ');\n    lineEl.setAttribute('d', linePath);\n\n\n    const areaPath = `${linePath} L ${points[points.length - 1].x} ${height} L ${points[0].x} ${height} Z`;\n    areaEl.setAttribute('d', areaPath);\n  } else if (points.length === 1) {\n    lineEl.setAttribute('d', `M ${points[0].x} ${points[0].y} L ${points[0].x} ${points[0].y}`);\n    areaEl.setAttribute('d', '');\n  }\n\n\n  dotsEl.innerHTML = '';\n  points.forEach((p, i) => {\n    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n    circle.setAttribute('cx', p.x);\n    circle.setAttribute('cy', p.y);\n    circle.setAttribute('r', 5);\n    const dateStr = new Date(p.date).toLocaleDateString();\n    circle.setAttribute('title', `${dateStr}${p.note ? ': ' + p.note : ''}`);\n    dotsEl.appendChild(circle);\n  });\n\n\n  if (xAxisEl) {\n    xAxisEl.innerHTML = '';\n    const showLabels = chartMoods.length <= 7 ? chartMoods : chartMoods.filter((_, i) => i % 2 === 0 || i === chartMoods.length - 1);\n    showLabels.forEach((mood, i) => {\n      const span = document.createElement('span');\n      span.textContent = new Date(mood.created_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n      xAxisEl.appendChild(span);\n    });\n  }\n}\n\nfunction updateMoodDistribution(moods) {\n  const distribution = {\n    'very_happy': 0,\n    'happy': 0,\n    'neutral': 0,\n    'sad': 0,\n    'very_sad': 0\n  };\n\n  moods.forEach(m => {\n    if (distribution.hasOwnProperty(m.mood)) {\n      distribution[m.mood]++;\n    }\n  });\n\n  const total = moods.length;\n  const maxCount = Math.max(...Object.values(distribution), 1);\n\n\n  const barMappings = {\n    'very_happy': { bar: 'moodBarVeryHappy', count: 'moodCountVeryHappy' },\n    'happy': { bar: 'moodBarHappy', count: 'moodCountHappy' },\n    'neutral': { bar: 'moodBarNeutral', count: 'moodCountNeutral' },\n    'sad': { bar: 'moodBarSad', count: 'moodCountSad' },\n    'very_sad': { bar: 'moodBarVerySad', count: 'moodCountVerySad' }\n  };\n\n  Object.entries(barMappings).forEach(([mood, ids]) => {\n    const barEl = document.getElementById(ids.bar);\n    const countEl = document.getElementById(ids.count);\n    const count = distribution[mood];\n    const percentage = (count / maxCount) * 100;\n\n    if (barEl) {\n      setTimeout(() => {\n        barEl.style.width = `${percentage}%`;\n      }, 100);\n    }\n    if (countEl) countEl.textContent = count;\n  });\n}\n\n\n// ==================== GOALS ====================\nfunction setupGoals() {\n  const addBtn = document.getElementById('addGoalBtn');\n  addBtn?.addEventListener('click', addGoal);\n}\n\nasync function loadGoals() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const list = document.getElementById('goalsList');\n\n  const { data: goals, error } = await supabaseClient\n    .from('wellness_goals')\n    .select('*')\n    .eq('user_id', currentUser.id)\n    .order('created_at', { ascending: false });\n\n  if (error || !goals || goals.length === 0) {\n    list.innerHTML = `\n      <div class=\"mb-profile__goals-empty\">\n        <span class=\"empty-icon\">ðŸŽ¯</span>\n        <h4>No goals yet</h4>\n        <p>Set a wellness goal to get started</p>\n      </div>\n    `;\n    return;\n  }\n\n  list.innerHTML = '';\n  goals.forEach(goal => {\n    list.appendChild(createGoalItem(goal));\n  });\n}\n\nasync function addGoal() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const titleInput = document.getElementById('goalTitle');\n  const categorySelect = document.getElementById('goalCategory');\n\n  const title = titleInput.value.trim();\n  const category = categorySelect.value;\n\n  if (!title) {\n    ToastManager.warning('Please enter a goal title');\n    return;\n  }\n\n  const { error } = await supabaseClient\n    .from('wellness_goals')\n    .insert({\n      user_id: currentUser.id,\n      title: title,\n      category: category\n    });\n\n  if (error) {\n    console.error('Error adding goal:', error);\n    ToastManager.error('Failed to add goal. Please try again.');\n    return;\n  }\n\n  titleInput.value = '';\n  loadGoals();\n}\n\nasync function toggleGoalComplete(goalId, completed) {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const updateData = { completed };\n  if (completed) {\n    updateData.completed_at = new Date().toISOString();\n  } else {\n    updateData.completed_at = null;\n  }\n\n  const { error } = await supabaseClient\n    .from('wellness_goals')\n    .update(updateData)\n    .eq('id', goalId)\n    .eq('user_id', currentUser.id);\n\n  if (error) {\n    console.error('Error updating goal:', error);\n    return;\n  }\n\n  loadGoals();\n}\n\nasync function deleteGoal(goalId) {\n  if (!currentUser) return;\n  if (!confirm('Are you sure you want to delete this goal?')) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const { error } = await supabaseClient\n    .from('wellness_goals')\n    .delete()\n    .eq('id', goalId)\n    .eq('user_id', currentUser.id);\n\n  if (error) {\n    console.error('Error deleting goal:', error);\n    return;\n  }\n\n  loadGoals();\n}\n\n// --- Streaks ---\nasync function loadStreak() {\n  if (!currentUser || !userProfile) return;\n\n\n  const streakEl = document.getElementById('streakNumber');\n  const bestEl = document.getElementById('bestStreak');\n  if (streakEl) streakEl.textContent = userProfile.current_streak || 0;\n  if (bestEl) bestEl.textContent = userProfile.longest_streak || 0;\n\n\n  await loadStreakCalendar();\n}\n\nasync function loadStreakCalendar() {\n  const calendarEl = document.getElementById('streakCalendar');\n  if (!calendarEl) return;\n\n\n  const targetUserId = viewedUserId || (currentUser ? currentUser.id : null);\n  if (!targetUserId) return;\n\n\n  let engagementDays = [];\n\n\n  if (window.MindSpaceAuth && window.MindSpaceAuth.getReadingCalendar) {\n    engagementDays = await window.MindSpaceAuth.getReadingCalendar(targetUserId, 28);\n  } else {\n\n    const supabaseClient = getSupabaseClient();\n    if (supabaseClient) {\n      const startDate = new Date();\n      startDate.setDate(startDate.getDate() - 28);\n\n      const { data } = await supabaseClient\n        .from('user_engagement')\n        .select('visit_date, articles_read')\n        .eq('user_id', targetUserId)\n        .gte('visit_date', startDate.toISOString().split('T')[0])\n        .order('visit_date', { ascending: true });\n\n      engagementDays = data || [];\n    }\n  }\n\n\n  const activityMap = new Map();\n  engagementDays.forEach(d => {\n    activityMap.set(d.visit_date, d.articles_read || 1);\n  });\n\n\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n\n  calendarEl.innerHTML = '';\n\n  const headerRow = document.createElement('div');\n  headerRow.className = 'streak-calendar-header';\n  const dayLabels = ['M', 'T', 'W', 'T', 'F', 'S', 'S'];\n  dayLabels.forEach(label => {\n    const labelEl = document.createElement('span');\n    labelEl.className = 'streak-day-label';\n    labelEl.textContent = label;\n    headerRow.appendChild(labelEl);\n  });\n  calendarEl.appendChild(headerRow);\n\n  const gridEl = document.createElement('div');\n  gridEl.className = 'streak-calendar-grid';\n\n  for (let i = 27; i >= 0; i--) {\n    const date = new Date(today);\n    date.setDate(date.getDate() - i);\n    const dateStr = date.toISOString().split('T')[0];\n    const articles = activityMap.get(dateStr) || 0;\n\n    const dayEl = document.createElement('div');\n    dayEl.className = 'streak-day';\n\n    let activityLevel = 0;\n    if (articles > 0) {\n      if (articles >= 5) activityLevel = 4;\n      else if (articles >= 3) activityLevel = 3;\n      else if (articles >= 2) activityLevel = 2;\n      else activityLevel = 1;\n      dayEl.classList.add(`active-${activityLevel}`);\n    }\n\n    if (i === 0) {\n      dayEl.classList.add('today');\n    }\n\n    const tooltip = document.createElement('span');\n    tooltip.className = 'streak-tooltip';\n    const dateLabel = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n    tooltip.textContent = articles > 0\n      ? `${dateLabel}: ${articles} article${articles > 1 ? 's' : ''}`\n      : `${dateLabel}: No activity`;\n    dayEl.appendChild(tooltip);\n\n    gridEl.appendChild(dayEl);\n  }\n\n  calendarEl.appendChild(gridEl);\n\n\n  updateStreakMilestones(userProfile?.current_streak || 0);\n}\n\nfunction updateStreakMilestones(currentStreak) {\n  const milestones = document.querySelectorAll('.streak-milestone');\n  milestones.forEach(milestone => {\n    const days = parseInt(milestone.getAttribute('data-days')) || 0;\n    milestone.classList.remove('achieved', 'locked');\n    if (currentStreak >= days) {\n      milestone.classList.add('achieved');\n    } else {\n      milestone.classList.add('locked');\n    }\n  });\n\n  const calendarEl = document.getElementById('streakCalendar');\n  if (!calendarEl) return;\n  const calendarParent = calendarEl.closest('.mb-profile__streak-calendar');\n  if (!calendarParent) return;\n  let badgeContainer = calendarParent.querySelector('.streak-milestone-badges');\n  if (badgeContainer) badgeContainer.remove();\n\n  badgeContainer = createSafeElement('div', 'streak-milestone-badges');\n  const milestoneList = [\n    { days: 3, icon: '\\u{1F525}', label: '3 Days' },\n    { days: 7, icon: '\\u{2B50}', label: '1 Week' },\n    { days: 14, icon: '\\u{1F4AA}', label: '2 Weeks' },\n    { days: 30, icon: '\\u{1F3C6}', label: '1 Month' },\n    { days: 60, icon: '\\u{1F48E}', label: '2 Months' },\n    { days: 100, icon: '\\u{1F451}', label: '100 Days' }\n  ];\n\n  milestoneList.forEach(m => {\n    const badge = createSafeElement('div', 'streak-milestone-badge');\n    if (currentStreak >= m.days) badge.classList.add('earned');\n    badge.textContent = `${m.icon} ${m.label}`;\n    badgeContainer.appendChild(badge);\n  });\n\n  calendarParent.appendChild(badgeContainer);\n}\n\n\nwindow.addEventListener('mindspace:streakupdated', (e) => {\n  const { currentStreak, longestStreak } = e.detail;\n\n  const streakEl = document.getElementById('streakNumber');\n  const bestEl = document.getElementById('bestStreak');\n\n  if (streakEl) streakEl.textContent = currentStreak || 0;\n  if (bestEl) bestEl.textContent = longestStreak || 0;\n\n\n  loadStreakCalendar();\n});\n\n\n\n// ==================== REALTIME ====================\nlet realtimeSubscription = null;\n\nfunction setupRealtimeSubscriptions(userId) {\n  if (!userId || !isOwnProfile) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n\n  if (realtimeSubscription) {\n    supabaseClient.removeChannel(realtimeSubscription);\n  }\n\n\n  realtimeSubscription = supabaseClient\n    .channel(`profile-${userId}`)\n    .on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'profiles',\n      filter: `id=eq.${userId}`\n    }, (payload) => {\n      console.log('Profile updated:', payload);\n      if (payload.new) {\n\n        const streakEl = document.getElementById('streakNumber');\n        const bestEl = document.getElementById('bestStreak');\n        if (streakEl && payload.new.current_streak !== undefined) {\n          streakEl.textContent = payload.new.current_streak || 0;\n        }\n        if (bestEl && payload.new.longest_streak !== undefined) {\n          bestEl.textContent = payload.new.longest_streak || 0;\n        }\n      }\n    })\n    .on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'user_engagement',\n      filter: `user_id=eq.${userId}`\n    }, (payload) => {\n      console.log('Engagement updated:', payload);\n\n      loadStreakCalendar();\n    })\n    .on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'posts',\n      filter: `author_id=eq.${userId}`\n    }, () => {\n\n      loadStatsData(userId);\n    })\n    .on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'post_comments',\n      filter: `author_id=eq.${userId}`\n    }, () => {\n\n      loadStatsData(userId);\n    })\n    .subscribe((status) => {\n      console.log('Realtime subscription status:', status);\n    });\n}\n\n\nwindow.addEventListener('beforeunload', () => {\n  if (realtimeSubscription) {\n    const supabaseClient = getSupabaseClient();\n    if (supabaseClient) {\n      supabaseClient.removeChannel(realtimeSubscription);\n    }\n  }\n});\n\n\n// ==================== ACTIVITY FILTERS ====================\nfunction setupActivityFilters() {\n  const filterBtns = document.querySelectorAll('.mb-profile__filter');\n\n  filterBtns.forEach(btn => {\n    btn.addEventListener('click', () => {\n      filterBtns.forEach(b => b.classList.remove('is-active'));\n      btn.classList.add('is-active');\n\n      const filter = btn.dataset.filter;\n      filterActivities(filter);\n    });\n  });\n}\n\nfunction filterActivities(filter) {\n  const activityFeed = document.getElementById('activityFeed');\n\n  let filtered = allActivities;\n  if (filter === 'posts') {\n    filtered = allActivities.filter(a => a.type === 'post');\n  } else if (filter === 'comments') {\n    filtered = allActivities.filter(a => a.type === 'comment');\n  }\n\n  if (filtered.length === 0) {\n    const message = filter === 'all' ? 'activity' : filter;\n    activityFeed.innerHTML = '';\n    if (isOwnProfile) {\n      activityFeed.appendChild(createEmptyState('newspaper-outline', `No ${message} yet`, '../community/', 'Join the conversation'));\n    } else {\n      const viewedName = document.getElementById('profileName')?.textContent || 'This user';\n      activityFeed.appendChild(createEmptyState('newspaper-outline', `${viewedName} has no ${message} yet`, null, null));\n    }\n    return;\n  }\n\n  activityFeed.innerHTML = '';\n  filtered.forEach(activity => {\n    activityFeed.appendChild(createActivityItem(activity));\n  });\n}\n\n\n// ==================== SOCIAL LINKS ====================\nfunction setupSocialLinks() {\n  const saveBtn = document.getElementById('saveSocialBtn');\n  saveBtn?.addEventListener('click', saveSocialLinks);\n}\n\nasync function saveSocialLinks() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const website = document.getElementById('settingsWebsite').value.trim();\n  const twitter = document.getElementById('settingsTwitter').value.trim();\n  const instagram = document.getElementById('settingsInstagram').value.trim();\n\n  const socialLinks = { website, twitter, instagram };\n\n  const { error } = await supabaseClient\n    .from('profiles')\n    .upsert({\n      id: currentUser.id,\n      social_links: socialLinks,\n      updated_at: new Date().toISOString()\n    }, { onConflict: 'id' });\n\n  if (error) {\n    console.error('Error saving social links:', error);\n    ToastManager.error('Failed to save social links. Please try again.');\n    return;\n  }\n\n  userProfile = { ...userProfile, social_links: socialLinks };\n\n\n  updateProfileCompletion(userProfile);\n\n\n  const websiteLink = document.getElementById('socialWebsite');\n  const twitterLink = document.getElementById('socialTwitter');\n  const instaLink = document.getElementById('socialInstagram');\n\n  if (websiteLink) {\n    websiteLink.href = website || '#';\n    websiteLink.hidden = !website;\n  }\n  if (twitterLink && twitter) {\n    const handle = twitter.replace(/[^a-zA-Z0-9_]/g, '');\n    twitterLink.href = 'https://twitter.com/' + handle;\n    twitterLink.hidden = !handle;\n  } else if (twitterLink) {\n    twitterLink.hidden = true;\n  }\n  if (instaLink && instagram) {\n    const handle = instagram.replace(/[^a-zA-Z0-9_.]/g, '');\n    instaLink.href = 'https://instagram.com/' + handle;\n    instaLink.hidden = !handle;\n  } else if (instaLink) {\n    instaLink.hidden = true;\n  }\n\n  updateSocialLinksVisibility();\n  ToastManager.success('Social links saved!');\n}\n\n\n// ==================== PRIVACY ====================\nfunction setupPrivacySettings() {\n  const saveBtn = document.getElementById('savePrivacyBtn');\n  saveBtn?.addEventListener('click', savePrivacySettings);\n}\n\nasync function savePrivacySettings() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const isPublic = document.getElementById('publicProfile').checked;\n  const showActivity = document.getElementById('showActivity').checked;\n  const showSaved = document.getElementById('showSaved').checked;\n\n  const { error } = await supabaseClient\n    .from('profiles')\n    .upsert({\n      id: currentUser.id,\n      is_public: isPublic,\n      show_activity: showActivity,\n      show_saved: showSaved,\n      updated_at: new Date().toISOString()\n    }, { onConflict: 'id' });\n\n  if (error) {\n    console.error('Error saving privacy settings:', error);\n    ToastManager.error('Failed to save privacy settings. Please try again.');\n    return;\n  }\n\n  userProfile = { ...userProfile, is_public: isPublic, show_activity: showActivity, show_saved: showSaved };\n  ToastManager.success('Privacy settings saved!');\n}\n\n\n\n// ==================== REPUTATION ====================\nasync function loadReputationPoints() {\n  if (currentUser) {\n    loadReputationPointsData(currentUser.id);\n  }\n}\n\nasync function loadReputationPointsData(userId) {\n  if (!userId) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  let totalRep = 0;\n\n  const { data: posts } = await supabaseClient\n    .from('posts')\n    .select('like_count')\n    .eq('author_id', userId);\n\n  if (posts) {\n    totalRep += posts.reduce((sum, p) => sum + (p.like_count || 0) * 2, 0);\n  }\n\n  const { count: repCommentCount } = await supabaseClient\n    .from('post_comments')\n    .select('*', { count: 'exact', head: true })\n    .eq('author_id', userId);\n\n  totalRep += (repCommentCount || 0);\n\n  const { data: achievements } = await supabaseClient\n    .from('user_achievements')\n    .select('achievements(points)')\n    .eq('user_id', userId);\n\n  if (achievements) {\n    totalRep += achievements.reduce((sum, a) => sum + (a.achievements?.points || 0), 0);\n  }\n\n  document.getElementById('reputationPoints').textContent = totalRep;\n\n\n  if (isOwnProfile && currentUser && currentUser.id === userId) {\n    await supabaseClient\n      .from('profiles')\n      .upsert({\n        id: userId,\n        reputation_points: totalRep,\n        updated_at: new Date().toISOString()\n      }, { onConflict: 'id' });\n  }\n}\n\n\n\n// ==================== FOLLOW SYSTEM ====================\nasync function checkFollowStatus() {\n  if (!currentUser || !viewedUserId || isOwnProfile) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const { data: follow } = await supabaseClient\n    .from('followers')\n    .select('id')\n    .eq('follower_id', currentUser.id)\n    .eq('following_id', viewedUserId)\n    .single();\n\n  const followBtn = document.getElementById('followBtn');\n  if (followBtn) {\n    if (follow) {\n      followBtn.classList.add('is-following');\n      followBtn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon> Following';\n    } else {\n      followBtn.classList.remove('is-following');\n      followBtn.innerHTML = '<ion-icon name=\"add-outline\"></ion-icon> Follow';\n    }\n  }\n}\n\nasync function toggleFollow() {\n  if (!currentUser) {\n\n    window.location.href = '../auth/?redirect=' + encodeURIComponent(window.location.href);\n    return;\n  }\n\n  if (!viewedUserId || isOwnProfile) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const followBtn = document.getElementById('followBtn');\n  if (!followBtn) return;\n\n  const isFollowing = followBtn.classList.contains('is-following');\n\n  followBtn.disabled = true;\n\n  try {\n    if (isFollowing) {\n\n      await supabaseClient\n        .from('followers')\n        .delete()\n        .eq('follower_id', currentUser.id)\n        .eq('following_id', viewedUserId);\n\n      followBtn.classList.remove('is-following');\n      followBtn.innerHTML = '<ion-icon name=\"add-outline\"></ion-icon> Follow';\n    } else {\n\n      await supabaseClient\n        .from('followers')\n        .insert({\n          follower_id: currentUser.id,\n          following_id: viewedUserId\n        });\n\n      followBtn.classList.add('is-following');\n      followBtn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon> Following';\n\n      const fromName = currentUser.user_metadata?.display_name || currentUser.email?.split('@')[0] || 'Someone';\n      try {\n        await supabaseClient.from('notifications').insert({\n          user_id: viewedUserId,\n          type: 'follow',\n          from_user_name: fromName,\n          content: `${fromName} started following you`,\n          read: false\n        });\n      } catch (notifErr) {\n        console.warn('Failed to create follow notification:', notifErr);\n      }\n    }\n\n\n    loadFollowerCountsData(viewedUserId);\n  } catch (err) {\n    console.error('Follow error:', err);\n  } finally {\n    followBtn.disabled = false;\n  }\n}\n\n\nwindow.toggleGoalComplete = toggleGoalComplete;\nwindow.deleteGoal = deleteGoal;\nwindow.toggleFollow = toggleFollow;\n\n\n\n// ==================== PROFILE COMPLETION ====================\nfunction updateProfileCompletion(profile) {\n\n  let hasSocialLinks = false;\n  try {\n    if (profile.social_links) {\n      const links = typeof profile.social_links === 'string'\n        ? JSON.parse(profile.social_links)\n        : profile.social_links;\n      hasSocialLinks = Object.values(links).some(v => v);\n    }\n  } catch (e) {\n    hasSocialLinks = false;\n  }\n\n  const criteria = [\n    { name: 'avatar', check: profile.avatar_url && profile.avatar_url !== '', label: 'Add a profile photo' },\n    { name: 'cover', check: profile.cover_url && profile.cover_url !== '', label: 'Add a cover photo' },\n    { name: 'bio', check: profile.bio && profile.bio.length > 10, label: 'Write a bio (10+ chars)' },\n    { name: 'name', check: profile.display_name && profile.display_name !== '', label: 'Set your display name' },\n    { name: 'social', check: hasSocialLinks, label: 'Add social links' },\n    { name: 'theme', check: profile.theme_color && profile.theme_color !== '', label: 'Choose a theme color' }\n  ];\n\n  const completed = criteria.filter(c => c.check).length;\n  const total = criteria.length;\n  const percent = Math.round((completed / total) * 100);\n\n  const progressCircle = document.getElementById('completionProgress');\n  const percentText = document.getElementById('completionPercent');\n  const label = document.getElementById('completionLabel');\n  const ring = document.getElementById('completionRing');\n\n  if (!progressCircle || !percentText) return;\n\n  const circumference = 2 * Math.PI * 45;\n  const offset = circumference - (percent / 100) * circumference;\n\n  setTimeout(() => {\n    progressCircle.style.strokeDashoffset = offset;\n    percentText.textContent = percent + '%';\n  }, 100);\n\n  if (percent === 100) {\n    label.textContent = 'Profile complete!';\n    label.classList.add('is-complete');\n    if (ring) ring.classList.add('is-complete');\n  } else {\n    label.classList.remove('is-complete');\n    if (ring) ring.classList.remove('is-complete');\n\n    const missing = criteria.filter(c => !c.check);\n    const nextStep = missing[0];\n    label.textContent = nextStep ? nextStep.label : 'Complete your profile';\n  }\n}\n\n\n// --- Quick Actions ---\nfunction setupQuickActions() {\n  const shareBtn = document.getElementById('shareProfileBtn');\n  const viewPublicBtn = document.getElementById('viewPublicBtn');\n\n  if (shareBtn) {\n    shareBtn.addEventListener('click', async () => {\n      const profileUrl = window.location.origin + '/profile/?user=' + (userProfile?.username || currentUser?.id);\n\n      try {\n        await navigator.clipboard.writeText(profileUrl);\n        shareBtn.classList.add('is-copied');\n        shareBtn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon> Copied!';\n\n        setTimeout(() => {\n          shareBtn.classList.remove('is-copied');\n          shareBtn.innerHTML = '<ion-icon name=\"share-social-outline\"></ion-icon> Share';\n        }, 2000);\n      } catch (err) {\n        prompt('Copy this link:', profileUrl);\n      }\n    });\n  }\n\n  if (viewPublicBtn) {\n    viewPublicBtn.addEventListener('click', () => {\n      showPublicProfilePreview();\n    });\n  }\n}\n\n// --- URL Validation ---\nfunction isValidUrl(url) {\n  if (!url) return false;\n  try {\n    const parsed = new URL(url, window.location.origin);\n    return ['http:', 'https:'].includes(parsed.protocol);\n  } catch {\n    return false;\n  }\n}\n\n\n// ==================== PUBLIC PROFILE PREVIEW ====================\nfunction showPublicProfilePreview() {\n  const modal = document.createElement('div');\n  modal.className = 'mb-profile__preview-modal';\n  modal.setAttribute('role', 'dialog');\n  modal.setAttribute('aria-modal', 'true');\n  modal.setAttribute('aria-labelledby', 'previewTitle');\n\n  const backdrop = document.createElement('div');\n  backdrop.className = 'preview-modal__backdrop';\n\n  const content = document.createElement('div');\n  content.className = 'preview-modal__content';\n\n  const header = document.createElement('div');\n  header.className = 'preview-modal__header';\n  const title = document.createElement('h3');\n  title.id = 'previewTitle';\n  title.textContent = 'Public Profile Preview';\n  const closeBtn = document.createElement('button');\n  closeBtn.className = 'preview-modal__close';\n  closeBtn.setAttribute('aria-label', 'Close preview');\n  closeBtn.innerHTML = '<ion-icon name=\"close-outline\"></ion-icon>';\n  header.appendChild(title);\n  header.appendChild(closeBtn);\n\n  const body = document.createElement('div');\n  body.className = 'preview-modal__body';\n\n  const card = document.createElement('div');\n  card.className = 'preview-card';\n\n  const cover = document.createElement('div');\n  cover.className = 'preview-cover';\n  if (userProfile?.cover_url && isValidUrl(userProfile.cover_url)) {\n    cover.style.backgroundImage = `url(\"${userProfile.cover_url.replace(/\"/g, '')}\")`;\n    cover.style.backgroundSize = 'cover';\n    cover.style.backgroundPosition = 'center';\n  }\n\n  const info = document.createElement('div');\n  info.className = 'preview-info';\n\n  const avatar = document.createElement('img');\n  avatar.className = 'preview-avatar';\n  avatar.alt = 'Avatar';\n  if (userProfile?.avatar_url && isValidUrl(userProfile.avatar_url)) {\n    avatar.src = userProfile.avatar_url;\n  } else {\n    avatar.src = '../assets/images/user.png';\n  }\n\n  const nameEl = document.createElement('h4');\n  nameEl.textContent = userProfile?.display_name || 'User';\n\n  const bioEl = document.createElement('p');\n  bioEl.textContent = userProfile?.bio || 'No bio yet';\n\n  const stats = document.createElement('div');\n  stats.className = 'preview-stats';\n  const postsStat = document.createElement('span');\n  postsStat.textContent = (document.getElementById('postCount')?.textContent || '0') + ' posts';\n  const followersStat = document.createElement('span');\n  followersStat.textContent = (document.getElementById('followerCount')?.textContent || '0') + ' followers';\n  stats.appendChild(postsStat);\n  stats.appendChild(followersStat);\n\n  info.appendChild(avatar);\n  info.appendChild(nameEl);\n  info.appendChild(bioEl);\n  info.appendChild(stats);\n\n  card.appendChild(cover);\n  card.appendChild(info);\n\n  const note = document.createElement('p');\n  note.className = 'preview-note';\n  note.textContent = 'This is how others see your profile when it\\'s public.';\n\n  body.appendChild(card);\n  body.appendChild(note);\n\n  content.appendChild(header);\n  content.appendChild(body);\n\n  modal.appendChild(backdrop);\n  modal.appendChild(content);\n\n  document.body.appendChild(modal);\n  setTimeout(() => modal.classList.add('is-visible'), 10);\n\n  closeBtn.focus();\n\n  backdrop.addEventListener('click', () => closePreviewModal(modal));\n  closeBtn.addEventListener('click', () => closePreviewModal(modal));\n\n  const handleKeydown = (e) => {\n    if (e.key === 'Escape') {\n      closePreviewModal(modal);\n      document.removeEventListener('keydown', handleKeydown);\n    }\n  };\n  document.addEventListener('keydown', handleKeydown);\n}\n\nfunction closePreviewModal(modal) {\n  modal.classList.remove('is-visible');\n  setTimeout(() => modal.remove(), 300);\n}\n\nfunction escapeHtml(text) {\n  const div = document.createElement('div');\n  div.textContent = text || '';\n  return div.innerHTML;\n}\n\n\ndocument.addEventListener('DOMContentLoaded', setupQuickActions);\n\n\nfunction createFollowAvatar(profile) {\n  const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--user-accent').trim() || '#5BA4E6';\n  const colors = [accentColor,'#E57373','#64B5F6','#81C784','#FFD54F','#BA68C8','#4DB6AC','#FF8A65','#90A4AE','#A1887F'];\n  if (profile.avatar_url) {\n    const avatar = document.createElement('img');\n    avatar.className = 'mb-follow-item__avatar';\n    avatar.src = profile.avatar_url;\n    avatar.alt = profile.display_name || 'User';\n    avatar.onerror = () => {\n      const parent = avatar.parentElement;\n      const initialsEl = createInitialsCircle(profile, colors, 'mb-follow-item__avatar');\n      parent.replaceChild(initialsEl, avatar);\n    };\n    return avatar;\n  }\n  return createInitialsCircle(profile, colors, 'mb-follow-item__avatar');\n}\n\nfunction createInitialsCircle(profile, colors, className) {\n  const name = profile.display_name || profile.username || profile.email || 'U';\n  const initials = name.split(' ').map(w => w[0]).join('').toUpperCase().slice(0, 2) || name.substring(0, 2).toUpperCase();\n  const colorIndex = name.charCodeAt(0) % colors.length;\n  const el = document.createElement('div');\n  el.className = className + ' mb-follow-item__avatar--initials';\n  el.textContent = initials;\n  el.style.background = colors[colorIndex];\n  el.setAttribute('aria-label', name);\n  return el;\n}\n\nasync function openFollowersModal() {\n  const modal = document.getElementById('followersModal');\n  const list = document.getElementById('followersList');\n  if (!modal || !list) return;\n\n  modal.hidden = false;\n  list.innerHTML = '<div class=\"mb-follow-modal__empty\">Loading...</div>';\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const userId = viewedUserId || (currentUser ? currentUser.id : null);\n  if (!userId) return;\n\n  let followers = [];\n  try {\n\n    const result = await supabaseClient\n      .from('followers')\n      .select('follower_id')\n      .eq('following_id', userId);\n\n    if (result.error) throw result.error;\n\n\n    if (result.data && result.data.length > 0) {\n      const followerIds = result.data.map(f => f.follower_id);\n      const profilesResult = await supabaseClient\n        .from('profiles')\n        .select('id, display_name, avatar_url, bio')\n        .in('id', followerIds);\n\n      if (profilesResult.data) {\n        followers = profilesResult.data;\n      }\n    }\n  } catch (error) {\n    console.error('Error loading followers:', error);\n    list.innerHTML = '<div class=\"mb-follow-modal__empty\">Failed to load followers</div>';\n    return;\n  }\n\n  if (!followers || followers.length === 0) {\n    list.innerHTML = '<div class=\"mb-follow-modal__empty\">No followers yet</div>';\n    return;\n  }\n\n  list.innerHTML = '';\n  followers.forEach(profile => {\n    if (!profile) return;\n\n    const item = document.createElement('div');\n    item.className = 'mb-follow-item';\n\n    const avatarEl = createFollowAvatar(profile);\n\n    const info = document.createElement('div');\n    info.className = 'mb-follow-item__info';\n\n    const nameLink = document.createElement('a');\n    nameLink.className = 'mb-follow-item__name';\n    nameLink.href = '/profile/?user=' + profile.id;\n    nameLink.textContent = profile.display_name || 'Anonymous';\n\n    const bio = document.createElement('p');\n    bio.className = 'mb-follow-item__bio';\n    bio.textContent = profile.bio || '';\n\n    info.appendChild(nameLink);\n    if (profile.bio) info.appendChild(bio);\n\n    item.appendChild(avatarEl);\n    item.appendChild(info);\n    list.appendChild(item);\n  });\n}\n\nfunction closeFollowersModal() {\n  const modal = document.getElementById('followersModal');\n  if (modal) modal.hidden = true;\n}\n\nasync function openFollowingModal() {\n  const modal = document.getElementById('followingModal');\n  const list = document.getElementById('followingList');\n  if (!modal || !list) return;\n\n  modal.hidden = false;\n  list.innerHTML = '<div class=\"mb-follow-modal__empty\">Loading...</div>';\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const userId = viewedUserId || (currentUser ? currentUser.id : null);\n  if (!userId) return;\n\n  let following = [];\n  try {\n\n    const result = await supabaseClient\n      .from('followers')\n      .select('following_id')\n      .eq('follower_id', userId);\n\n    if (result.error) throw result.error;\n\n\n    if (result.data && result.data.length > 0) {\n      const followingIds = result.data.map(f => f.following_id);\n      const profilesResult = await supabaseClient\n        .from('profiles')\n        .select('id, display_name, avatar_url, bio')\n        .in('id', followingIds);\n\n      if (profilesResult.data) {\n        following = profilesResult.data;\n      }\n    }\n  } catch (error) {\n    console.error('Error loading following:', error);\n    list.innerHTML = '<div class=\"mb-follow-modal__empty\">Failed to load following</div>';\n    return;\n  }\n\n  if (!following || following.length === 0) {\n    list.innerHTML = '<div class=\"mb-follow-modal__empty\">Not following anyone yet</div>';\n    return;\n  }\n\n  list.innerHTML = '';\n  following.forEach(profile => {\n    if (!profile) return;\n\n    const item = document.createElement('div');\n    item.className = 'mb-follow-item';\n\n    const avatarEl = createFollowAvatar(profile);\n\n    const info = document.createElement('div');\n    info.className = 'mb-follow-item__info';\n\n    const nameLink = document.createElement('a');\n    nameLink.className = 'mb-follow-item__name';\n    nameLink.href = '/profile/?user=' + profile.id;\n    nameLink.textContent = profile.display_name || 'Anonymous';\n\n    const bio = document.createElement('p');\n    bio.className = 'mb-follow-item__bio';\n    bio.textContent = profile.bio || '';\n\n    info.appendChild(nameLink);\n    if (profile.bio) info.appendChild(bio);\n\n    item.appendChild(avatarEl);\n    item.appendChild(info);\n    list.appendChild(item);\n  });\n}\n\nfunction closeFollowingModal() {\n  const modal = document.getElementById('followingModal');\n  if (modal) modal.hidden = true;\n}\n\n\ndocument.addEventListener('click', (e) => {\n  if (e.target.classList.contains('mb-follow-modal')) {\n    e.target.hidden = true;\n  }\n});\n\n\nfunction setupAccountDeletion() {\n  const deleteBtn = document.getElementById('deleteAccountBtn');\n  const confirmInput = document.getElementById('deleteConfirmInput');\n  const confirmBtn = document.getElementById('confirmDeleteBtn');\n\n  deleteBtn?.addEventListener('click', () => {\n    const modal = document.getElementById('deleteModal');\n    if (modal) {\n      modal.hidden = false;\n      confirmInput.value = '';\n      confirmBtn.disabled = true;\n      confirmBtn.classList.remove('is-enabled');\n    }\n  });\n\n  confirmInput?.addEventListener('input', () => {\n    const isValid = confirmInput.value.toUpperCase() === 'DELETE';\n    confirmBtn.disabled = !isValid;\n    confirmBtn.classList.toggle('is-enabled', isValid);\n  });\n\n  confirmBtn?.addEventListener('click', deleteAccount);\n}\n\nfunction closeDeleteModal() {\n  const modal = document.getElementById('deleteModal');\n  if (modal) modal.hidden = true;\n}\n\nasync function deleteAccount() {\n  if (!currentUser) return;\n\n  const confirmInput = document.getElementById('deleteConfirmInput');\n  if (confirmInput.value.toUpperCase() !== 'DELETE') return;\n\n  const confirmBtn = document.getElementById('confirmDeleteBtn');\n  confirmBtn.textContent = 'Deleting...';\n  confirmBtn.disabled = true;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  try {\n\n    await Promise.all([\n      supabaseClient.from('posts').delete().eq('author_id', currentUser.id),\n      supabaseClient.from('post_comments').delete().eq('author_id', currentUser.id),\n      supabaseClient.from('likes').delete().eq('user_id', currentUser.id),\n      supabaseClient.from('followers').delete().or(`follower_id.eq.${currentUser.id},following_id.eq.${currentUser.id}`),\n      supabaseClient.from('saved_articles').delete().eq('user_id', currentUser.id),\n      supabaseClient.from('mood_logs').delete().eq('user_id', currentUser.id),\n      supabaseClient.from('wellness_goals').delete().eq('user_id', currentUser.id),\n      supabaseClient.from('user_achievements').delete().eq('user_id', currentUser.id),\n      supabaseClient.from('profiles').delete().eq('id', currentUser.id)\n    ]);\n\n\n    await supabaseClient.auth.signOut();\n\n    ToastManager.success('Your account has been deleted. Redirecting to home page...');\n    window.location.href = '/';\n  } catch (error) {\n    console.error('Error deleting account:', error);\n    ToastManager.error('There was an error deleting your account. Please try again or contact support.');\n    confirmBtn.textContent = 'Delete Account';\n    confirmBtn.disabled = false;\n  }\n}\n\n\ndocument.addEventListener('DOMContentLoaded', setupAccountDeletion);\n\n\nfunction updateSocialLinksVisibility() {\n  const container = document.getElementById('socialLinksDisplay');\n  if (!container) return;\n\n  const visibleLinks = container.querySelectorAll('a:not([hidden])');\n  container.style.display = visibleLinks.length > 0 ? 'flex' : 'none';\n}\n\n\nlet onboardingInitialized = false;\n\nfunction showOnboardingModal() {\n  const modal = document.getElementById('onboardingModal');\n  if (!modal) return;\n\n  modal.hidden = false;\n  document.body.style.overflow = 'hidden';\n\n  const displayNameInput = document.getElementById('onboardingDisplayName');\n  const bioInput = document.getElementById('onboardingBio');\n  const saveBtn = document.getElementById('onboardingSaveBtn');\n\n\n  setTimeout(() => displayNameInput?.focus(), 100);\n\n\n  if (onboardingInitialized) return;\n  onboardingInitialized = true;\n\n\n  displayNameInput?.addEventListener('input', () => {\n    const name = displayNameInput.value.trim();\n    saveBtn.disabled = name.length < 2;\n  });\n\n\n  saveBtn?.addEventListener('click', async () => {\n    const displayName = displayNameInput.value.trim();\n    const bio = bioInput.value.trim();\n\n    if (displayName.length < 2) {\n      ToastManager.error('Display name must be at least 2 characters');\n      displayNameInput.focus();\n      return;\n    }\n\n    saveBtn.disabled = true;\n    saveBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Saving...';\n\n    try {\n      const supabaseClient = getSupabaseClient();\n      if (!supabaseClient || !currentUser) {\n        throw new Error('Not authenticated');\n      }\n\n      const { error } = await supabaseClient\n        .from('profiles')\n        .upsert({\n          id: currentUser.id,\n          display_name: displayName,\n          bio: bio || null,\n          updated_at: new Date().toISOString()\n        }, { onConflict: 'id' });\n\n      if (error) throw error;\n\n\n      userProfile = { ...userProfile, display_name: displayName, bio: bio };\n      window.userProfile = userProfile;\n\n\n      document.getElementById('profileName').textContent = displayName;\n      document.getElementById('profileBio').textContent = bio || 'No bio yet...';\n      document.getElementById('settingsName').value = displayName;\n      document.getElementById('settingsBio').value = bio;\n\n\n      updateProfileCompletion(userProfile);\n\n\n      if (window.MindSpaceImmersive?.updateGreeting) {\n        window.MindSpaceImmersive.updateGreeting();\n      }\n\n\n      hideOnboardingModal();\n\n      ToastManager.success('Profile setup complete! Welcome to MindSpace!');\n    } catch (error) {\n      console.error('Onboarding error:', error);\n      ToastManager.error('Failed to save profile. Please try again.');\n      saveBtn.disabled = false;\n      saveBtn.innerHTML = '<i class=\"fas fa-check\"></i> Complete Setup';\n    }\n  });\n}\n\nfunction hideOnboardingModal() {\n  const modal = document.getElementById('onboardingModal');\n  if (!modal) return;\n\n  modal.hidden = true;\n  document.body.style.overflow = '';\n}\n","path":null,"size_bytes":99590,"size_tokens":null},"mindspace-build/js/settings-modal.js":{"content":"// ==================== SETTINGS MODAL ====================\n(function() {\n  'use strict';\n\n  // --- Constants ---\n  const STORAGE_KEYS = {\n    theme: 'mindspace_theme',\n    fontSize: 'mindspace_font_size',\n    reduceMotion: 'mindspace_reduce_motion',\n    highContrast: 'mindspace_high_contrast',\n    colorblind: 'mindspace_colorblind',\n    adhdMode: 'mindspace_adhd_mode',\n    dyslexiaFont: 'mindspace_dyslexia_font',\n    accentColor: 'mindspace_accent_color',\n    language: 'mindspace_language',\n    onboardingComplete: 'mindspace_onboarding_complete',\n    activePreset: 'mindspace_active_preset'\n  };\n\n  const ACCENT_COLORS = {\n    blue:   { hex: '#5BA4E6', hover: '#4893D4', rgb: '91, 164, 230', light: '#a3c8ed', soft: '#bde0fe', dark: '#2d6ab0', gradEnd: '#7BBDF7', text: '#245a8c', name: 'Blue' },\n    purple: { hex: '#9b7ed9', hover: '#8a6dc8', rgb: '155, 126, 217', light: '#c9b8ec', soft: '#f3eefb', dark: '#6b4fb5', gradEnd: '#b99ae6', text: '#5a3d9e', name: 'Purple' },\n    sky:    { hex: '#4a90d9', hover: '#3d7fc8', rgb: '74, 144, 217',  light: '#a3c8ed', soft: '#eaf2fb', dark: '#2d6ab0', gradEnd: '#6daeed', text: '#245a8c', name: 'Sky' },\n    green:  { hex: '#4db896', hover: '#3fa884', rgb: '77, 184, 150',  light: '#a3dbc7', soft: '#e8f7f1', dark: '#2e8a6a', gradEnd: '#6fd4aa', text: '#267558', name: 'Green' },\n    teal:   { hex: '#38b2ac', hover: '#2d9d98', rgb: '56, 178, 172',  light: '#96d8d4', soft: '#e6f5f4', dark: '#238079', gradEnd: '#5fccc6', text: '#1d6b65', name: 'Teal' },\n    pink:   { hex: '#d97eab', hover: '#c86d9a', rgb: '217, 126, 171', light: '#ecbdd5', soft: '#fbeef4', dark: '#b4547f', gradEnd: '#e9a3c3', text: '#993f6a', name: 'Pink' },\n    orange: { hex: '#e09c5c', hover: '#d08b4b', rgb: '224, 156, 92',  light: '#f0cca3', soft: '#fdf3e8', dark: '#b87430', gradEnd: '#edb87a', text: '#9a6228', name: 'Orange' },\n    red:    { hex: '#e07070', hover: '#d05f5f', rgb: '224, 112, 112', light: '#f0b3b3', soft: '#fdeaea', dark: '#b84444', gradEnd: '#ed9494', text: '#9a3535', name: 'Red' }\n  };\n\n  const THEME_PRESETS = {\n    default: {\n      name: 'Default',\n      description: 'Classic MindSpace',\n      theme: 'light',\n      accent: 'blue',\n      fontSize: 'normal',\n      highContrast: false\n    },\n    ocean: {\n      name: 'Calm Ocean',\n      description: 'Peaceful blue tones',\n      theme: 'light',\n      accent: 'blue',\n      fontSize: 'normal',\n      highContrast: false\n    },\n    sunset: {\n      name: 'Warm Sunset',\n      description: 'Cozy warm colors',\n      theme: 'light',\n      accent: 'orange',\n      fontSize: 'normal',\n      highContrast: false\n    },\n    forest: {\n      name: 'Forest Green',\n      description: 'Natural serenity',\n      theme: 'light',\n      accent: 'green',\n      fontSize: 'normal',\n      highContrast: false\n    },\n    night: {\n      name: 'Night Mode',\n      description: 'Easy on the eyes',\n      theme: 'dark',\n      accent: 'purple',\n      fontSize: 'normal',\n      highContrast: false\n    },\n    contrast: {\n      name: 'High Contrast',\n      description: 'Maximum readability',\n      theme: 'light',\n      accent: 'blue',\n      fontSize: 'large',\n      highContrast: true\n    }\n  };\n\n  const ACCESSIBILITY_FEATURES = [\n    { key: 'reduceMotion', points: 10 },\n    { key: 'highContrast', points: 15 },\n    { key: 'adhdMode', points: 15 },\n    { key: 'dyslexiaFont', points: 20 },\n    { key: 'colorblind', points: 15, checkFn: (val) => val && val !== 'none' }\n  ];\n\n  let currentCategory = 'appearance';\n  // --- State ---\n  let compareMode = false;\n  let savedSettings = {};\n\n  function getPreference(key, defaultValue) {\n  // --- Preferences ---\n    try {\n      const value = localStorage.getItem(key);\n      return value !== null ? value : defaultValue;\n    } catch (e) {\n      return defaultValue;\n    }\n  }\n\n  function setPreference(key, value) {\n    try {\n      localStorage.setItem(key, value);\n    } catch (e) {\n      console.warn('Could not save preference:', key);\n    }\n  }\n\n  function calculateAccessibilityScore() {\n  // --- Accessibility Score ---\n    let score = 25;\n    ACCESSIBILITY_FEATURES.forEach(feature => {\n      const value = getPreference(STORAGE_KEYS[feature.key], 'false');\n      if (feature.checkFn) {\n        if (feature.checkFn(value)) score += feature.points;\n      } else if (value === 'true') {\n        score += feature.points;\n      }\n    });\n    return Math.min(score, 100);\n  }\n\n  function updateAccessibilityScore() {\n    const score = calculateAccessibilityScore();\n    const scoreValue = document.querySelector('.accessibility-score-value');\n    const progressRing = document.querySelector('.progress-ring');\n\n    if (scoreValue) scoreValue.textContent = score;\n    if (progressRing) {\n      const circumference = 2 * Math.PI * 35;\n      const offset = circumference - (score / 100) * circumference;\n      progressRing.style.strokeDasharray = circumference;\n      progressRing.style.strokeDashoffset = offset;\n    }\n  }\n\n  function createSettingsModal() {\n\n  // ==================== MODAL TEMPLATE ====================\n    const modalHTML = `\n      <div class=\"settings-modal-overlay\" id=\"settingsModalOverlay\">\n        <div class=\"settings-modal\">\n          <!-- Left Sidebar -->\n          <div class=\"settings-sidebar\">\n            <div class=\"settings-sidebar-header\">\n              <h2 class=\"settings-sidebar-title\">\n                <ion-icon name=\"settings-outline\"></ion-icon>\n                <span data-translate=\"settings_title\">Settings</span>\n              </h2>\n            </div>\n\n            <div class=\"settings-categories\">\n              <button class=\"settings-category-btn active\" data-category=\"appearance\">\n                <ion-icon name=\"color-palette-outline\"></ion-icon>\n                <span data-translate=\"settings_appearance\">Appearance</span>\n              </button>\n              <button class=\"settings-category-btn\" data-category=\"accessibility\">\n                <ion-icon name=\"accessibility-outline\"></ion-icon>\n                <span data-translate=\"settings_accessibility\">Accessibility</span>\n              </button>\n              <button class=\"settings-category-btn\" data-category=\"reading\">\n                <ion-icon name=\"book-outline\"></ion-icon>\n                <span data-translate=\"settings_reading\">Reading</span>\n              </button>\n              <button class=\"settings-category-btn\" data-category=\"language\">\n                <ion-icon name=\"globe-outline\"></ion-icon>\n                <span data-translate=\"settings_language\">Language</span>\n              </button>\n            </div>\n\n            <!-- Accessibility Score -->\n            <div class=\"settings-accessibility-score\">\n              <div class=\"accessibility-score-ring\">\n                <svg width=\"80\" height=\"80\">\n                  <circle class=\"bg-ring\" cx=\"40\" cy=\"40\" r=\"35\"></circle>\n                  <circle class=\"progress-ring\" cx=\"40\" cy=\"40\" r=\"35\"></circle>\n                </svg>\n                <span class=\"accessibility-score-value\">25</span>\n              </div>\n              <span class=\"accessibility-score-label\" data-translate=\"settings_accessibility_score\">Accessibility Score</span>\n            </div>\n          </div>\n\n          <!-- Main Content -->\n          <div class=\"settings-main\">\n            <div class=\"settings-main-header\">\n              <h3 class=\"settings-main-title\" id=\"settingsPanelTitle\" data-translate=\"settings_appearance\">Appearance</h3>\n              <div class=\"settings-header-actions\">\n                <div class=\"settings-sync-indicator\" id=\"syncIndicator\">\n                  <ion-icon name=\"cloud-done-outline\"></ion-icon>\n                  <span data-translate=\"settings_synced\">Synced</span>\n                </div>\n                <button class=\"settings-compare-toggle\" id=\"compareToggle\">\n                  <ion-icon name=\"git-compare-outline\"></ion-icon>\n                  <span data-translate=\"settings_compare\">Compare</span>\n                </button>\n                <button class=\"settings-close-btn\" id=\"settingsCloseBtn\">\n                  <ion-icon name=\"close-outline\"></ion-icon>\n                </button>\n              </div>\n            </div>\n\n            <!-- Mobile Tabs -->\n            <div class=\"settings-mobile-tabs\">\n              <button class=\"settings-mobile-tab active\" data-category=\"appearance\" data-translate=\"settings_appearance\">Appearance</button>\n              <button class=\"settings-mobile-tab\" data-category=\"accessibility\" data-translate=\"settings_accessibility\">Accessibility</button>\n              <button class=\"settings-mobile-tab\" data-category=\"reading\" data-translate=\"settings_reading\">Reading</button>\n              <button class=\"settings-mobile-tab\" data-category=\"language\" data-translate=\"settings_language\">Language</button>\n            </div>\n\n            <div class=\"settings-content\">\n              <!-- Appearance Panel -->\n              <div class=\"settings-panel active\" id=\"panelAppearance\">\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_theme_presets\">Theme Presets</h4>\n                  <div class=\"theme-presets-grid\">\n                    <div class=\"theme-preset-card theme-preset-default\" data-preset=\"default\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_default\">Default</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_default_desc\">Classic MindSpace</div>\n                    </div>\n                    <div class=\"theme-preset-card theme-preset-ocean\" data-preset=\"ocean\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_ocean\">Calm Ocean</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_ocean_desc\">Peaceful blue tones</div>\n                    </div>\n                    <div class=\"theme-preset-card theme-preset-sunset\" data-preset=\"sunset\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_sunset\">Warm Sunset</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_sunset_desc\">Cozy warm colors</div>\n                    </div>\n                    <div class=\"theme-preset-card theme-preset-forest\" data-preset=\"forest\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_forest\">Forest Green</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_forest_desc\">Natural serenity</div>\n                    </div>\n                    <div class=\"theme-preset-card theme-preset-night\" data-preset=\"night\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_night\">Night Mode</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_night_desc\">Easy on the eyes</div>\n                    </div>\n                    <div class=\"theme-preset-card theme-preset-contrast\" data-preset=\"contrast\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_contrast\">High Contrast</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_contrast_desc\">Maximum readability</div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_theme\">Theme</h4>\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"moon-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_dark_mode\">Dark Mode</h4>\n                        <p data-translate=\"settings_dark_mode_desc\">Reduce eye strain in low light</p>\n                      </div>\n                    </div>\n                    <label class=\"settings-toggle\">\n                      <input type=\"checkbox\" id=\"settingsDarkMode\" data-theme-toggle>\n                      <span class=\"settings-toggle-slider\"></span>\n                    </label>\n                  </div>\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"megaphone-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4>Welcome Bar</h4>\n                        <p>Show the welcome banner at the top</p>\n                      </div>\n                    </div>\n                    <label class=\"settings-toggle\">\n                      <input type=\"checkbox\" data-topbar-toggle checked>\n                      <span class=\"settings-toggle-slider\"></span>\n                    </label>\n                  </div>\n                </div>\n\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_accent_color\">Accent Color</h4>\n                  <div class=\"accent-color-grid\" id=\"accentColorGrid\">\n                    <!-- Colors will be inserted here -->\n                  </div>\n                </div>\n\n                <!-- Live Preview -->\n                <div class=\"settings-preview\">\n                  <div class=\"settings-preview-title\" data-translate=\"settings_live_preview\">Live Preview</div>\n                  <div class=\"settings-preview-frame\">\n                    <p class=\"preview-sample-text\" style=\"font-size: 18px; font-weight: 600; margin-bottom: 8px;\" data-translate=\"settings_preview_welcome\">Welcome to MindSpace</p>\n                    <p class=\"preview-sample-text\" style=\"font-size: 14px; opacity: 0.8; margin-bottom: 16px;\" data-translate=\"settings_preview_journey\">Your journey to mental wellness starts here.</p>\n                    <span class=\"preview-sample-btn\" data-translate=\"settings_preview_btn\">Get Started</span>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Accessibility Panel -->\n              <div class=\"settings-panel\" id=\"panelAccessibility\">\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_visual_accessibility\">Visual Accessibility</h4>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"contrast-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_high_contrast\">High Contrast</h4>\n                        <p data-translate=\"settings_high_contrast_desc\">Increase contrast for better readability</p>\n                      </div>\n                    </div>\n                    <label class=\"settings-toggle\">\n                      <input type=\"checkbox\" id=\"settingsHighContrast\" data-high-contrast-toggle>\n                      <span class=\"settings-toggle-slider\"></span>\n                    </label>\n                  </div>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"eye-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_colorblind_mode\">Colorblind Mode</h4>\n                        <p data-translate=\"settings_colorblind_desc\">Adjust colors for color vision deficiency</p>\n                      </div>\n                    </div>\n                    <select class=\"settings-select\" id=\"settingsColorblind\" data-colorblind-select>\n                      <option value=\"none\" data-translate=\"settings_colorblind_none\">None</option>\n                      <option value=\"protanopia\" data-translate=\"settings_colorblind_protanopia\">Protanopia (Red-blind)</option>\n                      <option value=\"deuteranopia\" data-translate=\"settings_colorblind_deuteranopia\">Deuteranopia (Green-blind)</option>\n                      <option value=\"tritanopia\" data-translate=\"settings_colorblind_tritanopia\">Tritanopia (Blue-blind)</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_cognitive_accessibility\">Cognitive Accessibility</h4>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"flash-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_focus_mode\">Focus Mode (ADHD)</h4>\n                        <p data-translate=\"settings_focus_mode_desc\">Reduce distractions for better focus</p>\n                      </div>\n                    </div>\n                    <label class=\"settings-toggle\">\n                      <input type=\"checkbox\" id=\"settingsAdhd\" data-adhd-toggle>\n                      <span class=\"settings-toggle-slider\"></span>\n                    </label>\n                  </div>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"text-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_dyslexia_font\">Dyslexia-Friendly Font</h4>\n                        <p data-translate=\"settings_dyslexia_font_desc\">Use OpenDyslexic font for easier reading</p>\n                      </div>\n                    </div>\n                    <label class=\"settings-toggle\">\n                      <input type=\"checkbox\" id=\"settingsDyslexia\" data-dyslexia-toggle>\n                      <span class=\"settings-toggle-slider\"></span>\n                    </label>\n                  </div>\n                </div>\n\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_motion_animation\">Motion & Animation</h4>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"pause-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_reduce_motion\">Reduce Motion</h4>\n                        <p data-translate=\"settings_reduce_motion_desc\">Minimize animations and transitions</p>\n                      </div>\n                    </div>\n                    <label class=\"settings-toggle\">\n                      <input type=\"checkbox\" id=\"settingsReduceMotion\" data-reduce-motion-toggle>\n                      <span class=\"settings-toggle-slider\"></span>\n                    </label>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Reading Panel -->\n              <div class=\"settings-panel\" id=\"panelReading\">\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_text_size\">Text Size</h4>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"resize-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_font_size\">Font Size</h4>\n                        <p data-translate=\"settings_font_size_desc\">Adjust text size for comfortable reading</p>\n                      </div>\n                    </div>\n                    <select class=\"settings-select\" id=\"settingsFontSize\" data-font-size-select>\n                      <option value=\"small\" data-translate=\"settings_font_small\">Small</option>\n                      <option value=\"normal\" data-translate=\"settings_font_normal\">Normal</option>\n                      <option value=\"large\" data-translate=\"settings_font_large\">Large</option>\n                      <option value=\"xlarge\" data-translate=\"settings_font_xlarge\">Extra Large</option>\n                    </select>\n                  </div>\n                </div>\n\n                <!-- Live Preview for Reading -->\n                <div class=\"settings-preview\">\n                  <div class=\"settings-preview-title\" data-translate=\"settings_text_preview\">Text Preview</div>\n                  <div class=\"settings-preview-frame\">\n                    <p class=\"preview-sample-text\" id=\"readingPreviewText\" data-translate=\"settings_reading_preview_text\">\n                      Mental health is just as important as physical health. Taking time each day to check in with yourself, practice mindfulness, and seek support when needed are all crucial steps toward maintaining your wellbeing.\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Language Panel -->\n              <div class=\"settings-panel\" id=\"panelLanguage\">\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_language\">Language</h4>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"language-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_display_language\">Display Language</h4>\n                        <p data-translate=\"settings_display_language_desc\">Choose your preferred language</p>\n                      </div>\n                    </div>\n                    <select class=\"settings-select\" id=\"settingsLanguage\" data-language-select>\n                      <option value=\"en\">English</option>\n                      <option value=\"es\">EspaÃ±ol</option>\n                      <option value=\"fr\">FranÃ§ais</option>\n                      <option value=\"zh\">ä¸­æ–‡</option>\n                      <option value=\"hi\">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>\n                      <option value=\"ko\">í•œêµ­ì–´</option>\n                      <option value=\"de\">Deutsch</option>\n                      <option value=\"gr\">Î•Î»Î»Î·Î½Î¹ÎºÎ¬</option>\n                    </select>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Reset Button -->\n              <button class=\"settings-reset-btn\" id=\"settingsResetBtn\">\n                <ion-icon name=\"refresh-outline\"></ion-icon>\n                <span data-translate=\"settings_reset_defaults\">Reset to Defaults</span>\n              </button>\n            </div>\n          </div>\n\n          <!-- Onboarding Overlay -->\n          <div class=\"settings-onboarding\" id=\"settingsOnboarding\">\n            <div class=\"onboarding-card\">\n              <div class=\"onboarding-icon\">\n                <ion-icon name=\"sparkles-outline\"></ion-icon>\n              </div>\n              <h3 class=\"onboarding-title\" data-translate=\"settings_onboarding_title\">Welcome to Settings!</h3>\n              <p class=\"onboarding-text\" data-translate=\"settings_onboarding_text\">\n                Customize your MindSpace experience with theme presets, accessibility options, and more. Your preferences sync across all pages.\n              </p>\n              <button class=\"onboarding-btn\" id=\"onboardingStartBtn\" data-translate=\"settings_onboarding_start\">Let's Get Started</button>\n              <button class=\"onboarding-skip\" id=\"onboardingSkipBtn\" data-translate=\"settings_onboarding_skip\">Skip for now</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n\n    document.body.insertAdjacentHTML('beforeend', modalHTML);\n    initializeAccentColors();\n    initializeEventListeners();\n    loadCurrentSettings();\n    updateAccessibilityScore();\n    checkOnboarding();\n    updateSyncStatus();\n    initTopbarToggle();\n  }\n\n  function initTopbarToggle() {\n    var toggles = document.querySelectorAll('[data-topbar-toggle]');\n    var topbar = document.getElementById('smartTopbar');\n    var isDismissed = sessionStorage.getItem('topbarDismissed') === '1';\n    toggles.forEach(function(t) { t.checked = !isDismissed; });\n    toggles.forEach(function(toggle) {\n      toggle.removeEventListener('change', toggle._topbarHandler);\n      toggle._topbarHandler = function() {\n        var checked = this.checked;\n        toggles = document.querySelectorAll('[data-topbar-toggle]');\n        toggles.forEach(function(t) { t.checked = checked; });\n        if (topbar) {\n          if (checked) {\n            sessionStorage.removeItem('topbarDismissed');\n            topbar.classList.remove('dismissed');\n            topbar.classList.remove('topbar--hidden');\n            var hdr = document.querySelector('.header');\n            if (hdr) hdr.classList.remove('topbar--gone');\n            window.scrollTo({ top: 0, behavior: 'smooth' });\n            document.documentElement.style.setProperty('--topbar-height', topbar.offsetHeight + 'px');\n          } else {\n            topbar.classList.add('dismissed');\n            sessionStorage.setItem('topbarDismissed', '1');\n            document.documentElement.style.setProperty('--topbar-height', '0px');\n            var hdr = document.querySelector('.header');\n            if (hdr) hdr.classList.add('topbar--gone');\n          }\n        }\n      };\n      toggle.addEventListener('change', toggle._topbarHandler);\n    });\n  }\n\n  function initializeAccentColors() {\n\n  // ==================== ACCENT COLORS ====================\n    const grid = document.getElementById('accentColorGrid');\n    if (!grid) return;\n\n    Object.entries(ACCENT_COLORS).forEach(([key, color]) => {\n      const option = document.createElement('div');\n      option.className = 'accent-color-option';\n      option.dataset.color = key;\n      option.style.backgroundColor = color.hex;\n      option.title = color.name;\n      grid.appendChild(option);\n    });\n  }\n\n  function initializeEventListeners() {\n\n  // ==================== EVENT LISTENERS ====================\n    const overlay = document.getElementById('settingsModalOverlay');\n    const closeBtn = document.getElementById('settingsCloseBtn');\n    const categoryBtns = document.querySelectorAll('.settings-category-btn');\n    const mobileTabs = document.querySelectorAll('.settings-mobile-tab');\n    const compareToggle = document.getElementById('compareToggle');\n    const resetBtn = document.getElementById('settingsResetBtn');\n    const onboardingStartBtn = document.getElementById('onboardingStartBtn');\n    const onboardingSkipBtn = document.getElementById('onboardingSkipBtn');\n\n    overlay?.addEventListener('click', (e) => {\n      if (e.target === overlay) closeSettingsModal();\n    });\n\n    closeBtn?.addEventListener('click', closeSettingsModal);\n\n    categoryBtns.forEach(btn => {\n      btn.addEventListener('click', () => switchCategory(btn.dataset.category));\n    });\n\n    mobileTabs.forEach(tab => {\n      tab.addEventListener('click', () => switchCategory(tab.dataset.category));\n    });\n\n    compareToggle?.addEventListener('click', toggleCompareMode);\n    resetBtn?.addEventListener('click', resetToDefaults);\n    onboardingStartBtn?.addEventListener('click', completeOnboarding);\n    onboardingSkipBtn?.addEventListener('click', completeOnboarding);\n\n    document.querySelectorAll('.theme-preset-card').forEach(card => {\n      card.addEventListener('click', () => applyPreset(card.dataset.preset));\n    });\n\n    document.querySelectorAll('.accent-color-option').forEach(option => {\n      option.addEventListener('click', () => selectAccentColor(option.dataset.color));\n    });\n\n    document.getElementById('settingsDarkMode')?.addEventListener('change', (e) => {\n      const theme = e.target.checked ? 'dark' : 'light';\n      setPreference(STORAGE_KEYS.theme, theme);\n      window.MindSpaceSettings?.applyTheme?.(theme);\n      clearActivePreset();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsHighContrast')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.highContrast, e.target.checked);\n      window.MindSpaceSettings?.applyHighContrast?.(e.target.checked);\n      updateAccessibilityScore();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsColorblind')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.colorblind, e.target.value);\n      window.MindSpaceSettings?.applyColorblind?.(e.target.value);\n      updateAccessibilityScore();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsAdhd')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.adhdMode, e.target.checked);\n      window.MindSpaceSettings?.applyAdhdMode?.(e.target.checked);\n      updateAccessibilityScore();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsDyslexia')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.dyslexiaFont, e.target.checked);\n      window.MindSpaceSettings?.applyDyslexiaFont?.(e.target.checked);\n      updateAccessibilityScore();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsReduceMotion')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.reduceMotion, e.target.checked);\n      window.MindSpaceSettings?.applyReduceMotion?.(e.target.checked);\n      updateAccessibilityScore();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsFontSize')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.fontSize, e.target.value);\n      window.MindSpaceSettings?.applyFontSize?.(e.target.value);\n      updateReadingPreview(e.target.value);\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsLanguage')?.addEventListener('change', (e) => {\n      const lang = e.target.value;\n      setPreference(STORAGE_KEYS.language, lang);\n\n\n      updateSyncStatus();\n    });\n\n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape') closeSettingsModal();\n    });\n  }\n\n  function loadCurrentSettings() {\n  // --- Load Settings ---\n    const darkMode = document.getElementById('settingsDarkMode');\n    const highContrast = document.getElementById('settingsHighContrast');\n    const colorblind = document.getElementById('settingsColorblind');\n    const adhd = document.getElementById('settingsAdhd');\n    const dyslexia = document.getElementById('settingsDyslexia');\n    const reduceMotion = document.getElementById('settingsReduceMotion');\n    const fontSize = document.getElementById('settingsFontSize');\n    const language = document.getElementById('settingsLanguage');\n\n    const theme = getPreference(STORAGE_KEYS.theme, 'light');\n    if (darkMode) darkMode.checked = theme === 'dark';\n\n    if (highContrast) highContrast.checked = getPreference(STORAGE_KEYS.highContrast, 'false') === 'true';\n    if (colorblind) colorblind.value = getPreference(STORAGE_KEYS.colorblind, 'none');\n    if (adhd) adhd.checked = getPreference(STORAGE_KEYS.adhdMode, 'false') === 'true';\n    if (dyslexia) dyslexia.checked = getPreference(STORAGE_KEYS.dyslexiaFont, 'false') === 'true';\n    if (reduceMotion) reduceMotion.checked = getPreference(STORAGE_KEYS.reduceMotion, 'false') === 'true';\n    if (fontSize) fontSize.value = getPreference(STORAGE_KEYS.fontSize, 'normal');\n    if (language) language.value = getPreference(STORAGE_KEYS.language, 'en');\n\n    const activeAccent = getPreference(STORAGE_KEYS.accentColor, 'blue');\n    document.querySelectorAll('.accent-color-option').forEach(option => {\n      option.classList.toggle('active', option.dataset.color === activeAccent);\n    });\n\n    const activePreset = getPreference(STORAGE_KEYS.activePreset, null);\n    if (activePreset) {\n      document.querySelectorAll('.theme-preset-card').forEach(card => {\n        card.classList.toggle('active', card.dataset.preset === activePreset);\n      });\n    }\n\n    updateReadingPreview(getPreference(STORAGE_KEYS.fontSize, 'normal'));\n  }\n\n  function switchCategory(category) {\n  // --- Category Switching ---\n    currentCategory = category;\n\n    document.querySelectorAll('.settings-category-btn').forEach(btn => {\n      btn.classList.toggle('active', btn.dataset.category === category);\n    });\n\n    document.querySelectorAll('.settings-mobile-tab').forEach(tab => {\n      tab.classList.toggle('active', tab.dataset.category === category);\n    });\n\n    document.querySelectorAll('.settings-panel').forEach(panel => {\n      panel.classList.remove('active');\n    });\n\n    const panelMap = {\n      appearance: 'panelAppearance',\n      accessibility: 'panelAccessibility',\n      reading: 'panelReading',\n      language: 'panelLanguage'\n    };\n\n    document.getElementById(panelMap[category])?.classList.add('active');\n\n    const titleMap = {\n      appearance: 'Appearance',\n      accessibility: 'Accessibility',\n      reading: 'Reading',\n      language: 'Language'\n    };\n\n    const titleEl = document.getElementById('settingsPanelTitle');\n    if (titleEl) titleEl.textContent = titleMap[category];\n  }\n\n  function applyPreset(presetKey) {\n  // --- Theme Presets ---\n    const preset = THEME_PRESETS[presetKey];\n    if (!preset) return;\n\n    setPreference(STORAGE_KEYS.theme, preset.theme);\n    setPreference(STORAGE_KEYS.accentColor, preset.accent);\n    setPreference(STORAGE_KEYS.fontSize, preset.fontSize);\n    setPreference(STORAGE_KEYS.highContrast, preset.highContrast);\n    setPreference(STORAGE_KEYS.activePreset, presetKey);\n\n    window.MindSpaceSettings?.applyTheme?.(preset.theme);\n    window.MindSpaceSettings?.applyAccentColor?.(preset.accent);\n    window.MindSpaceSettings?.applyFontSize?.(preset.fontSize);\n    window.MindSpaceSettings?.applyHighContrast?.(preset.highContrast);\n\n    document.querySelectorAll('.theme-preset-card').forEach(card => {\n      card.classList.toggle('active', card.dataset.preset === presetKey);\n    });\n\n    loadCurrentSettings();\n    updateSyncStatus();\n  }\n\n  function clearActivePreset() {\n    setPreference(STORAGE_KEYS.activePreset, '');\n    document.querySelectorAll('.theme-preset-card').forEach(card => {\n      card.classList.remove('active');\n    });\n  }\n\n  function selectAccentColor(colorKey) {\n  // --- Accent Colors ---\n    setPreference(STORAGE_KEYS.accentColor, colorKey);\n    window.MindSpaceSettings?.applyAccentColor?.(colorKey);\n\n    document.querySelectorAll('.accent-color-option').forEach(option => {\n      option.classList.toggle('active', option.dataset.color === colorKey);\n    });\n\n    clearActivePreset();\n    updateSyncStatus();\n  }\n\n  function toggleCompareMode() {\n  // --- Compare Mode ---\n    compareMode = !compareMode;\n    const toggle = document.getElementById('compareToggle');\n    toggle?.classList.toggle('active', compareMode);\n\n    if (compareMode) {\n      savedSettings = {\n        theme: getPreference(STORAGE_KEYS.theme, 'light'),\n        accent: getPreference(STORAGE_KEYS.accentColor, 'blue'),\n        fontSize: getPreference(STORAGE_KEYS.fontSize, 'normal'),\n        highContrast: getPreference(STORAGE_KEYS.highContrast, 'false'),\n        colorblind: getPreference(STORAGE_KEYS.colorblind, 'none'),\n        adhdMode: getPreference(STORAGE_KEYS.adhdMode, 'false'),\n        dyslexiaFont: getPreference(STORAGE_KEYS.dyslexiaFont, 'false'),\n        reduceMotion: getPreference(STORAGE_KEYS.reduceMotion, 'false')\n      };\n\n      window.MindSpaceSettings?.applyTheme?.('light');\n      window.MindSpaceSettings?.applyAccentColor?.('blue');\n      window.MindSpaceSettings?.applyFontSize?.('normal');\n      window.MindSpaceSettings?.applyHighContrast?.(false);\n      window.MindSpaceSettings?.applyColorblind?.('none');\n      window.MindSpaceSettings?.applyAdhdMode?.(false);\n      window.MindSpaceSettings?.applyDyslexiaFont?.(false);\n      window.MindSpaceSettings?.applyReduceMotion?.(false);\n    } else {\n      window.MindSpaceSettings?.applyTheme?.(savedSettings.theme);\n      window.MindSpaceSettings?.applyAccentColor?.(savedSettings.accent);\n      window.MindSpaceSettings?.applyFontSize?.(savedSettings.fontSize);\n      window.MindSpaceSettings?.applyHighContrast?.(savedSettings.highContrast === 'true');\n      window.MindSpaceSettings?.applyColorblind?.(savedSettings.colorblind);\n      window.MindSpaceSettings?.applyAdhdMode?.(savedSettings.adhdMode === 'true');\n      window.MindSpaceSettings?.applyDyslexiaFont?.(savedSettings.dyslexiaFont === 'true');\n      window.MindSpaceSettings?.applyReduceMotion?.(savedSettings.reduceMotion === 'true');\n    }\n  }\n\n  function resetToDefaults() {\n  // --- Reset ---\n    if (!confirm('Reset all settings to defaults? This cannot be undone.')) return;\n\n    Object.values(STORAGE_KEYS).forEach(key => {\n      if (key !== STORAGE_KEYS.onboardingComplete) {\n        localStorage.removeItem(key);\n      }\n    });\n    localStorage.removeItem('mindspace-language');\n\n    window.MindSpaceSettings?.applyTheme?.('light');\n    window.MindSpaceSettings?.applyAccentColor?.('blue');\n    window.MindSpaceSettings?.applyFontSize?.('normal');\n    window.MindSpaceSettings?.applyHighContrast?.(false);\n    window.MindSpaceSettings?.applyColorblind?.('none');\n    window.MindSpaceSettings?.applyAdhdMode?.(false);\n    window.MindSpaceSettings?.applyDyslexiaFont?.(false);\n    window.MindSpaceSettings?.applyReduceMotion?.(false);\n\n    if (typeof setLanguage === 'function') {\n      setLanguage('en');\n    } else if (window.MindSpaceTranslations?.setLanguage) {\n      window.MindSpaceTranslations.setLanguage('en');\n    }\n    document.querySelectorAll('.language-selector, #languageSelect').forEach(sel => {\n      sel.value = 'en';\n    });\n\n    loadCurrentSettings();\n    updateAccessibilityScore();\n    updateSyncStatus();\n  }\n\n  function updateReadingPreview(size) {\n    const preview = document.getElementById('readingPreviewText');\n    if (!preview) return;\n\n    const sizes = {\n      small: '13px',\n      normal: '15px',\n      large: '18px',\n      xlarge: '22px'\n    };\n\n    preview.style.fontSize = sizes[size] || '15px';\n  }\n\n  function checkOnboarding() {\n  // --- Onboarding ---\n    const onboardingComplete = getPreference(STORAGE_KEYS.onboardingComplete, 'false');\n    if (onboardingComplete !== 'true') {\n      document.getElementById('settingsOnboarding')?.classList.add('active');\n    }\n  }\n\n  function completeOnboarding() {\n    setPreference(STORAGE_KEYS.onboardingComplete, 'true');\n    document.getElementById('settingsOnboarding')?.classList.remove('active');\n  }\n\n  function updateSyncStatus() {\n  // --- Sync Status ---\n    const indicator = document.getElementById('syncIndicator');\n    if (!indicator) return;\n\n    indicator.classList.remove('syncing', 'offline');\n    indicator.innerHTML = '<ion-icon name=\"cloud-done-outline\"></ion-icon><span>Synced</span>';\n\n    indicator.classList.add('syncing');\n    indicator.innerHTML = '<ion-icon name=\"sync-outline\"></ion-icon><span>Syncing...</span>';\n\n    setTimeout(() => {\n      indicator.classList.remove('syncing');\n      indicator.innerHTML = '<ion-icon name=\"cloud-done-outline\"></ion-icon><span>Synced</span>';\n    }, 800);\n  }\n\n  function openSettingsModal() {\n\n  // ==================== MODAL OPEN/CLOSE ====================\n    document.getElementById('settingsModalOverlay')?.classList.add('active');\n    document.body.style.overflow = 'hidden';\n    loadCurrentSettings();\n    updateAccessibilityScore();\n\n\n    if (window.MindSpaceTranslations?.applyTranslations) {\n      const modal = document.getElementById('settingsModalOverlay');\n      if (modal) {\n        window.MindSpaceTranslations.applyTranslations(modal);\n      }\n    }\n  }\n\n  function closeSettingsModal() {\n    document.getElementById('settingsModalOverlay')?.classList.remove('active');\n    document.body.style.overflow = '';\n\n    if (compareMode) {\n      toggleCompareMode();\n    }\n  }\n\n  function init() {\n\n  // ==================== INITIALIZATION ====================\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', createSettingsModal);\n    } else {\n      createSettingsModal();\n    }\n  }\n\n  window.SettingsModal = {\n    open: openSettingsModal,\n    close: closeSettingsModal\n  };\n\n  window.openSettingsModal = openSettingsModal;\n  window.closeSettingsModal = closeSettingsModal;\n\n  init();\n})();\n","path":null,"size_bytes":40884,"size_tokens":null},"js/wellness-checkin.js":{"content":"// ==================== WELLNESS CHECK-IN ====================\n\n(function() {\n  'use strict';\n\n  // --- Mood Data ---\n  const moodData = {\n    happy: {\n      emoji: 'ðŸ˜Š',\n      color: '#10b981',\n      colorDark: '#059669',\n      affirmation: \"That's wonderful! Your positive energy is contagious.\",\n      tipTitle: \"Maintain Your Glow\",\n      tip: \"Channel this positive energy into something meaningful. Consider reaching out to a friend, journaling what's making you happy, or starting a project you've been putting off.\",\n      actions: [\n        { text: \"Share gratitude\", href: \"/community/\", icon: \"ðŸ’\", primary: true },\n        { text: \"Read uplifting stories\", href: \"/articles/\", icon: \"ðŸ“–\", primary: false }\n      ]\n    },\n    calm: {\n      emoji: 'ðŸ˜Œ',\n      color: '#06b6d4',\n      colorDark: '#0891b2',\n      affirmation: \"Peace is a beautiful state. Cherish this moment.\",\n      tipTitle: \"Deepen Your Calm\",\n      tip: \"This is the perfect time for mindful activities. Try a short meditation, gentle stretching, or simply sit with a warm drink and appreciate the stillness.\",\n      actions: [\n        { text: \"Try meditation\", href: \"/support/#breathing\", icon: \"ðŸ§˜\", primary: true },\n        { text: \"Calming sounds\", href: \"/resourcelib/\", icon: \"ðŸŽµ\", primary: false }\n      ]\n    },\n    okay: {\n      emoji: 'ðŸ˜',\n      color: '#f59e0b',\n      colorDark: '#d97706',\n      affirmation: \"Neutral days are perfectly valid. You're doing fine.\",\n      tipTitle: \"Add a Spark\",\n      tip: \"Sometimes we need a small boost. Try stepping outside for fresh air, listening to upbeat music, or doing one small thing that usually brings you joy.\",\n      actions: [\n        { text: \"Quick mood boost\", href: \"/support/#grounding\", icon: \"âœ¨\", primary: true },\n        { text: \"Browse resources\", href: \"/resourcelib/\", icon: \"ðŸ“š\", primary: false }\n      ]\n    },\n    anxious: {\n      emoji: 'ðŸ˜°',\n      color: '#8b5cf6',\n      colorDark: '#7c3aed',\n      affirmation: \"Your feelings are valid. Let's work through this together.\",\n      tipTitle: \"Grounding Exercise\",\n      tip: \"Try the 5-4-3-2-1 technique: Name 5 things you see, 4 you can touch, 3 you hear, 2 you smell, and 1 you taste. This helps bring you back to the present moment.\",\n      actions: [\n        { text: \"Breathing exercise\", href: \"/support/#breathing\", icon: \"ðŸŒ¬ï¸\", primary: true },\n        { text: \"Talk to someone\", href: \"/support/#crisis\", icon: \"ðŸ’¬\", primary: false }\n      ]\n    },\n    sad: {\n      emoji: 'ðŸ˜¢',\n      color: '#3b82f6',\n      colorDark: '#2563eb',\n      affirmation: \"It's okay to feel sad. Every emotion has its place.\",\n      tipTitle: \"Gentle Care\",\n      tip: \"Be gentle with yourself today. Sadness often carries important messages. Consider writing down your thoughts, talking to someone you trust, or simply allowing yourself to rest.\",\n      actions: [\n        { text: \"Journaling prompts\", href: \"/support/#journaling\", icon: \"ðŸ“\", primary: true },\n        { text: \"Read recovery stories\", href: \"/articles/recovery-stories.html\", icon: \"ðŸ’š\", primary: false }\n      ]\n    },\n    stressed: {\n      emoji: 'ðŸ˜¤',\n      color: '#ef4444',\n      colorDark: '#dc2626',\n      affirmation: \"Stress is temporary. You have the strength to get through this.\",\n      tipTitle: \"Release the Tension\",\n      tip: \"Take a deep breath. In for 4 counts, hold for 4, out for 6. Physical movement can help too â€” even a 2-minute stretch or walk can release built-up tension.\",\n      actions: [\n        { text: \"2-min breathing\", href: \"/support/#breathing\", icon: \"ðŸ§˜\", primary: true },\n        { text: \"Stress resources\", href: \"/resourcelib/?category=stress\", icon: \"ðŸ“–\", primary: false }\n      ]\n    }\n  };\n\n  // --- Daily Tips ---\n  const dailyTips = {\n    0: { icon: \"ðŸŒ…\", title: \"Restful Sunday\", text: \"Sundays are for recharging. Take time today to do something that truly relaxes you, whether it's reading, nature walks, or simply doing nothing at all.\" },\n    1: { icon: \"ðŸ§˜\", title: \"Mindful Monday\", text: \"Start your week with intention. Try a 2-minute breathing exercise before your first task: inhale for 4 counts, hold for 4, exhale for 6.\" },\n    2: { icon: \"ðŸ’ª\", title: \"Strength Tuesday\", text: \"You've made it through Monday! Celebrate small wins today. Write down three things you accomplished, no matter how small.\" },\n    3: { icon: \"ðŸŒ¿\", title: \"Wellness Wednesday\", text: \"Midweek check-in: How's your water intake? Aim for 8 glasses. Staying hydrated directly impacts your mood and mental clarity.\" },\n    4: { icon: \"ðŸ™\", title: \"Thankful Thursday\", text: \"Gratitude rewires your brain for positivity. Name three things you're grateful for right now â€” they can be as simple as morning coffee.\" },\n    5: { icon: \"ðŸŽ‰\", title: \"Feel-Good Friday\", text: \"You've almost made it through the week! Plan something small to look forward to this weekend, even if it's just extra sleep.\" },\n    6: { icon: \"âœ¨\", title: \"Self-Care Saturday\", text: \"Weekends are for recovery. Do one thing today purely for your own enjoyment â€” no productivity guilt allowed!\" }\n  };\n\n  // --- Time Greeting ---\n  function getTimeGreeting() {\n    const hour = new Date().getHours();\n    if (hour >= 5 && hour < 12) {\n      return { text: \"Good morning\", icon: \"ðŸŒ…\" };\n    } else if (hour >= 12 && hour < 17) {\n      return { text: \"Good afternoon\", icon: \"â˜€ï¸\" };\n    } else if (hour >= 17 && hour < 21) {\n      return { text: \"Good evening\", icon: \"ðŸŒ†\" };\n    } else {\n      return { text: \"Good night\", icon: \"ðŸŒ™\" };\n    }\n  }\n\n  // --- Streak Management ---\n  function getStreak() {\n    const streakData = localStorage.getItem('wellnessStreak');\n    if (!streakData) return { count: 0, lastDate: null };\n    \n    try {\n      const data = JSON.parse(streakData);\n      const today = new Date().toDateString();\n      const lastDate = new Date(data.lastDate).toDateString();\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\n      \n      if (lastDate === today) {\n        return data;\n      } else if (lastDate === yesterday) {\n        return { count: data.count, lastDate: data.lastDate };\n      } else {\n        return { count: 0, lastDate: null };\n      }\n    } catch (e) {\n      return { count: 0, lastDate: null };\n    }\n  }\n\n  function updateStreak() {\n    const streak = getStreak();\n    const today = new Date().toDateString();\n    const lastDate = streak.lastDate ? new Date(streak.lastDate).toDateString() : null;\n    \n    if (lastDate === today) {\n      return streak.count;\n    }\n    \n    const newCount = lastDate === new Date(Date.now() - 86400000).toDateString() \n      ? streak.count + 1 \n      : 1;\n    \n    localStorage.setItem('wellnessStreak', JSON.stringify({\n      count: newCount,\n      lastDate: new Date().toISOString()\n    }));\n    \n    return newCount;\n  }\n\n  // --- Community Moods ---\n  function getCommunityMoods() {\n    const stored = sessionStorage.getItem('communityMoods');\n    if (stored) {\n      return JSON.parse(stored);\n    }\n    \n    const moods = {\n      happy: 28 + Math.floor(Math.random() * 10),\n      calm: 22 + Math.floor(Math.random() * 8),\n      okay: 20 + Math.floor(Math.random() * 10),\n      anxious: 12 + Math.floor(Math.random() * 5),\n      sad: 8 + Math.floor(Math.random() * 4),\n      stressed: 10 + Math.floor(Math.random() * 5)\n    };\n    \n    sessionStorage.setItem('communityMoods', JSON.stringify(moods));\n    return moods;\n  }\n\n  // --- Motion Preferences ---\n  function prefersReducedMotion() {\n    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n  }\n\n  // --- Visual Effects ---\n  function createConfetti(container) {\n    if (prefersReducedMotion()) return;\n    \n    const colors = ['#10b981', '#06b6d4', '#f59e0b', '#ec4899', '#8b5cf6'];\n    const confettiCount = 50;\n    \n    for (let i = 0; i < confettiCount; i++) {\n      const confetti = document.createElement('div');\n      confetti.style.cssText = `\n        position: absolute;\n        width: ${Math.random() * 10 + 5}px;\n        height: ${Math.random() * 10 + 5}px;\n        background: ${colors[Math.floor(Math.random() * colors.length)]};\n        left: ${Math.random() * 100}%;\n        top: -10px;\n        opacity: ${Math.random() * 0.7 + 0.3};\n        border-radius: ${Math.random() > 0.5 ? '50%' : '0'};\n        animation: confetti-fall ${Math.random() * 2 + 2}s ease-out forwards;\n      `;\n      container.appendChild(confetti);\n      \n      setTimeout(() => confetti.remove(), 3000);\n    }\n    \n    if (!document.getElementById('confetti-styles')) {\n      const style = document.createElement('style');\n      style.id = 'confetti-styles';\n      style.textContent = `\n        @keyframes confetti-fall {\n          0% { transform: translateY(0) rotate(0deg); opacity: 1; }\n          100% { transform: translateY(400px) rotate(720deg); opacity: 0; }\n        }\n      `;\n      document.head.appendChild(style);\n    }\n  }\n\n  function createRipple(container, x, y) {\n    const ripple = document.createElement('div');\n    ripple.className = 'wellness-checkin__ripple';\n    ripple.style.cssText = `\n      left: ${x}px;\n      top: ${y}px;\n      width: 100px;\n      height: 100px;\n    `;\n    container.appendChild(ripple);\n    \n    setTimeout(() => ripple.remove(), 1000);\n  }\n\n  // --- Haptic Feedback ---\n  function hapticFeedback(type = 'light') {\n    if ('vibrate' in navigator) {\n      const patterns = {\n        light: [10],\n        medium: [20],\n        heavy: [30, 10, 30]\n      };\n      navigator.vibrate(patterns[type] || patterns.light);\n    }\n  }\n\n  // --- Initialization ---\n  function init() {\n    const section = document.querySelector('.wellness-checkin');\n    if (!section) return;\n\n    const container = section.querySelector('.wellness-checkin__container');\n    const greetingEl = section.querySelector('.wellness-checkin__time-greeting');\n    const streakEl = section.querySelector('.wellness-checkin__streak');\n    const moodButtons = section.querySelectorAll('.wellness-checkin__mood-btn');\n    const responseEl = section.querySelector('.wellness-checkin__response');\n    const defaultTipEl = section.querySelector('.wellness-checkin__default-tip');\n    const communityBar = section.querySelector('.wellness-checkin__community-bar');\n    const confettiCanvas = section.querySelector('.wellness-checkin__confetti');\n\n    // --- Greeting Setup ---\n    if (greetingEl) {\n      const greeting = getTimeGreeting();\n      const iconSpan = greetingEl.querySelector('.wellness-checkin__time-icon');\n      const textSpan = greetingEl.querySelector('span:not(.wellness-checkin__time-icon)');\n      if (iconSpan) iconSpan.textContent = greeting.icon;\n      if (textSpan) textSpan.textContent = greeting.text;\n    }\n\n    // --- Streak Setup ---\n    const streak = getStreak();\n    if (streakEl) {\n      if (streak.count > 0) {\n        streakEl.querySelector('.wellness-checkin__streak-count').textContent = streak.count;\n        streakEl.style.display = 'inline-flex';\n      } else {\n        streakEl.style.display = 'none';\n      }\n    }\n\n    // --- Daily Tip Setup ---\n    if (defaultTipEl) {\n      const today = new Date().getDay();\n      const tip = dailyTips[today];\n      const iconEl = defaultTipEl.querySelector('.wellness-checkin__default-tip-icon');\n      const titleEl = defaultTipEl.querySelector('.wellness-checkin__default-tip-title');\n      const textEl = defaultTipEl.querySelector('.wellness-checkin__default-tip-text');\n      \n      if (iconEl) iconEl.textContent = tip.icon;\n      if (titleEl) titleEl.textContent = tip.title;\n      if (textEl) textEl.textContent = tip.text;\n    }\n\n    // --- Community Mood Bar ---\n    if (communityBar) {\n      const moods = getCommunityMoods();\n      const total = Object.values(moods).reduce((a, b) => a + b, 0);\n      \n      Object.entries(moods).forEach(([mood, count]) => {\n        const segment = communityBar.querySelector(`[data-mood=\"${mood}\"]`);\n        if (segment) {\n          segment.style.width = `${(count / total) * 100}%`;\n        }\n      });\n\n      const legend = section.querySelector('.wellness-checkin__community-legend');\n      if (legend) {\n        Object.entries(moods).forEach(([mood, count]) => {\n          const item = legend.querySelector(`[data-mood=\"${mood}\"] .wellness-checkin__legend-percent`);\n          if (item) {\n            item.textContent = `${Math.round((count / total) * 100)}%`;\n          }\n        });\n      }\n    }\n\n    // --- Mood Button Handlers ---\n    moodButtons.forEach(btn => {\n      btn.addEventListener('click', () => {\n        const mood = btn.dataset.mood;\n        const data = moodData[mood];\n        if (!data) return;\n\n        hapticFeedback('medium');\n\n        moodButtons.forEach(b => b.classList.remove('is-selected'));\n        btn.classList.add('is-selected');\n\n        const newStreak = updateStreak();\n        if (streakEl) {\n          streakEl.querySelector('.wellness-checkin__streak-count').textContent = newStreak;\n          streakEl.style.display = 'inline-flex';\n        }\n\n        if (confettiCanvas && (mood === 'happy' || mood === 'calm')) {\n          createConfetti(confettiCanvas);\n        }\n\n        if (mood === 'anxious' || mood === 'stressed') {\n          const rect = container.getBoundingClientRect();\n          const x = btn.getBoundingClientRect().left - rect.left + btn.offsetWidth / 2;\n          const y = btn.getBoundingClientRect().top - rect.top + btn.offsetHeight / 2;\n          createRipple(container, x, y);\n        }\n\n        if (defaultTipEl) defaultTipEl.style.display = 'none';\n        \n        if (responseEl) {\n          const affirmationEl = responseEl.querySelector('.wellness-checkin__affirmation');\n          const tipTitleEl = responseEl.querySelector('.wellness-checkin__tip-title');\n          const tipTextEl = responseEl.querySelector('.wellness-checkin__tip-text');\n          const tipCard = responseEl.querySelector('.wellness-checkin__tip');\n          const actionsEl = responseEl.querySelector('.wellness-checkin__actions');\n\n          if (affirmationEl) {\n            affirmationEl.innerHTML = `<span>${data.emoji}</span> ${data.affirmation}`;\n          }\n          if (tipTitleEl) tipTitleEl.textContent = data.tipTitle;\n          if (tipTextEl) tipTextEl.textContent = data.tip;\n          if (tipCard) tipCard.style.borderLeftColor = data.color;\n\n          if (actionsEl) {\n            actionsEl.innerHTML = data.actions.map(action => `\n              <a href=\"${action.href}\" class=\"wellness-checkin__action-btn wellness-checkin__action-btn--${action.primary ? 'primary' : 'secondary'}\">\n                <span>${action.icon}</span>\n                ${action.text}\n              </a>\n            `).join('');\n          }\n\n          responseEl.style.setProperty('--mood-accent', data.color);\n          responseEl.style.setProperty('--mood-accent-dark', data.colorDark);\n\n          responseEl.classList.add('is-visible');\n        }\n\n        section.style.setProperty('--selected-mood-color', data.color);\n      });\n    });\n\n    console.log('[Wellness Check-In] Initialized');\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n})();\n","path":null,"size_bytes":15196,"size_tokens":null},"mindspace-build/js/analytics.js":{"content":"// ==================== ANALYTICS ====================\n\nconst MBAnalytics = (function() {\n  'use strict';\n\n  // --- State ---\n  let supabaseClient = null;\n  let currentUser = null;\n  let sessionId = null;\n  let pageLoadTime = Date.now();\n  let scrollDepth = 0;\n  let readingStartTime = null;\n  let isTracking = false;\n\n  // --- Supabase Client ---\n  function getSupabase() {\n    if (!supabaseClient && typeof supabase !== 'undefined') {\n      const SUPABASE_URL = \"https://cxjqessxarjayqxvhnhs.supabase.co\";\n      const SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4anFlc3N4YXJqYXlxeHZobmhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwMjQwOTEsImV4cCI6MjA4MzYwMDA5MX0.SUI4sPOSPxDiGwqwQr19UOKtbK7KmjMqkX6HUT6-yps\";\n      supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n    }\n    return supabaseClient;\n  }\n\n  // --- Session Management ---\n  function generateSessionId() {\n    return 'sess_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n  }\n\n  function getOrCreateSessionId() {\n    let sid = sessionStorage.getItem('mb_session_id');\n    if (!sid) {\n      sid = generateSessionId();\n      sessionStorage.setItem('mb_session_id', sid);\n    }\n    return sid;\n  }\n\n  // --- Initialization ---\n  async function init() {\n    sessionId = getOrCreateSessionId();\n    const sb = getSupabase();\n    if (sb) {\n      const { data } = await sb.auth.getSession();\n      currentUser = data?.session?.user || null;\n      \n      sb.auth.onAuthStateChange((event, session) => {\n        currentUser = session?.user || null;\n      });\n    }\n    \n    setupScrollTracking();\n    setupVisibilityTracking();\n    isTracking = true;\n    \n    trackPageView();\n  }\n\n  // --- Scroll Tracking ---\n  function setupScrollTracking() {\n    let ticking = false;\n    window.addEventListener('scroll', () => {\n      if (!ticking) {\n        window.requestAnimationFrame(() => {\n          const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n          if (docHeight > 0) {\n            const currentScroll = window.scrollY;\n            const newDepth = Math.round((currentScroll / docHeight) * 100);\n            if (newDepth > scrollDepth) {\n              scrollDepth = newDepth;\n            }\n          }\n          ticking = false;\n        });\n        ticking = true;\n      }\n    }, { passive: true });\n  }\n\n  // --- Visibility Tracking ---\n  function setupVisibilityTracking() {\n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden) {\n        saveReadingProgress();\n      } else {\n        readingStartTime = Date.now();\n      }\n    });\n\n    window.addEventListener('beforeunload', () => {\n      saveReadingProgress();\n      trackPageExit();\n    });\n  }\n\n  // --- Page Tracking ---\n  async function trackPageView() {\n    const pageData = {\n      page_url: window.location.pathname,\n      page_title: document.title,\n      referrer: document.referrer || null,\n      timestamp: new Date().toISOString()\n    };\n\n    await logActivity('page_view', pageData);\n    readingStartTime = Date.now();\n  }\n\n  async function trackPageExit() {\n    const timeSpent = Math.round((Date.now() - pageLoadTime) / 1000);\n    \n    await logActivity('page_exit', {\n      page_url: window.location.pathname,\n      time_spent_seconds: timeSpent,\n      scroll_depth: scrollDepth\n    });\n  }\n\n  // --- Activity Logging ---\n  async function logActivity(actionType, metadata = {}) {\n    if (!currentUser) return;\n\n    const sb = getSupabase();\n    if (!sb) return;\n\n    try {\n      await sb.from('user_activity_logs').insert({\n        user_id: currentUser.id,\n        activity_type: actionType,\n        page_url: window.location.pathname,\n        activity_data: metadata\n      });\n    } catch (err) {\n      console.warn('Analytics log failed:', err);\n    }\n  }\n\n  // --- Article Tracking ---\n  async function trackArticleRead(articleId, articleTitle) {\n    if (!currentUser) return;\n\n    await logActivity('article_read', {\n      article_id: articleId,\n      article_title: articleTitle\n    });\n\n    await updateReadingProgress(articleId, 0, 0);\n    await checkAchievements('article_read');\n  }\n\n  async function trackArticleComplete(articleId) {\n    if (!currentUser) return;\n\n    const timeSpent = readingStartTime ? Math.round((Date.now() - readingStartTime) / 1000) : 0;\n\n    await logActivity('article_complete', {\n      article_id: articleId,\n      time_spent_seconds: timeSpent,\n      scroll_depth: scrollDepth\n    });\n\n    await updateReadingProgress(articleId, 100, timeSpent);\n    await checkAchievements('article_complete');\n  }\n\n  // --- Reading Progress ---\n  async function updateReadingProgress(articleSlug, progress, timeSpent) {\n    if (!currentUser) return;\n\n    const sb = getSupabase();\n    if (!sb) return;\n\n    try {\n      const { data: existing } = await sb\n        .from('reading_progress')\n        .select('*')\n        .eq('user_id', currentUser.id)\n        .eq('article_slug', articleSlug)\n        .single();\n\n      if (existing) {\n        if (progress > existing.scroll_depth || timeSpent > existing.time_spent_seconds) {\n          await sb.from('reading_progress').update({\n            scroll_depth: Math.max(progress, existing.scroll_depth),\n            time_spent_seconds: Math.max(timeSpent, existing.time_spent_seconds),\n            last_read_at: new Date().toISOString(),\n            completed: progress >= 90\n          }).eq('id', existing.id);\n        }\n      } else {\n        await sb.from('reading_progress').insert({\n          user_id: currentUser.id,\n          article_slug: articleSlug,\n          scroll_depth: progress,\n          time_spent_seconds: timeSpent,\n          completed: progress >= 90\n        });\n      }\n    } catch (err) {\n      console.warn('Reading progress update failed:', err);\n    }\n  }\n\n  async function saveReadingProgress() {\n    const articleId = document.body.dataset.articleId;\n    if (!articleId || !currentUser) return;\n\n    const timeSpent = readingStartTime ? Math.round((Date.now() - readingStartTime) / 1000) : 0;\n    await updateReadingProgress(articleId, scrollDepth, timeSpent);\n  }\n\n  // --- Content Tracking ---\n  async function trackResourceView(resourceId, resourceTitle) {\n    await logActivity('resource_view', {\n      resource_id: resourceId,\n      resource_title: resourceTitle\n    });\n  }\n\n  async function trackSearch(query, resultsCount) {\n    await logActivity('search', {\n      query: query,\n      results_count: resultsCount\n    });\n  }\n\n  async function trackShare(contentType, contentId, platform) {\n    await logActivity('share', {\n      content_type: contentType,\n      content_id: contentId,\n      platform: platform\n    });\n  }\n\n  // --- Wellness Tracking ---\n  async function trackMoodEntry(mood, notes) {\n    await logActivity('mood_entry', {\n      mood: mood,\n      has_notes: !!notes\n    });\n    await checkAchievements('mood_entry');\n  }\n\n  async function trackGoalProgress(goalId, progress) {\n    await logActivity('goal_progress', {\n      goal_id: goalId,\n      progress: progress\n    });\n    if (progress >= 100) {\n      await checkAchievements('goal_complete');\n    }\n  }\n\n  // --- Community Tracking ---\n  async function trackCommunityAction(actionType, postId) {\n    await logActivity('community_' + actionType, {\n      post_id: postId\n    });\n    await checkAchievements('community_' + actionType);\n  }\n\n  // ==================== ACHIEVEMENTS ====================\n\n  const ACHIEVEMENTS = [\n    { id: 'first_article', name: 'First Steps', description: 'Read your first article', icon: 'book-outline', condition: { action: 'article_read', count: 1 } },\n    { id: 'bookworm', name: 'Bookworm', description: 'Read 10 articles', icon: 'library-outline', condition: { action: 'article_read', count: 10 } },\n    { id: 'scholar', name: 'Scholar', description: 'Read 25 articles', icon: 'school-outline', condition: { action: 'article_read', count: 25 } },\n    { id: 'first_post', name: 'Voice Heard', description: 'Create your first community post', icon: 'chatbubble-outline', condition: { action: 'community_post', count: 1 } },\n    { id: 'contributor', name: 'Contributor', description: 'Make 10 community posts', icon: 'chatbubbles-outline', condition: { action: 'community_post', count: 10 } },\n    { id: 'first_comment', name: 'Engaged', description: 'Leave your first comment', icon: 'chatbox-outline', condition: { action: 'community_comment', count: 1 } },\n    { id: 'streak_7', name: 'Week Warrior', description: 'Maintain a 7-day streak', icon: 'flame-outline', condition: { action: 'streak', count: 7 } },\n    { id: 'streak_30', name: 'Monthly Master', description: 'Maintain a 30-day streak', icon: 'flame', condition: { action: 'streak', count: 30 } },\n    { id: 'mood_tracker', name: 'Self Aware', description: 'Log your mood 7 times', icon: 'happy-outline', condition: { action: 'mood_entry', count: 7 } },\n    { id: 'goal_setter', name: 'Goal Setter', description: 'Complete your first goal', icon: 'flag-outline', condition: { action: 'goal_complete', count: 1 } },\n    { id: 'achiever', name: 'Achiever', description: 'Complete 5 goals', icon: 'trophy-outline', condition: { action: 'goal_complete', count: 5 } },\n    { id: 'explorer', name: 'Explorer', description: 'View 20 different resources', icon: 'compass-outline', condition: { action: 'resource_view', count: 20 } },\n    { id: 'social_butterfly', name: 'Social Butterfly', description: 'Follow 10 users', icon: 'people-outline', condition: { action: 'follow', count: 10 } },\n    { id: 'early_adopter', name: 'Early Adopter', description: 'Join MindSpace community', icon: 'rocket-outline', condition: { action: 'signup', count: 1 } },\n    { id: 'completionist', name: 'Completionist', description: 'Complete 10 articles 100%', icon: 'checkmark-done-outline', condition: { action: 'article_complete', count: 10 } }\n  ];\n\n  // --- Achievement Checks ---\n  async function checkAchievements(actionType) {\n    if (!currentUser) return;\n\n    const sb = getSupabase();\n    if (!sb) return;\n\n    try {\n      const { data: existingAchievements } = await sb\n        .from('user_achievements')\n        .select('achievement_id')\n        .eq('user_id', currentUser.id);\n\n      const earnedIds = (existingAchievements || []).map(a => a.achievement_id);\n\n      const { count: actionCount } = await sb\n        .from('user_activity_logs')\n        .select('*', { count: 'exact', head: true })\n        .eq('user_id', currentUser.id)\n        .eq('activity_type', actionType);\n\n      for (const achievement of ACHIEVEMENTS) {\n        if (earnedIds.includes(achievement.id)) continue;\n        if (achievement.condition.action !== actionType) continue;\n        \n        if (actionCount >= achievement.condition.count) {\n          await unlockAchievement(achievement);\n        }\n      }\n    } catch (err) {\n      console.warn('Achievement check failed:', err);\n    }\n  }\n\n  // --- Achievement Unlock ---\n  async function unlockAchievement(achievement) {\n    if (!currentUser) return;\n\n    const sb = getSupabase();\n    if (!sb) return;\n\n    try {\n      await sb.from('user_achievements').insert({\n        user_id: currentUser.id,\n        achievement_id: achievement.id,\n        achievement_name: achievement.name,\n        achievement_description: achievement.description,\n        achievement_icon: achievement.icon,\n        unlocked_at: new Date().toISOString()\n      });\n\n      try {\n        await sb.from('notifications').insert({\n          user_id: currentUser.id,\n          type: 'achievement',\n          from_user_name: achievement.name,\n          content: achievement.description,\n          read: false\n        });\n      } catch (notifErr) {\n        console.warn('Failed to create achievement notification:', notifErr);\n      }\n\n      if (typeof window.loadGlobalNotificationCount === 'function') {\n        window.loadGlobalNotificationCount();\n      }\n\n      showAchievementNotification(achievement);\n    } catch (err) {\n      console.warn('Achievement unlock failed:', err);\n    }\n  }\n\n  // --- Achievement Notification ---\n  const achievementQueue = [];\n  let isShowingAchievement = false;\n\n  function showAchievementNotification(achievement) {\n    achievementQueue.push(achievement);\n    if (!isShowingAchievement) {\n      processAchievementQueue();\n    }\n  }\n\n  function processAchievementQueue() {\n    if (achievementQueue.length === 0) {\n      isShowingAchievement = false;\n      return;\n    }\n    isShowingAchievement = true;\n    const achievement = achievementQueue.shift();\n\n    document.querySelectorAll('.mb-achievement-notification').forEach(el => el.remove());\n\n    const notification = document.createElement('div');\n    notification.className = 'mb-achievement-notification';\n    notification.innerHTML = `\n      <div class=\"mb-achievement-notification__icon\">\n        <ion-icon name=\"${achievement.icon}\"></ion-icon>\n      </div>\n      <div class=\"mb-achievement-notification__content\">\n        <span class=\"mb-achievement-notification__label\">Achievement Unlocked!</span>\n        <span class=\"mb-achievement-notification__name\">${achievement.name}</span>\n        <span class=\"mb-achievement-notification__desc\">${achievement.description}</span>\n      </div>\n    `;\n\n    document.body.appendChild(notification);\n\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        notification.classList.add('show');\n      });\n    });\n\n    setTimeout(() => {\n      notification.classList.remove('show');\n      setTimeout(() => {\n        notification.remove();\n        processAchievementQueue();\n      }, 600);\n    }, 5000);\n  }\n\n  // ==================== STATS & DATA RETRIEVAL ====================\n\n  async function getActivityStats(userId, days = 30) {\n    const sb = getSupabase();\n    if (!sb) return null;\n\n    const startDate = new Date();\n    startDate.setDate(startDate.getDate() - days);\n\n    try {\n      const { data } = await sb\n        .from('user_activity_logs')\n        .select('activity_type, created_at')\n        .eq('user_id', userId)\n        .gte('created_at', startDate.toISOString())\n        .order('created_at', { ascending: true });\n\n      return processActivityData(data || [], days);\n    } catch (err) {\n      console.warn('Failed to get activity stats:', err);\n      return null;\n    }\n  }\n\n  function processActivityData(activities, days) {\n    const dailyCounts = {};\n    const typeCounts = {};\n    const now = new Date();\n\n    for (let i = 0; i < days; i++) {\n      const date = new Date(now);\n      date.setDate(date.getDate() - i);\n      const key = date.toISOString().split('T')[0];\n      dailyCounts[key] = 0;\n    }\n\n    activities.forEach(activity => {\n      const date = activity.created_at.split('T')[0];\n      if (dailyCounts.hasOwnProperty(date)) {\n        dailyCounts[date]++;\n      }\n      typeCounts[activity.activity_type] = (typeCounts[activity.activity_type] || 0) + 1;\n    });\n\n    return {\n      dailyCounts,\n      typeCounts,\n      totalActivities: activities.length\n    };\n  }\n\n  // --- Reading Stats ---\n  async function getReadingStats(userId) {\n    const sb = getSupabase();\n    if (!sb) return null;\n\n    try {\n      const { data } = await sb\n        .from('reading_progress')\n        .select('*')\n        .eq('user_id', userId);\n\n      const articles = data || [];\n      const completed = articles.filter(a => a.completed).length;\n      const totalTime = articles.reduce((sum, a) => sum + (a.time_spent_seconds || 0), 0);\n      const avgProgress = articles.length > 0 \n        ? Math.round(articles.reduce((sum, a) => sum + (a.scroll_depth || 0), 0) / articles.length) \n        : 0;\n\n      return {\n        articlesStarted: articles.length,\n        articlesCompleted: completed,\n        totalReadingTime: totalTime,\n        averageProgress: avgProgress\n      };\n    } catch (err) {\n      console.warn('Failed to get reading stats:', err);\n      return null;\n    }\n  }\n\n  // --- Achievements Data ---\n  async function getAchievements(userId) {\n    const sb = getSupabase();\n    if (!sb) return { earned: [], available: ACHIEVEMENTS };\n\n    try {\n      const [userAchievementsResult, allAchievementsResult] = await Promise.all([\n        sb.from('user_achievements')\n          .select('*')\n          .eq('user_id', userId)\n          .order('unlocked_at', { ascending: false }),\n        sb.from('achievements')\n          .select('*')\n      ]);\n\n      const userAchievements = userAchievementsResult.data || [];\n      const dbAchievements = allAchievementsResult.data || [];\n      \n      const dbAchievementMap = {};\n      dbAchievements.forEach(a => {\n        dbAchievementMap[a.id] = a;\n      });\n\n      const earnedIds = userAchievements.map(a => a.achievement_id);\n      \n      const earned = userAchievements.map(userAchievement => {\n        const dbInfo = dbAchievementMap[userAchievement.achievement_id];\n        const jsInfo = ACHIEVEMENTS.find(a => a.id === userAchievement.achievement_id);\n        return {\n          ...userAchievement,\n          name: dbInfo?.name || jsInfo?.name || userAchievement.achievement_name || 'Achievement',\n          description: dbInfo?.description || jsInfo?.description || userAchievement.achievement_description || '',\n          icon: dbInfo?.icon || jsInfo?.icon || userAchievement.achievement_icon || 'trophy-outline'\n        };\n      });\n\n      const allAvailableIds = new Set([\n        ...ACHIEVEMENTS.map(a => a.id),\n        ...dbAchievements.map(a => a.id)\n      ]);\n      \n      const available = [];\n      allAvailableIds.forEach(id => {\n        if (!earnedIds.includes(id)) {\n          const dbInfo = dbAchievementMap[id];\n          const jsInfo = ACHIEVEMENTS.find(a => a.id === id);\n          if (dbInfo || jsInfo) {\n            available.push({\n              id,\n              name: dbInfo?.name || jsInfo?.name || 'Achievement',\n              description: dbInfo?.description || jsInfo?.description || '',\n              icon: dbInfo?.icon || jsInfo?.icon || 'trophy-outline'\n            });\n          }\n        }\n      });\n\n      return {\n        earned,\n        available\n      };\n    } catch (err) {\n      console.warn('Failed to get achievements:', err);\n      return { earned: [], available: ACHIEVEMENTS };\n    }\n  }\n\n  // --- Streak Data ---\n  async function getStreakData(userId, days = 365) {\n    const sb = getSupabase();\n    if (!sb) return null;\n\n    const startDate = new Date();\n    startDate.setDate(startDate.getDate() - days);\n\n    try {\n      const { data } = await sb\n        .from('user_activity_logs')\n        .select('created_at')\n        .eq('user_id', userId)\n        .gte('created_at', startDate.toISOString());\n\n      const activeDays = new Set();\n      (data || []).forEach(activity => {\n        const date = activity.created_at.split('T')[0];\n        activeDays.add(date);\n      });\n\n      let currentStreak = 0;\n      let longestStreak = 0;\n      let tempStreak = 0;\n      const today = new Date();\n      \n      for (let i = 0; i < days; i++) {\n        const checkDate = new Date(today);\n        checkDate.setDate(checkDate.getDate() - i);\n        const dateKey = checkDate.toISOString().split('T')[0];\n        \n        if (activeDays.has(dateKey)) {\n          tempStreak++;\n          if (i === 0 || currentStreak > 0) {\n            currentStreak = tempStreak;\n          }\n        } else {\n          if (tempStreak > longestStreak) {\n            longestStreak = tempStreak;\n          }\n          tempStreak = 0;\n          if (i === 0) currentStreak = 0;\n        }\n      }\n\n      if (tempStreak > longestStreak) longestStreak = tempStreak;\n\n      return {\n        currentStreak,\n        longestStreak,\n        activeDays: Array.from(activeDays),\n        totalActiveDays: activeDays.size\n      };\n    } catch (err) {\n      console.warn('Failed to get streak data:', err);\n      return null;\n    }\n  }\n\n  // --- Recent Activity ---\n  async function getRecentActivity(userId, limit = 20) {\n    const sb = getSupabase();\n    if (!sb) return [];\n\n    try {\n      const { data } = await sb\n        .from('user_activity_logs')\n        .select('*')\n        .eq('user_id', userId)\n        .order('created_at', { ascending: false })\n        .limit(limit);\n\n      return data || [];\n    } catch (err) {\n      console.warn('Failed to get recent activity:', err);\n      return [];\n    }\n  }\n\n  // --- Public API ---\n  return {\n    init,\n    trackArticleRead,\n    trackArticleComplete,\n    trackResourceView,\n    trackSearch,\n    trackShare,\n    trackMoodEntry,\n    trackGoalProgress,\n    trackCommunityAction,\n    logActivity,\n    getActivityStats,\n    getReadingStats,\n    getAchievements,\n    getStreakData,\n    getRecentActivity,\n    ACHIEVEMENTS\n  };\n})();\n\n// --- Auto-Initialize ---\ndocument.addEventListener('DOMContentLoaded', () => {\n  MBAnalytics.init();\n});\n","path":null,"size_bytes":20739,"size_tokens":null},"css/settings-modal.css":{"content":"/* === MODAL OVERLAY === */\n.settings-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(8px);\n  z-index: 9999;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease, visibility 0.3s ease;\n}\n\n.settings-modal-overlay.active {\n  opacity: 1;\n  visibility: visible;\n}\n\n/* === MODAL CONTAINER === */\n.settings-modal {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%) scale(0.95);\n  width: 95%;\n  max-width: 1000px;\n  height: 90vh;\n  max-height: 700px;\n  background: #fff;\n  border-radius: 24px;\n  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.25);\n  z-index: 10000;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  overflow: hidden;\n}\n\n.settings-modal-overlay.active .settings-modal {\n  opacity: 1;\n  visibility: visible;\n  transform: translate(-50%, -50%) scale(1);\n}\n\n[data-theme=\"dark\"] .settings-modal {\n  background: #1a1a2e;\n  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);\n}\n\n/* === SIDEBAR === */\n.settings-sidebar {\n  width: 240px;\n  background: linear-gradient(180deg, #f8f6f3 0%, #f0ece5 100%);\n  border-right: 1px solid rgba(0, 0, 0, 0.08);\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n}\n\n[data-theme=\"dark\"] .settings-sidebar {\n  background: linear-gradient(180deg, #252542 0%, #1e1e35 100%);\n  border-right-color: rgba(255, 255, 255, 0.08);\n}\n\n.settings-sidebar-header {\n  padding: 24px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .settings-sidebar-header {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.settings-sidebar-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 20px;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n[data-theme=\"dark\"] .settings-sidebar-title {\n  color: #fff;\n}\n\n.settings-sidebar-title ion-icon {\n  font-size: 24px;\n  color: var(--user-accent);\n}\n\n/* === CATEGORY TABS === */\n.settings-categories {\n  flex: 1;\n  padding: 16px 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.settings-category-btn {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 14px 16px;\n  border: none;\n  background: transparent;\n  border-radius: 12px;\n  cursor: pointer;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  color: #555;\n  transition: all 0.2s ease;\n  text-align: left;\n  width: 100%;\n}\n\n.settings-category-btn:hover {\n  background: rgba(0, 0, 0, 0.05);\n  color: #1a1a2e;\n}\n\n.settings-category-btn.active {\n  background: var(--user-accent);\n  color: #fff;\n  box-shadow: 0 4px 15px rgba(175, 145, 109, 0.3);\n}\n\n[data-theme=\"dark\"] .settings-category-btn {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .settings-category-btn:hover {\n  background: rgba(255, 255, 255, 0.08);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .settings-category-btn.active {\n  background: var(--user-accent, #9b7ed9);\n  box-shadow: 0 4px 15px rgba(155, 126, 217, 0.3);\n}\n\n.settings-category-btn ion-icon {\n  font-size: 20px;\n  flex-shrink: 0;\n}\n\n/* === ACCESSIBILITY SCORE === */\n.settings-accessibility-score {\n  padding: 20px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  text-align: center;\n}\n\n[data-theme=\"dark\"] .settings-accessibility-score {\n  border-top-color: rgba(255, 255, 255, 0.08);\n}\n\n.accessibility-score-ring {\n  width: 80px;\n  height: 80px;\n  margin: 0 auto 12px;\n  position: relative;\n}\n\n.accessibility-score-ring svg {\n  transform: rotate(-90deg);\n}\n\n.accessibility-score-ring circle {\n  fill: none;\n  stroke-width: 6;\n}\n\n.accessibility-score-ring .bg-ring {\n  stroke: rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .accessibility-score-ring .bg-ring {\n  stroke: rgba(255, 255, 255, 0.1);\n}\n\n.accessibility-score-ring .progress-ring {\n  stroke: var(--user-accent);\n  stroke-linecap: round;\n  transition: stroke-dashoffset 0.5s ease;\n}\n\n.accessibility-score-value {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-family: 'Poppins', sans-serif;\n  font-size: 20px;\n  font-weight: 700;\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .accessibility-score-value {\n  color: #fff;\n}\n\n.accessibility-score-label {\n  font-family: 'Poppins', sans-serif;\n  font-size: 12px;\n  color: #777;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n[data-theme=\"dark\"] .accessibility-score-label {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n/* === MAIN CONTENT === */\n.settings-main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n/* === MAIN HEADER === */\n.settings-main-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px 24px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .settings-main-header {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.settings-main-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin: 0;\n}\n\n[data-theme=\"dark\"] .settings-main-title {\n  color: #fff;\n}\n\n.settings-header-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n/* === SYNC INDICATOR === */\n.settings-sync-indicator {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: rgba(77, 184, 150, 0.1);\n  border-radius: 20px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 12px;\n  color: #4db896;\n}\n\n.settings-sync-indicator.syncing {\n  background: rgba(74, 144, 217, 0.1);\n  color: #4a90d9;\n}\n\n.settings-sync-indicator.offline {\n  background: rgba(224, 112, 112, 0.1);\n  color: #e07070;\n}\n\n.settings-sync-indicator ion-icon {\n  font-size: 14px;\n}\n\n/* === COMPARE TOGGLE === */\n.settings-compare-toggle {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 12px;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 20px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 12px;\n  color: #555;\n  cursor: pointer;\n  border: none;\n  transition: all 0.2s ease;\n}\n\n.settings-compare-toggle:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.settings-compare-toggle.active {\n  background: var(--user-accent);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .settings-compare-toggle {\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .settings-compare-toggle:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n/* === CLOSE BUTTON === */\n.settings-close-btn {\n  width: 36px;\n  height: 36px;\n  border: none;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.settings-close-btn:hover {\n  background: rgba(0, 0, 0, 0.1);\n  transform: rotate(90deg);\n}\n\n.settings-close-btn ion-icon {\n  font-size: 20px;\n  color: #555;\n}\n\n[data-theme=\"dark\"] .settings-close-btn {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .settings-close-btn:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n[data-theme=\"dark\"] .settings-close-btn ion-icon {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n/* === CONTENT PANELS === */\n.settings-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px;\n}\n\n.settings-panel {\n  display: none;\n  animation: fadeIn 0.3s ease;\n}\n\n.settings-panel.active {\n  display: block;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n/* === SECTIONS === */\n.settings-section {\n  margin-bottom: 32px;\n}\n\n.settings-section-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 16px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n[data-theme=\"dark\"] .settings-section-title {\n  color: rgba(255, 255, 255, 0.9);\n}\n\n/* === THEME PRESETS === */\n.theme-presets-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n  gap: 12px;\n}\n\n.theme-preset-card {\n  position: relative;\n  padding: 16px;\n  border-radius: 16px;\n  border: 2px solid transparent;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  overflow: hidden;\n}\n\n.theme-preset-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n}\n\n.theme-preset-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n}\n\n.theme-preset-card.active {\n  border-color: var(--user-accent);\n}\n\n.theme-preset-card.active::after {\n  content: 'âœ“';\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  width: 20px;\n  height: 20px;\n  background: var(--user-accent);\n  color: #fff;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n}\n\n.theme-preset-default {\n  background: linear-gradient(135deg, #f8f6f3 0%, #fff 100%);\n}\n.theme-preset-default::before {\n  background: linear-gradient(90deg, var(--user-accent) 0%, var(--user-accent-grad-end) 100%);\n}\n\n.theme-preset-ocean {\n  background: linear-gradient(135deg, #e8f4f8 0%, #fff 100%);\n}\n.theme-preset-ocean::before {\n  background: linear-gradient(90deg, #4a90d9 0%, #38b2ac 100%);\n}\n\n.theme-preset-sunset {\n  background: linear-gradient(135deg, #fef3e8 0%, #fff 100%);\n}\n.theme-preset-sunset::before {\n  background: linear-gradient(90deg, #e09c5c 0%, #e07070 100%);\n}\n\n.theme-preset-forest {\n  background: linear-gradient(135deg, #e8f5f0 0%, #fff 100%);\n}\n.theme-preset-forest::before {\n  background: linear-gradient(90deg, #4db896 0%, #38b2ac 100%);\n}\n\n.theme-preset-night {\n  background: linear-gradient(135deg, #2d2d4a 0%, #1a1a2e 100%);\n  color: #fff;\n}\n.theme-preset-night::before {\n  background: linear-gradient(90deg, #9b7ed9 0%, #6366f1 100%);\n}\n\n.theme-preset-contrast {\n  background: #000;\n  color: #fff;\n}\n.theme-preset-contrast::before {\n  background: #fff;\n}\n\n.theme-preset-name {\n  font-family: 'Poppins', sans-serif;\n  font-size: 13px;\n  font-weight: 600;\n  margin-bottom: 4px;\n}\n\n.theme-preset-desc {\n  font-size: 11px;\n  opacity: 0.7;\n}\n\n[data-theme=\"dark\"] .theme-preset-default,\n[data-theme=\"dark\"] .theme-preset-ocean,\n[data-theme=\"dark\"] .theme-preset-sunset,\n[data-theme=\"dark\"] .theme-preset-forest {\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .theme-preset-default .theme-preset-name,\n[data-theme=\"dark\"] .theme-preset-default .theme-preset-desc,\n[data-theme=\"dark\"] .theme-preset-ocean .theme-preset-name,\n[data-theme=\"dark\"] .theme-preset-ocean .theme-preset-desc,\n[data-theme=\"dark\"] .theme-preset-sunset .theme-preset-name,\n[data-theme=\"dark\"] .theme-preset-sunset .theme-preset-desc,\n[data-theme=\"dark\"] .theme-preset-forest .theme-preset-name,\n[data-theme=\"dark\"] .theme-preset-forest .theme-preset-desc {\n  color: #1a1a2e;\n}\n\n/* === SETTINGS ITEMS === */\n.settings-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px;\n  background: rgba(0, 0, 0, 0.02);\n  border-radius: 12px;\n  margin-bottom: 8px;\n  transition: all 0.2s ease;\n}\n\n.settings-item:hover {\n  background: rgba(0, 0, 0, 0.04);\n}\n\n[data-theme=\"dark\"] .settings-item {\n  background: rgba(255, 255, 255, 0.03);\n}\n\n[data-theme=\"dark\"] .settings-item:hover {\n  background: rgba(255, 255, 255, 0.06);\n}\n\n.settings-item-info {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n}\n\n.settings-item-icon {\n  width: 40px;\n  height: 40px;\n  background: var(--user-accent);\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 20px;\n}\n\n.settings-item-text h4 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin: 0 0 2px 0;\n}\n\n[data-theme=\"dark\"] .settings-item-text h4 {\n  color: #fff;\n}\n\n.settings-item-text p {\n  font-size: 12px;\n  color: #777;\n  margin: 0;\n}\n\n[data-theme=\"dark\"] .settings-item-text p {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n/* === TOGGLE SWITCH === */\n.settings-toggle {\n  position: relative;\n  width: 52px;\n  height: 28px;\n  flex-shrink: 0;\n}\n\n.settings-toggle input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.settings-toggle-slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #ccc;\n  border-radius: 28px;\n  transition: 0.3s;\n}\n\n.settings-toggle-slider::before {\n  position: absolute;\n  content: \"\";\n  height: 22px;\n  width: 22px;\n  left: 3px;\n  bottom: 3px;\n  background: #fff;\n  border-radius: 50%;\n  transition: 0.3s;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\n}\n\n.settings-toggle input:checked + .settings-toggle-slider {\n  background: var(--user-accent);\n}\n\n.settings-toggle input:checked + .settings-toggle-slider::before {\n  transform: translateX(24px);\n}\n\n/* === SELECT DROPDOWN === */\n.settings-select {\n  padding: 10px 36px 10px 14px;\n  border: 1px solid rgba(0, 0, 0, 0.12);\n  border-radius: 10px;\n  background: #fff url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23555' d='M6 8L1 3h10z'/%3E%3C/svg%3E\") no-repeat right 12px center;\n  color: #1a1a2e;\n  font-family: 'Poppins', sans-serif;\n  font-size: 13px;\n  cursor: pointer;\n  appearance: none;\n  min-width: 140px;\n  transition: all 0.2s ease;\n}\n\n.settings-select:hover {\n  border-color: var(--user-accent);\n}\n\n.settings-select:focus {\n  outline: none;\n  border-color: var(--user-accent);\n  box-shadow: 0 0 0 3px rgba(175, 145, 109, 0.15);\n}\n\n[data-theme=\"dark\"] .settings-select {\n  background-color: #2a2a45;\n  border-color: rgba(255, 255, 255, 0.12);\n  color: #fff;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23fff' d='M6 8L1 3h10z'/%3E%3C/svg%3E\");\n}\n\n/* === ACCENT COLOR PICKER === */\n.accent-color-grid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.accent-color-option {\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  border: 3px solid transparent;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n}\n\n.accent-color-option:hover {\n  transform: scale(1.1);\n}\n\n.accent-color-option.active {\n  border-color: #1a1a2e;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .accent-color-option.active {\n  border-color: #fff;\n}\n\n.accent-color-option.active::after {\n  content: 'âœ“';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #fff;\n  font-size: 16px;\n  font-weight: bold;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n}\n\n/* === LIVE PREVIEW === */\n.settings-preview {\n  background: rgba(0, 0, 0, 0.03);\n  border-radius: 16px;\n  padding: 20px;\n  margin-top: 24px;\n}\n\n[data-theme=\"dark\"] .settings-preview {\n  background: rgba(255, 255, 255, 0.03);\n}\n\n.settings-preview-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 12px;\n  font-weight: 600;\n  color: #777;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-bottom: 16px;\n}\n\n[data-theme=\"dark\"] .settings-preview-title {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.settings-preview-frame {\n  background: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n  min-height: 150px;\n}\n\n[data-theme=\"dark\"] .settings-preview-frame {\n  background: #1a1a2e;\n}\n\n.preview-sample-text {\n  font-family: 'Poppins', sans-serif;\n  color: #1a1a2e;\n  margin-bottom: 12px;\n}\n\n[data-theme=\"dark\"] .preview-sample-text {\n  color: #fff;\n}\n\n.preview-sample-btn {\n  display: inline-block;\n  padding: 10px 20px;\n  background: var(--user-accent);\n  color: #fff;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n}\n\n/* === RESET BUTTON === */\n.settings-reset-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  width: 100%;\n  padding: 14px;\n  margin-top: 24px;\n  border: 1px dashed rgba(0, 0, 0, 0.2);\n  background: transparent;\n  border-radius: 12px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  color: #777;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.settings-reset-btn:hover {\n  border-color: #e07070;\n  color: #e07070;\n  background: rgba(224, 112, 112, 0.05);\n}\n\n[data-theme=\"dark\"] .settings-reset-btn {\n  border-color: rgba(255, 255, 255, 0.2);\n  color: rgba(255, 255, 255, 0.6);\n}\n\n[data-theme=\"dark\"] .settings-reset-btn:hover {\n  border-color: #e07070;\n  color: #e07070;\n}\n\n/* === ONBOARDING === */\n.settings-onboarding {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  z-index: 100;\n  display: none;\n  align-items: center;\n  justify-content: center;\n}\n\n.settings-onboarding.active {\n  display: flex;\n}\n\n.onboarding-card {\n  background: #fff;\n  border-radius: 20px;\n  padding: 32px;\n  max-width: 400px;\n  text-align: center;\n  animation: bounceIn 0.5s ease;\n}\n\n[data-theme=\"dark\"] .onboarding-card {\n  background: #252542;\n}\n\n@keyframes bounceIn {\n  0% { transform: scale(0.8); opacity: 0; }\n  50% { transform: scale(1.05); }\n  100% { transform: scale(1); opacity: 1; }\n}\n\n.onboarding-icon {\n  width: 80px;\n  height: 80px;\n  margin: 0 auto 20px;\n  background: var(--user-accent);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.onboarding-icon ion-icon {\n  font-size: 40px;\n  color: #fff;\n}\n\n.onboarding-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 22px;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin-bottom: 12px;\n}\n\n[data-theme=\"dark\"] .onboarding-title {\n  color: #fff;\n}\n\n.onboarding-text {\n  font-size: 14px;\n  color: #666;\n  line-height: 1.6;\n  margin-bottom: 24px;\n}\n\n[data-theme=\"dark\"] .onboarding-text {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.onboarding-btn {\n  padding: 12px 32px;\n  background: var(--user-accent);\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.onboarding-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(175, 145, 109, 0.3);\n}\n\n.onboarding-skip {\n  display: block;\n  margin-top: 16px;\n  font-size: 13px;\n  color: #999;\n  background: none;\n  border: none;\n  cursor: pointer;\n}\n\n.onboarding-skip:hover {\n  color: #666;\n}\n\n/* === MOBILE RESPONSIVE === */\n@media (max-width: 768px) {\n  .settings-modal {\n    width: 100%;\n    height: 100%;\n    max-height: 100%;\n    border-radius: 0;\n  }\n  \n  .settings-sidebar {\n    display: none;\n  }\n  \n  .settings-main {\n    width: 100%;\n  }\n  \n  .settings-mobile-tabs {\n    display: flex;\n    gap: 8px;\n    padding: 12px 16px;\n    overflow-x: auto;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n  }\n  \n  .settings-mobile-tab {\n    flex-shrink: 0;\n    padding: 8px 16px;\n    background: rgba(0, 0, 0, 0.05);\n    border: none;\n    border-radius: 20px;\n    font-family: 'Poppins', sans-serif;\n    font-size: 13px;\n    font-weight: 500;\n    color: #555;\n    cursor: pointer;\n  }\n  \n  .settings-mobile-tab.active {\n    background: var(--user-accent);\n    color: #fff;\n  }\n}\n\n@media (min-width: 769px) {\n  .settings-mobile-tabs {\n    display: none;\n  }\n}\n","path":null,"size_bytes":18936,"size_tokens":null},"mindspace-build/js/animations.js":{"content":"// ==================== ANIMATION SYSTEM ====================\n\n(function() {\n  'use strict';\n\n  // --- Configuration ---\n  const ANIMATION_CONFIG = {\n    threshold: 0.15,\n    rootMargin: '0px 0px -50px 0px'\n  };\n\n  const ANIMATION_SELECTORS = [\n    '.animate-fade-in',\n    '.animate-slide-up',\n    '.animate-slide-left',\n    '.animate-slide-right',\n    '.animate-scale-in',\n    '.animate-blur-in',\n    '.animate-stagger',\n    '.animate-section'\n  ];\n\n  let observer = null;\n\n  // --- Motion Preferences ---\n  function shouldReduceMotion() {\n    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n  }\n\n  // --- Reveal Helpers ---\n  function revealElement(element) {\n    element.classList.add('is-visible');\n  }\n\n  function revealAllImmediately() {\n    const elements = document.querySelectorAll(ANIMATION_SELECTORS.join(', '));\n    elements.forEach(el => revealElement(el));\n  }\n\n  // --- Intersection Observer ---\n  function handleIntersection(entries, observer) {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        revealElement(entry.target);\n        observer.unobserve(entry.target);\n      }\n    });\n  }\n\n  // --- Scroll Animations ---\n  function initScrollAnimations() {\n    if (shouldReduceMotion()) {\n      revealAllImmediately();\n      return;\n    }\n\n    if (!('IntersectionObserver' in window)) {\n      revealAllImmediately();\n      return;\n    }\n\n    observer = new IntersectionObserver(handleIntersection, {\n      threshold: ANIMATION_CONFIG.threshold,\n      rootMargin: ANIMATION_CONFIG.rootMargin\n    });\n\n    const elements = document.querySelectorAll(ANIMATION_SELECTORS.join(', '));\n    elements.forEach(el => {\n      if (!el.classList.contains('is-visible')) {\n        observer.observe(el);\n      }\n    });\n  }\n\n  // --- Back To Top ---\n  function initBackToTop() {\n    const backToTopBtn = document.querySelector('.back-to-top');\n    if (!backToTopBtn) return;\n\n    const showThreshold = 400;\n    let isVisible = false;\n\n    function toggleVisibility() {\n      const shouldShow = window.scrollY > showThreshold;\n      \n      if (shouldShow !== isVisible) {\n        isVisible = shouldShow;\n        backToTopBtn.classList.toggle('is-visible', isVisible);\n      }\n    }\n\n    function scrollToTop(e) {\n      e.preventDefault();\n      \n      if (shouldReduceMotion()) {\n        window.scrollTo(0, 0);\n      } else {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth'\n        });\n      }\n    }\n\n    window.addEventListener('scroll', toggleVisibility, { passive: true });\n    backToTopBtn.addEventListener('click', scrollToTop);\n    \n    toggleVisibility();\n  }\n\n  // --- Ripple Effect ---\n  function initRippleEffect() {\n    const rippleElements = document.querySelectorAll('.btn-ripple');\n    \n    rippleElements.forEach(el => {\n      el.addEventListener('click', function(e) {\n        if (shouldReduceMotion()) return;\n        \n        const rect = this.getBoundingClientRect();\n        const ripple = document.createElement('span');\n        \n        ripple.className = 'ripple-effect';\n        ripple.style.left = (e.clientX - rect.left) + 'px';\n        ripple.style.top = (e.clientY - rect.top) + 'px';\n        ripple.style.width = ripple.style.height = Math.max(rect.width, rect.height) + 'px';\n        \n        this.appendChild(ripple);\n        \n        setTimeout(() => ripple.remove(), 600);\n      });\n    });\n  }\n\n  // --- Hover Effects ---\n  function initHoverEffects() {\n    if (shouldReduceMotion()) return;\n    \n    const hover3dElements = document.querySelectorAll('.hover-3d');\n    \n    hover3dElements.forEach(el => {\n      el.addEventListener('mousemove', function(e) {\n        const rect = this.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        \n        const centerX = rect.width / 2;\n        const centerY = rect.height / 2;\n        \n        const rotateX = (y - centerY) / 20;\n        const rotateY = (centerX - x) / 20;\n        \n        this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-5px)`;\n      });\n      \n      el.addEventListener('mouseleave', function() {\n        this.style.transform = '';\n      });\n    });\n  }\n\n  // --- Parallax ---\n  function initParallax() {\n    if (shouldReduceMotion()) return;\n    \n    const parallaxElements = document.querySelectorAll('.parallax-bg');\n    \n    if (parallaxElements.length === 0) return;\n    \n    function updateParallax() {\n      const scrollY = window.scrollY;\n      \n      parallaxElements.forEach(el => {\n        const speed = parseFloat(el.dataset.speed) || 0.5;\n        const yPos = -(scrollY * speed);\n        el.style.transform = `translateY(${yPos}px)`;\n      });\n    }\n    \n    window.addEventListener('scroll', updateParallax, { passive: true });\n  }\n\n  // --- Count Up ---\n  function initCountUp() {\n    const countElements = document.querySelectorAll('.count-up');\n    \n    if (countElements.length === 0) return;\n    \n    const countObserver = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          const el = entry.target;\n          const target = parseInt(el.dataset.target) || 0;\n          const duration = parseInt(el.dataset.duration) || 2000;\n          const start = 0;\n          const startTime = performance.now();\n          \n          function animate(currentTime) {\n            const elapsed = currentTime - startTime;\n            const progress = Math.min(elapsed / duration, 1);\n            const easeProgress = 1 - Math.pow(1 - progress, 3);\n            \n            const current = Math.round(start + (target - start) * easeProgress);\n            el.textContent = current.toLocaleString();\n            \n            if (progress < 1) {\n              requestAnimationFrame(animate);\n            }\n          }\n          \n          if (!shouldReduceMotion()) {\n            requestAnimationFrame(animate);\n          } else {\n            el.textContent = target.toLocaleString();\n          }\n          \n          countObserver.unobserve(el);\n        }\n      });\n    }, { threshold: 0.5 });\n    \n    countElements.forEach(el => countObserver.observe(el));\n  }\n\n  // --- Initialization ---\n  function init() {\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', function() {\n        initScrollAnimations();\n        initBackToTop();\n        initRippleEffect();\n        initHoverEffects();\n        initParallax();\n        initCountUp();\n      });\n    } else {\n      initScrollAnimations();\n      initBackToTop();\n      initRippleEffect();\n      initHoverEffects();\n      initParallax();\n      initCountUp();\n    }\n  }\n\n  // --- Public API ---\n  window.MindSpaceAnimations = {\n    init: init,\n    refresh: initScrollAnimations,\n    revealAll: revealAllImmediately\n  };\n\n  init();\n})();\n","path":null,"size_bytes":6875,"size_tokens":null},"css/quote-banner.css":{"content":"/* === QUOTE BANNER === */\n.quote-banner {\n  background: linear-gradient(135deg, #f8f5f0 0%, #ebe6df 100%);\n  padding: 60px 20px;\n  text-align: center;\n  position: relative;\n  overflow: hidden;\n}\n\n.quote-banner::before {\n  content: '\"';\n  position: absolute;\n  top: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 8rem;\n  font-family: Georgia, serif;\n  color: rgba(175, 145, 109, 0.15);\n  line-height: 1;\n  pointer-events: none;\n}\n\n.quote-banner__container {\n  max-width: 800px;\n  margin: 0 auto;\n  position: relative;\n  z-index: 1;\n}\n\n.quote-banner__content {\n  min-height: 120px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.quote-banner__text {\n  font-family: 'Poppins', sans-serif;\n  font-size: clamp(1.25rem, 3vw, 1.75rem);\n  font-weight: 500;\n  font-style: italic;\n  color: #2c2c2c;\n  line-height: 1.6;\n  margin-bottom: 16px;\n  opacity: 1;\n  transition: opacity 0.5s ease;\n}\n\n.quote-banner__text.fade-out {\n  opacity: 0;\n}\n\n.quote-banner__author {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--user-accent, #af916d);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  opacity: 1;\n  transition: opacity 0.5s ease;\n}\n\n.quote-banner__author.fade-out {\n  opacity: 0;\n}\n\n.quote-banner__controls {\n  display: flex;\n  justify-content: center;\n  gap: 8px;\n  margin-top: 24px;\n}\n\n.quote-banner__dot {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: rgba(44, 44, 44, 0.2);\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  transition: background 0.3s ease, transform 0.3s ease;\n}\n\n.quote-banner__dot:hover {\n  background: rgba(44, 44, 44, 0.4);\n  transform: scale(1.2);\n}\n\n.quote-banner__dot.active {\n  background: var(--user-accent, #af916d);\n  transform: scale(1.2);\n}\n\n.quote-banner__dot:focus-visible {\n  outline: 2px solid var(--user-accent, #af916d);\n  outline-offset: 2px;\n}\n\n/* === QUOTE BANNER DARK MODE === */\n[data-theme=\"dark\"] .quote-banner {\n  background: linear-gradient(135deg, #1a1a2e 0%, #16162a 100%);\n}\n\n[data-theme=\"dark\"] .quote-banner::before {\n  color: rgba(155, 126, 217, 0.1);\n}\n\n[data-theme=\"dark\"] .quote-banner__text {\n  color: #e8e8e8;\n}\n\n[data-theme=\"dark\"] .quote-banner__author {\n  color: var(--user-accent, #9b7ed9);\n}\n\n[data-theme=\"dark\"] .quote-banner__dot {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n[data-theme=\"dark\"] .quote-banner__dot:hover {\n  background: rgba(255, 255, 255, 0.4);\n}\n\n[data-theme=\"dark\"] .quote-banner__dot.active {\n  background: var(--user-accent, #9b7ed9);\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .quote-banner__text,\n  .quote-banner__author {\n    transition: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .quote-banner {\n    padding: 40px 16px;\n  }\n  \n  .quote-banner::before {\n    font-size: 5rem;\n    top: 10px;\n  }\n  \n  .quote-banner__content {\n    min-height: 100px;\n  }\n}\n\n/* === WELLNESS TIP === */\n.wellness-tip {\n  background: #fff;\n  padding: 50px 20px;\n  text-align: center;\n}\n\n.wellness-tip__container {\n  max-width: 700px;\n  margin: 0 auto;\n}\n\n.wellness-tip__header {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.wellness-tip__icon {\n  width: 48px;\n  height: 48px;\n  background: linear-gradient(135deg, var(--user-accent, #af916d) 0%, #d4b896 100%);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n}\n\n.wellness-tip__label {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.875rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  color: var(--user-accent, #af916d);\n}\n\n.wellness-tip__card {\n  background: linear-gradient(135deg, #f8f5f0 0%, #ebe6df 100%);\n  border-radius: 16px;\n  padding: 32px;\n  border: 1px solid rgba(175, 145, 109, 0.2);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n}\n\n.wellness-tip__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: clamp(1.25rem, 2.5vw, 1.5rem);\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 12px;\n}\n\n.wellness-tip__text {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  color: #555;\n  line-height: 1.7;\n  margin-bottom: 20px;\n}\n\n.wellness-tip__action {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background: var(--user-accent, #af916d);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  text-decoration: none;\n  border-radius: 30px;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.wellness-tip__action:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(175, 145, 109, 0.3);\n}\n\n.wellness-tip__action:focus-visible {\n  outline: 2px solid var(--user-accent, #af916d);\n  outline-offset: 3px;\n}\n\n.wellness-tip__day {\n  margin-top: 16px;\n  font-size: 0.8rem;\n  color: #888;\n  font-style: italic;\n}\n\n/* === WELLNESS TIP DARK MODE === */\n[data-theme=\"dark\"] .wellness-tip {\n  background: #0f0f1a;\n}\n\n[data-theme=\"dark\"] .wellness-tip__icon {\n  background: linear-gradient(135deg, var(--user-accent, #9b7ed9) 0%, #7a5dc7 100%);\n}\n\n[data-theme=\"dark\"] .wellness-tip__label {\n  color: var(--user-accent, #9b7ed9);\n}\n\n[data-theme=\"dark\"] .wellness-tip__card {\n  background: linear-gradient(135deg, #1a1a2e 0%, #16162a 100%);\n  border-color: rgba(155, 126, 217, 0.2);\n}\n\n[data-theme=\"dark\"] .wellness-tip__title {\n  color: #e8e8e8;\n}\n\n[data-theme=\"dark\"] .wellness-tip__text {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .wellness-tip__action {\n  background: var(--user-accent, #9b7ed9);\n}\n\n[data-theme=\"dark\"] .wellness-tip__action:hover {\n  box-shadow: 0 4px 15px rgba(155, 126, 217, 0.3);\n}\n\n[data-theme=\"dark\"] .wellness-tip__day {\n  color: #777;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .wellness-tip__action {\n    transition: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .wellness-tip {\n    padding: 40px 16px;\n  }\n  \n  .wellness-tip__card {\n    padding: 24px 20px;\n  }\n  \n  .wellness-tip__icon {\n    width: 40px;\n    height: 40px;\n    font-size: 1.25rem;\n  }\n}\n","path":null,"size_bytes":6009,"size_tokens":null},"profile/profile-analytics.js":{"content":"// ==================== PROFILE ANALYTICS ====================\n\nconst ProfileAnalytics = (function() {\n  'use strict';\n\n  let currentUserId = null;\n\n  // --- Formatting Helpers ---\n  function formatTimeAgo(dateStr) {\n    const date = new Date(dateStr);\n    const now = new Date();\n    const seconds = Math.floor((now - date) / 1000);\n    \n    if (seconds < 60) return 'Just now';\n    if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;\n    if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;\n    if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;\n    return date.toLocaleDateString();\n  }\n\n  function formatDuration(seconds) {\n    if (seconds < 60) return `${seconds}s`;\n    if (seconds < 3600) return `${Math.floor(seconds / 60)}m`;\n    const hours = Math.floor(seconds / 3600);\n    const mins = Math.floor((seconds % 3600) / 60);\n    return `${hours}h ${mins}m`;\n  }\n\n  // --- Activity Icons & Descriptions ---\n  function getActionIcon(actionType) {\n    const icons = {\n      'page_view': 'eye-outline',\n      'article_read': 'book-outline',\n      'article_complete': 'checkmark-done-outline',\n      'resource_view': 'folder-open-outline',\n      'search': 'search-outline',\n      'share': 'share-social-outline',\n      'mood_entry': 'happy-outline',\n      'mood_checkin': 'happy-outline',\n      'goal_progress': 'flag-outline',\n      'goal_complete': 'trophy-outline',\n      'community_post': 'chatbubble-outline',\n      'community_comment': 'chatbox-outline',\n      'community_like': 'heart-outline',\n      'achievement_unlocked': 'trophy-outline',\n      'profile_update': 'person-outline',\n      'bookmark': 'bookmark-outline',\n      'like': 'heart-outline',\n      'follow': 'person-add-outline'\n    };\n    return icons[actionType] || 'ellipse-outline';\n  }\n\n  const HIDDEN_ACTIVITY_TYPES = ['page_view', 'page_exit'];\n\n  function getActionDescription(activity) {\n    const meta = activity.activity_data || activity.metadata || {};\n    const type = activity.activity_type || activity.action_type;\n    \n    const descriptions = {\n      'article_read': `Started reading <strong>${meta.article_title || 'an article'}</strong>`,\n      'article_complete': `Completed <strong>${meta.article_title || 'an article'}</strong>`,\n      'resource_view': `Viewed resource <strong>${meta.resource_title || 'a resource'}</strong>`,\n      'search': `Searched for \"<strong>${meta.query || ''}</strong>\"`,\n      'share': `Shared ${meta.content_type || 'content'} on ${meta.platform || 'social media'}`,\n      'mood_entry': `Logged mood: <strong>${meta.mood || 'recorded'}</strong>`,\n      'mood_checkin': `Mood check-in: <strong>${meta.mood || 'recorded'}</strong>`,\n      'goal_progress': `Made progress on a goal (${meta.progress || 0}%)`,\n      'goal_complete': `Completed a wellness goal`,\n      'community_post': `Created a new post in the community`,\n      'community_comment': `Left a comment on a discussion`,\n      'community_like': `Liked a post`,\n      'achievement_unlocked': `Achievement unlocked: <strong>${meta.badge_name || meta.achievement || 'New badge'}</strong>`,\n      'profile_update': `Updated profile`,\n      'bookmark': `Bookmarked an article`,\n      'like': `Liked a post`,\n      'follow': `Started following someone`\n    };\n    \n    return descriptions[type] || `${(type || 'activity').replace(/_/g, ' ')}`;\n  }\n\n  // ==================== CALENDAR HEATMAP ====================\n  async function renderCalendarHeatmap(container, userId) {\n    if (!container) return;\n    \n    container.innerHTML = `\n      <div class=\"mb-heatmap\">\n        <div class=\"mb-heatmap__header\">\n          <h3 class=\"mb-heatmap__title\">\n            <ion-icon name=\"calendar-outline\"></ion-icon>\n            Activity Calendar\n          </h3>\n          <div class=\"mb-heatmap__stats\">\n            <span><strong id=\"heatmapStreak\">0</strong> day streak</span>\n            <span><strong id=\"heatmapTotal\">0</strong> active days</span>\n          </div>\n        </div>\n        <div class=\"mb-heatmap__grid\" id=\"heatmapGrid\"></div>\n        <div class=\"mb-heatmap__legend\">\n          <span>Less</span>\n          <div class=\"mb-heatmap__legend-item\" style=\"background: #f0f0f5;\"></div>\n          <div class=\"mb-heatmap__legend-item\" style=\"background: var(--user-accent-soft);\"></div>\n          <div class=\"mb-heatmap__legend-item\" style=\"background: var(--user-accent-light);\"></div>\n          <div class=\"mb-heatmap__legend-item\" style=\"background: var(--user-accent-grad-end);\"></div>\n          <div class=\"mb-heatmap__legend-item\" style=\"background: var(--user-accent);\"></div>\n          <span>More</span>\n        </div>\n      </div>\n    `;\n\n    if (typeof MBAnalytics !== 'undefined') {\n      const streakData = await MBAnalytics.getStreakData(userId, 365);\n      if (streakData) {\n        document.getElementById('heatmapStreak').textContent = streakData.currentStreak;\n        document.getElementById('heatmapTotal').textContent = streakData.totalActiveDays;\n        \n        const grid = document.getElementById('heatmapGrid');\n        const activeDaysSet = new Set(streakData.activeDays);\n        const today = new Date();\n        \n        const activityStats = await MBAnalytics.getActivityStats(userId, 365);\n        const dailyCounts = activityStats?.dailyCounts || {};\n        \n        for (let week = 52; week >= 0; week--) {\n          for (let day = 0; day < 7; day++) {\n            const checkDate = new Date(today);\n            checkDate.setDate(checkDate.getDate() - (week * 7 + (6 - day)));\n            const dateKey = checkDate.toISOString().split('T')[0];\n            \n            const dayEl = document.createElement('div');\n            dayEl.className = 'mb-heatmap__day';\n            dayEl.title = `${dateKey}: ${dailyCounts[dateKey] || 0} activities`;\n            \n            const count = dailyCounts[dateKey] || 0;\n            if (count > 0) {\n              const level = count >= 10 ? 4 : count >= 5 ? 3 : count >= 2 ? 2 : 1;\n              dayEl.dataset.level = level;\n            }\n            \n            grid.appendChild(dayEl);\n          }\n        }\n      }\n    }\n  }\n\n  // ==================== ACTIVITY TIMELINE ====================\n  async function renderActivityTimeline(container, userId) {\n    if (!container) return;\n    \n    container.innerHTML = `\n      <div class=\"mb-timeline\">\n        <div class=\"mb-timeline__header\">\n          <h3 class=\"mb-timeline__title\">\n            <ion-icon name=\"time-outline\"></ion-icon>\n            Recent Activity\n          </h3>\n        </div>\n        <div class=\"mb-timeline__list\" id=\"timelineList\">\n          <div class=\"mb-skeleton mb-skeleton--text\" style=\"width: 80%;\"></div>\n          <div class=\"mb-skeleton mb-skeleton--text\" style=\"width: 60%;\"></div>\n          <div class=\"mb-skeleton mb-skeleton--text\" style=\"width: 70%;\"></div>\n        </div>\n      </div>\n    `;\n\n    const listEl = document.getElementById('timelineList');\n    \n    const showEmptyState = () => {\n      listEl.innerHTML = `\n        <div class=\"mb-empty-state\">\n          <ion-icon name=\"footsteps-outline\" class=\"mb-empty-state__icon\"></ion-icon>\n          <h4 class=\"mb-empty-state__title\">No Activity Yet</h4>\n          <p class=\"mb-empty-state__desc\">Start exploring articles, resources, and the community to see your activity here.</p>\n        </div>\n      `;\n    };\n\n    if (typeof MBAnalytics === 'undefined') {\n      showEmptyState();\n      return;\n    }\n\n    try {\n      const rawActivities = await MBAnalytics.getRecentActivity(userId, 30);\n      \n      if (!rawActivities || rawActivities.length === 0) {\n        showEmptyState();\n        return;\n      }\n\n      const activities = rawActivities.filter(a => {\n        const type = a.activity_type || a.action_type || '';\n        return !HIDDEN_ACTIVITY_TYPES.includes(type);\n      }).slice(0, 10);\n\n      if (activities.length === 0) {\n        showEmptyState();\n        return;\n      }\n      \n      listEl.innerHTML = activities.map(activity => {\n        const type = activity.activity_type || activity.action_type || '';\n        return `\n          <div class=\"mb-timeline__item\">\n            <div class=\"mb-timeline__icon\">\n              <ion-icon name=\"${getActionIcon(type)}\"></ion-icon>\n            </div>\n            <div class=\"mb-timeline__content\">\n              <div class=\"mb-timeline__action\">${getActionDescription(activity)}</div>\n              <div class=\"mb-timeline__time\">${formatTimeAgo(activity.created_at)}</div>\n            </div>\n          </div>\n        `;\n      }).join('');\n    } catch (err) {\n      console.warn('Activity timeline error:', err);\n      showEmptyState();\n    }\n  }\n\n  // ==================== READING STATS ====================\n  async function renderReadingStats(container, userId) {\n    if (!container) return;\n    \n    container.innerHTML = `\n      <div class=\"mb-reading-stats\">\n        <div class=\"mb-reading-stat\">\n          <div class=\"mb-reading-stat__icon\">\n            <ion-icon name=\"book-outline\"></ion-icon>\n          </div>\n          <div class=\"mb-reading-stat__value\" id=\"statArticlesStarted\">0</div>\n          <div class=\"mb-reading-stat__label\">Articles Started</div>\n        </div>\n        <div class=\"mb-reading-stat\">\n          <div class=\"mb-reading-stat__icon\">\n            <ion-icon name=\"checkmark-done-outline\"></ion-icon>\n          </div>\n          <div class=\"mb-reading-stat__value\" id=\"statArticlesCompleted\">0</div>\n          <div class=\"mb-reading-stat__label\">Completed</div>\n        </div>\n        <div class=\"mb-reading-stat\">\n          <div class=\"mb-reading-stat__icon\">\n            <ion-icon name=\"time-outline\"></ion-icon>\n          </div>\n          <div class=\"mb-reading-stat__value\" id=\"statReadingTime\">0m</div>\n          <div class=\"mb-reading-stat__label\">Reading Time</div>\n        </div>\n        <div class=\"mb-reading-stat\">\n          <div class=\"mb-reading-stat__icon\">\n            <ion-icon name=\"trending-up-outline\"></ion-icon>\n          </div>\n          <div class=\"mb-reading-stat__value\" id=\"statAvgProgress\">0%</div>\n          <div class=\"mb-reading-stat__label\">Avg Progress</div>\n        </div>\n      </div>\n    `;\n\n    if (typeof MBAnalytics !== 'undefined') {\n      const stats = await MBAnalytics.getReadingStats(userId);\n      if (stats) {\n        document.getElementById('statArticlesStarted').textContent = stats.articlesStarted;\n        document.getElementById('statArticlesCompleted').textContent = stats.articlesCompleted;\n        document.getElementById('statReadingTime').textContent = formatDuration(stats.totalReadingTime);\n        document.getElementById('statAvgProgress').textContent = stats.averageProgress + '%';\n      }\n    }\n  }\n\n  // ==================== ACTIVITY CHART ====================\n  async function renderActivityChart(container, userId) {\n    if (!container) return;\n    \n    container.innerHTML = `\n      <div class=\"mb-stats-chart\">\n        <div class=\"mb-stats-chart__header\">\n          <h3 class=\"mb-stats-chart__title\">Activity Trends</h3>\n          <div class=\"mb-stats-chart__period\">\n            <button class=\"active\" data-days=\"7\">Week</button>\n            <button data-days=\"30\">Month</button>\n          </div>\n        </div>\n        <div class=\"mb-stats-chart__bars\" id=\"activityBars\"></div>\n        <div class=\"mb-stats-chart__labels\" id=\"activityLabels\"></div>\n      </div>\n    `;\n\n    const periodButtons = container.querySelectorAll('.mb-stats-chart__period button');\n    periodButtons.forEach(btn => {\n      btn.addEventListener('click', async () => {\n        periodButtons.forEach(b => b.classList.remove('active'));\n        btn.classList.add('active');\n        await updateChart(parseInt(btn.dataset.days), userId);\n      });\n    });\n\n    await updateChart(7, userId);\n  }\n\n  async function updateChart(days, userId) {\n    if (typeof MBAnalytics === 'undefined') return;\n    \n    const stats = await MBAnalytics.getActivityStats(userId, days);\n    if (!stats) return;\n    \n    const barsContainer = document.getElementById('activityBars');\n    const labelsContainer = document.getElementById('activityLabels');\n    if (!barsContainer || !labelsContainer) return;\n    \n    const dailyCounts = stats.dailyCounts;\n    const dates = Object.keys(dailyCounts).sort();\n    const values = dates.map(d => dailyCounts[d]);\n    const maxVal = Math.max(...values, 1);\n    \n    barsContainer.innerHTML = dates.map((date, i) => {\n      const height = (values[i] / maxVal) * 100;\n      return `<div class=\"mb-stats-chart__bar\" style=\"height: ${Math.max(height, 4)}%;\" data-value=\"${values[i]}\"></div>`;\n    }).join('');\n    \n    if (days <= 7) {\n      const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n      labelsContainer.innerHTML = dates.map(d => {\n        const day = new Date(d).getDay();\n        return `<span>${dayNames[day]}</span>`;\n      }).join('');\n    } else {\n      labelsContainer.innerHTML = dates.map((d, i) => {\n        if (i % 5 === 0 || i === dates.length - 1) {\n          return `<span>${new Date(d).getDate()}</span>`;\n        }\n        return '<span></span>';\n      }).join('');\n    }\n  }\n\n  // ==================== ACHIEVEMENTS ====================\n  async function renderAchievements(container, userId) {\n    if (!container) return;\n    \n    container.innerHTML = `\n      <div class=\"mb-badges\" id=\"achievementsBadges\">\n        ${Array(8).fill(0).map(() => `\n          <div class=\"mb-badge\">\n            <div class=\"mb-skeleton mb-skeleton--circle\" style=\"width: 56px; height: 56px; margin-bottom: 12px;\"></div>\n            <div class=\"mb-skeleton mb-skeleton--text\" style=\"width: 70%;\"></div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n\n    if (typeof MBAnalytics !== 'undefined') {\n      const { earned, available } = await MBAnalytics.getAchievements(userId);\n      const badgesContainer = document.getElementById('achievementsBadges');\n      \n      const unlockedBadgesEl = document.getElementById('unlockedBadges');\n      const totalBadgesEl = document.getElementById('totalBadges');\n      if (unlockedBadgesEl) unlockedBadgesEl.textContent = earned.length;\n      if (totalBadgesEl) totalBadgesEl.textContent = earned.length + available.length;\n      \n      const allBadges = [\n        ...earned.map(a => ({ ...a, unlocked: true })),\n        ...available.map(a => ({ ...a, unlocked: false }))\n      ];\n      \n      badgesContainer.innerHTML = allBadges.map(badge => `\n        <div class=\"mb-badge ${badge.unlocked ? '' : 'mb-badge--locked'}\">\n          <div class=\"mb-badge__icon\">\n            <ion-icon name=\"${badge.icon || 'trophy-outline'}\"></ion-icon>\n          </div>\n          <div class=\"mb-badge__name\">${badge.name || 'Achievement'}</div>\n          <div class=\"mb-badge__desc\">${badge.description || ''}</div>\n          ${badge.unlocked ? `<div class=\"mb-badge__date\">Unlocked ${formatTimeAgo(badge.unlocked_at)}</div>` : ''}\n        </div>\n      `).join('');\n    }\n  }\n\n  // --- Progress Ring ---\n  function createProgressRing(percent, size = 80, strokeWidth = 8) {\n    const radius = (size - strokeWidth) / 2;\n    const circumference = radius * 2 * Math.PI;\n    const offset = circumference - (percent / 100) * circumference;\n    \n    return `\n      <div class=\"mb-progress-ring\" style=\"width: ${size}px; height: ${size}px;\">\n        <svg width=\"${size}\" height=\"${size}\">\n          <circle class=\"mb-progress-ring__track\" cx=\"${size/2}\" cy=\"${size/2}\" r=\"${radius}\" stroke-width=\"${strokeWidth}\"/>\n          <circle class=\"mb-progress-ring__progress\" cx=\"${size/2}\" cy=\"${size/2}\" r=\"${radius}\" stroke-width=\"${strokeWidth}\"\n            stroke-dasharray=\"${circumference}\" stroke-dashoffset=\"${offset}\"/>\n        </svg>\n        <span class=\"mb-progress-ring__value\">${percent}%</span>\n      </div>\n    `;\n  }\n\n  // --- Initialization ---\n  async function init(userId) {\n    if (!userId) return;\n    currentUserId = userId;\n\n    const heatmapContainer = document.getElementById('profileHeatmap');\n    const timelineContainer = document.getElementById('profileTimeline');\n    const readingStatsContainer = document.getElementById('profileReadingStats');\n    const activityChartContainer = document.getElementById('profileActivityChart');\n    const achievementsContainer = document.getElementById('profileAchievements');\n\n    await Promise.all([\n      renderCalendarHeatmap(heatmapContainer, userId),\n      renderActivityTimeline(timelineContainer, userId),\n      renderReadingStats(readingStatsContainer, userId),\n      renderActivityChart(activityChartContainer, userId),\n      renderAchievements(achievementsContainer, userId)\n    ]);\n  }\n\n  // --- Public API ---\n  return {\n    init,\n    renderCalendarHeatmap,\n    renderActivityTimeline,\n    renderReadingStats,\n    renderActivityChart,\n    renderAchievements,\n    createProgressRing\n  };\n})();\n","path":null,"size_bytes":16792,"size_tokens":null},"profile/wellness-enhanced.css":{"content":"/* === SOLID CARD BASE === */\n.mb-profile__tab-content .mb-profile__wellness-section,\n.mb-profile__wellness-section {\n  background: #fff !important;\n  border: 1px solid rgba(0, 0, 0, 0.1) !important;\n  border-radius: 24px !important;\n  padding: 28px !important;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08) !important;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  position: relative !important;\n  overflow: hidden !important;\n}\n\n.mb-profile__wellness-section::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, var(--user-accent), var(--user-accent-light), #8fa67a, var(--user-accent));\n  background-size: 200% 100%;\n  animation: gradientShift 3s ease infinite;\n}\n\n@keyframes gradientShift {\n  0%, 100% { background-position: 0% 50%; }\n  50% { background-position: 100% 50%; }\n}\n\n.mb-profile__wellness-section:hover {\n  transform: translateY(-4px);\n  box-shadow: \n    0 20px 50px rgba(0, 0, 0, 0.12),\n    0 0 0 1px rgba(255, 255, 255, 0.6) inset;\n}\n\n.mb-profile__wellness-section h3 {\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin-bottom: 24px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.mb-profile__wellness-section h3 ion-icon {\n  font-size: 1.4rem;\n  color: var(--user-accent);\n  filter: drop-shadow(0 2px 4px rgba(184, 155, 94, 0.3));\n}\n\n/* === MOOD TRACKER === */\n.mb-profile__mood-input {\n  text-align: center;\n  margin-bottom: 32px;\n}\n\n.mb-profile__mood-input p {\n  font-size: 1.15rem;\n  font-weight: 500;\n  color: #4a4a6a;\n  margin-bottom: 24px;\n}\n\n.mb-profile__mood-selector {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  margin-bottom: 24px;\n}\n\n.mb-profile__mood-selector .mb-profile__mood-btn,\n.mb-profile__mood-btn {\n  width: 64px !important;\n  height: 64px !important;\n  border: 3px solid transparent !important;\n  border-radius: 50% !important;\n  background: linear-gradient(145deg, var(--user-accent-soft) 0%, #fff 100%) !important;\n  cursor: pointer !important;\n  display: flex !important;\n  align-items: center !important;\n  justify-content: center !important;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  position: relative !important;\n  box-shadow: \n    0 4px 15px rgba(0, 0, 0, 0.08),\n    0 2px 4px rgba(0, 0, 0, 0.04) !important;\n  font-size: 2rem !important;\n}\n\n.mb-profile__mood-btn::before {\n  content: '';\n  position: absolute;\n  inset: -4px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, var(--user-accent), var(--user-accent-light), #8fa67a);\n  opacity: 0;\n  z-index: -1;\n  transition: opacity 0.3s ease;\n}\n\n.mb-profile__mood-selector .mb-profile__mood-btn:hover,\n.mb-profile__mood-btn:hover {\n  transform: scale(1.15) translateY(-4px) !important;\n  box-shadow: \n    0 12px 30px rgba(184, 155, 94, 0.25),\n    0 4px 10px rgba(0, 0, 0, 0.1) !important;\n}\n\n.mb-profile__mood-btn:hover::before {\n  opacity: 0.3 !important;\n}\n\n.mb-profile__mood-selector .mb-profile__mood-btn.is-selected,\n.mb-profile__mood-btn.is-selected {\n  border-color: var(--user-accent) !important;\n  background: linear-gradient(145deg, rgba(184, 155, 94, 0.15) 0%, rgba(184, 155, 94, 0.05) 100%) !important;\n  transform: scale(1.2) !important;\n  box-shadow: \n    0 8px 25px rgba(184, 155, 94, 0.35),\n    0 0 20px rgba(184, 155, 94, 0.2) !important;\n}\n\n.mb-profile__mood-btn.is-selected::before {\n  opacity: 0.5;\n  animation: moodPulse 2s ease-in-out infinite;\n}\n\n@keyframes moodPulse {\n  0%, 100% { transform: scale(1); opacity: 0.5; }\n  50% { transform: scale(1.1); opacity: 0.3; }\n}\n\n.mb-profile__mood-btn .mood-emoji,\n.mood-emoji {\n  font-size: 2rem !important;\n  transition: transform 0.3s ease !important;\n  filter: drop-shadow(0 2px 3px rgba(0, 0, 0, 0.1)) !important;\n  line-height: 1 !important;\n}\n\n.mb-profile__mood-btn:hover .mood-emoji {\n  transform: scale(1.1);\n  animation: emojiWiggle 0.5s ease;\n}\n\n@keyframes emojiWiggle {\n  0%, 100% { transform: scale(1.1) rotate(0deg); }\n  25% { transform: scale(1.1) rotate(-5deg); }\n  75% { transform: scale(1.1) rotate(5deg); }\n}\n\n/* === MOOD NOTE INPUT === */\n.mb-profile__mood-note {\n  width: 100%;\n  max-width: 450px;\n  padding: 16px 20px;\n  border: 2px solid rgba(184, 155, 94, 0.2);\n  border-radius: 16px;\n  background: rgba(255, 255, 255, 0.8);\n  font-size: 1rem;\n  color: #1a1a2e;\n  transition: all 0.3s ease;\n  margin-bottom: 20px;\n}\n\n.mb-profile__mood-note:focus {\n  outline: none;\n  border-color: var(--user-accent);\n  box-shadow: 0 0 0 4px rgba(184, 155, 94, 0.15);\n  background: #fff;\n}\n\n.mb-profile__mood-note::placeholder {\n  color: #9a9ab0;\n}\n\n/* === LOG MOOD BUTTON === */\n.mb-profile__mood-log-btn {\n  padding: 14px 36px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-grad-end) 50%, var(--user-accent-light) 100%);\n  background-size: 200% 100%;\n  color: #fff;\n  border: none;\n  border-radius: 50px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 6px 20px rgba(184, 155, 94, 0.35);\n  position: relative;\n  overflow: hidden;\n}\n\n.mb-profile__mood-log-btn::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n  transition: left 0.5s ease;\n}\n\n.mb-profile__mood-log-btn:hover {\n  background-position: 100% 0;\n  transform: translateY(-3px);\n  box-shadow: 0 10px 30px rgba(184, 155, 94, 0.45);\n}\n\n.mb-profile__mood-log-btn:hover::before {\n  left: 100%;\n}\n\n.mb-profile__mood-log-btn:active {\n  transform: translateY(-1px);\n}\n\n/* === MOOD HISTORY === */\n.mb-profile__mood-history {\n  margin-top: 32px;\n  padding-top: 28px;\n  border-top: 1px solid rgba(184, 155, 94, 0.2);\n}\n\n.mb-profile__mood-history h4 {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #6b6b8a;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-profile__mood-entries {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n  gap: 16px;\n}\n\n.mb-profile__mood-entries {\n  display: grid !important;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)) !important;\n  gap: 20px !important;\n}\n\n.mb-profile__mood-history .mood-entry-card,\n\n/* === MOOD ENTRY CARDS === */\n.mood-entry-card {\n  background: #fff !important;\n  border-radius: 16px !important;\n  padding: 20px !important;\n  text-align: left !important;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06) !important;\n  transition: all 0.25s ease !important;\n  border: 1px solid rgba(0, 0, 0, 0.04) !important;\n  position: relative !important;\n  overflow: hidden !important;\n  display: flex !important;\n  align-items: flex-start !important;\n  gap: 16px !important;\n  cursor: pointer !important;\n}\n\n.mood-entry-card::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  border-radius: 16px 0 0 16px;\n}\n\n.mood-entry-card[data-mood=\"5\"]::before { background: linear-gradient(180deg, #10b981, #34d399); }\n.mood-entry-card[data-mood=\"4\"]::before { background: linear-gradient(180deg, #8b5cf6, #a78bfa); }\n.mood-entry-card[data-mood=\"3\"]::before { background: linear-gradient(180deg, #3b82f6, #60a5fa); }\n.mood-entry-card[data-mood=\"2\"]::before { background: linear-gradient(180deg, #f59e0b, #fbbf24); }\n.mood-entry-card[data-mood=\"1\"]::before { background: linear-gradient(180deg, #ef4444, #f87171); }\n\n.mood-entry-card:hover {\n  transform: translateY(-4px) !important;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1) !important;\n}\n\n.mood-entry-emoji {\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, var(--user-accent-soft) 0%, #fff 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n  border: 2px solid #f0ebe3;\n}\n\n.mood-entry-card .mood-emoji-large {\n  font-size: 1.8rem !important;\n  display: block !important;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1)) !important;\n}\n\n.mood-entry-content {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.mood-entry-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 12px;\n}\n\n.mood-label {\n  font-weight: 600;\n  font-size: 1rem;\n  color: #1a1a2e;\n}\n\n.mood-entry-card[data-mood=\"5\"] .mood-label { color: #10b981; }\n.mood-entry-card[data-mood=\"4\"] .mood-label { color: #8b5cf6; }\n.mood-entry-card[data-mood=\"3\"] .mood-label { color: #3b82f6; }\n.mood-entry-card[data-mood=\"2\"] .mood-label { color: #f59e0b; }\n.mood-entry-card[data-mood=\"1\"] .mood-label { color: #ef4444; }\n\n.mood-entry-card .mood-time {\n  font-size: 0.8rem;\n  color: #8a8a9a;\n}\n\n.mood-entry-card .mood-date {\n  font-size: 0.85rem;\n  color: #6b6b8a;\n  margin-top: 2px;\n}\n\n.mood-note-preview {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  margin-top: 10px;\n  padding: 10px 12px;\n  background: var(--user-accent-soft);\n  border-radius: 10px;\n  font-size: 0.875rem;\n  color: #4a4a6a;\n  line-height: 1.5;\n}\n\n.mood-note-preview ion-icon {\n  flex-shrink: 0;\n  font-size: 1rem;\n  color: var(--user-accent);\n  margin-top: 2px;\n}\n\n.mood-note-preview span {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n/* === MOOD TREND CHART === */\n.mb-profile__mood-trend {\n  margin-top: 24px;\n  background: linear-gradient(145deg, rgba(248, 246, 242, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%);\n  border-radius: 16px;\n  padding: 24px;\n  border: 1px solid rgba(184, 155, 94, 0.1);\n}\n\n.mb-profile__mood-trend h5 {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #4a4a6a;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mood-trend-chart {\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n  height: 120px;\n  padding: 0 10px;\n  position: relative;\n}\n\n.mood-trend-chart::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 1px;\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.mood-trend-bar {\n  flex: 1;\n  max-width: 40px;\n  margin: 0 4px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n}\n\n.mood-trend-bar .bar {\n  width: 100%;\n  border-radius: 8px 8px 4px 4px;\n  min-height: 8px;\n  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n}\n\n.mood-trend-bar .bar[data-level=\"5\"] { background: linear-gradient(180deg, #10b981, #059669); height: 100%; }\n.mood-trend-bar .bar[data-level=\"4\"] { background: linear-gradient(180deg, #8b5cf6, #7c3aed); height: 80%; }\n.mood-trend-bar .bar[data-level=\"3\"] { background: linear-gradient(180deg, #3b82f6, #2563eb); height: 60%; }\n.mood-trend-bar .bar[data-level=\"2\"] { background: linear-gradient(180deg, #f59e0b, #d97706); height: 40%; }\n.mood-trend-bar .bar[data-level=\"1\"] { background: linear-gradient(180deg, #ef4444, #dc2626); height: 20%; }\n\n.mood-trend-bar .bar:hover {\n  transform: scaleY(1.05);\n  filter: brightness(1.1);\n}\n\n.mood-trend-bar .day-label {\n  font-size: 0.7rem;\n  font-weight: 500;\n  color: #9a9ab0;\n  text-transform: uppercase;\n}\n\n/* === WELLNESS GOALS === */\n.mb-profile__goals-add {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 24px;\n  flex-wrap: wrap;\n}\n\n.mb-profile__goal-input {\n  flex: 1;\n  min-width: 220px;\n  padding: 14px 20px;\n  border: 2px solid rgba(184, 155, 94, 0.2);\n  border-radius: 14px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__goal-input:focus {\n  outline: none;\n  border-color: var(--user-accent);\n  box-shadow: 0 0 0 4px rgba(184, 155, 94, 0.12);\n}\n\n.mb-profile__goal-select {\n  padding: 14px 20px;\n  border: 2px solid rgba(184, 155, 94, 0.2);\n  border-radius: 14px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  color: #4a4a6a;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  min-width: 150px;\n}\n\n.mb-profile__goal-select:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.mb-profile__goal-add-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 14px 28px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  border: none;\n  border-radius: 14px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(184, 155, 94, 0.3);\n  white-space: nowrap;\n}\n\n.mb-profile__goal-add-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(var(--user-accent-rgb), 0.4);\n}\n\n.mb-profile__goal-add-btn ion-icon {\n  font-size: 1.2rem;\n}\n\n/* === GOALS LIST === */\n.mb-profile__goals-list {\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n}\n\n.mb-profile__goals-list .mb-profile__goal-item,\n.mb-profile__goal-item {\n  display: flex !important;\n  align-items: center !important;\n  gap: 16px !important;\n  background: linear-gradient(145deg, #fff 0%, #faf9f7 100%) !important;\n  padding: 18px 20px !important;\n  border-radius: 16px !important;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05) !important;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  border: 1px solid rgba(0, 0, 0, 0.03) !important;\n  position: relative !important;\n  overflow: hidden !important;\n}\n\n.mb-profile__goal-item::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  background: linear-gradient(180deg, var(--user-accent), var(--user-accent-light));\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.mb-profile__goal-item:hover {\n  transform: translateX(8px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.mb-profile__goal-item:hover::before {\n  opacity: 1;\n}\n\n.mb-profile__goal-item .goal-check {\n  width: 28px;\n  height: 28px;\n  border: 3px solid var(--user-accent);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n  position: relative;\n}\n\n.mb-profile__goal-item .goal-check::before {\n  content: '';\n  position: absolute;\n  inset: -6px;\n  border-radius: 50%;\n  background: rgba(184, 155, 94, 0.15);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.mb-profile__goal-item .goal-check:hover::before {\n  opacity: 1;\n}\n\n.mb-profile__goal-item .goal-check.completed {\n  background: linear-gradient(135deg, #10b981, #059669);\n  border-color: #10b981;\n  animation: checkComplete 0.4s ease;\n}\n\n@keyframes checkComplete {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.2); }\n  100% { transform: scale(1); }\n}\n\n.mb-profile__goal-item .goal-check.completed ion-icon {\n  color: #fff;\n  font-size: 1rem;\n}\n\n.goal-progress-ring {\n  width: 48px;\n  height: 48px;\n  position: relative;\n  flex-shrink: 0;\n}\n\n.goal-progress-ring svg {\n  width: 100%;\n  height: 100%;\n  transform: rotate(-90deg);\n}\n\n.goal-progress-ring .ring-bg {\n  fill: none;\n  stroke: rgba(184, 155, 94, 0.15);\n  stroke-width: 4;\n}\n\n.goal-progress-ring .ring-progress {\n  fill: none;\n  stroke: url(#goalGradient);\n  stroke-width: 4;\n  stroke-linecap: round;\n  transition: stroke-dashoffset 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.goal-progress-ring .ring-text {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 0.7rem;\n  font-weight: 700;\n  color: var(--user-accent);\n}\n\n.mb-profile__goal-item .goal-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.mb-profile__goal-item .goal-title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 6px;\n}\n\n.mb-profile__goal-item .goal-category {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.8rem;\n  color: #fff;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-grad-end) 100%);\n  padding: 4px 12px;\n  border-radius: 20px;\n}\n\n.mb-profile__goal-item .goal-category ion-icon {\n  font-size: 0.85rem;\n}\n\n.mb-profile__goal-item .goal-delete {\n  width: 36px;\n  height: 36px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  opacity: 0;\n}\n\n.mb-profile__goal-item:hover .goal-delete {\n  opacity: 1;\n}\n\n.mb-profile__goal-item .goal-delete:hover {\n  background: #ef4444;\n  color: #fff;\n  transform: scale(1.1);\n}\n\n/* === GOALS EMPTY STATE === */\n.mb-profile__goals-empty {\n  text-align: center;\n  padding: 50px 30px;\n  background: linear-gradient(145deg, rgba(248, 246, 242, 0.6) 0%, rgba(255, 255, 255, 0.4) 100%);\n  border-radius: 20px;\n  border: 2px dashed rgba(184, 155, 94, 0.25);\n}\n\n.mb-profile__goals-empty .empty-icon {\n  font-size: 4rem;\n  margin-bottom: 20px;\n  opacity: 0.6;\n  animation: emptyFloat 3s ease-in-out infinite;\n}\n\n@keyframes emptyFloat {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-10px); }\n}\n\n.mb-profile__goals-empty h4 {\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: #4a4a6a;\n  margin-bottom: 10px;\n}\n\n.mb-profile__goals-empty p {\n  color: #9a9ab0;\n  font-size: 0.95rem;\n}\n\n/* === READING STREAK === */\n.mb-profile__streak-display {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 20px;\n  margin-bottom: 32px;\n}\n\n.mb-profile__streak-stats .mb-profile__streak-stat,\n.mb-profile__streak-stat {\n  background: linear-gradient(145deg, #fff 0%, #faf9f7 100%) !important;\n  border-radius: 20px !important;\n  padding: 28px 24px !important;\n  text-align: center !important;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06) !important;\n  border: 1px solid rgba(0, 0, 0, 0.03) !important;\n  transition: all 0.3s ease !important;\n  position: relative !important;\n  overflow: hidden !important;\n}\n\n.mb-profile__streak-stat:first-child {\n  background: linear-gradient(145deg, rgba(184, 155, 94, 0.12) 0%, rgba(184, 155, 94, 0.05) 100%);\n  border-color: rgba(184, 155, 94, 0.2);\n}\n\n.mb-profile__streak-stat:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 35px rgba(0, 0, 0, 0.1);\n}\n\n.streak-icon {\n  font-size: 2.5rem;\n  margin-bottom: 12px;\n  display: inline-block;\n}\n\n.streak-icon.flame {\n  animation: flameFlicker 1.5s ease-in-out infinite;\n  filter: drop-shadow(0 4px 8px rgba(239, 68, 68, 0.4));\n}\n\n@keyframes flameFlicker {\n  0%, 100% { transform: scale(1) rotate(0deg); }\n  25% { transform: scale(1.05) rotate(-2deg); }\n  50% { transform: scale(1.1) rotate(0deg); }\n  75% { transform: scale(1.05) rotate(2deg); }\n}\n\n.mb-profile__streak-stat .streak-number {\n  font-size: 3rem;\n  font-weight: 800;\n  background: linear-gradient(135deg, var(--user-accent) 0%, #8fa67a 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  line-height: 1.1;\n  display: block;\n  margin-bottom: 8px;\n}\n\n.mb-profile__streak-stat .streak-label {\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: #6b6b8a;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n/* === STREAK CALENDAR === */\n.mb-profile__streak-calendar {\n  background: linear-gradient(145deg, rgba(248, 246, 242, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%);\n  border-radius: 16px;\n  padding: 24px;\n  border: 1px solid rgba(184, 155, 94, 0.1);\n}\n\n.streak-calendar-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.streak-calendar-header h5 {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #4a4a6a;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.streak-calendar-legend {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 0.75rem;\n  color: #9a9ab0;\n}\n\n.streak-calendar-legend span:first-child {\n  margin-right: 8px;\n}\n\n.streak-calendar-legend .legend-box {\n  width: 12px;\n  height: 12px;\n  border-radius: 3px;\n}\n\n.streak-calendar-legend .legend-box.l0 { background: rgba(184, 155, 94, 0.1); }\n.streak-calendar-legend .legend-box.l1 { background: rgba(184, 155, 94, 0.3); }\n.streak-calendar-legend .legend-box.l2 { background: rgba(184, 155, 94, 0.5); }\n.streak-calendar-legend .legend-box.l3 { background: rgba(184, 155, 94, 0.7); }\n.streak-calendar-legend .legend-box.l4 { background: var(--user-accent); }\n\n.streak-calendar-grid {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 6px;\n}\n\n.streak-calendar-grid .streak-day,\n.streak-day {\n  aspect-ratio: 1 !important;\n  border-radius: 6px !important;\n  background: rgba(184, 155, 94, 0.08) !important;\n  transition: all 0.2s ease !important;\n  cursor: pointer !important;\n  position: relative !important;\n}\n\n.streak-day:hover {\n  transform: scale(1.15);\n  z-index: 1;\n}\n\n.streak-day.active-1 { background: rgba(184, 155, 94, 0.25) !important; }\n.streak-day.active-2 { background: rgba(184, 155, 94, 0.45) !important; }\n.streak-day.active-3 { background: rgba(184, 155, 94, 0.65) !important; }\n.streak-day.active-4 { background: var(--user-accent) !important; box-shadow: 0 2px 8px rgba(var(--user-accent-rgb), 0.4) !important; }\n\n.streak-day .streak-tooltip {\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%) translateY(-5px);\n  background: #1a1a2e;\n  color: #fff;\n  padding: 6px 10px;\n  border-radius: 6px;\n  font-size: 0.7rem;\n  white-space: nowrap;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.2s ease;\n  z-index: 10;\n}\n\n.streak-day:hover .streak-tooltip {\n  opacity: 1;\n  visibility: visible;\n  transform: translateX(-50%) translateY(0);\n}\n\n.mb-profile__streak-milestones {\n  margin-top: 24px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  justify-content: center;\n}\n\n.streak-milestone {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 16px;\n  background: linear-gradient(145deg, #fff 0%, #faf9f7 100%);\n  border-radius: 30px;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.06);\n  border: 1px solid rgba(0, 0, 0, 0.04);\n  transition: all 0.3s ease;\n}\n\n.streak-milestone.achieved {\n  background: linear-gradient(145deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%);\n  border-color: rgba(16, 185, 129, 0.3);\n}\n\n.streak-milestone.achieved .milestone-icon {\n  color: #10b981;\n}\n\n.streak-milestone .milestone-icon {\n  font-size: 1.3rem;\n  color: #9a9ab0;\n}\n\n.streak-milestone .milestone-text {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #4a4a6a;\n}\n\n.streak-milestone.locked {\n  opacity: 0.5;\n}\n\n[data-theme=\"dark\"] .mb-profile__wellness-section {\n  background: linear-gradient(135deg, rgba(45, 43, 61, 0.95) 0%, rgba(45, 43, 61, 0.85) 100%);\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-profile__wellness-section h3 {\n  color: #f5f0e8;\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-input p {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-btn {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-note {\n  background: rgba(45, 43, 61, 0.8);\n  border-color: rgba(184, 155, 94, 0.3);\n  color: #f5f0e8;\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-history h4 {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mood-entry-card {\n  background: #2d2b3d !important;\n  border-color: rgba(255, 255, 255, 0.05) !important;\n}\n\n[data-theme=\"dark\"] .mood-entry-emoji {\n  background: linear-gradient(135deg, #3d3a50 0%, #2d2b3d 100%);\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .mood-entry-card .mood-date {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mood-entry-card .mood-time {\n  color: #7a7a8a;\n}\n\n[data-theme=\"dark\"] .mood-label {\n  color: #f5f0e8;\n}\n\n[data-theme=\"dark\"] .mood-note-preview {\n  background: rgba(45, 43, 61, 0.8);\n  color: #c0c0d0;\n}\n\n[data-theme=\"dark\"] .mood-note-preview ion-icon {\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-trend {\n  background: linear-gradient(145deg, rgba(61, 58, 80, 0.6) 0%, rgba(45, 43, 61, 0.4) 100%);\n  border-color: rgba(184, 155, 94, 0.15);\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-trend h5 {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-input,\n[data-theme=\"dark\"] .mb-profile__goal-select {\n  background: rgba(45, 43, 61, 0.9);\n  border-color: rgba(184, 155, 94, 0.3);\n  color: #f5f0e8;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%);\n  border-color: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item .goal-title {\n  color: #f5f0e8;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-empty {\n  background: linear-gradient(145deg, rgba(61, 58, 80, 0.8) 0%, rgba(45, 43, 61, 0.6) 100%) !important;\n  border-color: rgba(184, 155, 94, 0.3) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-empty h4 {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-stat {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%) !important;\n  border-color: rgba(255, 255, 255, 0.08) !important;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-stat:first-child {\n  background: linear-gradient(145deg, rgba(184, 155, 94, 0.25) 0%, rgba(184, 155, 94, 0.12) 100%) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-stat .streak-label {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-calendar {\n  background: linear-gradient(145deg, rgba(61, 58, 80, 0.9) 0%, rgba(45, 43, 61, 0.75) 100%) !important;\n  border-color: rgba(184, 155, 94, 0.2) !important;\n}\n\n[data-theme=\"dark\"] .streak-calendar-header h5 {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .streak-day {\n  background: rgba(184, 155, 94, 0.12);\n}\n\n[data-theme=\"dark\"] .streak-milestone {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%);\n  border-color: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .streak-milestone .milestone-text {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mb-profile__wellness-section,\n[data-theme=\"dark\"] .mb-profile__tab-content .mb-profile__wellness-section {\n  background: linear-gradient(135deg, rgba(45, 43, 61, 0.98) 0%, rgba(45, 43, 61, 0.92) 100%) !important;\n  border-color: rgba(255, 255, 255, 0.1) !important;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-input,\n[data-theme=\"dark\"] .mb-profile__goal-select {\n  background: rgba(45, 43, 61, 0.95) !important;\n  border-color: rgba(184, 155, 94, 0.3) !important;\n  color: #f5f0e8 !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-input::placeholder {\n  color: #7a7a8a !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-list .mb-profile__goal-item,\n[data-theme=\"dark\"] .mb-profile__goal-item {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%) !important;\n  border-color: rgba(255, 255, 255, 0.06) !important;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item .goal-title {\n  color: #f5f0e8 !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item .goal-check {\n  border-color: var(--user-accent-light) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-display .mb-profile__streak-stat,\n[data-theme=\"dark\"] .mb-profile__streak-stats .mb-profile__streak-stat,\n[data-theme=\"dark\"] .mb-profile__streak-stat {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%) !important;\n  border-color: rgba(255, 255, 255, 0.08) !important;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-stat:first-child {\n  background: linear-gradient(145deg, rgba(184, 155, 94, 0.2) 0%, rgba(184, 155, 94, 0.08) 100%) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-stat .streak-label {\n  color: #a0a0b8 !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-calendar {\n  background: linear-gradient(145deg, rgba(61, 58, 80, 0.95) 0%, rgba(45, 43, 61, 0.85) 100%) !important;\n  border-color: rgba(184, 155, 94, 0.2) !important;\n}\n\n[data-theme=\"dark\"] .streak-calendar-header h5 {\n  color: #b0b0c0 !important;\n}\n\n[data-theme=\"dark\"] .streak-calendar-legend {\n  color: #8a8a9a !important;\n}\n\n[data-theme=\"dark\"] .streak-day {\n  background: rgba(184, 155, 94, 0.15) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-empty {\n  background: linear-gradient(145deg, rgba(61, 58, 80, 0.9) 0%, rgba(45, 43, 61, 0.7) 100%) !important;\n  border-color: rgba(184, 155, 94, 0.35) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-empty h4 {\n  color: #c0c0d0 !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-empty p {\n  color: #8a8a9a !important;\n}\n\n@media (max-width: 768px) {\n  .mb-profile__wellness-section {\n    padding: 20px !important;\n    border-radius: 20px !important;\n  }\n\n  .mb-profile__mood-selector {\n    gap: 12px !important;\n  }\n\n  .mb-profile__mood-btn {\n    width: 52px !important;\n    height: 52px !important;\n  }\n\n  .mood-emoji {\n    font-size: 1.6rem !important;\n  }\n\n  .mb-profile__mood-entries {\n    grid-template-columns: 1fr !important;\n  }\n\n  .mood-entry-card {\n    padding: 16px !important;\n  }\n\n  .mood-entry-emoji {\n    width: 48px;\n    height: 48px;\n  }\n\n  .mood-entry-card .mood-emoji-large {\n    font-size: 1.5rem !important;\n  }\n\n  .mb-profile__goals-add {\n    flex-direction: column;\n  }\n\n  .mb-profile__goal-input,\n  .mb-profile__goal-select,\n  .mb-profile__goal-add-btn {\n    width: 100%;\n  }\n\n  .mb-profile__streak-display {\n    grid-template-columns: 1fr;\n  }\n\n  .streak-calendar-grid {\n    gap: 4px;\n  }\n\n  .mb-profile__streak-milestones {\n    gap: 8px;\n  }\n\n  .streak-milestone {\n    padding: 8px 12px;\n    font-size: 0.8rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .mb-profile__mood-btn {\n    width: 46px !important;\n    height: 46px !important;\n  }\n\n  .mood-emoji {\n    font-size: 1.4rem !important;\n  }\n\n  .mood-entry-emoji {\n    width: 42px;\n    height: 42px;\n  }\n\n  .mood-entry-card .mood-emoji-large {\n    font-size: 1.3rem !important;\n  }\n\n  .mood-label {\n    font-size: 0.9rem;\n  }\n\n  .mb-profile__streak-stat .streak-number {\n    font-size: 2.5rem;\n  }\n}\n","path":null,"size_bytes":29717,"size_tokens":null},"supabase/functions/send-newsletter-welcome/index.ts":{"content":"import { serve } from \"https://deno.land/std@0.177.0/http/server.ts\";\n\nconst RESEND_API_KEY = Deno.env.get(\"RESEND_API_KEY\")!;\n\ninterface WebhookPayload {\n  type: \"INSERT\";\n  table: string;\n  record: {\n    id: number;\n    email: string;\n    source: string;\n    confirmed: boolean;\n  };\n}\n\nconst brandConfig: Record<string, { name: string; domain: string; color: string; tagline: string; url: string }> = {\n  mindbalance: {\n    name: \"MindBalance\",\n    domain: \"mindbalance.cloud\",\n    color: \"#af916d\",\n    tagline: \"Your Mental Wellness Companion\",\n    url: \"https://mindbalance.cloud\",\n  },\n  mindspace: {\n    name: \"MindSpace\",\n    domain: \"mindspace.site\",\n    color: \"#2068A8\",\n    tagline: \"Your Mental Wellness Space\",\n    url: \"https://mindspace.site\",\n  },\n};\n\nserve(async (req) => {\n  try {\n    const payload: WebhookPayload = await req.json();\n\n    if (!payload.record.confirmed) {\n      return new Response(JSON.stringify({ message: \"Not confirmed, skipping\" }), { status: 200 });\n    }\n\n    const source = payload.record.source || \"mindbalance\";\n    const brand = brandConfig[source] || brandConfig.mindbalance;\n    const email = payload.record.email;\n\n    const emailHtml = `\n    <div style=\"font-family: 'Poppins', Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 40px 20px;\">\n      <div style=\"text-align: center; margin-bottom: 30px;\">\n        <h1 style=\"color: #3d3a50; font-size: 28px; margin: 0;\">${brand.name}</h1>\n        <p style=\"color: ${brand.color}; font-size: 14px; margin-top: 5px;\">${brand.tagline}</p>\n      </div>\n      \n      <div style=\"background: linear-gradient(135deg, #f8f8fa 0%, #fff 100%); border-radius: 16px; padding: 30px; border: 1px solid #e0e0e8;\">\n        <h2 style=\"color: #3d3a50; font-size: 22px; margin-top: 0;\">Welcome to Our Community!</h2>\n        \n        <p style=\"color: #5a5770; font-size: 16px; line-height: 1.6;\">\n          Thank you for subscribing to the ${brand.name} newsletter! You'll now receive:\n        </p>\n        \n        <ul style=\"color: #5a5770; font-size: 15px; line-height: 1.8; padding-left: 20px;\">\n          <li>Weekly mental wellness tips and strategies</li>\n          <li>New articles and resources</li>\n          <li>Community updates and stories</li>\n          <li>Exclusive content and early access</li>\n        </ul>\n        \n        <p style=\"color: #5a5770; font-size: 16px; line-height: 1.6;\">\n          We're committed to supporting your mental health journey with credible, \n          compassionate resources.\n        </p>\n        \n        <div style=\"text-align: center; margin-top: 30px;\">\n          <a href=\"${brand.url}\" \n             style=\"display: inline-block; background: ${brand.color}; color: #fff; padding: 14px 32px; \n                    border-radius: 30px; text-decoration: none; font-weight: 600; font-size: 15px;\">\n            Visit ${brand.name}\n          </a>\n        </div>\n      </div>\n      \n      <div style=\"text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e0e0e8;\">\n        <p style=\"color: #8a8899; font-size: 13px; margin: 0;\">\n          You received this email because you subscribed to the ${brand.name} newsletter.\n        </p>\n        <p style=\"color: #8a8899; font-size: 13px; margin-top: 10px;\">\n          <a href=\"${brand.url}\" style=\"color: ${brand.color}; text-decoration: none;\">\n            ${brand.domain}\n          </a>\n        </p>\n      </div>\n    </div>`;\n\n    const res = await fetch(\"https://api.resend.com/emails\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${RESEND_API_KEY}`,\n      },\n      body: JSON.stringify({\n        from: `${brand.name} <noreply@${brand.domain}>`,\n        to: [email],\n        subject: `Welcome to ${brand.name} Newsletter!`,\n        html: emailHtml,\n      }),\n    });\n\n    const resData = await res.json();\n\n    if (!res.ok) {\n      console.error(\"Resend error:\", resData);\n      return new Response(JSON.stringify({ error: resData }), { status: 500 });\n    }\n\n    return new Response(JSON.stringify({ message: \"Welcome email sent\", data: resData }), { status: 200 });\n  } catch (error) {\n    console.error(\"Error:\", error);\n    return new Response(JSON.stringify({ error: error.message }), { status: 500 });\n  }\n});\n","path":null,"size_bytes":4297,"size_tokens":null},"scripts/csv_to_json.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nConvert translations.csv to individual JSON files per language.\nRun this script whenever you update the CSV file.\n\nUsage:\n    python scripts/csv_to_json.py\n\nThis will read translations.csv and generate:\n    - i18n/en.json\n    - i18n/es.json\n    - i18n/fr.json\n    - i18n/zh.json\n    - i18n/hi.json\n    - i18n/ko.json\n\"\"\"\n\nimport csv\nimport json\nimport os\n\ndef csv_to_json(csv_path='translations.csv', output_dir='i18n'):\n    \"\"\"Convert CSV file to individual JSON files per language.\"\"\"\n    \n    # Create output directory if it doesn't exist\n    os.makedirs(output_dir, exist_ok=True)\n    \n    # Read CSV\n    with open(csv_path, 'r', encoding='utf-8') as f:\n        reader = csv.DictReader(f)\n        rows = list(reader)\n    \n    if not rows:\n        print(\"Error: CSV file is empty\")\n        return\n    \n    # Get language columns (all columns except 'key')\n    languages = [col for col in rows[0].keys() if col != 'key']\n    print(f\"Found languages: {languages}\")\n    \n    # Build translation objects\n    translations = {lang: {} for lang in languages}\n    \n    for row in rows:\n        key = row['key']\n        for lang in languages:\n            value = row.get(lang, '')\n            if value:  # Only include non-empty values\n                translations[lang][key] = value\n    \n    # Write JSON files\n    for lang, data in translations.items():\n        output_path = os.path.join(output_dir, f'{lang}.json')\n        with open(output_path, 'w', encoding='utf-8') as f:\n            json.dump(data, f, ensure_ascii=False, indent=2)\n        print(f\"Generated {output_path} ({len(data)} keys)\")\n    \n    print(f\"\\nDone! Generated {len(languages)} JSON files in '{output_dir}/'\")\n\nif __name__ == '__main__':\n    csv_to_json()\n","path":null,"size_bytes":1752,"size_tokens":null},"mindspace-build/js/footer.js":{"content":"// ==================== FOOTER ====================\n\n// --- Initialization ---\ndocument.addEventListener('DOMContentLoaded', () => {\n  initBackToTop();\n  initNewsletterForm();\n  initFooterAccordion();\n  initFooterControls();\n});\n\n// --- Back To Top ---\nfunction initBackToTop() {\n  const backToTopBtn = document.getElementById('backToTop');\n  if (!backToTopBtn) return;\n\n  const showThreshold = 400;\n\n  window.addEventListener('scroll', () => {\n    if (window.scrollY > showThreshold) {\n      backToTopBtn.classList.add('visible');\n    } else {\n      backToTopBtn.classList.remove('visible');\n    }\n  }, { passive: true });\n\n  backToTopBtn.addEventListener('click', () => {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  });\n}\n\n// --- Newsletter API Base ---\nfunction getNewsletterApiBase() {\n  const host = window.location.hostname;\n  if (host === 'mindspace.cloud' || host === 'www.mindspace.cloud' ||\n      host === 'mindspace.site' || host === 'www.mindspace.site') {\n    return 'https://d519c840-a074-41fa-b89a-8627dded835a-00-f7kivyi5gpot.worf.replit.dev';\n  }\n  return '';\n}\n\n// --- Newsletter Form ---\nfunction initNewsletterForm() {\n  const form = document.getElementById('newsletterForm');\n  if (!form) return;\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    \n    const emailInput = form.querySelector('.mb-footer__newsletter-input');\n    const btn = form.querySelector('.mb-footer__newsletter-btn');\n    const email = emailInput.value.trim().toLowerCase();\n    \n    if (!email) return;\n\n    const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n    if (!emailPattern.test(email)) {\n      showToast('Please enter a valid email address.');\n      return;\n    }\n\n    const originalContent = btn.innerHTML;\n    btn.innerHTML = '<ion-icon name=\"hourglass-outline\"></ion-icon> Subscribing...';\n    btn.disabled = true;\n    \n    try {\n      const sb = typeof getSupabase === 'function' ? getSupabase() : null;\n      if (!sb) {\n        showToast('Service temporarily unavailable. Please try again later.');\n        return;\n      }\n\n      const { data: existing } = await sb\n        .from('newsletter_subscribers')\n        .select('email, is_active')\n        .eq('email', email)\n        .maybeSingle();\n\n      if (existing && existing.is_active) {\n        btn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon> Subscribed!';\n        btn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';\n        emailInput.value = '';\n        showToast('You are already subscribed to our newsletter!');\n      } else {\n        const { error } = await sb\n          .from('newsletter_subscribers')\n          .upsert({\n            email: email,\n            is_active: true,\n            subscribed_at: new Date().toISOString()\n          }, { onConflict: 'email' });\n\n        if (error) throw error;\n\n        const apiBase = getNewsletterApiBase();\n        try {\n          await fetch(apiBase + '/api/newsletter', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ email: email })\n          });\n        } catch (emailErr) {\n          console.warn('Welcome email request failed:', emailErr);\n        }\n\n        btn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon> Subscribed!';\n        btn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';\n        emailInput.value = '';\n        showToast('Thanks for subscribing! Welcome to our community.');\n      }\n    } catch (error) {\n      console.error('Newsletter subscription error:', error);\n      btn.innerHTML = '<ion-icon name=\"close-outline\"></ion-icon> Error';\n      btn.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';\n      showToast('Something went wrong. Please try again later.');\n    }\n\n    setTimeout(() => {\n      btn.innerHTML = originalContent;\n      btn.style.background = '';\n      btn.disabled = false;\n    }, 3000);\n  });\n}\n\n// --- Footer Accordion ---\nfunction initFooterAccordion() {\n  const accordionBtns = document.querySelectorAll('.mb-footer__accordion-btn');\n  \n  accordionBtns.forEach(btn => {\n    btn.addEventListener('click', () => {\n      const isExpanded = btn.getAttribute('aria-expanded') === 'true';\n      btn.setAttribute('aria-expanded', !isExpanded);\n    });\n  });\n}\n\n// --- Footer Controls ---\nfunction initFooterControls() {\n  const langSelect = document.getElementById('footerLangSelect');\n  const themeToggle = document.getElementById('footerThemeToggle');\n\n  if (langSelect) {\n    const savedLang = window.MindSpaceTranslations?.getCurrentLanguage?.() || \n                      localStorage.getItem('mindspace-language') || 'en';\n    langSelect.value = savedLang;\n\n    langSelect.addEventListener('change', (e) => {\n      const lang = e.target.value;\n      \n      if (window.MindSpaceTranslations?.setLanguage) {\n        window.MindSpaceTranslations.setLanguage(lang);\n      } else {\n        localStorage.setItem('mindspace-language', lang);\n        document.querySelectorAll('[data-language-select]').forEach(select => {\n          if (select !== langSelect) {\n            select.value = lang;\n          }\n        });\n      }\n    });\n  }\n\n  if (themeToggle) {\n    const savedTheme = localStorage.getItem('mindspace_theme') || 'light';\n    const isDark = savedTheme === 'dark' || document.documentElement.getAttribute('data-theme') === 'dark';\n    themeToggle.checked = isDark;\n\n    themeToggle.addEventListener('change', (e) => {\n      const isDarkMode = e.target.checked;\n      const newTheme = isDarkMode ? 'dark' : 'light';\n      \n      localStorage.setItem('mindspace_theme', newTheme);\n      \n      if (isDarkMode) {\n        document.documentElement.setAttribute('data-theme', 'dark');\n      } else {\n        document.documentElement.removeAttribute('data-theme');\n      }\n\n      document.querySelectorAll('[data-theme-toggle]').forEach(toggle => {\n        if (toggle !== themeToggle) {\n          toggle.checked = isDarkMode;\n        }\n      });\n    });\n  }\n\n  listenForHeaderChanges();\n}\n\n// --- Header Change Sync ---\nfunction listenForHeaderChanges() {\n  document.querySelectorAll('[data-theme-toggle]').forEach(toggle => {\n    if (toggle.id !== 'footerThemeToggle') {\n      toggle.addEventListener('change', function() {\n        const footerToggle = document.getElementById('footerThemeToggle');\n        if (footerToggle && footerToggle.checked !== this.checked) {\n          footerToggle.checked = this.checked;\n        }\n      });\n    }\n  });\n\n  document.querySelectorAll('[data-language-select]').forEach(select => {\n    if (select.id !== 'footerLangSelect') {\n      select.addEventListener('change', function() {\n        const footerSelect = document.getElementById('footerLangSelect');\n        if (footerSelect && footerSelect.value !== this.value) {\n          footerSelect.value = this.value;\n        }\n      });\n    }\n  });\n}\n\n// --- Toast ---\nfunction showToast(message) {\n  let toast = document.querySelector('.footer-toast');\n  \n  if (!toast) {\n    toast = document.createElement('div');\n    toast.className = 'footer-toast';\n    toast.style.cssText = `\n      position: fixed;\n      bottom: 100px;\n      left: 50%;\n      transform: translateX(-50%) translateY(20px);\n      background: linear-gradient(135deg, #10b981, #059669);\n      color: white;\n      padding: 14px 28px;\n      border-radius: 30px;\n      font-size: 14px;\n      font-weight: 600;\n      box-shadow: 0 8px 30px rgba(16, 185, 129, 0.4);\n      z-index: 9999;\n      opacity: 0;\n      transition: all 0.3s ease;\n    `;\n    document.body.appendChild(toast);\n  }\n\n  toast.textContent = message;\n  \n  requestAnimationFrame(() => {\n    toast.style.opacity = '1';\n    toast.style.transform = 'translateX(-50%) translateY(0)';\n  });\n\n  setTimeout(() => {\n    toast.style.opacity = '0';\n    toast.style.transform = 'translateX(-50%) translateY(20px)';\n  }, 3000);\n}\n","path":null,"size_bytes":7936,"size_tokens":null},"mindspace-build/js/wellness-checkin.js":{"content":"// ==================== WELLNESS CHECK-IN ====================\n\n(function() {\n  'use strict';\n\n  // --- Mood Data ---\n  const moodData = {\n    happy: {\n      emoji: 'ðŸ˜Š',\n      color: '#10b981',\n      colorDark: '#059669',\n      affirmation: \"That's wonderful! Your positive energy is contagious.\",\n      tipTitle: \"Maintain Your Glow\",\n      tip: \"Channel this positive energy into something meaningful. Consider reaching out to a friend, journaling what's making you happy, or starting a project you've been putting off.\",\n      actions: [\n        { text: \"Share gratitude\", href: \"/community/\", icon: \"ðŸ’\", primary: true },\n        { text: \"Read uplifting stories\", href: \"/articles/\", icon: \"ðŸ“–\", primary: false }\n      ]\n    },\n    calm: {\n      emoji: 'ðŸ˜Œ',\n      color: '#06b6d4',\n      colorDark: '#0891b2',\n      affirmation: \"Peace is a beautiful state. Cherish this moment.\",\n      tipTitle: \"Deepen Your Calm\",\n      tip: \"This is the perfect time for mindful activities. Try a short meditation, gentle stretching, or simply sit with a warm drink and appreciate the stillness.\",\n      actions: [\n        { text: \"Try meditation\", href: \"/support/#breathing\", icon: \"ðŸ§˜\", primary: true },\n        { text: \"Calming sounds\", href: \"/resourcelib/\", icon: \"ðŸŽµ\", primary: false }\n      ]\n    },\n    okay: {\n      emoji: 'ðŸ˜',\n      color: '#f59e0b',\n      colorDark: '#d97706',\n      affirmation: \"Neutral days are perfectly valid. You're doing fine.\",\n      tipTitle: \"Add a Spark\",\n      tip: \"Sometimes we need a small boost. Try stepping outside for fresh air, listening to upbeat music, or doing one small thing that usually brings you joy.\",\n      actions: [\n        { text: \"Quick mood boost\", href: \"/support/#grounding\", icon: \"âœ¨\", primary: true },\n        { text: \"Browse resources\", href: \"/resourcelib/\", icon: \"ðŸ“š\", primary: false }\n      ]\n    },\n    anxious: {\n      emoji: 'ðŸ˜°',\n      color: '#8b5cf6',\n      colorDark: '#7c3aed',\n      affirmation: \"Your feelings are valid. Let's work through this together.\",\n      tipTitle: \"Grounding Exercise\",\n      tip: \"Try the 5-4-3-2-1 technique: Name 5 things you see, 4 you can touch, 3 you hear, 2 you smell, and 1 you taste. This helps bring you back to the present moment.\",\n      actions: [\n        { text: \"Breathing exercise\", href: \"/support/#breathing\", icon: \"ðŸŒ¬ï¸\", primary: true },\n        { text: \"Talk to someone\", href: \"/support/#crisis\", icon: \"ðŸ’¬\", primary: false }\n      ]\n    },\n    sad: {\n      emoji: 'ðŸ˜¢',\n      color: '#3b82f6',\n      colorDark: '#2563eb',\n      affirmation: \"It's okay to feel sad. Every emotion has its place.\",\n      tipTitle: \"Gentle Care\",\n      tip: \"Be gentle with yourself today. Sadness often carries important messages. Consider writing down your thoughts, talking to someone you trust, or simply allowing yourself to rest.\",\n      actions: [\n        { text: \"Journaling prompts\", href: \"/support/#journaling\", icon: \"ðŸ“\", primary: true },\n        { text: \"Read recovery stories\", href: \"/articles/recovery-stories.html\", icon: \"ðŸ’š\", primary: false }\n      ]\n    },\n    stressed: {\n      emoji: 'ðŸ˜¤',\n      color: '#ef4444',\n      colorDark: '#dc2626',\n      affirmation: \"Stress is temporary. You have the strength to get through this.\",\n      tipTitle: \"Release the Tension\",\n      tip: \"Take a deep breath. In for 4 counts, hold for 4, out for 6. Physical movement can help too â€” even a 2-minute stretch or walk can release built-up tension.\",\n      actions: [\n        { text: \"2-min breathing\", href: \"/support/#breathing\", icon: \"ðŸ§˜\", primary: true },\n        { text: \"Stress resources\", href: \"/resourcelib/?category=stress\", icon: \"ðŸ“–\", primary: false }\n      ]\n    }\n  };\n\n  // --- Daily Tips ---\n  const dailyTips = {\n    0: { icon: \"ðŸŒ…\", title: \"Restful Sunday\", text: \"Sundays are for recharging. Take time today to do something that truly relaxes you, whether it's reading, nature walks, or simply doing nothing at all.\" },\n    1: { icon: \"ðŸ§˜\", title: \"Mindful Monday\", text: \"Start your week with intention. Try a 2-minute breathing exercise before your first task: inhale for 4 counts, hold for 4, exhale for 6.\" },\n    2: { icon: \"ðŸ’ª\", title: \"Strength Tuesday\", text: \"You've made it through Monday! Celebrate small wins today. Write down three things you accomplished, no matter how small.\" },\n    3: { icon: \"ðŸŒ¿\", title: \"Wellness Wednesday\", text: \"Midweek check-in: How's your water intake? Aim for 8 glasses. Staying hydrated directly impacts your mood and mental clarity.\" },\n    4: { icon: \"ðŸ™\", title: \"Thankful Thursday\", text: \"Gratitude rewires your brain for positivity. Name three things you're grateful for right now â€” they can be as simple as morning coffee.\" },\n    5: { icon: \"ðŸŽ‰\", title: \"Feel-Good Friday\", text: \"You've almost made it through the week! Plan something small to look forward to this weekend, even if it's just extra sleep.\" },\n    6: { icon: \"âœ¨\", title: \"Self-Care Saturday\", text: \"Weekends are for recovery. Do one thing today purely for your own enjoyment â€” no productivity guilt allowed!\" }\n  };\n\n  // --- Time Greeting ---\n  function getTimeGreeting() {\n    const hour = new Date().getHours();\n    if (hour >= 5 && hour < 12) {\n      return { text: \"Good morning\", icon: \"ðŸŒ…\" };\n    } else if (hour >= 12 && hour < 17) {\n      return { text: \"Good afternoon\", icon: \"â˜€ï¸\" };\n    } else if (hour >= 17 && hour < 21) {\n      return { text: \"Good evening\", icon: \"ðŸŒ†\" };\n    } else {\n      return { text: \"Good night\", icon: \"ðŸŒ™\" };\n    }\n  }\n\n  // --- Streak Management ---\n  function getStreak() {\n    const streakData = localStorage.getItem('wellnessStreak');\n    if (!streakData) return { count: 0, lastDate: null };\n    \n    try {\n      const data = JSON.parse(streakData);\n      const today = new Date().toDateString();\n      const lastDate = new Date(data.lastDate).toDateString();\n      const yesterday = new Date(Date.now() - 86400000).toDateString();\n      \n      if (lastDate === today) {\n        return data;\n      } else if (lastDate === yesterday) {\n        return { count: data.count, lastDate: data.lastDate };\n      } else {\n        return { count: 0, lastDate: null };\n      }\n    } catch (e) {\n      return { count: 0, lastDate: null };\n    }\n  }\n\n  function updateStreak() {\n    const streak = getStreak();\n    const today = new Date().toDateString();\n    const lastDate = streak.lastDate ? new Date(streak.lastDate).toDateString() : null;\n    \n    if (lastDate === today) {\n      return streak.count;\n    }\n    \n    const newCount = lastDate === new Date(Date.now() - 86400000).toDateString() \n      ? streak.count + 1 \n      : 1;\n    \n    localStorage.setItem('wellnessStreak', JSON.stringify({\n      count: newCount,\n      lastDate: new Date().toISOString()\n    }));\n    \n    return newCount;\n  }\n\n  let lastMoodLogId = null;\n\n  async function syncStreakToSupabase(mood, moodScore, note) {\n    try {\n      if (!window.MindSpaceAuth) return;\n      const sb = window.MindSpaceAuth.getSupabase();\n      const user = window.MindSpaceAuth.getUser();\n      if (!sb || !user) return;\n\n      const moodScoreMap = { happy: 5, calm: 4, okay: 3, anxious: 2, sad: 1, stressed: 2 };\n      const score = moodScore || moodScoreMap[mood] || 3;\n\n      const insertData = {\n        user_id: user.id,\n        mood: mood,\n        mood_score: score\n      };\n      if (note) insertData.note = note;\n\n      const { data: inserted } = await sb.from('mood_logs').insert(insertData).select('id').single();\n      if (inserted) lastMoodLogId = inserted.id;\n\n      const todayStr = new Date().toISOString().split('T')[0];\n      const { data: existing } = await sb\n        .from('user_engagement')\n        .select('id')\n        .eq('user_id', user.id)\n        .eq('visit_date', todayStr)\n        .maybeSingle();\n\n      if (!existing) {\n        await sb.from('user_engagement').insert({\n          user_id: user.id,\n          visit_date: todayStr,\n          articles_read: 0,\n          time_spent_minutes: 0\n        });\n      }\n\n      if (window.MindSpaceAuth.updateStreakFromActivity) {\n        await window.MindSpaceAuth.updateStreakFromActivity(user.id);\n      }\n    } catch (e) {\n      console.error('[Wellness Check-In] Streak sync error:', e);\n    }\n  }\n\n  async function saveNoteToMoodLog(note) {\n    try {\n      if (!lastMoodLogId || !note) return false;\n      if (!window.MindSpaceAuth) return false;\n      const sb = window.MindSpaceAuth.getSupabase();\n      const user = window.MindSpaceAuth.getUser();\n      if (!sb || !user) return false;\n\n      const { error } = await sb.from('mood_logs')\n        .update({ note: note })\n        .eq('id', lastMoodLogId)\n        .eq('user_id', user.id);\n\n      return !error;\n    } catch (e) {\n      console.error('[Wellness Check-In] Note save error:', e);\n      return false;\n    }\n  }\n\n  // --- Community Moods ---\n  function getCommunityMoods() {\n    const stored = sessionStorage.getItem('communityMoods');\n    if (stored) {\n      return JSON.parse(stored);\n    }\n    \n    const moods = {\n      happy: 28 + Math.floor(Math.random() * 10),\n      calm: 22 + Math.floor(Math.random() * 8),\n      okay: 20 + Math.floor(Math.random() * 10),\n      anxious: 12 + Math.floor(Math.random() * 5),\n      sad: 8 + Math.floor(Math.random() * 4),\n      stressed: 10 + Math.floor(Math.random() * 5)\n    };\n    \n    sessionStorage.setItem('communityMoods', JSON.stringify(moods));\n    return moods;\n  }\n\n  // --- Motion Preferences ---\n  function prefersReducedMotion() {\n    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n  }\n\n  // --- Visual Effects ---\n  function createConfetti(container) {\n    if (prefersReducedMotion()) return;\n    \n    const colors = ['#10b981', '#06b6d4', '#f59e0b', '#ec4899', '#8b5cf6'];\n    const confettiCount = 50;\n    \n    for (let i = 0; i < confettiCount; i++) {\n      const confetti = document.createElement('div');\n      confetti.style.cssText = `\n        position: absolute;\n        width: ${Math.random() * 10 + 5}px;\n        height: ${Math.random() * 10 + 5}px;\n        background: ${colors[Math.floor(Math.random() * colors.length)]};\n        left: ${Math.random() * 100}%;\n        top: -10px;\n        opacity: ${Math.random() * 0.7 + 0.3};\n        border-radius: ${Math.random() > 0.5 ? '50%' : '0'};\n        animation: confetti-fall ${Math.random() * 2 + 2}s ease-out forwards;\n      `;\n      container.appendChild(confetti);\n      \n      setTimeout(() => confetti.remove(), 3000);\n    }\n    \n    if (!document.getElementById('confetti-styles')) {\n      const style = document.createElement('style');\n      style.id = 'confetti-styles';\n      style.textContent = `\n        @keyframes confetti-fall {\n          0% { transform: translateY(0) rotate(0deg); opacity: 1; }\n          100% { transform: translateY(400px) rotate(720deg); opacity: 0; }\n        }\n      `;\n      document.head.appendChild(style);\n    }\n  }\n\n  function createRipple(container, x, y) {\n    const ripple = document.createElement('div');\n    ripple.className = 'wellness-checkin__ripple';\n    ripple.style.cssText = `\n      left: ${x}px;\n      top: ${y}px;\n      width: 100px;\n      height: 100px;\n    `;\n    container.appendChild(ripple);\n    \n    setTimeout(() => ripple.remove(), 1000);\n  }\n\n  // --- Haptic Feedback ---\n  function hapticFeedback(type = 'light') {\n    if ('vibrate' in navigator) {\n      const patterns = {\n        light: [10],\n        medium: [20],\n        heavy: [30, 10, 30]\n      };\n      navigator.vibrate(patterns[type] || patterns.light);\n    }\n  }\n\n  // --- Initialization ---\n  function init() {\n    const section = document.querySelector('.wellness-checkin');\n    if (!section) return;\n\n    const container = section.querySelector('.wellness-checkin__container');\n    const greetingEl = section.querySelector('.wellness-checkin__time-greeting');\n    const streakEl = section.querySelector('.wellness-checkin__streak');\n    const moodButtons = section.querySelectorAll('.wellness-checkin__mood-btn');\n    const responseEl = section.querySelector('.wellness-checkin__response');\n    const defaultTipEl = section.querySelector('.wellness-checkin__default-tip');\n    const communityBar = section.querySelector('.wellness-checkin__community-bar');\n    const confettiCanvas = section.querySelector('.wellness-checkin__confetti');\n    const noteInput = section.querySelector('.wellness-checkin__note-input');\n    const noteSaveBtn = section.querySelector('.wellness-checkin__note-save');\n\n    // --- Greeting Setup ---\n    if (greetingEl) {\n      const greeting = getTimeGreeting();\n      const iconSpan = greetingEl.querySelector('.wellness-checkin__time-icon');\n      const textSpan = greetingEl.querySelector('span:not(.wellness-checkin__time-icon)');\n      if (iconSpan) iconSpan.textContent = greeting.icon;\n      if (textSpan) textSpan.textContent = greeting.text;\n    }\n\n    // --- Streak Setup ---\n    const streak = getStreak();\n    if (streakEl) {\n      if (streak.count > 0) {\n        streakEl.querySelector('.wellness-checkin__streak-count').textContent = streak.count;\n        streakEl.style.display = 'inline-flex';\n      } else {\n        streakEl.style.display = 'none';\n      }\n    }\n\n    // --- Daily Tip Setup ---\n    if (defaultTipEl) {\n      const today = new Date().getDay();\n      const tip = dailyTips[today];\n      const iconEl = defaultTipEl.querySelector('.wellness-checkin__default-tip-icon');\n      const titleEl = defaultTipEl.querySelector('.wellness-checkin__default-tip-title');\n      const textEl = defaultTipEl.querySelector('.wellness-checkin__default-tip-text');\n      \n      if (iconEl) iconEl.textContent = tip.icon;\n      if (titleEl) titleEl.textContent = tip.title;\n      if (textEl) textEl.textContent = tip.text;\n    }\n\n    // --- Community Mood Bar ---\n    if (communityBar) {\n      const moods = getCommunityMoods();\n      const total = Object.values(moods).reduce((a, b) => a + b, 0);\n      \n      Object.entries(moods).forEach(([mood, count]) => {\n        const segment = communityBar.querySelector(`[data-mood=\"${mood}\"]`);\n        if (segment) {\n          segment.style.width = `${(count / total) * 100}%`;\n        }\n      });\n\n      const legend = section.querySelector('.wellness-checkin__community-legend');\n      if (legend) {\n        Object.entries(moods).forEach(([mood, count]) => {\n          const item = legend.querySelector(`[data-mood=\"${mood}\"] .wellness-checkin__legend-percent`);\n          if (item) {\n            item.textContent = `${Math.round((count / total) * 100)}%`;\n          }\n        });\n      }\n    }\n\n    // --- Mood Button Handlers ---\n    moodButtons.forEach(btn => {\n      btn.addEventListener('click', () => {\n        const mood = btn.dataset.mood;\n        const data = moodData[mood];\n        if (!data) return;\n\n        hapticFeedback('medium');\n\n        moodButtons.forEach(b => b.classList.remove('is-selected'));\n        btn.classList.add('is-selected');\n\n        if (noteInput) {\n          noteInput.value = '';\n        }\n        if (noteSaveBtn) {\n          noteSaveBtn.textContent = 'Save Note';\n          noteSaveBtn.classList.remove('is-saved');\n        }\n\n        const newStreak = updateStreak();\n        if (streakEl) {\n          streakEl.querySelector('.wellness-checkin__streak-count').textContent = newStreak;\n          streakEl.style.display = 'inline-flex';\n        }\n\n        syncStreakToSupabase(mood);\n\n        if (confettiCanvas && (mood === 'happy' || mood === 'calm')) {\n          createConfetti(confettiCanvas);\n        }\n\n        if (mood === 'anxious' || mood === 'stressed') {\n          const rect = container.getBoundingClientRect();\n          const x = btn.getBoundingClientRect().left - rect.left + btn.offsetWidth / 2;\n          const y = btn.getBoundingClientRect().top - rect.top + btn.offsetHeight / 2;\n          createRipple(container, x, y);\n        }\n\n        if (defaultTipEl) defaultTipEl.style.display = 'none';\n        \n        if (responseEl) {\n          const affirmationEl = responseEl.querySelector('.wellness-checkin__affirmation');\n          const tipTitleEl = responseEl.querySelector('.wellness-checkin__tip-title');\n          const tipTextEl = responseEl.querySelector('.wellness-checkin__tip-text');\n          const tipCard = responseEl.querySelector('.wellness-checkin__tip');\n          const actionsEl = responseEl.querySelector('.wellness-checkin__actions');\n\n          if (affirmationEl) {\n            affirmationEl.innerHTML = `<span>${data.emoji}</span> ${data.affirmation}`;\n          }\n          if (tipTitleEl) tipTitleEl.textContent = data.tipTitle;\n          if (tipTextEl) tipTextEl.textContent = data.tip;\n          if (tipCard) tipCard.style.borderLeftColor = data.color;\n\n          if (actionsEl) {\n            actionsEl.innerHTML = data.actions.map(action => `\n              <a href=\"${action.href}\" class=\"wellness-checkin__action-btn wellness-checkin__action-btn--${action.primary ? 'primary' : 'secondary'}\">\n                <span>${action.icon}</span>\n                ${action.text}\n              </a>\n            `).join('');\n          }\n\n          responseEl.style.setProperty('--mood-accent', data.color);\n          responseEl.style.setProperty('--mood-accent-dark', data.colorDark);\n\n          responseEl.classList.add('is-visible');\n        }\n\n        section.style.setProperty('--selected-mood-color', data.color);\n      });\n    });\n\n    if (noteSaveBtn && noteInput) {\n      noteSaveBtn.addEventListener('click', async () => {\n        const noteText = noteInput.value.trim();\n        if (!noteText) return;\n\n        noteSaveBtn.textContent = 'Saving...';\n        noteSaveBtn.disabled = true;\n\n        const success = await saveNoteToMoodLog(noteText);\n        if (success) {\n          noteSaveBtn.textContent = 'Saved!';\n          noteSaveBtn.classList.add('is-saved');\n        } else {\n          noteSaveBtn.textContent = 'Save Note';\n          noteSaveBtn.disabled = false;\n        }\n      });\n    }\n\n    console.log('[Wellness Check-In] Initialized');\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n})();\n","path":null,"size_bytes":18173,"size_tokens":null},"mindspace-build/profile/profile-ai.js":{"content":"// ==================== AI WELLNESS INSIGHTS ====================\n\n(function() {\n  'use strict';\n  \n  // --- State ---\n  let insightsLoaded = false;\n  \n  // --- Fallback Messages ---\n  const FALLBACK_MESSAGES = [\n    { message: 'Keep tracking your wellness journey - every step counts!', affirmation: 'You are capable of amazing things.' },\n    { message: 'Your dedication to self-care makes a real difference.', affirmation: 'Every day is a chance to grow stronger.' },\n    { message: 'Small steps lead to big changes in your wellbeing.', affirmation: 'You have the strength to overcome any challenge.' },\n    { message: 'Taking time for yourself is never wasted time.', affirmation: 'Your mental health matters deeply.' },\n    { message: 'Progress, not perfection, is what truly matters.', affirmation: 'Be proud of how far you have come.' },\n    { message: 'Your commitment to wellness inspires positive change.', affirmation: 'You deserve all the happiness in the world.' },\n    { message: 'Checking in with yourself is a powerful habit.', affirmation: 'Today is full of new possibilities.' },\n    { message: 'Awareness is the first step toward positive growth.', affirmation: 'You are worthy of love and care.' }\n  ];\n  \n  function getRandomFallback() {\n    const index = Math.floor(Math.random() * FALLBACK_MESSAGES.length);\n    return FALLBACK_MESSAGES[index];\n  }\n  \n  // --- Sanitization ---\n  function sanitizeText(text) {\n    if (!text || typeof text !== 'string') return '';\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n  \n  // --- Load AI Insights ---\n  let retryCount = 0;\n  const MAX_RETRIES = 5;\n  \n  async function loadAIInsights() {\n    if (insightsLoaded) return;\n    \n    const contentEl = document.getElementById('aiInsightsContent');\n    const affirmationEl = document.getElementById('aiAffirmation');\n    \n    if (!contentEl) {\n      console.log('[AI Insights] Content element not found');\n      return;\n    }\n    \n    function showFallback(message, affirmation, isFinal = true) {\n      contentEl.innerHTML = '';\n      const p = document.createElement('p');\n      p.textContent = message;\n      contentEl.appendChild(p);\n      if (affirmationEl) {\n        affirmationEl.textContent = `\"${affirmation}\"`;\n        affirmationEl.style.display = 'block';\n      }\n      if (isFinal) {\n        insightsLoaded = true;\n      }\n    }\n    \n    if (!window.supabaseClient) {\n      retryCount++;\n      if (retryCount < MAX_RETRIES) {\n        console.log(`[AI Insights] Waiting for Supabase... (attempt ${retryCount}/${MAX_RETRIES})`);\n        setTimeout(loadAIInsights, 1000);\n        return;\n      }\n      console.log('[AI Insights] Supabase not available after retries');\n      const fallback = getRandomFallback();\n      showFallback(fallback.message, fallback.affirmation);\n      return;\n    }\n    \n    try {\n      const { data: { user } } = await window.supabaseClient.auth.getUser();\n      if (!user) {\n        showFallback('Sign in to see your personalized wellness insights.', 'Your journey to wellness starts here.');\n        return;\n      }\n      \n      const [moodResult, goalsResult, profileResult] = await Promise.all([\n        window.supabaseClient\n          .from('mood_logs')\n          .select('mood_level, note, created_at')\n          .eq('user_id', user.id)\n          .order('created_at', { ascending: false })\n          .limit(30),\n        window.supabaseClient\n          .from('wellness_goals')\n          .select('id, title, category, completed')\n          .eq('user_id', user.id),\n        window.supabaseClient\n          .from('profiles')\n          .select('current_streak, longest_streak')\n          .eq('id', user.id)\n          .single()\n      ]);\n      \n      const moodData = moodResult.data || [];\n      const goalsData = goalsResult.data || [];\n      const profile = profileResult.data || {};\n      \n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 15000);\n      \n      try {\n        const response = await fetch('/api/wellness/insights', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            mood_data: moodData,\n            goals_data: goalsData,\n            streak_data: {\n              current_streak: profile.current_streak || 0,\n              longest_streak: profile.longest_streak || 0\n            }\n          }),\n          signal: controller.signal\n        });\n        \n        clearTimeout(timeoutId);\n        \n        const result = await response.json();\n        \n        if (result.success !== false && result.insight) {\n          contentEl.innerHTML = '';\n          const p = document.createElement('p');\n          p.textContent = result.insight;\n          contentEl.appendChild(p);\n          \n          if (result.affirmation && affirmationEl) {\n            affirmationEl.textContent = `\"${result.affirmation}\"`;\n            affirmationEl.style.display = 'block';\n          }\n          insightsLoaded = true;\n          console.log('[AI Insights] Successfully loaded personalized insight');\n        } else {\n          console.log('[AI Insights] API returned no insight, using fallback. Response:', result);\n          const fallback = getRandomFallback();\n          showFallback(fallback.message, fallback.affirmation);\n        }\n      } catch (fetchErr) {\n        clearTimeout(timeoutId);\n        console.log('[AI Insights] API call failed:', fetchErr.message);\n        const fallback = getRandomFallback();\n        showFallback(fallback.message, fallback.affirmation);\n      }\n      \n    } catch (err) {\n      console.error('[AI Insights] Error:', err);\n      const fallback = getRandomFallback();\n      showFallback(fallback.message, fallback.affirmation);\n    }\n  }\n  \n  // --- Mood Analysis ---\n  async function loadMoodAnalysis() {\n    try {\n      const { data: { user } } = await window.supabaseClient.auth.getUser();\n      if (!user) return null;\n      \n      const { data: moodEntries } = await window.supabaseClient\n        .from('mood_logs')\n        .select('mood_level, note, created_at')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false })\n        .limit(30);\n      \n      const response = await fetch('/api/wellness/mood-analysis', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ mood_entries: moodEntries || [] })\n      });\n      \n      return await response.json();\n    } catch (err) {\n      console.error('Mood analysis error:', err);\n      return null;\n    }\n  }\n  \n  // --- Goal Suggestions ---\n  async function getGoalSuggestion() {\n    try {\n      const { data: { user } } = await window.supabaseClient.auth.getUser();\n      if (!user) return null;\n      \n      const { data: goals } = await window.supabaseClient\n        .from('wellness_goals')\n        .select('id, title, category, completed')\n        .eq('user_id', user.id);\n      \n      const currentGoals = (goals || []).filter(g => !g.completed);\n      const completedGoals = (goals || []).filter(g => g.completed);\n      \n      const response = await fetch('/api/wellness/goal-suggestion', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ \n          current_goals: currentGoals,\n          completed_goals: completedGoals\n        })\n      });\n      \n      return await response.json();\n    } catch (err) {\n      console.error('Goal suggestion error:', err);\n      return null;\n    }\n  }\n  \n  // --- Display Mood Analysis ---\n  async function displayMoodAnalysis() {\n    const moodTrendEl = document.getElementById('moodTrendValue');\n    if (!moodTrendEl) return;\n    \n    const result = await loadMoodAnalysis();\n    if (result && result.success !== false) {\n      if (result.analysis) {\n        moodTrendEl.textContent = result.analysis.split(' ')[0] || 'Stable';\n        moodTrendEl.title = result.analysis;\n      }\n      \n      if (result.suggestion) {\n        const suggestionEl = document.createElement('div');\n        suggestionEl.className = 'ai-mood-suggestion';\n        \n        const icon = document.createElement('ion-icon');\n        icon.setAttribute('name', 'bulb-outline');\n        \n        const span = document.createElement('span');\n        span.textContent = result.suggestion;\n        \n        suggestionEl.appendChild(icon);\n        suggestionEl.appendChild(span);\n        \n        const moodInsights = document.getElementById('moodInsights');\n        if (moodInsights && !moodInsights.querySelector('.ai-mood-suggestion')) {\n          moodInsights.appendChild(suggestionEl);\n        }\n      }\n    }\n  }\n  \n  // --- Display Goal Suggestion ---\n  async function displayGoalSuggestion() {\n    const goalsSection = document.querySelector('.mb-profile__wellness-section:has(.mb-profile__goals-list), .mb-profile__goals-section');\n    if (!goalsSection) return;\n    \n    if (goalsSection.querySelector('.ai-goal-suggestion')) return;\n    \n    const result = await getGoalSuggestion();\n    if (result && result.success !== false && result.goal) {\n      const suggestionEl = document.createElement('div');\n      suggestionEl.className = 'ai-goal-suggestion glass-card';\n      \n      const header = document.createElement('div');\n      header.className = 'ai-goal-suggestion__header';\n      const headerIcon = document.createElement('ion-icon');\n      headerIcon.setAttribute('name', 'sparkles');\n      const headerText = document.createElement('span');\n      headerText.textContent = 'AI Suggestion';\n      header.appendChild(headerIcon);\n      header.appendChild(headerText);\n      \n      const goalText = document.createElement('p');\n      goalText.className = 'ai-goal-suggestion__text';\n      goalText.textContent = result.goal;\n      \n      const reasonText = document.createElement('p');\n      reasonText.className = 'ai-goal-suggestion__reason';\n      reasonText.textContent = result.why || '';\n      \n      const addBtn = document.createElement('button');\n      addBtn.className = 'ai-goal-suggestion__add';\n      const btnIcon = document.createElement('ion-icon');\n      btnIcon.setAttribute('name', 'add-outline');\n      addBtn.appendChild(btnIcon);\n      addBtn.appendChild(document.createTextNode(' Add This Goal'));\n      \n      const goalData = {\n        title: result.goal,\n        category: result.category || 'mindfulness'\n      };\n      \n      addBtn.addEventListener('click', function() {\n        window.addSuggestedGoal(goalData.title, goalData.category);\n      });\n      \n      suggestionEl.appendChild(header);\n      suggestionEl.appendChild(goalText);\n      suggestionEl.appendChild(reasonText);\n      suggestionEl.appendChild(addBtn);\n      \n      const sectionHeader = goalsSection.querySelector('h3');\n      if (sectionHeader && sectionHeader.nextSibling) {\n        sectionHeader.parentNode.insertBefore(suggestionEl, sectionHeader.nextSibling);\n      } else {\n        goalsSection.appendChild(suggestionEl);\n      }\n    }\n  }\n  \n  // --- Initialization ---\n  function initAIInsights() {\n    const wellnessTab = document.querySelector('[data-tab=\"wellness\"]');\n    if (wellnessTab) {\n      wellnessTab.addEventListener('click', () => {\n        setTimeout(() => {\n          loadAIInsights();\n          displayMoodAnalysis();\n          displayGoalSuggestion();\n        }, 300);\n      });\n    }\n    \n    const wellnessPanel = document.getElementById('wellnessPanel');\n    if (wellnessPanel && wellnessPanel.classList.contains('is-active')) {\n      setTimeout(() => {\n        loadAIInsights();\n        displayMoodAnalysis();\n        displayGoalSuggestion();\n      }, 500);\n    }\n    \n    window.addEventListener('profileLoaded', () => {\n      const wellnessPanel = document.getElementById('wellnessPanel');\n      if (wellnessPanel && wellnessPanel.classList.contains('is-active')) {\n        loadAIInsights();\n        displayMoodAnalysis();\n        displayGoalSuggestion();\n      }\n    });\n  }\n  \n  // --- Add Suggested Goal ---\n  window.addSuggestedGoal = async function(title, category) {\n    if (!window.supabaseClient) return;\n    \n    try {\n      const { data: { user } } = await window.supabaseClient.auth.getUser();\n      if (!user) return;\n      \n      await window.supabaseClient\n        .from('wellness_goals')\n        .insert({\n          user_id: user.id,\n          title: title,\n          category: category,\n          completed: false\n        });\n      \n      const suggestionEl = document.querySelector('.ai-goal-suggestion');\n      if (suggestionEl) {\n        suggestionEl.remove();\n      }\n      \n      if (typeof window.loadWellnessGoals === 'function') {\n        window.loadWellnessGoals();\n      }\n      \n      if (window.ImmersiveProfile?.triggerHaptic) {\n        window.ImmersiveProfile.triggerHaptic('medium');\n      }\n    } catch (err) {\n      console.error('Failed to add goal:', err);\n    }\n  };\n\n  // --- Public API ---\n  window.AIWellness = {\n    loadInsights: loadAIInsights,\n    getMoodAnalysis: loadMoodAnalysis,\n    getGoalSuggestion: getGoalSuggestion\n  };\n  \n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initAIInsights);\n  } else {\n    initAIInsights();\n  }\n})();\n","path":null,"size_bytes":13267,"size_tokens":null},"scripts/build_mindspace.py":{"content":"#!/usr/bin/env python3\nimport os\nimport shutil\nimport re\nimport json\n\nSOURCE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\nOUTPUT_DIR = os.path.join(SOURCE_DIR, \"mindspace-build\")\n\nEXCLUDE_DIRS = {\n    \"docs\",\n    \"scripts\",\n    \"mindspace-build\",\n    \".git\",\n    \".cache\",\n    \".config\",\n    \".upm\",\n    \".pythonlibs\",\n    \"node_modules\",\n    \"__pycache__\",\n    \"attached_assets\",\n    \".local\",\n}\n\nEXCLUDE_FILES = {\n    \"main.py\",\n    \"replit.md\",\n    \".replit\",\n    \"replit.nix\",\n    \".gitignore\",\n    \"poetry.lock\",\n    \"pyproject.toml\",\n    \".replit.nix\",\n    \"docs.css\",\n    \"server.py\",\n    \"uv.lock\",\n    \"translations.csv\",\n    \"analytics.py\",\n    \".replit.backup\",\n    \".gititnore\",\n    \"mindspace-favicon.png\",\n    \"mindspace-preload.gif\",\n    \"mindspace-logo.png\",\n    \"wellness_insights.py\",\n    \"__init__.py\",\n}\n\nTEXT_EXTENSIONS = {\n    \".html\", \".css\", \".js\", \".json\", \".py\", \".md\", \".txt\", \".svg\",\n}\n\nNAVBAR_DOCS_PATTERN = re.compile(\n    r'<li\\s+class=\"navbar-item\">\\s*'\n    r'<a\\s+href=\"/docs/\"[^>]*>.*?'\n    r'<span[^>]*data-translate=\"nav_docs\"[^>]*>[^<]*</span>\\s*'\n    r'</a>\\s*'\n    r'</li>',\n    re.DOTALL\n)\n\nVERCEL_DOCS_REWRITE = re.compile(\n    r'\\s*\\{\\s*\"source\"\\s*:\\s*\"/docs/\"\\s*,\\s*\"destination\"\\s*:\\s*\"/docs/index\\.html\"\\s*\\}\\s*,?',\n)\n\nCSS_DOCS_LINK = re.compile(\n    r'<link\\s+rel=\"stylesheet\"\\s+href=\"/css/docs\\.css\"\\s*/?>\\s*\\n?',\n)\n\n\ndef should_exclude(path):\n    parts = path.split(os.sep)\n    for part in parts:\n        if part in EXCLUDE_DIRS:\n            return True\n    basename = os.path.basename(path)\n    if basename in EXCLUDE_FILES:\n        return True\n    return False\n\n\ndef is_text_file(filepath):\n    _, ext = os.path.splitext(filepath)\n    return ext.lower() in TEXT_EXTENSIONS\n\n\nCOLOR_REPLACEMENTS = [\n    (\"#af916d\", \"#5BA4E6\"),\n    (\"#9d8260\", \"#4893D4\"),\n    (\"#d4a574\", \"#7BBDF7\"),\n    (\"#b89b5e\", \"#1A4F85\"),\n    (\"#a08550\", \"#163F6E\"),\n    (\"#c9a227\", \"#3B8DD4\"),\n    (\"#d4aa00\", \"#3B8DD4\"),\n    (\"#c49464\", \"#4893D4\"),\n    (\"#c49466\", \"#4893D4\"),\n    (\"#d4b896\", \"#A8D4FF\"),\n    (\"#e4c094\", \"#A8D4FF\"),\n    (\"#e8dfd4\", \"#D6EBFF\"),\n\n    (\"#d6bd9f\", \"#2068A8\"),\n    (\"#c4a985\", \"#1B5A94\"),\n    (\"#c4a67a\", \"#1B5A94\"),\n    (\"#8b7355\", \"#143E6B\"),\n    (\"#8c7455\", \"#112D4E\"),\n    (\"#a08565\", \"#143A5E\"),\n    (\"#d4a853\", \"#2068A8\"),\n\n    (\"#f2a33b\", \"#4A93D4\"),\n    (\"#e8943a\", \"#3B8DD4\"),\n    (\"#f2c200\", \"#5BA4E6\"),\n    (\"#e6b800\", \"#4893D4\"),\n    (\"#e5a800\", \"#4893D4\"),\n    (\"#d49600\", \"#3B8DD4\"),\n\n    (\"#d4c4a8\", \"#a3c8ed\"),\n    (\"#7a6548\", \"#2d6ab0\"),\n    (\"#6b5635\", \"#245a8c\"),\n    (\"#f0ede8\", \"#e0f0ff\"),\n\n    (\"#e8c9a0\", \"#a3d1f7\"),\n    (\"#d4c4b0\", \"#a3c8ed\"),\n    (\"#c9ad8c\", \"#7BBDF7\"),\n    (\"#d0c8bc\", \"#b8d8f8\"),\n    (\"#a09080\", \"#6b9cc4\"),\n    (\"#b5844f\", \"#2d6ab0\"),\n    (\"#e4b584\", \"#7BBDF7\"),\n    (\"#c99640\", \"#2d6ab0\"),\n    (\"#d6a756\", \"#4A93D4\"),\n    (\"#e8c074\", \"#7BBDF7\"),\n    (\"#e8b060\", \"#5BA4E6\"),\n    (\"#e8c77b\", \"#7BBDF7\"),\n    (\"#d9940a\", \"#2d6ab0\"),\n    (\"#f0a500\", \"#3B8DD4\"),\n\n    (\"#f5f0e8\", \"#bde0fe\"),\n    (\"#f8f6f2\", \"#d4ecff\"),\n    (\"#fbf4e8\", \"#bde0fe\"),\n    (\"#e8e4dc\", \"#a3d1f7\"),\n    (\"#e8e4df\", \"#a3d1f7\"),\n    (\"#f8f6f3\", \"#d4ecff\"),\n\n    (\"#9b7ed9\", \"#6DB3F2\"),\n    (\"#7c5fc4\", \"#4A93D4\"),\n    (\"#8a6dc8\", \"#5CA3E6\"),\n    (\"#b794f6\", \"#8ECAFF\"),\n    (\"#7c5fb8\", \"#4A93D4\"),\n    (\"#7c5cbf\", \"#4A93D4\"),\n    (\"#6366f1\", \"#3B8DD4\"),\n    (\"#7a5dc7\", \"#4A93D4\"),\n\n    (\"175, 145, 109\", \"91, 164, 230\"),\n    (\"155, 126, 217\", \"109, 179, 242\"),\n\n    (\"242, 163, 59\", \"32, 104, 168\"),\n    (\"242, 194, 0\", \"32, 104, 168\"),\n\n    (\"#e8c87a\", \"#7BBDF7\"),\n    (\"#EBF3FC\", \"#bde0fe\"),\n    (\"#EFF5FC\", \"#d4ecff\"),\n    (\"#D6E8F8\", \"#a3d1f7\"),\n\n    (\"#f79f9b\", \"#38b6ff\"),\n]\n\n\ndef transform_content(content, filepath):\n    basename = os.path.basename(filepath)\n    _, ext = os.path.splitext(filepath)\n\n    content = NAVBAR_DOCS_PATTERN.sub(\"\", content)\n\n    content = CSS_DOCS_LINK.sub(\"\", content)\n\n    if basename == \"vercel.json\":\n        content = VERCEL_DOCS_REWRITE.sub(\"\", content)\n\n    content = content.replace(\"MindBalance\", \"MindSpace\")\n    content = content.replace(\"mindbalance\", \"mindspace\")\n    content = content.replace(\"MINDBALANCE\", \"MINDSPACE\")\n    content = content.replace(\"Mindbalance\", \"Mindspace\")\n\n    content = content.replace(\"gold-crayola\", \"blue-crayola\")\n    content = content.replace(\"gold_crayola\", \"blue_crayola\")\n\n    SETTINGS_FILES = {\"settings.js\", \"settings-modal.js\"}\n    is_settings_file = basename in SETTINGS_FILES\n\n    if ext.lower() in {\".css\", \".html\", \".js\"} and not is_settings_file:\n        for old_color, new_color in COLOR_REPLACEMENTS:\n            content = re.sub(re.escape(old_color), new_color, content, flags=re.IGNORECASE)\n\n    if ext.lower() == \".js\":\n        if is_settings_file:\n            MINDSPACE_ACCENT_COLORS_SETTINGS = \"\"\"  const ACCENT_COLORS = {\n    blue:   { hex: '#5BA4E6', hover: '#4893D4', rgb: '91, 164, 230', light: '#a3c8ed', soft: '#bde0fe', dark: '#2d6ab0', gradEnd: '#7BBDF7', text: '#245a8c' },\n    purple: { hex: '#9b7ed9', hover: '#8a6dc8', rgb: '155, 126, 217', light: '#c9b8ec', soft: '#f3eefb', dark: '#6b4fb5', gradEnd: '#b99ae6', text: '#5a3d9e' },\n    sky:    { hex: '#4a90d9', hover: '#3d7fc8', rgb: '74, 144, 217',  light: '#a3c8ed', soft: '#eaf2fb', dark: '#2d6ab0', gradEnd: '#6daeed', text: '#245a8c' },\n    green:  { hex: '#4db896', hover: '#3fa884', rgb: '77, 184, 150',  light: '#a3dbc7', soft: '#e8f7f1', dark: '#2e8a6a', gradEnd: '#6fd4aa', text: '#267558' },\n    teal:   { hex: '#38b2ac', hover: '#2d9d98', rgb: '56, 178, 172',  light: '#96d8d4', soft: '#e6f5f4', dark: '#238079', gradEnd: '#5fccc6', text: '#1d6b65' },\n    pink:   { hex: '#d97eab', hover: '#c86d9a', rgb: '217, 126, 171', light: '#ecbdd5', soft: '#fbeef4', dark: '#b4547f', gradEnd: '#e9a3c3', text: '#993f6a' },\n    orange: { hex: '#e09c5c', hover: '#d08b4b', rgb: '224, 156, 92',  light: '#f0cca3', soft: '#fdf3e8', dark: '#b87430', gradEnd: '#edb87a', text: '#9a6228' },\n    red:    { hex: '#e07070', hover: '#d05f5f', rgb: '224, 112, 112', light: '#f0b3b3', soft: '#fdeaea', dark: '#b84444', gradEnd: '#ed9494', text: '#9a3535' }\n  };\"\"\"\n\n            MINDSPACE_ACCENT_COLORS_MODAL = \"\"\"  const ACCENT_COLORS = {\n    blue:   { hex: '#5BA4E6', hover: '#4893D4', rgb: '91, 164, 230', light: '#a3c8ed', soft: '#bde0fe', dark: '#2d6ab0', gradEnd: '#7BBDF7', text: '#245a8c', name: 'Blue' },\n    purple: { hex: '#9b7ed9', hover: '#8a6dc8', rgb: '155, 126, 217', light: '#c9b8ec', soft: '#f3eefb', dark: '#6b4fb5', gradEnd: '#b99ae6', text: '#5a3d9e', name: 'Purple' },\n    sky:    { hex: '#4a90d9', hover: '#3d7fc8', rgb: '74, 144, 217',  light: '#a3c8ed', soft: '#eaf2fb', dark: '#2d6ab0', gradEnd: '#6daeed', text: '#245a8c', name: 'Sky' },\n    green:  { hex: '#4db896', hover: '#3fa884', rgb: '77, 184, 150',  light: '#a3dbc7', soft: '#e8f7f1', dark: '#2e8a6a', gradEnd: '#6fd4aa', text: '#267558', name: 'Green' },\n    teal:   { hex: '#38b2ac', hover: '#2d9d98', rgb: '56, 178, 172',  light: '#96d8d4', soft: '#e6f5f4', dark: '#238079', gradEnd: '#5fccc6', text: '#1d6b65', name: 'Teal' },\n    pink:   { hex: '#d97eab', hover: '#c86d9a', rgb: '217, 126, 171', light: '#ecbdd5', soft: '#fbeef4', dark: '#b4547f', gradEnd: '#e9a3c3', text: '#993f6a', name: 'Pink' },\n    orange: { hex: '#e09c5c', hover: '#d08b4b', rgb: '224, 156, 92',  light: '#f0cca3', soft: '#fdf3e8', dark: '#b87430', gradEnd: '#edb87a', text: '#9a6228', name: 'Orange' },\n    red:    { hex: '#e07070', hover: '#d05f5f', rgb: '224, 112, 112', light: '#f0b3b3', soft: '#fdeaea', dark: '#b84444', gradEnd: '#ed9494', text: '#9a3535', name: 'Red' }\n  };\"\"\"\n\n            content = re.sub(\n                r'const ACCENT_COLORS\\s*=\\s*\\{.*?\\};',\n                lambda m: MINDSPACE_ACCENT_COLORS_MODAL.strip() if \"name:\" in m.group() else MINDSPACE_ACCENT_COLORS_SETTINGS.strip(),\n                content,\n                count=1,\n                flags=re.DOTALL\n            )\n\n        content = content.replace(\"data-accent-color=\\\"blue\\\"\", \"data-accent-color=\\\"sky\\\"\")\n\n        content = content.replace(\"DEFAULT_ACCENT = 'gold'\", \"DEFAULT_ACCENT = 'blue'\")\n        content = content.replace(\"ACCENT_COLORS.gold\", \"ACCENT_COLORS.blue\")\n        content = content.replace(\"accentColor, 'gold'\", \"accentColor, 'blue'\")\n        content = content.replace(\"applyAccentColor?.('gold')\", \"applyAccentColor?.('blue')\")\n        content = content.replace(\"accent: 'gold'\", \"accent: 'blue'\")\n        content = content.replace(\"colorName : 'gold'\", \"colorName : 'blue'\")\n        content = content.replace(\"? colorName : 'gold'\", \"? colorName : 'blue'\")\n        content = content.replace(\"accentColor, 'gold')\", \"accentColor, 'blue')\")\n        content = re.sub(r\"getPreference\\(STORAGE_KEYS\\.accentColor,\\s*'gold'\\)\", \"getPreference(STORAGE_KEYS.accentColor, 'blue')\", content)\n        content = content.replace(\"|| '#af916d'\", \"|| '#5BA4E6'\")\n        content = content.replace(\"|| '#AF916D'\", \"|| '#5BA4E6'\")\n\n    if ext.lower() == \".html\":\n        content = re.sub(\n            r'data-accent-color=\"blue\"(.*?)style=\"--btn-color: #4a90d9\"',\n            r'data-accent-color=\"sky\"\\1style=\"--btn-color: #4a90d9\"',\n            content\n        )\n        content = content.replace('data-accent-color=\"gold\"', 'data-accent-color=\"blue\"')\n        content = content.replace(\"title=\\\"Gold\\\"\", \"title=\\\"Blue\\\"\")\n        content = content.replace(\"--gold-crayola\", \"--blue-crayola\")\n        content = content.replace(\n            'data-accent-color=\"purple\" title=\"Purple\" style=\"--btn-color: #6DB3F2\"',\n            'data-accent-color=\"purple\" title=\"Purple\" style=\"--btn-color: #9b7ed9\"'\n        )\n        content = content.replace(\"#f8a29e\", \"#38b6ff\")\n        content = content.replace(\"MindSpaceLogo.svg\", \"MindSpaceLogo.png\")\n        content = content.replace(\"MindBalanceLogo.svg\", \"MindSpaceLogo.png\")\n\n        if basename == \"index.html\" and \"auth\" in os.path.dirname(filepath).replace(\"\\\\\", \"/\"):\n            content = content.replace(\n                \"redirectTo: window.location.origin + '/auth/'\",\n                \"redirectTo: 'https://mindspace.site/auth/'\"\n            )\n            content = content.replace(\n                \"var targetUrl = 'https://mind' + 'space.site/auth/' + search + hash;\",\n                \"/* redirect handler not needed on MindSpace */\"\n            )\n            content = content.replace(\n                \"if (isOAuthCallback && !hasOAuthOrigin && !isMindSpaceDomain) {\",\n                \"if (false) {\"\n            )\n\n    if ext.lower() == \".css\":\n        content = content.replace(\"--gold-crayola\", \"--blue-crayola\")\n        content = content.replace(\"#f8a29e\", \"#38b6ff\")\n        content = content.replace(\"#AF916D\", \"#2068A8\")\n        content = content.replace(\"#af916d\", \"#2068a8\")\n\n\n    return content\n\n\ndef build():\n    git_dir = os.path.join(OUTPUT_DIR, \".git\")\n    git_backup = None\n    if os.path.exists(git_dir):\n        git_backup = os.path.join(SOURCE_DIR, \".mindspace-git-backup\")\n        if os.path.exists(git_backup):\n            shutil.rmtree(git_backup)\n        shutil.move(git_dir, git_backup)\n\n    if os.path.exists(OUTPUT_DIR):\n        shutil.rmtree(OUTPUT_DIR)\n    os.makedirs(OUTPUT_DIR)\n\n    if git_backup and os.path.exists(git_backup):\n        shutil.move(git_backup, git_dir)\n\n    file_count = 0\n    skipped = 0\n\n    for root, dirs, files in os.walk(SOURCE_DIR):\n        rel_root = os.path.relpath(root, SOURCE_DIR)\n\n        dirs[:] = [d for d in dirs if d not in EXCLUDE_DIRS]\n\n        for filename in files:\n            rel_path = os.path.join(rel_root, filename) if rel_root != \".\" else filename\n\n            if should_exclude(rel_path):\n                skipped += 1\n                continue\n\n            src_path = os.path.join(root, filename)\n            dst_path = os.path.join(OUTPUT_DIR, rel_path)\n\n            os.makedirs(os.path.dirname(dst_path), exist_ok=True)\n\n            if is_text_file(src_path):\n                try:\n                    with open(src_path, \"r\", encoding=\"utf-8\") as f:\n                        content = f.read()\n                    content = transform_content(content, src_path)\n                    with open(dst_path, \"w\", encoding=\"utf-8\") as f:\n                        f.write(content)\n                except (UnicodeDecodeError, PermissionError):\n                    shutil.copy2(src_path, dst_path)\n            else:\n                shutil.copy2(src_path, dst_path)\n\n            file_count += 1\n\n    rename_map = {\n        \"MindBalanceLogo.svg\": \"MindSpaceLogo.svg\",\n        \"MindBalanceHub.mp4\": \"MindSpaceHub.mp4\",\n    }\n    images_dir = os.path.join(OUTPUT_DIR, \"assets\", \"images\")\n    for old_name, new_name in rename_map.items():\n        old_path = os.path.join(images_dir, old_name)\n        if os.path.exists(old_path):\n            os.rename(old_path, os.path.join(images_dir, new_name))\n            print(f\"  Renamed: {old_name} -> {new_name}\")\n\n    ms_logo_src = os.path.join(SOURCE_DIR, \"assets\", \"images\", \"mindspace-logo.png\")\n    ms_logo_dst = os.path.join(images_dir, \"MindSpaceLogo.png\")\n    if os.path.exists(ms_logo_src):\n        shutil.copy2(ms_logo_src, ms_logo_dst)\n        print(\"  Replaced: logo with MindSpace PNG logo\")\n    old_svg_logo = os.path.join(images_dir, \"MindSpaceLogo.svg\")\n    if os.path.exists(old_svg_logo):\n        os.remove(old_svg_logo)\n\n    ms_favicon_src = os.path.join(SOURCE_DIR, \"assets\", \"images\", \"mindspace-favicon.png\")\n    ms_favicon_dst = os.path.join(images_dir, \"favicon.png\")\n    if os.path.exists(ms_favicon_src):\n        shutil.copy2(ms_favicon_src, ms_favicon_dst)\n        print(\"  Replaced: favicon.png with MindSpace logo\")\n\n    ms_preload_src = os.path.join(SOURCE_DIR, \"assets\", \"images\", \"mindspace-preload.gif\")\n    ms_preload_dst = os.path.join(images_dir, \"preload.gif\")\n    if os.path.exists(ms_preload_src):\n        shutil.copy2(ms_preload_src, ms_preload_dst)\n        print(\"  Replaced: preload.gif with MindSpace preloader\")\n\n    print(f\"MindSpace build complete!\")\n    print(f\"  Output: {OUTPUT_DIR}\")\n    print(f\"  Files copied: {file_count}\")\n    print(f\"  Files skipped: {skipped}\")\n\n\nif __name__ == \"__main__\":\n    build()\n","path":null,"size_bytes":14106,"size_tokens":null},"css/analytics.css":{"content":"/* === ACHIEVEMENT NOTIFICATION === */\n.mb-achievement-notification {\n  position: fixed;\n  bottom: 30px;\n  right: 30px;\n  background: linear-gradient(135deg, #1a1a2e 0%, #2a2a4a 100%);\n  border-radius: 16px;\n  padding: 20px 24px;\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(175, 145, 109, 0.3);\n  z-index: 99999;\n  transform: translateY(120px);\n  opacity: 0;\n  transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.4s ease;\n  max-width: 380px;\n  pointer-events: auto;\n}\n\n.mb-achievement-notification.show {\n  transform: translateY(0);\n  opacity: 1;\n}\n\n.mb-achievement-notification__icon {\n  width: 56px;\n  height: 56px;\n  background: linear-gradient(135deg, var(--user-accent-grad-end) 0%, var(--user-accent-light) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  animation: achievementPulse 2s ease-in-out infinite;\n}\n\n.mb-achievement-notification__icon ion-icon {\n  font-size: 28px;\n  color: #1a1a2e;\n}\n\n.mb-achievement-notification__content {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.mb-achievement-notification__label {\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  color: var(--user-accent-grad-end);\n}\n\n.mb-achievement-notification__name {\n  font-size: 18px;\n  font-weight: 700;\n  color: #fff;\n}\n\n.mb-achievement-notification__desc {\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.7);\n}\n\n/* === ACHIEVEMENT ANIMATION === */\n@keyframes achievementPulse {\n  0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(175, 145, 109, 0.4); }\n  50% { transform: scale(1.05); box-shadow: 0 0 20px 5px rgba(175, 145, 109, 0.2); }\n}\n\n/* === CALENDAR HEATMAP === */\n.mb-heatmap {\n  background: #fff;\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n}\n\n.mb-heatmap__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.mb-heatmap__title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-heatmap__title ion-icon {\n  color: var(--user-accent-grad-end);\n}\n\n.mb-heatmap__stats {\n  display: flex;\n  gap: 16px;\n  font-size: 13px;\n  color: #6b6b8a;\n}\n\n.mb-heatmap__stats strong {\n  color: #1a1a2e;\n  font-weight: 600;\n}\n\n.mb-heatmap__grid {\n  display: grid;\n  grid-template-columns: repeat(53, 1fr);\n  gap: 3px;\n}\n\n.mb-heatmap__day {\n  aspect-ratio: 1;\n  border-radius: 3px;\n  background: #f0f0f5;\n  transition: all 0.2s ease;\n  cursor: pointer;\n}\n\n.mb-heatmap__day:hover {\n  transform: scale(1.5);\n  z-index: 10;\n}\n\n.mb-heatmap__day[data-level=\"1\"] { background: var(--user-accent-soft); }\n.mb-heatmap__day[data-level=\"2\"] { background: var(--user-accent-light); }\n.mb-heatmap__day[data-level=\"3\"] { background: var(--user-accent-grad-end); }\n.mb-heatmap__day[data-level=\"4\"] { background: var(--user-accent-grad-end); }\n\n.mb-heatmap__legend {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 4px;\n  margin-top: 12px;\n  font-size: 11px;\n  color: #6b6b8a;\n}\n\n.mb-heatmap__legend-item {\n  width: 12px;\n  height: 12px;\n  border-radius: 2px;\n}\n\n/* === ACTIVITY TIMELINE === */\n.mb-timeline {\n  background: #fff;\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n}\n\n.mb-timeline__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.mb-timeline__title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-timeline__title ion-icon {\n  color: var(--user-accent-grad-end);\n}\n\n.mb-timeline__list {\n  display: flex;\n  flex-direction: column;\n  gap: 0;\n  position: relative;\n}\n\n.mb-timeline__list::before {\n  content: '';\n  position: absolute;\n  left: 20px;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  background: linear-gradient(to bottom, var(--user-accent-grad-end), #f0f0f5);\n}\n\n.mb-timeline__item {\n  display: flex;\n  gap: 16px;\n  padding: 16px 0;\n  position: relative;\n  animation: fadeSlideIn 0.4s ease-out forwards;\n  opacity: 0;\n}\n\n.mb-timeline__item:nth-child(1) { animation-delay: 0.1s; }\n.mb-timeline__item:nth-child(2) { animation-delay: 0.15s; }\n.mb-timeline__item:nth-child(3) { animation-delay: 0.2s; }\n.mb-timeline__item:nth-child(4) { animation-delay: 0.25s; }\n.mb-timeline__item:nth-child(5) { animation-delay: 0.3s; }\n\n/* === TIMELINE ANIMATION === */\n@keyframes fadeSlideIn {\n  from { opacity: 0; transform: translateX(-10px); }\n  to { opacity: 1; transform: translateX(0); }\n}\n\n.mb-timeline__icon {\n  width: 40px;\n  height: 40px;\n  background: #fff;\n  border: 2px solid var(--user-accent-grad-end);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  z-index: 1;\n}\n\n.mb-timeline__icon ion-icon {\n  font-size: 18px;\n  color: var(--user-accent-grad-end);\n}\n\n.mb-timeline__content {\n  flex: 1;\n  padding-top: 8px;\n}\n\n.mb-timeline__action {\n  font-size: 14px;\n  color: #1a1a2e;\n  margin-bottom: 4px;\n}\n\n.mb-timeline__action strong {\n  font-weight: 600;\n}\n\n.mb-timeline__time {\n  font-size: 12px;\n  color: #6b6b8a;\n}\n\n/* === STATS CHARTS === */\n.mb-stats-chart {\n  background: #fff;\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n}\n\n.mb-stats-chart__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.mb-stats-chart__title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n}\n\n.mb-stats-chart__period {\n  display: flex;\n  gap: 8px;\n}\n\n.mb-stats-chart__period button {\n  padding: 6px 12px;\n  border: none;\n  background: #f0f0f5;\n  border-radius: 20px;\n  font-size: 12px;\n  font-weight: 500;\n  color: #6b6b8a;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.mb-stats-chart__period button.active,\n.mb-stats-chart__period button:hover {\n  background: var(--user-accent-grad-end);\n  color: #fff;\n}\n\n.mb-stats-chart__bars {\n  display: flex;\n  align-items: flex-end;\n  gap: 4px;\n  height: 120px;\n  padding-top: 20px;\n}\n\n.mb-stats-chart__bar {\n  flex: 1;\n  background: linear-gradient(to top, var(--user-accent-grad-end), var(--user-accent-soft));\n  border-radius: 4px 4px 0 0;\n  min-height: 4px;\n  transition: all 0.3s ease;\n  position: relative;\n}\n\n.mb-stats-chart__bar:hover {\n  background: linear-gradient(to top, var(--user-accent-dark), var(--user-accent-grad-end));\n}\n\n.mb-stats-chart__bar::after {\n  content: attr(data-value);\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 10px;\n  font-weight: 600;\n  color: #1a1a2e;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n}\n\n.mb-stats-chart__bar:hover::after {\n  opacity: 1;\n}\n\n.mb-stats-chart__labels {\n  display: flex;\n  gap: 4px;\n  margin-top: 8px;\n}\n\n.mb-stats-chart__labels span {\n  flex: 1;\n  text-align: center;\n  font-size: 10px;\n  color: #6b6b8a;\n}\n\n/* === PROGRESS RINGS === */\n.mb-progress-ring {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.mb-progress-ring svg {\n  transform: rotate(-90deg);\n}\n\n.mb-progress-ring__track {\n  fill: none;\n  stroke: #f0f0f5;\n}\n\n.mb-progress-ring__progress {\n  fill: none;\n  stroke: var(--user-accent-grad-end);\n  stroke-linecap: round;\n  transition: stroke-dashoffset 1s ease-out;\n}\n\n.mb-progress-ring__value {\n  position: absolute;\n  font-size: 14px;\n  font-weight: 700;\n  color: #1a1a2e;\n}\n\n/* === ACHIEVEMENT BADGES === */\n.mb-badges {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n  gap: 16px;\n  align-items: stretch;\n}\n\n.mb-badge {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  padding: 20px 12px 16px;\n  background: #fff;\n  border-radius: 16px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n  transition: all 0.3s ease;\n  cursor: pointer;\n  min-height: 160px;\n}\n\n.mb-badge:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\n}\n\n.mb-badge--locked {\n  opacity: 0.5;\n  filter: grayscale(1);\n}\n\n.mb-badge--locked:hover {\n  opacity: 0.7;\n  filter: grayscale(0.5);\n}\n\n.mb-badge__icon {\n  width: 56px;\n  height: 56px;\n  background: linear-gradient(135deg, var(--user-accent-grad-end) 0%, var(--user-accent-light) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 12px;\n}\n\n.mb-badge--locked .mb-badge__icon {\n  background: #e0e0e5;\n}\n\n.mb-badge__icon ion-icon {\n  font-size: 24px;\n  color: #1a1a2e;\n}\n\n.mb-badge--locked .mb-badge__icon ion-icon {\n  color: #999;\n}\n\n.mb-badge__name {\n  font-size: 13px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 4px;\n}\n\n.mb-badge__desc {\n  font-size: 11px;\n  color: #6b6b8a;\n  line-height: 1.4;\n}\n\n.mb-badge__date {\n  font-size: 10px;\n  color: var(--user-accent-grad-end);\n  margin-top: 8px;\n}\n\n/* === SKELETON LOADING === */\n.mb-skeleton {\n  background: linear-gradient(90deg, #f0f0f5 25%, #e8e8ed 50%, #f0f0f5 75%);\n  background-size: 200% 100%;\n  animation: skeletonShimmer 1.5s infinite;\n  border-radius: 8px;\n}\n\n@keyframes skeletonShimmer {\n  0% { background-position: 200% 0; }\n  100% { background-position: -200% 0; }\n}\n\n.mb-skeleton--circle { border-radius: 50%; }\n.mb-skeleton--text { height: 14px; margin-bottom: 8px; }\n.mb-skeleton--title { height: 24px; width: 60%; margin-bottom: 12px; }\n.mb-skeleton--stat { height: 40px; }\n\n/* === EMPTY STATES === */\n.mb-empty-state {\n  text-align: center;\n  padding: 40px 20px;\n}\n\n.mb-empty-state__icon {\n  font-size: 64px;\n  color: var(--user-accent-grad-end);\n  margin-bottom: 16px;\n  opacity: 0.6;\n}\n\n.mb-empty-state__title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 8px;\n}\n\n.mb-empty-state__desc {\n  font-size: 14px;\n  color: #6b6b8a;\n  margin-bottom: 20px;\n}\n\n.mb-empty-state__action {\n  display: inline-block;\n  padding: 12px 24px;\n  background: var(--user-accent-grad-end);\n  color: #fff;\n  font-weight: 600;\n  border-radius: 25px;\n  text-decoration: none;\n  transition: all 0.3s ease;\n}\n\n.mb-empty-state__action:hover {\n  background: var(--user-accent-dark);\n  transform: translateY(-2px);\n}\n\n/* === READING STATS === */\n.mb-reading-stats {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 16px;\n}\n\n.mb-reading-stat {\n  background: #fff;\n  border-radius: 16px;\n  padding: 20px;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n  transition: all 0.3s ease;\n}\n\n.mb-reading-stat:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);\n}\n\n.mb-reading-stat__icon {\n  width: 48px;\n  height: 48px;\n  background: linear-gradient(135deg, var(--user-accent-soft) 0%, var(--user-accent-soft) 100%);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 12px;\n}\n\n.mb-reading-stat__icon ion-icon {\n  font-size: 24px;\n  color: var(--user-accent-grad-end);\n}\n\n.mb-reading-stat__value {\n  font-size: 28px;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin-bottom: 4px;\n}\n\n.mb-reading-stat__label {\n  font-size: 12px;\n  color: #6b6b8a;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n/* === RESPONSIVE === */\n@media (max-width: 768px) {\n  .mb-achievement-notification {\n    left: 16px;\n    right: 16px;\n    bottom: 16px;\n    max-width: none;\n  }\n  \n  .mb-heatmap__grid {\n    grid-template-columns: repeat(26, 1fr);\n  }\n  \n  .mb-reading-stats {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  \n  .mb-badges {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n\n/* === DARK MODE === */\n[data-theme=\"dark\"] .mb-achievement-notification {\n  background: linear-gradient(135deg, #2a2a4a 0%, #1a1a2e 100%);\n}\n\n[data-theme=\"dark\"] .mb-heatmap,\n[data-theme=\"dark\"] .mb-timeline,\n[data-theme=\"dark\"] .mb-stats-chart,\n[data-theme=\"dark\"] .mb-badge,\n[data-theme=\"dark\"] .mb-reading-stat {\n  background: #242440;\n}\n\n[data-theme=\"dark\"] .mb-heatmap__title,\n[data-theme=\"dark\"] .mb-timeline__title,\n[data-theme=\"dark\"] .mb-stats-chart__title,\n[data-theme=\"dark\"] .mb-badge__name,\n[data-theme=\"dark\"] .mb-reading-stat__value,\n[data-theme=\"dark\"] .mb-timeline__action,\n[data-theme=\"dark\"] .mb-empty-state__title {\n  color: #f1f1f1;\n}\n\n[data-theme=\"dark\"] .mb-heatmap__stats,\n[data-theme=\"dark\"] .mb-timeline__time,\n[data-theme=\"dark\"] .mb-stats-chart__labels span,\n[data-theme=\"dark\"] .mb-badge__desc,\n[data-theme=\"dark\"] .mb-reading-stat__label,\n[data-theme=\"dark\"] .mb-empty-state__desc {\n  color: #a0a0b0;\n}\n\n[data-theme=\"dark\"] .mb-heatmap__day {\n  background: #3a3a50;\n}\n\n[data-theme=\"dark\"] .mb-timeline__list::before {\n  background: linear-gradient(to bottom, var(--user-accent-grad-end), #3a3a50);\n}\n\n[data-theme=\"dark\"] .mb-timeline__icon {\n  background: #242440;\n}\n\n[data-theme=\"dark\"] .mb-stats-chart__period button {\n  background: #3a3a50;\n  color: #a0a0b0;\n}\n\n[data-theme=\"dark\"] .mb-progress-ring__track {\n  stroke: #3a3a50;\n}\n\n[data-theme=\"dark\"] .mb-progress-ring__value {\n  color: #f1f1f1;\n}\n\n[data-theme=\"dark\"] .mb-skeleton {\n  background: linear-gradient(90deg, #3a3a50 25%, #4a4a60 50%, #3a3a50 75%);\n  background-size: 200% 100%;\n}\n\n[data-theme=\"dark\"] .mb-reading-stat__icon {\n  background: linear-gradient(135deg, #3a3a50 0%, #2a2a40 100%);\n}\n","path":null,"size_bytes":13278,"size_tokens":null},"api/tts/voices.py":{"content":"from http.server import BaseHTTPRequestHandler\nimport os\nimport json\n\nELEVENLABS_API_KEY = os.environ.get('ELEVENLABS_API_KEY')\n\nclass handler(BaseHTTPRequestHandler):\n    def do_GET(self):\n        voices = [\n            {'id': 'rachel', 'name': 'Rachel (Female, Calm)', 'language': 'en'},\n            {'id': 'adam', 'name': 'Adam (Male, Deep)', 'language': 'en'},\n            {'id': 'antoni', 'name': 'Antoni (Male, Warm)', 'language': 'en'},\n            {'id': 'arnold', 'name': 'Arnold (Male, Crisp)', 'language': 'en'},\n            {'id': 'domi', 'name': 'Domi (Female, Strong)', 'language': 'en'},\n            {'id': 'elli', 'name': 'Elli (Female, Young)', 'language': 'en'},\n            {'id': 'josh', 'name': 'Josh (Male, Warm)', 'language': 'en'},\n            {'id': 'sam', 'name': 'Sam (Male, Friendly)', 'language': 'en'},\n        ]\n        self.send_response(200)\n        self.send_header('Content-Type', 'application/json')\n        self.send_header('Access-Control-Allow-Origin', '*')\n        self.end_headers()\n        self.wfile.write(json.dumps({\n            'voices': voices,\n            'available': bool(ELEVENLABS_API_KEY)\n        }).encode())\n\n    def do_OPTIONS(self):\n        self.send_response(200)\n        self.send_header('Access-Control-Allow-Origin', '*')\n        self.send_header('Access-Control-Allow-Methods', 'GET, OPTIONS')\n        self.send_header('Access-Control-Allow-Headers', 'Content-Type')\n        self.end_headers()\n","path":null,"size_bytes":1456,"size_tokens":null},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"elevenlabs>=2.30.0\",\n    \"flask>=3.1.2\",\n    \"flask-cors>=6.0.2\",\n    \"openai>=2.16.0\",\n    \"psycopg2-binary>=2.9.11\",\n    \"requests>=2.32.5\",\n    \"resend>=2.21.0\",\n]\n","path":null,"size_bytes":314,"size_tokens":null},"mindspace-build/profile/profile-immersive.js":{"content":"// ==================== IMMERSIVE PROFILE EXPERIENCE ====================\n\n(function() {\n  'use strict';\n  \n  // ==================== DAY/NIGHT CYCLE ====================\n  const TimeOfDay = {\n    MORNING: 'morning',\n    AFTERNOON: 'afternoon',\n    EVENING: 'evening',\n    NIGHT: 'night'\n  };\n  \n  function getTimeOfDay() {\n    const hour = new Date().getHours();\n    if (hour >= 6 && hour < 12) return TimeOfDay.MORNING;\n    if (hour >= 12 && hour < 17) return TimeOfDay.AFTERNOON;\n    if (hour >= 17 && hour < 20) return TimeOfDay.EVENING;\n    return TimeOfDay.NIGHT;\n  }\n  \n  function getGreeting() {\n    const time = getTimeOfDay();\n    switch (time) {\n      case TimeOfDay.MORNING: return 'Good morning';\n      case TimeOfDay.AFTERNOON: return 'Good afternoon';\n      case TimeOfDay.EVENING: return 'Good evening';\n      case TimeOfDay.NIGHT: return 'Good night';\n      default: return 'Welcome back';\n    }\n  }\n  \n  function getTimeEmoji() {\n    const time = getTimeOfDay();\n    switch (time) {\n      case TimeOfDay.MORNING: return 'ðŸŒ…';\n      case TimeOfDay.AFTERNOON: return 'â˜€ï¸';\n      case TimeOfDay.EVENING: return 'ðŸŒ‡';\n      case TimeOfDay.NIGHT: return 'ðŸŒ™';\n      default: return 'âœ¨';\n    }\n  }\n  \n  // --- Affirmations ---\n  const affirmations = {\n    morning: [\n      \"Today is full of possibilities.\",\n      \"You have the strength to face whatever comes.\",\n      \"Take a deep breath and embrace the day.\",\n      \"Your potential is limitless.\",\n      \"Every morning is a fresh start.\"\n    ],\n    afternoon: [\n      \"You're doing great. Keep going!\",\n      \"Take a moment to appreciate your progress.\",\n      \"Your efforts are making a difference.\",\n      \"Stay focused, you've got this.\",\n      \"Remember to take breaks and breathe.\"\n    ],\n    evening: [\n      \"You've accomplished more than you realize.\",\n      \"It's okay to slow down now.\",\n      \"Reflect on the good moments of today.\",\n      \"You deserve rest and relaxation.\",\n      \"Be proud of how far you've come.\"\n    ],\n    night: [\n      \"Rest well, tomorrow is a new beginning.\",\n      \"Let go of today's worries.\",\n      \"You did your best today, and that's enough.\",\n      \"Sweet dreams await you.\",\n      \"The night is for healing and renewal.\"\n    ]\n  };\n  \n  function getRandomAffirmation() {\n    const time = getTimeOfDay();\n    const timeAffirmations = affirmations[time] || affirmations.morning;\n    return timeAffirmations[Math.floor(Math.random() * timeAffirmations.length)];\n  }\n  \n  // --- Time Theme Application ---\n  function applyTimeOfDay() {\n    const time = getTimeOfDay();\n    const body = document.body;\n    const profile = document.querySelector('.mb-profile');\n    \n    body.classList.remove('time-morning', 'time-afternoon', 'time-evening', 'time-night');\n    body.classList.add(`time-${time}`);\n    \n    if (profile) {\n      profile.classList.add('immersive');\n    }\n    \n    createImmersiveBackground();\n    updateGreeting();\n  }\n  \n  // --- Immersive Background ---\n  function createImmersiveBackground() {\n    if (document.querySelector('.immersive-bg')) return;\n    \n    const bg = document.createElement('div');\n    bg.className = 'immersive-bg';\n    bg.innerHTML = `\n      <div class=\"immersive-bg__gradient\"></div>\n      <div class=\"immersive-bg__shapes\">\n        <div class=\"floating-shape\"></div>\n        <div class=\"floating-shape\"></div>\n        <div class=\"floating-shape\"></div>\n        <div class=\"floating-shape\"></div>\n      </div>\n      <div class=\"immersive-bg__stars\" id=\"starsContainer\"></div>\n      <div class=\"immersive-bg__sun\"></div>\n      <div class=\"immersive-bg__moon\"></div>\n    `;\n    \n    document.body.insertBefore(bg, document.body.firstChild);\n    generateStars();\n  }\n  \n  function generateStars() {\n    const container = document.getElementById('starsContainer');\n    if (!container) return;\n    \n    container.innerHTML = '';\n    \n    for (let i = 0; i < 50; i++) {\n      const star = document.createElement('div');\n      star.className = 'star';\n      star.style.left = `${Math.random() * 100}%`;\n      star.style.top = `${Math.random() * 60}%`;\n      star.style.width = `${2 + Math.random() * 3}px`;\n      star.style.height = star.style.width;\n      star.style.animationDelay = `${Math.random() * 3}s`;\n      container.appendChild(star);\n    }\n  }\n  \n  // --- Greeting ---\n  function updateGreeting() {\n    const greetingEl = document.querySelector('.profile-greeting');\n    if (!greetingEl) return;\n    \n    if (window.isOwnProfile !== true) {\n      greetingEl.style.display = 'none';\n      return;\n    }\n    greetingEl.style.display = '';\n    \n    const timeEl = greetingEl.querySelector('.profile-greeting__time');\n    const messageEl = greetingEl.querySelector('.profile-greeting__message');\n    const affirmationEl = greetingEl.querySelector('.profile-greeting__affirmation');\n    \n    const userName = window.userProfile?.display_name || \n                     document.querySelector('.mb-profile__name')?.textContent ||\n                     'there';\n    \n    const firstName = userName.split(' ')[0];\n    \n    if (timeEl) {\n      timeEl.textContent = `${getTimeEmoji()} ${new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}`;\n    }\n    \n    if (messageEl) {\n      messageEl.textContent = '';\n      const greetingText = document.createTextNode(`${getGreeting()}, `);\n      const nameSpan = document.createElement('span');\n      nameSpan.className = 'profile-greeting__name';\n      nameSpan.textContent = firstName;\n      const exclamation = document.createTextNode('!');\n      messageEl.appendChild(greetingText);\n      messageEl.appendChild(nameSpan);\n      messageEl.appendChild(exclamation);\n    }\n    \n    if (affirmationEl) {\n      affirmationEl.textContent = `\"${getRandomAffirmation()}\"`;\n    }\n  }\n  \n  // ==================== SCROLL ANIMATIONS ====================\n  function initScrollAnimations() {\n    const observerOptions = {\n      root: null,\n      rootMargin: '0px 0px -50px 0px',\n      threshold: 0.1\n    };\n    \n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          entry.target.classList.add('revealed');\n          \n          const counters = entry.target.querySelectorAll('.stat-counter[data-target]');\n          counters.forEach(counter => animateCounter(counter));\n          \n          const rings = entry.target.querySelectorAll('.progress-ring__circle-progress');\n          rings.forEach(ring => animateProgressRing(ring));\n        }\n      });\n    }, observerOptions);\n    \n    document.querySelectorAll('.scroll-reveal, .scroll-reveal-left, .scroll-reveal-right, .scroll-reveal-scale, .stagger-reveal').forEach(el => {\n      observer.observe(el);\n    });\n  }\n  \n  // --- Counter Animation ---\n  function animateCounter(counter) {\n    if (counter.classList.contains('counted')) return;\n    counter.classList.add('counted');\n    \n    const target = parseInt(counter.dataset.target) || 0;\n    const duration = 1500;\n    const start = performance.now();\n    \n    function update(currentTime) {\n      const elapsed = currentTime - start;\n      const progress = Math.min(elapsed / duration, 1);\n      \n      const easeOutQuart = 1 - Math.pow(1 - progress, 4);\n      const current = Math.round(easeOutQuart * target);\n      \n      counter.textContent = current.toLocaleString();\n      \n      if (progress < 1) {\n        counter.classList.add('counting');\n        requestAnimationFrame(update);\n      } else {\n        counter.classList.remove('counting');\n      }\n    }\n    \n    requestAnimationFrame(update);\n  }\n  \n  // --- Progress Ring Animation ---\n  function animateProgressRing(ring) {\n    if (ring.classList.contains('animated')) return;\n    ring.classList.add('animated');\n    \n    const percent = parseFloat(ring.dataset.percent) || 0;\n    const circumference = 226;\n    const offset = circumference - (percent / 100) * circumference;\n    \n    setTimeout(() => {\n      ring.style.strokeDashoffset = offset;\n    }, 100);\n  }\n  \n  // ==================== HAPTIC FEEDBACK ====================\n  const HapticIntensity = {\n    LIGHT: 'light',\n    MEDIUM: 'medium',\n    HEAVY: 'heavy'\n  };\n  \n  function triggerHaptic(intensity = HapticIntensity.LIGHT) {\n    if (!window.navigator?.vibrate) return;\n    \n    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;\n    \n    switch (intensity) {\n      case HapticIntensity.LIGHT:\n        navigator.vibrate(10);\n        break;\n      case HapticIntensity.MEDIUM:\n        navigator.vibrate(25);\n        break;\n      case HapticIntensity.HEAVY:\n        navigator.vibrate([30, 10, 30]);\n        break;\n    }\n  }\n  \n  function initHapticFeedback() {\n    document.querySelectorAll('.haptic-light, .quick-action-btn, .mb-profile__tab').forEach(el => {\n      el.addEventListener('touchstart', () => triggerHaptic(HapticIntensity.LIGHT), { passive: true });\n    });\n    \n    document.querySelectorAll('.haptic-medium, .follow-btn, .save-btn').forEach(el => {\n      el.addEventListener('touchstart', () => triggerHaptic(HapticIntensity.MEDIUM), { passive: true });\n    });\n    \n    document.querySelectorAll('.haptic-heavy, .achievement-unlock').forEach(el => {\n      el.addEventListener('touchstart', () => triggerHaptic(HapticIntensity.HEAVY), { passive: true });\n    });\n    \n    document.querySelectorAll('.haptic-feedback').forEach(el => {\n      el.addEventListener('touchstart', function() {\n        this.classList.add('touched');\n        setTimeout(() => this.classList.remove('touched'), 400);\n      }, { passive: true });\n    });\n  }\n  \n  // ==================== PARALLAX ====================\n  function initParallax() {\n    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;\n    \n    const shapes = document.querySelectorAll('.floating-shape');\n    \n    window.addEventListener('scroll', () => {\n      const scrollY = window.scrollY;\n      \n      shapes.forEach((shape, i) => {\n        const speed = 0.05 + (i * 0.02);\n        shape.style.transform = `translateY(${scrollY * speed}px)`;\n      });\n    }, { passive: true });\n  }\n  \n  // ==================== ONLINE STATUS ====================\n  function updateOnlineStatus(isOnline = true) {\n    const statusEl = document.querySelector('.online-status');\n    if (!statusEl) return;\n    \n    statusEl.classList.remove('online-status--online', 'online-status--away', 'online-status--offline');\n    \n    if (isOnline) {\n      statusEl.classList.add('online-status--online');\n      statusEl.querySelector('.online-status__text').textContent = 'Online';\n    } else {\n      statusEl.classList.add('online-status--offline');\n      statusEl.querySelector('.online-status__text').textContent = 'Offline';\n    }\n  }\n  \n  // ==================== PEOPLE SUGGESTIONS ====================\n  async function loadPeopleSuggestions() {\n    const container = document.getElementById('peopleSuggestions');\n    const list = document.getElementById('peopleSuggestionsList');\n    if (!container || !list || !window.supabaseClient) return;\n    \n    try {\n      const { data: { user } } = await window.supabaseClient.auth.getUser();\n      if (!user) return;\n      \n      const { data: following } = await window.supabaseClient\n        .from('followers')\n        .select('following_id')\n        .eq('follower_id', user.id);\n      \n      const followingIds = following?.map(f => f.following_id) || [];\n      followingIds.push(user.id);\n      \n      const { data: suggestions } = await window.supabaseClient\n        .from('profiles')\n        .select('id, display_name, avatar_url')\n        .not('id', 'in', `(${followingIds.join(',')})`)\n        .not('display_name', 'is', null)\n        .limit(5);\n      \n      if (!suggestions || suggestions.length === 0) {\n        container.style.display = 'none';\n        return;\n      }\n      \n      container.style.display = 'block';\n      list.innerHTML = '';\n      \n      for (const person of suggestions) {\n        const { count: mutualCount } = await window.supabaseClient\n          .from('followers')\n          .select('*', { count: 'exact', head: true })\n          .eq('following_id', person.id)\n          .in('follower_id', followingIds.filter(id => id !== user.id));\n        \n        const item = document.createElement('div');\n        item.className = 'people-suggestion';\n        const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--user-accent').trim() || '#5BA4E6';\n        const avatarColors = [accentColor,'#E57373','#64B5F6','#81C784','#FFD54F','#BA68C8','#4DB6AC','#FF8A65','#90A4AE','#A1887F'];\n        const pName = person.display_name || 'U';\n        const pInitials = pName.split(' ').map(w => w[0]).join('').toUpperCase().slice(0, 2) || pName.substring(0, 2).toUpperCase();\n        const pColorIdx = pName.charCodeAt(0) % avatarColors.length;\n        const avatarHtml = person.avatar_url\n          ? `<img src=\"${person.avatar_url}\" alt=\"${person.display_name}\" class=\"people-suggestion__avatar\" onerror=\"this.outerHTML='<div class=\\\\'people-suggestion__avatar people-suggestion__avatar--initials\\\\' style=\\\\'background:${avatarColors[pColorIdx]}\\\\'>${pInitials}</div>'\">`\n          : `<div class=\"people-suggestion__avatar people-suggestion__avatar--initials\" style=\"background:${avatarColors[pColorIdx]}\">${pInitials}</div>`;\n        item.innerHTML = `\n          ${avatarHtml}\n          <div class=\"people-suggestion__info\">\n            <a href=\"/profile/?user=${person.id}\" class=\"people-suggestion__name\">${person.display_name}</a>\n            <span class=\"people-suggestion__mutual\">${mutualCount || 0} mutual connection${mutualCount !== 1 ? 's' : ''}</span>\n          </div>\n          <button class=\"people-suggestion__follow-btn haptic-light\" data-user-id=\"${person.id}\">Follow</button>\n        `;\n        \n        const followBtn = item.querySelector('.people-suggestion__follow-btn');\n        followBtn.addEventListener('click', async (e) => {\n          e.preventDefault();\n          const userId = followBtn.dataset.userId;\n          \n          try {\n            await window.supabaseClient\n              .from('followers')\n              .insert({ follower_id: user.id, following_id: userId });\n            \n            followBtn.textContent = 'Following';\n            followBtn.disabled = true;\n            followBtn.style.opacity = '0.6';\n            \n            const fromName = user.user_metadata?.display_name || user.email?.split('@')[0] || 'Someone';\n            try {\n              await window.supabaseClient.from('notifications').insert({\n                user_id: userId,\n                type: 'follow',\n                from_user_name: fromName,\n                content: `${fromName} started following you`,\n                read: false\n              });\n            } catch (notifErr) {\n              console.warn('Failed to create follow notification:', notifErr);\n            }\n            \n            triggerHaptic(HapticIntensity.MEDIUM);\n          } catch (err) {\n            console.error('Failed to follow:', err);\n          }\n        });\n        \n        list.appendChild(item);\n      }\n    } catch (err) {\n      console.error('Failed to load people suggestions:', err);\n      container.style.display = 'none';\n    }\n  }\n  \n  // ==================== INITIALIZATION ====================\n  function init() {\n    applyTimeOfDay();\n    setInterval(applyTimeOfDay, 60000);\n    initScrollAnimations();\n    initHapticFeedback();\n    initParallax();\n    \n    window.addEventListener('profileLoaded', () => {\n      updateGreeting();\n      loadPeopleSuggestions();\n    });\n    \n    setTimeout(() => {\n      if (window.userProfile) {\n        updateGreeting();\n        loadPeopleSuggestions();\n      }\n    }, 2000);\n    \n    const observer = new MutationObserver(() => {\n      applyTimeOfDay();\n    });\n    \n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['data-theme']\n    });\n  }\n  \n  // --- Public API ---\n  window.ImmersiveProfile = {\n    triggerHaptic,\n    loadPeopleSuggestions,\n    updateGreeting,\n    animateCounter,\n    animateProgressRing,\n    getTimeOfDay,\n    getGreeting,\n    getRandomAffirmation\n  };\n  \n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n})();\n","path":null,"size_bytes":16326,"size_tokens":null},"mindspace-build/support/support.js":{"content":"// ==================== SUPPORT PAGE ====================\ndocument.addEventListener('DOMContentLoaded', function() {\n  // --- Email Validation ---\n  const DISPOSABLE_DOMAINS = [\n    'tempmail.com', 'throwaway.email', 'guerrillamail.com', 'mailinator.com',\n    'temp-mail.org', '10minutemail.com', 'fakeinbox.com', 'trashmail.com',\n    'tempail.com', 'dispostable.com', 'yopmail.com', 'maildrop.cc',\n    'sharklasers.com', 'guerrillamail.info', 'grr.la', 'spam4.me',\n    'tempmailo.com', 'mohmal.com', 'getnada.com', 'mailnesia.com',\n    'temp.email', 'tempinbox.com', 'fakemailgenerator.com', 'emailondeck.com',\n    'mintemail.com', 'discard.email', 'spamgourmet.com', 'mytemp.email'\n  ];\n\n  function isValidEmail(email) {\n    const emailRegex = /^[a-zA-Z0-9](?:[a-zA-Z0-9._-]*[a-zA-Z0-9])?@[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?(?:\\.[a-zA-Z]{2,})+$/;\n    if (!emailRegex.test(email)) return false;\n\n    const domain = email.split('@')[1].toLowerCase();\n    if (DISPOSABLE_DOMAINS.some(d => domain.includes(d))) return false;\n\n    if (domain.length < 4) return false;\n\n    return true;\n  }\n\n  const appointmentForm = document.getElementById('appointmentForm');\n\n  // ==================== APPOINTMENT FORM ====================\n  const appointmentDate = document.getElementById('appointmentDate');\n\n  if (appointmentDate) {\n    const today = new Date();\n    const minDate = new Date(today);\n    minDate.setDate(today.getDate() + 1);\n\n    const maxDate = new Date(today);\n    maxDate.setMonth(today.getMonth() + 3);\n\n    appointmentDate.min = minDate.toISOString().split('T')[0];\n    appointmentDate.max = maxDate.toISOString().split('T')[0];\n  }\n\n  if (appointmentForm) {\n    appointmentForm.addEventListener('submit', async function(e) {\n      e.preventDefault();\n\n      const emailInput = document.getElementById('appointmentEmail');\n      const email = emailInput ? emailInput.value.trim() : '';\n\n      if (!isValidEmail(email)) {\n        alert('Please enter a valid email address. Temporary or disposable emails are not allowed.');\n        if (emailInput) emailInput.focus();\n        return;\n      }\n\n      const submitBtn = appointmentForm.querySelector('.form-submit');\n      const originalText = submitBtn.innerHTML;\n\n      submitBtn.innerHTML = '<ion-icon name=\"hourglass-outline\"></ion-icon><span>Sending...</span>';\n      submitBtn.disabled = true;\n\n      try {\n        const formData = new FormData(appointmentForm);\n        const response = await fetch(appointmentForm.action, {\n          method: 'POST',\n          body: formData,\n          headers: {\n            'Accept': 'application/json'\n          }\n        });\n\n        if (response.ok) {\n          submitBtn.innerHTML = '<ion-icon name=\"checkmark-circle-outline\"></ion-icon><span>Request Submitted!</span>';\n          submitBtn.style.background = '#4caf50';\n\n          setTimeout(function() {\n            appointmentForm.reset();\n            submitBtn.innerHTML = originalText;\n            submitBtn.disabled = false;\n            submitBtn.style.background = '';\n          }, 3000);\n        } else {\n          const data = await response.json();\n          throw new Error(data.error || 'Form submission failed');\n        }\n      } catch (error) {\n        console.error('Form submission error:', error);\n        submitBtn.innerHTML = '<ion-icon name=\"alert-circle-outline\"></ion-icon><span>Error - Try Again</span>';\n        submitBtn.style.background = '#e74c3c';\n\n        setTimeout(function() {\n          submitBtn.innerHTML = originalText;\n          submitBtn.disabled = false;\n          submitBtn.style.background = '';\n        }, 3000);\n      }\n    });\n  }\n\n  const searchInput = document.getElementById('supportSearch');\n\n  // ==================== SEARCH ====================\n  if (searchInput) {\n    searchInput.addEventListener('keypress', function(e) {\n      if (e.key === 'Enter') {\n        const query = searchInput.value.trim().toLowerCase();\n        if (query) {\n          const sections = {\n            'crisis': '#crisis',\n            'emergency': '#crisis',\n            '988': '#crisis',\n            'hotline': '#helplines',\n            'helpline': '#helplines',\n            'call': '#helplines',\n            'phone': '#helplines',\n            'resource': '#resources',\n            'anxiety': '#resources',\n            'depression': '#resources',\n            'stress': '#resources',\n            'self-help': '#self-help',\n            'breathing': '#self-help',\n            'grounding': '#self-help',\n            'exercise': '#self-help',\n            'appointment': '#appointment',\n            'schedule': '#appointment',\n            'book': '#appointment',\n            'session': '#appointment',\n            'therapy': '#appointment',\n            'faq': '#faq',\n            'question': '#faq'\n          };\n\n          let targetSection = null;\n          for (const [keyword, section] of Object.entries(sections)) {\n            if (query.includes(keyword)) {\n              targetSection = section;\n              break;\n            }\n          }\n\n          if (targetSection) {\n            const element = document.querySelector(targetSection);\n            if (element) {\n              element.scrollIntoView({ behavior: 'smooth', block: 'start' });\n            }\n          } else {\n            window.location.href = '../resourcelib/?search=' + encodeURIComponent(query);\n          }\n        }\n      }\n    });\n  }\n\n\n  const faqItems = document.querySelectorAll('.faq-item');\n  if (faqItems.length > 0) {\n\n  // ==================== FAQ ACCORDION ====================\n    faqItems.forEach(item => {\n      const summary = item.querySelector('summary');\n      if (summary) {\n        summary.addEventListener('click', function() {\n          faqItems.forEach(other => {\n            if (other !== item && other.hasAttribute('open')) {\n              other.removeAttribute('open');\n            }\n          });\n        });\n      }\n    });\n  }\n\n  const scrollProgress = document.querySelector('.scroll-progress');\n  const progressBar = document.querySelector('.scroll-progress__bar');\n\n  // ==================== SCROLL PROGRESS ====================\n  const dots = document.querySelectorAll('.scroll-progress__dot');\n\n  if (scrollProgress && dots.length > 0) {\n    const sections = [\n      { id: 'crisis', element: document.getElementById('crisis') },\n      { id: 'helplines', element: document.getElementById('helplines') },\n      { id: 'resources', element: document.getElementById('resources') },\n      { id: 'self-help', element: document.getElementById('self-help') },\n      { id: 'appointment', element: document.getElementById('appointment') },\n      { id: 'faq', element: document.getElementById('faq') }\n    ].filter(s => s.element);\n\n    dots.forEach(dot => {\n      dot.addEventListener('click', function() {\n        const sectionId = this.getAttribute('data-section');\n        const section = document.getElementById(sectionId);\n        if (section) {\n          section.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n      });\n    });\n\n    function updateScrollProgress() {\n      const scrollTop = window.scrollY;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n      const scrollPercent = (scrollTop / docHeight) * 100;\n\n      if (progressBar) {\n        progressBar.style.setProperty('--progress', scrollPercent + '%');\n      }\n\n      if (scrollTop > 300) {\n        scrollProgress.classList.add('visible');\n      } else {\n        scrollProgress.classList.remove('visible');\n      }\n\n      let currentSection = null;\n      const viewportMiddle = scrollTop + window.innerHeight / 3;\n\n      for (let i = sections.length - 1; i >= 0; i--) {\n        const section = sections[i];\n        if (section.element.offsetTop <= viewportMiddle) {\n          currentSection = section.id;\n          break;\n        }\n      }\n\n      dots.forEach(dot => {\n        const sectionId = dot.getAttribute('data-section');\n        if (sectionId === currentSection) {\n          dot.classList.add('active');\n        } else {\n          dot.classList.remove('active');\n        }\n      });\n    }\n\n    window.addEventListener('scroll', updateScrollProgress, { passive: true });\n    updateScrollProgress();\n  }\n\n\n\n\n\n  const breathingModal = document.getElementById('breathingModal');\n  const openBreathingBtn = document.getElementById('openBreathingTool');\n\n  // ==================== BREATHING TOOL ====================\n  const breathingCircle = document.getElementById('breathingCircle');\n  const breathingText = document.getElementById('breathingText');\n  const breathingTimer = document.getElementById('breathingTimer');\n  const startBreathingBtn = document.getElementById('startBreathing');\n  const stopBreathingBtn = document.getElementById('stopBreathing');\n  const breathingCyclesEl = document.getElementById('breathingCycles');\n  const breathingDurationEl = document.getElementById('breathingDuration');\n  const breathingAudioToggle = document.getElementById('breathingAudio');\n  const breathingContainer = document.querySelector('.breathing-circle-container');\n\n  const breathingPatterns = {\n    '478': { inhale: 4, hold: 7, exhale: 8, name: '4-7-8 Relaxing' },\n    'box': { inhale: 4, hold: 4, exhale: 4, holdOut: 4, name: 'Box Breathing' },\n    'calm': { inhale: 4, hold: 0, exhale: 6, name: 'Calm Breathing' }\n  };\n\n  let currentPattern = '478';\n  let breathingInterval = null;\n  let breathingTimeout = null;\n  let breathingCycles = 0;\n  let breathingStartTime = null;\n  let durationInterval = null;\n\n\n  let audioContext = null;\n\n  function playTone(frequency, duration) {\n    if (!breathingAudioToggle?.checked) return;\n    try {\n      if (!audioContext) {\n        audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      }\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n      oscillator.frequency.value = frequency;\n      oscillator.type = 'sine';\n      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);\n      oscillator.start(audioContext.currentTime);\n      oscillator.stop(audioContext.currentTime + duration);\n    } catch (e) {\n      console.log('Audio not supported');\n    }\n  }\n\n  function openBreathingModal() {\n    breathingModal?.classList.add('is-active');\n    document.body.style.overflow = 'hidden';\n  }\n\n  function closeBreathingModal() {\n    breathingModal?.classList.remove('is-active');\n    document.body.style.overflow = '';\n    stopBreathing();\n  }\n\n  function formatDuration(ms) {\n    const totalSeconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  }\n\n  function updateDuration() {\n    if (breathingStartTime) {\n      const elapsed = Date.now() - breathingStartTime;\n      if (breathingDurationEl) breathingDurationEl.textContent = formatDuration(elapsed);\n    }\n  }\n\n  function runBreathingCycle() {\n    const pattern = breathingPatterns[currentPattern];\n    let phase = 'inhale';\n    let countdown = pattern.inhale;\n\n    function updatePhase() {\n      if (breathingText) {\n        const phaseTexts = {\n          'inhale': 'Breathe In',\n          'hold': 'Hold',\n          'exhale': 'Breathe Out',\n          'holdOut': 'Hold'\n        };\n        breathingText.textContent = phaseTexts[phase];\n      }\n      if (breathingTimer) breathingTimer.textContent = countdown;\n\n\n      breathingCircle?.classList.remove('is-inhaling', 'is-holding', 'is-exhaling');\n      if (phase === 'inhale') {\n        breathingCircle?.classList.add('is-inhaling');\n        breathingCircle.style.transition = `transform ${pattern.inhale}s ease-in-out`;\n      } else if (phase === 'hold' || phase === 'holdOut') {\n        breathingCircle?.classList.add('is-holding');\n      } else if (phase === 'exhale') {\n        breathingCircle?.classList.add('is-exhaling');\n        breathingCircle.style.transition = `transform ${pattern.exhale}s ease-in-out`;\n      }\n    }\n\n    updatePhase();\n    playTone(440, 0.2);\n\n    breathingInterval = setInterval(() => {\n      countdown--;\n\n      if (countdown <= 0) {\n\n        if (phase === 'inhale') {\n          if (pattern.hold > 0) {\n            phase = 'hold';\n            countdown = pattern.hold;\n            playTone(523, 0.15);\n          } else {\n            phase = 'exhale';\n            countdown = pattern.exhale;\n            playTone(392, 0.2);\n          }\n        } else if (phase === 'hold') {\n          phase = 'exhale';\n          countdown = pattern.exhale;\n          playTone(392, 0.2);\n        } else if (phase === 'exhale') {\n          if (pattern.holdOut) {\n            phase = 'holdOut';\n            countdown = pattern.holdOut;\n            playTone(349, 0.15);\n          } else {\n\n            breathingCycles++;\n            if (breathingCyclesEl) breathingCyclesEl.textContent = breathingCycles;\n            phase = 'inhale';\n            countdown = pattern.inhale;\n            playTone(440, 0.2);\n          }\n        } else if (phase === 'holdOut') {\n\n          breathingCycles++;\n          if (breathingCyclesEl) breathingCyclesEl.textContent = breathingCycles;\n          phase = 'inhale';\n          countdown = pattern.inhale;\n          playTone(440, 0.2);\n        }\n        updatePhase();\n      } else {\n        if (breathingTimer) breathingTimer.textContent = countdown;\n      }\n    }, 1000);\n  }\n\n  function startBreathing() {\n    breathingCycles = 0;\n    if (breathingCyclesEl) breathingCyclesEl.textContent = '0';\n    breathingStartTime = Date.now();\n    durationInterval = setInterval(updateDuration, 1000);\n\n    startBreathingBtn.style.display = 'none';\n    stopBreathingBtn.style.display = 'block';\n    breathingContainer?.classList.add('is-active');\n\n    runBreathingCycle();\n  }\n\n  function stopBreathing() {\n    if (breathingInterval) {\n      clearInterval(breathingInterval);\n      breathingInterval = null;\n    }\n    if (durationInterval) {\n      clearInterval(durationInterval);\n      durationInterval = null;\n    }\n\n    startBreathingBtn.style.display = 'block';\n    stopBreathingBtn.style.display = 'none';\n    breathingContainer?.classList.remove('is-active');\n\n    breathingCircle?.classList.remove('is-inhaling', 'is-holding', 'is-exhaling');\n    if (breathingText) breathingText.textContent = 'Ready';\n    if (breathingTimer) breathingTimer.textContent = '';\n  }\n\n\n  openBreathingBtn?.addEventListener('click', openBreathingModal);\n\n  breathingModal?.querySelector('.wellness-modal__backdrop')?.addEventListener('click', closeBreathingModal);\n  breathingModal?.querySelector('.wellness-modal__close')?.addEventListener('click', closeBreathingModal);\n\n  startBreathingBtn?.addEventListener('click', startBreathing);\n  stopBreathingBtn?.addEventListener('click', stopBreathing);\n\n\n  document.querySelectorAll('.breathing-pattern').forEach(btn => {\n    btn.addEventListener('click', () => {\n      document.querySelectorAll('.breathing-pattern').forEach(b => b.classList.remove('is-active'));\n      btn.classList.add('is-active');\n      currentPattern = btn.dataset.pattern;\n      stopBreathing();\n    });\n  });\n\n\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n      if (breathingModal?.classList.contains('is-active')) closeBreathingModal();\n      if (groundingModal?.classList.contains('is-active')) closeGroundingModal();\n    }\n  });\n\n\n\n\n\n  const groundingModal = document.getElementById('groundingModal');\n  const openGroundingBtn = document.getElementById('openGroundingTool');\n  const groundingSteps = document.querySelectorAll('.grounding-step');\n  const groundingProgressBar = document.getElementById('groundingProgressBar');\n  const groundingPrevBtn = document.getElementById('groundingPrev');\n  const groundingNextBtn = document.getElementById('groundingNext');\n  const groundingRestartBtn = document.getElementById('groundingRestart');\n\n  const stepOrder = ['5', '4', '3', '2', '1', 'complete'];\n  let currentGroundingStep = 0;\n\n  function openGroundingModal() {\n    groundingModal?.classList.add('is-active');\n    document.body.style.overflow = 'hidden';\n    resetGrounding();\n  }\n\n  function closeGroundingModal() {\n    groundingModal?.classList.remove('is-active');\n    document.body.style.overflow = '';\n  }\n\n  function resetGrounding() {\n    currentGroundingStep = 0;\n    updateGroundingStep();\n\n\n    document.querySelectorAll('.grounding-input').forEach(input => {\n      input.value = '';\n    });\n\n    groundingPrevBtn.style.display = 'block';\n    groundingNextBtn.style.display = 'block';\n    groundingRestartBtn.style.display = 'none';\n  }\n\n  function updateGroundingStep() {\n    const stepId = stepOrder[currentGroundingStep];\n\n\n    groundingSteps.forEach(step => {\n      step.classList.remove('is-active');\n      if (step.dataset.step === stepId) {\n        step.classList.add('is-active');\n      }\n    });\n\n\n    const progress = (currentGroundingStep / (stepOrder.length - 1)) * 100;\n    if (groundingProgressBar) groundingProgressBar.style.width = `${progress}%`;\n\n\n    groundingPrevBtn.disabled = currentGroundingStep === 0;\n\n    if (stepId === 'complete') {\n      groundingPrevBtn.style.display = 'none';\n      groundingNextBtn.style.display = 'none';\n      groundingRestartBtn.style.display = 'block';\n    } else {\n      groundingPrevBtn.style.display = 'block';\n      groundingNextBtn.style.display = 'block';\n      groundingRestartBtn.style.display = 'none';\n    }\n\n\n    const currentStepEl = document.querySelector(`.grounding-step[data-step=\"${stepId}\"]`);\n    const firstInput = currentStepEl?.querySelector('.grounding-input');\n    if (firstInput) {\n      setTimeout(() => firstInput.focus(), 100);\n    }\n  }\n\n  function goToNextStep() {\n    if (currentGroundingStep < stepOrder.length - 1) {\n      currentGroundingStep++;\n      updateGroundingStep();\n    }\n  }\n\n  function goToPrevStep() {\n    if (currentGroundingStep > 0) {\n      currentGroundingStep--;\n      updateGroundingStep();\n    }\n  }\n\n\n  openGroundingBtn?.addEventListener('click', openGroundingModal);\n\n  groundingModal?.querySelector('.wellness-modal__backdrop')?.addEventListener('click', closeGroundingModal);\n  groundingModal?.querySelector('.wellness-modal__close')?.addEventListener('click', closeGroundingModal);\n\n  groundingNextBtn?.addEventListener('click', goToNextStep);\n  groundingPrevBtn?.addEventListener('click', goToPrevStep);\n  groundingRestartBtn?.addEventListener('click', resetGrounding);\n\n\n  document.querySelectorAll('.grounding-input').forEach((input, index, inputs) => {\n    input.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        const currentStep = input.closest('.grounding-step');\n        const stepInputs = currentStep.querySelectorAll('.grounding-input');\n        const inputIndex = Array.from(stepInputs).indexOf(input);\n\n        if (inputIndex < stepInputs.length - 1) {\n          stepInputs[inputIndex + 1].focus();\n        } else {\n          goToNextStep();\n        }\n      }\n    });\n  });\n\n\n\n\n\n  const faqSearchInput = document.getElementById('faqSearchInput');\n  const faqSearchClear = document.getElementById('faqSearchClear');\n  const faqTabs = document.querySelectorAll('.faq-split__tab');\n  const faqQuestions = document.querySelectorAll('.faq-split__question');\n  const faqNoResults = document.getElementById('faqNoResults');\n  const faqAnswerPanel = document.getElementById('faqAnswerPanel');\n  const faqPrevBtn = document.getElementById('faqPrevBtn');\n  const faqNextBtn = document.getElementById('faqNextBtn');\n\n  let activeCategory = 'all';\n  let currentFaqId = '1';\n\n  function getQuestionDataFromDOM(faqId) {\n    const questionEl = document.querySelector(`.faq-split__question[data-faq-id=\"${faqId}\"]`);\n    if (!questionEl) return null;\n\n    const catEl = questionEl.querySelector('.faq-split__question-cat');\n    const questionTextEl = questionEl.querySelector('.faq-split__question-text');\n    const answerDataEl = questionEl.querySelector('.faq-split__answer-data');\n    const tipDataEl = questionEl.querySelector('.faq-split__tip-data');\n\n    return {\n      category: catEl ? catEl.textContent.trim() : '',\n      categoryIcon: questionEl.dataset.catIcon || 'help-circle-outline',\n      question: questionTextEl ? questionTextEl.textContent : '',\n      answer: answerDataEl ? answerDataEl.textContent : '',\n      tip: tipDataEl ? tipDataEl.textContent : ''\n    };\n  }\n\n  function updateAnswerPanel(faqId) {\n    const data = getQuestionDataFromDOM(faqId);\n    if (!data || !faqAnswerPanel) return;\n\n    currentFaqId = faqId;\n\n    const answerCat = document.getElementById('faqAnswerCat');\n    const answerNum = document.getElementById('faqAnswerNum');\n    const answerQuestion = document.getElementById('faqAnswerQuestion');\n    const answerContent = document.getElementById('faqAnswerContent');\n    const answerTip = document.getElementById('faqAnswerTip');\n\n    if (answerCat) {\n      answerCat.innerHTML = `<ion-icon name=\"${data.categoryIcon}\"></ion-icon> ${data.category}`;\n    }\n    if (answerNum) {\n      answerNum.textContent = `Question ${faqId.padStart(2, '0')}`;\n    }\n    if (answerQuestion) {\n      answerQuestion.textContent = data.question;\n    }\n    if (answerContent) {\n      answerContent.innerHTML = `<p>${data.answer}</p>`;\n    }\n    if (answerTip) {\n      answerTip.textContent = data.tip;\n    }\n\n    faqQuestions.forEach(q => {\n      q.classList.toggle('active', q.dataset.faqId === faqId);\n    });\n\n    faqAnswerPanel.style.animation = 'none';\n    faqAnswerPanel.offsetHeight;\n    faqAnswerPanel.style.animation = 'faq-answer-slide-in 0.4s cubic-bezier(0.4, 0, 0.2, 1)';\n\n    document.querySelectorAll('.faq-split__feedback-btn').forEach(btn => {\n      btn.classList.remove('selected');\n    });\n\n    updateNavButtons();\n  }\n\n  function getVisibleQuestions() {\n    return Array.from(faqQuestions).filter(q => !q.classList.contains('hidden'));\n  }\n\n  function updateNavButtons() {\n    const visible = getVisibleQuestions();\n    const currentIndex = visible.findIndex(q => q.dataset.faqId === currentFaqId);\n\n    if (faqPrevBtn) {\n      faqPrevBtn.disabled = currentIndex <= 0;\n    }\n    if (faqNextBtn) {\n      faqNextBtn.disabled = currentIndex >= visible.length - 1;\n    }\n  }\n\n  faqQuestions.forEach(question => {\n    question.addEventListener('click', function() {\n      const faqId = this.dataset.faqId;\n      updateAnswerPanel(faqId);\n    });\n  });\n\n  faqTabs.forEach(tab => {\n    tab.addEventListener('click', function() {\n      const category = this.dataset.category;\n      activeCategory = category;\n\n      faqTabs.forEach(t => t.classList.remove('active'));\n      this.classList.add('active');\n\n      if (faqSearchInput) {\n        faqSearchInput.value = '';\n        if (faqSearchClear) faqSearchClear.style.display = 'none';\n      }\n\n      filterQuestions('', category);\n    });\n  });\n\n  if (faqSearchInput) {\n    faqSearchInput.addEventListener('input', function() {\n      const query = this.value.trim().toLowerCase();\n\n      if (faqSearchClear) {\n        faqSearchClear.style.display = query.length > 0 ? 'block' : 'none';\n      }\n\n      if (query.length > 0) {\n        faqTabs.forEach(t => t.classList.remove('active'));\n        document.querySelector('.faq-split__tab[data-category=\"all\"]')?.classList.add('active');\n        activeCategory = 'all';\n      }\n\n      filterQuestions(query, 'all');\n    });\n\n    if (faqSearchClear) {\n      faqSearchClear.addEventListener('click', function() {\n        faqSearchInput.value = '';\n        faqSearchClear.style.display = 'none';\n        filterQuestions('', activeCategory);\n        faqSearchInput.focus();\n      });\n    }\n  }\n\n  function filterQuestions(query, category) {\n    let visibleCount = 0;\n    let firstVisible = null;\n\n    faqQuestions.forEach(question => {\n      const qCategory = question.dataset.category;\n      const qId = question.dataset.faqId;\n\n      const questionTextEl = question.querySelector('.faq-split__question-text');\n      const answerDataEl = question.querySelector('.faq-split__answer-data');\n      const questionText = questionTextEl ? questionTextEl.textContent : '';\n      const answerText = answerDataEl ? answerDataEl.textContent : '';\n      const searchText = (questionText + ' ' + answerText).toLowerCase();\n      const matchesCategory = category === 'all' || qCategory === category;\n      const matchesSearch = query === '' || searchText.includes(query);\n\n      if (matchesCategory && matchesSearch) {\n        question.classList.remove('hidden');\n        visibleCount++;\n        if (!firstVisible) firstVisible = question;\n\n        const textEl = question.querySelector('.faq-split__question-text');\n        if (textEl) {\n          if (query.length > 0) {\n            const originalText = textEl.getAttribute('data-original-text') || textEl.textContent;\n            textEl.setAttribute('data-original-text', originalText);\n            textEl.innerHTML = originalText.replace(\n              new RegExp(`(${escapeRegex(query)})`, 'gi'),\n              '<mark class=\"faq-split__highlight\">$1</mark>'\n            );\n          } else {\n            const originalText = textEl.getAttribute('data-original-text');\n            if (originalText) textEl.textContent = originalText;\n          }\n        }\n      } else {\n        question.classList.add('hidden');\n        const textEl = question.querySelector('.faq-split__question-text');\n        if (textEl) {\n          const originalText = textEl.getAttribute('data-original-text');\n          if (originalText) textEl.textContent = originalText;\n        }\n      }\n    });\n\n    if (faqNoResults) {\n      faqNoResults.style.display = visibleCount === 0 ? 'flex' : 'none';\n    }\n\n    if (firstVisible && !firstVisible.classList.contains('active')) {\n      updateAnswerPanel(firstVisible.dataset.faqId);\n    }\n\n    updateNavButtons();\n  }\n\n  if (faqPrevBtn) {\n    faqPrevBtn.addEventListener('click', function() {\n      const visible = getVisibleQuestions();\n      const currentIndex = visible.findIndex(q => q.dataset.faqId === currentFaqId);\n      if (currentIndex > 0) {\n        updateAnswerPanel(visible[currentIndex - 1].dataset.faqId);\n      }\n    });\n  }\n\n  if (faqNextBtn) {\n    faqNextBtn.addEventListener('click', function() {\n      const visible = getVisibleQuestions();\n      const currentIndex = visible.findIndex(q => q.dataset.faqId === currentFaqId);\n      if (currentIndex < visible.length - 1) {\n        updateAnswerPanel(visible[currentIndex + 1].dataset.faqId);\n      }\n    });\n  }\n\n  function escapeRegex(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  }\n\n  const feedbackBtns = document.querySelectorAll('.faq-split__feedback-btn');\n  feedbackBtns.forEach(btn => {\n    btn.addEventListener('click', function() {\n      const feedback = this.dataset.feedback;\n      const wasSelected = this.classList.contains('selected');\n\n      feedbackBtns.forEach(b => b.classList.remove('selected'));\n\n      if (!wasSelected) {\n        this.classList.add('selected');\n\n        const icon = this.querySelector('ion-icon');\n        if (icon) {\n          icon.style.transform = 'scale(1.3)';\n          setTimeout(() => {\n            icon.style.transform = '';\n          }, 200);\n        }\n\n        console.log(`FAQ #${currentFaqId} feedback: ${feedback}`);\n      }\n    });\n  });\n\n  updateNavButtons();\n\n  // --- Hash-based auto-open for tools ---\n  function handleHash() {\n    const hash = window.location.hash.replace('#', '');\n    if (hash === 'breathing') {\n      const el = document.getElementById('self-help');\n      if (el) el.scrollIntoView({ behavior: 'smooth' });\n      setTimeout(() => openBreathingModal(), 600);\n    } else if (hash === 'grounding') {\n      const el = document.getElementById('self-help');\n      if (el) el.scrollIntoView({ behavior: 'smooth' });\n      setTimeout(() => openGroundingModal(), 600);\n    } else if (hash === 'journaling') {\n      const el = document.getElementById('self-help');\n      if (el) el.scrollIntoView({ behavior: 'smooth' });\n    }\n  }\n  handleHash();\n  window.addEventListener('hashchange', handleHash);\n});\n","path":null,"size_bytes":28261,"size_tokens":null},"api/tts/generate.py":{"content":"from http.server import BaseHTTPRequestHandler\nimport os\nimport json\n\nELEVENLABS_API_KEY = (os.environ.get('ELEVENLABS_API_KEY') or '').strip()\n\nVOICE_MAP = {\n    'rachel': 'EXAVITQu4vr4xnSDxMaL',\n    'adam': '21m00Tcm4TlvDq8ikWAM',\n    'antoni': 'ErXwobaYiN019PkySvjV',\n    'arnold': 'VR6AewLTigWG4xSOukaG',\n    'bella': 'EXAVITQu4vr4xnSDxMaL',\n    'domi': 'AZnzlk1XvdvUeBnXmlld',\n    'elli': 'MF3mGyEYCl7XYWbV9V6O',\n    'josh': 'TxGEqnHWrfWFTfGW9XjX',\n    'sam': 'yoZ06aMxZJJ28mfd3POQ',\n}\n\nLANGUAGE_VOICE_MAP = {\n    'en': 'rachel',\n    'es': 'adam',\n    'fr': 'antoni',\n    'zh': 'adam',\n    'hi': 'adam',\n}\n\nclass handler(BaseHTTPRequestHandler):\n    def do_POST(self):\n        if not ELEVENLABS_API_KEY:\n            self.send_response(500)\n            self.send_header('Content-Type', 'application/json')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.end_headers()\n            self.wfile.write(json.dumps({'error': 'ElevenLabs API key not configured'}).encode())\n            return\n\n        content_length = int(self.headers.get('Content-Length', 0))\n        body = self.rfile.read(content_length)\n\n        try:\n            data = json.loads(body)\n        except Exception:\n            self.send_response(400)\n            self.send_header('Content-Type', 'application/json')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.end_headers()\n            self.wfile.write(json.dumps({'error': 'Invalid JSON'}).encode())\n            return\n\n        text = data.get('text', '').strip()\n        if not text:\n            self.send_response(400)\n            self.send_header('Content-Type', 'application/json')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.end_headers()\n            self.wfile.write(json.dumps({'error': 'No text provided'}).encode())\n            return\n\n        if len(text) > 5000:\n            self.send_response(400)\n            self.send_header('Content-Type', 'application/json')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.end_headers()\n            self.wfile.write(json.dumps({'error': 'Text too long (max 5000 characters)'}).encode())\n            return\n\n        voice_key = data.get('voice', 'rachel')\n        language = data.get('language', 'en')\n\n        if voice_key not in VOICE_MAP:\n            voice_key = LANGUAGE_VOICE_MAP.get(language, 'rachel')\n\n        voice_id = VOICE_MAP.get(voice_key, VOICE_MAP['rachel'])\n\n        try:\n            from elevenlabs.client import ElevenLabs\n            client = ElevenLabs(api_key=ELEVENLABS_API_KEY)\n\n            audio = client.text_to_speech.convert(\n                text=text,\n                voice_id=voice_id,\n                model_id=\"eleven_multilingual_v2\",\n                output_format=\"mp3_44100_128\"\n            )\n\n            audio_bytes = b''\n            for chunk in audio:\n                if isinstance(chunk, bytes):\n                    audio_bytes += chunk\n\n            self.send_response(200)\n            self.send_header('Content-Type', 'audio/mpeg')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.send_header('Cache-Control', 'public, max-age=3600')\n            self.end_headers()\n            self.wfile.write(audio_bytes)\n\n        except Exception as e:\n            error_msg = str(e)\n            status = 429 if ('quota' in error_msg.lower() or 'limit' in error_msg.lower()) else 500\n            self.send_response(status)\n            self.send_header('Content-Type', 'application/json')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.end_headers()\n            err_text = 'API quota exceeded. Please try again later or use browser voice.' if status == 429 else f'TTS generation failed: {error_msg}'\n            self.wfile.write(json.dumps({'error': err_text}).encode())\n\n    def do_OPTIONS(self):\n        self.send_response(200)\n        self.send_header('Access-Control-Allow-Origin', '*')\n        self.send_header('Access-Control-Allow-Methods', 'POST, OPTIONS')\n        self.send_header('Access-Control-Allow-Headers', 'Content-Type')\n        self.end_headers()\n","path":null,"size_bytes":4168,"size_tokens":null},"server.py":{"content":"# ==================== IMPORTS ====================\nimport os\nimport time\nimport uuid\nimport psycopg2\nimport requests\nfrom collections import defaultdict\nfrom flask import Flask, request, jsonify, send_from_directory, Response\nfrom flask_cors import CORS\nfrom elevenlabs.client import ElevenLabs\nfrom functools import wraps\nfrom resend import Emails\nfrom api.wellness_insights import generate_wellness_insight, generate_mood_analysis, generate_goal_suggestion\n\n# ==================== APP CONFIGURATION ====================\napp = Flask(__name__, static_folder='.', static_url_path='')\n\nREPLIT_DEV_DOMAIN = os.environ.get('REPLIT_DEV_DOMAIN', '')\nREPLIT_DOMAINS = os.environ.get('REPLIT_DOMAINS', '')\n\nALLOWED_ORIGINS = [\n    'http://localhost:5000',\n    'http://127.0.0.1:5000',\n]\nif REPLIT_DEV_DOMAIN:\n    ALLOWED_ORIGINS.append(f'https://{REPLIT_DEV_DOMAIN}')\nif REPLIT_DOMAINS:\n    for domain in REPLIT_DOMAINS.split(','):\n        domain = domain.strip()\n        if domain:\n            ALLOWED_ORIGINS.append(f'https://{domain}')\n\n# ==================== CORS CONFIGURATION ====================\nCORS(app, resources={\n    r\"/api/*\": {\n        \"origins\": [\"https://mindbalance.cloud\", \"https://www.mindbalance.cloud\", \"https://mindspace.site\", \"https://www.mindspace.site\", \"*\"],\n        \"methods\": [\"GET\", \"POST\", \"OPTIONS\"],\n        \"allow_headers\": [\"Content-Type\"]\n    }\n})\n\nELEVENLABS_API_KEY = os.environ.get('ELEVENLABS_API_KEY')\nDATABASE_URL = os.environ.get('DATABASE_URL')\n\ndef get_resend_credentials():\n    \"\"\"Get Resend API credentials from Replit connector\"\"\"\n    hostname = os.environ.get('REPLIT_CONNECTORS_HOSTNAME')\n    repl_identity = os.environ.get('REPL_IDENTITY')\n    web_repl_renewal = os.environ.get('WEB_REPL_RENEWAL')\n    \n    if repl_identity:\n        x_replit_token = 'repl ' + repl_identity\n    elif web_repl_renewal:\n        x_replit_token = 'depl ' + web_repl_renewal\n    else:\n        return None, None\n    \n    try:\n        response = requests.get(\n            f'https://{hostname}/api/v2/connection?include_secrets=true&connector_names=resend',\n            headers={\n                'Accept': 'application/json',\n                'X_REPLIT_TOKEN': x_replit_token\n            }\n        )\n        data = response.json()\n        connection = data.get('items', [{}])[0]\n        settings = connection.get('settings', {})\n        return settings.get('api_key'), settings.get('from_email')\n    except Exception as e:\n        print(f\"Error getting Resend credentials: {e}\")\n        return None, None\n\ndef get_db_connection():\n    \"\"\"Get database connection\"\"\"\n    if not DATABASE_URL:\n        return None\n    return psycopg2.connect(DATABASE_URL)\n\n# ==================== RATE LIMITING ====================\nrequest_counts = defaultdict(list)\nRATE_LIMIT_REQUESTS = 10\nRATE_LIMIT_WINDOW = 60\n\ndef rate_limit(f):\n    @wraps(f)\n    def decorated_function(*args, **kwargs):\n        client_ip = request.remote_addr or 'unknown'\n        now = time.time()\n        \n        request_counts[client_ip] = [\n            t for t in request_counts[client_ip] \n            if now - t < RATE_LIMIT_WINDOW\n        ]\n        \n        if len(request_counts[client_ip]) >= RATE_LIMIT_REQUESTS:\n            return jsonify({\n                'error': 'Rate limit exceeded. Please wait before trying again.'\n            }), 429\n        \n        request_counts[client_ip].append(now)\n        return f(*args, **kwargs)\n    return decorated_function\n\ndef check_referer(f):\n    @wraps(f)\n    def decorated_function(*args, **kwargs):\n        referer = request.headers.get('Referer', '')\n        origin = request.headers.get('Origin', '')\n        \n        valid = any([\n            'localhost' in referer or 'localhost' in origin,\n            '127.0.0.1' in referer or '127.0.0.1' in origin,\n        ])\n        \n        if REPLIT_DEV_DOMAIN:\n            valid = valid or REPLIT_DEV_DOMAIN in referer or REPLIT_DEV_DOMAIN in origin\n        \n        if REPLIT_DOMAINS:\n            for domain in REPLIT_DOMAINS.split(','):\n                domain = domain.strip()\n                if domain and (domain in referer or domain in origin):\n                    valid = True\n                    break\n        \n        if not referer and not origin:\n            valid = True\n        \n        if 'replit.app' in referer or 'replit.app' in origin:\n            valid = True\n        if 'replit.dev' in referer or 'replit.dev' in origin:\n            valid = True\n        if 'mindbalance.cloud' in referer or 'mindbalance.cloud' in origin:\n            valid = True\n        if 'mindspace.site' in referer or 'mindspace.site' in origin:\n            valid = True\n        \n        if not valid:\n            return jsonify({'error': 'Unauthorized request'}), 403\n        \n        return f(*args, **kwargs)\n    return decorated_function\n\n# ==================== VOICE CONFIGURATION ====================\nVOICE_MAP = {\n    'rachel': 'EXAVITQu4vr4xnSDxMaL',\n    'adam': '21m00Tcm4TlvDq8ikWAM',\n    'antoni': 'ErXwobaYiN019PkySvjV',\n    'arnold': 'VR6AewLTigWG4xSOukaG',\n    'bella': 'EXAVITQu4vr4xnSDxMaL',\n    'domi': 'AZnzlk1XvdvUeBnXmlld',\n    'elli': 'MF3mGyEYCl7XYWbV9V6O',\n    'josh': 'TxGEqnHWrfWFTfGW9XjX',\n    'sam': 'yoZ06aMxZJJ28mfd3POQ',\n}\n\nLANGUAGE_VOICE_MAP = {\n    'en': 'rachel',\n    'es': 'adam',\n    'fr': 'antoni',\n    'zh': 'adam',\n    'hi': 'adam',\n}\n\n# ==================== ROUTES ====================\n@app.route('/')\ndef serve_index():\n    return send_from_directory('.', 'index.html')\n\n@app.route('/community/')\ndef serve_community():\n    return send_from_directory('community', 'index.html')\n\n@app.route('/resourcelib/')\ndef serve_resourcelib():\n    return send_from_directory('resourcelib', 'index.html')\n\n@app.route('/support/')\ndef serve_support():\n    return send_from_directory('support', 'index.html')\n\n@app.route('/blog/')\ndef serve_blog():\n    if os.path.exists('blog/index.html'):\n        return send_from_directory('blog', 'index.html')\n    return send_from_directory('.', 'index.html')\n\n@app.route('/auth/')\ndef serve_auth():\n    if os.path.exists('auth/index.html'):\n        return send_from_directory('auth', 'index.html')\n    return send_from_directory('.', 'index.html')\n\n@app.route('/profile/')\ndef serve_profile():\n    return send_from_directory('profile', 'index.html')\n\n@app.route('/terms/')\ndef serve_terms():\n    return send_from_directory('terms', 'index.html')\n\n@app.route('/privacy/')\ndef serve_privacy():\n    return send_from_directory('privacy', 'index.html')\n\n@app.route('/disclaimer/')\ndef serve_disclaimer():\n    return send_from_directory('disclaimer', 'index.html')\n\n@app.route('/docs/')\ndef serve_docs():\n    return send_from_directory('docs', 'index.html')\n\n@app.route('/docs/pdfs/<path:filename>')\ndef serve_docs_pdfs(filename):\n    return send_from_directory('docs/pdfs', filename)\n\n@app.route('/contact/')\ndef serve_contact():\n    if os.path.exists('contact/index.html'):\n        return send_from_directory('contact', 'index.html')\n    return send_from_directory('.', 'index.html')\n\n@app.route('/<path:path>')\ndef serve_static(path):\n    clean_path = path.rstrip('/')\n    \n    if os.path.isdir(clean_path):\n        index_path = os.path.join(clean_path, 'index.html')\n        if os.path.exists(index_path):\n            return send_from_directory('.', index_path)\n    \n    if os.path.exists(path):\n        return send_from_directory('.', path)\n    \n    return send_from_directory('.', 'index.html')\n\n@app.route('/api/tts/voices', methods=['GET'])\n@check_referer\ndef get_voices():\n    voices = [\n        {'id': 'rachel', 'name': 'Rachel (Female, Calm)', 'language': 'en'},\n        {'id': 'adam', 'name': 'Adam (Male, Deep)', 'language': 'en'},\n        {'id': 'antoni', 'name': 'Antoni (Male, Warm)', 'language': 'en'},\n        {'id': 'arnold', 'name': 'Arnold (Male, Crisp)', 'language': 'en'},\n        {'id': 'domi', 'name': 'Domi (Female, Strong)', 'language': 'en'},\n        {'id': 'elli', 'name': 'Elli (Female, Young)', 'language': 'en'},\n        {'id': 'josh', 'name': 'Josh (Male, Warm)', 'language': 'en'},\n        {'id': 'sam', 'name': 'Sam (Male, Friendly)', 'language': 'en'},\n    ]\n    return jsonify({'voices': voices, 'available': bool(ELEVENLABS_API_KEY)})\n\n@app.route('/api/tts/generate', methods=['POST'])\n@check_referer\n@rate_limit\ndef generate_tts():\n    if not ELEVENLABS_API_KEY:\n        return jsonify({'error': 'ElevenLabs API key not configured'}), 500\n    \n    data = request.get_json()\n    if not data:\n        return jsonify({'error': 'No data provided'}), 400\n    \n    text = data.get('text', '').strip()\n    if not text:\n        return jsonify({'error': 'No text provided'}), 400\n    \n    if len(text) > 5000:\n        return jsonify({'error': 'Text too long (max 5000 characters)'}), 400\n    \n    voice_key = data.get('voice', 'rachel')\n    language = data.get('language', 'en')\n    \n    if voice_key not in VOICE_MAP:\n        voice_key = LANGUAGE_VOICE_MAP.get(language, 'rachel')\n    \n    voice_id = VOICE_MAP.get(voice_key, VOICE_MAP['rachel'])\n    \n    try:\n        client = ElevenLabs(api_key=ELEVENLABS_API_KEY)\n        \n        audio = client.text_to_speech.convert(\n            text=text,\n            voice_id=voice_id,\n            model_id=\"eleven_multilingual_v2\",\n            output_format=\"mp3_44100_128\"\n        )\n        \n        audio_bytes = b''\n        for chunk in audio:\n            if isinstance(chunk, bytes):\n                audio_bytes += chunk\n        \n        return Response(\n            audio_bytes,\n            mimetype='audio/mpeg',\n            headers={\n                'Content-Type': 'audio/mpeg',\n                'Cache-Control': 'public, max-age=3600'\n            }\n        )\n        \n    except Exception as e:\n        error_msg = str(e)\n        if 'quota' in error_msg.lower() or 'limit' in error_msg.lower():\n            return jsonify({'error': 'API quota exceeded. Please try again later or use browser voice.'}), 429\n        return jsonify({'error': f'TTS generation failed: {error_msg}'}), 500\n\n@app.route('/api/tts/health', methods=['GET'])\n@check_referer\ndef tts_health():\n    return jsonify({\n        'available': bool(ELEVENLABS_API_KEY),\n        'service': 'elevenlabs'\n    })\n\n@app.route('/api/newsletter', methods=['POST'])\n@app.route('/api/newsletter/subscribe', methods=['POST'])\n@check_referer\n@rate_limit\ndef newsletter_subscribe():\n    \"\"\"Handle newsletter subscription\"\"\"\n    data = request.get_json()\n    if not data:\n        return jsonify({'error': 'No data provided'}), 400\n    \n    email = data.get('email', '').strip().lower()\n    if not email:\n        return jsonify({'error': 'Email address is required'}), 400\n    \n    import re\n    email_pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$'\n    if not re.match(email_pattern, email):\n        return jsonify({'error': 'Please enter a valid email address'}), 400\n    \n    conn = None\n    try:\n        conn = get_db_connection()\n        if not conn:\n            return jsonify({'error': 'Database connection failed'}), 500\n        \n        cursor = conn.cursor()\n        \n        cursor.execute(\"SELECT id, confirmed FROM newsletter_subscribers WHERE email = %s\", (email,))\n        existing = cursor.fetchone()\n        \n        if existing:\n            if existing[1]:\n                return jsonify({'message': 'You are already subscribed to our newsletter!', 'already_subscribed': True}), 200\n            else:\n                pass\n        else:\n            confirmation_token = str(uuid.uuid4())\n            \n            cursor.execute(\n                \"\"\"INSERT INTO newsletter_subscribers (email, confirmation_token, confirmed) \n                   VALUES (%s, %s, TRUE) \n                   ON CONFLICT (email) DO UPDATE SET confirmed = TRUE, subscribed_at = NOW()\"\"\",\n                (email, confirmation_token)\n            )\n            conn.commit()\n        \n        api_key = os.environ.get('RESEND_API_KEY')\n        if not api_key:\n            api_key, _ = get_resend_credentials()\n        from_email = \"MindBalance <hello@mindbalance.cloud>\"\n        print(f\"[Newsletter] API key found: {bool(api_key)}, from_email: {from_email}\")\n        if api_key:\n            try:\n                import resend as resend_module\n                resend_module.api_key = api_key\n                print(f\"[Newsletter] Sending welcome email to {email} from {from_email}\")\n                result = Emails.send({\n                    \"from\": from_email,\n                    \"to\": [email],\n                    \"subject\": \"Welcome to MindBalance Newsletter!\",\n                    \"html\": f\"\"\"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<meta name=\"color-scheme\" content=\"light dark\">\n<meta name=\"supported-color-schemes\" content=\"light dark\">\n<title>Welcome to MindBalance</title>\n<style>\n  :root {{\n    color-scheme: light dark;\n    supported-color-schemes: light dark;\n  }}\n  @media (prefers-color-scheme: dark) {{\n    .email-body {{ background-color: #1a1a2e !important; }}\n    .email-container {{ background-color: #16213e !important; }}\n    .header-section {{ background: linear-gradient(135deg, #2a1f3d 0%, #1a1a2e 50%, #1e2a4a 100%) !important; }}\n    .content-card {{ background-color: #1e2a4a !important; border-color: #2a3a5c !important; }}\n    .title-text {{ color: #e8e4f0 !important; }}\n    .subtitle-text {{ color: #d4a574 !important; }}\n    .heading-text {{ color: #e8e4f0 !important; }}\n    .body-text {{ color: #b8b4c8 !important; }}\n    .list-item {{ color: #b8b4c8 !important; }}\n    .check-icon {{ color: #d4a574 !important; }}\n    .divider {{ border-color: #2a3a5c !important; }}\n    .footer-text {{ color: #6a6a8a !important; }}\n    .footer-link {{ color: #d4a574 !important; }}\n    .quote-section {{ background-color: #22304a !important; border-color: #d4a574 !important; }}\n    .quote-text {{ color: #b8b4c8 !important; }}\n    .cta-button {{ background: linear-gradient(135deg, #d4a574 0%, #c49464 100%) !important; }}\n  }}\n</style>\n</head>\n<body style=\"margin: 0; padding: 0; -webkit-font-smoothing: antialiased;\">\n<div class=\"email-body\" style=\"background-color: #f5f0eb; padding: 0; margin: 0; width: 100%;\">\n<table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"background-color: #f5f0eb;\">\n<tr><td style=\"padding: 30px 15px;\">\n\n<table class=\"email-container\" role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"600\" align=\"center\" style=\"max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 20px; overflow: hidden; box-shadow: 0 4px 24px rgba(0,0,0,0.08);\">\n\n  <!-- Header with gradient -->\n  <tr>\n    <td class=\"header-section\" style=\"background: linear-gradient(135deg, #f0e6d8 0%, #f8f5f0 50%, #e8e0f0 100%); padding: 40px 40px 30px; text-align: center;\">\n      <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n        <tr>\n          <td style=\"text-align: center;\">\n            <div style=\"display: inline-block; width: 56px; height: 56px; background: linear-gradient(135deg, #af916d 0%, #c4a882 100%); border-radius: 14px; line-height: 56px; margin-bottom: 16px;\">\n              <span style=\"font-size: 26px; color: #ffffff; font-weight: 700; font-family: Georgia, serif;\">M</span>\n            </div>\n          </td>\n        </tr>\n        <tr>\n          <td style=\"text-align: center;\">\n            <h1 class=\"title-text\" style=\"font-family: Georgia, 'Times New Roman', serif; color: #3d3a50; font-size: 30px; font-weight: 700; margin: 0 0 6px; letter-spacing: -0.5px;\">MindBalance</h1>\n            <p class=\"subtitle-text\" style=\"font-family: 'Poppins', Arial, sans-serif; color: #af916d; font-size: 13px; margin: 0; text-transform: uppercase; letter-spacing: 2px; font-weight: 500;\">Your Mental Wellness Companion</p>\n          </td>\n        </tr>\n      </table>\n    </td>\n  </tr>\n\n  <!-- Welcome heading -->\n  <tr>\n    <td style=\"padding: 36px 40px 0;\">\n      <h2 class=\"heading-text\" style=\"font-family: Georgia, 'Times New Roman', serif; color: #3d3a50; font-size: 24px; font-weight: 700; margin: 0 0 8px; letter-spacing: -0.3px;\">Welcome to Our Community!</h2>\n      <div style=\"width: 50px; height: 3px; background: linear-gradient(90deg, #af916d, #c4a882); border-radius: 2px; margin-bottom: 20px;\"></div>\n      <p class=\"body-text\" style=\"font-family: 'Poppins', Arial, sans-serif; color: #5a5770; font-size: 15px; line-height: 1.7; margin: 0;\">\n        Thank you for joining the MindBalance community! We're glad you're here. As a subscriber, you'll receive:\n      </p>\n    </td>\n  </tr>\n\n  <!-- Benefits list -->\n  <tr>\n    <td style=\"padding: 24px 40px 0;\">\n      <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n        <tr>\n          <td class=\"content-card\" style=\"background-color: #faf8f5; border-radius: 14px; padding: 24px 28px; border: 1px solid #ece8e1;\">\n            <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n              <tr>\n                <td style=\"padding-bottom: 14px;\">\n                  <span class=\"check-icon\" style=\"color: #af916d; font-size: 16px; font-weight: 700;\">&#10003;</span>\n                  <span class=\"list-item\" style=\"font-family: 'Poppins', Arial, sans-serif; color: #5a5770; font-size: 14px; margin-left: 10px;\">Weekly mental wellness tips and strategies</span>\n                </td>\n              </tr>\n              <tr>\n                <td style=\"padding-bottom: 14px;\">\n                  <span class=\"check-icon\" style=\"color: #af916d; font-size: 16px; font-weight: 700;\">&#10003;</span>\n                  <span class=\"list-item\" style=\"font-family: 'Poppins', Arial, sans-serif; color: #5a5770; font-size: 14px; margin-left: 10px;\">New articles and curated resources</span>\n                </td>\n              </tr>\n              <tr>\n                <td style=\"padding-bottom: 14px;\">\n                  <span class=\"check-icon\" style=\"color: #af916d; font-size: 16px; font-weight: 700;\">&#10003;</span>\n                  <span class=\"list-item\" style=\"font-family: 'Poppins', Arial, sans-serif; color: #5a5770; font-size: 14px; margin-left: 10px;\">Community updates and stories</span>\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  <span class=\"check-icon\" style=\"color: #af916d; font-size: 16px; font-weight: 700;\">&#10003;</span>\n                  <span class=\"list-item\" style=\"font-family: 'Poppins', Arial, sans-serif; color: #5a5770; font-size: 14px; margin-left: 10px;\">Exclusive content and early access</span>\n                </td>\n              </tr>\n            </table>\n          </td>\n        </tr>\n      </table>\n    </td>\n  </tr>\n\n  <!-- Inspirational quote -->\n  <tr>\n    <td style=\"padding: 28px 40px 0;\">\n      <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n        <tr>\n          <td class=\"quote-section\" style=\"background-color: #f8f5f0; border-left: 3px solid #af916d; border-radius: 0 10px 10px 0; padding: 18px 24px;\">\n            <p class=\"quote-text\" style=\"font-family: Georgia, 'Times New Roman', serif; color: #6a6680; font-size: 14px; line-height: 1.6; margin: 0; font-style: italic;\">\n              \"Mental health is not a destination, but a process. It's about how you drive, not where you're going.\"\n            </p>\n          </td>\n        </tr>\n      </table>\n    </td>\n  </tr>\n\n  <!-- CTA Button -->\n  <tr>\n    <td style=\"padding: 32px 40px 0; text-align: center;\">\n      <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"margin: 0 auto;\">\n        <tr>\n          <td>\n            <a class=\"cta-button\" href=\"https://mindbalance.cloud\"\n               style=\"display: inline-block; background: linear-gradient(135deg, #af916d 0%, #9a7d5a 100%); color: #ffffff; padding: 15px 40px;\n                      border-radius: 50px; text-decoration: none; font-family: 'Poppins', Arial, sans-serif; font-weight: 600; font-size: 15px;\n                      letter-spacing: 0.5px; box-shadow: 0 4px 15px rgba(175, 145, 109, 0.35);\">\n              Explore MindBalance &#8594;\n            </a>\n          </td>\n        </tr>\n      </table>\n    </td>\n  </tr>\n\n  <!-- Divider -->\n  <tr>\n    <td style=\"padding: 36px 40px 0;\">\n      <div class=\"divider\" style=\"border-top: 1px solid #ece8e1; width: 100%;\"></div>\n    </td>\n  </tr>\n\n  <!-- Footer -->\n  <tr>\n    <td style=\"padding: 24px 40px 36px; text-align: center;\">\n      <p class=\"footer-text\" style=\"font-family: 'Poppins', Arial, sans-serif; color: #9a96a8; font-size: 12px; line-height: 1.6; margin: 0 0 8px;\">\n        You received this email because you subscribed to the MindBalance newsletter.\n      </p>\n      <a class=\"footer-link\" href=\"https://mindbalance.cloud\" style=\"font-family: 'Poppins', Arial, sans-serif; color: #af916d; font-size: 12px; text-decoration: none; font-weight: 500;\">\n        mindbalance.cloud\n      </a>\n    </td>\n  </tr>\n\n</table>\n\n</td></tr>\n</table>\n</div>\n</body>\n</html>\"\"\"\n                })\n                print(f\"Welcome email sent successfully: {result}\")\n            except Exception as e:\n                print(f\"Error sending welcome email: {e}\")\n        \n        cursor.close()\n        return jsonify({\n            'success': True,\n            'message': 'Thank you for subscribing! Check your inbox for a welcome email.'\n        }), 200\n        \n    except psycopg2.IntegrityError:\n        if conn:\n            conn.rollback()\n        return jsonify({'message': 'You are already subscribed!', 'already_subscribed': True}), 200\n    except Exception as e:\n        print(f\"Newsletter subscription error: {e}\")\n        if conn:\n            conn.rollback()\n        return jsonify({'error': 'Something went wrong. Please try again.'}), 500\n    finally:\n        if conn:\n            conn.close()\n\n@app.route('/api/wellness/insights', methods=['POST', 'OPTIONS'])\ndef wellness_insights_endpoint():\n    \"\"\"Generate AI-powered wellness insights\"\"\"\n    if request.method == 'OPTIONS':\n        return '', 204\n    \n    try:\n        data = request.get_json() or {}\n        mood_data = data.get('mood_data', [])\n        goals_data = data.get('goals_data', [])\n        streak_data = data.get('streak_data', {})\n        \n        result = generate_wellness_insight(mood_data, goals_data, streak_data)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Wellness insights error: {e}\")\n        return jsonify({\n            'success': False,\n            'insight': 'Keep up your wellness journey!',\n            'affirmation': 'You are doing great!'\n        })\n\n\n@app.route('/api/wellness/mood-analysis', methods=['POST', 'OPTIONS'])\ndef mood_analysis_endpoint():\n    \"\"\"Analyze mood patterns\"\"\"\n    if request.method == 'OPTIONS':\n        return '', 204\n    \n    try:\n        data = request.get_json() or {}\n        mood_entries = data.get('mood_entries', [])\n        \n        result = generate_mood_analysis(mood_entries)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Mood analysis error: {e}\")\n        return jsonify({\n            'success': False,\n            'analysis': 'Keep tracking your moods for insights.',\n            'suggestion': 'Try logging your mood daily.'\n        })\n\n\n@app.route('/api/wellness/goal-suggestion', methods=['POST', 'OPTIONS'])\ndef goal_suggestion_endpoint():\n    \"\"\"Suggest new wellness goals\"\"\"\n    if request.method == 'OPTIONS':\n        return '', 204\n    \n    try:\n        data = request.get_json() or {}\n        current_goals = data.get('current_goals', [])\n        completed_goals = data.get('completed_goals', [])\n        \n        result = generate_goal_suggestion(current_goals, completed_goals)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Goal suggestion error: {e}\")\n        return jsonify({\n            'success': False,\n            'goal': 'Take a 10-minute mindfulness break today',\n            'category': 'mindfulness',\n            'why': 'Small steps lead to big changes.'\n        })\n\n\n# ==================== SERVER STARTUP ====================\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000, debug=False)\n","path":null,"size_bytes":24193,"size_tokens":null},"mindspace-build/css/notifications.css":{"content":"/* === NOTIFICATION BADGE === */\n.notif-badge,\n#notifBadge,\n#mobileNotifBadge {\n  position: absolute;\n  top: -4px;\n  right: -4px;\n  min-width: 18px;\n  height: 18px;\n  padding: 0 5px;\n  background: #ef4444;\n  color: #fff;\n  font-size: 11px;\n  font-weight: 600;\n  border-radius: 9px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n  z-index: 5;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n}\n\n.notif-badge[hidden],\n#notifBadge[hidden],\n#mobileNotifBadge[hidden],\n#userMenuBadge[hidden],\n#userMenuNotifBadge[hidden],\n.user-menu-badge[hidden],\n.menu-item-badge[hidden] {\n  display: none !important;\n}\n\n/* === INBOX BUTTON === */\n.navbar-inbox-btn {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  color: var(--onyx);\n  border-radius: 8px;\n  transition: background 0.2s, color 0.2s;\n}\n\n.navbar-inbox-btn:hover {\n  background: rgba(0,0,0,0.05);\n}\n\n.navbar-inbox-btn .action-icon {\n  font-size: 22px;\n}\n\n[data-theme=\"dark\"] .navbar-inbox-btn {\n  color: var(--white);\n}\n\n[data-theme=\"dark\"] .navbar-inbox-btn:hover {\n  background: rgba(255,255,255,0.1);\n}\n\n/* === INBOX MODAL === */\n.inbox-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-end;\n  padding: 0;\n}\n\n.inbox-modal[hidden] {\n  display: none;\n}\n\n.inbox-backdrop {\n  position: absolute;\n  inset: 0;\n  background: rgba(0,0,0,0.5);\n  opacity: 0;\n  transition: opacity 0.2s ease;\n}\n\n.inbox-modal.open .inbox-backdrop {\n  opacity: 1;\n}\n\n/* === INBOX PANEL === */\n.inbox-panel {\n  position: relative;\n  width: 100%;\n  max-width: 420px;\n  height: 100vh;\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  transform: translateX(100%);\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: -4px 0 20px rgba(0,0,0,0.15);\n}\n\n.inbox-modal.open .inbox-panel {\n  transform: translateX(0);\n}\n\n[data-theme=\"dark\"] .inbox-panel {\n  background: #1a1a2e;\n}\n\n/* === INBOX HEADER === */\n.inbox-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px 20px;\n  border-bottom: 1px solid #e5e7eb;\n  background: #f9fafb;\n}\n\n[data-theme=\"dark\"] .inbox-header {\n  background: #16162a;\n  border-color: #2d2d4a;\n}\n\n.inbox-title {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin: 0;\n}\n\n.inbox-title ion-icon {\n  font-size: 22px;\n  color: var(--user-accent, #5BA4E6);\n}\n\n[data-theme=\"dark\"] .inbox-title {\n  color: #fff;\n}\n\n.inbox-header__actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.inbox-mark-all {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 12px;\n  background: transparent;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  color: #6b7280;\n  font-size: 13px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.inbox-mark-all:hover {\n  background: var(--user-accent, #5BA4E6);\n  border-color: var(--user-accent, #5BA4E6);\n  color: #fff;\n}\n\n.inbox-mark-all ion-icon {\n  font-size: 16px;\n}\n\n[data-theme=\"dark\"] .inbox-mark-all {\n  border-color: #3d3d5c;\n  color: #9ca3af;\n}\n\n.inbox-close {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  background: transparent;\n  border: none;\n  border-radius: 8px;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.inbox-close:hover {\n  background: #f3f4f6;\n  color: #111;\n}\n\n.inbox-close ion-icon {\n  font-size: 22px;\n}\n\n[data-theme=\"dark\"] .inbox-close:hover {\n  background: #2d2d4a;\n  color: #fff;\n}\n\n/* === INBOX BODY === */\n.inbox-body {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0;\n}\n\n/* === LOADING STATE === */\n.inbox-loading {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  gap: 12px;\n  color: #6b7280;\n}\n\n.inbox-spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid #e5e7eb;\n  border-top-color: var(--user-accent, #5BA4E6);\n  border-radius: 50%;\n  animation: inbox-spin 0.8s linear infinite;\n}\n\n@keyframes inbox-spin {\n  to { transform: rotate(360deg); }\n}\n\n/* === EMPTY STATE === */\n.inbox-empty {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 30px;\n  text-align: center;\n  color: #6b7280;\n}\n\n.inbox-empty ion-icon {\n  font-size: 48px;\n  margin-bottom: 12px;\n  opacity: 0.5;\n}\n\n.inbox-empty span {\n  font-size: 16px;\n  font-weight: 500;\n  color: #374151;\n}\n\n.inbox-empty p {\n  font-size: 14px;\n  margin-top: 8px;\n  max-width: 260px;\n}\n\n[data-theme=\"dark\"] .inbox-empty span {\n  color: #e5e7eb;\n}\n\n/* === NOTIFICATION ITEMS === */\n.inbox-item {\n  display: flex;\n  gap: 14px;\n  padding: 16px 20px;\n  border-bottom: 1px solid #f3f4f6;\n  cursor: pointer;\n  transition: background 0.2s;\n  position: relative;\n}\n\n.inbox-item:hover {\n  background: #f9fafb;\n}\n\n.inbox-item.unread {\n  background: #fef3e2;\n}\n\n.inbox-item.unread:hover {\n  background: #fde8c8;\n}\n\n[data-theme=\"dark\"] .inbox-item {\n  border-color: #2d2d4a;\n}\n\n[data-theme=\"dark\"] .inbox-item:hover {\n  background: #232340;\n}\n\n[data-theme=\"dark\"] .inbox-item.unread {\n  background: rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .inbox-item.unread:hover {\n  background: rgba(var(--user-accent-rgb), 0.25);\n}\n\n.inbox-item__icon {\n  flex-shrink: 0;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, var(--user-accent, #5BA4E6), var(--user-accent-grad-end));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n}\n\n.inbox-item__icon ion-icon {\n  font-size: 20px;\n}\n\n.inbox-item__content {\n  flex: 1;\n  min-width: 0;\n}\n\n.inbox-item__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 10px;\n  margin-bottom: 4px;\n}\n\n.inbox-item__from {\n  font-weight: 600;\n  color: #1a1a2e;\n  font-size: 14px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[data-theme=\"dark\"] .inbox-item__from {\n  color: #fff;\n}\n\n.inbox-item__time {\n  font-size: 12px;\n  color: #9ca3af;\n  white-space: nowrap;\n}\n\n.inbox-item__text {\n  font-size: 14px;\n  color: #4b5563;\n  margin: 0;\n}\n\n[data-theme=\"dark\"] .inbox-item__text {\n  color: #9ca3af;\n}\n\n.inbox-item__preview {\n  font-size: 13px;\n  color: #6b7280;\n  margin: 6px 0 0;\n  font-style: italic;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[data-theme=\"dark\"] .inbox-item__preview {\n  color: #6b7280;\n}\n\n.inbox-item__dot {\n  position: absolute;\n  top: 50%;\n  right: 16px;\n  transform: translateY(-50%);\n  width: 8px;\n  height: 8px;\n  background: var(--user-accent, #5BA4E6);\n  border-radius: 50%;\n}\n\n.inbox-item--achievement .inbox-item__icon {\n  background: linear-gradient(135deg, var(--user-accent-grad-end) 0%, var(--user-accent-light) 100%);\n  color: #1a1a2e;\n}\n\n.inbox-item--achievement .inbox-item__from {\n  color: var(--user-accent-grad-end);\n}\n\n.inbox-item--achievement .inbox-item__text {\n  font-weight: 600;\n}\n\n.inbox-item--achievement .inbox-item__preview {\n  font-style: normal;\n}\n\n/* === MOBILE RESPONSIVE === */\n@media (max-width: 480px) {\n  .inbox-panel {\n    max-width: 100%;\n  }\n  \n  .inbox-mark-all span {\n    display: none;\n  }\n  \n  .inbox-mark-all {\n    padding: 8px;\n  }\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  .inbox-backdrop,\n  .inbox-panel {\n    transition: none;\n  }\n  \n  .inbox-spinner {\n    animation: none;\n  }\n}\n","path":null,"size_bytes":7537,"size_tokens":null},"js/notifications.js":{"content":"// ==================== NOTIFICATIONS ====================\n\n(function() {\n  'use strict';\n  \n  let notificationsLoaded = false;\n  let currentUser = null;\n  \n  // --- Supabase Client ---\n  function getSupabaseClient() {\n    if (window.supabaseClient) return window.supabaseClient;\n    if (typeof window.getSupabase === 'function') {\n      return window.getSupabase();\n    }\n    return null;\n  }\n  \n  async function loadNotificationCount() {\n  // --- Notification Count ---\n    const client = getSupabaseClient();\n    if (!client || !currentUser) return;\n    \n    try {\n      const { count, error } = await client\n        .from('notifications')\n        .select('*', { count: 'exact', head: true })\n        .eq('user_id', currentUser.id)\n        .eq('read', false);\n      \n      if (error) throw error;\n      updateAllBadges(count || 0);\n    } catch (err) {\n      console.error('Error loading notification count:', err);\n    }\n  }\n  \n  function updateAllBadges(count) {\n  // --- Badge Updates ---\n    document.querySelectorAll('.notif-badge, #notifBadge, #mobileNotifBadge, #userMenuBadge, #userMenuNotifBadge, .user-menu-badge, .menu-item-badge').forEach(badge => {\n      if (count > 0) {\n        badge.textContent = count > 99 ? '99+' : count;\n        badge.hidden = false;\n        badge.style.display = 'flex';\n      } else {\n        badge.hidden = true;\n        badge.style.display = 'none';\n      }\n    });\n  }\n  \n  async function loadNotifications() {\n  // --- Load Notifications ---\n    const client = getSupabaseClient();\n    if (!client || !currentUser) return [];\n    \n    try {\n      const { data: notifications, error } = await client\n        .from('notifications')\n        .select('*')\n        .eq('user_id', currentUser.id)\n        .order('created_at', { ascending: false })\n        .limit(30);\n      \n      if (error) throw error;\n      return notifications || [];\n    } catch (err) {\n      console.error('Error loading notifications:', err);\n      return [];\n    }\n  }\n  \n  async function markNotificationRead(notifId) {\n  // --- Mark Read ---\n    const client = getSupabaseClient();\n    if (!client) return;\n    \n    try {\n      await client\n        .from('notifications')\n        .update({ read: true })\n        .eq('id', notifId);\n      \n      loadNotificationCount();\n    } catch (err) {\n      console.error('Error marking notification read:', err);\n    }\n  }\n  \n  async function markAllRead() {\n    const client = getSupabaseClient();\n    if (!client || !currentUser) return;\n    \n    try {\n      await client\n        .from('notifications')\n        .update({ read: true })\n        .eq('user_id', currentUser.id)\n        .eq('read', false);\n      \n      loadNotificationCount();\n      renderNotificationsList();\n    } catch (err) {\n      console.error('Error marking all notifications read:', err);\n    }\n  }\n  \n  // --- Notification Helpers ---\n  function getNotificationText(type) {\n    const texts = {\n      'mention': 'mentioned you in a post',\n      'like': 'liked your post',\n      'comment': 'commented on your post',\n      'follow': 'started following you',\n      'reply': 'replied to your comment',\n      'achievement': 'Badge earned!'\n    };\n    return texts[type] || 'sent you a notification';\n  }\n  \n  function formatTimeAgo(dateStr) {\n    const date = new Date(dateStr);\n    const now = new Date();\n    const diffMs = now - date;\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n    \n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins}m ago`;\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n    return date.toLocaleDateString();\n  }\n  \n  async function renderNotificationsList() {\n  // --- Notification Rendering ---\n    const container = document.getElementById('globalNotificationsList');\n    if (!container) return;\n    \n    container.innerHTML = '<div class=\"inbox-loading\"><div class=\"inbox-spinner\"></div><span>Loading notifications...</span></div>';\n    \n    const notifications = await loadNotifications();\n    \n    if (notifications.length === 0) {\n      container.innerHTML = `\n        <div class=\"inbox-empty\">\n          <ion-icon name=\"notifications-off-outline\"></ion-icon>\n          <span>No notifications yet</span>\n          <p>When someone mentions you or interacts with your posts, you'll see it here.</p>\n        </div>\n      `;\n      return;\n    }\n    \n    container.innerHTML = notifications.map(notif => {\n      const isAchievement = notif.type === 'achievement';\n      const fromText = isAchievement ? 'Achievement Unlocked' : escapeHtml(notif.from_user_name);\n      const actionText = isAchievement\n        ? escapeHtml(notif.from_user_name || '')\n        : getNotificationText(notif.type);\n      const previewText = isAchievement\n        ? (notif.content ? escapeHtml(notif.content) : '')\n        : (notif.content ? `\"${escapeHtml(notif.content.substring(0, 80))}${notif.content.length > 80 ? '...' : ''}\"` : '');\n\n      return `\n      <div class=\"inbox-item ${notif.read ? '' : 'unread'} ${isAchievement ? 'inbox-item--achievement' : ''}\" data-notif-id=\"${notif.id}\" data-post-id=\"${notif.post_id || ''}\">\n        <div class=\"inbox-item__icon\">\n          <ion-icon name=\"${getNotificationIcon(notif.type)}\"></ion-icon>\n        </div>\n        <div class=\"inbox-item__content\">\n          <div class=\"inbox-item__header\">\n            <span class=\"inbox-item__from\">${fromText}</span>\n            <span class=\"inbox-item__time\">${formatTimeAgo(notif.created_at)}</span>\n          </div>\n          <p class=\"inbox-item__text\">${actionText}</p>\n          ${previewText ? `<p class=\"inbox-item__preview\">${previewText}</p>` : ''}\n        </div>\n        ${!notif.read ? '<span class=\"inbox-item__dot\"></span>' : ''}\n      </div>`;\n    }).join('');\n    \n    container.querySelectorAll('.inbox-item').forEach(item => {\n      item.addEventListener('click', async () => {\n        const notifId = item.dataset.notifId;\n        const postId = item.dataset.postId;\n        \n        if (notifId) {\n          await markNotificationRead(notifId);\n          item.classList.remove('unread');\n          item.querySelector('.inbox-item__dot')?.remove();\n        }\n        \n        if (postId) {\n          window.location.href = `/community/?post=${postId}`;\n        }\n      });\n    });\n  }\n  \n  function getNotificationIcon(type) {\n    const icons = {\n      'mention': 'at-outline',\n      'like': 'heart-outline',\n      'comment': 'chatbubble-outline',\n      'follow': 'person-add-outline',\n      'reply': 'return-down-forward-outline',\n      'achievement': 'trophy-outline'\n    };\n    return icons[type] || 'notifications-outline';\n  }\n  \n  // --- HTML Escaping ---\n  function escapeHtml(text) {\n    if (!text) return '';\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n  \n  function createInboxModal() {\n  // --- Inbox Modal ---\n    if (document.getElementById('globalInboxModal')) return;\n    \n    const modal = document.createElement('div');\n    modal.id = 'globalInboxModal';\n    modal.className = 'inbox-modal';\n    modal.hidden = true;\n    modal.setAttribute('role', 'dialog');\n    modal.setAttribute('aria-modal', 'true');\n    modal.setAttribute('aria-labelledby', 'globalInboxTitle');\n    \n    modal.innerHTML = `\n      <div class=\"inbox-backdrop\"></div>\n      <div class=\"inbox-panel\">\n        <div class=\"inbox-header\">\n          <h3 class=\"inbox-title\" id=\"globalInboxTitle\">\n            <ion-icon name=\"notifications-outline\"></ion-icon>\n            Notifications\n          </h3>\n          <div class=\"inbox-header__actions\">\n            <button class=\"inbox-mark-all\" title=\"Mark all as read\">\n              <ion-icon name=\"checkmark-done-outline\"></ion-icon>\n              <span>Mark all read</span>\n            </button>\n            <button class=\"inbox-close\" aria-label=\"Close notifications\">\n              <ion-icon name=\"close-outline\"></ion-icon>\n            </button>\n          </div>\n        </div>\n        <div class=\"inbox-body\" id=\"globalNotificationsList\">\n        </div>\n      </div>\n    `;\n    \n    document.body.appendChild(modal);\n    \n    modal.querySelector('.inbox-backdrop').addEventListener('click', closeInbox);\n    modal.querySelector('.inbox-close').addEventListener('click', closeInbox);\n    modal.querySelector('.inbox-mark-all').addEventListener('click', markAllRead);\n    \n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape' && !modal.hidden) {\n        closeInbox();\n      }\n    });\n  }\n  \n  function openInbox() {\n    const modal = document.getElementById('globalInboxModal');\n    if (!modal) {\n      createInboxModal();\n    }\n    \n    const m = document.getElementById('globalInboxModal');\n    if (m) {\n      m.hidden = false;\n      m.classList.add('open');\n      document.body.style.overflow = 'hidden';\n      renderNotificationsList();\n    }\n  }\n  \n  function closeInbox() {\n    const modal = document.getElementById('globalInboxModal');\n    if (modal) {\n      modal.classList.remove('open');\n      setTimeout(() => {\n        modal.hidden = true;\n        document.body.style.overflow = '';\n      }, 200);\n    }\n  }\n  \n  async function init() {\n  // --- Initialization ---\n    const client = getSupabaseClient();\n    if (!client) {\n      setTimeout(init, 500);\n      return;\n    }\n    \n    try {\n      const { data: { user } } = await client.auth.getUser();\n      currentUser = user;\n      \n      if (currentUser) {\n        createInboxModal();\n        loadNotificationCount();\n        \n        setInterval(loadNotificationCount, 60000);\n      }\n    } catch (err) {\n      console.error('Error initializing notifications:', err);\n    }\n  }\n  \n  window.openGlobalInbox = openInbox;\n  window.closeGlobalInbox = closeInbox;\n  window.loadGlobalNotificationCount = loadNotificationCount;\n  \n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => setTimeout(init, 300));\n  } else {\n    setTimeout(init, 300);\n  }\n})();\n","path":null,"size_bytes":10108,"size_tokens":null},"mindspace-build/js/notifications.js":{"content":"// ==================== NOTIFICATIONS ====================\n\n(function() {\n  'use strict';\n  \n  let notificationsLoaded = false;\n  let currentUser = null;\n  \n  // --- Supabase Client ---\n  function getSupabaseClient() {\n    if (window.supabaseClient) return window.supabaseClient;\n    if (typeof window.getSupabase === 'function') {\n      return window.getSupabase();\n    }\n    return null;\n  }\n  \n  async function loadNotificationCount() {\n  // --- Notification Count ---\n    const client = getSupabaseClient();\n    if (!client || !currentUser) return;\n    \n    try {\n      const { count, error } = await client\n        .from('notifications')\n        .select('*', { count: 'exact', head: true })\n        .eq('user_id', currentUser.id)\n        .eq('read', false);\n      \n      if (error) throw error;\n      updateAllBadges(count || 0);\n    } catch (err) {\n      console.error('Error loading notification count:', err);\n    }\n  }\n  \n  function updateAllBadges(count) {\n  // --- Badge Updates ---\n    document.querySelectorAll('.notif-badge, #notifBadge, #mobileNotifBadge, #userMenuBadge, #userMenuNotifBadge, .user-menu-badge, .menu-item-badge').forEach(badge => {\n      if (count > 0) {\n        badge.textContent = count > 99 ? '99+' : count;\n        badge.hidden = false;\n        badge.style.display = 'flex';\n      } else {\n        badge.hidden = true;\n        badge.style.display = 'none';\n      }\n    });\n  }\n  \n  async function loadNotifications() {\n  // --- Load Notifications ---\n    const client = getSupabaseClient();\n    if (!client || !currentUser) return [];\n    \n    try {\n      const { data: notifications, error } = await client\n        .from('notifications')\n        .select('*')\n        .eq('user_id', currentUser.id)\n        .order('created_at', { ascending: false })\n        .limit(30);\n      \n      if (error) throw error;\n      return notifications || [];\n    } catch (err) {\n      console.error('Error loading notifications:', err);\n      return [];\n    }\n  }\n  \n  async function markNotificationRead(notifId) {\n  // --- Mark Read ---\n    const client = getSupabaseClient();\n    if (!client) return;\n    \n    try {\n      await client\n        .from('notifications')\n        .update({ read: true })\n        .eq('id', notifId);\n      \n      loadNotificationCount();\n    } catch (err) {\n      console.error('Error marking notification read:', err);\n    }\n  }\n  \n  async function markAllRead() {\n    const client = getSupabaseClient();\n    if (!client || !currentUser) return;\n    \n    try {\n      await client\n        .from('notifications')\n        .update({ read: true })\n        .eq('user_id', currentUser.id)\n        .eq('read', false);\n      \n      loadNotificationCount();\n      renderNotificationsList();\n    } catch (err) {\n      console.error('Error marking all notifications read:', err);\n    }\n  }\n  \n  // --- Notification Helpers ---\n  function getNotificationText(type) {\n    const texts = {\n      'mention': 'mentioned you in a post',\n      'like': 'liked your post',\n      'comment': 'commented on your post',\n      'follow': 'started following you',\n      'reply': 'replied to your comment',\n      'achievement': 'Badge earned!'\n    };\n    return texts[type] || 'sent you a notification';\n  }\n  \n  function formatTimeAgo(dateStr) {\n    const date = new Date(dateStr);\n    const now = new Date();\n    const diffMs = now - date;\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n    \n    if (diffMins < 1) return 'Just now';\n    if (diffMins < 60) return `${diffMins}m ago`;\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n    return date.toLocaleDateString();\n  }\n  \n  async function renderNotificationsList() {\n  // --- Notification Rendering ---\n    const container = document.getElementById('globalNotificationsList');\n    if (!container) return;\n    \n    container.innerHTML = '<div class=\"inbox-loading\"><div class=\"inbox-spinner\"></div><span>Loading notifications...</span></div>';\n    \n    const notifications = await loadNotifications();\n    \n    if (notifications.length === 0) {\n      container.innerHTML = `\n        <div class=\"inbox-empty\">\n          <ion-icon name=\"notifications-off-outline\"></ion-icon>\n          <span>No notifications yet</span>\n          <p>When someone mentions you or interacts with your posts, you'll see it here.</p>\n        </div>\n      `;\n      return;\n    }\n    \n    container.innerHTML = notifications.map(notif => {\n      const isAchievement = notif.type === 'achievement';\n      const fromText = isAchievement ? 'Achievement Unlocked' : escapeHtml(notif.from_user_name);\n      const actionText = isAchievement\n        ? escapeHtml(notif.from_user_name || '')\n        : getNotificationText(notif.type);\n      const previewText = isAchievement\n        ? (notif.content ? escapeHtml(notif.content) : '')\n        : (notif.content ? `\"${escapeHtml(notif.content.substring(0, 80))}${notif.content.length > 80 ? '...' : ''}\"` : '');\n\n      return `\n      <div class=\"inbox-item ${notif.read ? '' : 'unread'} ${isAchievement ? 'inbox-item--achievement' : ''}\" data-notif-id=\"${notif.id}\" data-post-id=\"${notif.post_id || ''}\">\n        <div class=\"inbox-item__icon\">\n          <ion-icon name=\"${getNotificationIcon(notif.type)}\"></ion-icon>\n        </div>\n        <div class=\"inbox-item__content\">\n          <div class=\"inbox-item__header\">\n            <span class=\"inbox-item__from\">${fromText}</span>\n            <span class=\"inbox-item__time\">${formatTimeAgo(notif.created_at)}</span>\n          </div>\n          <p class=\"inbox-item__text\">${actionText}</p>\n          ${previewText ? `<p class=\"inbox-item__preview\">${previewText}</p>` : ''}\n        </div>\n        ${!notif.read ? '<span class=\"inbox-item__dot\"></span>' : ''}\n      </div>`;\n    }).join('');\n    \n    container.querySelectorAll('.inbox-item').forEach(item => {\n      item.addEventListener('click', async () => {\n        const notifId = item.dataset.notifId;\n        const postId = item.dataset.postId;\n        \n        if (notifId) {\n          await markNotificationRead(notifId);\n          item.classList.remove('unread');\n          item.querySelector('.inbox-item__dot')?.remove();\n        }\n        \n        if (postId) {\n          window.location.href = `/community/?post=${postId}`;\n        }\n      });\n    });\n  }\n  \n  function getNotificationIcon(type) {\n    const icons = {\n      'mention': 'at-outline',\n      'like': 'heart-outline',\n      'comment': 'chatbubble-outline',\n      'follow': 'person-add-outline',\n      'reply': 'return-down-forward-outline',\n      'achievement': 'trophy-outline'\n    };\n    return icons[type] || 'notifications-outline';\n  }\n  \n  // --- HTML Escaping ---\n  function escapeHtml(text) {\n    if (!text) return '';\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n  \n  function createInboxModal() {\n  // --- Inbox Modal ---\n    if (document.getElementById('globalInboxModal')) return;\n    \n    const modal = document.createElement('div');\n    modal.id = 'globalInboxModal';\n    modal.className = 'inbox-modal';\n    modal.hidden = true;\n    modal.setAttribute('role', 'dialog');\n    modal.setAttribute('aria-modal', 'true');\n    modal.setAttribute('aria-labelledby', 'globalInboxTitle');\n    \n    modal.innerHTML = `\n      <div class=\"inbox-backdrop\"></div>\n      <div class=\"inbox-panel\">\n        <div class=\"inbox-header\">\n          <h3 class=\"inbox-title\" id=\"globalInboxTitle\">\n            <ion-icon name=\"notifications-outline\"></ion-icon>\n            Notifications\n          </h3>\n          <div class=\"inbox-header__actions\">\n            <button class=\"inbox-mark-all\" title=\"Mark all as read\">\n              <ion-icon name=\"checkmark-done-outline\"></ion-icon>\n              <span>Mark all read</span>\n            </button>\n            <button class=\"inbox-close\" aria-label=\"Close notifications\">\n              <ion-icon name=\"close-outline\"></ion-icon>\n            </button>\n          </div>\n        </div>\n        <div class=\"inbox-body\" id=\"globalNotificationsList\">\n        </div>\n      </div>\n    `;\n    \n    document.body.appendChild(modal);\n    \n    modal.querySelector('.inbox-backdrop').addEventListener('click', closeInbox);\n    modal.querySelector('.inbox-close').addEventListener('click', closeInbox);\n    modal.querySelector('.inbox-mark-all').addEventListener('click', markAllRead);\n    \n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape' && !modal.hidden) {\n        closeInbox();\n      }\n    });\n  }\n  \n  function openInbox() {\n    const modal = document.getElementById('globalInboxModal');\n    if (!modal) {\n      createInboxModal();\n    }\n    \n    const m = document.getElementById('globalInboxModal');\n    if (m) {\n      m.hidden = false;\n      m.classList.add('open');\n      document.body.style.overflow = 'hidden';\n      renderNotificationsList();\n    }\n  }\n  \n  function closeInbox() {\n    const modal = document.getElementById('globalInboxModal');\n    if (modal) {\n      modal.classList.remove('open');\n      setTimeout(() => {\n        modal.hidden = true;\n        document.body.style.overflow = '';\n      }, 200);\n    }\n  }\n  \n  async function init() {\n  // --- Initialization ---\n    const client = getSupabaseClient();\n    if (!client) {\n      setTimeout(init, 500);\n      return;\n    }\n    \n    try {\n      const { data: { user } } = await client.auth.getUser();\n      currentUser = user;\n      \n      if (currentUser) {\n        createInboxModal();\n        loadNotificationCount();\n        \n        setInterval(loadNotificationCount, 60000);\n      }\n    } catch (err) {\n      console.error('Error initializing notifications:', err);\n    }\n  }\n  \n  window.openGlobalInbox = openInbox;\n  window.closeGlobalInbox = closeInbox;\n  window.loadGlobalNotificationCount = loadNotificationCount;\n  \n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => setTimeout(init, 300));\n  } else {\n    setTimeout(init, 300);\n  }\n})();\n","path":null,"size_bytes":10108,"size_tokens":null},"js/animations.js":{"content":"// ==================== ANIMATION SYSTEM ====================\n\n(function() {\n  'use strict';\n\n  // --- Configuration ---\n  const ANIMATION_CONFIG = {\n    threshold: 0.15,\n    rootMargin: '0px 0px -50px 0px'\n  };\n\n  const ANIMATION_SELECTORS = [\n    '.animate-fade-in',\n    '.animate-slide-up',\n    '.animate-slide-left',\n    '.animate-slide-right',\n    '.animate-scale-in',\n    '.animate-blur-in',\n    '.animate-stagger',\n    '.animate-section'\n  ];\n\n  let observer = null;\n\n  // --- Motion Preferences ---\n  function shouldReduceMotion() {\n    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n  }\n\n  // --- Reveal Helpers ---\n  function revealElement(element) {\n    element.classList.add('is-visible');\n  }\n\n  function revealAllImmediately() {\n    const elements = document.querySelectorAll(ANIMATION_SELECTORS.join(', '));\n    elements.forEach(el => revealElement(el));\n  }\n\n  // --- Intersection Observer ---\n  function handleIntersection(entries, observer) {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        revealElement(entry.target);\n        observer.unobserve(entry.target);\n      }\n    });\n  }\n\n  // --- Scroll Animations ---\n  function initScrollAnimations() {\n    if (shouldReduceMotion()) {\n      revealAllImmediately();\n      return;\n    }\n\n    if (!('IntersectionObserver' in window)) {\n      revealAllImmediately();\n      return;\n    }\n\n    observer = new IntersectionObserver(handleIntersection, {\n      threshold: ANIMATION_CONFIG.threshold,\n      rootMargin: ANIMATION_CONFIG.rootMargin\n    });\n\n    const elements = document.querySelectorAll(ANIMATION_SELECTORS.join(', '));\n    elements.forEach(el => {\n      if (!el.classList.contains('is-visible')) {\n        observer.observe(el);\n      }\n    });\n  }\n\n  // --- Back To Top ---\n  function initBackToTop() {\n    const backToTopBtn = document.querySelector('.back-to-top');\n    if (!backToTopBtn) return;\n\n    const showThreshold = 400;\n    let isVisible = false;\n\n    function toggleVisibility() {\n      const shouldShow = window.scrollY > showThreshold;\n      \n      if (shouldShow !== isVisible) {\n        isVisible = shouldShow;\n        backToTopBtn.classList.toggle('is-visible', isVisible);\n      }\n    }\n\n    function scrollToTop(e) {\n      e.preventDefault();\n      \n      if (shouldReduceMotion()) {\n        window.scrollTo(0, 0);\n      } else {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth'\n        });\n      }\n    }\n\n    window.addEventListener('scroll', toggleVisibility, { passive: true });\n    backToTopBtn.addEventListener('click', scrollToTop);\n    \n    toggleVisibility();\n  }\n\n  // --- Ripple Effect ---\n  function initRippleEffect() {\n    const rippleElements = document.querySelectorAll('.btn-ripple');\n    \n    rippleElements.forEach(el => {\n      el.addEventListener('click', function(e) {\n        if (shouldReduceMotion()) return;\n        \n        const rect = this.getBoundingClientRect();\n        const ripple = document.createElement('span');\n        \n        ripple.className = 'ripple-effect';\n        ripple.style.left = (e.clientX - rect.left) + 'px';\n        ripple.style.top = (e.clientY - rect.top) + 'px';\n        ripple.style.width = ripple.style.height = Math.max(rect.width, rect.height) + 'px';\n        \n        this.appendChild(ripple);\n        \n        setTimeout(() => ripple.remove(), 600);\n      });\n    });\n  }\n\n  // --- Hover Effects ---\n  function initHoverEffects() {\n    if (shouldReduceMotion()) return;\n    \n    const hover3dElements = document.querySelectorAll('.hover-3d');\n    \n    hover3dElements.forEach(el => {\n      el.addEventListener('mousemove', function(e) {\n        const rect = this.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        \n        const centerX = rect.width / 2;\n        const centerY = rect.height / 2;\n        \n        const rotateX = (y - centerY) / 20;\n        const rotateY = (centerX - x) / 20;\n        \n        this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-5px)`;\n      });\n      \n      el.addEventListener('mouseleave', function() {\n        this.style.transform = '';\n      });\n    });\n  }\n\n  // --- Parallax ---\n  function initParallax() {\n    if (shouldReduceMotion()) return;\n    \n    const parallaxElements = document.querySelectorAll('.parallax-bg');\n    \n    if (parallaxElements.length === 0) return;\n    \n    function updateParallax() {\n      const scrollY = window.scrollY;\n      \n      parallaxElements.forEach(el => {\n        const speed = parseFloat(el.dataset.speed) || 0.5;\n        const yPos = -(scrollY * speed);\n        el.style.transform = `translateY(${yPos}px)`;\n      });\n    }\n    \n    window.addEventListener('scroll', updateParallax, { passive: true });\n  }\n\n  // --- Count Up ---\n  function initCountUp() {\n    const countElements = document.querySelectorAll('.count-up');\n    \n    if (countElements.length === 0) return;\n    \n    const countObserver = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          const el = entry.target;\n          const target = parseInt(el.dataset.target) || 0;\n          const duration = parseInt(el.dataset.duration) || 2000;\n          const start = 0;\n          const startTime = performance.now();\n          \n          function animate(currentTime) {\n            const elapsed = currentTime - startTime;\n            const progress = Math.min(elapsed / duration, 1);\n            const easeProgress = 1 - Math.pow(1 - progress, 3);\n            \n            const current = Math.round(start + (target - start) * easeProgress);\n            el.textContent = current.toLocaleString();\n            \n            if (progress < 1) {\n              requestAnimationFrame(animate);\n            }\n          }\n          \n          if (!shouldReduceMotion()) {\n            requestAnimationFrame(animate);\n          } else {\n            el.textContent = target.toLocaleString();\n          }\n          \n          countObserver.unobserve(el);\n        }\n      });\n    }, { threshold: 0.5 });\n    \n    countElements.forEach(el => countObserver.observe(el));\n  }\n\n  // --- Initialization ---\n  function init() {\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', function() {\n        initScrollAnimations();\n        initBackToTop();\n        initRippleEffect();\n        initHoverEffects();\n        initParallax();\n        initCountUp();\n      });\n    } else {\n      initScrollAnimations();\n      initBackToTop();\n      initRippleEffect();\n      initHoverEffects();\n      initParallax();\n      initCountUp();\n    }\n  }\n\n  // --- Public API ---\n  window.MindBalanceAnimations = {\n    init: init,\n    refresh: initScrollAnimations,\n    revealAll: revealAllImmediately\n  };\n\n  init();\n})();\n","path":null,"size_bytes":6877,"size_tokens":null},"css/notifications.css":{"content":"/* === NOTIFICATION BADGE === */\n.notif-badge,\n#notifBadge,\n#mobileNotifBadge {\n  position: absolute;\n  top: -4px;\n  right: -4px;\n  min-width: 18px;\n  height: 18px;\n  padding: 0 5px;\n  background: #ef4444;\n  color: #fff;\n  font-size: 11px;\n  font-weight: 600;\n  border-radius: 9px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n  z-index: 5;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n}\n\n.notif-badge[hidden],\n#notifBadge[hidden],\n#mobileNotifBadge[hidden],\n#userMenuBadge[hidden],\n#userMenuNotifBadge[hidden],\n.user-menu-badge[hidden],\n.menu-item-badge[hidden] {\n  display: none !important;\n}\n\n/* === INBOX BUTTON === */\n.navbar-inbox-btn {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  color: var(--onyx);\n  border-radius: 8px;\n  transition: background 0.2s, color 0.2s;\n}\n\n.navbar-inbox-btn:hover {\n  background: rgba(0,0,0,0.05);\n}\n\n.navbar-inbox-btn .action-icon {\n  font-size: 22px;\n}\n\n[data-theme=\"dark\"] .navbar-inbox-btn {\n  color: var(--white);\n}\n\n[data-theme=\"dark\"] .navbar-inbox-btn:hover {\n  background: rgba(255,255,255,0.1);\n}\n\n/* === INBOX MODAL === */\n.inbox-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-end;\n  padding: 0;\n}\n\n.inbox-modal[hidden] {\n  display: none;\n}\n\n.inbox-backdrop {\n  position: absolute;\n  inset: 0;\n  background: rgba(0,0,0,0.5);\n  opacity: 0;\n  transition: opacity 0.2s ease;\n}\n\n.inbox-modal.open .inbox-backdrop {\n  opacity: 1;\n}\n\n/* === INBOX PANEL === */\n.inbox-panel {\n  position: relative;\n  width: 100%;\n  max-width: 420px;\n  height: 100vh;\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  transform: translateX(100%);\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: -4px 0 20px rgba(0,0,0,0.15);\n}\n\n.inbox-modal.open .inbox-panel {\n  transform: translateX(0);\n}\n\n[data-theme=\"dark\"] .inbox-panel {\n  background: #1a1a2e;\n}\n\n/* === INBOX HEADER === */\n.inbox-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px 20px;\n  border-bottom: 1px solid #e5e7eb;\n  background: #f9fafb;\n}\n\n[data-theme=\"dark\"] .inbox-header {\n  background: #16162a;\n  border-color: #2d2d4a;\n}\n\n.inbox-title {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin: 0;\n}\n\n.inbox-title ion-icon {\n  font-size: 22px;\n  color: var(--user-accent, #af916d);\n}\n\n[data-theme=\"dark\"] .inbox-title {\n  color: #fff;\n}\n\n.inbox-header__actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.inbox-mark-all {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 12px;\n  background: transparent;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  color: #6b7280;\n  font-size: 13px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.inbox-mark-all:hover {\n  background: var(--user-accent, #af916d);\n  border-color: var(--user-accent, #af916d);\n  color: #fff;\n}\n\n.inbox-mark-all ion-icon {\n  font-size: 16px;\n}\n\n[data-theme=\"dark\"] .inbox-mark-all {\n  border-color: #3d3d5c;\n  color: #9ca3af;\n}\n\n.inbox-close {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  background: transparent;\n  border: none;\n  border-radius: 8px;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.inbox-close:hover {\n  background: #f3f4f6;\n  color: #111;\n}\n\n.inbox-close ion-icon {\n  font-size: 22px;\n}\n\n[data-theme=\"dark\"] .inbox-close:hover {\n  background: #2d2d4a;\n  color: #fff;\n}\n\n/* === INBOX BODY === */\n.inbox-body {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0;\n}\n\n/* === LOADING STATE === */\n.inbox-loading {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  gap: 12px;\n  color: #6b7280;\n}\n\n.inbox-spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid #e5e7eb;\n  border-top-color: var(--user-accent, #af916d);\n  border-radius: 50%;\n  animation: inbox-spin 0.8s linear infinite;\n}\n\n@keyframes inbox-spin {\n  to { transform: rotate(360deg); }\n}\n\n/* === EMPTY STATE === */\n.inbox-empty {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 30px;\n  text-align: center;\n  color: #6b7280;\n}\n\n.inbox-empty ion-icon {\n  font-size: 48px;\n  margin-bottom: 12px;\n  opacity: 0.5;\n}\n\n.inbox-empty span {\n  font-size: 16px;\n  font-weight: 500;\n  color: #374151;\n}\n\n.inbox-empty p {\n  font-size: 14px;\n  margin-top: 8px;\n  max-width: 260px;\n}\n\n[data-theme=\"dark\"] .inbox-empty span {\n  color: #e5e7eb;\n}\n\n/* === NOTIFICATION ITEMS === */\n.inbox-item {\n  display: flex;\n  gap: 14px;\n  padding: 16px 20px;\n  border-bottom: 1px solid #f3f4f6;\n  cursor: pointer;\n  transition: background 0.2s;\n  position: relative;\n}\n\n.inbox-item:hover {\n  background: #f9fafb;\n}\n\n.inbox-item.unread {\n  background: #fef3e2;\n}\n\n.inbox-item.unread:hover {\n  background: #fde8c8;\n}\n\n[data-theme=\"dark\"] .inbox-item {\n  border-color: #2d2d4a;\n}\n\n[data-theme=\"dark\"] .inbox-item:hover {\n  background: #232340;\n}\n\n[data-theme=\"dark\"] .inbox-item.unread {\n  background: rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .inbox-item.unread:hover {\n  background: rgba(var(--user-accent-rgb), 0.25);\n}\n\n.inbox-item__icon {\n  flex-shrink: 0;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, var(--user-accent, #af916d), var(--user-accent-grad-end));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n}\n\n.inbox-item__icon ion-icon {\n  font-size: 20px;\n}\n\n.inbox-item__content {\n  flex: 1;\n  min-width: 0;\n}\n\n.inbox-item__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 10px;\n  margin-bottom: 4px;\n}\n\n.inbox-item__from {\n  font-weight: 600;\n  color: #1a1a2e;\n  font-size: 14px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[data-theme=\"dark\"] .inbox-item__from {\n  color: #fff;\n}\n\n.inbox-item__time {\n  font-size: 12px;\n  color: #9ca3af;\n  white-space: nowrap;\n}\n\n.inbox-item__text {\n  font-size: 14px;\n  color: #4b5563;\n  margin: 0;\n}\n\n[data-theme=\"dark\"] .inbox-item__text {\n  color: #9ca3af;\n}\n\n.inbox-item__preview {\n  font-size: 13px;\n  color: #6b7280;\n  margin: 6px 0 0;\n  font-style: italic;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[data-theme=\"dark\"] .inbox-item__preview {\n  color: #6b7280;\n}\n\n.inbox-item__dot {\n  position: absolute;\n  top: 50%;\n  right: 16px;\n  transform: translateY(-50%);\n  width: 8px;\n  height: 8px;\n  background: var(--user-accent, #af916d);\n  border-radius: 50%;\n}\n\n.inbox-item--achievement .inbox-item__icon {\n  background: linear-gradient(135deg, var(--user-accent-grad-end) 0%, var(--user-accent-light) 100%);\n  color: #1a1a2e;\n}\n\n.inbox-item--achievement .inbox-item__from {\n  color: var(--user-accent-grad-end);\n}\n\n.inbox-item--achievement .inbox-item__text {\n  font-weight: 600;\n}\n\n.inbox-item--achievement .inbox-item__preview {\n  font-style: normal;\n}\n\n/* === MOBILE RESPONSIVE === */\n@media (max-width: 480px) {\n  .inbox-panel {\n    max-width: 100%;\n  }\n  \n  .inbox-mark-all span {\n    display: none;\n  }\n  \n  .inbox-mark-all {\n    padding: 8px;\n  }\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  .inbox-backdrop,\n  .inbox-panel {\n    transition: none;\n  }\n  \n  .inbox-spinner {\n    animation: none;\n  }\n}\n","path":null,"size_bytes":7537,"size_tokens":null},"mindspace-build/css/style.css":{"content":"/* === IMPORTS === */\n@import url(\"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap\");\n@import url(\"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap\");\n@import url(\"https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap\");\n\n\n/* === VARIABLES === */\n:root {\n  --header-height: 100px;\n  --header-height-active: 60px;\n  --header-height-safe: calc(var(--header-height) + 20px);\n\n  \n  --breakpoint-mobile: 480px;\n  --breakpoint-tablet: 768px;\n  --breakpoint-desktop: 1024px;\n  --breakpoint-wide: 1200px;\n\n  \n  --touch-target-min: 44px;\n\n  \n  --nav-transition: 0.35s cubic-bezier(0.4, 0, 0.2, 1);\n  --nav-transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n\n  \n  --user-accent: #5BA4E6;\n  --user-accent-hover: #4893D4;\n  --user-accent-rgb: 91, 164, 230;\n  --user-accent-glow: rgba(91, 164, 230, 0.3);\n  --user-accent-light: #a3c8ed;\n  --user-accent-soft: #bde0fe;\n  --user-accent-dark: #2d6ab0;\n  --user-accent-grad-end: #7BBDF7;\n  --user-accent-text: #245a8c;\n\n  --purple-accent: var(--user-accent-light, #8b6de1);\n  --purple-gradient: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n  --purple-glow: var(--user-accent-glow, rgba(139, 109, 225, 0.3));\n\n  \n  --scrollbar-track: #e0f0ff;\n  --scrollbar-track-dark: #1e1e30;\n  --scrollbar-thumb: var(--user-accent);\n  --scrollbar-thumb-hover: var(--user-accent-hover);\n}\n\n/* === RESET === */\n*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n  list-style: none;\n  text-decoration: none;\n  font-family: 'Poppins', 'Noto Sans KR', sans-serif;\n  box-sizing: border-box;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n/* === ACCESSIBILITY === */\n.skip-to-content {\n  position: fixed;\n  top: -100px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #2a2a3e;\n  color: #fff;\n  padding: 12px 24px;\n  border-radius: 0 0 8px 8px;\n  z-index: 9999;\n  font-weight: 600;\n  text-decoration: none;\n  transition: top 0.3s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n.skip-to-content:focus {\n  top: 0;\n  outline: 3px solid var(--user-accent-grad-end);\n  outline-offset: 2px;\n}\n\nli {\n  list-style: none;\n}\n\na,\n\n/* === RESPONSIVE MEDIA === */\nimg,\ndata,\nspan,\ninput,\nbutton,\nselect,\ntextarea {\n  display: block;\n}\n\n/* === ION-ICON SAFARI/iOS FALLBACK === */\nion-icon {\n  display: inline-block;\n  width: 1em;\n  height: 1em;\n  contain: strict;\n  fill: currentcolor;\n  box-sizing: content-box !important;\n  visibility: inherit;\n}\n\na {\n  color: inherit;\n  text-decoration: none;\n}\n\nimg {\n  height: auto;\n}\n\ninput,\nbutton,\nselect,\ntextarea {\n  background: none;\n  border: none;\n  font: inherit;\n}\n\ninput,\nselect,\ntextarea {\n  width: 100%;\n  outline: none;\n}\n\nbutton {\n  cursor: pointer;\n}\n\naddress {\n  font-style: normal;\n}\n\n/* === BASE === */\nhtml {\n  font-size: 16px;\n  scroll-behavior: smooth;\n  -webkit-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n}\n\n/* === BODY === */\nbody {\n  font-size: clamp(1rem, 0.5vw + 0.875rem, 1.125rem);\n  line-height: 1.6;\n}\n\n.food-item.hide {\n  display: none;\n}\n\n.img-line {\n  width: 50%;\n  height: 1px;\n  margin: 0 15px;\n  border-bottom: 1px dashed #7D7D7D;\n}\n\n/* === ORIENTATION LOCK === */\n.orientation-lock {\n  display: none !important;\n  visibility: hidden !important;\n  pointer-events: none !important;\n}\n\n/* === MOBILE RESPONSIVE === */\n@media (max-width: 767px) {\n  :root {\n    --header-height: 70px;\n    --header-height-safe: 90px;\n  }\n\n  .header {\n    padding-block: 15px;\n  }\n\n  .header.active {\n    padding-block: 8px;\n  }\n\n  \n  .nav-open-btn {\n    min-width: 44px;\n    min-height: 44px;\n  }\n\n  .navbar .close-btn {\n    min-width: 44px;\n    min-height: 44px;\n  }\n\n  \n/* === NAVBAR === */\n  .navbar {\n    max-width: 300px;\n    left: -300px;\n  }\n\n  .navbar.active {\n    transform: translateX(300px);\n  }\n\n  .navbar-link {\n    padding-block: 14px;\n    min-height: 44px;\n  }\n}\n\n/* === LANDSCAPE === */\n@media screen and (max-width: 900px) and (orientation: landscape) {\n  :root {\n    --header-height: 50px;\n    --header-height-safe: 60px;\n  }\n\n  .header {\n    padding-block: 8px;\n  }\n\n  .header.active {\n    padding-block: 5px;\n  }\n\n  \n  #main-hero.hero {\n    min-height: 100vh;\n    min-height: 100dvh;\n  }\n\n}\n\n/* === SAFE AREA === */\n@supports (padding: max(0px)) {\n  .header {\n    padding-left: max(20px, env(safe-area-inset-left));\n    padding-right: max(20px, env(safe-area-inset-right));\n  }\n\n  .topbar {\n    padding-left: max(10px, env(safe-area-inset-left));\n    padding-right: max(10px, env(safe-area-inset-right));\n  }\n\n  .navbar {\n    padding-left: max(30px, env(safe-area-inset-left));\n  }\n}\n\n:root {\n  --bg: #f5f5f5;\n  --primary: #A1CAF1;\n  --color-primary: var(--user-accent);\n  --blue-crayola: var(--user-accent);\n\n  --quick-silver: hsla(0, 0%, 65%, 1);\n  --davys-grey: hsla(30, 3%, 34%, 1);\n\n  --smoky-black-1: hsla(40, 12%, 5%, 1);\n  --smoky-black-2: hsla(30, 8%, 5%, 1);\n  --smoky-black-3: hsla(0, 3%, 7%, 1);\n\n  --eerie-black-1: hsla(210, 4%, 9%, 1);\n  --eerie-black-2: hsla(210, 4%, 11%, 1);\n  --eerie-black-3: hsla(180, 2%, 8%, 1);\n  --eerie-black-4: hsla(0, 0%, 13%, 1);\n\n  --white: hsla(0, 0%, 100%, 1);\n  --white-alpha-20: hsla(0, 0%, 100%, 0.2);\n  --white-alpha-10: hsla(0, 0%, 100%, 0.1);\n\n  --black: hsla(0, 0%, 0%, 1);\n  --black-alpha-80: hsla(0, 0%, 0%, 0.8);\n  --black-alpha-15: hsla(0, 0%, 0%, 0.15);\n\n  --color: #77bb41;\n\n  --bs-warning: #96d35f;\n  --bs-font-sans-serif: Poppins, sans-serif !important;\n  --bs-warning-rgb: 254, 159, 16;\n  --bs-link-hover-color-rgb: #96d35f;\n  --bs-light-rgb: 255, 248, 224;\n  --bg-color: #f4f4f4;\n\n  --loading-text-gradient: linear-gradient(90deg,\n      transparent 0% 16.66%,\n      var(--smoky-black-3) 33.33% 50%,\n      transparent 66.66% 75%);\n  --gradient-1: linear-gradient(to top,\n      hsla(0, 0%, 0%, 0.9),\n      hsla(0, 0%, 0%, 0.7),\n      transparent);\n\n  \n  --fontFamily-forum: 'Poppins', sans-serif;\n  --fontFamily-dm_sans: 'Poppins', sans-serif;\n\n  \n  --fontSize-display-1: clamp(2.5rem, 5vw + 1rem, 4.5rem);\n  --fontSize-headline-1: clamp(2rem, 4vw + 0.5rem, 3.5rem);\n  --fontSize-headline-2: clamp(1.75rem, 3vw + 0.5rem, 2.75rem);\n  --fontSize-title-1: clamp(1.5rem, 2.5vw + 0.5rem, 2rem);\n  --fontSize-title-2: clamp(1.375rem, 2vw + 0.5rem, 1.75rem);\n  --fontSize-title-3: clamp(1.25rem, 1.5vw + 0.5rem, 1.5rem);\n  --fontSize-title-4: clamp(1.125rem, 1vw + 0.5rem, 1.375rem);\n  --fontSize-body-1: clamp(1.125rem, 1vw + 0.5rem, 1.25rem);\n  --fontSize-body-2: clamp(1rem, 0.5vw + 0.75rem, 1.125rem);\n  --fontSize-body-3: clamp(1.0625rem, 0.5vw + 0.625rem, 1.1875rem);\n  --fontSize-body-4: clamp(1rem, 0.5vw + 0.75rem, 1.125rem);\n  --fontSize-label-1: clamp(0.875rem, 0.25vw + 0.625rem, 1rem);\n  --fontSize-label-2: clamp(0.8125rem, 0.25vw + 0.5rem, 0.9375rem);\n\n  \n  --weight-regular: 400;\n  --weight-bold: 700;\n\n  \n  --lineHeight-1: 1em;\n  --lineHeight-2: 1.2em;\n  --lineHeight-3: 1.5em;\n  --lineHeight-4: 1.6em;\n  --lineHeight-5: 1.85em;\n  --lineHeight-6: 1.4em;\n\n  \n  --letterSpacing-1: 0.15em;\n  --letterSpacing-2: 0.4em;\n  --letterSpacing-3: 0.2em;\n  --letterSpacing-4: 0.3em;\n  --letterSpacing-5: 3px;\n\n  \n  --space-3xs: clamp(0.25rem, 0.5vw, 0.375rem);\n  --space-2xs: clamp(0.375rem, 0.75vw, 0.5rem);\n  --space-xs: clamp(0.5rem, 1vw, 0.75rem);\n  --space-sm: clamp(0.75rem, 1.5vw, 1rem);\n  --space-md: clamp(1rem, 2vw, 1.5rem);\n  --space-lg: clamp(1.5rem, 3vw, 2rem);\n  --space-xl: clamp(2rem, 4vw, 3rem);\n  --space-2xl: clamp(3rem, 6vw, 4rem);\n  --space-3xl: clamp(4rem, 8vw, 6rem);\n  \n  \n  --container-padding: clamp(1rem, 4vw, 2rem);\n\n  --section-space: clamp(50px, 8vw, 90px);\n\n  --shadow-1: 0px 0px 25px 0px hsla(0, 0%, 0%, 0.25);\n\n  --radius-24: 24px;\n  --radius-circle: 50%;\n\n  --transition-1: 250ms ease;\n  --transition-2: 500ms ease;\n  --transition-3: 1000ms ease;\n}\n\nbody {\n  flex-direction: column;\n  padding-top: var(--header-height-safe);\n  display: flex;\n  min-height: 100vh;\n\n  font-family: 'Poppins', sans-serif;\n  font-size: var(--fontSize-body-4);\n  font-weight: var(--weight-regular);\n  line-height: var(--lineHeight-5);\n\n  overflow-x: hidden;\n  overflow-y: auto;\n  background-color: var(--bg-primary, #ffffff);\n  color: var(--text-primary, #1a1a2e);\n  transition: background-color 0.3s ease, color 0.3s ease;\n}\n\nhtml {\n  overflow-x: hidden;\n}\n\n/* === OVERFLOW PREVENTION === */\n.container,\nsection,\n\n/* === MAIN CONTENT === */\nmain,\narticle,\nfooter {\n  max-width: 100vw;\n  overflow-x: hidden;\n}\n\nimg,\nvideo,\niframe,\nembed,\nobject {\n  max-width: 100%;\n  height: auto;\n}\n\n/* === TEXT WRAPPING === */\nh1, h2, h3, h4, h5, h6 {\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  hyphens: auto;\n  text-wrap: balance;\n}\n\np, li, td, th, label, span, a {\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n}\n\np {\n  text-wrap: pretty;\n}\n\n.content-area,\n.article-content,\n.blog-content,\n.card-text,\n.post-content {\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n}\n\nmain,\n.main-content,\n[role=\"main\"] {\n  padding-top: 20px;\n}\n\n/* === SCROLL MARGIN === */\nsection[id],\nh2[id],\nh3[id],\n[id]:target {\n  scroll-margin-top: var(--header-height-safe);\n}\n\n/* === NAV ACTIVE === */\nbody.nav-active {\n  overflow: hidden;\n}\n\n/* === SCROLLBAR === */\nhtml,\nbody {\n  scrollbar-width: auto;\n  scrollbar-color: var(--user-accent) var(--scrollbar-track);\n}\n\n*:not(html):not(body) {\n  scrollbar-width: thin;\n  scrollbar-color: var(--user-accent) transparent;\n}\n\n[data-theme=\"dark\"],\n[data-theme=\"dark\"] body {\n  scrollbar-color: var(--user-accent) var(--scrollbar-track-dark);\n}\n\n::-webkit-scrollbar {\n  width: 14px;\n  height: 14px;\n}\n\n::-webkit-scrollbar-track {\n  background: var(--scrollbar-track);\n}\n\n::-webkit-scrollbar-thumb {\n  background: var(--user-accent);\n  border: 3px solid var(--scrollbar-track);\n  border-radius: 20px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: var(--user-accent-hover);\n}\n\n::-webkit-scrollbar-thumb:active {\n  background: var(--user-accent-hover);\n}\n\n::-webkit-scrollbar-corner {\n  background: var(--scrollbar-track);\n}\n\n[data-theme=\"dark\"]::-webkit-scrollbar-track,\n[data-theme=\"dark\"] ::-webkit-scrollbar-track {\n  background: var(--scrollbar-track-dark);\n}\n\n[data-theme=\"dark\"]::-webkit-scrollbar-thumb,\n[data-theme=\"dark\"] ::-webkit-scrollbar-thumb {\n  background: var(--user-accent);\n  border: 3px solid var(--scrollbar-track-dark);\n  border-radius: 20px;\n}\n\n[data-theme=\"dark\"]::-webkit-scrollbar-thumb:hover,\n[data-theme=\"dark\"] ::-webkit-scrollbar-thumb:hover {\n  background: var(--user-accent-hover);\n}\n\n[data-theme=\"dark\"]::-webkit-scrollbar-corner,\n[data-theme=\"dark\"] ::-webkit-scrollbar-corner {\n  background: var(--scrollbar-track-dark);\n}\n\n/* === DARK MODE === */\n[data-theme=\"dark\"] {\n  scrollbar-color: var(--user-accent) var(--scrollbar-track-dark);\n}\n\n/* === TYPOGRAPHY === */\n.display-1,\n.headline-1,\n.headline-2,\n.title-1,\n.title-2,\n.title-3,\n.title-4 {\n  font-family: var(--fontFamily-forum);\n  font-weight: var(--weight-regular);\n  line-height: var(--lineHeight-2);\n}\n\n.display-1 {\n  font-size: var(--fontSize-display-1);\n  line-height: var(--lineHeight-1);\n}\n\n.headline-1 {\n  font-size: var(--fontSize-headline-1);\n  color: hsla(93.44, 48.41%, 49.41%, 1);\n}\n\n.headline-2 {\n  font-size: var(--fontSize-headline-2);\n  line-height: var(--lineHeight-6);\n}\n\n.title-1 {\n  font-size: var(--fontSize-title-1);\n}\n\n.title-2 {\n  color: rgb(254, 254, 254);\n  font-size: var(--fontSize-title-2);\n}\n\n.title-3 {\n  font-size: var(--fontSize-title-3);\n}\n\n.title-4 {\n  font-size: var(--fontSize-title-4);\n}\n\n.body-1 {\n  font-size: var(--fontSize-body-1);\n  line-height: var(--lineHeight-6);\n}\n\n.body-2 {\n  font-size: var(--fontSize-body-2);\n  line-height: var(--lineHeight-4);\n}\n\n.body-3 {\n  font-size: var(--fontSize-body-3);\n}\n\n.body-4 {\n  font-size: var(--fontSize-body-4);\n}\n\n.label-1 {\n  font-size: var(--fontSize-label-1);\n}\n\n.label-2 {\n  font-size: var(--fontSize-label-2);\n}\n\n/* === UTILITIES === */\n.container {\n  padding-inline: 16px;\n}\n\n.separator {\n  width: 8px;\n  height: 8px;\n  border: 1px solid var(--blue-crayola);\n  transform: rotate(45deg);\n}\n\n.contact-label {\n  font-weight: var(--weight-bold);\n}\n\n.contact-number {\n  color: var(--blue-crayola);\n  max-width: max-content;\n  margin-inline: auto;\n}\n\n.hover-underline {\n  position: relative;\n  max-width: max-content;\n}\n\n.hover-underline::after {\n  content: \"\";\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 5px;\n  border-block: 1px solid var(--blue-crayola);\n  transform: scaleX(0.2);\n  opacity: 0;\n  transition: var(--transition-2);\n}\n\n.hover-underline:is(:hover, :focus-visible)::after {\n  transform: scaleX(1);\n  opacity: 1;\n}\n\n.contact-number::after {\n  bottom: -5px;\n}\n\n.text-center {\n  text-align: center;\n}\n\n.img-cover {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.section-subtitle {\n  position: relative;\n  color: var(--blue-crayola);\n  font-weight: var(--weight-bold);\n  text-transform: uppercase;\n  letter-spacing: var(--letterSpacing-2);\n  margin-block-end: 12px;\n}\n\n.section-subtitle::after {\n  content: url('../images/separator.svg');\n  display: block;\n  width: 100px;\n  margin-inline: auto;\n  margin-block-start: 5px;\n}\n\n.btn {\n  position: relative;\n  color: var(--blue-crayola);\n  font-size: var(--fontSize-label-2);\n  font-weight: var(--weight-bold);\n  text-transform: uppercase;\n  letter-spacing: var(--letterSpacing-5);\n  max-width: max-content;\n  border: 2px solid var(--blue-crayola);\n  padding: 12px 45px;\n  overflow: hidden;\n  z-index: 1;\n}\n\n.btn::before {\n  content: \"\";\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 200%;\n  height: 200%;\n  border-radius: var(--radius-circle);\n  background-color: var(--blue-crayola);\n  transition: var(--transition-2);\n  z-index: -1;\n}\n\n.btn .text {\n  transition: var(--transition-1);\n}\n\n.btn .text-2 {\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  min-width: max-content;\n  color: var(--smoky-black-1);\n}\n\n.btn:is(:hover, :focus-visible)::before {\n  bottom: -50%;\n}\n\n.btn:is(:hover, :focus-visible) .text-1 {\n  transform: translateY(-40px);\n}\n\n.btn:is(:hover, :focus-visible) .text-2 {\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.btn-secondary {\n  background-color: hsla(93.44, 48.41%, 49.41%, 1);\n  color: var(--black);\n}\n\n.btn-secondary::before {\n  background-color: var(--smoky-black-1);\n}\n\n.btn-secondary .text-2 {\n  color: var(--white);\n}\n\n.has-before,\n.has-after {\n  position: relative;\n  z-index: 1;\n}\n\n.has-before::before,\n.has-after::after {\n  content: \"\";\n  position: absolute;\n}\n\n.section {\n  position: relative;\n  padding-block: var(--section-space);\n  overflow: hidden;\n  z-index: 1;\n}\n\n.bg-black-10 {\n  background-color: var(--smoky-black-2);\n}\n\n.grid-list {\n  display: grid;\n  gap: 40px;\n}\n\n/* === PRELOAD === */\n.preload {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #38b6ff !important;\n  z-index: 99999;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 0;\n  transition: opacity 0.6s ease, transform 0.6s ease;\n}\n\n.preload > * {\n  transition: opacity 0.4s ease, transform 0.4s ease;\n}\n\n.preload.loaded > * {\n  opacity: 0;\n  transform: scale(0.95);\n}\n\n.preload.loaded {\n  transition-delay: 300ms;\n  opacity: 0;\n  transform: scale(1.05);\n  pointer-events: none;\n}\n\n.preload-logo {\n  width: 180px;\n  height: auto;\n  margin-bottom: 8px;\n  animation: preloadLogoIn 0.8s ease-out forwards;\n}\n\n@keyframes preloadLogoIn {\n  0% { opacity: 0; transform: translateY(-20px) scale(0.9); }\n  100% { opacity: 1; transform: translateY(0) scale(1); }\n}\n\n.loader-gif {\n  width: min(300px, 60vw);\n  height: min(300px, 60vw);\n  position: relative;\n  object-fit: contain;\n}\n\n.preload-text {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  font-weight: 500;\n  color: #ffffff;\n  letter-spacing: 0.15em;\n  text-transform: uppercase;\n  margin-top: 4px;\n  animation: preloadTextPulse 2s ease-in-out infinite;\n}\n\n@keyframes preloadTextPulse {\n  0%, 100% { opacity: 0.6; }\n  50% { opacity: 1; }\n}\n\n.progress-bar {\n  width: min(400px, 90vw);\n  height: 15px;\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 8px;\n  overflow: hidden;\n  margin-top: 20px;\n  position: relative;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n}\n\n.progress-bar-fill {\n  height: 100%;\n  width: 0%;\n  background: linear-gradient(90deg, var(--user-accent), var(--user-accent-light), var(--user-accent));\n  background-size: 200% 100%;\n  border-radius: 8px;\n  animation: preloadProgressShimmer 1.5s ease-in-out infinite;\n  transition: width 0.3s ease;\n  box-shadow: 0 0 8px rgba(var(--user-accent-rgb), 0.4);\n}\n\n@keyframes preloadProgressShimmer {\n  0% { background-position: 200% 0; }\n  100% { background-position: -200% 0; }\n}\n\n/* Dark mode preloader */\n[data-theme=\"dark\"] .preload-text,\n.dark-mode .preload-text {\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .progress-bar,\n.dark-mode .progress-bar {\n  background: rgba(var(--user-accent-rgb), 0.1);\n}\n\n@media (max-width: 768px) {\n  .preload-logo {\n    width: 140px;\n  }\n\n  .loader-gif {\n    width: 60vw;\n    height: 60vw;\n  }\n\n  .progress-bar {\n    width: 90vw;\n    height: 12px;\n  }\n\n  .preload-text {\n    font-size: 0.85rem;\n  }\n}\n\n/* === HEADER === */\n.header .btn {\n  display: block;\n  margin-inline-start: auto;\n  margin-inline-end: 15px;\n}\n\n.header {\n  position: fixed;\n  top: var(--topbar-height, 36px);\n  left: 0;\n  width: 100%;\n  background-color: var(--user-accent-light);\n  padding-block: 40px;\n  z-index: 100;\n  pointer-events: auto;\n  border-block-end: 1px solid rgba(0, 0, 0, 0.1);\n  transition: padding 0.4s cubic-bezier(0.4, 0, 0.2, 1),\n    box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1),\n    border-radius 0.4s cubic-bezier(0.4, 0, 0.2, 1),\n    top 0.4s ease,\n    transform 0.3s ease;\n}\n\n.header.active {\n  padding-block: 9px;\n  background-color: var(--user-accent-light);\n  border-color: rgba(0, 0, 0, 0.1);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  border-radius: 0 0 16px 16px;\n  overflow: visible;\n}\n\n.header .container {\n  padding-inline: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 8px;\n}\n\n.nav-open-btn {\n  padding: 12px;\n  padding-inline-end: 0;\n  z-index: 100;\n  position: relative;\n  width: 44px;\n  height: 44px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n}\n\n.nav-open-btn .line {\n  width: 28px;\n  height: 2px;\n  background-color: var(--white);\n  margin-block: 3px;\n  transform-origin: center;\n  transition: var(--nav-transition);\n  border-radius: 2px;\n}\n\n.nav-open-btn.is-active .line-1 {\n  transform: rotate(45deg) translateY(6px) translateX(4px);\n}\n\n.nav-open-btn.is-active .line-2 {\n  opacity: 0;\n  transform: scaleX(0);\n}\n\n.nav-open-btn.is-active .line-3 {\n  transform: rotate(-45deg) translateY(-6px) translateX(4px);\n}\n\n.nav-open-btn:hover .line {\n  background-color: var(--user-accent-grad-end);\n}\n\n.nav-open-btn:focus-visible {\n  outline: 2px solid var(--user-accent-grad-end);\n  outline-offset: 4px;\n  border-radius: 4px;\n}\n\n.navbar {\n  position: fixed;\n  background: var(--user-accent-soft);\n  top: 0;\n  left: -360px;\n  bottom: 0;\n  max-width: 360px;\n  width: 100%;\n  padding-inline: 0;\n  padding-block-end: 0;\n  overflow: hidden;\n  visibility: hidden;\n  z-index: 9999;\n  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s 0.35s;\n  border-right: 1px solid rgba(0, 0, 0, 0.08);\n  box-shadow: 8px 0 40px rgba(0, 0, 0, 0.15);\n  display: flex;\n  flex-direction: column;\n}\n\n.navbar-scroll-content {\n  flex: 1 1 auto;\n  overflow-y: auto;\n  overflow-x: hidden;\n  min-height: 0;\n  display: flex;\n  flex-direction: column;\n  padding: 0 16px 24px;\n  -webkit-overflow-scrolling: touch;\n  scroll-behavior: smooth;\n  overscroll-behavior: contain;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(0,0,0,0.15) transparent;\n}\n\n.navbar-scroll-content::-webkit-scrollbar {\n  width: 4px;\n}\n\n.navbar-scroll-content::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.navbar-scroll-content::-webkit-scrollbar-thumb {\n  background: rgba(0,0,0,0.15);\n  border-radius: 4px;\n}\n\n.navbar-scroll-content::-webkit-scrollbar-thumb:hover {\n  background: rgba(0,0,0,0.25);\n}\n\n.navbar.active {\n  visibility: visible;\n  transform: translateX(360px);\n  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s 0s;\n}\n\n.navbar.active .navbar-item {\n  animation: mobileNavSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n  opacity: 0;\n}\n\n.navbar.active .navbar-item:nth-child(1) { animation-delay: 80ms; }\n.navbar.active .navbar-item:nth-child(2) { animation-delay: 120ms; }\n.navbar.active .navbar-item:nth-child(3) { animation-delay: 160ms; }\n.navbar.active .navbar-item:nth-child(4) { animation-delay: 200ms; }\n.navbar.active .navbar-item:nth-child(5) { animation-delay: 240ms; }\n.navbar.active .navbar-item:nth-child(6) { animation-delay: 280ms; }\n.navbar.active .navbar-item:nth-child(7) { animation-delay: 320ms; }\n\n@keyframes mobileNavSlideIn {\n  from {\n    opacity: 0;\n    transform: translateX(-16px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n.mobile-nav-header {\n  display: none;\n  align-items: center;\n  justify-content: center;\n  padding: 18px 20px;\n  background: linear-gradient(135deg, #f8f5f0 0%, #f0ebe3 100%);\n  border-bottom: 1px solid rgba(0,0,0,0.06);\n  flex-shrink: 0;\n  position: relative;\n}\n\n.mobile-nav-header__logo {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.mobile-nav-header__logo img {\n  height: 40px;\n  width: auto;\n}\n\n.mobile-nav-close {\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  border: 1px solid rgba(0,0,0,0.08);\n  background: #fff;\n  color: #4a4a68;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  padding: 0;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.06);\n  position: absolute;\n  right: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.mobile-nav-close ion-icon {\n  font-size: 22px;\n  --ionicon-stroke-width: 48px;\n}\n\n.mobile-nav-close:hover {\n  background: #f0ebe3;\n  color: #1a1a2e;\n  transform: translateY(-50%) scale(1.05);\n}\n\n.mobile-nav-close:active {\n  transform: translateY(-50%) scale(0.95);\n}\n\n[data-theme=\"dark\"] .mobile-nav-header {\n  background: linear-gradient(135deg, #2d2b3d 0%, #252342 100%);\n  border-bottom-color: rgba(255,255,255,0.06);\n}\n\n[data-theme=\"dark\"] .mobile-nav-close {\n  background: rgba(255,255,255,0.08);\n  border-color: rgba(255,255,255,0.1);\n  color: #c0c0d0;\n}\n\n[data-theme=\"dark\"] .mobile-nav-close:hover {\n  background: rgba(255,255,255,0.14);\n  color: #fff;\n}\n\n.mobile-nav-crisis {\n  display: none;\n  padding: 12px 16px 4px;\n  flex-shrink: 0;\n}\n\n.mobile-crisis-btn {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  width: 100%;\n  padding: 12px 16px;\n  background: #dc3545;\n  color: #fff;\n  border-radius: 14px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  text-decoration: none;\n  transition: all 0.25s ease;\n  box-shadow: 0 2px 8px rgba(220,53,69,0.25);\n}\n\n.mobile-crisis-btn ion-icon {\n  font-size: 20px;\n}\n\n.mobile-crisis-btn .mobile-crisis-arrow {\n  margin-left: auto;\n  font-size: 16px;\n  opacity: 0.7;\n  transition: transform 0.2s ease;\n}\n\n.mobile-crisis-btn:hover {\n  background: #c82333;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 14px rgba(220,53,69,0.35);\n}\n\n.mobile-crisis-btn:hover .mobile-crisis-arrow {\n  transform: translateX(3px);\n}\n\n.mobile-crisis-btn:active {\n  transform: translateY(0);\n}\n\n[data-theme=\"dark\"] .mobile-crisis-btn {\n  background: #b52a37;\n  box-shadow: 0 2px 8px rgba(181,42,55,0.35);\n}\n\n.mobile-nav-divider {\n  display: none;\n  height: 1px;\n  background: rgba(0,0,0,0.06);\n  margin: 8px 4px 12px;\n}\n\n[data-theme=\"dark\"] .mobile-nav-divider {\n  background: rgba(255,255,255,0.06);\n}\n\n.nav-link-icon {\n  display: none;\n}\n\n.navbar .close-btn {\n  color: #4a4a68;\n  background: rgba(0, 0, 0, 0.05);\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  width: 44px;\n  height: 44px;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  margin-inline-start: auto;\n  margin-block: 20px 24px;\n  padding: 0;\n  transition: all 0.25s ease;\n}\n\n.navbar .close-btn ion-icon {\n  --ionicon-stroke-width: 48px;\n  font-size: 20px;\n}\n\n.navbar .close-btn:is(:hover, :focus-visible) {\n  color: #1a1a2e;\n  background: rgba(0, 0, 0, 0.1);\n  border-color: rgba(0, 0, 0, 0.15);\n  transform: scale(1.05);\n}\n\n.navbar .logo {\n  max-width: max-content;\n  margin-inline: auto;\n  margin-block-end: 32px;\n  padding-block: 8px;\n}\n\n.navbar-list {\n  border-block-end: 1px solid rgba(0, 0, 0, 0.08);\n  margin-block-end: 16px;\n  flex-shrink: 0;\n  padding-block: 8px;\n}\n\n.navbar .logo,\n.navbar .close-btn {\n  flex-shrink: 0;\n}\n\n.navbar-item {\n  border-block-start: none;\n  margin-block: 4px;\n}\n\n.navbar-link {\n  position: relative;\n  overflow: hidden;\n  font-size: 15px;\n  font-weight: 500;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 14px 18px;\n  margin-block: 2px;\n  max-width: unset;\n  border-radius: 12px;\n  color: #4a4a68;\n  background: transparent;\n  transition: all 0.25s ease;\n  white-space: nowrap;\n}\n\n.navbar-link::after {\n  display: none;\n}\n\n.navbar-link .span {\n  transition: all 0.25s ease;\n}\n\n.navbar-link:is(:hover, :focus-visible) {\n  background: rgba(0, 0, 0, 0.05);\n  color: #1a1a2e;\n}\n\n.navbar-link:is(:hover, :focus-visible) .span {\n  color: #1a1a2e;\n  transform: translateX(8px);\n}\n\n.navbar-link.active {\n  background: rgba(var(--user-accent-rgb), 0.2);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.5);\n  color: #1a1a2e;\n}\n\n.navbar-link.active .span {\n  color: var(--user-accent);\n  font-weight: 600;\n  transform: none;\n}\n\n.navbar-link .separator {\n  display: none;\n}\n\n.navbar-title {\n  margin-block-end: 15px;\n}\n\n.navbar-text {\n  margin-block: 10px;\n}\n\n.navbar .body-4 {\n  color: var(--quick-silver);\n}\n\n.sidebar-link {\n  transition: var(--transition-1);\n}\n\n.sidebar-link:is(:hover, :focus-visible) {\n  color: var(--blue-crayola);\n}\n\n.navbar .text-center .separator {\n  margin-block: 30px;\n  margin-inline: auto;\n}\n\n.navbar .contact-label {\n  margin-block-end: 10px;\n}\n\n.navbar::-webkit-scrollbar-thumb {\n  background-color: var(--white-alpha-10);\n}\n\n.overlay {\n  position: fixed;\n  inset: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity var(--nav-transition);\n  z-index: 9998;\n}\n\n.overlay.active {\n  opacity: 1;\n  pointer-events: all;\n}\n\n\n.navbar-link .ripple {\n  position: absolute;\n  border-radius: 50%;\n  background-color: rgba(0, 0, 0, 0.1);\n  transform: scale(0);\n  animation: rippleEffect 0.6s ease-out forwards;\n  pointer-events: none;\n}\n\n[data-theme=\"dark\"] .navbar-link .ripple {\n  background-color: rgba(255, 255, 255, 0.3);\n}\n\n@keyframes rippleEffect {\n  to {\n    transform: scale(4);\n    opacity: 0;\n  }\n}\n\n.header .btn {\n  display: none;\n}\n\n.topbar {\n  display: block;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 101;\n  background: linear-gradient(135deg, var(--accent-color, var(--user-accent)) 0%, var(--accent-color-dark, var(--user-accent-dark)) 100%);\n  transition: transform 0.4s ease, opacity 0.4s ease;\n}\n\n.topbar.dismissed {\n  transform: translateY(-100%);\n  opacity: 0;\n  pointer-events: none;\n}\n\n.topbar.topbar--hidden {\n  transform: translateY(-100%);\n  pointer-events: none;\n}\n\n.header.topbar--gone {\n  top: 0;\n}\n\nbody.nav-active .topbar {\n  transform: translateY(-100%);\n  pointer-events: none;\n}\n\n.topbar__inner {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 16px;\n  max-width: 1400px;\n  margin: 0 auto;\n  position: relative;\n  min-height: 36px;\n}\n\n.topbar__slides {\n  position: relative;\n  flex: 1;\n  text-align: center;\n  min-height: 18px;\n}\n\n.topbar__slide {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  width: 100%;\n  transform: translateY(calc(-50% + 10px));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  opacity: 0;\n  transition: opacity 0.45s ease, transform 0.45s ease;\n  pointer-events: none;\n}\n\n.topbar__slide.active {\n  opacity: 1;\n  transform: translateY(-50%);\n  pointer-events: auto;\n  position: relative;\n  top: auto;\n  transform: none;\n}\n\n.topbar__slide.exit-up {\n  opacity: 0;\n  transform: translateY(calc(-50% - 10px));\n}\n\n.topbar__slide ion-icon {\n  font-size: 15px;\n  color: rgba(255, 255, 255, 0.9);\n  flex-shrink: 0;\n}\n\n.topbar__slide span {\n  display: inline;\n  font-family: 'Poppins', sans-serif;\n  font-size: 12.5px;\n  font-weight: 500;\n  color: #fff;\n  letter-spacing: 0.2px;\n}\n\n.topbar__slide[data-slide=\"3\"],\n.topbar__slide[data-slide=\"4\"] {\n  white-space: nowrap;\n  overflow: hidden;\n  flex-wrap: nowrap;\n}\n\n.topbar__slide[data-slide=\"3\"] span {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n}\n\n@media (max-width: 600px) {\n  .topbar__inner {\n    padding: 6px 10px;\n    min-height: 32px;\n  }\n\n  .topbar__slide span {\n    font-size: 10.5px;\n    letter-spacing: 0;\n    line-height: 1.4;\n  }\n\n  .topbar__slide ion-icon {\n    font-size: 13px;\n  }\n\n  .topbar__slide[data-slide=\"3\"],\n  .topbar__slide[data-slide=\"4\"] {\n    white-space: normal;\n    overflow: visible;\n    flex-wrap: wrap;\n    text-align: center;\n  }\n\n  .topbar__slide[data-slide=\"3\"] span,\n  .topbar__slide[data-slide=\"4\"] span {\n    overflow: visible;\n    text-overflow: initial;\n    white-space: normal;\n    display: inline;\n    word-break: break-word;\n  }\n\n  .topbar__dots {\n    margin-left: 8px;\n    gap: 4px;\n  }\n}\n\n.topbar__slide a {\n  display: inline;\n  color: #fff;\n  text-decoration: underline;\n  text-underline-offset: 2px;\n  font-weight: 600;\n  transition: opacity 0.2s ease;\n}\n\n.topbar__slide a:hover {\n  opacity: 0.85;\n}\n\n.topbar__slide strong {\n  font-weight: 700;\n}\n\n.topbar__dots {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  margin-left: 16px;\n  flex-shrink: 0;\n}\n\n.topbar__dot {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  border: none;\n  background: rgba(255, 255, 255, 0.4);\n  cursor: pointer;\n  padding: 0;\n  transition: background 0.3s ease, transform 0.3s ease;\n}\n\n.topbar__dot.active {\n  background: #fff;\n  transform: scale(1.3);\n}\n\n.topbar__dot:hover {\n  background: rgba(255, 255, 255, 0.7);\n}\n\n.topbar__close {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.7);\n  cursor: pointer;\n  padding: 2px;\n  margin-left: 12px;\n  flex-shrink: 0;\n  transition: color 0.2s ease, transform 0.2s ease;\n  font-size: 16px;\n}\n\n.topbar__close:hover {\n  color: #fff;\n  transform: scale(1.15);\n}\n\n.topbar__close ion-icon {\n  font-size: 16px;\n}\n\n@media (max-width: 600px) {\n  .topbar__inner {\n    padding: 7px 10px;\n    min-height: 32px;\n  }\n\n  .topbar__slide span {\n    font-size: 11px;\n    line-height: 1.3;\n  }\n\n  .topbar__slide ion-icon {\n    font-size: 13px;\n  }\n\n  .topbar__dots {\n    margin-left: 10px;\n    gap: 4px;\n  }\n\n  .topbar__dot {\n    width: 5px;\n    height: 5px;\n  }\n\n  .topbar__close {\n    margin-left: 8px;\n  }\n}\n\n#main-hero.hero {\n  width: 100%;\n  margin-top: -48px;\n  min-height: 100vh;\n  min-height: 100dvh;\n  position: relative;\n  padding: 0 5%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  z-index: revert;\n}\n\n#main-hero.hero::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 1;\n  pointer-events: none;\n}\n\n#main-hero .back-video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  z-index: 0;\n  background: #1a1a2e;\n}\n\n#main-hero .hero-content {\n  text-align: center;\n  z-index: 2;\n  line-height: 1.2;\n}\n\n#main-hero .hero-content h1 {\n  font-size: 80px;\n  color: transparent;\n  margin-bottom: 20px;\n  -webkit-text-stroke: 2px #fff;\n  font-weight: 600;\n  transition: 0.5s;\n  opacity: 1;\n}\n\n#main-hero .hero-content h1 {\n  text-transform: uppercase;\n}\n\n#main-hero .hero-content h1.hero-fade-out {\n  opacity: 0;\n  transition: opacity 1s ease;\n}\n\n#main-hero .hero-content h1.hero-fade-in {\n  opacity: 1;\n  transition: opacity 1s ease;\n}\n\n#main-hero .hero-content h1:hover {\n  color: #fff;\n  -webkit-text-stroke: 0px;\n}\n\n@media (max-width: 600px) {\n  #main-hero .hero-content h1 {\n    font-size: 46px;\n  }\n}\n\n#main-hero .hero-content a {\n  text-decoration: none;\n  display: inline-block;\n  color: #fff;\n  font-size: 24px;\n  border: 2px solid #fff;\n  padding: 14px 70px;\n  border-radius: 50px;\n  transition: 0.5s;\n}\n\n#main-hero .hero-content a:hover {\n  transform: scale(1.1);\n  color: #fff;\n  -webkit-text-stroke: 0px;\n}\n\n@media (max-width: 768px) {\n  #main-hero .hero-content a {\n    padding: 10px 40px;\n    font-size: 18px;\n  }\n}\n\n@media (max-width: 480px) {\n  #main-hero .hero-content a {\n    padding: 8px 25px;\n    font-size: 14px;\n  }\n}\n\n.intro-section {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 60px 20px;\n  background-color: #f4f4f4;\n}\n\n.intro-container {\n  max-width: 1200px;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  gap: 80px;\n  align-items: center;\n}\n\n.intro-text {\n  flex: 1;\n  color: #333;\n  font-family: 'Poppins', sans-serif;\n  line-height: 1.6;\n  position: relative;\n}\n\n.intro-line {\n  position: absolute;\n  top: 0;\n  left: -20px;\n  height: 100%;\n  width: 5px;\n  background-color: var(--user-accent);\n  border-radius: 5px;\n}\n\n.intro-title {\n  font-size: 36px;\n  font-weight: bold;\n  color: #2c3e50;\n  margin-bottom: 20px;\n}\n\n.intro-description {\n  font-size: 18px;\n  color: #7f8c8d;\n  margin-bottom: 30px;\n}\n\n.intro-image {\n  flex: 1;\n  max-width: 500px;\n}\n\n.intro-img {\n  width: 100%;\n  height: auto;\n  object-fit: cover;\n  border-radius: 12px;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\n}\n\n.intro-stats {\n  display: flex;\n  gap: 24px;\n  margin-bottom: 30px;\n  flex-wrap: wrap;\n}\n\n.intro-stat {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 16px 20px;\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);\n  border: 1px solid #e8e8e8;\n  min-width: 90px;\n  flex: 1;\n}\n\n.intro-stat-number {\n  font-size: 28px;\n  font-weight: 700;\n  color: var(--user-accent);\n  line-height: 1.2;\n}\n\n.intro-stat-label {\n  font-size: 13px;\n  color: #7f8c8d;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-top: 4px;\n}\n\n.intro-actions {\n  display: flex;\n  gap: 16px;\n  flex-wrap: wrap;\n}\n\n.intro-btn {\n  display: inline-block;\n  padding: 14px 32px;\n  border-radius: 50px;\n  font-size: 16px;\n  font-weight: 600;\n  text-decoration: none;\n  transition: transform 0.3s, box-shadow 0.3s;\n  font-family: 'Poppins', sans-serif;\n}\n\n.intro-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\n}\n\n.intro-btn-primary {\n  background: var(--user-accent);\n  color: #fff;\n  border: 2px solid var(--user-accent);\n}\n\n.intro-btn-secondary {\n  background: transparent;\n  color: var(--user-accent);\n  border: 2px solid var(--user-accent);\n}\n\n.intro-btn-secondary:hover {\n  background: var(--user-accent);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .intro-stat {\n  background: #2a2a2a;\n  border-color: #3a3a3a;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .intro-stat-label {\n  color: #aaa;\n}\n\n@media (max-width: 768px) {\n  .intro-container {\n    flex-direction: column;\n    align-items: center;\n    gap: 20px;\n  }\n\n  .intro-image {\n    margin-bottom: 30px;\n  }\n\n  .intro-title {\n    font-size: 30px;\n  }\n\n  .intro-description {\n    font-size: 16px;\n  }\n\n  .intro-stats {\n    gap: 12px;\n  }\n\n  .intro-stat {\n    padding: 12px 14px;\n    min-width: 70px;\n  }\n\n  .intro-stat-number {\n    font-size: 22px;\n  }\n\n  .intro-actions {\n    justify-content: center;\n  }\n\n  .intro-btn {\n    padding: 12px 24px;\n    font-size: 14px;\n  }\n}\n\n.mb-actionbox {\n  background: #ffffff;\n  padding: 70px 16px;\n  position: relative;\n  z-index: 1;\n}\n\n.mb-actionbox button {\n  pointer-events: auto !important;\n  position: relative;\n  z-index: 10;\n}\n\n.mb-actionbox__wrap {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.mb-actionbox__feature {\n  display: grid;\n  grid-template-columns: 1.1fr 0.9fr;\n  gap: 48px;\n  align-items: center;\n  margin-bottom: 44px;\n}\n\n.mb-actionbox__media {\n  border-radius: 22px;\n  overflow: hidden;\n  background: #f3f5f7;\n  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.08);\n}\n\n.mb-actionbox__img {\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: cover;\n  aspect-ratio: 16 / 9;\n  transition: opacity 220ms ease;\n  will-change: opacity;\n}\n\n.mb-actionbox__content {\n  padding: 6px 4px;\n}\n\n.mb-actionbox__kicker {\n  font-size: 14px;\n  font-weight: 700;\n  letter-spacing: 0.02em;\n  color: var(--user-accent-text);\n  margin-bottom: 12px;\n}\n\n.mb-actionbox__title {\n  font-size: clamp(30px, 3vw, 44px);\n  line-height: 1.08;\n  font-weight: 800;\n  color: #0e1b2a;\n  margin-bottom: 14px;\n}\n\n.mb-actionbox__desc {\n  font-size: 18px;\n  line-height: 1.6;\n  color: #2f3b4a;\n  max-width: 52ch;\n  margin-bottom: 22px;\n}\n\n.mb-actionbox__btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 14px 22px;\n  border-radius: 999px;\n  background: var(--user-accent);\n  color: #0e1b2a;\n  font-weight: 800;\n  text-decoration: none !important;\n  transition: transform 150ms ease, box-shadow 150ms ease, filter 150ms ease;\n  box-shadow: 0 10px 24px rgba(var(--user-accent-rgb), 0.25);\n  pointer-events: auto !important;\n  position: relative;\n  z-index: 11;\n}\n\n.mb-actionbox__btn:hover {\n  transform: translateY(-1px);\n  filter: brightness(0.98);\n}\n\n.mb-actionbox__btn:active {\n  transform: translateY(0);\n}\n\n.mb-actionbox__cards {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 18px;\n  position: relative;\n  z-index: 12;\n}\n\n.mb-card {\n  text-align: left;\n  background: #ffffff;\n  border: 1.5px solid #d9e1ee;\n  border-radius: 18px;\n  padding: 18px 18px 20px;\n  cursor: pointer;\n  transition: transform 150ms ease, box-shadow 150ms ease, border-color 150ms ease, background-color 150ms ease;\n  min-height: 110px;\n  position: relative;\n  z-index: 13;\n  pointer-events: auto !important;\n}\n\n.mb-card__kicker {\n  font-size: 13px;\n  font-weight: 700;\n  color: var(--user-accent-text);\n  margin-bottom: 10px;\n}\n\n.mb-card__title {\n  font-size: 18px;\n  font-weight: 800;\n  line-height: 1.2;\n  color: #0e1b2a;\n}\n\n.mb-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.08);\n  border-color: #bcd0f1;\n}\n\n.mb-card.is-active {\n  background: #bde0fe;\n  border-color: var(--user-accent-text);\n  box-shadow: 0 14px 34px rgba(43, 90, 166, 0.18);\n}\n\n.mb-card.is-soft:not(.is-active) {\n  background: #ffffff;\n  border: 1.5px solid #d9e1ee;\n  box-shadow: none;\n}\n\n.mb-actionbox__content,\n.mb-actionbox__media {\n  will-change: opacity, transform;\n  transition: opacity 220ms ease, transform 220ms ease;\n}\n\n.mb-actionbox__feature.is-fading .mb-actionbox__content,\n.mb-actionbox__feature.is-fading .mb-actionbox__media {\n  opacity: 0;\n  transform: translateY(6px);\n}\n\n@media (max-width: 980px) {\n  .mb-actionbox__feature {\n    grid-template-columns: 1fr;\n    gap: 22px;\n  }\n\n  .mb-actionbox__cards {\n    grid-template-columns: 1fr 1fr;\n  }\n}\n\n@media (max-width: 520px) {\n  .mb-actionbox {\n    padding: 54px 14px;\n  }\n\n  .mb-actionbox__cards {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-actionbox__desc {\n    font-size: 16px;\n  }\n}\n\n.our-story-section {\n  padding: 60px 20px;\n  background-color: #f4f4f4;\n}\n\n.our-story-container {\n  max-width: 1200px;\n  width: 100%;\n  margin: 0 auto;\n  text-align: center;\n}\n\n.our-story-title {\n  font-size: 36px;\n  font-weight: bold;\n  color: #2c3e50;\n  margin-bottom: 40px;\n}\n\n.timeline-wrapper {\n  position: relative;\n  width: 100%;\n  overflow: hidden;\n}\n\n.timeline {\n  display: flex;\n  width: 480%;\n  animation: scroll-timeline 50s linear infinite;\n}\n\n.timeline-inner {\n  display: flex;\n  width: 100%;\n}\n\n.timeline-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  width: 20%;\n  padding: 20px;\n}\n\n.timeline-icon {\n  width: 50px;\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.timeline-icon ion-icon {\n  font-size: 40px;\n  color: var(--user-accent);\n}\n\n.timeline-item::after {\n  content: none;\n}\n\n@keyframes scroll-timeline {\n  0% {\n    transform: translateX(0);\n  }\n\n  100% {\n    transform: translateX(-50%);\n  }\n}\n\n@media (max-width: 768px) {\n  .timeline {\n    flex-direction: row;\n    align-items: center;\n    width: 2100%;\n    animation: scroll-timeline 50s linear infinite;\n  }\n\n  .timeline-inner {\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n  }\n\n  .timeline-item {\n    width: 100vw;\n    flex-shrink: 0;\n    padding: 15px;\n    margin-right: 10px;\n  }\n\n  .timeline-wrapper {\n    overflow: hidden;\n    max-width: 100%;\n  }\n\n  .timeline-item {\n    scroll-snap-align: center;\n  }\n\n  .timeline-icon {\n    width: 40px;\n    height: 40px;\n    margin-bottom: 10px;\n  }\n\n  .timeline-date {\n    font-size: 18px;\n    margin-bottom: 10px;\n    line-height: 1.5;\n    word-wrap: break-word;\n  }\n\n  .timeline-content {\n    display: block;\n    max-width: 90%;\n    word-wrap: break-word;\n  }\n}\n\n.rl {\n  background: #ffffff;\n  padding: 60px 0 90px;\n  padding-top: 180px;\n}\n\n.rl-container {\n  max-width: 1200px;\n  width: 100%;\n  margin-inline: auto;\n}\n\n.rl-header {\n  padding-bottom: 16px;\n}\n\n.rl-title {\n  font-size: clamp(42px, 5vw, 74px);\n  line-height: 0.95;\n  font-weight: 900;\n  letter-spacing: -0.02em;\n  color: #111111;\n  text-transform: uppercase;\n  margin: 0 0 18px;\n}\n\n.rl-lead {\n  font-size: 16px;\n  line-height: 1.7;\n  color: #1f2937;\n  max-width: 110ch;\n  margin: 0 0 10px;\n}\n\n.rl-support {\n  margin-top: 10px;\n  font-size: 14px;\n  line-height: 1.7;\n  color: #111111;\n}\n\n.rl-srOnly {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n}\n\n.rl-search {\n  position: relative;\n  margin-top: 18px;\n  padding-top: 16px;\n  border-top: 1px solid #e5e7eb;\n}\n\n.rl-searchInput {\n  width: 100%;\n  height: 52px;\n  padding: 0 56px 0 18px;\n  border: 2px solid #e5e7eb;\n  border-radius: 12px;\n  transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;\n}\n\n.rl-searchInput:hover {\n  border-color: #d1d5db;\n}\n\n.rl-searchInput:focus {\n  outline: none;\n  border-color: #5BA4E6;\n  box-shadow: 0 0 0 4px rgba(32, 104, 168, 0.15), 0 4px 12px rgba(0, 0, 0, 0.08);\n  background-color: #fffef5;\n}\n\n.rl-searchInput::placeholder {\n  color: #9ca3af;\n}\n\n.rl-clearSearch {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-18%);\n  height: 38px;\n  width: 42px;\n  border-radius: 10px;\n  border: 0;\n  background: #111111;\n  color: #ffffff;\n  font-weight: 900;\n  cursor: pointer;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.rl-chips {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 12px;\n  padding: 14px 0 0;\n  flex-wrap: wrap;\n}\n\n.rl-chipList {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.rl-chip {\n  display: inline-flex;\n  align-items: center;\n  gap: 10px;\n  background: #eeeeee;\n  color: #111111;\n  border: 0;\n  border-radius: 999px;\n  padding: 8px 12px;\n  font-size: 13px;\n  font-weight: 800;\n  cursor: pointer;\n}\n\n.rl-chip span {\n  display: inline-flex;\n  width: 18px;\n  height: 18px;\n  border-radius: 999px;\n  background: #ffffff;\n  color: #111111;\n  line-height: 18px;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: 900;\n}\n\n.rl-clearAll {\n  background: transparent;\n  border: 0;\n  padding: 8px 0;\n  font-size: 13px;\n  font-weight: 900;\n  text-decoration: underline;\n  cursor: pointer;\n  color: #111111;\n}\n\n.rl-grid {\n  display: grid;\n  grid-template-columns: 320px 1fr;\n  gap: 30px;\n  padding-top: 26px;\n  align-items: start;\n}\n\n.rl-sidebar {\n  position: sticky;\n  top: 20px;\n}\n\n.rl-filterBlock {\n  margin-bottom: 22px;\n}\n\n.rl-filterTitle {\n  font-size: 13px;\n  font-weight: 900;\n  letter-spacing: 0.02em;\n  color: #111111;\n  margin: 0 0 12px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #111111;\n}\n\n.rl-filterList {\n  display: grid;\n  gap: 6px;\n  max-height: 340px;\n  overflow: auto;\n  padding-right: 8px;\n}\n\n.rl-filterBtn {\n  text-align: left;\n  border: 0;\n  background: transparent;\n  padding: 8px 2px;\n  font-size: 14px;\n  color: #111111;\n  cursor: pointer;\n}\n\n.rl-filterBtn:hover {\n  text-decoration: underline;\n}\n\n.rl-filterBtn.is-active {\n  color: var(--user-accent);\n  font-weight: 600;\n}\n\n.rl-meta {\n  font-size: 12px;\n  color: #6b7280;\n  margin: 0 0 12px;\n}\n\n.rl-results {\n  max-height: 800px;\n  overflow-y: auto;\n  padding-right: 15px;\n}\n\n.rl-cards {\n  display: grid;\n  gap: 20px;\n}\n\n.rl-card {\n  border-left: 4px solid #5BA4E6;\n  padding: 20px 24px;\n  background: #fafafa;\n  border-radius: 0 12px 12px 0;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n    box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n    border-color 0.3s ease;\n  opacity: 0;\n  transform: translateY(20px);\n  animation: rl-card-enter 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.rl-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(32, 104, 168, 0.15);\n  border-color: #3B8DD4;\n}\n\n@keyframes rl-card-enter {\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.rl-card:nth-child(1) {\n  animation-delay: 0.05s;\n}\n\n.rl-card:nth-child(2) {\n  animation-delay: 0.1s;\n}\n\n.rl-card:nth-child(3) {\n  animation-delay: 0.15s;\n}\n\n.rl-card:nth-child(4) {\n  animation-delay: 0.2s;\n}\n\n.rl-card:nth-child(5) {\n  animation-delay: 0.25s;\n}\n\n.rl-card:nth-child(6) {\n  animation-delay: 0.3s;\n}\n\n.rl-card:nth-child(7) {\n  animation-delay: 0.35s;\n}\n\n.rl-card:nth-child(8) {\n  animation-delay: 0.4s;\n}\n\n.rl-card:nth-child(n+9) {\n  animation-delay: 0.45s;\n}\n\n.rl-cardSmall {\n  font-size: 12px;\n  color: #6b7280;\n  margin: 0 0 10px;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.rl-cardSmall::before {\n  content: \"\";\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  background: #5BA4E6;\n  border-radius: 50%;\n}\n\n.rl-cardTitle {\n  font-size: 28px;\n  font-weight: 800;\n  letter-spacing: -0.01em;\n  margin: 0;\n  color: #111111;\n  transition: color 0.2s ease;\n}\n\n.rl-card:hover .rl-cardTitle {\n  color: #3B8DD4;\n}\n\n.rl-cardBody {\n  font-size: 14px;\n  line-height: 1.7;\n  color: #374151;\n  max-width: 110ch;\n  margin: 12px 0 16px;\n}\n\n.rl-tags {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-bottom: 16px;\n}\n\n.rl-tag {\n  display: inline-flex;\n  align-items: center;\n  padding: 6px 12px;\n  border-radius: 20px;\n  background: linear-gradient(135deg, #5BA4E6 0%, #4893D4 100%);\n  color: #111111;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.03em;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n  box-shadow: 0 2px 4px rgba(32, 104, 168, 0.3);\n}\n\n.rl-tag:hover {\n  transform: translateY(-2px) scale(1.02);\n  box-shadow: 0 4px 8px rgba(32, 104, 168, 0.4);\n}\n\n.rl-actions {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 12px;\n}\n\n.rl-visitBtn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  height: 42px;\n  min-width: 110px;\n  padding: 0 20px;\n  background: linear-gradient(135deg, #111111 0%, #2d2d2d 100%);\n  color: #ffffff;\n  text-decoration: none;\n  font-size: 12px;\n  font-weight: 700;\n  border-radius: 8px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n  position: relative;\n  overflow: hidden;\n}\n\n.rl-visitBtn::after {\n  content: \"\\2192\";\n  font-size: 14px;\n  transition: transform 0.3s ease;\n}\n\n.rl-visitBtn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\n  background: linear-gradient(135deg, #2d2d2d 0%, #111111 100%);\n}\n\n.rl-visitBtn:hover::after {\n  transform: translateX(4px);\n}\n\n.rl-visitBtn:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n}\n\n.rl-skeleton {\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n  background-size: 200% 100%;\n  animation: rl-skeleton-shimmer 1.5s infinite;\n  border-radius: 8px;\n}\n\n@keyframes rl-skeleton-shimmer {\n  0% {\n    background-position: 200% 0;\n  }\n\n  100% {\n    background-position: -200% 0;\n  }\n}\n\n.rl-skeleton-card {\n  padding: 20px 24px;\n  border-left: 4px solid #e0e0e0;\n  background: #fafafa;\n  border-radius: 0 12px 12px 0;\n}\n\n.rl-skeleton-title {\n  height: 28px;\n  width: 60%;\n  margin-bottom: 12px;\n}\n\n.rl-skeleton-text {\n  height: 14px;\n  width: 100%;\n  margin-bottom: 8px;\n}\n\n.rl-skeleton-text:last-child {\n  width: 75%;\n}\n\n.rl-skeleton-tags {\n  display: flex;\n  gap: 8px;\n  margin-top: 16px;\n}\n\n.rl-skeleton-tag {\n  height: 28px;\n  width: 70px;\n  border-radius: 20px;\n}\n\n.rl-results::-webkit-scrollbar {\n  width: 6px;\n}\n\n.rl-results::-webkit-scrollbar-track {\n  background: transparent;\n  border-radius: 20px;\n}\n\n.rl-results::-webkit-scrollbar-thumb {\n  background: linear-gradient(180deg, var(--user-accent) 0%, var(--user-accent-hover) 100%);\n  border-radius: 20px;\n}\n\n.rl-results::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(180deg, var(--user-accent-hover) 0%, var(--user-accent) 100%);\n}\n\n@media (max-width: 980px) {\n  .rl-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .rl-sidebar {\n    position: static;\n  }\n\n  .rl-filterList {\n    max-height: 220px;\n  }\n\n  .rl-cardTitle {\n    font-size: 26px;\n  }\n}\n\n@media (max-width: 520px) {\n  .rl {\n    padding: 48px 0 70px;\n  }\n\n  .rl-title {\n    font-size: 38px;\n  }\n\n  .rl-searchInput {\n    height: 50px;\n  }\n}\n\n.rl-spotlight {\n  margin-bottom: 40px;\n  padding: 30px;\n  background: linear-gradient(135deg, #fff9e6 0%, #fff 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(32, 104, 168, 0.2);\n}\n\n.rl-spotlight__header {\n  text-align: center;\n  margin-bottom: 24px;\n}\n\n.rl-spotlight__title {\n  font-size: 24px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n\n.rl-spotlight__title::before {\n  content: \"â­\";\n}\n\n.rl-spotlight__subtitle {\n  color: #666;\n  font-size: 14px;\n}\n\n.rl-spotlight__cards {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 24px;\n}\n\n.rl-spotlight-card {\n  background: #fff;\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  border-left: 5px solid #5BA4E6;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  display: flex;\n  flex-direction: column;\n}\n\n.rl-spotlight-card:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);\n}\n\n.rl-spotlight-card__badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  background: linear-gradient(135deg, #5BA4E6, #4893D4);\n  color: #fff;\n  font-size: 11px;\n  font-weight: 600;\n  padding: 4px 12px;\n  border-radius: 20px;\n  margin-bottom: 12px;\n  width: fit-content;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.rl-spotlight-card__provider {\n  font-size: 12px;\n  color: #888;\n  margin-bottom: 8px;\n}\n\n.rl-spotlight-card__title {\n  font-size: 18px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 10px;\n  line-height: 1.3;\n}\n\n.rl-spotlight-card__desc {\n  font-size: 14px;\n  color: #555;\n  line-height: 1.6;\n  flex: 1;\n  margin-bottom: 16px;\n}\n\n.rl-spotlight-card__actions {\n  display: flex;\n  gap: 10px;\n}\n\n.rl-spotlight-card__btn {\n  flex: 1;\n  padding: 10px 16px;\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  text-align: center;\n  text-decoration: none;\n  transition: all 0.2s ease;\n}\n\n.rl-spotlight-card__btn--primary {\n  background: linear-gradient(135deg, #5BA4E6, #4893D4);\n  color: #fff;\n}\n\n.rl-spotlight-card__btn--primary:hover {\n  background: linear-gradient(135deg, #4893D4, #3B8DD4);\n  transform: translateY(-2px);\n}\n\n@media (max-width: 980px) {\n  .rl-spotlight__cards {\n    grid-template-columns: 1fr;\n  }\n}\n\n.rl-local-search {\n  margin-bottom: 30px;\n  padding: 24px 30px;\n  background: linear-gradient(135deg, #e8f5e9 0%, #fff 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(76, 175, 80, 0.2);\n}\n\n.rl-local-search__header {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.rl-local-search__title {\n  font-size: 20px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n\n.rl-local-search__title i {\n  color: #4CAF50;\n}\n\n.rl-local-search__subtitle {\n  color: #666;\n  font-size: 14px;\n}\n\n.rl-local-search__form {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n}\n\n.rl-local-search__input-group {\n  display: flex;\n  gap: 10px;\n  width: 100%;\n  max-width: 400px;\n}\n\n.rl-local-search__input {\n  flex: 1;\n  padding: 12px 16px;\n  border: 2px solid #ddd;\n  border-radius: 10px;\n  font-size: 16px;\n  transition: all 0.2s ease;\n  text-align: center;\n  letter-spacing: 2px;\n  font-weight: 600;\n}\n\n.rl-local-search__input:focus {\n  outline: none;\n  border-color: #4CAF50;\n  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.15);\n}\n\n.rl-local-search__btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background: linear-gradient(135deg, #4CAF50, #45a049);\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.rl-local-search__btn:hover {\n  background: linear-gradient(135deg, #45a049, #3d8b40);\n  transform: translateY(-2px);\n}\n\n.rl-local-search__btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.rl-local-search__powered {\n  font-size: 12px;\n  color: #888;\n}\n\n.rl-local-search__powered a {\n  color: #4CAF50;\n  text-decoration: none;\n}\n\n.rl-local-search__powered a:hover {\n  text-decoration: underline;\n}\n\n.rl-local-search__results {\n  margin-top: 20px;\n  background: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\n}\n\n.rl-local-search__results-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid #eee;\n}\n\n.rl-local-search__results-header h4 {\n  font-size: 16px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin: 0;\n}\n\n.rl-local-search__close {\n  background: none;\n  border: none;\n  color: #888;\n  cursor: pointer;\n  padding: 4px;\n  font-size: 16px;\n  transition: color 0.2s;\n}\n\n.rl-local-search__close:hover {\n  color: #333;\n}\n\n.rl-local-search__results-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.rl-local-result {\n  padding: 16px;\n  background: #f9f9f9;\n  border-radius: 10px;\n  border-left: 4px solid #4CAF50;\n  transition: background 0.2s;\n}\n\n.rl-local-result:hover {\n  background: #f0f0f0;\n}\n\n.rl-local-result__name {\n  font-size: 15px;\n  font-weight: 600;\n  color: #2c2c2c;\n  margin-bottom: 6px;\n}\n\n.rl-local-result__address {\n  font-size: 13px;\n  color: #666;\n  margin-bottom: 4px;\n}\n\n.rl-local-result__phone {\n  font-size: 13px;\n  color: #4CAF50;\n  font-weight: 500;\n}\n\n.rl-local-result__phone a {\n  color: inherit;\n  text-decoration: none;\n}\n\n.rl-local-result__phone a:hover {\n  text-decoration: underline;\n}\n\n.rl-local-result__distance {\n  font-size: 12px;\n  color: #888;\n  margin-top: 6px;\n}\n\n.rl-local-search__view-more {\n  margin-top: 16px;\n  text-align: center;\n}\n\n.rl-local-search__view-more-link {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  color: #4CAF50;\n  text-decoration: none;\n  font-size: 14px;\n  font-weight: 600;\n  transition: color 0.2s;\n}\n\n.rl-local-search__view-more-link:hover {\n  color: #45a049;\n  text-decoration: underline;\n}\n\n.rl-local-search__loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  margin-top: 20px;\n  padding: 20px;\n  color: #666;\n}\n\n.rl-local-search__spinner {\n  width: 24px;\n  height: 24px;\n  border: 3px solid #eee;\n  border-top-color: #4CAF50;\n  border-radius: 50%;\n  animation: rl-spin 0.8s linear infinite;\n}\n\n@keyframes rl-spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.rl-local-search__error {\n  margin-top: 16px;\n  padding: 12px 16px;\n  background: #ffebee;\n  border-radius: 8px;\n  color: #c62828;\n  font-size: 14px;\n  text-align: center;\n}\n\n@media (max-width: 600px) {\n  .rl-local-search__input-group {\n    flex-direction: column;\n  }\n\n  .rl-local-search__btn {\n    width: 100%;\n    justify-content: center;\n  }\n}\n\nbody.dark-theme .rl-local-search {\n  background: linear-gradient(135deg, #1a2a1a 0%, #1e1e2e 100%);\n  border-color: rgba(76, 175, 80, 0.3);\n}\n\nbody.dark-theme .rl-local-search__title {\n  color: #fff;\n}\n\nbody.dark-theme .rl-local-search__subtitle {\n  color: #aaa;\n}\n\nbody.dark-theme .rl-local-search__input {\n  background: #2a2a3a;\n  border-color: #444;\n  color: #fff;\n}\n\nbody.dark-theme .rl-local-search__input:focus {\n  border-color: #4CAF50;\n}\n\nbody.dark-theme .rl-local-search__results {\n  background: #2a2a3a;\n}\n\nbody.dark-theme .rl-local-search__results-header {\n  border-bottom-color: #444;\n}\n\nbody.dark-theme .rl-local-search__results-header h4 {\n  color: #fff;\n}\n\nbody.dark-theme .rl-local-result {\n  background: #1e1e2e;\n}\n\nbody.dark-theme .rl-local-result:hover {\n  background: #252535;\n}\n\nbody.dark-theme .rl-local-result__name {\n  color: #fff;\n}\n\nbody.dark-theme .rl-local-result__address {\n  color: #aaa;\n}\n\nbody.dark-theme .rl-local-search__error {\n  background: #3a1a1a;\n}\n\n.rl-suggest-wrapper {\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 20px;\n}\n\n.rl-suggest-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: linear-gradient(135deg, #4CAF50, #45a049);\n  color: #fff;\n  border: none;\n  border-radius: 30px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);\n}\n\n.rl-suggest-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);\n}\n\n.rl-suggest-btn ion-icon {\n  font-size: 20px;\n}\n\n.suggest-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 9999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease, visibility 0.3s ease;\n}\n\n.suggest-modal.is-active {\n  opacity: 1;\n  visibility: visible;\n}\n\n.suggest-modal__backdrop {\n  position: absolute;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n\n.suggest-modal__content {\n  position: relative;\n  background: #fff;\n  border-radius: 20px;\n  padding: 40px;\n  width: 90%;\n  max-width: 600px;\n  max-height: 90vh;\n  overflow-y: auto;\n  transform: translateY(20px);\n  transition: transform 0.3s ease;\n}\n\n.suggest-modal.is-active .suggest-modal__content {\n  transform: translateY(0);\n}\n\n.suggest-modal__close {\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  background: #f0f0f0;\n  border: none;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background 0.2s ease;\n}\n\n.suggest-modal__close:hover {\n  background: #e0e0e0;\n}\n\n.suggest-modal__close ion-icon {\n  font-size: 24px;\n  color: #666;\n}\n\n.suggest-modal__title {\n  font-size: 28px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 8px;\n}\n\n.suggest-modal__desc {\n  color: #666;\n  margin-bottom: 24px;\n}\n\n.suggest-form__group {\n  margin-bottom: 20px;\n}\n\n.suggest-form__group label {\n  display: block;\n  font-weight: 600;\n  color: #2c2c2c;\n  margin-bottom: 8px;\n  font-size: 14px;\n}\n\n.suggest-form__group input,\n.suggest-form__group textarea,\n.suggest-form__group select {\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e0e0e0;\n  border-radius: 10px;\n  font-size: 15px;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.suggest-form__group input:focus,\n.suggest-form__group textarea:focus,\n.suggest-form__group select:focus {\n  outline: none;\n  border-color: #5BA4E6;\n  box-shadow: 0 0 0 4px rgba(32, 104, 168, 0.1);\n}\n\n.suggest-form__row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 16px;\n}\n\n@media (max-width: 520px) {\n  .suggest-form__row {\n    grid-template-columns: 1fr;\n  }\n}\n\n.suggest-form__actions {\n  display: flex;\n  gap: 12px;\n  margin-top: 24px;\n}\n\n.suggest-form__cancel {\n  flex: 1;\n  padding: 14px 20px;\n  background: #f0f0f0;\n  color: #666;\n  border: none;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.2s ease;\n}\n\n.suggest-form__cancel:hover {\n  background: #e0e0e0;\n}\n\n.suggest-form__submit {\n  flex: 2;\n  padding: 14px 20px;\n  background: linear-gradient(135deg, #4CAF50, #45a049);\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.suggest-form__submit:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);\n}\n\n.suggest-modal__success {\n  text-align: center;\n  padding: 20px;\n}\n\n.suggest-modal__success ion-icon {\n  font-size: 80px;\n  color: #4CAF50;\n  margin-bottom: 16px;\n}\n\n.suggest-modal__success h3 {\n  font-size: 24px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 12px;\n}\n\n.suggest-modal__success p {\n  color: #666;\n  margin-bottom: 24px;\n}\n\n.rl-share-btns {\n  display: flex;\n  gap: 8px;\n  margin-left: auto;\n}\n\n.rl-share-btn {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 16px;\n}\n\n.rl-share-btn--copy {\n  background: #f0f0f0;\n  color: #666;\n}\n\n.rl-share-btn--copy:hover {\n  background: #e0e0e0;\n}\n\n.rl-share-btn--copy.is-copied {\n  background: #4CAF50;\n  color: #fff;\n}\n\n.rl-share-btn--twitter {\n  background: #1DA1F2;\n  color: #fff;\n}\n\n.rl-share-btn--twitter:hover {\n  background: #0d8bd9;\n}\n\n.rl-share-btn--facebook {\n  background: #4267B2;\n  color: #fff;\n}\n\n.rl-share-btn--facebook:hover {\n  background: #365899;\n}\n\n.rl-quickinfo {\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px dashed #e0e0e0;\n  display: none;\n}\n\n.rl-quickinfo.is-expanded {\n  display: block;\n}\n\n.rl-quickinfo__item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 13px;\n  color: #666;\n  margin-bottom: 6px;\n}\n\n.rl-quickinfo__item ion-icon {\n  color: #5BA4E6;\n  font-size: 16px;\n}\n\n.rl-quickinfo-toggle {\n  background: none;\n  border: none;\n  color: #5BA4E6;\n  font-size: 13px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 0;\n  margin-top: 8px;\n}\n\n.rl-quickinfo-toggle:hover {\n  text-decoration: underline;\n}\n\n.rl-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-top: 16px;\n}\n\n[data-theme=\"dark\"] .rl-spotlight {\n  background: linear-gradient(135deg, #2d2b3d 0%, #1e1c2e 100%);\n  border-color: rgba(32, 104, 168, 0.3);\n}\n\n[data-theme=\"dark\"] .rl-spotlight__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .rl-spotlight__subtitle {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .rl-spotlight-card {\n  background: #2d2b3d;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .rl-spotlight-card__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .rl-spotlight-card__desc {\n  color: #bbb;\n}\n\n[data-theme=\"dark\"] .rl-spotlight-card__provider {\n  color: #999;\n}\n\n[data-theme=\"dark\"] .suggest-modal__content {\n  background: #2d2b3d;\n}\n\n[data-theme=\"dark\"] .suggest-modal__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .suggest-modal__desc {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .suggest-form__group label {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .suggest-form__group input,\n[data-theme=\"dark\"] .suggest-form__group textarea,\n[data-theme=\"dark\"] .suggest-form__group select {\n  background: #1e1c2e;\n  border-color: #3d3a50;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .suggest-form__cancel {\n  background: #3d3a50;\n  color: #ddd;\n}\n\n[data-theme=\"dark\"] .suggest-modal__close {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .suggest-modal__close ion-icon {\n  color: #ddd;\n}\n\n[data-theme=\"dark\"] .rl-share-btn--copy {\n  background: #3d3a50;\n  color: #ddd;\n}\n\n[data-theme=\"dark\"] .rl-quickinfo {\n  border-color: #3d3a50;\n}\n\n[data-theme=\"dark\"] .rl-quickinfo__item {\n  color: #bbb;\n}\n\n.mb-testimonials {\n  background: #f1f1f1;\n  padding: 80px 16px;\n  position: relative;\n  z-index: 2;\n}\n\n.mb-testimonials__wrap {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.mb-testimonials__header {\n  text-align: center;\n  margin-bottom: 28px;\n}\n\n.mb-testimonials__title {\n  font-size: clamp(28px, 3.2vw, 44px);\n  font-weight: 900;\n  letter-spacing: 0.02em;\n  color: #0e1b2a;\n}\n\n.mb-testimonials__rule {\n  width: 90px;\n  height: 3px;\n  background: rgba(14, 27, 42, 0.55);\n  margin: 14px auto 0;\n  border-radius: 999px;\n}\n\n.mb-testimonials__grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 34px;\n  align-items: start;\n  margin-top: 38px;\n}\n\n.mb-testimonials__col {\n  position: relative;\n}\n\n.mb-testimonials__viewport {\n  height: 520px;\n  overflow: hidden;\n  position: relative;\n}\n\n.mb-testimonials__mask {\n  pointer-events: none;\n  position: absolute;\n  inset: 0;\n  z-index: 3;\n  background: linear-gradient(to bottom,\n      rgba(238, 243, 246, 1) 0%,\n      rgba(238, 243, 246, 0) 14%,\n      rgba(238, 243, 246, 0) 86%,\n      rgba(238, 243, 246, 1) 100%);\n}\n\n.mb-testimonials__track {\n  display: grid;\n  gap: 22px;\n  will-change: transform;\n  transform: translate3d(0, 0, 0);\n}\n\n.mb-tcard {\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 16px;\n  padding: 18px 18px 20px;\n  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.08);\n}\n\n.mb-tcard__top {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n\n.mb-tcard__avatar {\n  width: 44px;\n  height: 44px;\n  border-radius: 999px;\n  object-fit: cover;\n  flex: 0 0 auto;\n}\n\n.mb-tcard__name {\n  font-size: 16px;\n  font-weight: 900;\n  color: #0e1b2a;\n  line-height: 1.15;\n}\n\n.mb-tcard__role {\n  font-size: 13px;\n  font-weight: 600;\n  color: rgba(14, 27, 42, 0.65);\n  line-height: 1.15;\n  margin-top: 2px;\n}\n\n.mb-tcard__text {\n  font-size: 15px;\n  line-height: 1.65;\n  color: rgba(14, 27, 42, 0.82);\n}\n\n.mb-tcard:hover {\n  transform: translateY(-2px);\n  transition: transform 180ms ease;\n}\n\n.mb-testimonials__col[data-direction=\"up\"] .mb-testimonials__track {\n  animation: mb-tm-up var(--mb-tm-duration, 18s) linear infinite;\n}\n\n.mb-testimonials__col[data-direction=\"down\"] .mb-testimonials__track {\n  animation: mb-tm-down var(--mb-tm-duration, 18s) linear infinite;\n}\n\n@keyframes mb-tm-up {\n  from {\n    transform: translate3d(0, 0, 0);\n  }\n\n  to {\n    transform: translate3d(0, calc(-1 * var(--mb-tm-distance, 300px)), 0);\n  }\n}\n\n@keyframes mb-tm-down {\n  from {\n    transform: translate3d(0, calc(-1 * var(--mb-tm-distance, 300px)), 0);\n  }\n\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n\n.mb-testimonials__col:hover .mb-testimonials__track {\n  animation-play-state: paused;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .mb-testimonials__track {\n    animation: none !important;\n  }\n\n  .mb-testimonials__mask {\n    display: none !important;\n  }\n\n  .navbar.active .navbar-item {\n    animation: none !important;\n    opacity: 1 !important;\n  }\n\n  .navbar {\n    transition: transform 0.15s ease, visibility 0s !important;\n  }\n\n  .mobile-crisis-btn,\n  .mobile-auth-btn,\n  .navbar-link {\n    transition: none !important;\n  }\n}\n\n[data-reduce-motion=\"true\"] .mb-testimonials__track {\n  animation: none !important;\n}\n\n[data-reduce-motion=\"true\"] .mb-testimonials__mask {\n  display: none !important;\n}\n\n@media (max-width: 980px) {\n  .mb-testimonials__grid {\n    grid-template-columns: 1fr;\n    gap: 18px;\n  }\n\n  .mb-testimonials__viewport {\n    height: 420px;\n  }\n}\n\n.back-to-top {\n  position: fixed;\n  bottom: 80px;\n  right: 30px;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background: #fff;\n  color: var(--user-accent);\n  border: 2px solid var(--user-accent);\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  visibility: hidden;\n  transform: translateY(20px);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 999;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n}\n\n.back-to-top.visible {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n\n.back-to-top:hover {\n  transform: translateY(-4px);\n  background: var(--user-accent);\n  color: #fff;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);\n}\n\n.back-to-top ion-icon {\n  font-size: 24px;\n}\n\n.back-to-top:hover ion-icon {\n  animation: bounceUp 0.5s ease infinite;\n}\n\n@keyframes bounceUp {\n\n  0%,\n  100% {\n    transform: translateY(0);\n  }\n\n  50% {\n    transform: translateY(-4px);\n  }\n}\n\n[data-theme=\"dark\"] .back-to-top {\n  background: rgba(255, 255, 255, 0.12);\n  color: #fff;\n  border-color: rgba(255, 255, 255, 0.3);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .back-to-top:hover {\n  background: rgba(255, 255, 255, 0.2);\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);\n}\n\n.mb-footer {\n  margin-top: 80px;\n  color: rgb(244, 244, 244, 0.85);\n  position: relative;\n}\n\n.mb-footer__wave {\n  position: relative;\n  height: 80px;\n  overflow: hidden;\n  margin-bottom: -1px;\n  background: transparent;\n}\n\n.mb-footer__wave svg {\n  position: absolute;\n  bottom: -1px;\n  left: 0;\n  width: 100%;\n  height: calc(100% + 2px);\n  display: block;\n}\n\n.wave-path {\n  fill: var(--user-accent-light);\n}\n\n.wave-path.wave-1 {\n  opacity: 0.3;\n  animation: waveMove 8s ease-in-out infinite;\n}\n\n.wave-path.wave-2 {\n  opacity: 0.5;\n  animation: waveMove 6s ease-in-out infinite reverse;\n}\n\n.wave-path.wave-3 {\n  opacity: 1;\n  animation: waveMove 4s ease-in-out infinite;\n}\n\n@keyframes waveMove {\n\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  50% {\n    transform: translateX(-20px);\n  }\n\n}\n\n[data-theme=\"dark\"] .wave-path {\n  fill: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .wave-path.wave-1 {\n  fill: #2a2a4e;\n}\n\n[data-theme=\"dark\"] .wave-path.wave-2 {\n  fill: #232340;\n}\n\n.mb-footer__pattern {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image:\n    radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.03) 1px, transparent 1px),\n    radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.03) 1px, transparent 1px);\n  background-size: 60px 60px;\n  pointer-events: none;\n}\n\n.mb-footer__top {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  padding: 64px 24px 56px;\n  position: relative;\n  overflow: hidden;\n}\n\n.mb-footer__top::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),\n    radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.08) 0%, transparent 40%);\n  pointer-events: none;\n}\n\n.mb-footer__wrap {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.mb-footer__top .mb-footer__wrap {\n  display: flex;\n  flex-direction: column;\n  gap: 40px;\n}\n\n.mb-footer__main-grid {\n  display: grid;\n  grid-template-columns: 1.3fr 1fr 1.1fr 1.2fr;\n  gap: 34px;\n  align-items: start;\n}\n\n.mb-footer__trust {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  margin-top: 20px;\n}\n\n.mb-footer__badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  border-radius: 20px;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  font-size: 11px;\n  font-weight: 600;\n  color: rgba(255, 255, 255, 0.85);\n  transition: all 200ms ease;\n}\n\n.mb-footer__badge ion-icon {\n  font-size: 14px;\n  color: var(--user-accent);\n}\n\n.mb-footer__badge:hover {\n  background: rgba(255, 255, 255, 0.15);\n  transform: translateY(-2px);\n}\n\n.mb-footer__accordion-btn {\n  display: none;\n  width: 100%;\n  justify-content: space-between;\n  align-items: center;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n}\n\n.mb-footer__accordion-btn .accordion-icon {\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 18px;\n  transition: transform 200ms ease;\n}\n\n.mb-footer__accordion-btn[aria-expanded=\"true\"] .accordion-icon {\n  transform: rotate(180deg);\n}\n\n.mb-footer__brand {\n  font-size: 22px;\n  font-weight: 900;\n  color: #fff;\n  margin-bottom: 14px;\n  position: relative;\n  display: inline-block;\n}\n\n.mb-footer__brand::after {\n  content: '';\n  position: absolute;\n  bottom: -4px;\n  left: 0;\n  width: 40px;\n  height: 3px;\n  background: linear-gradient(90deg, var(--user-accent), transparent);\n  border-radius: 2px;\n}\n\n.mb-footer__heading {\n  font-size: 13px;\n  font-weight: 900;\n  letter-spacing: 0.08em;\n  text-transform: uppercase;\n  color: #fff;\n  margin-bottom: 16px;\n}\n\n.mb-footer__subheading {\n  font-size: 12px;\n  font-weight: 900;\n  letter-spacing: 0.08em;\n  text-transform: uppercase;\n  color: rgba(255, 255, 255, 0.9);\n  margin-top: 18px;\n  margin-bottom: 10px;\n}\n\n.mb-footer__text {\n  font-size: 14px;\n  line-height: 1.8;\n  color: rgba(255, 255, 255, 0.70);\n  margin-bottom: 14px;\n}\n\n.mb-footer__list {\n  display: grid;\n  gap: 10px;\n  padding: 0;\n  margin: 0;\n}\n\n.mb-footer__link {\n  display: inline-block;\n  font-size: 14px;\n  color: rgba(255, 255, 255, 0.78);\n  transition: color 180ms ease, transform 180ms ease;\n  max-width: max-content;\n}\n\n.mb-footer__link:hover {\n  color: var(--user-accent);\n  transform: translateX(2px);\n}\n\n.mb-footer__tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.mb-footer__tag {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 14px;\n  border-radius: 20px;\n  border: 1px solid rgba(255, 255, 255, 0.35);\n  background: rgba(255, 255, 255, 0.2);\n  color: rgba(255, 255, 255, 0.85);\n  font-size: 12px;\n  font-weight: 600;\n  transition: all 200ms ease;\n}\n\n.mb-footer__tag:hover {\n  transform: translateY(-2px);\n  background: rgba(255, 255, 255, 0.28);\n  border-color: rgba(255, 255, 255, 0.5);\n  color: #fff;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.mb-footer__cta {\n  display: flex;\n  gap: 10px;\n  margin-top: 10px;\n}\n\n.mb-footer__btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 12px 20px;\n  border-radius: 25px;\n  background: #fff;\n  color: #333;\n  font-weight: 700;\n  font-size: 13px;\n  transition: all 200ms ease;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);\n}\n\n.mb-footer__btn:hover {\n  transform: translateY(-2px);\n  background: #f5f5f5;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\n}\n\n.mb-footer__btn--ghost {\n  background: rgba(255, 255, 255, 0.18);\n  color: #fff;\n  border: 1.5px solid rgba(255, 255, 255, 0.45);\n  box-shadow: none;\n}\n\n.mb-footer__btn--ghost:hover {\n  color: #fff;\n  background: rgba(255, 255, 255, 0.28);\n  border-color: rgba(255, 255, 255, 0.6);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.mb-footer__social {\n  display: flex;\n  gap: 10px;\n}\n\n.mb-footer__icon {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.9);\n  transition: all 200ms ease;\n}\n\n.mb-footer__icon ion-icon {\n  font-size: 18px;\n}\n\n.mb-footer__icon--instagram:hover {\n  transform: translateY(-3px) scale(1.05);\n  background: linear-gradient(135deg, #E1306C, #C13584);\n  border-color: transparent;\n  color: #fff;\n  box-shadow: 0 6px 20px rgba(225, 48, 108, 0.4);\n}\n\n.mb-footer__icon--youtube:hover {\n  transform: translateY(-3px) scale(1.05);\n  background: linear-gradient(135deg, #FF0000, #CC0000);\n  border-color: transparent;\n  color: #fff;\n  box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4);\n}\n\n.mb-footer__extras {\n  display: grid;\n  grid-template-columns: 1.5fr 1fr;\n  gap: 40px;\n  padding-top: 30px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.mb-footer__newsletter {\n  background: rgba(255, 255, 255, 0.08);\n  border-radius: 16px;\n  padding: 24px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.mb-footer__newsletter-content {\n  display: flex;\n  align-items: flex-start;\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n.mb-footer__newsletter-content .newsletter-icon {\n  font-size: 32px;\n  color: #fff;\n  flex-shrink: 0;\n}\n\n.mb-footer__newsletter-content .newsletter-text .mb-footer__heading {\n  margin-bottom: 4px;\n}\n\n.mb-footer__newsletter-content .newsletter-text .mb-footer__text {\n  margin-bottom: 0;\n}\n\n.mb-footer__newsletter-form {\n  display: flex;\n  gap: 10px;\n}\n\n.mb-footer__newsletter-input {\n  flex: 1;\n  padding: 12px 18px;\n  border-radius: 25px;\n  border: none;\n  background: rgba(255, 255, 255, 0.85);\n  color: #333;\n  font-size: 14px;\n  font-family: 'Poppins', sans-serif;\n  transition: all 200ms ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n}\n\n.mb-footer__newsletter-input::placeholder {\n  color: #999;\n}\n\n.mb-footer__newsletter-input:focus {\n  outline: none;\n  background: rgba(255, 255, 255, 0.95);\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n}\n\n.mb-footer__newsletter-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 12px 20px;\n  border-radius: 25px;\n  background: #fff;\n  color: #333;\n  font-weight: 700;\n  font-size: 13px;\n  border: none;\n  cursor: pointer;\n  transition: all 200ms ease;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);\n}\n\n.mb-footer__newsletter-btn:hover {\n  transform: translateY(-2px);\n  background: #f5f5f5;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\n}\n\n.mb-footer__newsletter-btn ion-icon {\n  font-size: 16px;\n}\n\n.mb-footer__newsletter-note {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.5);\n  margin-top: 10px;\n}\n\n.mb-footer__recent .mb-footer__heading {\n  margin-bottom: 16px;\n}\n\n.mb-footer__posts {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.mb-footer__post {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  transition: all 200ms ease;\n}\n\n.mb-footer__post:hover {\n  background: rgba(255, 255, 255, 0.1);\n  transform: translateX(4px);\n}\n\n.mb-footer__post-icon {\n  width: 36px;\n  height: 36px;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.25);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.mb-footer__post-icon ion-icon {\n  font-size: 18px;\n  color: #fff;\n}\n\n.mb-footer__post-info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.mb-footer__post-title {\n  font-size: 13px;\n  font-weight: 600;\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.mb-footer__post-meta {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.5);\n}\n\n.mb-footer__controls {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 30px;\n  padding-top: 20px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.mb-footer__control-group {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.mb-footer__control-group>ion-icon {\n  font-size: 18px;\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.mb-footer__control-group .theme-icon-light {\n  display: none;\n}\n\n[data-theme=\"dark\"] .mb-footer__control-group .theme-icon-dark {\n  display: none;\n}\n\n[data-theme=\"dark\"] .mb-footer__control-group .theme-icon-light {\n  display: block;\n}\n\n.mb-footer__select {\n  padding: 8px 12px;\n  border-radius: 20px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  font-size: 13px;\n  cursor: pointer;\n  transition: all 200ms ease;\n}\n\n.mb-footer__select:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.mb-footer__select option {\n  background: #2a2a3e;\n  color: #fff;\n}\n\n.mb-footer__theme-toggle {\n  position: relative;\n  width: 44px;\n  height: 24px;\n  cursor: pointer;\n}\n\n.mb-footer__theme-toggle input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.mb-footer__theme-slider {\n  position: absolute;\n  inset: 0;\n  background: rgba(255, 255, 255, 0.35);\n  border-radius: 24px;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  transition: all 200ms ease;\n}\n\n.mb-footer__theme-slider::before {\n  content: '';\n  position: absolute;\n  width: 18px;\n  height: 18px;\n  left: 3px;\n  top: 3px;\n  background: #fff;\n  border-radius: 50%;\n  transition: all 200ms ease;\n}\n\n.mb-footer__theme-toggle input:checked+.mb-footer__theme-slider {\n  background: var(--user-accent);\n}\n\n.mb-footer__theme-toggle input:checked+.mb-footer__theme-slider::before {\n  transform: translateX(20px);\n}\n\n.mb-footer__bottom {\n  background: linear-gradient(135deg, var(--user-accent-dark) 0%, var(--user-accent) 100%);\n  padding: 20px 24px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.mb-footer__bottomwrap {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 14px;\n  flex-wrap: wrap;\n}\n\n.mb-footer__copy {\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.60);\n  white-space: nowrap;\n}\n\n.mb-footer__copy span {\n  display: inline;\n}\n\n.mb-footer__legal {\n  display: flex;\n  gap: 18px;\n  flex-wrap: wrap;\n}\n\n.mb-footer__legal-link {\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.60);\n  transition: color 160ms ease;\n}\n\n.mb-footer__legal-link:hover {\n  color: #fff;\n}\n\n@media (max-width: 980px) {\n  .mb-footer__main-grid {\n    grid-template-columns: 1fr 1fr;\n  }\n\n  .mb-footer__extras {\n    grid-template-columns: 1fr;\n  }\n}\n\n@media (max-width: 560px) {\n  .mb-footer__main-grid {\n    grid-template-columns: 1fr;\n  }\n\n  \n  .mb-footer__accordion .mb-footer__heading {\n    margin-bottom: 0;\n  }\n\n  .mb-footer__accordion-btn {\n    display: flex;\n  }\n\n  .mb-footer__accordion-content {\n    max-height: 0;\n    overflow: hidden;\n    transition: max-height 300ms ease, padding 300ms ease;\n    padding-top: 0;\n  }\n\n  .mb-footer__accordion-btn[aria-expanded=\"true\"]+.mb-footer__accordion-content {\n    max-height: 300px;\n    padding-top: 16px;\n  }\n\n  .mb-footer__cta {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .mb-footer__btn {\n    width: 100%;\n  }\n\n  .mb-footer__bottomwrap {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .mb-footer__copy {\n    white-space: normal;\n  }\n\n  .mb-footer__newsletter-form {\n    flex-direction: column;\n  }\n\n  .mb-footer__newsletter-btn {\n    width: 100%;\n    justify-content: center;\n  }\n\n  .mb-footer__controls {\n    flex-direction: column;\n    gap: 16px;\n  }\n\n  .mb-footer__trust {\n    justify-content: flex-start;\n  }\n}\n\n[data-theme=\"dark\"] .mb-footer__top {\n  background: linear-gradient(135deg, #1a1a2e 0%, #16162a 100%);\n}\n\n[data-theme=\"dark\"] .mb-footer__bottom {\n  background: linear-gradient(135deg, #12121f 0%, #0e0e18 100%);\n}\n\n[data-theme=\"dark\"] .mb-footer__brand::after {\n  background: linear-gradient(90deg, var(--purple-accent), transparent);\n}\n\n[data-theme=\"dark\"] .mb-footer__link:hover {\n  color: var(--purple-accent);\n}\n\n[data-theme=\"dark\"] .mb-footer__tag:hover {\n  background: rgba(var(--user-accent-rgb), 0.2);\n  border-color: rgba(var(--user-accent-rgb), 0.5);\n}\n\n[data-theme=\"dark\"] .mb-footer__btn {\n  background: var(--purple-gradient);\n  box-shadow: 0 4px 15px var(--purple-glow);\n}\n\n[data-theme=\"dark\"] .mb-footer__btn:hover {\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n[data-theme=\"dark\"] .mb-footer__badge ion-icon {\n  color: var(--purple-accent);\n}\n\n[data-theme=\"dark\"] .mb-footer__newsletter-content .newsletter-icon {\n  color: var(--purple-accent);\n}\n\n[data-theme=\"dark\"] .mb-footer__newsletter-input:focus {\n  background: rgba(255, 255, 255, 0.12);\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .mb-footer__newsletter-btn {\n  background: var(--purple-gradient) !important;\n  color: #fff !important;\n  box-shadow: 0 4px 15px var(--purple-glow);\n}\n\n[data-theme=\"dark\"] .mb-footer__newsletter-btn:hover {\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n[data-theme=\"dark\"] .mb-footer__post-icon {\n  background: rgba(var(--user-accent-rgb), 0.2);\n}\n\n[data-theme=\"dark\"] .mb-footer__post-icon ion-icon {\n  color: var(--purple-accent);\n}\n\n[data-theme=\"dark\"] .mb-footer__select:focus {\n  border-color: var(--purple-accent);\n}\n\n[data-theme=\"dark\"] .mb-footer__theme-slider {\n  background: rgba(255, 255, 255, 0.25);\n  border: 1px solid rgba(255, 255, 255, 0.4);\n}\n\n[data-theme=\"dark\"] .mb-footer__theme-toggle input:checked+.mb-footer__theme-slider {\n  background: var(--purple-accent);\n  border-color: var(--purple-accent);\n}\n\n@media (min-width: 575px) {\n  :root {\n    --fontSize-body-2: 2rem;\n  }\n\n  :is(.service, .about) .section-text {\n    max-width: 420px;\n    margin-inline: auto;\n  }\n\n  .contact-number {\n    --fontSize-body-1: 3rem;\n  }\n\n  .header {\n    top: 51px;\n  }\n\n  .header.active {\n    top: 0;\n  }\n\n  .header .btn {\n    display: block;\n    margin-inline-start: auto;\n  }\n\n  .navbar-list {\n    margin-inline: 30px;\n  }\n}\n\n@media (min-width: 992px) {\n  :root {\n    --section-space: 100px;\n  }\n\n}\n\n@media (min-width: 1025px) {\n  :root {\n    --fontSize-title-2: 2.5rem;\n  }\n\n  .container,\n  :is(.service, .event) .container {\n    max-width: 1600px;\n    width: 100%;\n    margin-inline: auto;\n  }\n\n\n  .nav-open-btn,\n  .header .overlay {\n    display: none;\n  }\n\n  \n  .navbar-scroll-content .logo,\n  .navbar-scroll-content .navbar-drawer-footer,\n  .nav-close-btn,\n  .navbar .close-btn {\n    display: none;\n  }\n\n  .header .container {\n    max-width: unset;\n    overflow: visible;\n  }\n\n  \n  .header {\n    overflow: visible;\n  }\n\n  .navbar,\n  .navbar.active,\n  .navbar-list {\n    all: unset;\n  }\n\n  .navbar,\n  .navbar.active {\n    margin-inline: auto 20px;\n    display: block;\n    position: static;\n    visibility: visible;\n    overflow: visible;\n  }\n\n  .navbar-scroll-content {\n    display: contents;\n    overflow: visible;\n  }\n\n  .navbar-scroll-content .logo {\n    display: none;\n  }\n\n  .navbar-list {\n    display: flex;\n    gap: 6px;\n    align-items: center;\n  }\n\n  .navbar-item {\n    border-block-start: none;\n  }\n\n  .navbar .separator {\n    display: none;\n  }\n\n  .navbar-link:is(:hover, :focus-visible, .active) .span {\n    transform: unset;\n  }\n\n  .navbar-link {\n    font-weight: var(--weight-bold);\n    letter-spacing: var(--letterSpacing-1);\n    font-size: clamp(11px, 1.1vw, 13px);\n    white-space: nowrap;\n    overflow: visible;\n  }\n\n  .navbar-list {\n    flex-wrap: nowrap;\n    overflow: visible;\n  }\n\n  .navbar-link::after {\n    display: block;\n  }\n\n  .navbar-link.active::after {\n    transform: scaleX(1);\n    opacity: 1;\n  }\n\n  .header .btn {\n    margin-inline-start: 0;\n  }\n}\n\n@media (min-width: 1025px) and (max-width: 1199px) {\n  .navbar-link {\n    padding: 6px 8px !important;\n    font-size: clamp(10px, 1vw, 12px) !important;\n  }\n\n  .navbar-list {\n    gap: 2px;\n  }\n\n  .navbar-link.active {\n    padding: 6px 8px !important;\n  }\n\n  .navbar-actions {\n    gap: 4px;\n  }\n\n  .navbar-action-btn {\n    width: 34px;\n    height: 34px;\n  }\n\n  .header .btn {\n    padding: 8px 14px;\n    font-size: 12px;\n  }\n}\n\n@media (min-width: 1400px) {\n  .navbar {\n    margin-inline: auto;\n  }\n}\n\n.navbar-list {\n  align-items: center;\n}\n\n.navbar-link::after {\n  display: none !important;\n}\n\n@media (min-width: 1025px) {\n  .navbar-link {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 8px 14px;\n    border-radius: 10px;\n    transition: background-color var(--nav-transition-fast), color var(--nav-transition-fast);\n    position: relative;\n  }\n}\n\n@media (min-width: 1025px) {\n  .navbar-link::before {\n    content: '';\n    position: absolute;\n    bottom: 2px;\n    left: 50%;\n    width: 0;\n    height: 2px;\n    background-color: var(--user-accent-grad-end);\n    transition: width var(--nav-transition), left var(--nav-transition);\n    border-radius: 2px;\n  }\n\n  .navbar-link:hover::before,\n  .navbar-link:focus-visible::before {\n    width: 70%;\n    left: 15%;\n  }\n\n  .navbar-link.active::before {\n    width: 80%;\n    left: 10%;\n  }\n}\n\n.navbar-link.active {\n  background-color: rgba(var(--user-accent-rgb), 0.15);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.4);\n  color: var(--user-accent-dark) !important;\n  font-weight: 700;\n}\n\n.navbar-link.active .span {\n  color: var(--user-accent-dark) !important;\n  transform: none !important;\n}\n\n.navbar-link:not(.active):hover {\n  background-color: rgba(255, 255, 255, 0.12);\n}\n\n.navbar-link:focus-visible {\n  outline: 2px solid var(--user-accent-grad-end);\n  outline-offset: 2px;\n}\n\n.navbar-link .separator {\n  display: none !important;\n}\n\n@media (max-width: 1024px) {\n\n  .navbar {\n    background: var(--user-accent-soft) !important;\n    border-right: 1px solid rgba(0, 0, 0, 0.08) !important;\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25) !important;\n    backdrop-filter: none !important;\n    -webkit-backdrop-filter: none !important;\n  }\n\n  [data-theme=\"dark\"] .navbar {\n    background: #2d2b3d !important;\n    border-right: 1px solid rgba(255, 255, 255, 0.1) !important;\n  }\n\n  .overlay.active {\n    background: rgba(0, 0, 0, 0.5) !important;\n    backdrop-filter: none !important;\n    -webkit-backdrop-filter: none !important;\n  }\n\n  body.nav-active .nav-open-btn,\n  body.nav-active .nav-toggler,\n  body.nav-active .menu-btn,\n  body.nav-active .hamburger {\n    opacity: 0 !important;\n    pointer-events: none !important;\n    visibility: hidden !important;\n  }\n\n  body.nav-active .header .nav-open-btn,\n  body.nav-active .header .nav-toggler {\n    display: none !important;\n  }\n\n  .mobile-nav-header {\n    display: flex;\n  }\n\n  .mobile-nav-crisis {\n    display: block;\n  }\n\n  .mobile-nav-divider {\n    display: block;\n  }\n\n  .navbar .close-btn {\n    display: none !important;\n  }\n\n  .navbar-scroll-content > .logo {\n    display: none !important;\n  }\n\n  .nav-link-icon {\n    display: flex;\n    font-size: 20px;\n    color: var(--user-accent);\n    flex-shrink: 0;\n    width: 20px;\n    height: 20px;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .navbar-link .separator {\n    display: none !important;\n  }\n\n  .navbar-link {\n    display: flex !important;\n    align-items: center;\n    gap: 14px;\n    padding: 14px 16px !important;\n    border-radius: 12px;\n    min-height: 48px;\n    font-size: 15px;\n    font-weight: 500;\n    background: rgba(0, 0, 0, 0.03) !important;\n    border: 1px solid rgba(0, 0, 0, 0.05) !important;\n    transition: all 0.2s ease;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .navbar-link:hover {\n    background: rgba(0, 0, 0, 0.06) !important;\n    border-color: rgba(0, 0, 0, 0.1) !important;\n    transform: translateX(2px);\n  }\n\n  .navbar-link:active {\n    transform: scale(0.98);\n  }\n\n  .navbar-link.active {\n    background: rgba(var(--user-accent-rgb), 0.12) !important;\n    border-color: rgba(var(--user-accent-rgb), 0.3) !important;\n    font-weight: 600;\n  }\n\n  .navbar-link.active .nav-link-icon {\n    color: var(--user-accent);\n  }\n\n  [data-theme=\"dark\"] .navbar-link {\n    background: rgba(255, 255, 255, 0.05) !important;\n    border: 1px solid rgba(255, 255, 255, 0.08) !important;\n  }\n\n  [data-theme=\"dark\"] .navbar-link:hover {\n    background: rgba(255, 255, 255, 0.09) !important;\n    border-color: rgba(255, 255, 255, 0.12) !important;\n  }\n\n  [data-theme=\"dark\"] .navbar-link.active {\n    background: rgba(var(--user-accent-rgb), 0.15) !important;\n    border-color: rgba(var(--user-accent-rgb), 0.3) !important;\n  }\n\n  [data-theme=\"dark\"] .nav-link-icon {\n    color: var(--user-accent);\n  }\n\n  .navbar-list {\n    gap: 6px;\n  }\n\n  .navbar-list .navbar-item {\n    margin-bottom: 0;\n  }\n\n  .mobile-auth-section {\n    display: flex !important;\n  }\n}\n\n@media (max-width:1024px) {\n\n  .navbar.active~.header .nav-open-btn,\n  .navbar.active~.header .nav-toggler {\n    display: none !important;\n  }\n}\n\n.nav-open-btn.is-hidden,\nbody.nav-active .nav-open-btn {\n  opacity: 0 !important;\n  pointer-events: none !important;\n  visibility: hidden !important;\n}\n\n@media (min-width: 1025px) {\n  .navbar-link.active .span {\n    color: #111 !important;\n  }\n\n  .navbar-link.active {\n    padding: 8px 14px !important;\n    border-radius: 10px !important;\n    border: 2px solid rgba(0, 0, 0, 0.45) !important;\n    background: rgba(255, 255, 255, 0.55) !important;\n  }\n}\n\n.mb-srOnly {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n}\n\n.mb-blogHero {\n  padding: 110px 0 34px;\n  background: #f4f4f4;\n}\n\n.mb-blogHero__inner {\n  display: grid;\n  grid-template-columns: 1.05fr 0.95fr;\n  gap: 28px;\n  align-items: start;\n}\n\n.mb-blogHero__badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 10px;\n  background: rgba(var(--user-accent-rgb), 0.18);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.35);\n  color: #111;\n  font-weight: 900;\n  font-size: 12px;\n  letter-spacing: .08em;\n  text-transform: uppercase;\n  padding: 10px 12px;\n  border-radius: 999px;\n  width: max-content;\n  margin-bottom: 14px;\n}\n\n.mb-blogHero__title {\n  font-size: clamp(34px, 4.2vw, 64px);\n  line-height: 0.98;\n  letter-spacing: -0.02em;\n  color: #111;\n  margin: 0 0 12px;\n  font-weight: 900;\n}\n\n.mb-blogHero__lead {\n  font-size: 15px;\n  line-height: 1.75;\n  color: #1f2937;\n  max-width: 70ch;\n  margin: 0 0 18px;\n}\n\n.mb-blogHero__search {\n  position: relative;\n  margin: 14px 0 14px;\n}\n\n.mb-blogHero__input {\n  width: 100%;\n  height: 54px;\n  border-radius: 12px;\n  border: 1px solid rgba(0, 0, 0, 0.12);\n  background: rgba(255, 255, 255, 0.85);\n  padding: 0 56px 0 14px;\n  font-size: 14px;\n  color: #111;\n}\n\n.mb-blogHero__searchBtn {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  height: 38px;\n  width: 42px;\n  border-radius: 10px;\n  border: 0;\n  background: #111;\n  color: #fff;\n  font-weight: 900;\n  cursor: pointer;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.mb-blogHero__chips {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n  margin-top: 10px;\n}\n\n.mb-chip {\n  border: 1px solid rgba(0, 0, 0, 0.12);\n  background: rgba(255, 255, 255, 0.75);\n  color: #111;\n  border-radius: 999px;\n  padding: 9px 12px;\n  font-size: 12px;\n  font-weight: 900;\n  cursor: pointer;\n  transition: transform 140ms ease, background 140ms ease, border-color 140ms ease;\n}\n\n.mb-chip:hover {\n  transform: translateY(-1px);\n}\n\n.mb-chip.is-active {\n  background: #111;\n  color: #fff;\n  border-color: #111;\n}\n\n.mb-ticker {\n  background: rgba(14, 27, 42, 0.96);\n  border-radius: 16px;\n  padding: 12px;\n  display: grid;\n  gap: 10px;\n  margin-bottom: 14px;\n}\n\n.mb-ticker__item {\n  display: grid;\n  grid-template-columns: 28px 1fr;\n  gap: 10px;\n  align-items: center;\n  padding: 10px 10px;\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.06);\n}\n\n.mb-ticker__num {\n  width: 26px;\n  height: 26px;\n  border-radius: 999px;\n  background: rgba(var(--user-accent-rgb), 0.95);\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 900;\n  color: #111;\n}\n\n.mb-ticker__link {\n  color: rgba(255, 255, 255, 0.92);\n  font-weight: 800;\n  font-size: 13px;\n}\n\n.mb-ticker__link:hover {\n  text-decoration: underline;\n}\n\n.mb-featureCard {\n  background: rgba(255, 255, 255, 0.88);\n  border: 1px solid rgba(0, 0, 0, 0.10);\n  border-radius: 18px;\n  overflow: hidden;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.mb-featureCard:hover {\n  transform: translateY(-6px);\n  box-shadow: 0 28px 70px rgba(0, 0, 0, 0.14);\n}\n\n.mb-featureCard__imgWrap {\n  position: relative;\n  display: block;\n  aspect-ratio: 16 / 7;\n  overflow: hidden;\n}\n\n.mb-featureCard__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.5s ease;\n}\n\n.mb-featureCard:hover .mb-featureCard__img {\n  transform: scale(1.04);\n}\n\n.mb-featureCard__overlay {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(to top, rgba(0, 0, 0, 0.55), rgba(0, 0, 0, 0.10), transparent);\n}\n\n.mb-featureCard__content {\n  padding: 16px 16px 18px;\n}\n\n.mb-metaRow {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 10px;\n}\n\n.mb-pill {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 6px 12px;\n  border-radius: 999px;\n  background: rgba(43, 90, 166, 0.92);\n  color: #fff;\n  font-size: 11px;\n  font-weight: 600;\n  letter-spacing: 0.02em;\n  text-transform: uppercase;\n}\n\n.mb-new-badge {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  padding: 4px 10px;\n  border-radius: 4px;\n  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\n  color: #fff;\n  font-size: 10px;\n  font-weight: 700;\n  letter-spacing: 0.05em;\n  text-transform: uppercase;\n  box-shadow: 0 2px 8px rgba(238, 90, 36, 0.4);\n  z-index: 5;\n  animation: pulse-badge 2s ease-in-out infinite;\n}\n\n@keyframes pulse-badge {\n\n  0%,\n  100% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(1.05);\n  }\n}\n\n.mb-pill--news {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n}\n\n.mb-pill--story {\n  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);\n}\n\n.mb-pill--research {\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n}\n\n.mb-metaDot {\n  color: rgba(0, 0, 0, 0.30);\n  font-size: 10px;\n}\n\n.mb-metaText {\n  color: rgba(0, 0, 0, 0.60);\n  font-weight: 500;\n  font-size: 12px;\n  letter-spacing: 0.01em;\n}\n\n.mb-featureCard__title {\n  font-size: 22px;\n  line-height: 1.3;\n  margin: 0 0 12px;\n  font-weight: 700;\n}\n\n.mb-featureCard__title a {\n  color: #111;\n  transition: color 0.2s ease;\n}\n\n.mb-featureCard__title a:hover {\n  color: var(--user-accent-text);\n  text-decoration: none;\n}\n\n.mb-featureCard__desc {\n  font-size: 14px;\n  line-height: 1.7;\n  color: rgba(0, 0, 0, 0.72);\n  margin: 0 0 14px;\n}\n\n.mb-featureCard__subtext,\n.mb-postCard__subtext,\n.mb-listPost__subtext {\n  font-size: 13px;\n  line-height: 1.6;\n  color: rgba(0, 0, 0, 0.50);\n  margin: 10px 0 12px;\n  font-style: normal;\n  font-weight: 400;\n}\n\n.mb-postHint {\n  font-size: 13px;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.55);\n  margin: 8px 0;\n}\n\n.mb-postHint strong {\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.75);\n}\n\n.mb-featureCard__actions {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.mb-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 40px;\n  padding: 0 18px;\n  border-radius: 10px;\n  background: var(--user-accent);\n  color: #111;\n  font-weight: 600;\n  font-size: 13px;\n  border: 0;\n  cursor: pointer;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.mb-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.35);\n}\n\n.mb-btn--ghost {\n  background: transparent;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  color: #111;\n}\n\n.mb-blog {\n  padding: 26px 24px 80px;\n  background: #f4f4f4;\n}\n\n.mb-blog>.container,\n.mb-blogGrid {\n  max-width: 1600px;\n  width: 100%;\n  margin-inline: auto;\n  display: grid;\n  grid-template-columns: 1.65fr 0.95fr;\n  gap: 26px;\n  align-items: start;\n}\n\n@media (min-width: 1800px) {\n\n  .mb-blog>.container,\n  .mb-blogGrid {\n    max-width: 1700px;\n  }\n}\n\n@media (max-width: 1200px) {\n  .mb-blogGrid {\n    grid-template-columns: 1.5fr 1fr;\n    gap: 20px;\n  }\n}\n\n@media (max-width: 768px) {\n  .mb-blog {\n    padding: 20px 16px 60px;\n  }\n\n  .mb-resultsBar {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 12px;\n  }\n\n  .mb-resultsBar__reset {\n    width: 100%;\n  }\n}\n\n.mb-resultsBar {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  gap: 16px;\n  padding: 12px 16px;\n  background: rgba(255, 255, 255, 0.95);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 12px;\n  margin-bottom: 16px;\n}\n\n.mb-resultsBar__left {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 16px;\n  flex-wrap: wrap;\n}\n\n.mb-resultsBar__count {\n  font-size: 13px;\n  font-weight: 600;\n  color: #333;\n}\n\n.mb-resultsBar__active {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.55);\n  padding: 4px 10px;\n  background: rgba(43, 90, 166, 0.1);\n  border-radius: 6px;\n}\n\n.mb-resultsBar__reset {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 36px;\n  padding: 0 16px;\n  border-radius: 8px;\n  background: #e74c3c;\n  color: #fff;\n  font-weight: 700;\n  font-size: 12px;\n  border: 0;\n  cursor: pointer;\n  transition: background 150ms ease, transform 150ms ease;\n}\n\n.mb-resultsBar__reset:hover {\n  background: #c0392b;\n  transform: translateY(-1px);\n}\n\n.mb-emptyState {\n  display: none;\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 12px;\n  text-align: center;\n  color: #555;\n  margin-bottom: 16px;\n}\n\n.mb-emptyState.is-visible {\n  display: block;\n}\n\n.mb-sectionHead {\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n  gap: 12px;\n  padding: 16px 0 10px;\n  border-top: 2px solid rgba(32, 104, 168, 0.9);\n  margin-top: 6px;\n}\n\n.mb-sectionHead__title {\n  font-weight: 700;\n  font-size: 14px;\n  color: #111;\n  letter-spacing: 0.04em;\n  text-transform: uppercase;\n  margin: 0;\n}\n\n.mb-sectionHead__more {\n  font-weight: 600;\n  font-size: 13px;\n  color: rgba(43, 90, 166, 0.95);\n  transition: color 0.2s ease;\n}\n\n.mb-sectionHead__more:hover {\n  color: #1d4a8a;\n  text-decoration: none;\n}\n\n.mb-2up {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n.mb-3up {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n.mb-3up .mb-postCard__imgWrap {\n  aspect-ratio: 16/9;\n}\n\n.mb-3up .mb-postCard__body {\n  padding: 12px 14px 14px;\n}\n\n.mb-3up .mb-postCard__title {\n  font-size: 0.95rem;\n  line-height: 1.35;\n  margin-bottom: 6px;\n}\n\n.mb-3up .mb-postCard__meta {\n  font-size: 0.75rem;\n  margin-bottom: 6px;\n}\n\n.mb-3up .mb-postCard__excerpt {\n  font-size: 0.8rem;\n  line-height: 1.4;\n  margin-bottom: 8px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n@media (max-width: 900px) {\n  .mb-3up {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (max-width: 600px) {\n  .mb-3up {\n    grid-template-columns: 1fr;\n  }\n}\n\n.mb-postCard {\n  background: #ffffff;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: \n    0 2px 8px rgba(0, 0, 0, 0.04),\n    0 8px 24px rgba(0, 0, 0, 0.06);\n  transition: \n    transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), \n    box-shadow 0.35s cubic-bezier(0.4, 0, 0.2, 1), \n    border-color 0.35s ease;\n  position: relative;\n}\n\n.mb-postCard::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  background: var(--accent-color, #3B8DD4);\n  transform: scaleY(0);\n  transform-origin: bottom;\n  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 0;\n  border-radius: 16px 0 0 16px;\n}\n\n.mb-postCard:hover {\n  transform: translateY(-8px);\n  box-shadow: \n    0 4px 12px rgba(0, 0, 0, 0.08),\n    0 16px 48px rgba(0, 0, 0, 0.12),\n    0 24px 64px rgba(0, 0, 0, 0.08);\n  border-color: rgba(0, 0, 0, 0.12);\n}\n\n.mb-postCard:hover::before {\n  transform: scaleY(1);\n}\n\n.mb-postCard__imgWrap {\n  position: relative;\n  display: block;\n  aspect-ratio: 16/10;\n  overflow: hidden;\n}\n\n.mb-postCard__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.mb-postCard:hover .mb-postCard__img {\n  transform: scale(1.08);\n}\n\n.mb-postCard__pill {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 6px 12px;\n  border-radius: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\n.mb-postCard:hover .mb-postCard__pill {\n  transform: scale(1.05);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n\n.mb-postCard__body {\n  padding: 20px;\n  position: relative;\n}\n\n.mb-postCard__title {\n  margin: 0 0 12px;\n  font-size: 17px;\n  line-height: 1.45;\n  font-weight: 700;\n}\n\n.mb-postCard__title a {\n  color: #1a1a1a;\n  transition: color 0.25s ease;\n  text-decoration: none;\n}\n\n.mb-postCard__title a:hover {\n  color: var(--accent-color, #3B8DD4);\n  text-decoration: none;\n}\n\n.mb-postCard__meta {\n  font-size: 12px;\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.5);\n  margin-bottom: 12px;\n  letter-spacing: 0.02em;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.mb-postCard__excerpt {\n  font-size: 14px;\n  line-height: 1.7;\n  color: rgba(0, 0, 0, 0.6);\n  margin: 0;\n}\n\n.mb-postCard__bookmark {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  width: 36px;\n  height: 36px;\n  background: rgba(255, 255, 255, 0.9);\n  border: none;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  opacity: 0;\n  transform: translateY(-8px);\n  transition: \n    opacity 0.25s ease, \n    transform 0.25s ease,\n    background 0.25s ease;\n  z-index: 3;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n\n.mb-postCard:hover .mb-postCard__bookmark {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.mb-postCard__bookmark:hover {\n  background: var(--accent-color, #3B8DD4);\n  transform: scale(1.1);\n}\n\n.mb-postCard__bookmark svg {\n  width: 18px;\n  height: 18px;\n  fill: none;\n  stroke: #333;\n  stroke-width: 2;\n  transition: stroke 0.25s ease, fill 0.25s ease;\n}\n\n.mb-postCard__bookmark:hover svg {\n  stroke: #fff;\n}\n\n.mb-postCard__bookmark.is-saved svg {\n  fill: var(--accent-color, #3B8DD4);\n  stroke: var(--accent-color, #3B8DD4);\n}\n\n.mb-2up--mini {\n  grid-template-columns: 1fr 1fr;\n}\n\n.mb-miniCard {\n  background: #ffffff;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 16px;\n  display: grid;\n  gap: 0;\n  transition: \n    transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), \n    box-shadow 0.35s cubic-bezier(0.4, 0, 0.2, 1), \n    border-color 0.35s ease;\n  overflow: hidden;\n  position: relative;\n  box-shadow: \n    0 2px 8px rgba(0, 0, 0, 0.04),\n    0 8px 24px rgba(0, 0, 0, 0.06);\n}\n\n.mb-miniCard::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  background: var(--accent-color, #3B8DD4);\n  transform: scaleY(0);\n  transform-origin: bottom;\n  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 0;\n  border-radius: 16px 0 0 16px;\n}\n\n.mb-miniCard:hover {\n  transform: translateY(-6px);\n  box-shadow: \n    0 4px 12px rgba(0, 0, 0, 0.08),\n    0 16px 40px rgba(0, 0, 0, 0.12);\n  border-color: rgba(0, 0, 0, 0.12);\n}\n\n.mb-miniCard:hover::before {\n  transform: scaleY(1);\n}\n\n.mb-miniCard__imgWrap {\n  position: relative;\n  overflow: hidden;\n}\n\n.mb-miniCard__img {\n  width: 100%;\n  height: 140px;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.mb-miniCard:hover .mb-miniCard__img {\n  transform: scale(1.08);\n}\n\n.mb-miniCard__content {\n  padding: 16px;\n  display: grid;\n  gap: 10px;\n  position: relative;\n}\n\n.mb-miniCard__title {\n  margin: 0;\n  font-size: 15px;\n  font-weight: 700;\n  line-height: 1.45;\n}\n\n.mb-miniCard__title a {\n  color: #1a1a1a;\n  transition: color 0.25s ease;\n  text-decoration: none;\n}\n\n.mb-miniCard__title a:hover {\n  color: var(--accent-color, #3B8DD4);\n  text-decoration: none;\n}\n\n.mb-miniCard__meta {\n  font-size: 12px;\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.5);\n  letter-spacing: 0.02em;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex-wrap: wrap;\n}\n\n.mb-miniCard__pill {\n  background: var(--accent-color, #3B8DD4);\n  color: #111;\n  width: max-content;\n  font-weight: 700;\n  font-size: 10px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 5px 10px;\n  border-radius: 16px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\n.mb-miniCard:hover .mb-miniCard__pill {\n  transform: scale(1.05);\n}\n\n.mb-miniCard__bookmark {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  width: 32px;\n  height: 32px;\n  background: rgba(255, 255, 255, 0.9);\n  border: none;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  opacity: 0;\n  transform: translateY(-6px);\n  transition: \n    opacity 0.25s ease, \n    transform 0.25s ease,\n    background 0.25s ease;\n  z-index: 3;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);\n}\n\n.mb-miniCard:hover .mb-miniCard__bookmark {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.mb-miniCard__bookmark:hover {\n  background: var(--accent-color, #3B8DD4);\n  transform: scale(1.1);\n}\n\n.mb-miniCard__bookmark svg {\n  width: 16px;\n  height: 16px;\n  fill: none;\n  stroke: #333;\n  stroke-width: 2;\n  transition: stroke 0.25s ease;\n}\n\n.mb-miniCard__bookmark:hover svg {\n  stroke: #fff;\n}\n\n.mb-listStack {\n  display: grid;\n  gap: 14px;\n  margin-top: 8px;\n}\n\n.mb-listPost {\n  background: rgba(255, 255, 255, 0.90);\n  border: 1px solid rgba(0, 0, 0, 0.10);\n  border-radius: 14px;\n  overflow: hidden;\n  display: grid;\n  grid-template-columns: 220px 1fr;\n  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.06);\n  transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;\n}\n\n.mb-listPost:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);\n}\n\n.mb-listPost__imgWrap {\n  display: block;\n  height: 100%;\n  overflow: hidden;\n}\n\n.mb-listPost__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.4s ease;\n}\n\n.mb-listPost:hover .mb-listPost__img {\n  transform: scale(1.06);\n}\n\n.mb-listPost__body {\n  padding: 18px 20px;\n}\n\n.mb-listPost__title {\n  margin: 6px 0 10px;\n  font-size: 18px;\n  line-height: 1.4;\n  font-weight: 700;\n}\n\n.mb-listPost__title a {\n  color: #111;\n  transition: color 0.2s ease;\n}\n\n.mb-listPost__title a:hover {\n  color: var(--user-accent-text);\n  text-decoration: none;\n}\n\n.mb-listPost__excerpt {\n  margin: 0 0 12px;\n  font-size: 14px;\n  line-height: 1.65;\n  color: rgba(0, 0, 0, 0.65);\n}\n\n.mb-linkArrow {\n  font-weight: 700;\n  font-size: 13px;\n  color: var(--accent-color, #3B8DD4);\n  transition: color 0.25s ease, transform 0.25s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.mb-linkArrow:hover {\n  color: #a88820;\n  text-decoration: none;\n  transform: translateX(4px);\n}\n\n.mb-linkArrow::after {\n  content: 'â†’';\n  transition: transform 0.25s ease;\n}\n\n.mb-linkArrow:hover::after {\n  transform: translateX(3px);\n}\n\n.mb-3grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 20px;\n  margin-top: 16px;\n}\n\n.mb-compactCard {\n  background: #ffffff;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 18px;\n  overflow: hidden;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06), 0 1px 3px rgba(0, 0, 0, 0.04);\n  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.35s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n\n.mb-compactCard::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  background: linear-gradient(90deg, var(--accent-color, var(--user-accent)), transparent);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.mb-compactCard:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12), 0 4px 12px rgba(0, 0, 0, 0.06);\n  border-color: rgba(0, 0, 0, 0.14);\n}\n\n.mb-compactCard:hover::after {\n  opacity: 1;\n}\n\n.mb-compactCard__imgWrap {\n  position: relative;\n  display: block;\n  aspect-ratio: 16/10;\n  overflow: hidden;\n}\n\n.mb-compactCard__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), filter 0.3s ease;\n}\n\n.mb-compactCard:hover .mb-compactCard__img {\n  transform: scale(1.08);\n}\n\n.mb-compactCard__pill {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 5px 12px;\n  border-radius: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n\n.mb-compactCard__title {\n  margin: 16px 16px 8px;\n  font-size: 16px;\n  line-height: 1.45;\n  font-weight: 700;\n}\n\n.mb-compactCard__title a {\n  color: #1a1a1a;\n  transition: color 0.25s ease;\n  text-decoration: none;\n}\n\n.mb-compactCard__title a:hover {\n  color: var(--accent-color, var(--user-accent));\n  text-decoration: none;\n}\n\n.mb-compactCard__meta {\n  margin: 0 16px 8px;\n  font-size: 12px;\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.5);\n  letter-spacing: 0.02em;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  flex-wrap: wrap;\n}\n\n.mb-compactCard .mb-postHint {\n  margin: 0 16px 16px;\n  font-size: 13px;\n  line-height: 1.5;\n  color: #555;\n  flex: 1;\n}\n\n.mb-compactCard .mb-tts-badge-overlay {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  background: rgba(0, 0, 0, 0.6);\n  color: #fff;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: grid;\n  place-items: center;\n  font-size: 14px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n\n.mb-loadMore {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n\n.mb-loadMore__btn {\n  height: 44px;\n  min-width: 160px;\n  padding: 0 18px;\n  border-radius: 10px;\n  border: 1px solid rgba(0, 0, 0, 0.18);\n  background: rgba(255, 255, 255, 0.80);\n  color: #111;\n  font-weight: 900;\n  cursor: pointer;\n}\n\n.mb-loadMore__btn:hover {\n  transform: translateY(-1px);\n}\n\n.mb-sidebar {\n  position: sticky;\n  top: 90px;\n  display: grid;\n  gap: 14px;\n}\n\n.mb-widget {\n  background: rgba(255, 255, 255, 0.88);\n  border: 1px solid rgba(0, 0, 0, 0.10);\n  border-radius: 14px;\n  padding: 14px;\n  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.06);\n}\n\n.mb-widget__title {\n  font-size: 13px;\n  font-weight: 900;\n  letter-spacing: .08em;\n  text-transform: uppercase;\n  color: #111;\n  margin-bottom: 12px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.10);\n}\n\n.mb-sideSearch__input {\n  width: 100%;\n  height: 46px;\n  border-radius: 12px;\n  border: 1px solid rgba(0, 0, 0, 0.12);\n  background: rgba(255, 255, 255, 0.92);\n  padding: 0 12px;\n  font-size: 14px;\n  color: #111;\n}\n\n.mb-trending {\n  display: grid;\n  gap: 10px;\n}\n\n.mb-trending__item {\n  display: grid;\n  grid-template-columns: 54px 1fr;\n  gap: 10px;\n  align-items: center;\n  border-radius: 12px;\n  padding: 8px;\n  background: rgba(0, 0, 0, 0.03);\n}\n\n.mb-trending__thumb {\n  width: 54px;\n  height: 54px;\n  border-radius: 10px;\n  object-fit: cover;\n  display: block;\n}\n\n.mb-trending__kicker {\n  font-size: 11px;\n  font-weight: 900;\n  color: rgba(43, 90, 166, 0.95);\n}\n\n.mb-trending__title {\n  font-size: 13px;\n  font-weight: 900;\n  color: #111;\n  line-height: 1.2;\n}\n\n.mb-trending__item:hover {\n  background: rgba(0, 0, 0, 0.06);\n}\n\n.mb-cats {\n  display: grid;\n  gap: 8px;\n}\n\n.mb-catBtn {\n  text-align: left;\n  border: 0;\n  background: rgba(0, 0, 0, 0.03);\n  padding: 10px 10px;\n  border-radius: 12px;\n  font-weight: 900;\n  color: #111;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.mb-catBtn:hover {\n  background: rgba(0, 0, 0, 0.06);\n}\n\n.mb-tags {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.mb-tag {\n  border: 1px solid rgba(0, 0, 0, 0.14);\n  background: rgba(255, 255, 255, 0.78);\n  border-radius: 999px;\n  padding: 8px 10px;\n  font-size: 12px;\n  font-weight: 900;\n  color: #111;\n  cursor: pointer;\n}\n\n.mb-tag:hover {\n  transform: translateY(-1px);\n}\n\n.mb-actions {\n  display: grid;\n  gap: 10px;\n}\n\n.mb-actionBtn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 44px;\n  border-radius: 12px;\n  background: #111;\n  color: #fff;\n  font-weight: 900;\n  font-size: 13px;\n}\n\n.mb-newsletter {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.mb-newsletter .mb-actionBtn {\n  width: 100%;\n  text-align: center;\n}\n\n.mb-actionBtn--ghost {\n  background: transparent;\n  color: #111;\n  border: 1px solid rgba(0, 0, 0, 0.18);\n}\n\n.mb-actionBtn:hover {\n  transform: translateY(-1px);\n}\n\n.mb-toast {\n  position: fixed;\n  left: 50%;\n  bottom: 18px;\n  transform: translateX(-50%);\n  background: rgba(17, 17, 17, 0.92);\n  color: #fff;\n  padding: 10px 14px;\n  border-radius: 999px;\n  font-weight: 900;\n  font-size: 13px;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 160ms ease, transform 160ms ease;\n  z-index: 9999;\n}\n\n.mb-toast.is-show {\n  opacity: 1;\n  transform: translateX(-50%) translateY(-2px);\n}\n\n@media (max-width: 980px) {\n  .mb-blogHero__inner {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-blogGrid {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-sidebar {\n    position: static;\n  }\n\n  .mb-3grid {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-2up {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-listPost {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-listPost__imgWrap {\n    aspect-ratio: 16/9;\n  }\n}\n\n:root {\n  \n  --bg-primary: #faf9f7;\n  --bg-secondary: #f5f4f2;\n  --bg-tertiary: #eeede9;\n  --bg-card: #ffffff;\n  --bg-surface: #f8f7f5;\n  --bg-input: #ffffff;\n  --bg-hover: rgba(0, 0, 0, 0.03);\n\n  \n  --text-primary: #1a1a2e;\n  --text-secondary: #4a4a68;\n  --text-muted: #6c757d;\n  --text-inverse: #ffffff;\n\n  \n  --border-color: rgba(0, 0, 0, 0.12);\n  --border-light: rgba(0, 0, 0, 0.06);\n  --shadow-color: rgba(0, 0, 0, 0.1);\n  --shadow-strong: rgba(0, 0, 0, 0.15);\n\n  \n  --accent-color: var(--user-accent);\n  --accent-hover: #163F6E;\n  --accent-light: rgba(var(--user-accent-rgb), 0.15);\n\n  \n  --success-color: #28a745;\n  --warning-color: #ffc107;\n  --error-color: #dc3545;\n  --info-color: #17a2b8;\n\n  \n  --footer-bg: var(--user-accent-light);\n  --footer-text: rgba(0, 0, 0, 0.7);\n  --footer-heading: #ffffff;\n}\n\n[data-theme=\"dark\"] {\n  \n  --bg-primary: #121220;\n  --bg-secondary: #1a1a2e;\n  --bg-tertiary: #252542;\n  --bg-card: #1e1e32;\n  --bg-surface: #16162a;\n  --bg-input: #1e1e32;\n  --bg-hover: rgba(255, 255, 255, 0.05);\n\n  \n  --text-primary: #f0f0f5;\n  --text-secondary: #b8b8c8;\n  --text-muted: #8888a0;\n  --text-inverse: #1a1a2e;\n\n  \n  --border-color: rgba(255, 255, 255, 0.12);\n  --border-light: rgba(255, 255, 255, 0.06);\n  --shadow-color: rgba(0, 0, 0, 0.4);\n  --shadow-strong: rgba(0, 0, 0, 0.5);\n\n  \n  --accent-color: var(--user-accent);\n  --accent-hover: var(--user-accent-hover);\n  --accent-light: rgba(var(--user-accent-rgb), 0.25);\n\n  \n  --footer-bg: #1a1a2e;\n  --footer-text: #d0d0d0;\n  --footer-heading: #f0f0f5;\n}\n\n[data-theme=\"dark\"] .intro-title {\n  color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] {\n  --bg-primary: #ffffff;\n  --bg-secondary: #f0f0f0;\n  --bg-tertiary: #e0e0e0;\n  --bg-card: #ffffff;\n  --text-primary: #000000;\n  --text-secondary: #1a1a1a;\n  --text-muted: #333333;\n  --border-color: #000000;\n  --accent-color: var(--user-accent);\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] {\n  --bg-primary: #000000;\n  --bg-secondary: #0a0a0a;\n  --bg-tertiary: #141414;\n  --bg-card: #0a0a0a;\n  --text-primary: #ffffff;\n  --text-secondary: #e0e0e0;\n  --text-muted: #c0c0c0;\n  --border-color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] {\n  --hc-text: #000000;\n  --hc-bg: #ffffff;\n  --hc-border: #000000;\n  --hc-link: #0000EE;\n  --hc-focus: #ffff00;\n}\n\n[data-high-contrast=\"true\"] main h1,\n[data-high-contrast=\"true\"] main h2,\n[data-high-contrast=\"true\"] main h3,\n[data-high-contrast=\"true\"] main h4,\n[data-high-contrast=\"true\"] main h5,\n[data-high-contrast=\"true\"] main h6,\n[data-high-contrast=\"true\"] main p,\n[data-high-contrast=\"true\"] main li,\n[data-high-contrast=\"true\"] main td,\n[data-high-contrast=\"true\"] main th,\n[data-high-contrast=\"true\"] main label,\n[data-high-contrast=\"true\"] main span:not(.article-hero__content span),\n[data-high-contrast=\"true\"] section h1:not(.article-hero__content h1),\n[data-high-contrast=\"true\"] section h2:not(.article-hero__content h2),\n[data-high-contrast=\"true\"] section h3,\n[data-high-contrast=\"true\"] section p:not(.article-hero__content p),\n[data-high-contrast=\"true\"] section li,\n[data-high-contrast=\"true\"] article h1,\n[data-high-contrast=\"true\"] article h2,\n[data-high-contrast=\"true\"] article h3,\n[data-high-contrast=\"true\"] article p,\n[data-high-contrast=\"true\"] article li,\n[data-high-contrast=\"true\"] .container h1:not(.article-hero__content h1),\n[data-high-contrast=\"true\"] .container h2:not(.article-hero__content h2),\n[data-high-contrast=\"true\"] .container h3,\n[data-high-contrast=\"true\"] .container p:not(.article-hero__content p),\n[data-high-contrast=\"true\"] .container li,\n[data-high-contrast=\"true\"] .mb-footer__text,\n[data-high-contrast=\"true\"] .mb-footer__link {\n  color: var(--hc-text) !important;\n}\n\n[data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h1,\n[data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h2,\n[data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h3,\n[data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) p,\n[data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) li,\n[data-high-contrast=\"true\"] dialog h1,\n[data-high-contrast=\"true\"] dialog h2,\n[data-high-contrast=\"true\"] dialog h3,\n[data-high-contrast=\"true\"] dialog p,\n[data-high-contrast=\"true\"] [role=\"dialog\"] h1,\n[data-high-contrast=\"true\"] [role=\"dialog\"] h2,\n[data-high-contrast=\"true\"] [role=\"dialog\"] h3,\n[data-high-contrast=\"true\"] [role=\"dialog\"] p {\n  color: var(--hc-text) !important;\n}\n\n[data-high-contrast=\"true\"] .article-hero__content h1,\n[data-high-contrast=\"true\"] .article-hero__content p,\n[data-high-contrast=\"true\"] .article-hero__content span,\n[data-high-contrast=\"true\"] .hero-text,\n[data-high-contrast=\"true\"] .hero h1,\n[data-high-contrast=\"true\"] .hero p {\n  color: #ffffff !important;\n  text-shadow: 0 1px 4px rgba(0,0,0,0.8) !important;\n}\n\n[data-high-contrast=\"true\"] .hero,\n[data-high-contrast=\"true\"] .article-hero {\n  background-color: #1a1a1a !important;\n}\n\n[data-high-contrast=\"true\"] .intro-stat-value,\n[data-high-contrast=\"true\"] .intro-stat-label,\n[data-high-contrast=\"true\"] .intro-title,\n[data-high-contrast=\"true\"] .intro-text,\n[data-high-contrast=\"true\"] .section-title,\n[data-high-contrast=\"true\"] .section-text {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .intro-stat {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mood-option {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mood-option.selected,\n[data-high-contrast=\"true\"] .mood-option:hover {\n  border-color: #000000 !important;\n  background: #ffff00 !important;\n  outline: 3px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mood-option span,\n[data-high-contrast=\"true\"] .mood-label {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .checkin-title,\n[data-high-contrast=\"true\"] .checkin-subtitle,\n[data-high-contrast=\"true\"] .greeting-text,\n[data-high-contrast=\"true\"] .greeting-time {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mb-card,\n[data-high-contrast=\"true\"] .mb-card__content,\n[data-high-contrast=\"true\"] .mb-tcard,\n[data-high-contrast=\"true\"] .mb-actionbox,\n[data-high-contrast=\"true\"] .event-card,\n[data-high-contrast=\"true\"] .service-card {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n  box-shadow: none !important;\n}\n\n[data-high-contrast=\"true\"] .mb-card__title,\n[data-high-contrast=\"true\"] .mb-card__text,\n[data-high-contrast=\"true\"] .mb-card__kicker,\n[data-high-contrast=\"true\"] .mb-tcard__name,\n[data-high-contrast=\"true\"] .mb-tcard__role,\n[data-high-contrast=\"true\"] .mb-tcard__text,\n[data-high-contrast=\"true\"] .mb-actionbox__title,\n[data-high-contrast=\"true\"] .mb-actionbox__text,\n[data-high-contrast=\"true\"] .mb-actionbox__kicker {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mb-card__btn,\n[data-high-contrast=\"true\"] .btn-primary,\n[data-high-contrast=\"true\"] .cta-btn,\n[data-high-contrast=\"true\"] .hero-btn {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mb-card__btn:hover,\n[data-high-contrast=\"true\"] .btn-primary:hover,\n[data-high-contrast=\"true\"] .cta-btn:hover,\n[data-high-contrast=\"true\"] .hero-btn:hover {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .btn-outline,\n[data-high-contrast=\"true\"] .btn-secondary {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .btn-outline:hover,\n[data-high-contrast=\"true\"] .btn-secondary:hover {\n  background: #000000 !important;\n  color: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .tag,\n[data-high-contrast=\"true\"] .badge,\n[data-high-contrast=\"true\"] .chip,\n[data-high-contrast=\"true\"] .popular-tag,\n[data-high-contrast=\"true\"] .mb-footer__tag {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .back-top-btn,\n[data-high-contrast=\"true\"] .scroll-top-btn {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .quote-banner,\n[data-high-contrast=\"true\"] .mb-testimonials {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .quote-banner *,\n[data-high-contrast=\"true\"] .mb-testimonials * {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .wave-separator,\n[data-high-contrast=\"true\"] .mb-footer__wave {\n  display: none !important;\n}\n\n[data-high-contrast=\"true\"] .preload {\n  background: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] section {\n  background-color: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .about,\n[data-high-contrast=\"true\"] .crisis-section {\n  background-color: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .about *,\n[data-high-contrast=\"true\"] .crisis-section * {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .notification-badge,\n[data-high-contrast=\"true\"] .unread-count {\n  background: #cc0000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .rl-filterBtn,\n[data-high-contrast=\"true\"] .rl-filterTag {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .rl-filterBtn.active,\n[data-high-contrast=\"true\"] .rl-filterTag.active {\n  background: #000000 !important;\n  color: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .tab-btn,\n[data-high-contrast=\"true\"] .category-tab {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .tab-btn.active,\n[data-high-contrast=\"true\"] .category-tab.active {\n  background: #000000 !important;\n  color: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .checkin-section,\n[data-high-contrast=\"true\"] .mood-checkin {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .community-post,\n[data-high-contrast=\"true\"] .post-card {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .community-post *,\n[data-high-contrast=\"true\"] .post-card * {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .article-content a,\n[data-high-contrast=\"true\"] .mb-footer a,\n[data-high-contrast=\"true\"] nav a:not(.article-hero__content a) {\n  color: var(--hc-link) !important;\n  text-decoration: underline !important;\n}\n\n[data-high-contrast=\"true\"] .article-content a:hover,\n[data-high-contrast=\"true\"] .article-content a:focus,\n[data-high-contrast=\"true\"] nav a:hover,\n[data-high-contrast=\"true\"] nav a:focus {\n  background-color: var(--hc-focus) !important;\n  color: var(--hc-text) !important;\n  outline: 2px solid var(--hc-text) !important;\n}\n\n[data-high-contrast=\"true\"] .header,\n[data-high-contrast=\"true\"] .topbar,\n[data-high-contrast=\"true\"] header {\n  background-color: #ffffff !important;\n  border-bottom: 3px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .header *,\n[data-high-contrast=\"true\"] .topbar * {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .navbar-link,\n[data-high-contrast=\"true\"] .nav-link {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .navbar-link:hover,\n[data-high-contrast=\"true\"] .navbar-link:focus,\n[data-high-contrast=\"true\"] .nav-link:hover,\n[data-high-contrast=\"true\"] .nav-link:focus {\n  background-color: #ffff00 !important;\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .navbar {\n  background-color: #ffffff !important;\n  border-right: 3px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .navbar *,\n[data-high-contrast=\"true\"] .navbar .navbar-link .span,\n[data-high-contrast=\"true\"] .navbar .close-btn {\n  color: #000000 !important;\n  border-color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .navbar-item {\n  border-color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] button,\n[data-high-contrast=\"true\"] .btn,\n[data-high-contrast=\"true\"] [type=\"button\"],\n[data-high-contrast=\"true\"] [type=\"submit\"],\n[data-high-contrast=\"true\"] .navbar-action-btn {\n  background-color: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] button:hover,\n[data-high-contrast=\"true\"] button:focus,\n[data-high-contrast=\"true\"] .btn:hover,\n[data-high-contrast=\"true\"] .btn:focus,\n[data-high-contrast=\"true\"] .navbar-action-btn:hover,\n[data-high-contrast=\"true\"] .navbar-action-btn:focus {\n  background-color: #000000 !important;\n  color: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] input,\n[data-high-contrast=\"true\"] textarea,\n[data-high-contrast=\"true\"] select {\n  background-color: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] input::placeholder,\n[data-high-contrast=\"true\"] textarea::placeholder {\n  color: #333333 !important;\n}\n\n[data-high-contrast=\"true\"] input:focus,\n[data-high-contrast=\"true\"] textarea:focus,\n[data-high-contrast=\"true\"] select:focus {\n  outline: 3px solid #000000 !important;\n  outline-offset: 2px !important;\n}\n\n[data-high-contrast=\"true\"] .card,\n[data-high-contrast=\"true\"] .mb-postCard,\n[data-high-contrast=\"true\"] .mb-listPost,\n[data-high-contrast=\"true\"] .rl-card,\n[data-high-contrast=\"true\"] .resource-card {\n  background-color: #ffffff !important;\n  border: 2px solid #000000 !important;\n  box-shadow: none !important;\n}\n\n[data-high-contrast=\"true\"] .modal,\n[data-high-contrast=\"true\"] .dropdown,\n[data-high-contrast=\"true\"] .settings-dropdown,\n[data-high-contrast=\"true\"] [class*=\"modal\"],\n[data-high-contrast=\"true\"] [class*=\"dropdown\"] {\n  background-color: #ffffff !important;\n  border: 2px solid #000000 !important;\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] footer,\n[data-high-contrast=\"true\"] .mb-footer,\n[data-high-contrast=\"true\"] .mb-footer__top,\n[data-high-contrast=\"true\"] .mb-footer__bottom {\n  background-color: #ffffff !important;\n  border-top: 3px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] footer *,\n[data-high-contrast=\"true\"] .mb-footer * {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] ion-icon,\n[data-high-contrast=\"true\"] svg,\n[data-high-contrast=\"true\"] .icon,\n[data-high-contrast=\"true\"] i[class*=\"fa\"] {\n  color: #000000 !important;\n  fill: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] *:focus {\n  outline: 3px solid #000000 !important;\n  outline-offset: 2px !important;\n}\n\n[data-high-contrast=\"true\"] *:focus-visible {\n  outline: 3px solid #000000 !important;\n  outline-offset: 2px !important;\n  box-shadow: 0 0 0 4px #ffff00 !important;\n}\n\n[data-high-contrast=\"true\"] .error,\n[data-high-contrast=\"true\"] .error-message,\n[data-high-contrast=\"true\"] [class*=\"error\"] {\n  color: #cc0000 !important;\n  font-weight: bold !important;\n}\n\n[data-high-contrast=\"true\"] .success,\n[data-high-contrast=\"true\"] .success-message,\n[data-high-contrast=\"true\"] [class*=\"success\"] {\n  color: #006600 !important;\n  font-weight: bold !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] {\n  --hc-text: #ffffff;\n  --hc-bg: #000000;\n  --hc-border: #ffffff;\n  --hc-link: #00ffff;\n  --hc-focus: #ffff00;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h1,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h2,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h4,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h5,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h6,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main p,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main li,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main td,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main th,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main label,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main span:not(.article-hero__content span),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section h1:not(.article-hero__content h1),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section h2:not(.article-hero__content h2),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section p:not(.article-hero__content p),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section li,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] article h1,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] article h2,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] article h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] article p,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] article li,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .container h1:not(.article-hero__content h1),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .container h2:not(.article-hero__content h2),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .container h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .container p:not(.article-hero__content p),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .container li,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__link {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h1,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h2,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) p,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) li,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] dialog h1,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] dialog h2,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] dialog h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] dialog p,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] [role=\"dialog\"] h1,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] [role=\"dialog\"] h2,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] [role=\"dialog\"] h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] [role=\"dialog\"] p {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .article-content a,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer a {\n  color: #00ffff !important;\n  text-decoration: underline !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .article-content a:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .article-content a:focus {\n  color: #000000 !important;\n  background-color: #ffff00 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .header,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .topbar,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] header {\n  background-color: #000000 !important;\n  border-bottom: 3px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .header *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .topbar * {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .navbar {\n  background-color: #000000 !important;\n  border-right: 3px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .navbar *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .navbar .navbar-link .span,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .navbar .close-btn {\n  color: #ffffff !important;\n  border-color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] button,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .btn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .navbar-action-btn {\n  background-color: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] button:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] button:focus,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .btn:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .btn:focus {\n  background-color: #ffffff !important;\n  color: #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] input,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] textarea,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] select {\n  background-color: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] input::placeholder,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] textarea::placeholder {\n  color: #cccccc !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .card,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-postCard,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-listPost,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .rl-card {\n  background-color: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] footer,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__top,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__bottom {\n  background-color: #000000 !important;\n  border-top: 3px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] footer *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer * {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] ion-icon,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] svg,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .icon {\n  color: #ffffff !important;\n  fill: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] *:focus,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] *:focus-visible {\n  outline: 3px solid #ffffff !important;\n  outline-offset: 2px !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .hero,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .article-hero {\n  background-color: #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .intro-stat-value,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .intro-stat-label,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .intro-title,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .intro-text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .section-title,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .section-text {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .intro-stat {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-option {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-option.selected,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-option:hover {\n  border-color: #ffffff !important;\n  background: #333333 !important;\n  outline: 3px solid #ffff00 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-option span,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-label {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .checkin-title,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .checkin-subtitle,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .greeting-text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .greeting-time {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__content,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-tcard,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-actionbox,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .event-card,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .service-card {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n  box-shadow: none !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__title,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__kicker,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-tcard__name,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-tcard__role,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-tcard__text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-actionbox__title,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-actionbox__text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-actionbox__kicker {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__btn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .btn-primary,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .cta-btn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .hero-btn {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__btn:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .btn-primary:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .cta-btn:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .hero-btn:hover {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .tag,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .badge,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .chip,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .popular-tag,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__tag {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .back-top-btn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .scroll-top-btn {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .quote-banner,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-testimonials {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .quote-banner *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-testimonials * {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .wave-separator,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__wave {\n  display: none !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section {\n  background-color: #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .about,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .crisis-section {\n  background-color: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .about *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .crisis-section * {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .rl-filterBtn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .rl-filterTag {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .rl-filterBtn.active,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .rl-filterTag.active {\n  background: #ffffff !important;\n  color: #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .tab-btn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .category-tab {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .tab-btn.active,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .category-tab.active {\n  background: #ffffff !important;\n  color: #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .checkin-section,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-checkin {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .community-post,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .post-card {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .community-post *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .post-card * {\n  color: #ffffff !important;\n}\n\n[data-colorblind=\"protanopia\"] {\n  filter: url('#protanopia-filter');\n}\n\n[data-colorblind=\"deuteranopia\"] {\n  filter: url('#deuteranopia-filter');\n}\n\n[data-colorblind=\"tritanopia\"] {\n  filter: url('#tritanopia-filter');\n}\n\n/* ===== FOCUS MODE (ADHD) =====\n   Principle: Reduce visual distractions WITHOUT breaking any functionality.\n   - Stop continuous/looping animations (floats, pulses, scrolling testimonials)\n   - Hide auto-playing video backgrounds (show poster instead)\n   - Preserve ALL interactive elements: header, navbar, settings, preloader, modals\n   - Keep UI transitions fast but functional (not zero) */\n\n[data-adhd-mode=\"true\"] .back-video {\n  display: none !important;\n}\n\n[data-adhd-mode=\"true\"] #main-hero.hero {\n  background-image: var(--hero-poster, url('/assets/images/hero-poster.jpg'));\n  background-size: cover;\n  background-position: center;\n}\n\n[data-adhd-mode=\"true\"] .swiper-autoplay,\n[data-adhd-mode=\"true\"] [data-swiper-autoplay] {\n  --swiper-autoplay: 0 !important;\n}\n\n[data-adhd-mode=\"true\"] .mb-testimonials__track {\n  animation: none !important;\n}\n\n[data-adhd-mode=\"true\"] .mb-testimonials__mask {\n  display: none !important;\n}\n\n[data-adhd-mode=\"true\"] .animate-float,\n[data-adhd-mode=\"true\"] .animate-pulse,\n[data-adhd-mode=\"true\"] .animate-bounce,\n[data-adhd-mode=\"true\"] [class*=\"animate-continuous\"],\n[data-adhd-mode=\"true\"] .hero-cycle-text {\n  animation: none !important;\n}\n\n[data-adhd-mode=\"true\"] .scroll-reveal,\n[data-adhd-mode=\"true\"] .stagger-reveal,\n[data-adhd-mode=\"true\"] [data-scroll-reveal] {\n  opacity: 1 !important;\n  transform: none !important;\n}\n\n[data-adhd-mode=\"true\"] .wave-separator svg,\n[data-adhd-mode=\"true\"] .mb-footer__wave svg {\n  animation: none !important;\n}\n\n[data-adhd-mode=\"true\"] section,\n[data-adhd-mode=\"true\"] main,\n[data-adhd-mode=\"true\"] .container,\n[data-adhd-mode=\"true\"] .mb-actionbox,\n[data-adhd-mode=\"true\"] .mb-card,\n[data-adhd-mode=\"true\"] .mb-footer,\n[data-adhd-mode=\"true\"] .event,\n[data-adhd-mode=\"true\"] .service,\n[data-adhd-mode=\"true\"] .about,\n[data-adhd-mode=\"true\"] .crisis-section,\n[data-adhd-mode=\"true\"] .quote-banner {\n  transition-duration: 0.1s !important;\n}\n\n[data-adhd-mode=\"true\"] section *,\n[data-adhd-mode=\"true\"] main *,\n[data-adhd-mode=\"true\"] .mb-actionbox *,\n[data-adhd-mode=\"true\"] .mb-footer * {\n  animation-iteration-count: 1 !important;\n}\n\n@import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap');\n\n[data-dyslexia-font=\"true\"] *:not(.fa):not(.fas):not(.far):not(.fab):not(.fal):not(.fad):not([class*=\"fa-\"]) {\n  font-family: 'Lexend', 'OpenDyslexic', sans-serif !important;\n  letter-spacing: 0.05em !important;\n  word-spacing: 0.1em !important;\n  line-height: 1.8 !important;\n}\n\n[data-dyslexia-font=\"true\"] .fa,\n[data-dyslexia-font=\"true\"] .fas,\n[data-dyslexia-font=\"true\"] .far,\n[data-dyslexia-font=\"true\"] .fab,\n[data-dyslexia-font=\"true\"] .fal,\n[data-dyslexia-font=\"true\"] .fad,\n[data-dyslexia-font=\"true\"] [class*=\"fa-\"] {\n  font-family: \"Font Awesome 6 Free\", \"Font Awesome 6 Brands\" !important;\n  letter-spacing: normal !important;\n  word-spacing: normal !important;\n  line-height: normal !important;\n}\n\n[data-font-size=\"large\"] {\n  font-size: 110%;\n}\n\n[data-font-size=\"x-large\"] {\n  font-size: 120%;\n}\n\n[data-reduce-motion=\"true\"] *,\n[data-reduce-motion=\"true\"] *::before,\n[data-reduce-motion=\"true\"] *::after {\n  animation-duration: 0.01ms !important;\n  animation-iteration-count: 1 !important;\n  transition-duration: 0.01ms !important;\n}\n\n.navbar-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-left: auto;\n  position: relative;\n  z-index: 100;\n  flex-shrink: 0;\n}\n\n.user-menu-wrapper {\n  position: relative;\n  z-index: 102;\n}\n\n.user-menu-trigger {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 12px;\n  border: none;\n  background: var(--bg-secondary, rgba(0, 0, 0, 0.04));\n  border-radius: 30px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: var(--text-primary, #1a1a2e);\n}\n\n.user-menu-trigger:hover {\n  background: var(--bg-tertiary, rgba(0, 0, 0, 0.08));\n}\n\n.user-menu-trigger .user-avatar-small {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid var(--user-accent);\n}\n\n.user-menu-trigger .user-icon {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--user-accent);\n  border-radius: 50%;\n  color: #fff;\n  font-size: 18px;\n}\n\n.user-menu-trigger .menu-chevron {\n  font-size: 14px;\n  transition: transform 0.2s ease;\n  opacity: 0.6;\n}\n\n.user-menu-wrapper.active .user-menu-trigger .menu-chevron {\n  transform: rotate(180deg);\n}\n\n.user-menu-dropdown {\n  position: absolute;\n  top: calc(100% + 10px);\n  right: 0;\n  width: 280px;\n  background: #fff;\n  border-radius: 16px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  opacity: 0;\n  visibility: hidden;\n  transform: translateY(-10px);\n  transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s ease;\n  overflow: hidden;\n}\n\n.user-menu-wrapper.active .user-menu-dropdown {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n\n[data-theme=\"dark\"] .user-menu-dropdown {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);\n}\n\n[data-theme=\"dark\"] .user-menu-trigger {\n  background: rgba(255, 255, 255, 0.08);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .user-menu-trigger:hover {\n  background: rgba(255, 255, 255, 0.12);\n}\n\n.user-menu-header {\n  padding: 16px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n[data-theme=\"dark\"] .user-menu-header {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.user-menu-header .user-avatar-large {\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid var(--user-accent);\n}\n\n.user-menu-header .user-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.user-menu-header .user-name {\n  font-family: 'Poppins', sans-serif;\n  font-size: 15px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[data-theme=\"dark\"] .user-menu-header .user-name {\n  color: #fff;\n}\n\n.user-menu-header .user-email {\n  font-size: 12px;\n  color: #666;\n  margin: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[data-theme=\"dark\"] .user-menu-header .user-email {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.user-menu-items {\n  padding: 8px 0;\n}\n\n.user-menu-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  color: #333;\n  text-decoration: none;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  transition: background 0.15s ease;\n  border: none;\n  background: none;\n  width: 100%;\n  cursor: pointer;\n  text-align: left;\n}\n\n.user-menu-item:hover {\n  background: rgba(0, 0, 0, 0.04);\n}\n\n[data-theme=\"dark\"] .user-menu-item {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .user-menu-item:hover {\n  background: rgba(255, 255, 255, 0.06);\n}\n\n.user-menu-item ion-icon {\n  font-size: 20px;\n  color: #666;\n}\n\n[data-theme=\"dark\"] .user-menu-item ion-icon {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.user-menu-item .menu-item-badge {\n  margin-left: auto;\n  background: #e74c3c;\n  color: #fff;\n  font-size: 11px;\n  font-weight: 600;\n  padding: 2px 8px;\n  border-radius: 10px;\n  min-width: 20px;\n  text-align: center;\n}\n\n.user-menu-divider {\n  height: 1px;\n  background: rgba(0, 0, 0, 0.08);\n  margin: 8px 0;\n}\n\n[data-theme=\"dark\"] .user-menu-divider {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n.user-menu-settings {\n  padding: 0 16px 16px;\n}\n\n.user-menu-settings-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 0;\n}\n\n.user-menu-settings-row .setting-label {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 13px;\n  color: #666;\n}\n\n[data-theme=\"dark\"] .user-menu-settings-row .setting-label {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.user-menu-settings-row .setting-label ion-icon {\n  font-size: 18px;\n}\n\n.user-menu-item.logout-item {\n  color: #e74c3c;\n}\n\n.user-menu-item.logout-item ion-icon {\n  color: #e74c3c;\n}\n\n.user-menu-guest {\n  padding: 20px 16px;\n  text-align: center;\n}\n\n.user-menu-guest p {\n  font-size: 13px;\n  color: #666;\n  margin: 0 0 12px 0;\n}\n\n[data-theme=\"dark\"] .user-menu-guest p {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.user-menu-signin-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 10px 24px;\n  background: var(--user-accent);\n  color: #fff;\n  border: none;\n  border-radius: 25px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  text-decoration: none;\n  cursor: pointer;\n  transition: background 0.2s ease;\n  width: 100%;\n}\n\n.user-menu-signin-btn:hover {\n  background: var(--accent-hover, #163F6E);\n}\n\n.user-menu-trigger {\n  position: relative;\n}\n\n.user-menu-badge {\n  position: absolute;\n  top: -4px;\n  right: -4px;\n  background: #e74c3c;\n  color: #fff;\n  font-size: 10px;\n  font-weight: 600;\n  padding: 2px 6px;\n  border-radius: 10px;\n  min-width: 16px;\n  text-align: center;\n}\n\n@media (min-width: 1025px) {\n  .navbar-actions .settings-wrapper[style*=\"display: none\"],\n  .navbar-actions > div[style*=\"display: none\"] {\n    display: none !important;\n  }\n}\n\n.navbar-action-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: transparent;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: background-color 0.2s ease, transform 0.2s ease;\n  color: var(--text-primary, #1a1a2e);\n}\n\n.navbar-action-btn:hover {\n  background: var(--bg-tertiary, rgba(0, 0, 0, 0.05));\n  transform: scale(1.05);\n}\n\n.navbar-action-btn .action-icon {\n  font-size: 22px;\n}\n\n.navbar-action-btn.auth-btn {\n  width: auto;\n  padding: 8px 16px;\n  border-radius: 25px;\n  background: var(--user-accent);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  text-decoration: none;\n}\n\n.navbar-action-btn.auth-btn:hover {\n  background: var(--accent-hover, #163F6E);\n}\n\n.navbar-action-btn.auth-btn .auth-text {\n  white-space: nowrap;\n}\n\n.navbar-action-btn[data-user-btn].is-signed-in {\n  padding: 0;\n  overflow: visible;\n}\n\n.navbar-action-btn[data-user-btn].is-signed-in .user-avatar {\n  overflow: hidden;\n}\n\n.navbar-action-btn[data-user-btn] .user-avatar {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid var(--user-accent);\n}\n\n.navbar-action-btn[data-user-btn].is-signed-in:hover .user-avatar {\n  border-color: var(--accent-hover, #163F6E);\n}\n\n.navbar-action-btn[data-user-btn].signed-in .action-icon {\n  color: var(--accent-color, #ffffff);\n}\n\n.settings-wrapper {\n  position: relative;\n  z-index: 101;\n}\n\n.settings-dropdown {\n  position: absolute;\n  top: calc(100% + 10px);\n  right: 0;\n  width: 280px;\n  background: #fff;\n  border-radius: 16px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  opacity: 0;\n  visibility: hidden;\n  transform: translateY(-10px);\n  transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s ease;\n  z-index: 1000;\n}\n\n[data-theme=\"dark\"] .settings-dropdown {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);\n}\n\n.settings-dropdown.active {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n\n.settings-header {\n  padding: 16px 20px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .settings-header {\n  border-bottom-color: rgba(255, 255, 255, 0.1);\n}\n\n.settings-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 16px;\n  font-weight: 600;\n  color: #3d3a50;\n}\n\n[data-theme=\"dark\"] .settings-title {\n  color: var(--user-accent-light);\n}\n\n.settings-content {\n  padding: 12px 0;\n}\n\n.setting-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 20px;\n  transition: background-color 0.15s ease;\n}\n\n.setting-item:hover {\n  background: rgba(0, 0, 0, 0.03);\n}\n\n[data-theme=\"dark\"] .setting-item:hover {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n.setting-info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  color: #333;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n}\n\n[data-theme=\"dark\"] .setting-info {\n  color: #fff;\n}\n\n.setting-info ion-icon {\n  font-size: 20px;\n  color: rgba(0, 0, 0, 0.5);\n}\n\n[data-theme=\"dark\"] .setting-info ion-icon {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.theme-toggle-switch {\n  position: relative;\n  display: inline-block;\n  width: 44px;\n  height: 24px;\n}\n\n.theme-toggle-switch input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.theme-toggle-slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: var(--bg-tertiary, #ccc);\n  border-radius: 24px;\n  transition: 0.3s;\n}\n\n.theme-toggle-slider::before {\n  position: absolute;\n  content: \"\";\n  height: 18px;\n  width: 18px;\n  left: 3px;\n  bottom: 3px;\n  background-color: white;\n  border-radius: 50%;\n  transition: 0.3s;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n.theme-toggle-switch input:checked+.theme-toggle-slider {\n  background-color: var(--user-accent);\n}\n\n.theme-toggle-switch input:checked+.theme-toggle-slider::before {\n  transform: translateX(20px);\n}\n\n.setting-select {\n  padding: 6px 12px;\n  border: 1px solid var(--border-color, rgba(0, 0, 0, 0.15));\n  border-radius: 6px;\n  background: var(--bg-primary, #fff);\n  color: var(--text-primary, #1a1a2e);\n  font-family: 'Poppins', sans-serif;\n  font-size: 13px;\n  cursor: pointer;\n  transition: border-color 0.2s ease;\n}\n\n.setting-select:hover {\n  border-color: var(--user-accent);\n}\n\n.setting-select:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.setting-item--accent {\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 10px;\n}\n\n.accent-color-picker {\n  display: flex;\n  gap: 6px;\n  flex-wrap: wrap;\n}\n\n.accent-color-btn {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  border: 2px solid transparent;\n  background-color: var(--btn-color);\n  cursor: pointer;\n  transition: transform 0.15s ease, box-shadow 0.15s ease;\n  padding: 0;\n}\n\n.accent-color-btn:hover {\n  transform: scale(1.15);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n\n.accent-color-btn.active {\n  border-color: #fff;\n  box-shadow: 0 0 0 2px var(--btn-color), 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .accent-color-btn.active {\n  border-color: #1a1a2e;\n}\n\n.mobile-accent-picker {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-top: 8px;\n}\n\n.mobile-accent-picker .accent-color-btn {\n  width: 28px;\n  height: 28px;\n}\n\n.mobile-settings-section {\n  padding: 0;\n  margin: 4px 0 0;\n  flex-shrink: 0;\n  background: #fff;\n  border-radius: 14px;\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);\n  overflow: hidden;\n}\n\n.mobile-settings-toggle {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  padding: 14px 16px;\n  background: linear-gradient(135deg, #f8f5f0 0%, #f0ebe3 100%);\n  border: none;\n  width: 100%;\n  transition: background 0.2s ease;\n}\n\n.mobile-settings-toggle:hover {\n  background: linear-gradient(135deg, #f0ebe3 0%, #e8e3db 100%);\n}\n\n.mobile-settings-toggle ion-icon {\n  font-size: 18px;\n  color: var(--user-accent);\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  background: rgba(var(--user-accent-rgb), 0.1);\n  padding: 6px;\n  border-radius: 8px;\n}\n\n.mobile-settings-section.collapsed .mobile-settings-toggle ion-icon {\n  transform: rotate(-90deg);\n}\n\n.mobile-settings-section.collapsed .mobile-settings-list {\n  display: none;\n}\n\n.mobile-settings-title {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  color: #1a1a2e;\n  text-transform: none;\n  letter-spacing: 0;\n  margin: 0;\n}\n\n.mobile-settings-title::before {\n  content: '\\2699';\n  font-size: 18px;\n  color: var(--user-accent);\n}\n\n.mobile-settings-list {\n  padding: 12px 16px 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  background: #fff;\n  animation: slideDown 0.3s ease;\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.mobile-setting-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  background: #f9f7f4;\n  border-radius: 12px;\n  transition: background 0.2s ease;\n}\n\n.mobile-setting-item:hover {\n  background: #f3f0ea;\n}\n\n.mobile-setting-label {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  color: #1a1a2e;\n}\n\n.mobile-setting-label ion-icon {\n  font-size: 20px;\n  color: var(--user-accent);\n  background: rgba(var(--user-accent-rgb), 0.1);\n  padding: 6px;\n  border-radius: 8px;\n}\n\n@media (min-width: 1025px) {\n  .mobile-settings-section {\n    display: none;\n  }\n\n  .navbar-actions {\n    display: flex;\n  }\n}\n\n@media (max-width: 1024px) {\n  .navbar-actions {\n    display: none;\n  }\n\n  .mobile-settings-section {\n    display: block;\n  }\n}\n\n.header {\n  background: var(--user-accent-light);\n}\n\n.header.active {\n  background: var(--user-accent-light);\n  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);\n}\n\n.topbar {\n  background: linear-gradient(135deg, var(--accent-color, var(--user-accent)) 0%, var(--accent-color-dark, var(--user-accent-dark)) 100%);\n}\n\n[data-theme=\"dark\"] .header {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .header.active {\n  background: #1a1a2e;\n  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.4);\n}\n\n[data-theme=\"dark\"] .topbar {\n  background: linear-gradient(135deg, #2a2a4a 0%, #1a1a35 100%);\n}\n\n[data-theme=\"dark\"] .topbar__slide span,\n[data-theme=\"dark\"] .topbar__slide a {\n  color: rgba(255, 255, 255, 0.9);\n}\n\n[data-theme=\"dark\"] .topbar__dot {\n  background: rgba(255, 255, 255, 0.25);\n}\n\n[data-theme=\"dark\"] .topbar__dot.active {\n  background: rgba(255, 255, 255, 0.85);\n}\n\n.navbar-link .span {\n  color: #1a1a2e;\n}\n\n.nav-open-btn .line {\n  background: #1a1a2e;\n}\n\n.navbar-action-btn .action-icon {\n  color: #1a1a2e;\n}\n\n.navbar-action-btn.auth-btn {\n  background: #3d3a50;\n  color: #fff;\n}\n\n.navbar-action-btn.auth-btn:hover {\n  background: #2d2b3d;\n}\n\n[data-theme=\"dark\"] .navbar {\n  background: #2d2b3d;\n  border-right-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .navbar .close-btn {\n  color: rgba(255, 255, 255, 0.8);\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.15);\n}\n\n[data-theme=\"dark\"] .navbar .close-btn:is(:hover, :focus-visible) {\n  color: #fff;\n  background: rgba(255, 255, 255, 0.15);\n  border-color: rgba(255, 255, 255, 0.25);\n}\n\n[data-theme=\"dark\"] .navbar-link:is(:hover, :focus-visible) {\n  background: rgba(255, 255, 255, 0.08);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-link:is(:hover, :focus-visible) .span {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-link.active {\n  background: rgba(var(--user-accent-rgb), 0.15);\n  border-color: rgba(var(--user-accent-rgb), 0.4);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-link.active .span {\n  color: var(--user-accent-light);\n  font-weight: 600;\n}\n\n[data-theme=\"dark\"] .navbar-link {\n  color: rgba(255, 255, 255, 0.85);\n}\n\n[data-theme=\"dark\"] .navbar-link .span {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .nav-open-btn .line {\n  background: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-action-btn .action-icon {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-action-btn.auth-btn {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .navbar-action-btn.auth-btn:hover {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n}\n\n.card,\n.mb-card,\n.mb-sidebar,\n.mb-listPost,\n.resource-card,\n.community-card,\n.blog-card {\n  background: var(--bg-card);\n  color: var(--text-primary);\n  border: 1px solid var(--border-light);\n}\n\n[data-theme=\"dark\"] .mb-card {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-card__kicker {\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-card__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-card.is-active {\n  background: var(--bg-secondary);\n  border-color: var(--user-accent-light);\n  box-shadow: 0 14px 34px var(--user-accent-glow);\n}\n\n[data-theme=\"dark\"] .mb-card:hover {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-tcard {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-tcard__name {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-tcard__role {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-tcard__text {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .intro-section,\n[data-theme=\"dark\"] .mb-testimonials {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-actionbox,\n[data-theme=\"dark\"] .our-story-section {\n  background: var(--bg-secondary);\n}\n\n[data-theme=\"dark\"] .mb-actionbox__wrap {\n  background: transparent;\n}\n\n[data-theme=\"dark\"] .mb-actionbox__kicker {\n  color: #7eb3ff;\n}\n\n[data-theme=\"dark\"] .mb-actionbox__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-actionbox__desc {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .our-story-section h2,\n[data-theme=\"dark\"] .our-story-section .section-title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .our-story-section p {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-impact {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-impact__title,\n[data-theme=\"dark\"] .impact-title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-impact__desc,\n[data-theme=\"dark\"] .impact-desc {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-testimonials__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-testimonials__mask {\n  background: linear-gradient(to bottom,\n      rgba(18, 18, 32, 1) 0%,\n      rgba(18, 18, 32, 0) 14%,\n      rgba(18, 18, 32, 0) 86%,\n      rgba(18, 18, 32, 1) 100%);\n}\n\n[data-theme=\"dark\"] .mb-testimonials {\n  background: #121220;\n}\n\ninput,\ntextarea,\nselect {\n  background: var(--bg-input);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-footer::before {\n  background: url(\"data:image/svg+xml,%3Csvg viewBox='0 0 1200 60' preserveAspectRatio='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0,60 L0,20 Q300,0 600,30 T1200,20 L1200,60 Z' fill='%231a1a2e'/%3E%3C/svg%3E\") no-repeat;\n  background-size: cover;\n}\n\n[data-theme=\"dark\"] .mb-footer__top {\n  background: linear-gradient(135deg, #1a1a2e 0%, #16162a 100%);\n}\n\n[data-theme=\"dark\"] .mb-footer__top::before {\n  background: radial-gradient(circle at 20% 80%, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 50%),\n    radial-gradient(circle at 80% 20%, rgba(var(--user-accent-rgb), 0.06) 0%, transparent 40%);\n}\n\n[data-theme=\"dark\"] .mb-footer__text,\n[data-theme=\"dark\"] .mb-footer__link {\n  color: rgba(255, 255, 255, 0.75);\n}\n\n[data-theme=\"dark\"] .mb-footer__brand,\n[data-theme=\"dark\"] .mb-footer__heading,\n[data-theme=\"dark\"] .mb-footer__subheading {\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .mb-footer__brand::after {\n  background: linear-gradient(90deg, var(--user-accent-light), transparent);\n}\n\n[data-theme=\"dark\"] .mb-footer__bottom {\n  background: linear-gradient(135deg, #0f0f1a 0%, #0a0a12 100%);\n}\n\n[data-theme=\"dark\"] .mb-footer__copy,\n[data-theme=\"dark\"] .mb-footer__legal-link {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n[data-theme=\"dark\"] .mb-footer__tag {\n  background: rgba(var(--user-accent-rgb), 0.15);\n  border-color: rgba(var(--user-accent-rgb), 0.3);\n  color: rgba(255, 255, 255, 0.85);\n}\n\n[data-theme=\"dark\"] .mb-footer__tag:hover {\n  background: rgba(var(--user-accent-rgb), 0.25);\n  border-color: rgba(var(--user-accent-rgb), 0.5);\n}\n\n[data-theme=\"dark\"] .mb-footer__btn {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n  color: #fff;\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n[data-theme=\"dark\"] .mb-footer__btn:hover {\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n[data-theme=\"dark\"] .mb-footer__btn--ghost {\n  background: rgba(var(--user-accent-rgb), 0.1);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.3);\n  color: rgba(255, 255, 255, 0.9);\n  box-shadow: none;\n}\n\n[data-theme=\"dark\"] .mb-footer__btn--ghost:hover {\n  background: rgba(var(--user-accent-rgb), 0.2);\n  border-color: rgba(var(--user-accent-rgb), 0.5);\n}\n\n[data-theme=\"dark\"] .mb-footer__icon {\n  background: rgba(var(--user-accent-rgb), 0.15);\n  border-color: rgba(var(--user-accent-rgb), 0.3);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n[data-theme=\"dark\"] .mb-footer__icon:hover {\n  background: linear-gradient(135deg, #E1306C, #C13584);\n  border-color: transparent;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__top {\n  background: #000000;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__text,\n[data-high-contrast=\"true\"] .mb-footer__link {\n  color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__brand,\n[data-high-contrast=\"true\"] .mb-footer__heading,\n[data-high-contrast=\"true\"] .mb-footer__subheading {\n  color: #ffff00;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__bottom {\n  background: #111111;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__copy,\n[data-high-contrast=\"true\"] .mb-footer__legal-link {\n  color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__tag {\n  background: #000000;\n  border: 2px solid #ffffff;\n  color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__btn {\n  background: #ffff00;\n  color: #000000;\n  border: 2px solid #000000;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__btn--ghost {\n  background: transparent;\n  border: 2px solid #ffffff;\n  color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__icon {\n  background: #000000;\n  border: 2px solid #ffffff;\n  color: #ffffff;\n}\n\n.rl-sidebar,\n.resource-sidebar {\n  background: var(--bg-card);\n  color: var(--text-primary);\n}\n\n.rl-sidebar a,\n.resource-sidebar a {\n  color: var(--text-secondary);\n}\n\n.rl-sidebar a:hover,\n.resource-sidebar a:hover {\n  color: var(--accent-color);\n}\n\n.resource-item,\n.rl-item {\n  background: var(--bg-card);\n  border: 1px solid var(--border-light);\n}\n\n.resource-item h3,\n.rl-item h3 {\n  color: var(--text-primary);\n}\n\n.resource-item p,\n.rl-item p {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .rl {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .rl-title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-lead {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .rl-support {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .rl-search {\n  border-top-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .rl-searchInput {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-searchInput::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .rl-clearSearch {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .rl-clearSearch:hover {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-chip {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-chip span {\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-clearAll {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .rl-clearAll:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-filterTitle {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-filterBtn {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .rl-filterBtn:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-filterBtn.is-active {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-meta {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .rl-card {\n  border-left-color: var(--accent-color);\n  background: var(--bg-tertiary);\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .rl-card:hover {\n  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3), 0 4px 8px rgba(32, 104, 168, 0.1);\n}\n\n[data-theme=\"dark\"] .rl-cardSmall {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .rl-cardSmall::before {\n  background: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-cardTitle {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-card:hover .rl-cardTitle {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-cardBody {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .rl-tag {\n  background: linear-gradient(135deg, var(--accent-color) 0%, #3B8DD4 100%);\n  color: #111111;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .rl-visitBtn {\n  background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-tertiary) 100%);\n  color: var(--text-primary);\n  border: 1px solid var(--border-color);\n}\n\n[data-theme=\"dark\"] .rl-visitBtn:hover {\n  background: linear-gradient(135deg, var(--accent-color) 0%, #3B8DD4 100%);\n  color: #111111;\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-skeleton {\n  background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-card) 50%, var(--bg-tertiary) 75%);\n  background-size: 200% 100%;\n}\n\n[data-theme=\"dark\"] .rl-skeleton-card {\n  background: var(--bg-tertiary);\n  border-left-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .rl-searchInput:focus {\n  background-color: var(--bg-tertiary);\n  box-shadow: 0 0 0 4px rgba(32, 104, 168, 0.2), 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n.mb-commentBox {\n  margin-top: 12px;\n}\n\n.mb-commentInputRow {\n  display: flex;\n  gap: 8px;\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n.mb-commentInput {\n  flex: 1;\n  padding: 10px 14px;\n  border: 1px solid #ddd;\n  border-radius: 20px;\n  font-size: 14px;\n  background: #fff;\n  color: #111;\n  transition: border-color 0.2s;\n}\n\n.mb-commentInput:focus {\n  outline: none;\n  border-color: var(--accent-color, var(--user-accent));\n}\n\n.mb-commentInput::placeholder {\n  color: #888;\n}\n\n.mb-sendBtn {\n  background: var(--accent-color, var(--user-accent)) !important;\n  color: #fff !important;\n  padding: 10px 18px;\n  border-radius: 20px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 13px;\n  border: none;\n  transition: opacity 0.2s;\n}\n\n.mb-sendBtn:hover {\n  opacity: 0.85;\n}\n\n.mb-comments {\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.mb-comment {\n  display: flex;\n  gap: 10px;\n  padding: 10px 12px;\n  background: #f8f8f8;\n  border-radius: 12px;\n  font-size: 13px;\n  color: #333;\n  transition: background 0.2s;\n  position: relative;\n}\n\n.mb-comment:hover {\n  background: #f0f0f0;\n}\n\n.mb-commentLeft {\n  flex-shrink: 0;\n}\n\n.mb-commentAvatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: grid;\n  place-items: center;\n  font-size: 12px;\n  font-weight: 700;\n  overflow: hidden;\n  background: #e0e0e0;\n}\n\n.mb-commentAvatar img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 50%;\n}\n\n.mb-commentAvatar--team {\n  background: linear-gradient(135deg, var(--user-accent), var(--user-accent-grad-end));\n  color: #fff;\n  font-size: 10px;\n  font-weight: 800;\n  letter-spacing: 0.5px;\n}\n\n.mb-commentRight {\n  flex: 1;\n  min-width: 0;\n}\n\n.mb-commentHeader {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 8px;\n  margin-bottom: 2px;\n}\n\n.mb-commentMeta {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex-wrap: wrap;\n}\n\n.mb-commentAuthorLink {\n  color: var(--accent-color, var(--user-accent));\n  text-decoration: none;\n  font-weight: 600;\n  font-size: 13px;\n  transition: color 0.2s;\n}\n\n.mb-commentAuthorLink:hover {\n  color: var(--user-accent-grad-end);\n  text-decoration: underline;\n}\n\n.mb-commentAuthorName--team {\n  color: var(--accent-color, var(--user-accent));\n  font-weight: 700;\n  font-size: 13px;\n}\n\n.mb-commentTime {\n  color: #999;\n  font-size: 11px;\n  white-space: nowrap;\n}\n\n.mb-commentBody {\n  color: #444;\n  font-size: 13.5px;\n  line-height: 1.45;\n  word-break: break-word;\n}\n\n.mb-commentDeleteBtn {\n  background: none;\n  border: none;\n  color: #ccc;\n  cursor: pointer;\n  padding: 2px 4px;\n  border-radius: 6px;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  transition: color 0.2s, background 0.2s;\n  opacity: 0;\n}\n\n.mb-comment:hover .mb-commentDeleteBtn {\n  opacity: 1;\n}\n\n.mb-commentDeleteBtn:hover {\n  color: #ef4444;\n  background: rgba(239, 68, 68, 0.08);\n}\n\n.mb-levelBadge--sm {\n  font-size: 9px;\n  padding: 1px 6px;\n}\n\n.mb-teamBadge {\n  background: linear-gradient(135deg, var(--user-accent), var(--user-accent-grad-end));\n  color: #fff;\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 10px;\n  font-weight: 600;\n  letter-spacing: 0.3px;\n}\n\n.mb-communityMember {\n  color: var(--user-accent);\n  font-weight: 600;\n}\n\n.mb-commentUser {\n  font-weight: bold;\n  color: #111;\n  display: inline;\n  white-space: nowrap;\n}\n\n[data-theme=\"dark\"] .mb-community {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-panel {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-panelHeader {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n  border-bottom-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-panelBody {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-navLink {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-navLink:hover,\n[data-theme=\"dark\"] .mb-navLink.is-active {\n  color: var(--accent-color);\n  background: var(--bg-tertiary);\n}\n\n[data-theme=\"dark\"] .mb-feedHeader {\n  border-bottom-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-feedTitle {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-search {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-search::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-composer {\n  background: var(--bg-secondary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-input {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-input::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-avatar {\n  background: var(--accent-color);\n  color: #111111;\n}\n\n[data-theme=\"dark\"] .mb-post {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-postHead {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postName {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-postTime {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postBody {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-postFooter {\n  border-top-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-btn {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-btn:hover {\n  background: var(--accent-color);\n  color: #111111;\n}\n\n[data-theme=\"dark\"] .mb-btnPrimary {\n  background: var(--accent-color);\n  color: #111111;\n}\n\n[data-theme=\"dark\"] .mb-pill {\n  background: var(--accent-light);\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-commentInputRow {\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-commentInput {\n  background: #2d2d2d;\n  color: #e0e0e0;\n  border-color: #444;\n}\n\n[data-theme=\"dark\"] .mb-commentInput:focus {\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-commentInput::placeholder {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-sendBtn {\n  background: var(--accent-color) !important;\n}\n\n[data-theme=\"dark\"] .mb-comments {\n  background: transparent;\n}\n\n[data-theme=\"dark\"] .mb-comment {\n  background: #252525;\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-comment:hover {\n  background: #2d2d2d;\n}\n\n[data-theme=\"dark\"] .mb-commentBody {\n  color: #d0d0d0;\n}\n\n[data-theme=\"dark\"] .mb-commentTime {\n  color: #777;\n}\n\n[data-theme=\"dark\"] .mb-commentAuthorLink {\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-commentAuthorLink:hover {\n  color: #8ECAFF;\n}\n\n[data-theme=\"dark\"] .mb-commentAuthorName--team {\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-teamBadge {\n  background: linear-gradient(135deg, var(--user-accent), #8ECAFF);\n}\n\n[data-theme=\"dark\"] .mb-communityMember {\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-commentDeleteBtn {\n  color: #555;\n}\n\n[data-theme=\"dark\"] .mb-commentDeleteBtn:hover {\n  color: #ef4444;\n  background: rgba(239, 68, 68, 0.15);\n}\n\n[data-theme=\"dark\"] .mb-commentAvatar--team {\n  background: linear-gradient(135deg, var(--user-accent), #8ECAFF);\n}\n\n[data-theme=\"dark\"] .mb-right {\n  background: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .mb-heading {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-trendingItem {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-trendingItem:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-blogHero {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__badge {\n  background: var(--accent-color);\n  color: #111111;\n}\n\n[data-theme=\"dark\"] .mb-blogHero__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__lead {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__input {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__input::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__searchBtn {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__searchBtn:hover {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-chip {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-chip:hover {\n  background: var(--bg-secondary);\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-chip.is-active {\n  background: var(--accent-color);\n  color: #111111;\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-ticker {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-ticker__num {\n  background: var(--accent-color);\n  color: #111111;\n}\n\n[data-theme=\"dark\"] .mb-ticker__link {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-ticker__link:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-featureCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-featureCard__content {\n  background: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .mb-featureCard__title a {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-featureCard__title a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-featureCard__desc,\n[data-theme=\"dark\"] .mb-featureCard__subtext {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-metaRow {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-metaText {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-metaDot {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postHint {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-blog {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-blogGrid {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-resultsBar {\n  background: var(--bg-secondary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-resultsBar__count,\n[data-theme=\"dark\"] .mb-resultsBar__active {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-resultsBar__reset {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-resultsBar__reset:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-sectionHead {\n  border-bottom-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-sectionHead__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-sectionHead__more {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-postCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n  box-shadow: \n    0 2px 8px rgba(0, 0, 0, 0.2),\n    0 8px 24px rgba(0, 0, 0, 0.25);\n}\n\n[data-theme=\"dark\"] .mb-postCard:hover {\n  box-shadow: \n    0 4px 12px rgba(0, 0, 0, 0.3),\n    0 16px 48px rgba(0, 0, 0, 0.35),\n    0 24px 64px rgba(0, 0, 0, 0.25);\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-postCard::before {\n  background: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-postCard__body {\n  background: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .mb-postCard__title a {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-postCard__title a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-postCard__meta {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postCard__excerpt {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-postCard__subtext {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postCard__bookmark {\n  background: rgba(40, 40, 60, 0.9);\n}\n\n[data-theme=\"dark\"] .mb-postCard__bookmark svg {\n  stroke: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-postCard__bookmark:hover {\n  background: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-postCard__bookmark:hover svg {\n  stroke: #111;\n}\n\n[data-theme=\"dark\"] .mb-miniCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n  box-shadow: \n    0 2px 8px rgba(0, 0, 0, 0.2),\n    0 8px 24px rgba(0, 0, 0, 0.25);\n}\n\n[data-theme=\"dark\"] .mb-miniCard:hover {\n  box-shadow: \n    0 4px 12px rgba(0, 0, 0, 0.3),\n    0 16px 40px rgba(0, 0, 0, 0.35);\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-miniCard::before {\n  background: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__title a {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__title a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__meta {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__bookmark {\n  background: rgba(40, 40, 60, 0.9);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__bookmark svg {\n  stroke: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__bookmark:hover {\n  background: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__bookmark:hover svg {\n  stroke: #111;\n}\n\n[data-theme=\"dark\"] .mb-miniCard__pill {\n  background: var(--accent-color);\n  color: #111;\n}\n\n[data-theme=\"dark\"] .mb-compactCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2), 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-compactCard:hover {\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3), 0 4px 12px rgba(0, 0, 0, 0.15);\n  border-color: rgba(255, 255, 255, 0.12);\n}\n\n[data-theme=\"dark\"] .mb-compactCard__title a {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-compactCard__title a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-compactCard__meta {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-compactCard .mb-postHint {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-listPost {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-listPost__body {\n  background: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .mb-listPost__title a {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-listPost__title a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-listPost__excerpt {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-listPost__subtext {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postHint strong {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-linkArrow {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-linkArrow:hover {\n  color: #e0c94a;\n}\n\n[data-theme=\"dark\"] .mb-postCard .mb-linkArrow,\n[data-theme=\"dark\"] .mb-miniCard .mb-linkArrow {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-widget {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-loadMore__btn {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-loadMore__btn:hover {\n  background: var(--accent-color);\n  color: #111;\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-emptyState {\n  background: var(--bg-secondary);\n  color: var(--text-secondary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-articleCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-articleCard__content {\n  background: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .mb-articleCard__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-articleCard__title:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-articleCard__desc {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-articleCard__meta {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-listCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-listCard__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-listCard__desc {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-sidebar {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-sidebar h3,\n[data-theme=\"dark\"] .mb-sidebar__heading {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-sidebar a,\n[data-theme=\"dark\"] .mb-sidebar__link {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-sidebar a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-catBtn {\n  background: var(--bg-surface);\n  color: var(--text-secondary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-catBtn:hover {\n  background: var(--accent-color);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-tag {\n  background: var(--bg-surface);\n  color: var(--text-secondary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-tag:hover,\n[data-theme=\"dark\"] .mb-tag.active {\n  background: var(--accent-color);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-widget__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-widget__text {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-sideSearch__input {\n  background: var(--bg-input);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-sideSearch__input::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-trending {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-trending__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-trending__item {\n  color: var(--text-secondary);\n  border-bottom-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-trending__item:hover {\n  color: var(--accent-color);\n}\n\n.community-sidebar,\n.ch-sidebar {\n  background: var(--bg-card);\n  color: var(--text-primary);\n}\n\n.community-post,\n.ch-post {\n  background: var(--bg-card);\n  border: 1px solid var(--border-light);\n}\n\n.community-post h4,\n.ch-post h4 {\n  color: var(--text-primary);\n}\n\n.community-post p,\n.ch-post p {\n  color: var(--text-secondary);\n}\n\n.mb-listPost__content {\n  background: var(--bg-card);\n}\n\n.mb-listPost__title {\n  color: var(--text-primary);\n}\n\n.mb-listPost__meta {\n  color: var(--text-muted);\n}\n\n.testimonial-card,\n.review-card {\n  background: var(--bg-card);\n  color: var(--text-primary);\n}\n\n.testimonial-text,\n.review-text {\n  color: var(--text-secondary);\n}\n\n.intro-section,\n.text-section,\n.about-section {\n  background: var(--bg-secondary);\n}\n\n.intro-text h2,\n.text-section h2 {\n  color: var(--text-primary);\n}\n\n.intro-text p,\n.text-section p {\n  color: var(--text-secondary);\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  color: var(--text-primary);\n}\n\np {\n  color: var(--text-secondary);\n}\n\n.btn,\n.button {\n  background: var(--accent-color);\n  color: var(--text-inverse);\n}\n\n.btn:hover,\n.button:hover {\n  background: var(--accent-hover);\n}\n\n.tag,\n.badge,\n.category-tag {\n  background: var(--accent-light);\n  color: var(--accent-color);\n  border: 1px solid var(--accent-color);\n}\n\n.search-input,\n.search-box input {\n  background: var(--bg-input);\n  color: var(--text-primary);\n  border: 1px solid var(--border-color);\n}\n\n.navbar .text-center {\n  color: var(--text-primary);\n}\n\n.navbar .text-center .body-4,\n.navbar .text-center address {\n  color: var(--text-secondary);\n}\n\n.settings-dropdown .setting-info span,\n.settings-title,\n.setting-info {\n  color: var(--text-primary);\n}\n\n.mobile-setting-label {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mobile-settings-section {\n  background: #2d2d4a;\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .mobile-settings-toggle {\n  background: linear-gradient(135deg, #3d3d5c 0%, #2d2d4a 100%);\n}\n\n[data-theme=\"dark\"] .mobile-settings-toggle:hover {\n  background: linear-gradient(135deg, #4d4d6c 0%, #3d3d5c 100%);\n}\n\n[data-theme=\"dark\"] .mobile-settings-title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mobile-settings-list {\n  background: #2d2d4a;\n}\n\n[data-theme=\"dark\"] .mobile-setting-item {\n  background: #3d3d5c;\n}\n\n[data-theme=\"dark\"] .mobile-setting-item:hover {\n  background: #4d4d6c;\n}\n\n[data-theme=\"dark\"] .mobile-setting-label {\n  color: #e0e0e0;\n}\n\n.mobile-auth-section {\n  display: none;\n  flex-direction: column;\n  gap: 8px;\n  padding: 12px 16px 16px;\n  margin-top: auto;\n  background: linear-gradient(to bottom, #f5f1eb 0%, #efe9df 100%);\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  flex-shrink: 0;\n}\n\n.mobile-auth-section::before {\n  content: '';\n  display: block;\n  width: 40px;\n  height: 3px;\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 2px;\n  margin: 0 auto 8px;\n}\n\n[data-theme=\"dark\"] .mobile-auth-section {\n  background: linear-gradient(to bottom, #2d2d4a 0%, #252542 100%);\n  border-color: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .mobile-auth-section::before {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n.mobile-auth-signed-in,\n.mobile-auth-signed-out {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.mobile-auth-row {\n  display: flex;\n  gap: 8px;\n}\n\n.mobile-auth-row .mobile-auth-btn {\n  flex: 1;\n}\n\n.mobile-auth-btn {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  background: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  border-radius: 14px;\n  color: #1a1a2e;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  text-decoration: none;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);\n}\n\n.mobile-auth-btn__icon {\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(var(--user-accent-rgb), 0.1);\n  border-radius: 10px;\n  flex-shrink: 0;\n}\n\n.mobile-auth-btn__icon ion-icon {\n  font-size: 18px;\n  color: var(--user-accent);\n}\n\n.mobile-auth-btn__icon--danger {\n  background: rgba(220, 53, 69, 0.1);\n}\n\n.mobile-auth-btn__icon--danger ion-icon {\n  color: #dc3545;\n}\n\n.mobile-auth-btn__arrow {\n  margin-left: auto;\n  font-size: 16px;\n  opacity: 0.4;\n  transition: transform 0.2s ease;\n}\n\n.mobile-auth-btn:hover {\n  background: var(--user-accent-soft);\n  transform: translateX(2px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n}\n\n.mobile-auth-btn:hover .mobile-auth-btn__arrow {\n  transform: translateX(3px);\n  opacity: 0.7;\n}\n\n.mobile-auth-btn:active {\n  transform: scale(0.98);\n}\n\n[data-theme=\"dark\"] .mobile-auth-btn {\n  background: #3d3d5c;\n  border-color: rgba(255, 255, 255, 0.08);\n  color: #e0e0e0;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .mobile-auth-btn__icon {\n  background: rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .mobile-auth-btn:hover {\n  background: #4d4d6c;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n.mobile-signin-btn {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n  color: #fff !important;\n  border: none;\n  box-shadow: 0 4px 12px rgba(var(--user-accent-rgb), 0.3);\n  padding: 14px 20px;\n  font-size: 15px;\n  font-weight: 600;\n  justify-content: center;\n}\n\n.mobile-signin-btn ion-icon {\n  color: #fff;\n  font-size: 20px;\n}\n\n.mobile-signin-btn .mobile-auth-btn__arrow {\n  color: #fff;\n  opacity: 0.7;\n}\n\n.mobile-signin-btn:hover {\n  background: linear-gradient(135deg, var(--user-accent-dark) 0%, #8a6e4a 100%) !important;\n  box-shadow: 0 6px 16px rgba(var(--user-accent-rgb), 0.4);\n  transform: translateY(-1px);\n  color: #fff !important;\n}\n\n[data-theme=\"dark\"] .mobile-signin-btn {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n  color: #fff !important;\n}\n\n.mobile-logout-btn {\n  color: #dc2626;\n  background: #fef2f2;\n  border-color: rgba(220, 38, 38, 0.1);\n}\n\n.mobile-logout-btn:hover {\n  background: #fee2e2 !important;\n  border-color: rgba(220, 38, 38, 0.2);\n}\n\n[data-theme=\"dark\"] .mobile-logout-btn {\n  background: rgba(220, 38, 38, 0.1);\n  border-color: rgba(220, 38, 38, 0.2);\n  color: #f87171;\n}\n\n[data-theme=\"dark\"] .mobile-logout-btn ion-icon {\n  color: #f87171;\n}\n\n[data-theme=\"dark\"] .mobile-logout-btn:hover {\n  background: rgba(220, 38, 38, 0.15);\n}\n\n.mobile-inbox-btn .mobile-notif-badge {\n  position: static;\n  margin-left: auto;\n  background: var(--user-accent);\n  color: #fff;\n  font-size: 12px;\n  font-weight: 600;\n  padding: 2px 8px;\n  border-radius: 12px;\n  min-width: 20px;\n  text-align: center;\n}\n\n.mobile-profile-btn::after,\n.mobile-inbox-btn::after {\n  display: none;\n}\n\na:focus-visible,\nbutton:focus-visible,\ninput:focus-visible,\nselect:focus-visible,\ntextarea:focus-visible,\n[tabindex]:focus-visible {\n  outline: 3px solid var(--user-accent);\n  outline-offset: 2px;\n}\n\n.skip-link {\n  position: absolute;\n  top: -40px;\n  left: 0;\n  background: var(--accent-color);\n  color: #fff;\n  padding: 8px 16px;\n  z-index: 10000;\n  font-weight: 600;\n}\n\n.skip-link:focus {\n  top: 0;\n}\n\nhtml {\n  height: auto;\n  min-height: 100%;\n  overflow-x: hidden;\n  position: static;\n}\n\nbody:not(.loaded) {\n  overflow: hidden !important;\n  height: 100vh !important;\n  position: fixed !important;\n  width: 100% !important;\n  top: 0 !important;\n  left: 0 !important;\n}\n\nbody.loaded {\n  height: auto;\n  min-height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: static;\n}\n\nbody.loaded.nav-active {\n  overflow: hidden !important;\n}\n\n.scroll-progress {\n  position: fixed;\n  right: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 100;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  opacity: 0;\n  transition: opacity 0.4s ease;\n  pointer-events: none;\n}\n\n.scroll-progress.visible {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.scroll-progress__bar {\n  position: absolute;\n  width: 2px;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 2px;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.scroll-progress__bar::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: var(--progress, 0%);\n  background: var(--user-accent-light);\n  border-radius: 2px;\n  transition: height 0.15s ease-out;\n}\n\n.scroll-progress__sections {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  position: relative;\n  z-index: 1;\n}\n\n.scroll-progress__dot {\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: #fff;\n  border: 2px solid rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  position: relative;\n  transition: all 0.3s ease;\n  padding: 0;\n}\n\n.scroll-progress__dot:hover {\n  transform: scale(1.3);\n  border-color: var(--user-accent-light);\n}\n\n.scroll-progress__dot.active {\n  background: var(--user-accent-light);\n  border-color: var(--user-accent-light);\n  transform: scale(1.2);\n}\n\n.scroll-progress__label {\n  position: absolute;\n  right: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  white-space: nowrap;\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: #555;\n  background: #fff;\n  padding: 4px 10px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.2s ease, transform 0.2s ease;\n}\n\n.scroll-progress__dot:hover .scroll-progress__label {\n  opacity: 1;\n  transform: translateY(-50%) translateX(-4px);\n}\n\n@media (max-width: 768px) {\n  .scroll-progress {\n    display: none;\n  }\n}\n\n[data-theme=\"dark\"] .scroll-progress__bar {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .scroll-progress__dot {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n[data-theme=\"dark\"] .scroll-progress__dot:hover {\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .scroll-progress__dot.active {\n  background: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .scroll-progress__label {\n  background: #252542;\n  color: #fff;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n[data-high-contrast=\"true\"] .scroll-progress__bar {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n[data-high-contrast=\"true\"] .scroll-progress__bar::before {\n  background: #ffeb3b;\n}\n\n[data-high-contrast=\"true\"] .scroll-progress__dot {\n  background: #000;\n  border-color: #fff;\n  border-width: 3px;\n}\n\n[data-high-contrast=\"true\"] .scroll-progress__dot.active {\n  background: #ffeb3b;\n  border-color: #ffeb3b;\n}\n\n[data-high-contrast=\"true\"] .scroll-progress__label {\n  background: #000;\n  color: #ffeb3b;\n  border: 2px solid #fff;\n}\n\n.mb-readingProgress {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 4px;\n  background: rgba(0, 0, 0, 0.1);\n  z-index: 9999;\n}\n\n.mb-readingProgress__fill {\n  height: 100%;\n  width: 0%;\n  background: linear-gradient(90deg, #4a6fa5, var(--user-accent-light));\n  transition: width 0.1s ease-out;\n}\n\n[data-theme=\"dark\"] .mb-readingProgress {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.mb-ttsBtn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 14px;\n  background: transparent;\n  border: 1px solid #4a6fa5;\n  border-radius: 20px;\n  color: #4a6fa5;\n  font-size: 0.85rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.mb-ttsBtn:hover {\n  background: #4a6fa5;\n  color: #fff;\n}\n\n.mb-ttsBtn:focus-visible {\n  outline: 2px solid #4a6fa5;\n  outline-offset: 2px;\n}\n\n.mb-ttsBtn.is-playing {\n  background: var(--user-accent-light);\n  border-color: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n.mb-ttsBtn .tts-icon {\n  font-size: 1rem;\n}\n\n[data-theme=\"dark\"] .mb-ttsBtn {\n  border-color: var(--user-accent-light);\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-ttsBtn:hover {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n.mb-articleActions {\n  display: flex;\n  gap: 10px;\n  margin-top: 12px;\n  flex-wrap: wrap;\n}\n\n.mb-readingModeWrapper {\n  margin-top: 16px;\n}\n\n.mb-readingModeBtn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 18px;\n  background: #fff;\n  border: 2px solid #4a6fa5;\n  border-radius: 25px;\n  color: #4a6fa5;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n}\n\n.mb-readingModeBtn:hover {\n  background: #4a6fa5;\n  color: #fff;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(74, 111, 165, 0.25);\n}\n\n.mb-readingModeBtn.is-active {\n  background: #4a6fa5;\n  color: #fff;\n}\n\n.mb-readingModeBtn:focus-visible {\n  outline: 2px solid var(--user-accent-light);\n  outline-offset: 2px;\n}\n\n[data-theme=\"dark\"] .mb-readingModeBtn {\n  background: #252542;\n  border-color: var(--user-accent-light);\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-readingModeBtn:hover,\n[data-theme=\"dark\"] .mb-readingModeBtn.is-active {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\nbody.reading-mode {\n  --reading-bg: #faf9f6;\n  --reading-text: #2d2d2d;\n  --reading-max-width: 720px;\n}\n\nbody.reading-mode .mb-blogGrid {\n  max-width: var(--reading-max-width);\n  margin: 0 auto;\n}\n\nbody.reading-mode .mb-posts {\n  width: 100%;\n}\n\nbody.reading-mode .mb-sidebar {\n  display: none;\n}\n\nbody.reading-mode .mb-postCard,\nbody.reading-mode .mb-listPost,\nbody.reading-mode .mb-miniCard {\n  background: var(--reading-bg);\n  border-radius: 12px;\n  padding: 24px;\n  margin-bottom: 20px;\n}\n\nbody.reading-mode .mb-postCard__title,\nbody.reading-mode .mb-listPost__title,\nbody.reading-mode .mb-miniCard__title {\n  font-size: 1.4rem;\n  line-height: 1.5;\n}\n\nbody.reading-mode .mb-postCard__excerpt,\nbody.reading-mode .mb-listPost__excerpt {\n  font-size: 1.1rem;\n  line-height: 1.8;\n  color: var(--reading-text);\n}\n\nbody.reading-mode .mb-2up {\n  grid-template-columns: 1fr;\n}\n\n[data-theme=\"dark\"] body.reading-mode,\nbody.reading-mode[data-theme=\"dark\"] {\n  --reading-bg: #1e1e3a;\n  --reading-text: #e0e0e0;\n}\n\n.mb-postCard.is-hovered,\n.mb-postCard.is-focused,\n.mb-listPost.is-hovered,\n.mb-listPost.is-focused,\n.mb-miniCard.is-hovered,\n.mb-miniCard.is-focused {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);\n}\n\n.mb-postCard:focus-visible,\n.mb-listPost:focus-visible,\n.mb-miniCard:focus-visible {\n  outline: 3px solid #4a6fa5;\n  outline-offset: 4px;\n}\n\n[data-theme=\"dark\"] .mb-postCard:focus-visible,\n[data-theme=\"dark\"] .mb-listPost:focus-visible,\n[data-theme=\"dark\"] .mb-miniCard:focus-visible {\n  outline-color: var(--user-accent-light);\n}\n\n[data-high-contrast=\"true\"] .mb-readingModeBtn {\n  border-width: 3px;\n}\n\n[data-high-contrast=\"true\"] body.reading-mode .mb-postCard,\n[data-high-contrast=\"true\"] body.reading-mode .mb-listPost {\n  border: 2px solid #000;\n}\n\n.mb-tts-badge {\n  background: rgba(74, 111, 165, 0.15);\n  color: #4a6fa5;\n  padding: 2px 8px;\n  border-radius: 10px;\n  font-size: 0.8rem;\n}\n\n.mb-tts-badge-overlay {\n  position: absolute;\n  bottom: 12px;\n  left: 12px;\n  background: rgba(0, 0, 0, 0.75);\n  color: #fff;\n  padding: 6px 12px;\n  border-radius: 20px;\n  font-size: 0.85rem;\n  z-index: 2;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  animation: audio-pulse 2.5s ease-in-out infinite;\n  transition: transform 0.25s ease, background 0.25s ease;\n}\n\n.mb-tts-badge-overlay:hover {\n  transform: scale(1.08);\n  background: var(--accent-color, #3B8DD4);\n}\n\n@keyframes audio-pulse {\n  0%, 100% {\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  }\n  50% {\n    box-shadow: 0 2px 12px rgba(201, 162, 39, 0.4), 0 0 20px rgba(201, 162, 39, 0.2);\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .mb-tts-badge-overlay {\n    animation: none;\n  }\n  \n  .mb-tts-badge-overlay:hover {\n    transform: none;\n  }\n  \n  .mb-postCard,\n  .mb-miniCard,\n  .mb-listPost {\n    transition: none;\n  }\n  \n  .mb-postCard:hover,\n  .mb-miniCard:hover,\n  .mb-listPost:hover {\n    transform: none;\n  }\n  \n  .mb-postCard::before,\n  .mb-miniCard::before {\n    transition: none;\n  }\n  \n  .mb-postCard:hover .mb-postCard__img,\n  .mb-miniCard:hover .mb-miniCard__img,\n  .mb-listPost:hover .mb-listPost__img {\n    transform: none;\n  }\n  \n  .mb-postCard__pill,\n  .mb-miniCard__pill {\n    transition: none;\n  }\n  \n  .mb-postCard:hover .mb-postCard__pill,\n  .mb-miniCard:hover .mb-miniCard__pill {\n    transform: none;\n  }\n  \n  .mb-new-badge {\n    animation: none;\n  }\n  \n  .mb-linkArrow:hover {\n    transform: none;\n  }\n  \n  .mb-linkArrow::after {\n    transition: none;\n  }\n}\n\n.mb-postCard__imgWrap,\n.mb-listPost__imgWrap {\n  position: relative;\n}\n\n[data-theme=\"dark\"] .mb-tts-badge {\n  background: rgba(214, 189, 159, 0.2);\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-tts-badge-overlay {\n  background: rgba(214, 189, 159, 0.9);\n  color: #1a1a2e;\n}\n\n[data-high-contrast=\"true\"] .mb-readingProgress {\n  background: #000;\n  height: 6px;\n}\n\n[data-high-contrast=\"true\"] .mb-readingProgress__fill {\n  background: #ffeb3b;\n}\n\n[data-high-contrast=\"true\"] .mb-ttsBtn {\n  border-width: 3px;\n  border-color: #000;\n  color: #000;\n  font-weight: 700;\n}\n\n[data-high-contrast=\"true\"] .mb-ttsBtn:hover,\n[data-high-contrast=\"true\"] .mb-ttsBtn.is-playing {\n  background: #ffeb3b;\n  border-color: #000;\n  color: #000;\n}\n\n[data-high-contrast=\"true\"] .mb-readingModeBtn {\n  border-width: 3px;\n  border-color: #000;\n  color: #000;\n  font-weight: 700;\n}\n\n[data-high-contrast=\"true\"] .mb-readingModeBtn:hover,\n[data-high-contrast=\"true\"] .mb-readingModeBtn.is-active {\n  background: #ffeb3b;\n  border-color: #000;\n  color: #000;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .mb-readingProgress__fill {\n    transition: none;\n  }\n\n  .mb-postCard,\n  .mb-listPost,\n  .mb-miniCard {\n    transition: none;\n  }\n}\n\n.navbar-action-btn {\n  position: relative;\n}\n\n.notif-badge {\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  min-width: 18px;\n  height: 18px;\n  padding: 0 5px;\n  background: #dc3545;\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.65rem;\n  font-weight: 700;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px rgba(220, 53, 69, 0.4);\n  animation: notif-bounce 0.5s ease;\n  z-index: 10;\n  cursor: pointer;\n}\n\n@keyframes notif-bounce {\n\n  0%,\n  100% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(1.2);\n  }\n}\n\n.crisis-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 18px;\n  background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  font-weight: 600;\n  border-radius: 25px;\n  text-decoration: none;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);\n  animation: crisis-pulse 2s infinite;\n  white-space: nowrap;\n  flex-shrink: 0;\n  max-width: none;\n  overflow: visible;\n}\n\n.crisis-btn ion-icon {\n  font-size: 1.1rem;\n}\n\n.crisis-btn:hover {\n  background: linear-gradient(135deg, #c82333 0%, #a71d2a 100%);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(220, 53, 69, 0.5);\n}\n\n@keyframes crisis-pulse {\n\n  0%,\n  100% {\n    box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);\n  }\n\n  50% {\n    box-shadow: 0 4px 25px rgba(220, 53, 69, 0.6);\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .crisis-btn {\n    animation: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .crisis-btn {\n    padding: 10px;\n    border-radius: 50%;\n  }\n\n  .crisis-btn span {\n    display: none;\n  }\n\n  .crisis-btn ion-icon {\n    font-size: 1.3rem;\n  }\n}\n\n.navbar-search {\n  position: relative;\n  display: flex;\n  align-items: center;\n  z-index: 102;\n}\n\n.navbar-search__input {\n  position: absolute;\n  right: 0;\n  width: 0;\n  padding: 0;\n  border: none;\n  outline: none;\n  border-radius: 20px;\n  background: transparent;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.875rem;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  opacity: 0;\n  overflow: hidden;\n}\n\n.navbar-search.is-open .navbar-search__input {\n  width: 200px;\n  padding: 8px 40px 8px 15px;\n  background: #f5f5f5;\n  opacity: 1;\n}\n\n.navbar-search__btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  color: #1a1a2e;\n  border-radius: 8px;\n  transition: all 0.3s ease;\n}\n\n.navbar-search.is-open .navbar-search__btn {\n  position: absolute;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 36px;\n  height: 36px;\n}\n\n.navbar-search__btn:hover {\n  background: rgba(var(--user-accent-rgb), 0.1);\n  color: var(--user-accent);\n}\n\n.navbar-search__btn ion-icon {\n  font-size: 1.4rem;\n}\n\n\n.navbar-search__results {\n  position: absolute;\n  top: calc(100% + 10px);\n  right: 0;\n  width: 300px;\n  max-height: 400px;\n  overflow-y: auto;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  display: none;\n  z-index: 1001;\n}\n\n.navbar-search__results.is-visible {\n  display: block;\n}\n\n.navbar-search__item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 15px;\n  text-decoration: none;\n  color: #1a1a2e;\n  transition: background 0.2s ease;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.navbar-search__item:last-child {\n  border-bottom: none;\n}\n\n.navbar-search__item:hover {\n  background: var(--user-accent-soft);\n}\n\n.navbar-search__item-icon {\n  width: 36px;\n  height: 36px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 1rem;\n}\n\n.navbar-search__item-content {\n  flex: 1;\n}\n\n.navbar-search__item-title {\n  font-weight: 600;\n  font-size: 0.875rem;\n  margin-bottom: 2px;\n}\n\n.navbar-search__item-type {\n  font-size: 0.75rem;\n  color: #6b6b8a;\n}\n\n.navbar-search__empty {\n  padding: 20px;\n  text-align: center;\n  color: #6b6b8a;\n  font-size: 0.875rem;\n}\n\n[data-theme=\"dark\"] .navbar-search.is-open .navbar-search__input {\n  background: #252542;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-search__btn {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-search__btn:hover {\n  background: rgba(var(--user-accent-rgb), 0.2);\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .navbar-search__results {\n  background: #1a1a2e;\n  border: 1px solid #3a3a5a;\n}\n\n[data-theme=\"dark\"] .navbar-search__item {\n  color: #fff;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .navbar-search__item:hover {\n  background: #252542;\n}\n\n@media (max-width: 768px) {\n  .navbar-search {\n    display: none;\n  }\n}\n\n.navbar-settings-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: transparent;\n  color: #1a1a2e;\n  cursor: pointer;\n  border-radius: 8px;\n  transition: all 0.3s ease;\n}\n\n.navbar-settings-btn:hover {\n  background: rgba(var(--user-accent-rgb), 0.1);\n  color: var(--user-accent);\n}\n\n.navbar-settings-btn ion-icon {\n  font-size: 1.4rem;\n}\n\n[data-theme=\"dark\"] .navbar-settings-btn {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-settings-btn:hover {\n  background: rgba(var(--user-accent-rgb), 0.2);\n  color: var(--user-accent);\n}\n\n.navbar-item {\n  position: relative;\n}\n\n.navbar-dropdown {\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%) translateY(10px);\n  min-width: 220px;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  padding: 10px 0;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 1000;\n}\n\n.navbar-item:hover .navbar-dropdown {\n  opacity: 1;\n  visibility: visible;\n  transform: translateX(-50%) translateY(0);\n}\n\n.navbar-dropdown__item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 20px;\n  color: #1a1a2e;\n  text-decoration: none;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n}\n\n.navbar-dropdown__item:hover {\n  background: var(--user-accent-soft);\n  color: var(--user-accent);\n}\n\n.navbar-dropdown__item ion-icon {\n  font-size: 1.1rem;\n  color: var(--user-accent);\n}\n\n.navbar-dropdown__divider {\n  height: 1px;\n  background: var(--user-accent-light);\n  margin: 8px 0;\n}\n\n[data-theme=\"dark\"] .navbar-dropdown {\n  background: #1a1a2e;\n  border: 1px solid #3a3a5a;\n}\n\n[data-theme=\"dark\"] .navbar-dropdown__item {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-dropdown__item:hover {\n  background: #252542;\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .navbar-dropdown__divider {\n  background: #3a3a5a;\n}\n\n@media (max-width: 1024px) {\n  .navbar-dropdown {\n    display: none !important;\n  }\n}\n\n.mb-moodcheck {\n  background: linear-gradient(135deg, var(--user-accent-soft) 0%, #fff 100%);\n  padding: 60px 20px;\n  text-align: center;\n}\n\n.mb-moodcheck__wrap {\n  max-width: 800px;\n  margin: 0 auto;\n}\n\n.mb-moodcheck__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.75rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 10px;\n}\n\n.mb-moodcheck__subtitle {\n  font-size: 1rem;\n  color: #6b6b8a;\n  margin-bottom: 30px;\n}\n\n.mb-moodcheck__options {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  flex-wrap: wrap;\n}\n\n.mb-moodcheck__btn {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  padding: 20px 25px;\n  background: #fff;\n  border: 2px solid var(--user-accent-light);\n  border-radius: 16px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  min-width: 100px;\n}\n\n.mb-moodcheck__btn:hover {\n  border-color: var(--user-accent-light);\n  transform: translateY(-4px);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);\n}\n\n.mb-moodcheck__btn.is-selected {\n  border-color: var(--user-accent);\n  background: linear-gradient(135deg, var(--user-accent-soft) 0%, var(--user-accent-soft) 100%);\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.mb-moodcheck__emoji {\n  font-size: 2.5rem;\n}\n\n.mb-moodcheck__label {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #1a1a2e;\n}\n\n.mb-moodcheck__result {\n  margin-top: 30px;\n  padding: 20px;\n  background: #fff;\n  border-radius: 12px;\n  border: 1px solid var(--user-accent-light);\n  animation: fadeInUp 0.4s ease;\n}\n\n.mb-moodcheck__message {\n  font-size: 1rem;\n  color: #4a4a68;\n  margin-bottom: 15px;\n}\n\n.mb-moodcheck__link {\n  display: inline-block;\n  padding: 12px 28px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  font-weight: 600;\n  border-radius: 30px;\n  text-decoration: none;\n  transition: all 0.3s ease;\n}\n\n.mb-moodcheck__link:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n[data-theme=\"dark\"] .mb-moodcheck {\n  background: linear-gradient(135deg, #1a1a2e 0%, #252542 100%);\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__subtitle {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__btn {\n  background: #252542;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__btn:hover {\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__btn.is-selected {\n  background: #2a2a4a;\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__label {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__result {\n  background: #252542;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__message {\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.mb-sources {\n  background: #fff;\n  padding: 60px 20px;\n  text-align: center;\n}\n\n.mb-sources__wrap {\n  max-width: 1000px;\n  margin: 0 auto;\n}\n\n.mb-sources__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 8px;\n  text-transform: uppercase;\n  letter-spacing: 2px;\n}\n\n.mb-sources__subtitle {\n  font-size: 1rem;\n  color: #6b6b8a;\n  margin-bottom: 40px;\n}\n\n.mb-sources__grid {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 30px;\n  flex-wrap: wrap;\n}\n\n.mb-sources__item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  padding: 20px;\n  text-decoration: none;\n  transition: all 0.3s ease;\n  border-radius: 12px;\n}\n\n.mb-sources__item:hover {\n  transform: translateY(-4px);\n  background: var(--user-accent-soft);\n}\n\n.mb-sources__logo {\n  width: 70px;\n  height: 70px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.mb-sources__abbr {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  font-weight: 700;\n  color: #fff;\n  letter-spacing: 1px;\n}\n\n.mb-sources__name {\n  font-size: 0.75rem;\n  color: #6b6b8a;\n  max-width: 120px;\n  line-height: 1.3;\n}\n\n[data-theme=\"dark\"] .mb-sources {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .mb-sources__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-sources__subtitle {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .mb-sources__item:hover {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .mb-sources__name {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n@media (max-width: 768px) {\n  .mb-moodcheck__options {\n    gap: 10px;\n  }\n\n  .mb-moodcheck__btn {\n    padding: 15px 18px;\n    min-width: 80px;\n  }\n\n  .mb-moodcheck__emoji {\n    font-size: 2rem;\n  }\n\n  .mb-sources__grid {\n    gap: 20px;\n  }\n\n  .mb-sources__logo {\n    width: 60px;\n    height: 60px;\n  }\n}\n\n.mb-mention-dropdown {\n  background: var(--bg-primary, #fff);\n  border: 1px solid var(--border-color, #e0e0e0);\n  border-radius: 8px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  max-height: 200px;\n  overflow-y: auto;\n  z-index: 1000;\n}\n\n.mb-mention-item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 12px;\n  cursor: pointer;\n  transition: background 0.15s ease;\n}\n\n.mb-mention-item:hover,\n.mb-mention-item.active {\n  background: var(--bg-tertiary, #f5f5f5);\n}\n\n.mb-mention-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.mb-mention-name {\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: var(--text-primary, #333);\n}\n\n[data-theme=\"dark\"] .mb-mention-dropdown {\n  background: #2d2b3d;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-mention-item:hover,\n[data-theme=\"dark\"] .mb-mention-item.active {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-mention-name {\n  color: #fff;\n}\n\n.mb-inbox-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  padding-top: 80px;\n  z-index: 1000;\n}\n\n.mb-inbox-modal[hidden] {\n  display: none !important;\n}\n\n.mb-inbox-content {\n  background: var(--bg-primary, #fff);\n  border-radius: 12px;\n  width: 90%;\n  max-width: 480px;\n  max-height: 70vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\n}\n\n.mb-inbox-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color, #e0e0e0);\n}\n\n.mb-inbox-title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--text-primary, #333);\n}\n\n.mb-inbox-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.mb-inbox-mark-read {\n  background: none;\n  border: none;\n  color: var(--user-accent);\n  font-size: 0.85rem;\n  cursor: pointer;\n  padding: 4px 8px;\n}\n\n.mb-inbox-close {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: var(--text-secondary, #666);\n  line-height: 1;\n}\n\n.mb-inbox-body {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px 0;\n}\n\n.mb-inbox-loading,\n.mb-inbox-empty {\n  padding: 40px 20px;\n  text-align: center;\n  color: var(--text-secondary, #666);\n}\n\n.mb-notif-item {\n  display: flex;\n  gap: 12px;\n  padding: 12px 20px;\n  cursor: pointer;\n  transition: background 0.15s ease;\n  border-bottom: 1px solid var(--border-color, #f0f0f0);\n}\n\n.mb-notif-item:hover {\n  background: var(--bg-tertiary, #f8f8f8);\n}\n\n.mb-notif-item.mb-notif-unread {\n  background: rgba(var(--user-accent-rgb), 0.08);\n}\n\n.mb-notif-icon {\n  font-size: 1.5rem;\n  flex-shrink: 0;\n}\n\n.mb-notif-content {\n  flex: 1;\n  min-width: 0;\n}\n\n.mb-notif-text {\n  font-size: 0.9rem;\n  color: var(--text-primary, #333);\n  margin-bottom: 4px;\n}\n\n.mb-notif-preview {\n  font-size: 0.8rem;\n  color: var(--text-secondary, #666);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-bottom: 4px;\n}\n\n.mb-notif-time {\n  font-size: 0.75rem;\n  color: var(--text-tertiary, #999);\n}\n\n[data-theme=\"dark\"] .mb-inbox-content {\n  background: #2d2b3d;\n}\n\n[data-theme=\"dark\"] .mb-inbox-header {\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-inbox-title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-inbox-close {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .mb-notif-item {\n  border-color: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .mb-notif-item:hover {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .mb-notif-text {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-notif-preview {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.mb-mention {\n  color: var(--user-accent);\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.mb-mention:hover {\n  text-decoration: underline;\n}\n\n@media (max-width: 1024px) {\n\n  .navbar-item.has-submenu .submenu-chevron {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: auto;\n    font-size: 1.1rem;\n    opacity: 0.5;\n    transition: transform 0.25s ease, opacity 0.25s ease;\n  }\n\n  .navbar-item.has-submenu .navbar-link:hover .submenu-chevron {\n    opacity: 0.8;\n  }\n\n  \n  .navbar-submenu-panel {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: var(--user-accent-soft);\n    z-index: 100;\n    transform: translateX(100%);\n    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    display: flex;\n    flex-direction: column;\n    overflow-y: auto;\n  }\n\n  .navbar-submenu-panel.active {\n    transform: translateX(0);\n  }\n\n  [data-theme=\"dark\"] .navbar-submenu-panel {\n    background: #2d2b3d;\n  }\n\n  .submenu-header {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 20px;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n  }\n\n  [data-theme=\"dark\"] .submenu-header {\n    border-bottom-color: rgba(255, 255, 255, 0.1);\n  }\n\n  .submenu-back-btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 40px;\n    height: 40px;\n    border-radius: 10px;\n    background: rgba(0, 0, 0, 0.05);\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    cursor: pointer;\n    transition: all 0.2s ease;\n    color: #1a1a2e;\n  }\n\n  .submenu-back-btn:hover {\n    background: rgba(0, 0, 0, 0.1);\n  }\n\n  [data-theme=\"dark\"] .submenu-back-btn {\n    background: rgba(255, 255, 255, 0.08);\n    border-color: rgba(255, 255, 255, 0.15);\n    color: #fff;\n  }\n\n  [data-theme=\"dark\"] .submenu-back-btn:hover {\n    background: rgba(255, 255, 255, 0.12);\n  }\n\n  .submenu-back-btn ion-icon {\n    font-size: 1.3rem;\n  }\n\n  .submenu-title {\n    font-size: 1.1rem;\n    font-weight: 600;\n    color: #1a1a2e;\n    margin: 0;\n  }\n\n  [data-theme=\"dark\"] .submenu-title {\n    color: #fff;\n  }\n\n  .submenu-items {\n    padding: 15px;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .submenu-item {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 14px 16px;\n    border-radius: 12px;\n    background: rgba(0, 0, 0, 0.04);\n    border: 1px solid rgba(0, 0, 0, 0.06);\n    color: #1a1a2e;\n    text-decoration: none;\n    font-size: 0.95rem;\n    transition: all 0.2s ease;\n    min-height: 48px;\n  }\n\n  .submenu-item:hover {\n    background: rgba(0, 0, 0, 0.08);\n    border-color: rgba(0, 0, 0, 0.1);\n  }\n\n  [data-theme=\"dark\"] .submenu-item {\n    background: rgba(255, 255, 255, 0.06);\n    border-color: rgba(255, 255, 255, 0.1);\n    color: #fff;\n  }\n\n  [data-theme=\"dark\"] .submenu-item:hover {\n    background: rgba(255, 255, 255, 0.1);\n    border-color: rgba(255, 255, 255, 0.15);\n  }\n\n  .submenu-item ion-icon {\n    font-size: 1.2rem;\n    color: var(--user-accent);\n    flex-shrink: 0;\n  }\n\n  [data-theme=\"dark\"] .submenu-item ion-icon {\n    color: var(--user-accent-grad-end);\n  }\n\n  .submenu-divider {\n    height: 1px;\n    background: rgba(0, 0, 0, 0.08);\n    margin: 8px 0;\n  }\n\n  [data-theme=\"dark\"] .submenu-divider {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  \n  .navbar.submenu-open .navbar-scroll-content,\n  .navbar.submenu-open .mobile-settings-section {\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.2s ease;\n  }\n\n  \n  .submenu-chevron {\n    display: flex !important;\n  }\n}\n\n@media (min-width: 1025px) {\n  .submenu-chevron {\n    display: none !important;\n  }\n\n  .navbar-submenu-panel {\n    display: none !important;\n  }\n}\n\n@keyframes hapticTap {\n  0% { transform: scale(1); }\n  40% { transform: scale(0.95); }\n  100% { transform: scale(1); }\n}\n\n.haptic-tap {\n  animation: hapticTap 0.15s ease-out;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .haptic-tap {\n    animation: none;\n  }\n}\n","path":null,"size_bytes":228277,"size_tokens":null},"terms/legal.css":{"content":"/* === LEGAL PAGE === */\n.legal-page {\n  padding: 140px 0 60px;\n  min-height: 100vh;\n  background: var(--bg-primary, #f9f7f4);\n}\n\n[data-theme=\"dark\"] .legal-page {\n  background: var(--bg-primary, #1a1a2e);\n}\n\n.legal-page .container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n/* === HEADER === */\n.legal-header {\n  text-align: center;\n  margin-bottom: 40px;\n  padding-bottom: 30px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .legal-header {\n  border-bottom-color: rgba(255, 255, 255, 0.1);\n}\n\n.legal-header h1 {\n  font-size: 2.5rem;\n  font-weight: 700;\n  color: var(--text-primary, #2d2d2d);\n  margin-bottom: 10px;\n}\n\n[data-theme=\"dark\"] .legal-header h1 {\n  color: #fff;\n}\n\n.legal-updated {\n  font-size: 0.95rem;\n  color: var(--text-secondary, #666);\n}\n\n[data-theme=\"dark\"] .legal-updated {\n  color: #aaa;\n}\n\n/* === CONTENT === */\n.legal-content {\n  background: #fff;\n  border-radius: 16px;\n  padding: 40px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n}\n\n[data-theme=\"dark\"] .legal-content {\n  background: #2d2b3d;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n}\n\n/* === SECTIONS === */\n.legal-section {\n  margin-bottom: 32px;\n  padding-bottom: 32px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n}\n\n[data-theme=\"dark\"] .legal-section {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.legal-section:last-child {\n  margin-bottom: 0;\n  padding-bottom: 0;\n  border-bottom: none;\n}\n\n.legal-section h2 {\n  font-size: 1.4rem;\n  font-weight: 600;\n  color: var(--text-primary, #2d2d2d);\n  margin-bottom: 16px;\n}\n\n[data-theme=\"dark\"] .legal-section h2 {\n  color: #fff;\n}\n\n.legal-section h3 {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--text-primary, #2d2d2d);\n  margin: 20px 0 12px;\n}\n\n[data-theme=\"dark\"] .legal-section h3 {\n  color: #e0e0e0;\n}\n\n.legal-section p {\n  font-size: 1rem;\n  line-height: 1.8;\n  color: var(--text-secondary, #555);\n  margin-bottom: 16px;\n}\n\n[data-theme=\"dark\"] .legal-section p {\n  color: #ccc;\n}\n\n.legal-section p:last-child {\n  margin-bottom: 0;\n}\n\n.legal-section ul {\n  margin: 16px 0;\n  padding-left: 24px;\n}\n\n.legal-section li {\n  font-size: 1rem;\n  line-height: 1.8;\n  color: var(--text-secondary, #555);\n  margin-bottom: 8px;\n  position: relative;\n}\n\n[data-theme=\"dark\"] .legal-section li {\n  color: #ccc;\n}\n\n.legal-section li::marker {\n  color: var(--accent-color, #d6a756);\n}\n\n.legal-section a {\n  color: var(--accent-color, #d6a756);\n  text-decoration: none;\n  font-weight: 500;\n  transition: color 0.2s ease;\n}\n\n.legal-section a:hover {\n  color: var(--user-accent-dark);\n  text-decoration: underline;\n}\n\n[data-theme=\"dark\"] .legal-section a {\n  color: var(--user-accent-grad-end);\n}\n\n[data-theme=\"dark\"] .legal-section a:hover {\n  color: #f0d090;\n}\n\n/* === HIGHLIGHT BOX === */\n.legal-highlight {\n  background: linear-gradient(135deg, #fef3c7, #fde68a);\n  border-radius: 12px;\n  padding: 20px 24px;\n  margin: 20px 0;\n  border-left: 4px solid #f59e0b;\n}\n\n[data-theme=\"dark\"] .legal-highlight {\n  background: linear-gradient(135deg, #3d3a50, #4d4660);\n  border-left-color: var(--user-accent);\n}\n\n.legal-highlight strong {\n  color: #92400e;\n  display: block;\n  margin-bottom: 8px;\n}\n\n[data-theme=\"dark\"] .legal-highlight strong {\n  color: var(--user-accent-grad-end);\n}\n\n.legal-highlight ul {\n  margin: 10px 0 0;\n  padding-left: 20px;\n}\n\n.legal-highlight li {\n  color: #78350f;\n}\n\n[data-theme=\"dark\"] .legal-highlight li {\n  color: #ccc;\n}\n\n/* === WARNING BOX === */\n.legal-warning {\n  background: linear-gradient(135deg, #fee2e2, #fecaca);\n  border-radius: 12px;\n  padding: 20px 24px;\n  margin: 20px 0;\n  border-left: 4px solid #ef4444;\n}\n\n[data-theme=\"dark\"] .legal-warning {\n  background: linear-gradient(135deg, #4a2c2c, #5a3535);\n  border-left-color: #f87171;\n}\n\n.legal-warning strong {\n  color: #991b1b;\n}\n\n[data-theme=\"dark\"] .legal-warning strong {\n  color: #fca5a5;\n}\n\n.legal-warning a {\n  color: #dc2626;\n}\n\n[data-theme=\"dark\"] .legal-warning a {\n  color: #fca5a5;\n}\n\n/* === HIGHLIGHT SECTION === */\n.legal-highlight-section {\n  background: linear-gradient(135deg, #dbeafe, #bfdbfe);\n  border-radius: 12px;\n  padding: 24px;\n  margin-bottom: 32px;\n  border: none;\n}\n\n[data-theme=\"dark\"] .legal-highlight-section {\n  background: linear-gradient(135deg, #1e3a5f, #2d4a6f);\n}\n\n.legal-badge {\n  display: inline-block;\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  color: #fff;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 6px 14px;\n  border-radius: 20px;\n  margin-bottom: 16px;\n}\n\n[data-theme=\"dark\"] .legal-badge {\n  background: linear-gradient(135deg, #60a5fa, #3b82f6);\n}\n\n.legal-highlight-section h2 {\n  color: #1e40af;\n}\n\n[data-theme=\"dark\"] .legal-highlight-section h2 {\n  color: #93c5fd;\n}\n\n.legal-highlight-section p {\n  color: #1e3a8a;\n}\n\n[data-theme=\"dark\"] .legal-highlight-section p {\n  color: #bfdbfe;\n}\n\n/* === NAVIGATION === */\n.legal-nav {\n  display: flex;\n  justify-content: center;\n  gap: 24px;\n  margin-top: 40px;\n  padding-top: 30px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  flex-wrap: wrap;\n}\n\n[data-theme=\"dark\"] .legal-nav {\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n.legal-nav-link {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 12px 24px;\n  background: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 30px;\n  color: var(--text-primary, #2d2d2d);\n  font-weight: 500;\n  text-decoration: none;\n  transition: all 0.2s ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\n}\n\n.legal-nav-link:hover {\n  background: var(--accent-color, #d6a756);\n  color: #fff;\n  border-color: var(--accent-color, #d6a756);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(214, 167, 86, 0.3);\n}\n\n[data-theme=\"dark\"] .legal-nav-link {\n  background: #2d2b3d;\n  border-color: rgba(255, 255, 255, 0.1);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .legal-nav-link:hover {\n  background: var(--user-accent);\n  border-color: var(--user-accent);\n  color: #1a1a2e;\n}\n\n/* === RESPONSIVE === */\n@media (max-width: 768px) {\n  .legal-page {\n    padding: 120px 0 40px;\n  }\n  \n  .legal-header h1 {\n    font-size: 2rem;\n  }\n  \n  .legal-content {\n    padding: 24px;\n    border-radius: 12px;\n  }\n  \n  .legal-section h2 {\n    font-size: 1.25rem;\n  }\n  \n  .legal-nav {\n    flex-direction: column;\n    align-items: center;\n    gap: 12px;\n  }\n  \n  .legal-nav-link {\n    width: 100%;\n    max-width: 280px;\n    justify-content: center;\n  }\n}\n","path":null,"size_bytes":6449,"size_tokens":null},"css/support.css":{"content":"/* === SUPPORT MAIN === */\n.support-main {\n  padding-top: 100px;\n}\n\n/* === SCROLL ANIMATIONS === */\n.animate-section {\n  opacity: 0;\n  transform: translateY(40px);\n  transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), \n              transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.animate-section.is-visible {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.animate-stagger > * {\n  opacity: 0;\n  transform: translateY(30px);\n  transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1),\n              transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.animate-stagger.is-visible > *:nth-child(1) { transition-delay: 0.1s; }\n.animate-stagger.is-visible > *:nth-child(2) { transition-delay: 0.2s; }\n.animate-stagger.is-visible > *:nth-child(3) { transition-delay: 0.3s; }\n.animate-stagger.is-visible > *:nth-child(4) { transition-delay: 0.4s; }\n.animate-stagger.is-visible > *:nth-child(5) { transition-delay: 0.5s; }\n.animate-stagger.is-visible > *:nth-child(6) { transition-delay: 0.6s; }\n.animate-stagger.is-visible > *:nth-child(7) { transition-delay: 0.7s; }\n.animate-stagger.is-visible > *:nth-child(8) { transition-delay: 0.8s; }\n.animate-stagger.is-visible > *:nth-child(9) { transition-delay: 0.9s; }\n.animate-stagger.is-visible > *:nth-child(10) { transition-delay: 1.0s; }\n\n.animate-stagger.is-visible > * {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.animate-slide-left {\n  opacity: 0;\n  transform: translateX(-50px);\n  transition: opacity 0.7s cubic-bezier(0.4, 0, 0.2, 1),\n              transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.animate-slide-left.is-visible {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.animate-slide-right {\n  opacity: 0;\n  transform: translateX(50px);\n  transition: opacity 0.7s cubic-bezier(0.4, 0, 0.2, 1),\n              transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.animate-slide-right.is-visible {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.animate-scale {\n  opacity: 0;\n  transform: scale(0.9);\n  transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1),\n              transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.animate-scale.is-visible {\n  opacity: 1;\n  transform: scale(1);\n}\n\n/* === HERO SECTION === */\n.support-hero {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.04) 0%, rgba(var(--user-accent-rgb), 0.08) 50%, rgba(var(--user-accent-rgb), 0.06) 100%);\n  padding: 100px 20px 80px;\n  text-align: center;\n  position: relative;\n  overflow: hidden;\n}\n\n.support-hero::before {\n  content: \"\";\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background: radial-gradient(circle at 30% 70%, rgba(var(--user-accent-rgb), 0.15) 0%, transparent 50%),\n              radial-gradient(circle at 70% 30%, rgba(var(--user-accent-rgb), 0.1) 0%, transparent 50%),\n              radial-gradient(circle at 50% 50%, rgba(var(--user-accent-rgb), 0.06) 0%, transparent 60%);\n  pointer-events: none;\n  animation: hero-gradient-pulse 8s ease-in-out infinite alternate;\n}\n\n.support-hero::after {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: \n    radial-gradient(ellipse 600px 300px at 20% 80%, rgba(var(--user-accent-rgb), 0.12) 0%, transparent 70%),\n    radial-gradient(ellipse 500px 400px at 80% 20%, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 70%);\n  pointer-events: none;\n}\n\n@keyframes hero-gradient-pulse {\n  0% { opacity: 0.8; transform: scale(1) rotate(0deg); }\n  100% { opacity: 1; transform: scale(1.05) rotate(2deg); }\n}\n\n.support-hero__decorative {\n  position: absolute;\n  pointer-events: none;\n  z-index: 0;\n}\n\n.support-hero__decorative--1 {\n  top: 15%;\n  left: 10%;\n  width: 80px;\n  height: 80px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, transparent 70%);\n  border-radius: 50%;\n  animation: float-element 6s ease-in-out infinite;\n}\n\n.support-hero__decorative--2 {\n  bottom: 20%;\n  right: 15%;\n  width: 60px;\n  height: 60px;\n  background: linear-gradient(45deg, rgba(var(--user-accent-rgb), 0.12) 0%, transparent 70%);\n  border-radius: 50%;\n  animation: float-element 8s ease-in-out infinite reverse;\n}\n\n.support-hero__decorative--3 {\n  top: 40%;\n  right: 8%;\n  width: 40px;\n  height: 40px;\n  background: linear-gradient(180deg, rgba(var(--user-accent-rgb), 0.12) 0%, transparent 70%);\n  border-radius: 50%;\n  animation: float-element 5s ease-in-out infinite 1s;\n}\n\n@keyframes float-element {\n  0%, 100% { transform: translateY(0) rotate(0deg); }\n  50% { transform: translateY(-15px) rotate(5deg); }\n}\n\n.support-hero__content {\n  max-width: 700px;\n  margin: 0 auto;\n  position: relative;\n  z-index: 1;\n}\n\n.support-hero__badge {\n  display: inline-block;\n  padding: 8px 20px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, rgba(var(--user-accent-rgb), 0.1) 100%);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.3);\n  border-radius: 50px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent-dark);\n  letter-spacing: 0.5px;\n  text-transform: uppercase;\n  margin-bottom: 20px;\n  opacity: 0;\n  transform: translateY(20px);\n  animation: support-hero-fadein 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.support-hero__title {\n  font-size: 3.2rem;\n  font-weight: 800;\n  color: #2d2d2d;\n  margin-bottom: 20px;\n  line-height: 1.15;\n  letter-spacing: -0.5px;\n  background: linear-gradient(135deg, #2d2d2d 0%, #4a4a4a 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  opacity: 0;\n  transform: translateY(20px);\n  animation: support-hero-fadein 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.1s forwards;\n}\n\n.support-hero__subtitle {\n  font-size: 1.25rem;\n  color: #666;\n  margin-bottom: 36px;\n  line-height: 1.7;\n  max-width: 550px;\n  margin-left: auto;\n  margin-right: auto;\n  opacity: 0;\n  transform: translateY(20px);\n  animation: support-hero-fadein 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.2s forwards;\n}\n\n@keyframes support-hero-fadein {\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.support-hero__search {\n  position: relative;\n  max-width: 500px;\n  margin: 0 auto;\n  opacity: 0;\n  transform: translateY(20px);\n  animation: support-hero-fadein 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.3s forwards;\n}\n\n.support-hero__search .search-icon {\n  position: absolute;\n  left: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 1.3rem;\n  color: #888;\n  transition: color 0.3s ease;\n}\n\n.support-hero__input:focus ~ .search-icon,\n.support-hero__search:focus-within .search-icon {\n  color: var(--user-accent-light);\n}\n\n.support-hero__input {\n  width: 100%;\n  padding: 18px 20px 18px 54px;\n  border: 2px solid #ddd;\n  border-radius: 50px;\n  font-size: 1rem;\n  background: #fff;\n  transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, transform 0.3s ease;\n}\n\n.support-hero__input:hover {\n  border-color: #ccc;\n}\n\n.support-hero__input:focus {\n  outline: none;\n  border-color: var(--user-accent);\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb), 0.15), 0 8px 30px rgba(var(--user-accent-rgb), 0.25);\n  background-color: rgba(var(--user-accent-rgb), 0.03);\n  transform: scale(1.01);\n}\n\n.support-hero__input::placeholder {\n  color: #999;\n  transition: color 0.3s ease;\n}\n\n.support-hero__input:focus::placeholder {\n  color: #bbb;\n}\n\n/* === CRISIS SECTION === */\n.crisis-section {\n  background: #fff;\n  padding: 60px 20px;\n}\n\n.crisis-banner {\n  display: flex;\n  align-items: center;\n  gap: 24px;\n  background: linear-gradient(135deg, #fff5f5 0%, #fff 100%);\n  border: 2px solid #e57373;\n  border-radius: 16px;\n  padding: 30px;\n  margin-bottom: 40px;\n  flex-wrap: wrap;\n}\n\n.crisis-banner__icon {\n  width: 60px;\n  height: 60px;\n  background: #e57373;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.crisis-banner__icon ion-icon {\n  font-size: 28px;\n  color: #fff;\n}\n\n.crisis-banner__content {\n  flex: 1;\n  min-width: 200px;\n}\n\n.crisis-banner__title {\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #c62828;\n  margin-bottom: 6px;\n}\n\n.crisis-banner__text {\n  color: #555;\n  font-size: 1rem;\n}\n\n.crisis-banner__actions {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.crisis-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 14px 28px;\n  border-radius: 50px;\n  font-weight: 600;\n  font-size: 1rem;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  text-decoration: none;\n  position: relative;\n  overflow: hidden;\n}\n\n.crisis-btn ion-icon {\n  transition: transform 0.3s ease;\n}\n\n.crisis-btn:hover ion-icon {\n  transform: scale(1.1);\n}\n\n.crisis-btn--primary {\n  background: linear-gradient(135deg, #c62828 0%, #d32f2f 100%);\n  color: #fff;\n  box-shadow: 0 4px 15px rgba(198, 40, 40, 0.25);\n  animation: crisis-pulse 2s ease-in-out infinite;\n}\n\n@keyframes crisis-pulse {\n  0%, 100% {\n    box-shadow: 0 4px 15px rgba(198, 40, 40, 0.25);\n  }\n  50% {\n    box-shadow: 0 4px 25px rgba(198, 40, 40, 0.5), 0 0 40px rgba(198, 40, 40, 0.3);\n  }\n}\n\n.crisis-btn--secondary {\n  background: #fff;\n  color: #c62828;\n  border: 2px solid #c62828;\n}\n\n.crisis-btn--primary:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 25px rgba(198, 40, 40, 0.4);\n  background: linear-gradient(135deg, #d32f2f 0%, #c62828 100%);\n}\n\n.crisis-btn--secondary:hover {\n  transform: translateY(-3px);\n  background: #fff5f5;\n  box-shadow: 0 8px 25px rgba(198, 40, 40, 0.2);\n}\n\n.crisis-btn:active {\n  transform: translateY(-1px);\n}\n\n.crisis-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  gap: 24px;\n}\n\n.crisis-card {\n  background: #fff;\n  border: 1px solid #e0e0e0;\n  border-radius: 16px;\n  padding: 28px;\n  text-align: center;\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), \n              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n              border-color 0.3s ease;\n  opacity: 0;\n  transform: translateY(30px);\n  animation: support-card-enter 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.crisis-card:nth-child(1) { animation-delay: 0.1s; }\n.crisis-card:nth-child(2) { animation-delay: 0.2s; }\n.crisis-card:nth-child(3) { animation-delay: 0.3s; }\n\n@keyframes support-card-enter {\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.crisis-card:hover {\n  transform: translateY(-8px) scale(1.02);\n  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15), 0 0 30px rgba(var(--user-accent-rgb), 0.1);\n  border-color: var(--user-accent-light);\n}\n\n.crisis-card:hover .crisis-card__icon {\n  transform: scale(1.1);\n  background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);\n}\n\n.crisis-card:hover .crisis-card__icon ion-icon {\n  color: var(--user-accent-light);\n}\n\n.crisis-card__icon {\n  width: 60px;\n  height: 60px;\n  background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 18px;\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1),\n              background 0.4s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n}\n\n.crisis-card__icon ion-icon {\n  font-size: 28px;\n  color: #666;\n  transition: color 0.3s ease;\n}\n\n.crisis-card__title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  margin-bottom: 8px;\n}\n\n.crisis-card__text {\n  font-size: 0.95rem;\n  color: #666;\n  margin-bottom: 16px;\n  line-height: 1.5;\n}\n\n.crisis-card__link {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  color: var(--user-accent-light);\n  font-weight: 600;\n  text-decoration: none;\n  transition: color 0.3s ease, gap 0.3s ease;\n}\n\n.crisis-card__link::after {\n  content: \"\\2192\";\n  font-size: 1rem;\n  transition: transform 0.3s ease;\n}\n\n.crisis-card__link:hover {\n  color: var(--user-accent);\n  gap: 10px;\n}\n\n.crisis-card__link:hover::after {\n  transform: translateX(4px);\n}\n\n/* === SECTION HEADER === */\n.section-header {\n  text-align: center;\n  margin-bottom: 48px;\n}\n\n.section-title {\n  font-size: 2.2rem;\n  font-weight: 800;\n  color: #2d2d2d;\n  margin-bottom: 14px;\n  background: linear-gradient(135deg, #2d2d2d 0%, #555 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n  letter-spacing: -0.5px;\n}\n\n.section-subtitle {\n  font-size: 1.15rem;\n  color: #666;\n  max-width: 600px;\n  margin: 0 auto;\n  line-height: 1.6;\n}\n\n/* === SECTION DIVIDER === */\n.section-divider {\n  position: relative;\n  height: 80px;\n  overflow: hidden;\n  background: transparent;\n}\n\n.section-divider::before {\n  content: \"\";\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 100%;\n  background: rgba(var(--user-accent-rgb), 0.04);\n  -webkit-mask-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 100'%3E%3Cpath fill='white' d='M0,50 C360,100 720,0 1080,50 C1260,75 1350,75 1440,50 L1440,100 L0,100 Z'/%3E%3C/svg%3E\");\n  mask-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 100'%3E%3Cpath fill='white' d='M0,50 C360,100 720,0 1080,50 C1260,75 1350,75 1440,50 L1440,100 L0,100 Z'/%3E%3C/svg%3E\");\n  -webkit-mask-size: cover;\n  mask-size: cover;\n  -webkit-mask-position: bottom;\n  mask-position: bottom;\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  animation: wave-motion 6s ease-in-out infinite alternate;\n}\n\n@keyframes wave-motion {\n  0% { transform: translateX(0); }\n  100% { transform: translateX(-20px); }\n}\n\n.section-divider--reverse::before {\n  transform: scaleY(-1);\n  background: #fff;\n  -webkit-mask-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 100'%3E%3Cpath fill='white' d='M0,50 C360,100 720,0 1080,50 C1260,75 1350,75 1440,50 L1440,100 L0,100 Z'/%3E%3C/svg%3E\");\n  mask-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 100'%3E%3Cpath fill='white' d='M0,50 C360,100 720,0 1080,50 C1260,75 1350,75 1440,50 L1440,100 L0,100 Z'/%3E%3C/svg%3E\");\n  -webkit-mask-size: cover;\n  mask-size: cover;\n  -webkit-mask-position: bottom;\n  mask-position: bottom;\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n}\n\n/* === QUICK LINKS === */\n.quicklinks-section {\n  background: rgba(var(--user-accent-rgb), 0.04);\n  padding: 80px 20px;\n}\n\n.quicklinks-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 24px;\n  max-width: 1000px;\n  margin: 0 auto;\n}\n\n.quicklink-card {\n  background: #fff;\n  border-radius: 16px;\n  padding: 32px 24px;\n  text-align: center;\n  text-decoration: none;\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), \n              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n              border-color 0.3s ease;\n  border: 1px solid rgba(var(--user-accent-rgb), 0.15);\n  opacity: 0;\n  transform: translateY(30px);\n  animation: support-card-enter 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.quicklink-card:nth-child(1) { animation-delay: 0.05s; }\n.quicklink-card:nth-child(2) { animation-delay: 0.1s; }\n.quicklink-card:nth-child(3) { animation-delay: 0.15s; }\n.quicklink-card:nth-child(4) { animation-delay: 0.2s; }\n.quicklink-card:nth-child(5) { animation-delay: 0.25s; }\n.quicklink-card:nth-child(6) { animation-delay: 0.3s; }\n\n.quicklink-card:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12);\n  border-color: var(--user-accent-light);\n}\n\n.quicklink-card__icon {\n  width: 64px;\n  height: 64px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 20px;\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s ease;\n}\n\n.quicklink-card:hover .quicklink-card__icon {\n  transform: scale(1.1) rotate(5deg);\n  box-shadow: 0 8px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n.quicklink-card__icon ion-icon {\n  font-size: 28px;\n  color: #fff;\n  transition: transform 0.3s ease;\n}\n\n.quicklink-card:hover .quicklink-card__icon ion-icon {\n  transform: scale(1.1);\n}\n\n.quicklink-card__title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  margin-bottom: 8px;\n}\n\n.quicklink-card__text {\n  font-size: 0.9rem;\n  color: #666;\n  line-height: 1.5;\n}\n\n/* === HELPLINES === */\n.helplines-section {\n  background: #fff;\n  padding: 80px 20px;\n}\n\n/* === HELPLINES CONTROLS === */\n.helplines-controls {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 20px;\n  margin-bottom: 24px;\n  flex-wrap: wrap;\n}\n\n.helplines-view-toggle {\n  display: flex;\n  gap: 4px;\n  background: #f5f5f5;\n  padding: 4px;\n  border-radius: 10px;\n}\n\n.view-toggle-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: transparent;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: #666;\n}\n\n.view-toggle-btn:hover {\n  background: rgba(0, 0, 0, 0.05);\n  color: #333;\n}\n\n.view-toggle-btn.active {\n  background: #fff;\n  color: var(--user-accent, #af916d);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.view-toggle-btn ion-icon {\n  font-size: 1.25rem;\n}\n\n/* === LIST VIEW === */\n.helplines-grid.list-view {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.helplines-grid.list-view .helpline-card {\n  display: grid;\n  grid-template-columns: 44px 1fr auto;\n  grid-template-rows: auto;\n  align-items: center;\n  padding: 16px 20px;\n  gap: 0 14px;\n  border-radius: 12px;\n}\n\n.helplines-grid.list-view .helpline-card__icon-wrapper {\n  width: 44px;\n  height: 44px;\n  flex-shrink: 0;\n  margin-bottom: 0;\n  grid-column: 1;\n  grid-row: 1 / -1;\n  align-self: center;\n}\n\n.helplines-grid.list-view .helpline-card__icon-wrapper ion-icon {\n  font-size: 1.3rem;\n}\n\n.helplines-grid.list-view .helpline-card__header {\n  grid-column: 2;\n  grid-row: 1;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.helplines-grid.list-view .helpline-card__title {\n  font-size: 0.95rem;\n  margin-bottom: 0;\n}\n\n.helplines-grid.list-view .helpline-card__badge {\n  padding: 2px 8px;\n  font-size: 0.65rem;\n}\n\n.helplines-grid.list-view .helpline-card__text {\n  grid-column: 2;\n  grid-row: 2;\n  font-size: 0.8rem;\n  margin: 2px 0 0;\n  line-height: 1.4;\n  color: #777;\n}\n\n.helplines-grid.list-view .helpline-card__wait {\n  grid-column: 2;\n  grid-row: 3;\n  margin: 2px 0 0;\n}\n\n.helplines-grid.list-view .helpline-card__contacts {\n  grid-column: 3;\n  grid-row: 1 / -1;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n}\n\n.helplines-grid.list-view .helpline-contact {\n  padding: 6px 12px;\n  font-size: 0.8rem;\n}\n\n.helplines-grid.list-view .helpline-card__tty {\n  grid-column: 2;\n  grid-row: 4;\n  margin: 2px 0 0;\n  font-size: 0.7rem;\n}\n\n@media (max-width: 768px) {\n  .helplines-grid.list-view .helpline-card {\n    grid-template-columns: 38px 1fr;\n    grid-template-rows: auto auto auto;\n    padding: 14px 16px;\n    gap: 0 10px;\n  }\n\n  .helplines-grid.list-view .helpline-card__icon-wrapper {\n    width: 38px;\n    height: 38px;\n    grid-row: 1;\n  }\n\n  .helplines-grid.list-view .helpline-card__header {\n    grid-column: 2;\n    grid-row: 1;\n  }\n\n  .helplines-grid.list-view .helpline-card__title {\n    font-size: 0.9rem;\n  }\n\n  .helplines-grid.list-view .helpline-card__text {\n    grid-column: 1 / -1;\n    grid-row: 2;\n    margin: 6px 0 0;\n  }\n\n  .helplines-grid.list-view .helpline-card__wait {\n    grid-column: 1 / -1;\n    grid-row: 3;\n    margin: 4px 0 0;\n  }\n\n  .helplines-grid.list-view .helpline-card__contacts {\n    grid-column: 1 / -1;\n    grid-row: 4;\n    justify-content: flex-start;\n    margin-top: 8px;\n  }\n\n  .helplines-grid.list-view .helpline-contact {\n    padding: 8px 14px;\n    font-size: 0.82rem;\n  }\n\n  .helplines-grid.list-view .helpline-card__tty {\n    grid-column: 1 / -1;\n    grid-row: 5;\n    margin: 4px 0 0;\n  }\n}\n\nbody.dark-mode .helplines-view-toggle {\n  background: #2a2a2a;\n}\n\nbody.dark-mode .view-toggle-btn {\n  color: #999;\n}\n\nbody.dark-mode .view-toggle-btn:hover {\n  background: rgba(255, 255, 255, 0.05);\n  color: #ccc;\n}\n\nbody.dark-mode .view-toggle-btn.active {\n  background: #333;\n  color: var(--user-accent, #9b7ed9);\n}\n\n@media (max-width: 768px) {\n  .helplines-controls {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .helplines-view-toggle {\n    align-self: flex-end;\n  }\n  \n  \n  .helplines-grid.mobile-grouped {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  }\n  \n  .mobile-category-group {\n    border: 1px solid #e0e0e0;\n    border-radius: 16px;\n    overflow: hidden;\n    background: #fff;\n  }\n  \n  .mobile-category-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 16px 20px;\n    background: linear-gradient(135deg, #f8f8f8 0%, #fff 100%);\n    cursor: pointer;\n    border: none;\n    width: 100%;\n    text-align: left;\n    transition: background 0.3s ease;\n  }\n  \n  .mobile-category-header:hover {\n    background: linear-gradient(135deg, #f0f0f0 0%, #f8f8f8 100%);\n  }\n  \n  .mobile-category-header__left {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n  }\n  \n  .mobile-category-header__icon {\n    width: 36px;\n    height: 36px;\n    border-radius: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #fff;\n  }\n  \n  .mobile-category-header__icon--crisis { background: linear-gradient(135deg, #dc3545, #c82333); }\n  .mobile-category-header__icon--lgbtq { background: linear-gradient(135deg, #9b7ed9, #7f5ac8); }\n  .mobile-category-header__icon--youth { background: linear-gradient(135deg, #f0a500, #d9940a); }\n  .mobile-category-header__icon--veterans { background: linear-gradient(135deg, #5a6e82, #4a5d6e); }\n  .mobile-category-header__icon--specialized { background: linear-gradient(135deg, #20c997, #17a085); }\n  .mobile-category-header__icon--general { background: linear-gradient(135deg, #4a90d9, #357abd); }\n  \n  .mobile-category-header__title {\n    font-size: 1rem;\n    font-weight: 600;\n    color: #333;\n    margin: 0;\n  }\n  \n  .mobile-category-header__count {\n    font-size: 0.8rem;\n    color: #666;\n    background: #f0f0f0;\n    padding: 2px 8px;\n    border-radius: 10px;\n    margin-left: 8px;\n  }\n  \n  .mobile-category-header__chevron {\n    font-size: 1.25rem;\n    color: #666;\n    transition: transform 0.3s ease;\n  }\n  \n  .mobile-category-group.expanded .mobile-category-header__chevron {\n    transform: rotate(180deg);\n  }\n  \n  .mobile-category-content {\n    display: none;\n    padding: 12px;\n    background: #fafafa;\n    border-top: 1px solid #e8e8e8;\n  }\n  \n  .mobile-category-group.expanded .mobile-category-content {\n    display: block;\n  }\n  \n  .mobile-category-content .helpline-card {\n    margin-bottom: 12px;\n    box-shadow: none;\n    border: 1px solid #e0e0e0;\n  }\n  \n  .mobile-category-content .helpline-card:last-child {\n    margin-bottom: 0;\n  }\n  \n  \n  body.dark-mode .mobile-category-group {\n    background: #1a1a1a;\n    border-color: #333;\n  }\n  \n  body.dark-mode .mobile-category-header {\n    background: linear-gradient(135deg, #222 0%, #1a1a1a 100%);\n  }\n  \n  body.dark-mode .mobile-category-header:hover {\n    background: linear-gradient(135deg, #2a2a2a 0%, #222 100%);\n  }\n  \n  body.dark-mode .mobile-category-header__title {\n    color: #e0e0e0;\n  }\n  \n  body.dark-mode .mobile-category-header__count {\n    background: #333;\n    color: #aaa;\n  }\n  \n  body.dark-mode .mobile-category-content {\n    background: #151515;\n    border-top-color: #333;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .helplines-grid {\n    transition: none;\n  }\n  \n  .view-toggle-btn {\n    transition: none;\n  }\n  \n  .mobile-category-header {\n    transition: none;\n  }\n  \n  .mobile-category-header__chevron {\n    transition: none;\n  }\n  \n  .mobile-category-group.expanded .mobile-category-header__chevron {\n    transform: rotate(180deg);\n  }\n}\n\n.helplines-expect {\n  display: flex;\n  align-items: flex-start;\n  gap: 20px;\n  background: linear-gradient(135deg, #f0f7ff 0%, #e8f4fd 100%);\n  border: 1px solid #d0e5f7;\n  border-radius: 16px;\n  padding: 24px 28px;\n  margin-bottom: 32px;\n  animation: support-card-enter 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.helplines-expect__icon {\n  width: 48px;\n  height: 48px;\n  background: linear-gradient(135deg, #4a90d9 0%, #357abd 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.helplines-expect__icon ion-icon {\n  font-size: 24px;\n  color: #fff;\n}\n\n.helplines-expect__content h3 {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d5a87;\n  margin-bottom: 8px;\n}\n\n.helplines-expect__content p {\n  font-size: 0.95rem;\n  color: #4a7ba7;\n  line-height: 1.6;\n  margin: 0;\n}\n\n.helplines-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 20px;\n  transition: opacity 0.15s ease;\n}\n\n@media (max-width: 768px) {\n  .helplines-grid {\n    grid-template-columns: 1fr;\n    gap: 16px;\n  }\n  \n  .helpline-card {\n    grid-template-columns: 36px 1fr;\n  }\n}\n\n.helpline-card {\n  background: #fff;\n  border: 1px solid #e0e0e0;\n  border-radius: 16px;\n  padding: 20px;\n  position: relative;\n  overflow: hidden;\n  display: grid;\n  grid-template-columns: 42px 1fr;\n  grid-template-rows: auto auto auto auto auto;\n  gap: 0 12px;\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), \n              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n              border-color 0.3s ease;\n  opacity: 0;\n  transform: translateY(30px);\n  animation: support-card-enter 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.helpline-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, var(--user-accent-light), var(--user-accent));\n  transition: height 0.3s ease;\n}\n\n.helpline-card--crisis::before {\n  background: linear-gradient(90deg, #e53935, #c62828);\n}\n\n.helpline-card--lgbtq::before,\n.helpline-card--trans::before {\n  background: linear-gradient(90deg, #9c27b0, #7b1fa2, #e91e63);\n}\n\n.helpline-card--youth::before {\n  background: linear-gradient(90deg, #ff9800, #f57c00);\n}\n\n.helpline-card--veterans::before {\n  background: linear-gradient(90deg, #1565c0, #0d47a1);\n}\n\n.helpline-card--specialized::before {\n  background: linear-gradient(90deg, #00897b, #00695c);\n}\n\n.helpline-card--general::before {\n  background: linear-gradient(90deg, #2196f3, #1976d2);\n}\n\n.helpline-card:nth-child(1) { animation-delay: 0.05s; }\n.helpline-card:nth-child(2) { animation-delay: 0.1s; }\n.helpline-card:nth-child(3) { animation-delay: 0.15s; }\n.helpline-card:nth-child(4) { animation-delay: 0.2s; }\n.helpline-card:nth-child(5) { animation-delay: 0.25s; }\n.helpline-card:nth-child(6) { animation-delay: 0.3s; }\n.helpline-card:nth-child(7) { animation-delay: 0.35s; }\n.helpline-card:nth-child(8) { animation-delay: 0.4s; }\n.helpline-card:nth-child(9) { animation-delay: 0.45s; }\n.helpline-card:nth-child(10) { animation-delay: 0.5s; }\n.helpline-card:nth-child(11) { animation-delay: 0.55s; }\n.helpline-card:nth-child(12) { animation-delay: 0.6s; }\n\n.helpline-card:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12);\n  border-color: transparent;\n}\n\n.helpline-card:hover::before {\n  height: 6px;\n}\n\n.helpline-card--crisis:hover {\n  box-shadow: 0 20px 50px rgba(229, 57, 53, 0.15);\n}\n\n.helpline-card--lgbtq:hover,\n.helpline-card--trans:hover {\n  box-shadow: 0 20px 50px rgba(156, 39, 176, 0.15);\n}\n\n.helpline-card--youth:hover {\n  box-shadow: 0 20px 50px rgba(255, 152, 0, 0.15);\n}\n\n.helpline-card--veterans:hover {\n  box-shadow: 0 20px 50px rgba(21, 101, 192, 0.15);\n}\n\n.helpline-card--specialized:hover {\n  box-shadow: 0 20px 50px rgba(0, 137, 123, 0.15);\n}\n\n.helpline-card--general:hover {\n  box-shadow: 0 20px 50px rgba(33, 150, 243, 0.15);\n}\n\n.helpline-card__icon-wrapper {\n  width: 42px;\n  height: 42px;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  grid-column: 1;\n  grid-row: 1;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.04) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n}\n\n.helpline-card--crisis .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);\n}\n\n.helpline-card--crisis .helpline-card__icon-wrapper ion-icon {\n  color: #e53935;\n}\n\n.helpline-card--lgbtq .helpline-card__icon-wrapper,\n.helpline-card--trans .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);\n}\n\n.helpline-card--lgbtq .helpline-card__icon-wrapper ion-icon,\n.helpline-card--trans .helpline-card__icon-wrapper ion-icon {\n  color: #9c27b0;\n}\n\n.helpline-card--youth .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);\n}\n\n.helpline-card--youth .helpline-card__icon-wrapper ion-icon {\n  color: #ff9800;\n}\n\n.helpline-card--veterans .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\n}\n\n.helpline-card--veterans .helpline-card__icon-wrapper ion-icon {\n  color: #1565c0;\n}\n\n.helpline-card--specialized .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);\n}\n\n.helpline-card--specialized .helpline-card__icon-wrapper ion-icon {\n  color: #00897b;\n}\n\n.helpline-card--general .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\n}\n\n.helpline-card--general .helpline-card__icon-wrapper ion-icon {\n  color: #2196f3;\n}\n\n.helpline-card__icon-wrapper ion-icon {\n  font-size: 20px;\n  color: var(--user-accent-light);\n}\n\n.helpline-card__header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n  grid-column: 2;\n  grid-row: 1;\n  align-self: center;\n  min-width: 0;\n}\n\n.helpline-card__title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  line-height: 1.3;\n}\n\n.helpline-card__badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  background: #e8f5e9;\n  color: #2e7d32;\n  font-size: 0.75rem;\n  font-weight: 600;\n  padding: 5px 12px;\n  border-radius: 20px;\n}\n\n.helpline-card__badge ion-icon {\n  font-size: 12px;\n}\n\n.helpline-card__badge--24-7 {\n  background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);\n  color: #2e7d32;\n}\n\n.helpline-card__badge--hours {\n  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);\n  color: #e65100;\n}\n\n.helpline-card__text {\n  font-size: 0.9rem;\n  color: #666;\n  line-height: 1.5;\n  margin-bottom: 10px;\n  margin-top: 4px;\n  grid-column: 1 / -1;\n}\n\n.helpline-card__wait {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 0.75rem;\n  color: #888;\n  margin-bottom: 10px;\n  grid-column: 1 / -1;\n}\n\n.helpline-card__wait ion-icon {\n  font-size: 12px;\n  color: #43a047;\n}\n\n.helpline-card__contacts {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-bottom: 10px;\n  grid-column: 1 / -1;\n}\n\n.helpline-card__tty {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.75rem;\n  color: #999;\n  padding-top: 10px;\n  border-top: 1px solid #f0f0f0;\n  grid-column: 1 / -1;\n}\n\n.helpline-card__tty ion-icon {\n  font-size: 14px;\n  color: #999;\n}\n\n.helpline-contact {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 14px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.04) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n  border-radius: 20px;\n  color: #2d2d2d;\n  font-size: 0.8rem;\n  font-weight: 600;\n  text-decoration: none;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);\n}\n\n.helpline-contact--call {\n  background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);\n}\n\n.helpline-contact--call ion-icon {\n  color: #43a047;\n}\n\n.helpline-contact--text {\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\n}\n\n.helpline-contact--text ion-icon {\n  color: #1976d2;\n}\n\n.helpline-contact--chat {\n  background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);\n}\n\n.helpline-contact--chat ion-icon {\n  color: #8e24aa;\n}\n\n.helpline-contact:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);\n}\n\n.helpline-contact--call:hover {\n  background: linear-gradient(135deg, #43a047 0%, #2e7d32 100%);\n  color: #fff;\n}\n\n.helpline-contact--call:hover ion-icon {\n  color: #fff;\n}\n\n.helpline-contact--text:hover {\n  background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);\n  color: #fff;\n}\n\n.helpline-contact--text:hover ion-icon {\n  color: #fff;\n}\n\n.helpline-contact--chat:hover {\n  background: linear-gradient(135deg, #8e24aa 0%, #7b1fa2 100%);\n  color: #fff;\n}\n\n.helpline-contact--chat:hover ion-icon {\n  color: #fff;\n}\n\n@keyframes badge-pulse {\n  0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(46, 125, 50, 0.4); }\n  50% { transform: scale(1.05); box-shadow: 0 0 0 8px rgba(46, 125, 50, 0); }\n}\n\n.helpline-card__badge--24-7 {\n  animation: badge-pulse 2.5s ease-in-out infinite;\n}\n\n@keyframes icon-float {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-6px); }\n}\n\n.helpline-card__icon-wrapper {\n  animation: icon-float 3s ease-in-out infinite;\n}\n\n.helpline-card__icon-wrapper:hover {\n  animation-play-state: paused;\n  transform: scale(1.1) rotate(5deg);\n}\n\n.helpline-contact {\n  position: relative;\n  overflow: hidden;\n}\n\n.helpline-contact::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  background: rgba(255, 255, 255, 0.4);\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n  transition: width 0.6s ease, height 0.6s ease;\n}\n\n.helpline-contact:active::after {\n  width: 200px;\n  height: 200px;\n}\n\n.helpline-card::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(\n    90deg,\n    transparent,\n    rgba(255, 255, 255, 0.3),\n    transparent\n  );\n  transition: left 0.5s ease;\n  pointer-events: none;\n}\n\n.helpline-card:hover::after {\n  left: 100%;\n}\n\n@keyframes gradient-glow {\n  0% { background-position: 0% 50%; }\n  50% { background-position: 100% 50%; }\n  100% { background-position: 0% 50%; }\n}\n\n.helpline-card--crisis:hover::before {\n  background: linear-gradient(90deg, #e53935, #ff5252, #e53935);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helpline-card--lgbtq:hover::before,\n.helpline-card--trans:hover::before {\n  background: linear-gradient(90deg, #9c27b0, #e91e63, #9c27b0);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helpline-card--youth:hover::before {\n  background: linear-gradient(90deg, #ff9800, #ffb74d, #ff9800);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helpline-card--veterans:hover::before {\n  background: linear-gradient(90deg, #1565c0, #42a5f5, #1565c0);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helpline-card--specialized:hover::before {\n  background: linear-gradient(90deg, #00897b, #4db6ac, #00897b);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helpline-card--general:hover::before {\n  background: linear-gradient(90deg, #2196f3, #64b5f6, #2196f3);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helplines-wave-separator {\n  position: relative;\n  height: 80px;\n  overflow: hidden;\n  margin-bottom: -2px;\n}\n\n.helplines-wave-separator svg {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.helplines-wave-separator .wave-1 {\n  fill: rgba(var(--user-accent-rgb), 0.1);\n  animation: wave-float 8s ease-in-out infinite;\n}\n\n.helplines-wave-separator .wave-2 {\n  fill: rgba(var(--user-accent-rgb), 0.15);\n  animation: wave-float 6s ease-in-out infinite reverse;\n}\n\n.helplines-wave-separator .wave-3 {\n  fill: #f8f9fa;\n  animation: wave-float 10s ease-in-out infinite;\n}\n\n@keyframes wave-float {\n  0%, 100% { transform: translateX(0); }\n  50% { transform: translateX(-20px); }\n}\n\n.helplines-section {\n  position: relative;\n  background: \n    radial-gradient(circle at 20% 30%, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 50%),\n    radial-gradient(circle at 80% 70%, rgba(100, 181, 246, 0.06) 0%, transparent 50%),\n    #f8f9fa;\n}\n\n.helplines-section::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: radial-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px);\n  background-size: 24px 24px;\n  pointer-events: none;\n}\n\n.helplines-decoration {\n  position: absolute;\n  pointer-events: none;\n  z-index: 0;\n}\n\n.helplines-decoration--1 {\n  top: 10%;\n  left: 5%;\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, rgba(229, 57, 53, 0.1) 0%, transparent 70%);\n  animation: decoration-float 7s ease-in-out infinite;\n}\n\n.helplines-decoration--2 {\n  top: 30%;\n  right: 8%;\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, rgba(156, 39, 176, 0.08) 0%, transparent 70%);\n  animation: decoration-float 9s ease-in-out infinite reverse;\n}\n\n.helplines-decoration--3 {\n  bottom: 20%;\n  left: 10%;\n  width: 50px;\n  height: 50px;\n  border-radius: 12px;\n  background: linear-gradient(135deg, rgba(33, 150, 243, 0.1) 0%, transparent 70%);\n  animation: decoration-float 8s ease-in-out infinite;\n  transform: rotate(45deg);\n}\n\n.helplines-decoration--4 {\n  bottom: 40%;\n  right: 5%;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, rgba(0, 137, 123, 0.1) 0%, transparent 70%);\n  animation: decoration-float 6s ease-in-out infinite reverse;\n}\n\n@keyframes decoration-float {\n  0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.6; }\n  50% { transform: translateY(-15px) rotate(5deg); opacity: 1; }\n}\n\n.helplines-filters {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  justify-content: flex-start;\n  padding: 0;\n}\n\n.helplines-filter-pill {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 20px;\n  background: #fff;\n  border: 2px solid #e0e0e0;\n  border-radius: 30px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #555;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\n}\n\n.helplines-filter-pill:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);\n}\n\n.helplines-filter-pill.active,\n.helplines-filter-pill[data-filter=\"all\"].active {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"crisis\"] {\n  border-color: #ffcdd2;\n}\n.helplines-filter-pill[data-filter=\"crisis\"].active,\n.helplines-filter-pill[data-filter=\"crisis\"]:hover {\n  background: linear-gradient(135deg, #e53935 0%, #c62828 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"lgbtq\"] {\n  border-color: #e1bee7;\n}\n.helplines-filter-pill[data-filter=\"lgbtq\"].active,\n.helplines-filter-pill[data-filter=\"lgbtq\"]:hover {\n  background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"youth\"] {\n  border-color: #ffe0b2;\n}\n.helplines-filter-pill[data-filter=\"youth\"].active,\n.helplines-filter-pill[data-filter=\"youth\"]:hover {\n  background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"veterans\"] {\n  border-color: #bbdefb;\n}\n.helplines-filter-pill[data-filter=\"veterans\"].active,\n.helplines-filter-pill[data-filter=\"veterans\"]:hover {\n  background: linear-gradient(135deg, #1565c0 0%, #0d47a1 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"specialized\"] {\n  border-color: #b2dfdb;\n}\n.helplines-filter-pill[data-filter=\"specialized\"].active,\n.helplines-filter-pill[data-filter=\"specialized\"]:hover {\n  background: linear-gradient(135deg, #00897b 0%, #00695c 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"general\"] {\n  border-color: #bbdefb;\n}\n.helplines-filter-pill[data-filter=\"general\"].active,\n.helplines-filter-pill[data-filter=\"general\"]:hover {\n  background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill ion-icon {\n  font-size: 16px;\n}\n\n.helpline-card.filter-hidden {\n  opacity: 0;\n  transform: scale(0.8);\n  pointer-events: none;\n  position: absolute;\n  visibility: hidden;\n}\n\n.helpline-card.filter-visible {\n  opacity: 1;\n  transform: translateY(0) scale(1);\n}\n\n.helpline-copy-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: rgba(0, 0, 0, 0.05);\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-left: 8px;\n  flex-shrink: 0;\n}\n\n.helpline-copy-btn:hover {\n  background: rgba(0, 0, 0, 0.1);\n  transform: scale(1.1);\n}\n\n.helpline-copy-btn ion-icon {\n  font-size: 16px;\n  color: #666;\n}\n\n.helpline-copy-btn.copied {\n  background: #43a047;\n}\n\n.helpline-copy-btn.copied ion-icon {\n  color: #fff;\n}\n\n.helpline-card__availability {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px dashed #e0e0e0;\n}\n\n.availability-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 4px 10px;\n  border-radius: 12px;\n  font-size: 0.7rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.3px;\n}\n\n.availability-badge--call {\n  background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);\n  color: #2e7d32;\n}\n\n.availability-badge--text {\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\n  color: #1565c0;\n}\n\n.availability-badge--chat {\n  background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);\n  color: #7b1fa2;\n}\n\n.availability-badge--tty {\n  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);\n  color: #e65100;\n}\n\n.availability-badge ion-icon {\n  font-size: 12px;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .helpline-card__badge--24-7,\n  .helpline-card__icon-wrapper,\n  .helplines-wave-separator .wave-1,\n  .helplines-wave-separator .wave-2,\n  .helplines-wave-separator .wave-3,\n  .helplines-decoration--1,\n  .helplines-decoration--2,\n  .helplines-decoration--3,\n  .helplines-decoration--4 {\n    animation: none;\n  }\n  \n  .helpline-card::after {\n    display: none;\n  }\n  \n  .helpline-card--crisis:hover::before,\n  .helpline-card--lgbtq:hover::before,\n  .helpline-card--trans:hover::before,\n  .helpline-card--youth:hover::before,\n  .helpline-card--veterans:hover::before,\n  .helpline-card--specialized:hover::before,\n  .helpline-card--general:hover::before {\n    animation: none;\n  }\n  \n  .helpline-contact::after {\n    display: none;\n  }\n  \n  .helplines-filter-pill,\n  .helpline-copy-btn,\n  .helpline-contact {\n    transition: none;\n  }\n}\n\n.helpline-contact ion-icon {\n  font-size: 1rem;\n  transition: color 0.3s ease, transform 0.3s ease;\n}\n\n.helpline-contact:hover ion-icon {\n  transform: scale(1.15);\n}\n\n.resources-section {\n  background: rgba(var(--user-accent-rgb), 0.04);\n  padding: 80px 20px;\n}\n\n.resources-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));\n  gap: 24px;\n}\n\n.resource-card {\n  background: #fff;\n  border-radius: 16px;\n  padding: 28px;\n  text-decoration: none;\n  transition: transform 0.2s, box-shadow 0.2s;\n  border: 1px solid rgba(var(--user-accent-rgb), 0.15);\n}\n\n.resource-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);\n}\n\n.resource-card__icon {\n  width: 50px;\n  height: 50px;\n  background: #f5f5f5;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 16px;\n}\n\n.resource-card__icon ion-icon {\n  font-size: 24px;\n  color: var(--user-accent-light);\n}\n\n.resource-card__title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  margin-bottom: 8px;\n}\n\n.resource-card__text {\n  font-size: 0.9rem;\n  color: #666;\n  line-height: 1.5;\n  margin-bottom: 16px;\n}\n\n.resource-card__link {\n  color: var(--user-accent-light);\n  font-weight: 600;\n  font-size: 0.9rem;\n}\n\n.selfhelp-section {\n  background: #fff;\n  padding: 80px 20px;\n}\n\n.selfhelp-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 24px;\n}\n\n.selfhelp-card {\n  background: #fff;\n  border: 1px solid #e0e0e0;\n  border-radius: 16px;\n  padding: 28px;\n}\n\n.selfhelp-card__header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n\n.selfhelp-card__header ion-icon {\n  font-size: 24px;\n  color: var(--user-accent-light);\n}\n\n.selfhelp-card__title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n}\n\n.selfhelp-card__text {\n  font-size: 0.95rem;\n  color: #666;\n  margin-bottom: 16px;\n  line-height: 1.5;\n}\n\n.selfhelp-card__steps,\n.selfhelp-card__list {\n  padding-left: 20px;\n  color: #555;\n  font-size: 0.9rem;\n  line-height: 1.8;\n}\n\n.selfhelp-card__steps li,\n.selfhelp-card__list li {\n  margin-bottom: 6px;\n}\n\n.support-hub {\n  position: relative;\n  padding: 80px 20px 100px;\n  background: linear-gradient(180deg, #fff 0%, rgba(var(--user-accent-rgb), 0.06) 40%, rgba(var(--user-accent-rgb), 0.1) 70%, #fff 100%);\n  overflow: hidden;\n}\n\n.support-hub__bg-decor {\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n  overflow: hidden;\n}\n\n.support-hub__circle {\n  position: absolute;\n  border-radius: 50%;\n  border: 2px solid rgba(var(--user-accent-rgb), 0.08);\n}\n\n.support-hub__circle--1 {\n  width: 500px;\n  height: 500px;\n  top: -100px;\n  right: -150px;\n}\n\n.support-hub__circle--2 {\n  width: 300px;\n  height: 300px;\n  bottom: 50px;\n  left: -80px;\n}\n\n.support-hub__dots {\n  position: absolute;\n  top: 60px;\n  left: 50%;\n  width: 200px;\n  height: 200px;\n  background-image: radial-gradient(circle, rgba(var(--user-accent-rgb), 0.12) 1.5px, transparent 1.5px);\n  background-size: 20px 20px;\n  transform: translateX(-50%);\n  opacity: 0.6;\n}\n\n.support-hub__header {\n  text-align: center;\n  margin-bottom: 56px;\n  position: relative;\n  z-index: 1;\n}\n\n.support-hub__header-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 20px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.12) 0%, rgba(var(--user-accent-rgb), 0.06) 100%);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.2);\n  border-radius: 50px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent);\n  margin-bottom: 20px;\n}\n\n.support-hub__header-badge ion-icon {\n  font-size: 1.1rem;\n}\n\n.support-hub__title {\n  font-size: 2.8rem;\n  font-weight: 800;\n  color: #2d2d2d;\n  margin-bottom: 16px;\n  letter-spacing: -0.5px;\n}\n\n.support-hub__subtitle {\n  font-size: 1.15rem;\n  color: #666;\n  max-width: 640px;\n  margin: 0 auto;\n  line-height: 1.7;\n}\n\n.support-hub__grid {\n  display: flex;\n  flex-direction: column;\n  gap: 48px;\n  max-width: 1400px;\n  margin: 0 auto;\n  position: relative;\n  z-index: 1;\n  padding: 0 40px;\n}\n\n.support-hub__left {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  width: 100%;\n}\n\n.support-hub__form-card {\n  background: #fff;\n  border-radius: 20px;\n  padding: 0;\n  box-shadow: 0 8px 40px rgba(0, 0, 0, 0.06);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.12);\n  overflow: hidden;\n}\n\n.support-hub__form-header {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 28px 36px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.08) 0%, rgba(var(--user-accent-rgb), 0.03) 100%);\n  border-bottom: 1px solid rgba(var(--user-accent-rgb), 0.1);\n}\n\n.support-hub__form-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 14px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.support-hub__form-icon ion-icon {\n  font-size: 24px;\n  color: #fff;\n}\n\n.support-hub__form-title {\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  margin: 0 0 4px;\n}\n\n.support-hub__form-desc {\n  font-size: 0.9rem;\n  color: #777;\n  margin: 0;\n  line-height: 1.5;\n}\n\n.support-hub__form-card .appointment-form {\n  padding: 32px 36px 36px;\n}\n\n.support-hub__trust-row {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16px;\n}\n\n.support-hub__trust-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 18px 16px;\n  background: #fff;\n  border-radius: 14px;\n  border: 1px solid rgba(var(--user-accent-rgb), 0.12);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.04);\n}\n\n.support-hub__trust-item ion-icon {\n  font-size: 1.5rem;\n  color: var(--user-accent);\n  flex-shrink: 0;\n}\n\n.support-hub__trust-value {\n  display: block;\n  font-size: 0.85rem;\n  font-weight: 700;\n  color: #2d2d2d;\n}\n\n.support-hub__trust-label {\n  display: block;\n  font-size: 0.75rem;\n  color: #888;\n  margin-top: 2px;\n}\n\n.support-hub__right {\n  position: static;\n  width: 100%;\n}\n\n.support-hub__faq-card {\n  background: #fff;\n  border-radius: 20px;\n  box-shadow: 0 8px 40px rgba(0, 0, 0, 0.06);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.12);\n  overflow: hidden;\n}\n\n.support-hub__faq-header {\n  padding: 28px 32px 0;\n}\n\n.support-hub__faq-header-top {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.support-hub__faq-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 14px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.support-hub__faq-icon ion-icon {\n  font-size: 24px;\n  color: #fff;\n}\n\n.support-hub__faq-title {\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  margin: 0 0 4px;\n}\n\n.support-hub__faq-desc {\n  font-size: 0.9rem;\n  color: #777;\n  margin: 0;\n  line-height: 1.5;\n}\n\n.support-hub__faq-header .faq-split__search {\n  margin: 0 0 24px;\n  max-width: 100%;\n}\n\n.support-hub__faq-header .faq-split__search-input {\n  padding: 14px 44px 14px 48px;\n  border-radius: 12px;\n  font-size: 0.9rem;\n}\n\n.support-hub__faq-card .faq-split__container {\n  border-top: 1px solid rgba(var(--user-accent-rgb), 0.1);\n}\n\n.support-hub__faq-card .faq-split__left {\n  border-radius: 0;\n  border: none;\n  box-shadow: none;\n  border-right: 1px solid rgba(var(--user-accent-rgb), 0.1);\n}\n\n.support-hub__faq-card .faq-split__right {\n  position: static;\n}\n\n.support-hub__faq-card .faq-split__answer-panel {\n  border: none;\n  box-shadow: none;\n  border-radius: 0;\n  padding: 32px;\n}\n\n.appointment-form {\n  background: #fff;\n  border-radius: 0;\n  padding: 36px;\n}\n\n.form-group {\n  margin-bottom: 24px;\n}\n\n.form-row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n}\n\n.form-label {\n  display: block;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  margin-bottom: 8px;\n}\n\n.form-input,\n.form-select,\n.form-textarea {\n  width: 100%;\n  padding: 14px 16px;\n  border: 1px solid #ddd;\n  border-radius: 10px;\n  font-size: 1rem;\n  background: #fafafa;\n  transition: border-color 0.2s, box-shadow 0.2s;\n}\n\n.form-input:focus,\n.form-select:focus,\n.form-textarea:focus {\n  outline: none;\n  border-color: var(--user-accent-light);\n  box-shadow: 0 0 0 3px rgba(var(--user-accent-rgb), 0.15);\n  background: #fff;\n}\n\n.form-textarea {\n  resize: vertical;\n  min-height: 100px;\n}\n\n.form-submit {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  width: 100%;\n  padding: 16px 24px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  color: #fff;\n  font-size: 1rem;\n  font-weight: 600;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: transform 0.2s, box-shadow 0.2s;\n}\n\n.form-submit:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n.form-submit ion-icon {\n  font-size: 1.2rem;\n}\n\n.form-disclaimer {\n  font-size: 0.8rem;\n  color: #888;\n  text-align: center;\n  margin-top: 16px;\n}\n\n.faq-section {\n  background: transparent;\n  padding: 0;\n  margin: 0;\n}\n\n.faq-section .container {\n  max-width: none;\n  padding: 0;\n  margin: 0;\n  width: 100%;\n}\n\n.faq-grid {\n  display: grid;\n  grid-template-columns: 1fr 1.5fr;\n  gap: 0;\n  min-height: 500px;\n  width: 100%;\n}\n\n.faq-intro {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  padding: 60px 50px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.faq-intro__title {\n  font-size: 2.2rem;\n  font-weight: 700;\n  color: #fff;\n  margin-bottom: 24px;\n  line-height: 1.2;\n}\n\n.faq-intro__text {\n  font-size: 1rem;\n  color: rgba(255, 255, 255, 0.9);\n  line-height: 1.8;\n}\n\n.faq-list {\n  background: #f5f5f5;\n  padding: 40px 50px;\n  display: block;\n}\n\n.faq-list::-webkit-scrollbar {\n  width: 8px;\n}\n\n.faq-list::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n}\n\n.faq-list::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 4px;\n}\n\n.faq-list::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.3);\n}\n\n.faq-question::-webkit-details-marker {\n  display: none;\n}\n\n.faq-question::marker {\n  display: none;\n  content: \"\";\n}\n\n.faq-item {\n  border: none;\n  border-bottom: 2px solid rgba(0, 0, 0, 0.1);\n  border-radius: 0;\n  margin-bottom: 0;\n  overflow: hidden;\n  transition: background 0.2s ease;\n}\n\n.faq-item:first-child {\n  border-top: 2px solid rgba(0, 0, 0, 0.1);\n}\n\n.faq-item:hover {\n  background: rgba(var(--user-accent-rgb), 0.08);\n}\n\n.faq-item[open] {\n  background: rgba(var(--user-accent-rgb), 0.05);\n}\n\n.faq-question {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 24px 16px;\n  cursor: pointer;\n  font-size: 16px !important;\n  font-weight: 500;\n  color: #333 !important;\n  background: transparent;\n  transition: color 0.2s ease;\n  line-height: 1.5;\n  list-style: none;\n  font-family: 'Poppins', sans-serif !important;\n  -webkit-font-smoothing: antialiased;\n}\n\n.faq-question span {\n  flex: 1;\n  font-size: 16px !important;\n  color: inherit;\n  letter-spacing: normal;\n  text-transform: none;\n  opacity: 1 !important;\n  visibility: visible !important;\n  display: inline-block !important;\n}\n\n.faq-question:hover {\n  color: #1a1a1a;\n  background: transparent;\n}\n\n.faq-item[open] .faq-question {\n  color: #1a1a1a;\n  background: transparent;\n}\n\n.faq-icon {\n  font-size: 1.2rem;\n  color: #888;\n  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s ease;\n  flex-shrink: 0;\n}\n\n.faq-item[open] .faq-icon {\n  transform: rotate(180deg);\n  color: var(--user-accent-light);\n}\n\n.faq-question:hover .faq-icon {\n  color: var(--user-accent-light);\n}\n\n.faq-answer {\n  display: block;\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), \n              padding 0.4s cubic-bezier(0.4, 0, 0.2, 1),\n              opacity 0.3s ease;\n  background: transparent;\n  padding: 0 16px;\n  opacity: 0;\n}\n\n.faq-item[open] .faq-answer {\n  max-height: 1000px;\n  padding: 0 16px 24px 16px;\n  opacity: 1;\n}\n\n.faq-answer-inner {\n  display: block;\n}\n\n.faq-answer p {\n  font-size: 0.95rem;\n  color: #555;\n  line-height: 1.7;\n  transform: translateY(0);\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.1s,\n              opacity 0.3s ease 0.1s;\n  opacity: 1;\n}\n\n.faq-item:not([open]) .faq-answer p {\n  transform: translateY(-10px);\n  opacity: 0;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n.faq-section-new {\n  background: linear-gradient(180deg, rgba(var(--user-accent-rgb), 0.04) 0%, #fff 50%, rgba(var(--user-accent-rgb), 0.04) 100%);\n  padding: 80px 20px 100px;\n  position: relative;\n  overflow: hidden;\n}\n\n.faq-section-new::before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 6px;\n  background: linear-gradient(90deg, var(--user-accent-light), var(--user-accent), var(--user-accent-light));\n}\n\n.faq-header {\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.faq-header__icon {\n  width: 80px;\n  height: 80px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 24px;\n  box-shadow: 0 10px 30px rgba(var(--user-accent-rgb), 0.35);\n  animation: faq-icon-float 4s ease-in-out infinite;\n}\n\n@keyframes faq-icon-float {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-8px); }\n}\n\n.faq-header__icon ion-icon {\n  font-size: 40px;\n  color: #fff;\n}\n\n.faq-header__title {\n  font-size: 2.5rem;\n  font-weight: 800;\n  color: #2d2d2d;\n  margin-bottom: 16px;\n  background: linear-gradient(135deg, #2d2d2d 0%, #555 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.faq-header__subtitle {\n  font-size: 1.15rem;\n  color: #666;\n  max-width: 600px;\n  margin: 0 auto;\n  line-height: 1.7;\n}\n\n.faq-search-wrapper {\n  max-width: 600px;\n  margin: 0 auto 32px;\n}\n\n.faq-search {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.faq-search__icon {\n  position: absolute;\n  left: 20px;\n  font-size: 1.3rem;\n  color: #888;\n  transition: color 0.3s ease;\n  pointer-events: none;\n}\n\n.faq-search__input {\n  width: 100%;\n  padding: 18px 50px 18px 54px;\n  border: 2px solid #e0e0e0;\n  border-radius: 50px;\n  font-size: 1rem;\n  background: #fff;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);\n}\n\n.faq-search__input:hover {\n  border-color: var(--user-accent-light);\n}\n\n.faq-search__input:focus {\n  outline: none;\n  border-color: var(--user-accent-light);\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb), 0.2), 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.faq-search__input:focus + .faq-search__icon,\n.faq-search:focus-within .faq-search__icon {\n  color: var(--user-accent-light);\n}\n\n.faq-search__clear {\n  position: absolute;\n  right: 16px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  color: #888;\n  transition: color 0.3s ease, transform 0.3s ease;\n}\n\n.faq-search__clear:hover {\n  color: #c62828;\n  transform: scale(1.1);\n}\n\n.faq-search__clear ion-icon {\n  font-size: 1.3rem;\n}\n\n.faq-search__results {\n  font-size: 0.9rem;\n  color: #666;\n  text-align: center;\n  margin-top: 12px;\n  min-height: 20px;\n}\n\n.faq-categories {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 12px;\n  margin-bottom: 48px;\n}\n\n.faq-category-pill {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: #fff;\n  border: 2px solid rgba(var(--user-accent-rgb), 0.15);\n  border-radius: 50px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #555;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n.faq-category-pill ion-icon {\n  font-size: 1.1rem;\n  transition: transform 0.3s ease;\n}\n\n.faq-category-pill:hover {\n  border-color: var(--user-accent-light);\n  background: rgba(var(--user-accent-rgb), 0.08);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.2);\n}\n\n.faq-category-pill:hover ion-icon {\n  transform: scale(1.15);\n}\n\n.faq-category-pill.active {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-color: transparent;\n  color: #fff;\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n.faq-container {\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.faq-category-group {\n  margin-bottom: 40px;\n}\n\n.faq-category-group.hidden {\n  display: none;\n}\n\n.faq-category-header {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 20px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid rgba(var(--user-accent-rgb), 0.3);\n}\n\n.faq-category-header__icon {\n  width: 44px;\n  height: 44px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.2) 0%, rgba(var(--user-accent-rgb), 0.15) 100%);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.faq-category-header__icon ion-icon {\n  font-size: 22px;\n  color: var(--user-accent);\n}\n\n.faq-category-header__title {\n  flex: 1;\n  font-size: 1.3rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  margin: 0;\n}\n\n.faq-category-header__count {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  color: #fff;\n  font-size: 0.85rem;\n  font-weight: 700;\n  padding: 6px 14px;\n  border-radius: 50px;\n}\n\n.faq-items-wrapper {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.faq-card {\n  background: #fff;\n  border-radius: 16px;\n  border: 2px solid rgba(var(--user-accent-rgb), 0.15);\n  overflow: hidden;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.04);\n}\n\n.faq-card:hover {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 8px 30px rgba(var(--user-accent-rgb), 0.2);\n  transform: translateY(-4px);\n}\n\n.faq-card[open] {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 12px 40px rgba(var(--user-accent-rgb), 0.25);\n}\n\n.faq-card.hidden {\n  display: none;\n}\n\n.faq-card__question {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 20px 24px;\n  cursor: pointer;\n  list-style: none;\n  transition: background 0.3s ease;\n}\n\n.faq-card__question::-webkit-details-marker {\n  display: none;\n}\n\n.faq-card__question::marker {\n  display: none;\n  content: \"\";\n}\n\n.faq-card:hover .faq-card__question {\n  background: rgba(var(--user-accent-rgb), 0.05);\n}\n\n.faq-card[open] .faq-card__question {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.12) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n  border-bottom: 1px solid rgba(var(--user-accent-rgb), 0.2);\n}\n\n.faq-card__number {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  color: #fff;\n  font-size: 0.85rem;\n  font-weight: 700;\n  border-radius: 10px;\n  flex-shrink: 0;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.faq-card:hover .faq-card__number {\n  transform: scale(1.08);\n  box-shadow: 0 4px 12px rgba(var(--user-accent-rgb), 0.4);\n}\n\n.faq-card__icon-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: rgba(var(--user-accent-rgb), 0.15);\n  border-radius: 8px;\n  flex-shrink: 0;\n  transition: all 0.3s ease;\n}\n\n.faq-card__icon-wrapper ion-icon {\n  font-size: 18px;\n  color: var(--user-accent);\n  transition: transform 0.3s ease;\n}\n\n.faq-card:hover .faq-card__icon-wrapper {\n  background: rgba(var(--user-accent-rgb), 0.25);\n}\n\n.faq-card:hover .faq-card__icon-wrapper ion-icon {\n  transform: rotate(15deg);\n}\n\n.faq-card__text {\n  flex: 1;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  line-height: 1.5;\n}\n\n.faq-card__chevron {\n  font-size: 1.3rem;\n  color: #888;\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s ease;\n  flex-shrink: 0;\n}\n\n.faq-card:hover .faq-card__chevron {\n  color: var(--user-accent-light);\n}\n\n.faq-card[open] .faq-card__chevron {\n  transform: rotate(180deg);\n  color: var(--user-accent);\n}\n\n.faq-card__answer {\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1),\n              padding 0.5s cubic-bezier(0.4, 0, 0.2, 1),\n              opacity 0.4s ease;\n  opacity: 0;\n  background: #fff;\n}\n\n.faq-card[open] .faq-card__answer {\n  max-height: 500px;\n  opacity: 1;\n}\n\n.faq-card__answer-content {\n  padding: 20px 24px 16px;\n  padding-left: 76px;\n}\n\n.faq-card__answer-content p {\n  font-size: 0.95rem;\n  color: #555;\n  line-height: 1.8;\n  margin: 0;\n}\n\n.faq-card__feedback {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 24px 20px;\n  padding-left: 76px;\n  border-top: 1px dashed rgba(0, 0, 0, 0.08);\n}\n\n.faq-card__feedback-label {\n  font-size: 0.85rem;\n  color: #888;\n  margin-right: 8px;\n}\n\n.faq-feedback-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 16px;\n  border: 2px solid #e0e0e0;\n  border-radius: 50px;\n  background: #fff;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #666;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.faq-feedback-btn ion-icon {\n  font-size: 1rem;\n  transition: transform 0.3s ease;\n}\n\n.faq-feedback-btn--yes:hover {\n  background: #e8f5e9;\n  border-color: #4caf50;\n  color: #2e7d32;\n}\n\n.faq-feedback-btn--yes:hover ion-icon {\n  transform: scale(1.2);\n}\n\n.faq-feedback-btn--no:hover {\n  background: #ffebee;\n  border-color: #ef5350;\n  color: #c62828;\n}\n\n.faq-feedback-btn--no:hover ion-icon {\n  transform: scale(1.2);\n}\n\n.faq-feedback-btn.selected {\n  transform: scale(0.95);\n}\n\n.faq-feedback-btn--yes.selected {\n  background: #4caf50;\n  border-color: #4caf50;\n  color: #fff;\n}\n\n.faq-feedback-btn--no.selected {\n  background: #ef5350;\n  border-color: #ef5350;\n  color: #fff;\n}\n\n.faq-no-results {\n  text-align: center;\n  padding: 60px 20px;\n  color: #888;\n}\n\n.faq-no-results ion-icon {\n  font-size: 48px;\n  color: #ddd;\n  margin-bottom: 16px;\n}\n\n.faq-no-results p {\n  font-size: 1.1rem;\n}\n\n.faq-highlight {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.4) 0%, rgba(var(--user-accent-rgb), 0.4) 100%);\n  color: inherit;\n  padding: 2px 4px;\n  border-radius: 4px;\n}\n\n[data-theme=\"dark\"] .faq-highlight {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.3) 0%, rgba(var(--user-accent-rgb), 0.3) 100%);\n}\n\n.faq-cta {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 24px;\n  max-width: 900px;\n  margin: 60px auto 0;\n  padding: 32px 40px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 20px;\n  box-shadow: 0 15px 40px rgba(var(--user-accent-rgb), 0.35);\n}\n\n.faq-cta__content {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.faq-cta__icon {\n  font-size: 48px;\n  color: #fff;\n  flex-shrink: 0;\n}\n\n.faq-cta__text h3 {\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #fff;\n  margin: 0 0 6px 0;\n}\n\n.faq-cta__text p {\n  font-size: 1rem;\n  color: rgba(255, 255, 255, 0.9);\n  margin: 0;\n}\n\n.faq-cta__btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 10px;\n  padding: 16px 32px;\n  background: #fff;\n  color: var(--user-accent);\n  font-size: 1rem;\n  font-weight: 700;\n  border-radius: 50px;\n  text-decoration: none;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n  flex-shrink: 0;\n}\n\n.faq-cta__btn:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  background: rgba(var(--user-accent-rgb), 0.03);\n}\n\n.faq-cta__btn ion-icon {\n  font-size: 1.2rem;\n}\n\n.faq-items-wrapper .faq-card {\n  opacity: 0;\n  transform: translateY(20px);\n  animation: faq-card-enter 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.faq-items-wrapper .faq-card:nth-child(1) { animation-delay: 0.1s; }\n.faq-items-wrapper .faq-card:nth-child(2) { animation-delay: 0.15s; }\n.faq-items-wrapper .faq-card:nth-child(3) { animation-delay: 0.2s; }\n.faq-items-wrapper .faq-card:nth-child(4) { animation-delay: 0.25s; }\n.faq-items-wrapper .faq-card:nth-child(5) { animation-delay: 0.3s; }\n.faq-items-wrapper .faq-card:nth-child(6) { animation-delay: 0.35s; }\n\n@keyframes faq-card-enter {\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.faq-split {\n  padding: 0;\n  position: relative;\n}\n\n.faq-split::before {\n  display: none;\n}\n\n.faq-split__header {\n  display: none;\n}\n\n.faq-split__header-icon {\n  width: 80px;\n  height: 80px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 24px;\n  box-shadow: 0 10px 30px rgba(var(--user-accent-rgb), 0.35);\n  animation: faq-icon-float 4s ease-in-out infinite;\n}\n\n.faq-split__header-icon ion-icon {\n  font-size: 40px;\n  color: #fff;\n}\n\n.faq-split__title {\n  font-size: 2.5rem;\n  font-weight: 800;\n  color: #2d2d2d;\n  margin-bottom: 16px;\n  background: linear-gradient(135deg, #2d2d2d 0%, #555 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.faq-split__subtitle {\n  font-size: 1.15rem;\n  color: #666;\n  max-width: 600px;\n  margin: 0 auto;\n  line-height: 1.7;\n}\n\n.faq-split__search {\n  position: relative;\n  max-width: 600px;\n  margin: 0 auto 40px;\n  display: flex;\n  align-items: center;\n}\n\n.faq-split__search-icon {\n  position: absolute;\n  left: 20px;\n  font-size: 1.3rem;\n  color: #888;\n  pointer-events: none;\n  transition: color 0.3s ease;\n}\n\n.faq-split__search-input {\n  width: 100%;\n  padding: 18px 50px 18px 54px;\n  border: 2px solid #e0e0e0;\n  border-radius: 50px;\n  font-size: 1rem;\n  background: #fff;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);\n}\n\n.faq-split__search-input:focus {\n  outline: none;\n  border-color: var(--user-accent-light);\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb), 0.2), 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.faq-split__search:focus-within .faq-split__search-icon {\n  color: var(--user-accent-light);\n}\n\n.faq-split__search-clear {\n  position: absolute;\n  right: 16px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  color: #888;\n  transition: color 0.3s ease, transform 0.3s ease;\n}\n\n.faq-split__search-clear:hover {\n  color: #c62828;\n  transform: scale(1.1);\n}\n\n.faq-split__container {\n  display: grid;\n  grid-template-columns: 380px 1fr;\n  gap: 0;\n  min-height: 500px;\n}\n\n.faq-split__left {\n  background: #fff;\n  border-radius: 0;\n  border: none;\n  overflow: hidden;\n  box-shadow: none;\n  display: flex;\n  flex-direction: column;\n}\n\n.faq-split__tabs {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  padding: 16px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, rgba(var(--user-accent-rgb), 0.05) 100%);\n  border-bottom: 2px solid rgba(var(--user-accent-rgb), 0.15);\n}\n\n.faq-split__tab {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 14px;\n  background: #fff;\n  border: 2px solid rgba(var(--user-accent-rgb), 0.15);\n  border-radius: 25px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  color: #666;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.faq-split__tab ion-icon {\n  font-size: 0.95rem;\n}\n\n.faq-split__tab:hover {\n  border-color: var(--user-accent-light);\n  background: rgba(var(--user-accent-rgb), 0.1);\n}\n\n.faq-split__tab.active {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-color: transparent;\n  color: #fff;\n  box-shadow: 0 4px 12px rgba(var(--user-accent-rgb), 0.35);\n}\n\n.faq-split__questions {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n  max-height: 520px;\n}\n\n.faq-split__questions::-webkit-scrollbar {\n  width: 6px;\n}\n\n.faq-split__questions::-webkit-scrollbar-track {\n  background: #f5f5f5;\n  border-radius: 3px;\n}\n\n.faq-split__questions::-webkit-scrollbar-thumb {\n  background: var(--user-accent-light);\n  border-radius: 3px;\n}\n\n.faq-split__question {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  padding: 16px;\n  margin: 4px 0;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  border: 2px solid transparent;\n}\n\n.faq-split__question:hover {\n  background: rgba(var(--user-accent-rgb), 0.08);\n  border-color: rgba(var(--user-accent-rgb), 0.3);\n}\n\n.faq-split__question.active {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, rgba(var(--user-accent-rgb), 0.1) 100%);\n  border-color: var(--user-accent-light);\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.2);\n}\n\n.faq-split__question.hidden {\n  display: none;\n}\n\n.faq-split__question-num {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 36px;\n  height: 36px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  color: #fff;\n  font-size: 0.8rem;\n  font-weight: 700;\n  border-radius: 10px;\n  flex-shrink: 0;\n}\n\n.faq-split__question.active .faq-split__question-num {\n  box-shadow: 0 4px 12px rgba(var(--user-accent-rgb), 0.4);\n  transform: scale(1.05);\n}\n\n.faq-split__question-content {\n  flex: 1;\n  min-width: 0;\n}\n\n.faq-split__question-cat {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.75rem;\n  color: #888;\n  margin-bottom: 4px;\n}\n\n.faq-split__question-cat ion-icon {\n  font-size: 0.85rem;\n  color: var(--user-accent);\n}\n\n.faq-split__question-text {\n  display: block;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  line-height: 1.4;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.faq-split__question-arrow {\n  font-size: 1.2rem;\n  color: #ccc;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n}\n\n.faq-split__question:hover .faq-split__question-arrow,\n.faq-split__question.active .faq-split__question-arrow {\n  color: var(--user-accent-light);\n  transform: translateX(3px);\n}\n\n.faq-split__no-results {\n  text-align: center;\n  padding: 40px 20px;\n  color: #888;\n}\n\n.faq-split__no-results ion-icon {\n  font-size: 40px;\n  color: #ddd;\n  margin-bottom: 12px;\n}\n\n.faq-split__no-results p {\n  font-size: 0.95rem;\n  margin: 0;\n}\n\n.faq-split__right {\n  position: static;\n  height: fit-content;\n}\n\n.faq-split__answer-panel {\n  background: #fff;\n  border-radius: 0;\n  border: none;\n  padding: 32px;\n  box-shadow: none;\n  animation: faq-answer-slide-in 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n@keyframes faq-answer-slide-in {\n  from {\n    opacity: 0;\n    transform: translateX(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n.faq-split__answer-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n}\n\n.faq-split__answer-cat {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 16px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, rgba(var(--user-accent-rgb), 0.1) 100%);\n  border-radius: 20px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent);\n}\n\n.faq-split__answer-cat ion-icon {\n  font-size: 1rem;\n}\n\n.faq-split__answer-num {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #888;\n}\n\n.faq-split__answer-question {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  line-height: 1.4;\n  margin: 0 0 24px 0;\n  padding-bottom: 20px;\n  border-bottom: 2px solid rgba(var(--user-accent-rgb), 0.15);\n}\n\n.faq-split__answer-content {\n  margin-bottom: 24px;\n}\n\n.faq-split__answer-content p {\n  font-size: 1.05rem;\n  color: #555;\n  line-height: 1.9;\n  margin: 0;\n}\n\n.faq-split__answer-tips {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.08) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n  border-radius: 16px;\n  padding: 20px 24px;\n  margin-bottom: 24px;\n  border-left: 4px solid var(--user-accent);\n}\n\n.faq-split__answer-tips h4 {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.95rem;\n  font-weight: 700;\n  color: var(--user-accent);\n  margin: 0 0 10px 0;\n}\n\n.faq-split__answer-tips h4 ion-icon {\n  font-size: 1.2rem;\n  color: var(--user-accent);\n}\n\n.faq-split__answer-tips p {\n  font-size: 0.95rem;\n  color: #666;\n  line-height: 1.7;\n  margin: 0;\n}\n\n.faq-split__answer-feedback {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 20px 0;\n  border-top: 1px dashed #e0e0e0;\n  margin-bottom: 16px;\n}\n\n.faq-split__feedback-label {\n  font-size: 0.9rem;\n  color: #888;\n}\n\n.faq-split__feedback-btns {\n  display: flex;\n  gap: 10px;\n}\n\n.faq-split__feedback-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 18px;\n  border: 2px solid #e0e0e0;\n  border-radius: 25px;\n  background: #fff;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #666;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.faq-split__feedback-btn ion-icon {\n  font-size: 1rem;\n}\n\n.faq-split__feedback-btn[data-feedback=\"yes\"]:hover {\n  background: #e8f5e9;\n  border-color: #4caf50;\n  color: #2e7d32;\n}\n\n.faq-split__feedback-btn[data-feedback=\"no\"]:hover {\n  background: #ffebee;\n  border-color: #ef5350;\n  color: #c62828;\n}\n\n.faq-split__feedback-btn.selected[data-feedback=\"yes\"] {\n  background: #4caf50;\n  border-color: #4caf50;\n  color: #fff;\n}\n\n.faq-split__feedback-btn.selected[data-feedback=\"no\"] {\n  background: #ef5350;\n  border-color: #ef5350;\n  color: #fff;\n}\n\n.faq-split__answer-nav {\n  display: flex;\n  justify-content: space-between;\n  gap: 16px;\n}\n\n.faq-split__nav-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, rgba(var(--user-accent-rgb), 0.05) 100%);\n  border: 2px solid rgba(var(--user-accent-rgb), 0.15);\n  border-radius: 12px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #666;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.faq-split__nav-btn:hover:not(:disabled) {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-color: transparent;\n  color: #fff;\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.faq-split__nav-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n\n.faq-split__nav-btn ion-icon {\n  font-size: 1.1rem;\n}\n\n.faq-split__empty {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: #fff;\n  border-radius: 20px;\n  border: 2px dashed #e0e0e0;\n  padding: 60px 40px;\n  text-align: center;\n  color: #888;\n}\n\n.faq-split__empty ion-icon {\n  font-size: 64px;\n  color: #ddd;\n  margin-bottom: 20px;\n}\n\n.faq-split__empty p {\n  font-size: 1rem;\n  margin: 0;\n}\n\n.faq-split__cta {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 24px;\n  max-width: 1300px;\n  margin: 48px auto 0;\n  padding: 32px 40px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 20px;\n  box-shadow: 0 15px 40px rgba(var(--user-accent-rgb), 0.35);\n  position: relative;\n  z-index: 1;\n}\n\n.faq-split__cta-content {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.faq-split__cta-icon {\n  font-size: 48px;\n  color: #fff;\n  flex-shrink: 0;\n}\n\n.faq-split__cta-text h3 {\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #fff;\n  margin: 0 0 6px 0;\n}\n\n.faq-split__cta-text p {\n  font-size: 1rem;\n  color: rgba(255, 255, 255, 0.9);\n  margin: 0;\n}\n\n.faq-split__cta-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 10px;\n  padding: 16px 32px;\n  background: #fff;\n  color: var(--user-accent);\n  font-size: 1rem;\n  font-weight: 700;\n  border-radius: 50px;\n  text-decoration: none;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n  flex-shrink: 0;\n}\n\n.faq-split__cta-btn:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  background: rgba(var(--user-accent-rgb), 0.03);\n}\n\n.faq-split__highlight {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.4) 0%, rgba(var(--user-accent-rgb), 0.4) 100%);\n  color: inherit;\n  padding: 2px 4px;\n  border-radius: 4px;\n}\n\n[data-theme=\"dark\"] .faq-split {\n  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);\n}\n\n[data-theme=\"dark\"] .faq-split::before {\n  background: linear-gradient(90deg, rgba(var(--user-accent-rgb), 0.6), rgba(var(--user-accent-rgb), 0.6), rgba(var(--user-accent-rgb), 0.6));\n}\n\n[data-theme=\"dark\"] .faq-split__title {\n  background: linear-gradient(135deg, #fff 0%, #e0e0e0 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n}\n\n[data-theme=\"dark\"] .faq-split__subtitle {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-split__search-input {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .faq-split__search-input:focus {\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .faq-split__left {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__tabs {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.08) 0%, rgba(var(--user-accent-rgb), 0.04) 100%);\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__tab {\n  background: #16213e;\n  border-color: #2d3a5a;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-split__tab:hover {\n  background: rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .faq-split__question:hover {\n  background: rgba(var(--user-accent-rgb), 0.1);\n}\n\n[data-theme=\"dark\"] .faq-split__question.active {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, rgba(var(--user-accent-rgb), 0.1) 100%);\n  border-color: rgba(var(--user-accent-rgb), 0.4);\n}\n\n[data-theme=\"dark\"] .faq-split__question-cat {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .faq-split__question-text {\n  color: #e0e0e0;\n}\n\n.faq-split__answer-data,\n.faq-split__tip-data {\n  display: none !important;\n}\n\n[data-theme=\"dark\"] .faq-split__questions::-webkit-scrollbar-track {\n  background: #16213e;\n}\n\n[data-theme=\"dark\"] .faq-split__answer-panel {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__answer-question {\n  color: #fff;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__answer-content p {\n  color: #bbb;\n}\n\n[data-theme=\"dark\"] .faq-split__answer-tips {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n}\n\n[data-theme=\"dark\"] .faq-split__answer-tips p {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-split__answer-feedback {\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__feedback-btn {\n  background: #16213e;\n  border-color: #2d3a5a;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-split__nav-btn {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, rgba(var(--user-accent-rgb), 0.05) 100%);\n  border-color: #2d3a5a;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-split__empty {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__highlight {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.3) 0%, rgba(var(--user-accent-rgb), 0.3) 100%);\n}\n\n@media (max-width: 968px) {\n  .faq-split__container {\n    grid-template-columns: 1fr;\n    gap: 24px;\n  }\n\n  .faq-split__right {\n    position: static;\n  }\n\n  .faq-split__questions {\n    max-height: 400px;\n  }\n\n  .faq-split__answer-panel {\n    animation: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .faq-split {\n    padding: 60px 16px 80px;\n  }\n\n  .faq-split__title {\n    font-size: 1.8rem;\n  }\n\n  .faq-split__subtitle {\n    font-size: 1rem;\n  }\n\n  .faq-split__tabs {\n    justify-content: center;\n  }\n\n  .faq-split__tab span {\n    display: none;\n  }\n\n  .faq-split__tab {\n    padding: 10px 12px;\n  }\n\n  .faq-split__question {\n    padding: 14px 12px;\n  }\n\n  .faq-split__question-cat {\n    display: none;\n  }\n\n  .faq-split__question-text {\n    white-space: normal;\n  }\n\n  .faq-split__answer-panel {\n    padding: 24px 20px;\n  }\n\n  .faq-split__answer-question {\n    font-size: 1.25rem;\n  }\n\n  .faq-split__answer-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n\n  .faq-split__answer-feedback {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 12px;\n  }\n\n  .faq-split__cta {\n    flex-direction: column;\n    text-align: center;\n    padding: 28px 24px;\n  }\n\n  .faq-split__cta-content {\n    flex-direction: column;\n    text-align: center;\n  }\n\n  .faq-split__nav-btn {\n    padding: 10px 16px;\n    font-size: 0.85rem;\n  }\n}\n\n[data-theme=\"dark\"] .faq-section-new {\n  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);\n}\n\n[data-theme=\"dark\"] .faq-section-new::before {\n  background: linear-gradient(90deg, rgba(var(--user-accent-rgb), 0.6), rgba(var(--user-accent-rgb), 0.6), rgba(var(--user-accent-rgb), 0.6));\n}\n\n[data-theme=\"dark\"] .faq-header__title {\n  background: linear-gradient(135deg, #fff 0%, #d0d0d0 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n[data-theme=\"dark\"] .faq-header__subtitle {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-search__input {\n  background: #252542;\n  border-color: #3a3a5c;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .faq-search__input::placeholder {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .faq-search__input:hover {\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .faq-search__input:focus {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb), 0.15), 0 8px 25px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .faq-category-pill {\n  background: #252542;\n  border-color: #3a3a5c;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .faq-category-pill:hover {\n  border-color: var(--user-accent-light);\n  background: rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .faq-category-header {\n  border-bottom-color: rgba(var(--user-accent-rgb), 0.2);\n}\n\n[data-theme=\"dark\"] .faq-category-header__icon {\n  background: rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .faq-category-header__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .faq-card {\n  background: #252542;\n  border-color: #3a3a5c;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .faq-card:hover {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 8px 30px rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .faq-card[open] {\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .faq-card:hover .faq-card__question,\n[data-theme=\"dark\"] .faq-card[open] .faq-card__question {\n  background: rgba(var(--user-accent-rgb), 0.08);\n}\n\n[data-theme=\"dark\"] .faq-card__text {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .faq-card__chevron {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .faq-card__answer {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .faq-card__answer-content p {\n  color: #bbb;\n}\n\n[data-theme=\"dark\"] .faq-card__feedback {\n  border-top-color: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .faq-card__feedback-label {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .faq-feedback-btn {\n  background: #1a1a2e;\n  border-color: #3a3a5c;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .faq-feedback-btn--yes:hover {\n  background: rgba(76, 175, 80, 0.2);\n  border-color: #4caf50;\n  color: #81c784;\n}\n\n[data-theme=\"dark\"] .faq-feedback-btn--no:hover {\n  background: rgba(239, 83, 80, 0.2);\n  border-color: #ef5350;\n  color: #ef9a9a;\n}\n\n[data-theme=\"dark\"] .faq-no-results {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .faq-no-results ion-icon {\n  color: #444;\n}\n\n[data-theme=\"dark\"] .faq-cta {\n  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);\n}\n\n@media (max-width: 768px) {\n  .faq-section-new {\n    padding: 60px 16px 80px;\n  }\n\n  .faq-header__title {\n    font-size: 1.8rem;\n  }\n\n  .faq-header__subtitle {\n    font-size: 1rem;\n  }\n\n  .faq-header__icon {\n    width: 64px;\n    height: 64px;\n  }\n\n  .faq-header__icon ion-icon {\n    font-size: 32px;\n  }\n\n  .faq-categories {\n    gap: 8px;\n  }\n\n  .faq-category-pill {\n    padding: 10px 16px;\n    font-size: 0.8rem;\n  }\n\n  .faq-category-pill span {\n    display: none;\n  }\n\n  .faq-category-pill ion-icon {\n    margin: 0;\n  }\n\n  .faq-category-header {\n    gap: 12px;\n  }\n\n  .faq-category-header__icon {\n    width: 36px;\n    height: 36px;\n  }\n\n  .faq-category-header__icon ion-icon {\n    font-size: 18px;\n  }\n\n  .faq-category-header__title {\n    font-size: 1.1rem;\n  }\n\n  .faq-card__question {\n    padding: 16px;\n    gap: 12px;\n  }\n\n  .faq-card__number {\n    width: 32px;\n    height: 32px;\n    font-size: 0.8rem;\n  }\n\n  .faq-card__icon-wrapper {\n    display: none;\n  }\n\n  .faq-card__text {\n    font-size: 0.9rem;\n  }\n\n  .faq-card__answer-content {\n    padding: 16px;\n    padding-left: 60px;\n  }\n\n  .faq-card__feedback {\n    padding: 12px 16px;\n    padding-left: 60px;\n    flex-wrap: wrap;\n  }\n\n  .faq-cta {\n    flex-direction: column;\n    text-align: center;\n    padding: 24px;\n  }\n\n  .faq-cta__content {\n    flex-direction: column;\n  }\n\n  .faq-cta__icon {\n    font-size: 40px;\n  }\n}\n\n@media (max-width: 480px) {\n  .faq-card__answer-content,\n  .faq-card__feedback {\n    padding-left: 16px;\n  }\n\n  .faq-feedback-btn span {\n    display: none;\n  }\n\n  .faq-feedback-btn {\n    padding: 10px 14px;\n  }\n}\n\n[data-theme=\"dark\"] .support-hero {\n  background: linear-gradient(135deg, #1a1a2e 0%, #252542 100%);\n}\n\n[data-theme=\"dark\"] .support-hero::before {\n  background: radial-gradient(circle at 30% 70%, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 50%),\n              radial-gradient(circle at 70% 30%, rgba(var(--user-accent-rgb), 0.05) 0%, transparent 50%),\n              radial-gradient(circle at 50% 50%, rgba(var(--user-accent-rgb), 0.04) 0%, transparent 60%);\n}\n\n[data-theme=\"dark\"] .support-hero::after {\n  background: \n    radial-gradient(ellipse 600px 300px at 20% 80%, rgba(var(--user-accent-rgb), 0.06) 0%, transparent 70%),\n    radial-gradient(ellipse 500px 400px at 80% 20%, rgba(var(--user-accent-rgb), 0.04) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .support-hero__decorative--1 {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .support-hero__decorative--2 {\n  background: linear-gradient(45deg, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .support-hero__decorative--3 {\n  background: linear-gradient(180deg, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .support-hero__badge {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.2) 0%, rgba(var(--user-accent-rgb), 0.1) 100%);\n  border-color: rgba(var(--user-accent-rgb), 0.35);\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .support-hero__title {\n  color: #fff;\n  background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n}\n\n[data-theme=\"dark\"] .support-hero__subtitle {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .support-hero__input {\n  background: #2a2a4a;\n  border-color: #3a3a5a;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .support-hero__input:hover {\n  border-color: #4a4a6a;\n}\n\n[data-theme=\"dark\"] .support-hero__input:focus {\n  border-color: var(--user-accent);\n  background-color: #2d2d4d;\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb), 0.2), 0 8px 30px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .support-hero__input::placeholder {\n  color: rgba(255, 255, 255, 0.5);\n}\n\n[data-theme=\"dark\"] .crisis-card,\n[data-theme=\"dark\"] .quicklink-card,\n[data-theme=\"dark\"] .helpline-card {\n  background: #252542;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .crisis-card:hover,\n[data-theme=\"dark\"] .quicklink-card:hover,\n[data-theme=\"dark\"] .helpline-card:hover {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .helplines-expect {\n  background: linear-gradient(135deg, #252542 0%, #2a2a4a 100%);\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .helplines-expect__icon {\n  background: linear-gradient(135deg, #4a90d9 0%, #357abd 100%);\n}\n\n[data-theme=\"dark\"] .helplines-expect__content h3 {\n  color: #a0c4e8;\n}\n\n[data-theme=\"dark\"] .helplines-expect__content p {\n  color: #8ab4d6;\n}\n\n[data-theme=\"dark\"] .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #3a3a5a 0%, #454570 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--crisis .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #4a2828 0%, #5a3030 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--lgbtq .helpline-card__icon-wrapper,\n[data-theme=\"dark\"] .helpline-card--trans .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #3a2845 0%, #4a3055 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--youth .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #4a3520 0%, #5a4028 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--veterans .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #1a3050 0%, #253a5a 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--specialized .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #1a3a38 0%, #254545 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--general .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #1a3050 0%, #253a5a 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card__badge {\n  background: linear-gradient(135deg, #2a4a30 0%, #355540 100%);\n  color: #8bc48f;\n}\n\n[data-theme=\"dark\"] .helpline-card__badge--hours {\n  background: linear-gradient(135deg, #4a3a20 0%, #5a4525 100%);\n  color: #e8b060;\n}\n\n[data-theme=\"dark\"] .helpline-card__wait {\n  color: #8bc48f;\n}\n\n[data-theme=\"dark\"] .helpline-card__wait ion-icon {\n  color: #8bc48f;\n}\n\n[data-theme=\"dark\"] .helpline-card__tty {\n  border-top-color: #3a3a5a;\n  color: #888;\n}\n\n[data-theme=\"dark\"] .helpline-contact {\n  background: linear-gradient(135deg, #2a2a4a 0%, #353558 100%);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .helpline-contact--call {\n  background: linear-gradient(135deg, #2a4a30 0%, #355540 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact--call ion-icon {\n  color: #8bc48f;\n}\n\n[data-theme=\"dark\"] .helpline-contact--text {\n  background: linear-gradient(135deg, #1a3050 0%, #253a5a 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact--text ion-icon {\n  color: #64b5f6;\n}\n\n[data-theme=\"dark\"] .helpline-contact--chat {\n  background: linear-gradient(135deg, #3a2845 0%, #4a3055 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact--chat ion-icon {\n  color: #ce93d8;\n}\n\n[data-theme=\"dark\"] .helpline-contact--call:hover {\n  background: linear-gradient(135deg, #43a047 0%, #2e7d32 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact--text:hover {\n  background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact--chat:hover {\n  background: linear-gradient(135deg, #8e24aa 0%, #7b1fa2 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact:hover {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .helpline-contact:hover ion-icon {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .helplines-section {\n  background: \n    radial-gradient(circle at 20% 30%, rgba(155, 126, 217, 0.08) 0%, transparent 50%),\n    radial-gradient(circle at 80% 70%, rgba(100, 181, 246, 0.06) 0%, transparent 50%),\n    #1a1a2e;\n}\n\n[data-theme=\"dark\"] .helplines-section::before {\n  background-image: radial-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px);\n}\n\n[data-theme=\"dark\"] .helplines-wave-separator .wave-1 {\n  fill: rgba(155, 126, 217, 0.08);\n}\n\n[data-theme=\"dark\"] .helplines-wave-separator .wave-2 {\n  fill: rgba(155, 126, 217, 0.12);\n}\n\n[data-theme=\"dark\"] .helplines-wave-separator .wave-3 {\n  fill: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .helplines-decoration--1 {\n  background: linear-gradient(135deg, rgba(229, 57, 53, 0.15) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .helplines-decoration--2 {\n  background: linear-gradient(135deg, rgba(156, 39, 176, 0.12) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .helplines-decoration--3 {\n  background: linear-gradient(135deg, rgba(33, 150, 243, 0.15) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .helplines-decoration--4 {\n  background: linear-gradient(135deg, rgba(0, 137, 123, 0.15) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill {\n  background: #252542;\n  border-color: #3a3a5c;\n  color: #b0b0c0;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill:hover {\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"crisis\"] {\n  border-color: #5a3030;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"lgbtq\"] {\n  border-color: #4a3055;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"youth\"] {\n  border-color: #5a4028;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"veterans\"] {\n  border-color: #253a5a;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"specialized\"] {\n  border-color: #254545;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"general\"] {\n  border-color: #253a5a;\n}\n\n[data-theme=\"dark\"] .helpline-copy-btn {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .helpline-copy-btn:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n[data-theme=\"dark\"] .helpline-copy-btn ion-icon {\n  color: #b0b0c0;\n}\n\n[data-theme=\"dark\"] .helpline-card__availability {\n  border-top-color: #3a3a5c;\n}\n\n[data-theme=\"dark\"] .availability-badge--call {\n  background: linear-gradient(135deg, #2a4a30 0%, #355540 100%);\n  color: #8bc48f;\n}\n\n[data-theme=\"dark\"] .availability-badge--text {\n  background: linear-gradient(135deg, #1a3050 0%, #253a5a 100%);\n  color: #64b5f6;\n}\n\n[data-theme=\"dark\"] .availability-badge--chat {\n  background: linear-gradient(135deg, #3a2845 0%, #4a3055 100%);\n  color: #ce93d8;\n}\n\n[data-theme=\"dark\"] .availability-badge--tty {\n  background: linear-gradient(135deg, #4a3520 0%, #5a4028 100%);\n  color: #ffb74d;\n}\n\n[data-theme=\"dark\"] .crisis-section,\n[data-theme=\"dark\"] .helplines-section,\n[data-theme=\"dark\"] .selfhelp-section,\n[data-theme=\"dark\"] .faq-section {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .quicklinks-section,\n[data-theme=\"dark\"] .resources-section {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .support-hub {\n  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 40%, #1e2a47 70%, #1a1a2e 100%);\n}\n\n[data-theme=\"dark\"] .support-hub__circle {\n  border-color: rgba(var(--user-accent-rgb), 0.06);\n}\n\n[data-theme=\"dark\"] .support-hub__dots {\n  background-image: radial-gradient(circle, rgba(var(--user-accent-rgb), 0.08) 1.5px, transparent 1.5px);\n}\n\n[data-theme=\"dark\"] .support-hub__header-badge {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n  border-color: rgba(var(--user-accent-rgb), 0.25);\n}\n\n[data-theme=\"dark\"] .support-hub__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .support-hub__subtitle {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .support-hub__form-card {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .support-hub__form-header {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, rgba(var(--user-accent-rgb), 0.04) 100%);\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .support-hub__form-title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .support-hub__form-desc {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .support-hub__trust-item {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .support-hub__trust-value {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .support-hub__trust-label {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .support-hub__faq-card {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .support-hub__faq-title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .support-hub__faq-desc {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .support-hub__faq-card .faq-split__container {\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .support-hub__faq-card .faq-split__left {\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .crisis-banner {\n  background: linear-gradient(135deg, rgba(229, 115, 115, 0.15) 0%, rgba(26, 26, 46, 0.8) 100%);\n  border-color: #e57373;\n}\n\n[data-theme=\"dark\"] .crisis-banner__title {\n  color: #ef9a9a;\n}\n\n[data-theme=\"dark\"] .crisis-banner__text {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .crisis-card,\n[data-theme=\"dark\"] .helpline-card,\n[data-theme=\"dark\"] .selfhelp-card,\n[data-theme=\"dark\"] .faq-item {\n  background: #252542;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .resource-card {\n  background: #1a1a2e;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .crisis-card__icon {\n  background: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .crisis-card__icon ion-icon,\n[data-theme=\"dark\"] .quicklink-card__icon ion-icon,\n[data-theme=\"dark\"] .helpline-card ion-icon,\n[data-theme=\"dark\"] .resource-card ion-icon,\n[data-theme=\"dark\"] .selfhelp-card__header ion-icon {\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .crisis-card__title,\n[data-theme=\"dark\"] .quicklink-card__title,\n[data-theme=\"dark\"] .helpline-card__title,\n[data-theme=\"dark\"] .resource-card__title,\n[data-theme=\"dark\"] .selfhelp-card__title,\n[data-theme=\"dark\"] .section-title,\n[data-theme=\"dark\"] .support-hub__form-title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .crisis-card__text,\n[data-theme=\"dark\"] .quicklink-card__text,\n[data-theme=\"dark\"] .helpline-card__text,\n[data-theme=\"dark\"] .resource-card__text,\n[data-theme=\"dark\"] .selfhelp-card__text,\n[data-theme=\"dark\"] .section-subtitle {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .selfhelp-card__steps,\n[data-theme=\"dark\"] .selfhelp-card__list {\n  color: rgba(255, 255, 255, 0.65);\n}\n\n[data-theme=\"dark\"] .appointment-form {\n  background: transparent;\n}\n\n[data-theme=\"dark\"] .form-label {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .form-input,\n[data-theme=\"dark\"] .form-select,\n[data-theme=\"dark\"] .form-textarea {\n  background: #1a1a2e;\n  border-color: #3a3a5a;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .faq-item {\n  border-bottom: 2px solid rgba(255, 255, 255, 0.15);\n}\n\n[data-theme=\"dark\"] .faq-item:first-child {\n  border-top: 2px solid rgba(255, 255, 255, 0.15);\n}\n\n[data-theme=\"dark\"] .faq-item:hover {\n  background: rgba(var(--user-accent-rgb), 0.08);\n}\n\n[data-theme=\"dark\"] .faq-item[open] {\n  background: rgba(var(--user-accent-rgb), 0.05);\n}\n\n[data-theme=\"dark\"] .faq-question {\n  background: transparent;\n  color: #fff !important;\n  font-size: 1rem !important;\n  font-family: 'Poppins', sans-serif !important;\n}\n\n[data-theme=\"dark\"] .faq-question span {\n  color: #fff !important;\n  font-size: 1rem !important;\n  opacity: 1 !important;\n  visibility: visible !important;\n}\n\n[data-theme=\"dark\"] .faq-question:hover,\n[data-theme=\"dark\"] .faq-item[open] .faq-question {\n  background: transparent;\n  color: #fff !important;\n}\n\n[data-theme=\"dark\"] .faq-answer {\n  background: transparent;\n}\n\n[data-theme=\"dark\"] .faq-answer p {\n  color: rgba(255, 255, 255, 0.85) !important;\n}\n\n[data-theme=\"dark\"] .faq-intro {\n  background: linear-gradient(135deg, #3a3a5a 0%, #2a2a4a 100%);\n}\n\n[data-theme=\"dark\"] .faq-list {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .faq-list::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .faq-list::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n[data-theme=\"dark\"] .faq-list::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n[data-high-contrast=\"true\"] .support-hero,\n[data-high-contrast=\"true\"] .crisis-section,\n[data-high-contrast=\"true\"] .quicklinks-section,\n[data-high-contrast=\"true\"] .helplines-section,\n[data-high-contrast=\"true\"] .resources-section,\n[data-high-contrast=\"true\"] .selfhelp-section,\n[data-high-contrast=\"true\"] .appointment-section,\n[data-high-contrast=\"true\"] .faq-section {\n  background: #000;\n}\n\n[data-high-contrast=\"true\"] .support-hero__title,\n[data-high-contrast=\"true\"] .section-title,\n[data-high-contrast=\"true\"] .appointment-info__title,\n[data-high-contrast=\"true\"] .crisis-banner__title {\n  color: #ffff00;\n}\n\n[data-high-contrast=\"true\"] .support-hero__subtitle,\n[data-high-contrast=\"true\"] .section-subtitle,\n[data-high-contrast=\"true\"] .crisis-banner__text,\n[data-high-contrast=\"true\"] .appointment-info__text {\n  color: #fff;\n}\n\n[data-high-contrast=\"true\"] .crisis-card,\n[data-high-contrast=\"true\"] .quicklink-card,\n[data-high-contrast=\"true\"] .helpline-card,\n[data-high-contrast=\"true\"] .resource-card,\n[data-high-contrast=\"true\"] .selfhelp-card,\n[data-high-contrast=\"true\"] .appointment-form {\n  background: #000;\n  border: 2px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-item {\n  border: none;\n  border-bottom: 1px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-item:first-child {\n  border-top: 1px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .crisis-card__title,\n[data-high-contrast=\"true\"] .quicklink-card__title,\n[data-high-contrast=\"true\"] .helpline-card__title,\n[data-high-contrast=\"true\"] .resource-card__title,\n[data-high-contrast=\"true\"] .selfhelp-card__title {\n  color: #ffff00;\n}\n\n[data-high-contrast=\"true\"] .crisis-card__text,\n[data-high-contrast=\"true\"] .quicklink-card__text,\n[data-high-contrast=\"true\"] .helpline-card__text,\n[data-high-contrast=\"true\"] .resource-card__text,\n[data-high-contrast=\"true\"] .selfhelp-card__text,\n[data-high-contrast=\"true\"] .selfhelp-card__steps,\n[data-high-contrast=\"true\"] .selfhelp-card__list,\n[data-high-contrast=\"true\"] .faq-answer p {\n  color: #fff;\n}\n\n[data-high-contrast=\"true\"] .form-submit {\n  background: #ffff00;\n  color: #000;\n}\n\n[data-high-contrast=\"true\"] .faq-grid {\n  border: 2px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-intro {\n  background: #000;\n  border-right: 2px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-intro__title {\n  color: #ffff00;\n}\n\n[data-high-contrast=\"true\"] .faq-intro__text {\n  color: #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-list {\n  background: #000;\n}\n\n[data-high-contrast=\"true\"] .faq-list::-webkit-scrollbar-track {\n  background: #333;\n}\n\n[data-high-contrast=\"true\"] .faq-list::-webkit-scrollbar-thumb {\n  background: #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-list::-webkit-scrollbar-thumb:hover {\n  background: #ffff00;\n}\n\n[data-high-contrast=\"true\"] .faq-question {\n  background: transparent;\n  color: #fff;\n}\n\n@media (max-width: 768px) {\n  .support-hero {\n    padding: 60px 20px;\n  }\n\n  .support-hero__title {\n    font-size: 2rem;\n  }\n\n  .support-hero__subtitle {\n    font-size: 1rem;\n  }\n\n  .crisis-banner {\n    flex-direction: column;\n    text-align: center;\n  }\n\n  .crisis-banner__actions {\n    width: 100%;\n    justify-content: center;\n  }\n\n  .quicklinks-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  .helplines-grid:not(.list-view) {\n    grid-template-columns: 1fr;\n  }\n\n  .helpline-card {\n    padding: 16px;\n    grid-template-columns: 36px 1fr;\n    gap: 0 10px;\n  }\n\n  .helpline-card__icon-wrapper {\n    width: 36px;\n    height: 36px;\n  }\n\n  .helpline-card__contacts {\n    flex-direction: column;\n    gap: 6px;\n  }\n\n  .helpline-contact {\n    justify-content: center;\n    width: 100%;\n    text-align: center;\n  }\n\n  .helpline-card__header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 4px;\n  }\n\n  .support-hub {\n    padding: 60px 16px 80px;\n  }\n\n  .support-hub__title {\n    font-size: 2rem;\n  }\n\n  .support-hub__subtitle {\n    font-size: 1rem;\n  }\n\n  .support-hub__grid {\n    gap: 32px;\n    padding: 0 16px;\n  }\n\n  .support-hub__trust-row {\n    grid-template-columns: 1fr;\n  }\n\n  .support-hub__form-header {\n    padding: 20px 20px;\n  }\n\n  .support-hub__form-card .appointment-form {\n    padding: 20px;\n  }\n\n  .support-hub__faq-header {\n    padding: 20px 20px 0;\n  }\n\n  .support-hub__faq-card .faq-split__container {\n    grid-template-columns: 1fr;\n  }\n\n  .support-hub__faq-card .faq-split__left {\n    border-right: none;\n    border-bottom: 1px solid rgba(var(--user-accent-rgb), 0.1);\n  }\n\n  .form-row {\n    grid-template-columns: 1fr;\n  }\n\n  .section-title {\n    font-size: 1.6rem;\n  }\n\n  .faq-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .faq-intro {\n    padding: 32px 24px;\n  }\n\n  .faq-intro__title {\n    font-size: 1.6rem;\n  }\n\n  .faq-list {\n    padding: 24px 20px;\n  }\n\n  [data-high-contrast=\"true\"] .faq-intro {\n    border-right: none;\n    border-bottom: 2px solid #fff;\n  }\n}\n\n@media (max-width: 480px) {\n  .quicklinks-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .crisis-cards {\n    grid-template-columns: 1fr;\n  }\n\n  .helplines-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n@media (min-width: 1200px) {\n  .support-hero {\n    padding: 100px 40px;\n  }\n\n  .support-hero__title {\n    font-size: 3.5rem;\n  }\n\n  .support-hero__subtitle {\n    font-size: 1.3rem;\n  }\n\n  .section-title {\n    font-size: 2.4rem;\n  }\n\n  .section-subtitle {\n    font-size: 1.1rem;\n  }\n\n  .crisis-banner {\n    padding: 32px 40px;\n  }\n\n  .crisis-banner__title {\n    font-size: 1.6rem;\n  }\n\n  .crisis-banner__number {\n    font-size: 2.8rem;\n  }\n\n  .crisis-cards {\n    gap: 28px;\n  }\n\n  .crisis-card {\n    padding: 32px;\n  }\n\n  .crisis-card__title {\n    font-size: 1.3rem;\n  }\n\n  .crisis-card__text {\n    font-size: 1.05rem;\n  }\n\n  .quicklink-card {\n    padding: 32px 24px;\n  }\n\n  .quicklink-card__icon {\n    font-size: 3rem;\n  }\n\n  .quicklink-card__title {\n    font-size: 1.15rem;\n  }\n\n  .helpline-card {\n    padding: 24px;\n  }\n\n  .helpline-card__title {\n    font-size: 1.1rem;\n  }\n\n  .helpline-card__text {\n    font-size: 0.95rem;\n  }\n\n  .resource-card {\n    padding: 32px;\n  }\n\n  .resource-card__title {\n    font-size: 1.35rem;\n  }\n\n  .resource-card__text {\n    font-size: 1.05rem;\n  }\n\n  .selfhelp-card {\n    padding: 36px;\n  }\n\n  .selfhelp-card__title {\n    font-size: 1.25rem;\n  }\n\n  .selfhelp-card__text {\n    font-size: 1.05rem;\n  }\n\n  .selfhelp-card__steps,\n  .selfhelp-card__list {\n    font-size: 1rem;\n  }\n\n  .appointment-section {\n    padding: 100px 40px;\n  }\n\n  .appointment-content {\n    max-width: 1300px;\n    gap: 80px;\n  }\n\n  .appointment-info__title {\n    font-size: 2.6rem;\n  }\n\n  .appointment-info__text {\n    font-size: 1.15rem;\n  }\n\n  .appointment-feature {\n    font-size: 1.1rem;\n  }\n\n  .appointment-form {\n    padding: 48px;\n  }\n\n  .form-label {\n    font-size: 1.05rem;\n  }\n\n  .form-input,\n  .form-select,\n  .form-textarea {\n    padding: 18px 20px;\n    font-size: 1.1rem;\n  }\n\n  .form-submit {\n    padding: 20px 32px;\n    font-size: 1.15rem;\n  }\n\n  .faq-question {\n    font-size: 1.15rem;\n  }\n\n  .faq-answer p {\n    font-size: 1.05rem;\n  }\n}\n\n@media (min-width: 1600px) {\n  .support-hero__title {\n    font-size: 4rem;\n  }\n\n  .support-hero__subtitle {\n    font-size: 1.4rem;\n  }\n\n  .section-title {\n    font-size: 2.8rem;\n  }\n\n  .appointment-content {\n    max-width: 1500px;\n  }\n\n  .appointment-info__title {\n    font-size: 3rem;\n  }\n\n  .appointment-info__text {\n    font-size: 1.25rem;\n  }\n\n  .appointment-form {\n    padding: 56px;\n  }\n\n  .form-input,\n  .form-select,\n  .form-textarea {\n    padding: 20px 24px;\n    font-size: 1.15rem;\n  }\n\n  .faq-question {\n    font-size: 1.25rem;\n  }\n\n  .faq-answer p {\n    font-size: 1.1rem;\n  }\n}\n\n.selfhelp-card--interactive {\n  cursor: pointer;\n  border: none;\n  text-align: left;\n  width: 100%;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.selfhelp-card--interactive:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);\n}\n\n.selfhelp-card__cta {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  color: var(--gold-crayola, #d4a853);\n  font-weight: 600;\n  font-size: 0.95rem;\n}\n\n.selfhelp-card__cta ion-icon {\n  font-size: 1.4rem;\n  transition: transform 0.3s ease;\n}\n\n.selfhelp-card--interactive:hover .selfhelp-card__cta ion-icon {\n  transform: scale(1.2);\n}\n\n.wellness-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease, visibility 0.3s ease;\n}\n\n.wellness-modal.is-active {\n  opacity: 1;\n  visibility: visible;\n}\n\n.wellness-modal__backdrop {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n}\n\n.wellness-modal__content {\n  position: relative;\n  background: #fff;\n  border-radius: 24px;\n  padding: 40px;\n  max-width: 500px;\n  width: 90%;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.25);\n  transform: scale(0.9) translateY(20px);\n  transition: transform 0.3s ease;\n}\n\n.wellness-modal.is-active .wellness-modal__content {\n  transform: scale(1) translateY(0);\n}\n\n.wellness-modal__content--grounding {\n  max-width: 550px;\n}\n\n.wellness-modal__close {\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s ease;\n}\n\n.wellness-modal__close:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.wellness-modal__close ion-icon {\n  font-size: 1.5rem;\n  color: #555;\n}\n\n.wellness-modal__title {\n  font-size: 1.8rem;\n  font-weight: 700;\n  text-align: center;\n  margin-bottom: 24px;\n  color: #2d2d2d;\n}\n\n.breathing-patterns {\n  display: flex;\n  gap: 8px;\n  justify-content: center;\n  margin-bottom: 32px;\n  flex-wrap: wrap;\n}\n\n.breathing-pattern {\n  padding: 10px 18px;\n  border: 2px solid #e0dcd6;\n  background: #fff;\n  border-radius: 25px;\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: #555;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.breathing-pattern:hover {\n  border-color: var(--gold-crayola, #d4a853);\n}\n\n.breathing-pattern.is-active {\n  background: var(--gold-crayola, #d4a853);\n  border-color: var(--gold-crayola, #d4a853);\n  color: #fff;\n}\n\n.breathing-circle-container {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 300px;\n  margin-bottom: 24px;\n}\n\n.breathing-glow {\n  position: absolute;\n  width: 160px;\n  height: 160px;\n  border-radius: 50%;\n  background: radial-gradient(circle, var(--user-accent, #d4a853) 0%, transparent 70%);\n  opacity: 0.15;\n  transition: opacity 1s ease, width 1s ease, height 1s ease;\n  pointer-events: none;\n  z-index: 0;\n}\n\n.breathing-circle-container.is-active .breathing-glow {\n  opacity: 0.2;\n}\n\n.breathing-circle-container.is-active.phase-inhale .breathing-glow {\n  width: 280px;\n  height: 280px;\n  opacity: 0.35;\n}\n\n.breathing-circle-container.is-active.phase-hold .breathing-glow {\n  width: 280px;\n  height: 280px;\n  opacity: 0.25;\n}\n\n.breathing-circle-container.is-active.phase-exhale .breathing-glow {\n  width: 160px;\n  height: 160px;\n  opacity: 0.12;\n}\n\n.breathing-ring {\n  position: absolute;\n  border-radius: 50%;\n  border: 2px solid var(--user-accent, #d4a853);\n  opacity: 0;\n  pointer-events: none;\n  z-index: 1;\n}\n\n.breathing-ring--1 {\n  width: 190px;\n  height: 190px;\n}\n\n.breathing-ring--2 {\n  width: 220px;\n  height: 220px;\n}\n\n.breathing-ring--3 {\n  width: 250px;\n  height: 250px;\n}\n\n.breathing-circle-container.is-active .breathing-ring {\n  animation: breathing-ring-ripple 3s ease-out infinite;\n}\n\n.breathing-circle-container.is-active .breathing-ring--2 {\n  animation-delay: 1s;\n}\n\n.breathing-circle-container.is-active .breathing-ring--3 {\n  animation-delay: 2s;\n}\n\n@keyframes breathing-ring-ripple {\n  0% {\n    opacity: 0.5;\n    transform: scale(0.85);\n  }\n  100% {\n    opacity: 0;\n    transform: scale(1.3);\n  }\n}\n\n.breathing-progress-ring {\n  position: absolute;\n  width: 195px;\n  height: 195px;\n  z-index: 2;\n  transform: rotate(-90deg);\n}\n\n.breathing-progress-ring__track {\n  fill: none;\n  stroke: rgba(0, 0, 0, 0.06);\n  stroke-width: 4;\n}\n\n.breathing-progress-ring__fill {\n  fill: none;\n  stroke: var(--user-accent, #d4a853);\n  stroke-width: 4;\n  stroke-linecap: round;\n  stroke-dasharray: 590.6;\n  stroke-dashoffset: 590.6;\n  transition: stroke-dashoffset 0.3s linear;\n}\n\n.breathing-circle {\n  position: relative;\n  width: 170px;\n  height: 170px;\n  border-radius: 50%;\n  background: linear-gradient(145deg, var(--user-accent, #d4a853) 0%, var(--user-accent-light, #e8c77b) 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 3;\n  transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.8s ease;\n  box-shadow: 0 8px 30px rgba(var(--user-accent-rgb, 212, 168, 83), 0.35);\n}\n\n.breathing-circle.is-inhaling {\n  transform: scale(1.3);\n  box-shadow: 0 12px 50px rgba(var(--user-accent-rgb, 212, 168, 83), 0.5);\n}\n\n.breathing-circle.is-holding {\n  transform: scale(1.3);\n  box-shadow: 0 10px 40px rgba(var(--user-accent-rgb, 212, 168, 83), 0.4);\n}\n\n.breathing-circle.is-exhaling {\n  transform: scale(1);\n  box-shadow: 0 6px 25px rgba(var(--user-accent-rgb, 212, 168, 83), 0.25);\n}\n\n.breathing-circle__inner {\n  text-align: center;\n  color: #fff;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2px;\n}\n\n.breathing-circle__phase-icon {\n  font-size: 1.6rem;\n  line-height: 1;\n  margin-bottom: 2px;\n  min-height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.breathing-icon {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.breathing-icon--inhale {\n  animation: icon-float-up 1.5s ease-in-out infinite;\n}\n\n.breathing-icon--exhale {\n  animation: icon-float-down 1.5s ease-in-out infinite;\n}\n\n.breathing-icon--hold {\n  animation: icon-pulse 1.2s ease-in-out infinite;\n}\n\n@keyframes icon-float-up {\n  0%, 100% { transform: translateY(2px); }\n  50% { transform: translateY(-4px); }\n}\n\n@keyframes icon-float-down {\n  0%, 100% { transform: translateY(-2px); }\n  50% { transform: translateY(4px); }\n}\n\n@keyframes icon-pulse {\n  0%, 100% { transform: scale(1); opacity: 0.8; }\n  50% { transform: scale(1.15); opacity: 1; }\n}\n\n.breathing-circle__text {\n  display: block;\n  font-size: 1.1rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  transition: opacity 0.3s ease;\n}\n\n.breathing-circle__timer {\n  display: block;\n  font-size: 2rem;\n  font-weight: 800;\n  margin-top: 0;\n  line-height: 1.1;\n  min-height: 32px;\n}\n\n.breathing-controls {\n  display: flex;\n  justify-content: center;\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.breathing-btn {\n  padding: 14px 40px;\n  border: none;\n  border-radius: 30px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.breathing-btn--start {\n  background: linear-gradient(135deg, var(--user-accent, #d4a853) 0%, var(--user-accent-light, #e8c77b) 100%);\n  color: #fff;\n  box-shadow: 0 4px 20px rgba(var(--user-accent-rgb, 212, 168, 83), 0.4);\n}\n\n.breathing-btn--start:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 25px rgba(var(--user-accent-rgb, 212, 168, 83), 0.5);\n}\n\n.breathing-btn--stop {\n  background: #e74c3c;\n  color: #fff;\n}\n\n.breathing-btn--stop:hover {\n  background: #c0392b;\n}\n\n.breathing-stats {\n  display: flex;\n  justify-content: center;\n  gap: 40px;\n  padding: 16px 0;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n  margin-bottom: 16px;\n}\n\n.breathing-stat {\n  text-align: center;\n}\n\n.breathing-stat__value {\n  display: block;\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: var(--user-accent, #d4a853);\n}\n\n.breathing-stat__label {\n  font-size: 0.85rem;\n  color: #777;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.breathing-audio-toggle {\n  display: flex;\n  justify-content: center;\n}\n\n.breathing-audio-label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.95rem;\n  color: #555;\n  cursor: pointer;\n}\n\n.breathing-audio-label input[type=\"checkbox\"] {\n  width: 18px;\n  height: 18px;\n  accent-color: var(--user-accent, #d4a853);\n}\n\n.grounding-intro {\n  text-align: center;\n  color: #666;\n  margin-bottom: 24px;\n  font-size: 1rem;\n}\n\n.grounding-progress {\n  width: 100%;\n  height: 6px;\n  background: rgba(var(--user-accent-rgb), 0.12);\n  border-radius: 3px;\n  margin-bottom: 32px;\n  overflow: hidden;\n}\n\n.grounding-progress__bar {\n  height: 100%;\n  width: 0%;\n  background: linear-gradient(90deg, var(--gold-crayola, #d4a853) 0%, var(--user-accent-light) 100%);\n  border-radius: 3px;\n  transition: width 0.5s ease;\n}\n\n.grounding-step {\n  display: none;\n  animation: grounding-fadein 0.4s ease forwards;\n}\n\n.grounding-step.is-active {\n  display: block;\n}\n\n@keyframes grounding-fadein {\n  from {\n    opacity: 0;\n    transform: translateX(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n.grounding-step__icon {\n  position: relative;\n  width: 80px;\n  height: 80px;\n  margin: 0 auto 20px;\n  background: linear-gradient(135deg, var(--gold-crayola, #d4a853) 0%, var(--user-accent-light) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.grounding-step__icon ion-icon {\n  font-size: 2.5rem;\n  color: #fff;\n}\n\n.grounding-step__icon--complete {\n  background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);\n}\n\n.grounding-step__number {\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  width: 30px;\n  height: 30px;\n  background: #fff;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  font-size: 1rem;\n  color: var(--gold-crayola, #d4a853);\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);\n}\n\n.grounding-step__title {\n  text-align: center;\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  margin-bottom: 8px;\n}\n\n.grounding-step__text {\n  text-align: center;\n  color: #666;\n  margin-bottom: 20px;\n}\n\n.grounding-step__inputs {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.grounding-input {\n  width: 100%;\n  padding: 14px 18px;\n  border: 2px solid #e0dcd6;\n  border-radius: 12px;\n  font-size: 1rem;\n  background: #fff;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.grounding-input:focus {\n  outline: none;\n  border-color: var(--gold-crayola, #d4a853);\n  box-shadow: 0 0 0 4px rgba(212, 168, 83, 0.15);\n}\n\n.grounding-input:not(:placeholder-shown) {\n  border-color: #4caf50;\n  background: rgba(76, 175, 80, 0.05);\n}\n\n.grounding-nav {\n  display: flex;\n  justify-content: space-between;\n  gap: 12px;\n  margin-top: 24px;\n}\n\n.grounding-nav__btn {\n  flex: 1;\n  padding: 14px 24px;\n  border: none;\n  border-radius: 12px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.grounding-nav__btn--prev {\n  background: rgba(var(--user-accent-rgb), 0.12);\n  color: #555;\n}\n\n.grounding-nav__btn--prev:hover:not(:disabled) {\n  background: #ddd8d1;\n}\n\n.grounding-nav__btn--prev:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.grounding-nav__btn--next {\n  background: linear-gradient(135deg, var(--gold-crayola, #d4a853) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n}\n\n.grounding-nav__btn--next:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(212, 168, 83, 0.4);\n}\n\n.grounding-nav__btn--restart {\n  background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);\n  color: #fff;\n}\n\n.grounding-nav__btn--restart:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);\n}\n\n[data-theme=\"dark\"] .wellness-modal__content {\n  background: linear-gradient(145deg, #2d2b3d 0%, #3d3a50 100%);\n}\n\n[data-theme=\"dark\"] .wellness-modal__title {\n  color: var(--user-accent-soft);\n}\n\n[data-theme=\"dark\"] .wellness-modal__close {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .wellness-modal__close ion-icon {\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .breathing-pattern {\n  background: #3d3a50;\n  border-color: #4d4a60;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .breathing-pattern.is-active {\n  background: var(--gold-crayola, #d4a853);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .grounding-intro,\n[data-theme=\"dark\"] .grounding-step__text {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .grounding-step__title {\n  color: var(--user-accent-soft);\n}\n\n[data-theme=\"dark\"] .grounding-input {\n  background: #3d3a50;\n  border-color: #4d4a60;\n  color: var(--user-accent-soft);\n}\n\n[data-theme=\"dark\"] .grounding-input::placeholder {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .grounding-progress {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .grounding-nav__btn--prev {\n  background: #4d4a60;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .breathing-progress-ring__track {\n  stroke: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .breathing-stats {\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .breathing-audio-label {\n  color: #ccc;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .support-hero::before {\n    animation: none;\n  }\n  \n  .support-hero__decorative {\n    animation: none;\n  }\n  \n  .support-hero__badge,\n  .support-hero__title,\n  .support-hero__subtitle,\n  .support-hero__search {\n    animation: none;\n    opacity: 1;\n    transform: none;\n  }\n  \n  .animate-section,\n  .animate-stagger > *,\n  .animate-slide-left,\n  .animate-slide-right,\n  .animate-scale {\n    opacity: 1;\n    transform: none;\n    transition: none;\n  }\n  \n  .crisis-btn--primary {\n    animation: none;\n  }\n  \n  .section-divider::before {\n    animation: none;\n  }\n  \n  .back-to-top {\n    animation: none;\n  }\n  \n  .breathing-circle {\n    transition: none;\n  }\n  \n  .breathing-circle-container.is-active .breathing-ring {\n    animation: none;\n    opacity: 0.3;\n  }\n\n  .breathing-icon--inhale,\n  .breathing-icon--exhale,\n  .breathing-icon--hold {\n    animation: none;\n  }\n\n  .breathing-glow {\n    transition: none;\n  }\n  \n  .grounding-step {\n    animation: none;\n  }\n  \n  .wellness-modal__content {\n    transition: none;\n  }\n}\n\n@media (max-width: 600px) {\n  .wellness-modal__content {\n    padding: 24px 20px;\n    border-radius: 16px;\n  }\n  \n  .wellness-modal__title {\n    font-size: 1.5rem;\n  }\n  \n  .breathing-patterns {\n    gap: 6px;\n  }\n  \n  .breathing-pattern {\n    padding: 8px 14px;\n    font-size: 0.85rem;\n  }\n  \n  .breathing-circle-container {\n    height: 240px;\n  }\n  \n  .breathing-circle {\n    width: 140px;\n    height: 140px;\n  }\n\n  .breathing-progress-ring {\n    width: 160px;\n    height: 160px;\n  }\n\n  .breathing-circle__phase-icon {\n    font-size: 1.3rem;\n  }\n  \n  .breathing-circle__text {\n    font-size: 0.9rem;\n  }\n  \n  .breathing-circle__timer {\n    font-size: 1.6rem;\n  }\n  \n  .breathing-ring--1 {\n    width: 155px;\n    height: 155px;\n  }\n  \n  .breathing-ring--2 {\n    width: 180px;\n    height: 180px;\n  }\n  \n  .breathing-ring--3 {\n    width: 205px;\n    height: 205px;\n  }\n\n  .breathing-glow {\n    width: 130px;\n    height: 130px;\n  }\n\n  .breathing-circle-container.is-active.phase-inhale .breathing-glow {\n    width: 220px;\n    height: 220px;\n  }\n\n  .breathing-circle-container.is-active.phase-hold .breathing-glow {\n    width: 220px;\n    height: 220px;\n  }\n  \n  .breathing-stats {\n    gap: 24px;\n  }\n  \n  .breathing-stat__value {\n    font-size: 1.5rem;\n  }\n  \n  .grounding-step__icon {\n    width: 60px;\n    height: 60px;\n  }\n  \n  .grounding-step__icon ion-icon {\n    font-size: 1.8rem;\n  }\n  \n  .grounding-step__number {\n    width: 24px;\n    height: 24px;\n    font-size: 0.85rem;\n  }\n  \n  .grounding-nav {\n    flex-direction: column;\n  }\n}\n\n.quote-callout {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.04) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n  border-left: 4px solid var(--user-accent-light);\n  border-radius: 0 16px 16px 0;\n  padding: 28px 32px;\n  margin: 40px 0;\n  position: relative;\n  overflow: hidden;\n}\n\n.quote-callout::before {\n  content: \"\\201C\";\n  position: absolute;\n  top: -10px;\n  left: 20px;\n  font-size: 6rem;\n  font-family: Georgia, serif;\n  color: rgba(var(--user-accent-rgb), 0.2);\n  line-height: 1;\n}\n\n.quote-callout__text {\n  font-size: 1.2rem;\n  font-style: italic;\n  color: #555;\n  line-height: 1.7;\n  position: relative;\n  z-index: 1;\n  margin-bottom: 12px;\n}\n\n.quote-callout__author {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: var(--user-accent-dark);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.quote-callout__author::before {\n  content: \"â€”\";\n}\n\n[data-theme=\"dark\"] .quote-callout {\n  background: linear-gradient(135deg, #2a2a4a 0%, #252542 100%);\n  border-left-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .quote-callout::before {\n  color: rgba(var(--user-accent-rgb), 0.1);\n}\n\n[data-theme=\"dark\"] .quote-callout__text {\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .quote-callout__author {\n  color: var(--user-accent-light);\n}\n\n.section-icon {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 60px;\n  height: 60px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 16px;\n  margin-bottom: 20px;\n  box-shadow: 0 8px 25px rgba(var(--user-accent-rgb), 0.25);\n}\n\n.section-icon ion-icon {\n  font-size: 28px;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .section-icon {\n  background: linear-gradient(135deg, #3d3a50 0%, #4d4a60 100%);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .section-divider::before {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .section-divider--reverse::before {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .section-title {\n  background: linear-gradient(135deg, #fff 0%, #ccc 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.crisis-btn,\n.helpline-contact {\n  position: relative;\n  overflow: hidden;\n}\n\n.ripple-effect {\n  position: absolute;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.4);\n  transform: scale(0);\n  animation: ripple 0.6s ease-out;\n  pointer-events: none;\n}\n\n@keyframes ripple {\n  to {\n    transform: scale(4);\n    opacity: 0;\n  }\n}\n","path":null,"size_bytes":128326,"size_tokens":null},"js/toast.js":{"content":"// ==================== TOAST NOTIFICATIONS ====================\n\nconst ToastManager = (function() {\n  let container = null;\n  \n  function init() {\n    if (container) return;\n    \n    container = document.createElement('div');\n    container.id = 'toast-container';\n    container.setAttribute('role', 'alert');\n    container.setAttribute('aria-live', 'polite');\n    document.body.appendChild(container);\n  }\n  \n  function show(message, type = 'info', duration = 4000) {\n    init();\n    \n    const toast = document.createElement('div');\n    toast.className = `toast toast-${type}`;\n    \n    const iconMap = {\n      success: '<i class=\"fas fa-check-circle\"></i>',\n      error: '<i class=\"fas fa-exclamation-circle\"></i>',\n      warning: '<i class=\"fas fa-exclamation-triangle\"></i>',\n      info: '<i class=\"fas fa-info-circle\"></i>'\n    };\n    \n    toast.innerHTML = `\n      <span class=\"toast-icon\">${iconMap[type] || iconMap.info}</span>\n      <span class=\"toast-message\">${escapeHtml(message)}</span>\n      <button class=\"toast-close\" aria-label=\"Close notification\">\n        <i class=\"fas fa-times\"></i>\n      </button>\n    `;\n    \n    const closeBtn = toast.querySelector('.toast-close');\n    closeBtn.addEventListener('click', () => removeToast(toast));\n    \n    container.appendChild(toast);\n    \n    requestAnimationFrame(() => {\n      toast.classList.add('toast-visible');\n    });\n    \n    if (duration > 0) {\n      setTimeout(() => removeToast(toast), duration);\n    }\n    \n    return toast;\n  }\n  \n  function removeToast(toast) {\n    if (!toast || !toast.parentNode) return;\n    \n    toast.classList.remove('toast-visible');\n    toast.classList.add('toast-hiding');\n    \n    setTimeout(() => {\n      if (toast.parentNode) {\n        toast.parentNode.removeChild(toast);\n      }\n    }, 300);\n  }\n  \n  function escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n  \n  function success(message, duration) {\n    return show(message, 'success', duration);\n  }\n  \n  function error(message, duration) {\n    return show(message, 'error', duration);\n  }\n  \n  function warning(message, duration) {\n    return show(message, 'warning', duration);\n  }\n  \n  function info(message, duration) {\n    return show(message, 'info', duration);\n  }\n  \n  return {\n    show,\n    success,\n    error,\n    warning,\n    info\n  };\n})();\n\nif (typeof window !== 'undefined') {\n  window.ToastManager = ToastManager;\n}\n","path":null,"size_bytes":2465,"size_tokens":null},"scripts/audit_translations.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nTranslation Audit Script\nChecks translations.csv for missing or empty translations and reports completeness per language.\n\nUsage:\n    python scripts/audit_translations.py\n    python scripts/audit_translations.py --verbose    # Show all missing keys\n    python scripts/audit_translations.py --threshold 95  # Fail if any language < 95% complete\n\"\"\"\n\nimport csv\nimport sys\nimport os\nimport argparse\nfrom collections import defaultdict\n\ndef audit_translations(csv_path='translations.csv', verbose=False, threshold=None):\n    \"\"\"Audit the translations CSV file for completeness.\"\"\"\n    \n    if not os.path.exists(csv_path):\n        print(f\"Error: {csv_path} not found\")\n        return False\n    \n    with open(csv_path, 'r', encoding='utf-8') as f:\n        reader = csv.DictReader(f)\n        headers = reader.fieldnames\n        \n        if not headers or 'key' not in headers:\n            print(\"Error: CSV must have a 'key' column\")\n            return False\n        \n        languages = [h for h in headers if h != 'key']\n        \n        stats = {lang: {'total': 0, 'filled': 0, 'missing': []} for lang in languages}\n        duplicate_keys = []\n        seen_keys = set()\n        all_keys = []\n        \n        for row in reader:\n            key = row.get('key', '').strip()\n            if not key:\n                continue\n            \n            all_keys.append(key)\n            \n            if key in seen_keys:\n                duplicate_keys.append(key)\n            seen_keys.add(key)\n            \n            for lang in languages:\n                stats[lang]['total'] += 1\n                value = row.get(lang, '').strip()\n                if value:\n                    stats[lang]['filled'] += 1\n                else:\n                    stats[lang]['missing'].append(key)\n    \n    print(\"\\n\" + \"=\" * 60)\n    print(\"TRANSLATION AUDIT REPORT\")\n    print(\"=\" * 60)\n    \n    print(f\"\\nTotal translation keys: {len(all_keys)}\")\n    print(f\"Languages: {', '.join(languages)}\")\n    \n    if duplicate_keys:\n        print(f\"\\nâš ï¸  Duplicate keys found: {len(duplicate_keys)}\")\n        for key in duplicate_keys[:10]:\n            print(f\"   - {key}\")\n        if len(duplicate_keys) > 10:\n            print(f\"   ... and {len(duplicate_keys) - 10} more\")\n    \n    print(\"\\n\" + \"-\" * 60)\n    print(\"COMPLETENESS BY LANGUAGE\")\n    print(\"-\" * 60)\n    \n    all_pass = True\n    \n    for lang in languages:\n        total = stats[lang]['total']\n        filled = stats[lang]['filled']\n        missing_count = len(stats[lang]['missing'])\n        percentage = (filled / total * 100) if total > 0 else 0\n        \n        status = \"âœ…\" if missing_count == 0 else \"âš ï¸\"\n        if threshold and percentage < threshold:\n            status = \"âŒ\"\n            all_pass = False\n        \n        print(f\"{status} {lang.upper():5} : {filled:4}/{total:4} ({percentage:5.1f}%) - {missing_count} missing\")\n        \n        if verbose and stats[lang]['missing']:\n            print(f\"      Missing keys:\")\n            for key in stats[lang]['missing'][:20]:\n                print(f\"         - {key}\")\n            if len(stats[lang]['missing']) > 20:\n                print(f\"         ... and {len(stats[lang]['missing']) - 20} more\")\n    \n    print(\"\\n\" + \"-\" * 60)\n    \n    if threshold:\n        if all_pass:\n            print(f\"âœ… All languages meet the {threshold}% threshold\")\n        else:\n            print(f\"âŒ Some languages are below the {threshold}% threshold\")\n            return False\n    \n    total_missing = sum(len(stats[lang]['missing']) for lang in languages)\n    if total_missing == 0:\n        print(\"âœ… All translations are complete!\")\n    else:\n        print(f\"ðŸ“ Total missing translations across all languages: {total_missing}\")\n        print(\"   Run with --verbose to see all missing keys\")\n    \n    print()\n    return all_pass and total_missing == 0\n\n\ndef main():\n    parser = argparse.ArgumentParser(description='Audit translations for completeness')\n    parser.add_argument('--verbose', '-v', action='store_true', \n                        help='Show all missing translation keys')\n    parser.add_argument('--threshold', '-t', type=float, default=None,\n                        help='Minimum percentage required (fails if any language is below)')\n    parser.add_argument('--csv', default='translations.csv',\n                        help='Path to translations CSV file')\n    \n    args = parser.parse_args()\n    \n    success = audit_translations(args.csv, args.verbose, args.threshold)\n    sys.exit(0 if success else 1)\n\n\nif __name__ == '__main__':\n    main()\n","path":null,"size_bytes":4591,"size_tokens":null},"profile/profile-immersive.css":{"content":"/* === VARIABLES === */\n:root {\n  --time-primary: #87CEEB;\n  --time-secondary: #FFB347;\n  --time-bg-start: #87CEEB;\n  --time-bg-mid: #E0F4FF;\n  --time-bg-end: #FFF8E7;\n  --time-text: #1a1a2e;\n  --time-glow: rgba(255, 183, 77, 0.3);\n  --parallax-speed: 0.5;\n}\n\n/* === TIME THEMES === */\n.time-morning {\n  --time-primary: #FFB347;\n  --time-secondary: #87CEEB;\n  --time-bg-start: #FFE4B5;\n  --time-bg-mid: #FFF8E7;\n  --time-bg-end: #87CEEB;\n  --time-glow: rgba(255, 183, 77, 0.4);\n}\n\n.time-afternoon {\n  --time-primary: #87CEEB;\n  --time-secondary: #98D8C8;\n  --time-bg-start: #87CEEB;\n  --time-bg-mid: #B0E0E6;\n  --time-bg-end: #98D8C8;\n  --time-glow: rgba(135, 206, 235, 0.3);\n}\n\n.time-evening {\n  --time-primary: #FF7F50;\n  --time-secondary: #DDA0DD;\n  --time-bg-start: #FF7F50;\n  --time-bg-mid: #FFB6C1;\n  --time-bg-end: #DDA0DD;\n  --time-glow: rgba(255, 127, 80, 0.4);\n}\n\n.time-night {\n  --time-primary: #6B5B95;\n  --time-secondary: #1a1a2e;\n  --time-bg-start: #1a1a2e;\n  --time-bg-mid: #2d2b3d;\n  --time-bg-end: #4a4868;\n  --time-text: #ffffff;\n  --time-glow: rgba(155, 126, 217, 0.4);\n}\n\n/* === TRANSPARENT BACKGROUNDS === */\n.time-morning .mb-profile,\n.time-afternoon .mb-profile,\n.time-evening .mb-profile,\n.time-night .mb-profile {\n  background: transparent !important;\n}\n\n.time-morning,\n.time-afternoon,\n.time-evening,\n.time-night {\n  background: transparent !important;\n}\n\n/* === IMMERSIVE BACKGROUND === */\n.immersive-bg {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: -1;\n  overflow: hidden;\n  transition: background 1s ease;\n}\n\n.immersive-bg__gradient {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(\n    180deg,\n    var(--time-bg-start) 0%,\n    var(--time-bg-mid) 50%,\n    var(--time-bg-end) 100%\n  );\n  transition: background 2s ease;\n}\n\n.immersive-bg__shapes {\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n}\n\n/* === FLOATING SHAPES === */\n.floating-shape {\n  position: absolute;\n  border-radius: 50%;\n  opacity: 0.1;\n  animation: floatShape 20s ease-in-out infinite;\n}\n\n.floating-shape:nth-child(1) {\n  width: 300px;\n  height: 300px;\n  background: var(--time-primary);\n  top: 10%;\n  left: 5%;\n  animation-delay: 0s;\n}\n\n.floating-shape:nth-child(2) {\n  width: 200px;\n  height: 200px;\n  background: var(--time-secondary);\n  top: 60%;\n  right: 10%;\n  animation-delay: -5s;\n}\n\n.floating-shape:nth-child(3) {\n  width: 150px;\n  height: 150px;\n  background: var(--time-primary);\n  bottom: 20%;\n  left: 20%;\n  animation-delay: -10s;\n}\n\n.floating-shape:nth-child(4) {\n  width: 250px;\n  height: 250px;\n  background: var(--time-secondary);\n  top: 30%;\n  right: 25%;\n  animation-delay: -15s;\n}\n\n@keyframes floatShape {\n  0%, 100% {\n    transform: translate(0, 0) scale(1);\n  }\n  25% {\n    transform: translate(30px, -30px) scale(1.05);\n  }\n  50% {\n    transform: translate(-20px, 20px) scale(0.95);\n  }\n  75% {\n    transform: translate(20px, 10px) scale(1.02);\n  }\n}\n\n/* === STARS === */\n.immersive-bg__stars {\n  position: absolute;\n  inset: 0;\n  opacity: 0;\n  transition: opacity 1s ease;\n  pointer-events: none;\n}\n\n.time-night .immersive-bg__stars {\n  opacity: 1;\n}\n\n.star {\n  position: absolute;\n  width: 3px;\n  height: 3px;\n  background: #fff;\n  border-radius: 50%;\n  animation: twinkle 3s ease-in-out infinite;\n}\n\n.star:nth-child(odd) {\n  animation-delay: -1.5s;\n}\n\n@keyframes twinkle {\n  0%, 100% { opacity: 0.3; transform: scale(1); }\n  50% { opacity: 1; transform: scale(1.2); }\n}\n\n/* === SUN === */\n.immersive-bg__sun {\n  position: absolute;\n  top: -50px;\n  right: 10%;\n  width: 150px;\n  height: 150px;\n  background: radial-gradient(circle, rgba(255,215,0,0.8) 0%, rgba(255,165,0,0.4) 40%, transparent 70%);\n  border-radius: 50%;\n  opacity: 0;\n  transition: opacity 1s ease;\n  animation: sunPulse 4s ease-in-out infinite;\n}\n\n.time-morning .immersive-bg__sun,\n.time-afternoon .immersive-bg__sun {\n  opacity: 1;\n}\n\n.time-evening .immersive-bg__sun {\n  opacity: 0.6;\n  background: radial-gradient(circle, rgba(255,127,80,0.8) 0%, rgba(255,99,71,0.4) 40%, transparent 70%);\n}\n\n@keyframes sunPulse {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.1); }\n}\n\n/* === MOON === */\n.immersive-bg__moon {\n  position: absolute;\n  top: 80px;\n  right: 15%;\n  width: 80px;\n  height: 80px;\n  background: radial-gradient(circle at 30% 30%, #fffef0 0%, #e8e4d9 100%);\n  border-radius: 50%;\n  box-shadow: 0 0 40px rgba(255, 254, 240, 0.5);\n  opacity: 0;\n  transition: opacity 1s ease;\n}\n\n.time-night .immersive-bg__moon {\n  opacity: 1;\n}\n\n/* === GREETING === */\n.profile-greeting {\n  text-align: center;\n  padding: 30px 20px 10px;\n  position: relative;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.profile-greeting__time {\n  font-size: 0.9rem;\n  text-transform: uppercase;\n  letter-spacing: 3px;\n  color: var(--time-primary);\n  margin-bottom: 12px;\n  font-weight: 600;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n  display: inline-block;\n  padding: 6px 16px;\n  background: rgba(255, 255, 255, 0.15);\n  backdrop-filter: blur(8px);\n  -webkit-backdrop-filter: blur(8px);\n  border-radius: 20px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.profile-greeting__message {\n  font-family: 'Poppins', sans-serif;\n  font-size: clamp(1.5rem, 4vw, 2.5rem);\n  font-weight: 700;\n  color: var(--time-text);\n  margin-bottom: 8px;\n  line-height: 1.2;\n  white-space: nowrap;\n  display: inline;\n}\n\n.profile-greeting__name {\n  display: inline;\n  white-space: nowrap;\n  background: linear-gradient(135deg, var(--user-accent, #b89b5e) 0%, var(--time-primary) 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.profile-greeting__affirmation {\n  font-size: 1rem;\n  color: var(--time-text);\n  opacity: 0.7;\n  max-width: 500px;\n  margin: 0 auto;\n  font-style: italic;\n}\n\n[data-theme=\"dark\"] .profile-greeting__message,\n.time-night .profile-greeting__message {\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .profile-greeting__affirmation,\n.time-night .profile-greeting__affirmation {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n/* === SCROLL ANIMATIONS === */\n.scroll-reveal {\n  opacity: 0;\n  transform: translateY(40px);\n  transition: opacity 0.8s ease, transform 0.8s ease;\n}\n\n.scroll-reveal.revealed {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.scroll-reveal-left {\n  opacity: 0;\n  transform: translateX(-60px);\n  transition: opacity 0.8s ease, transform 0.8s ease;\n}\n\n.scroll-reveal-left.revealed {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.scroll-reveal-right {\n  opacity: 0;\n  transform: translateX(60px);\n  transition: opacity 0.8s ease, transform 0.8s ease;\n}\n\n.scroll-reveal-right.revealed {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.scroll-reveal-scale {\n  opacity: 0;\n  transform: scale(0.8);\n  transition: opacity 0.8s ease, transform 0.8s ease;\n}\n\n.scroll-reveal-scale.revealed {\n  opacity: 1;\n  transform: scale(1);\n}\n\n.stagger-reveal > * {\n  opacity: 0;\n  transform: translateY(30px);\n  transition: opacity 0.6s ease, transform 0.6s ease;\n}\n\n.stagger-reveal.revealed > *:nth-child(1) { transition-delay: 0.1s; }\n.stagger-reveal.revealed > *:nth-child(2) { transition-delay: 0.2s; }\n.stagger-reveal.revealed > *:nth-child(3) { transition-delay: 0.3s; }\n.stagger-reveal.revealed > *:nth-child(4) { transition-delay: 0.4s; }\n.stagger-reveal.revealed > *:nth-child(5) { transition-delay: 0.5s; }\n.stagger-reveal.revealed > *:nth-child(6) { transition-delay: 0.6s; }\n\n.stagger-reveal.revealed > * {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n/* === IMMERSIVE HEADER === */\n.mb-profile.immersive {\n  background: transparent;\n  padding-top: 80px;\n  min-height: 100vh;\n}\n\n.mb-profile.immersive .mb-profile__wrap {\n  max-width: 1400px;\n  padding: 0 20px 60px;\n}\n\n.mb-profile.immersive .mb-profile__header {\n  background: rgba(255, 255, 255, 0.85);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-profile.immersive .mb-profile__header {\n  background: rgba(45, 43, 61, 0.85);\n  border: 1px solid rgba(155, 126, 217, 0.2);\n}\n\n[data-theme=\"dark\"].time-night .mb-profile.immersive .mb-profile__header,\n[data-theme=\"dark\"] .time-night .mb-profile.immersive .mb-profile__header {\n  background: rgba(45, 43, 61, 0.85);\n  border: 1px solid rgba(155, 126, 217, 0.2);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile.immersive .mb-profile__header {\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid rgba(200, 180, 220, 0.3);\n}\n\n/* === GLASSMORPHISM CARDS === */\n.glass-card {\n  background: rgba(255, 255, 255, 0.7);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  border: 1px solid rgba(255, 255, 255, 0.4);\n  border-radius: 20px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.glass-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12);\n}\n\n[data-theme=\"dark\"] .glass-card {\n  background: rgba(45, 43, 61, 0.7);\n  border: 1px solid rgba(155, 126, 217, 0.2);\n}\n\n[data-theme=\"dark\"].time-night .glass-card,\n[data-theme=\"dark\"] .time-night .glass-card {\n  background: rgba(45, 43, 61, 0.7);\n  border: 1px solid rgba(155, 126, 217, 0.2);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .glass-card {\n  background: rgba(255, 255, 255, 0.85);\n  border: 1px solid rgba(200, 180, 220, 0.4);\n}\n\n/* === STAT COUNTERS === */\n.stat-counter {\n  font-family: 'Poppins', sans-serif;\n  font-weight: 700;\n  font-size: 2rem;\n  background: linear-gradient(135deg, var(--user-accent, #b89b5e) 0%, var(--time-primary) 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.stat-counter.counting {\n  animation: countPulse 0.3s ease;\n}\n\n@keyframes countPulse {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.1); }\n}\n\n/* === PROGRESS RINGS === */\n.progress-ring {\n  position: relative;\n  width: 80px;\n  height: 80px;\n}\n\n.progress-ring__circle {\n  transform: rotate(-90deg);\n  transform-origin: 50% 50%;\n}\n\n.progress-ring__circle-bg {\n  fill: none;\n  stroke: rgba(0, 0, 0, 0.1);\n  stroke-width: 6;\n}\n\n.progress-ring__circle-progress {\n  fill: none;\n  stroke: var(--user-accent, #b89b5e);\n  stroke-width: 6;\n  stroke-linecap: round;\n  stroke-dasharray: 226;\n  stroke-dashoffset: 226;\n  transition: stroke-dashoffset 1.5s ease;\n}\n\n.progress-ring__value {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-family: 'Poppins', sans-serif;\n  font-weight: 700;\n  font-size: 1.25rem;\n}\n\n/* === COMMUNITY FEATURES === */\n.online-status {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.8rem;\n  padding: 4px 10px;\n  border-radius: 20px;\n  background: rgba(0, 0, 0, 0.05);\n}\n\n.online-status__dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: #ccc;\n}\n\n.online-status--online .online-status__dot {\n  background: #4ade80;\n  box-shadow: 0 0 8px rgba(74, 222, 128, 0.6);\n  animation: onlinePulse 2s ease-in-out infinite;\n}\n\n.online-status--away .online-status__dot {\n  background: #fbbf24;\n}\n\n.online-status--offline .online-status__dot {\n  background: #9ca3af;\n}\n\n@keyframes onlinePulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.6; }\n}\n\n.mutual-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 0.75rem;\n  padding: 3px 8px;\n  border-radius: 12px;\n  background: linear-gradient(135deg, var(--user-accent, #b89b5e) 0%, #d6bd9f 100%);\n  color: #fff;\n  font-weight: 600;\n}\n\n.mutual-badge ion-icon {\n  font-size: 0.9rem;\n}\n\n/* === QUICK ACTIONS === */\n.quick-actions {\n  display: flex;\n  gap: 10px;\n  margin-top: 15px;\n}\n\n.quick-action-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  padding: 10px 18px;\n  border-radius: 25px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  border: none;\n}\n\n.quick-action-btn--primary {\n  background: linear-gradient(135deg, var(--user-accent, #b89b5e) 0%, #d6bd9f 100%);\n  color: #fff;\n}\n\n.quick-action-btn--primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px var(--time-glow);\n}\n\n.quick-action-btn--secondary {\n  background: rgba(0, 0, 0, 0.05);\n  color: var(--time-text);\n  border: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n.quick-action-btn--secondary:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .quick-action-btn--secondary {\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n/* === HAPTIC FEEDBACK === */\n.haptic-light {\n  -webkit-tap-highlight-color: transparent;\n}\n\n.haptic-medium {\n  -webkit-tap-highlight-color: transparent;\n}\n\n.haptic-heavy {\n  -webkit-tap-highlight-color: transparent;\n}\n\n.haptic-feedback {\n  position: relative;\n  overflow: hidden;\n}\n\n.haptic-feedback::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n  opacity: 0;\n  transition: width 0.4s ease, height 0.4s ease, opacity 0.4s ease;\n}\n\n.haptic-feedback.touched::after {\n  width: 200%;\n  height: 200%;\n  opacity: 0;\n}\n\n/* === AI INSIGHTS === */\n.ai-insights {\n  padding: 25px;\n  border-radius: 20px;\n  background: linear-gradient(135deg, rgba(155, 126, 217, 0.1) 0%, rgba(135, 206, 235, 0.1) 100%);\n  border: 1px solid rgba(155, 126, 217, 0.2);\n  margin-bottom: 25px;\n}\n\n.ai-insights__header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 15px;\n}\n\n.ai-insights__icon {\n  width: 40px;\n  height: 40px;\n  border-radius: 12px;\n  background: linear-gradient(135deg, #9b7ed9 0%, #7c5fc4 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 1.2rem;\n}\n\n.ai-insights__title {\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  font-size: 1.1rem;\n  color: var(--time-text);\n}\n\n.ai-insights__badge {\n  font-size: 0.7rem;\n  padding: 3px 8px;\n  border-radius: 10px;\n  background: linear-gradient(135deg, #9b7ed9 0%, #7c5fc4 100%);\n  color: #fff;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.ai-insights__content {\n  font-size: 0.95rem;\n  line-height: 1.7;\n  color: var(--time-text);\n  opacity: 0.9;\n}\n\n.ai-insights__affirmation {\n  font-style: italic;\n  padding: 15px 20px;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 12px;\n  margin-top: 15px;\n  border-left: 3px solid var(--user-accent, #9b7ed9);\n}\n\n[data-theme=\"dark\"] .ai-insights__affirmation {\n  background: rgba(0, 0, 0, 0.2);\n}\n\n.ai-insights__loading {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  color: var(--time-text);\n  opacity: 0.7;\n}\n\n.ai-insights__loading-dots {\n  display: flex;\n  gap: 4px;\n}\n\n.ai-insights__loading-dots span {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: var(--user-accent, #9b7ed9);\n  animation: loadingDot 1.4s ease-in-out infinite;\n}\n\n.ai-insights__loading-dots span:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.ai-insights__loading-dots span:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes loadingDot {\n  0%, 80%, 100% { transform: scale(0.6); opacity: 0.5; }\n  40% { transform: scale(1); opacity: 1; }\n}\n\n/* === PEOPLE SUGGESTIONS === */\n.people-suggestions {\n  padding: 20px;\n}\n\n.people-suggestions__title {\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  font-size: 1rem;\n  margin-bottom: 15px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.people-suggestions__list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.people-suggestion {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  border-radius: 12px;\n  background: rgba(0, 0, 0, 0.03);\n  transition: all 0.3s ease;\n}\n\n.people-suggestion:hover {\n  background: rgba(0, 0, 0, 0.06);\n  transform: translateX(5px);\n}\n\n[data-theme=\"dark\"] .people-suggestion {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .people-suggestion:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.people-suggestion__avatar {\n  width: 45px;\n  height: 45px;\n  border-radius: 50%;\n  object-fit: cover;\n  flex-shrink: 0;\n}\n\n.people-suggestion__avatar--initials {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-weight: 700;\n  font-size: 0.95rem;\n  letter-spacing: 0.5px;\n}\n\n.people-suggestion__info {\n  flex: 1;\n}\n\n.people-suggestion__name {\n  font-weight: 600;\n  font-size: 0.9rem;\n  margin-bottom: 2px;\n}\n\n.people-suggestion__mutual {\n  font-size: 0.75rem;\n  opacity: 0.7;\n}\n\n.people-suggestion__follow-btn {\n  padding: 6px 14px;\n  border-radius: 20px;\n  border: none;\n  background: var(--user-accent, #b89b5e);\n  color: #fff;\n  font-size: 0.8rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.people-suggestion__follow-btn:hover {\n  transform: scale(1.05);\n  box-shadow: 0 4px 12px var(--time-glow);\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  .floating-shape,\n  .star,\n  .immersive-bg__sun,\n  .online-status__dot,\n  .ai-insights__loading-dots span {\n    animation: none;\n  }\n  \n  .scroll-reveal,\n  .scroll-reveal-left,\n  .scroll-reveal-right,\n  .scroll-reveal-scale,\n  .stagger-reveal > * {\n    opacity: 1;\n    transform: none;\n    transition: none;\n  }\n  \n  .glass-card:hover,\n  .quick-action-btn:hover,\n  .people-suggestion:hover {\n    transform: none;\n  }\n}\n\n/* === AI MOOD SUGGESTION === */\n.ai-mood-suggestion {\n  display: flex;\n  align-items: flex-start;\n  gap: 10px;\n  padding: 15px;\n  margin-top: 15px;\n  background: linear-gradient(135deg, rgba(155, 126, 217, 0.1) 0%, rgba(135, 206, 235, 0.1) 100%);\n  border-radius: 12px;\n  border-left: 3px solid var(--user-accent, #9b7ed9);\n}\n\n.ai-mood-suggestion ion-icon {\n  font-size: 1.2rem;\n  color: var(--user-accent, #9b7ed9);\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.ai-mood-suggestion span {\n  font-size: 0.9rem;\n  color: var(--time-text);\n  line-height: 1.5;\n}\n\n/* === AI GOAL SUGGESTION === */\n.ai-goal-suggestion {\n  padding: 18px;\n  margin: 15px 0;\n  background: linear-gradient(135deg, rgba(155, 126, 217, 0.15) 0%, rgba(135, 206, 235, 0.1) 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(155, 126, 217, 0.3);\n}\n\n.ai-goal-suggestion__header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 10px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent, #9b7ed9);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.ai-goal-suggestion__header ion-icon {\n  font-size: 1rem;\n}\n\n.ai-goal-suggestion__text {\n  font-size: 1rem;\n  font-weight: 500;\n  color: var(--time-text);\n  margin-bottom: 8px;\n  line-height: 1.4;\n}\n\n.ai-goal-suggestion__reason {\n  font-size: 0.85rem;\n  color: var(--time-text);\n  opacity: 0.7;\n  font-style: italic;\n  margin-bottom: 15px;\n}\n\n.ai-goal-suggestion__add {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 18px;\n  background: linear-gradient(135deg, var(--user-accent, #9b7ed9) 0%, #7c5fc4 100%);\n  color: #fff;\n  border: none;\n  border-radius: 25px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.ai-goal-suggestion__add:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(155, 126, 217, 0.4);\n}\n\n.ai-goal-suggestion__add ion-icon {\n  font-size: 1rem;\n}\n\n[data-theme=\"dark\"] .ai-mood-suggestion,\n[data-theme=\"dark\"] .ai-goal-suggestion {\n  background: linear-gradient(135deg, rgba(155, 126, 217, 0.2) 0%, rgba(75, 70, 100, 0.3) 100%);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night {\n  --time-primary: #9b8cc4;\n  --time-secondary: #c4b5dc;\n  --time-bg-start: #d8d0e8;\n  --time-bg-mid: #e8e0f0;\n  --time-bg-end: #f0e8f8;\n  --time-text: #1a1a2e;\n  --time-glow: rgba(155, 126, 217, 0.3);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .profile-greeting__message,\nbody:not([data-theme=\"dark\"]) .time-night .profile-greeting__subtitle {\n  color: #1a1a2e;\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .profile-greeting__time {\n  background: rgba(155, 126, 217, 0.2);\n  color: #5a4a8a;\n  text-shadow: none;\n  border: 1px solid rgba(155, 126, 217, 0.3);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile__name,\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile__email,\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile__bio {\n  color: #333;\n}\n\nbody:not([data-theme=\"dark\"]) .mb-profile__unified-stats {\n  background: rgba(255, 255, 255, 0.95);\n  color: #1a1a2e;\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile__actions-btn {\n  background: rgba(255, 255, 255, 0.9);\n  color: #333;\n  border-color: rgba(0, 0, 0, 0.1);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile__actions-btn.primary {\n  background: linear-gradient(135deg, #b89b5e 0%, #d6bd9f 100%);\n  color: #fff;\n}\n\n@media (max-width: 768px) {\n  .profile-greeting {\n    padding: 20px 15px 5px;\n  }\n  \n  .profile-greeting__message {\n    font-size: 1.5rem;\n  }\n  \n  .immersive-bg__sun,\n  .immersive-bg__moon {\n    width: 80px;\n    height: 80px;\n    right: 5%;\n  }\n  \n  .floating-shape {\n    opacity: 0.05;\n  }\n  \n  .quick-actions {\n    flex-wrap: wrap;\n  }\n  \n  .quick-action-btn {\n    flex: 1;\n    min-width: 120px;\n    justify-content: center;\n  }\n  \n  .ai-insights {\n    padding: 18px;\n  }\n}\n","path":null,"size_bytes":21232,"size_tokens":null},"mindspace-build/terms/legal.css":{"content":"/* === LEGAL PAGE === */\n.legal-page {\n  padding: 140px 0 60px;\n  min-height: 100vh;\n  background: var(--bg-primary, #f9f7f4);\n}\n\n[data-theme=\"dark\"] .legal-page {\n  background: var(--bg-primary, #1a1a2e);\n}\n\n.legal-page .container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n/* === HEADER === */\n.legal-header {\n  text-align: center;\n  margin-bottom: 40px;\n  padding-bottom: 30px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .legal-header {\n  border-bottom-color: rgba(255, 255, 255, 0.1);\n}\n\n.legal-header h1 {\n  font-size: 2.5rem;\n  font-weight: 700;\n  color: var(--text-primary, #2d2d2d);\n  margin-bottom: 10px;\n}\n\n[data-theme=\"dark\"] .legal-header h1 {\n  color: #fff;\n}\n\n.legal-updated {\n  font-size: 0.95rem;\n  color: var(--text-secondary, #666);\n}\n\n[data-theme=\"dark\"] .legal-updated {\n  color: #aaa;\n}\n\n/* === CONTENT === */\n.legal-content {\n  background: #fff;\n  border-radius: 16px;\n  padding: 40px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n}\n\n[data-theme=\"dark\"] .legal-content {\n  background: #2d2b3d;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n}\n\n/* === SECTIONS === */\n.legal-section {\n  margin-bottom: 32px;\n  padding-bottom: 32px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n}\n\n[data-theme=\"dark\"] .legal-section {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.legal-section:last-child {\n  margin-bottom: 0;\n  padding-bottom: 0;\n  border-bottom: none;\n}\n\n.legal-section h2 {\n  font-size: 1.4rem;\n  font-weight: 600;\n  color: var(--text-primary, #2d2d2d);\n  margin-bottom: 16px;\n}\n\n[data-theme=\"dark\"] .legal-section h2 {\n  color: #fff;\n}\n\n.legal-section h3 {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--text-primary, #2d2d2d);\n  margin: 20px 0 12px;\n}\n\n[data-theme=\"dark\"] .legal-section h3 {\n  color: #e0e0e0;\n}\n\n.legal-section p {\n  font-size: 1rem;\n  line-height: 1.8;\n  color: var(--text-secondary, #555);\n  margin-bottom: 16px;\n}\n\n[data-theme=\"dark\"] .legal-section p {\n  color: #ccc;\n}\n\n.legal-section p:last-child {\n  margin-bottom: 0;\n}\n\n.legal-section ul {\n  margin: 16px 0;\n  padding-left: 24px;\n}\n\n.legal-section li {\n  font-size: 1rem;\n  line-height: 1.8;\n  color: var(--text-secondary, #555);\n  margin-bottom: 8px;\n  position: relative;\n}\n\n[data-theme=\"dark\"] .legal-section li {\n  color: #ccc;\n}\n\n.legal-section li::marker {\n  color: var(--accent-color, #4A93D4);\n}\n\n.legal-section a {\n  color: var(--accent-color, #4A93D4);\n  text-decoration: none;\n  font-weight: 500;\n  transition: color 0.2s ease;\n}\n\n.legal-section a:hover {\n  color: var(--user-accent-dark);\n  text-decoration: underline;\n}\n\n[data-theme=\"dark\"] .legal-section a {\n  color: var(--user-accent-grad-end);\n}\n\n[data-theme=\"dark\"] .legal-section a:hover {\n  color: #f0d090;\n}\n\n/* === HIGHLIGHT BOX === */\n.legal-highlight {\n  background: linear-gradient(135deg, #fef3c7, #fde68a);\n  border-radius: 12px;\n  padding: 20px 24px;\n  margin: 20px 0;\n  border-left: 4px solid #f59e0b;\n}\n\n[data-theme=\"dark\"] .legal-highlight {\n  background: linear-gradient(135deg, #3d3a50, #4d4660);\n  border-left-color: var(--user-accent);\n}\n\n.legal-highlight strong {\n  color: #92400e;\n  display: block;\n  margin-bottom: 8px;\n}\n\n[data-theme=\"dark\"] .legal-highlight strong {\n  color: var(--user-accent-grad-end);\n}\n\n.legal-highlight ul {\n  margin: 10px 0 0;\n  padding-left: 20px;\n}\n\n.legal-highlight li {\n  color: #78350f;\n}\n\n[data-theme=\"dark\"] .legal-highlight li {\n  color: #ccc;\n}\n\n/* === WARNING BOX === */\n.legal-warning {\n  background: linear-gradient(135deg, #fee2e2, #fecaca);\n  border-radius: 12px;\n  padding: 20px 24px;\n  margin: 20px 0;\n  border-left: 4px solid #ef4444;\n}\n\n[data-theme=\"dark\"] .legal-warning {\n  background: linear-gradient(135deg, #4a2c2c, #5a3535);\n  border-left-color: #f87171;\n}\n\n.legal-warning strong {\n  color: #991b1b;\n}\n\n[data-theme=\"dark\"] .legal-warning strong {\n  color: #fca5a5;\n}\n\n.legal-warning a {\n  color: #dc2626;\n}\n\n[data-theme=\"dark\"] .legal-warning a {\n  color: #fca5a5;\n}\n\n/* === HIGHLIGHT SECTION === */\n.legal-highlight-section {\n  background: linear-gradient(135deg, #dbeafe, #bfdbfe);\n  border-radius: 12px;\n  padding: 24px;\n  margin-bottom: 32px;\n  border: none;\n}\n\n[data-theme=\"dark\"] .legal-highlight-section {\n  background: linear-gradient(135deg, #1e3a5f, #2d4a6f);\n}\n\n.legal-badge {\n  display: inline-block;\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  color: #fff;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 6px 14px;\n  border-radius: 20px;\n  margin-bottom: 16px;\n}\n\n[data-theme=\"dark\"] .legal-badge {\n  background: linear-gradient(135deg, #60a5fa, #3b82f6);\n}\n\n.legal-highlight-section h2 {\n  color: #1e40af;\n}\n\n[data-theme=\"dark\"] .legal-highlight-section h2 {\n  color: #93c5fd;\n}\n\n.legal-highlight-section p {\n  color: #1e3a8a;\n}\n\n[data-theme=\"dark\"] .legal-highlight-section p {\n  color: #bfdbfe;\n}\n\n/* === NAVIGATION === */\n.legal-nav {\n  display: flex;\n  justify-content: center;\n  gap: 24px;\n  margin-top: 40px;\n  padding-top: 30px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  flex-wrap: wrap;\n}\n\n[data-theme=\"dark\"] .legal-nav {\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n.legal-nav-link {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 12px 24px;\n  background: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 30px;\n  color: var(--text-primary, #2d2d2d);\n  font-weight: 500;\n  text-decoration: none;\n  transition: all 0.2s ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\n}\n\n.legal-nav-link:hover {\n  background: var(--accent-color, #4A93D4);\n  color: #fff;\n  border-color: var(--accent-color, #4A93D4);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(214, 167, 86, 0.3);\n}\n\n[data-theme=\"dark\"] .legal-nav-link {\n  background: #2d2b3d;\n  border-color: rgba(255, 255, 255, 0.1);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .legal-nav-link:hover {\n  background: var(--user-accent);\n  border-color: var(--user-accent);\n  color: #1a1a2e;\n}\n\n/* === RESPONSIVE === */\n@media (max-width: 768px) {\n  .legal-page {\n    padding: 120px 0 40px;\n  }\n  \n  .legal-header h1 {\n    font-size: 2rem;\n  }\n  \n  .legal-content {\n    padding: 24px;\n    border-radius: 12px;\n  }\n  \n  .legal-section h2 {\n    font-size: 1.25rem;\n  }\n  \n  .legal-nav {\n    flex-direction: column;\n    align-items: center;\n    gap: 12px;\n  }\n  \n  .legal-nav-link {\n    width: 100%;\n    max-width: 280px;\n    justify-content: center;\n  }\n}\n","path":null,"size_bytes":6449,"size_tokens":null},"mindspace-build/css/wellness-checkin.css":{"content":"/* === WELLNESS CHECK-IN === */\n.wellness-checkin {\n  padding: 4rem 1.5rem;\n  background: linear-gradient(135deg, #fdf8f3 0%, #f5ebe0 50%, #faf6f1 100%);\n  position: relative;\n  overflow: hidden;\n  transition: background 0.8s ease;\n}\n\n.wellness-checkin::before {\n  content: '';\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background: radial-gradient(circle at 30% 30%, rgba(212, 165, 116, 0.1) 0%, transparent 50%);\n  pointer-events: none;\n}\n\n.wellness-checkin__container {\n  max-width: 1100px;\n  margin: 0 auto;\n  position: relative;\n  z-index: 1;\n}\n\n/* === GRID LAYOUT === */\n.wellness-checkin__grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1.5rem;\n  align-items: stretch;\n}\n\n/* === RESPONSIVE === */\n@media (max-width: 768px) {\n  .wellness-checkin__grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* === GREETING === */\n.wellness-checkin__greeting {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n\n.wellness-checkin__time-greeting {\n  font-size: 1rem;\n  color: var(--user-accent-grad-end);\n  font-weight: 500;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n\n.wellness-checkin__time-icon {\n  font-size: 1.25rem;\n}\n\n.wellness-checkin__title {\n  font-size: clamp(1.5rem, 4vw, 2rem);\n  font-weight: 700;\n  color: var(--eerie-black, #1a1a1a);\n  margin-bottom: 0.5rem;\n}\n\n.wellness-checkin__subtitle {\n  font-size: 1rem;\n  color: var(--sonic-silver, #6b6b6b);\n  max-width: 500px;\n  margin: 0 auto;\n}\n\n/* === CARD === */\n.wellness-checkin__card {\n  background: #ffffff;\n  border-radius: 24px;\n  padding: 1.5rem;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  display: flex;\n  flex-direction: column;\n}\n\n.wellness-checkin__card-title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--user-accent-grad-end);\n  margin-bottom: 1rem;\n  text-align: center;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.wellness-checkin__card--mood {\n  display: flex;\n  flex-direction: column;\n}\n\n.wellness-checkin__card--tip {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.wellness-checkin__card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 15px 50px rgba(0, 0, 0, 0.1);\n}\n\n/* === MOOD SELECTOR === */\n.wellness-checkin__moods {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 0.75rem;\n  flex: 1;\n}\n\n@media (max-width: 480px) {\n  .wellness-checkin__moods {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n.wellness-checkin__mood-btn {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 1rem 1.25rem;\n  background: #f8f5f1;\n  border: 2px solid transparent;\n  border-radius: 16px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  position: relative;\n  overflow: hidden;\n}\n\n.wellness-checkin__mood-btn::before {\n  content: '';\n  position: absolute;\n  inset: 0;\n  background: radial-gradient(circle at center, var(--mood-color, transparent) 0%, transparent 70%);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.wellness-checkin__mood-btn:hover {\n  transform: translateY(-5px) scale(1.05);\n  border-color: var(--user-accent-grad-end);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.wellness-checkin__mood-btn:hover::before {\n  opacity: 0.15;\n}\n\n.wellness-checkin__mood-btn.is-selected {\n  border-color: var(--user-accent-grad-end);\n  background: white;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\n  transform: translateY(-3px) scale(1.02);\n}\n\n.wellness-checkin__mood-btn.is-selected::before {\n  opacity: 0.2;\n}\n\n.wellness-checkin__mood-emoji {\n  font-size: 2rem;\n  transition: transform 0.3s ease;\n  position: relative;\n  z-index: 1;\n}\n\n.wellness-checkin__mood-btn:hover .wellness-checkin__mood-emoji {\n  animation: emoji-wiggle 0.5s ease;\n}\n\n.wellness-checkin__mood-btn.is-selected .wellness-checkin__mood-emoji {\n  animation: emoji-bounce 0.6s ease;\n}\n\n@keyframes emoji-wiggle {\n  0%, 100% { transform: rotate(0deg); }\n  25% { transform: rotate(-10deg); }\n  75% { transform: rotate(10deg); }\n}\n\n@keyframes emoji-bounce {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.3); }\n}\n\n.wellness-checkin__mood-label {\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: var(--sonic-silver, #6b6b6b);\n  text-transform: capitalize;\n  position: relative;\n  z-index: 1;\n}\n\n/* === MOOD COLORS === */\n.wellness-checkin__mood-btn[data-mood=\"happy\"] { --mood-color: #10b981; }\n.wellness-checkin__mood-btn[data-mood=\"calm\"] { --mood-color: #06b6d4; }\n.wellness-checkin__mood-btn[data-mood=\"okay\"] { --mood-color: #f59e0b; }\n.wellness-checkin__mood-btn[data-mood=\"anxious\"] { --mood-color: #8b5cf6; }\n.wellness-checkin__mood-btn[data-mood=\"sad\"] { --mood-color: #3b82f6; }\n.wellness-checkin__mood-btn[data-mood=\"stressed\"] { --mood-color: #ef4444; }\n\n/* === RESPONSE SECTION === */\n.wellness-checkin__response {\n  background: linear-gradient(135deg, #f8f5f1 0%, #faf6f1 100%);\n  border-radius: 16px;\n  padding: 1.25rem;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  opacity: 0;\n  transform: translateY(10px);\n  transition: all 0.5s ease;\n  display: none;\n}\n\n.wellness-checkin__response.is-visible {\n  display: block;\n}\n\n.wellness-checkin__response.is-visible {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.wellness-checkin__affirmation {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--eerie-black, #1a1a1a);\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.wellness-checkin__tip {\n  background: white;\n  border-radius: 16px;\n  padding: 1.25rem;\n  margin-bottom: 1.25rem;\n  border-left: 4px solid var(--user-accent);\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n}\n\n.wellness-checkin__tip-title {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent-grad-end);\n  margin-bottom: 0.5rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.wellness-checkin__tip-text {\n  font-size: 0.95rem;\n  color: var(--sonic-silver, #4a4a4a);\n  line-height: 1.6;\n}\n\n/* === QUICK ACTIONS === */\n.wellness-checkin__actions {\n  display: flex;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n}\n\n.wellness-checkin__action-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.25rem;\n  border-radius: 50px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  text-decoration: none;\n  border: none;\n}\n\n.wellness-checkin__action-btn--primary {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n  color: white;\n  box-shadow: 0 4px 15px rgba(212, 165, 116, 0.3);\n}\n\n.wellness-checkin__action-btn--primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(212, 165, 116, 0.4);\n}\n\n.wellness-checkin__action-btn--secondary {\n  background: white;\n  color: var(--eerie-black, #1a1a1a);\n  border: 2px solid #e5e5e5;\n}\n\n.wellness-checkin__action-btn--secondary:hover {\n  border-color: var(--user-accent);\n  background: #faf6f1;\n}\n\n/* === COMMUNITY MOOD BAR === */\n.wellness-checkin__community {\n  margin-top: 2rem;\n  padding-top: 1.5rem;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n.wellness-checkin__community-title {\n  font-size: 0.8rem;\n  color: var(--sonic-silver, #6b6b6b);\n  text-align: center;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n\n.wellness-checkin__community-bar {\n  display: flex;\n  height: 8px;\n  border-radius: 4px;\n  overflow: hidden;\n  background: #e5e5e5;\n}\n\n.wellness-checkin__community-segment {\n  height: 100%;\n  transition: width 0.8s ease;\n}\n\n.wellness-checkin__community-segment[data-mood=\"happy\"] { background: #10b981; }\n.wellness-checkin__community-segment[data-mood=\"calm\"] { background: #06b6d4; }\n.wellness-checkin__community-segment[data-mood=\"okay\"] { background: #f59e0b; }\n.wellness-checkin__community-segment[data-mood=\"anxious\"] { background: #8b5cf6; }\n.wellness-checkin__community-segment[data-mood=\"sad\"] { background: #3b82f6; }\n.wellness-checkin__community-segment[data-mood=\"stressed\"] { background: #ef4444; }\n\n.wellness-checkin__community-legend {\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  margin-top: 0.75rem;\n  flex-wrap: wrap;\n}\n\n.wellness-checkin__legend-item {\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n  font-size: 0.75rem;\n  color: var(--sonic-silver, #6b6b6b);\n}\n\n.wellness-checkin__legend-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n}\n\n/* === CONFETTI === */\n.wellness-checkin__confetti {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 10;\n}\n\n/* === RIPPLE EFFECT === */\n.wellness-checkin__ripple {\n  position: absolute;\n  border-radius: 50%;\n  background: radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%);\n  transform: scale(0);\n  animation: ripple-expand 1s ease-out forwards;\n  pointer-events: none;\n}\n\n@keyframes ripple-expand {\n  to {\n    transform: scale(4);\n    opacity: 0;\n  }\n}\n\n/* === DEFAULT TIP === */\n.wellness-checkin__default-tip {\n  text-align: center;\n  padding: 1.5rem;\n}\n\n.wellness-checkin__default-tip-icon {\n  font-size: 2.5rem;\n  margin-bottom: 1rem;\n}\n\n.wellness-checkin__default-tip-title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--user-accent-grad-end);\n  margin-bottom: 0.5rem;\n}\n\n.wellness-checkin__default-tip-text {\n  font-size: 0.95rem;\n  color: var(--sonic-silver, #4a4a4a);\n  line-height: 1.6;\n  max-width: 500px;\n  margin: 0 auto;\n}\n\n/* === DARK MODE === */\n[data-theme=\"dark\"] .wellness-checkin,\nbody.dark-mode .wellness-checkin {\n  background: linear-gradient(135deg, #1a1625 0%, #1f1a2e 50%, #1a1625 100%);\n}\n\n[data-theme=\"dark\"] .wellness-checkin::before,\nbody.dark-mode .wellness-checkin::before {\n  background: radial-gradient(circle at 30% 30%, rgba(109, 179, 242, 0.1) 0%, transparent 50%);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__title,\nbody.dark-mode .wellness-checkin__title {\n  color: #f5f5f5;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__subtitle,\nbody.dark-mode .wellness-checkin__subtitle {\n  color: #a0a0a0;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__time-greeting,\nbody.dark-mode .wellness-checkin__time-greeting {\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__card,\nbody.dark-mode .wellness-checkin__card {\n  background: #252033;\n  border-color: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__mood-btn,\nbody.dark-mode .wellness-checkin__mood-btn {\n  background: #1f1a2e;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__mood-btn.is-selected,\nbody.dark-mode .wellness-checkin__mood-btn.is-selected {\n  background: #2d2640;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__mood-label,\nbody.dark-mode .wellness-checkin__mood-label {\n  color: #a0a0a0;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__response,\nbody.dark-mode .wellness-checkin__response {\n  background: linear-gradient(135deg, #1f1a2e 0%, #252033 100%);\n  border-color: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__affirmation,\nbody.dark-mode .wellness-checkin__affirmation {\n  color: #f5f5f5;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__tip,\nbody.dark-mode .wellness-checkin__tip {\n  background: #1a1625;\n  border-left-color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__tip-title,\nbody.dark-mode .wellness-checkin__tip-title {\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__tip-text,\nbody.dark-mode .wellness-checkin__tip-text {\n  color: #c0c0c0;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__action-btn--primary,\nbody.dark-mode .wellness-checkin__action-btn--primary {\n  background: linear-gradient(135deg, var(--purple-accent, #6DB3F2) 0%, #4A93D4 100%);\n  box-shadow: 0 4px 15px rgba(109, 179, 242, 0.3);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__action-btn--secondary,\nbody.dark-mode .wellness-checkin__action-btn--secondary {\n  background: #1f1a2e;\n  color: #f5f5f5;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__community,\nbody.dark-mode .wellness-checkin__community {\n  border-top-color: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__community-bar,\nbody.dark-mode .wellness-checkin__community-bar {\n  background: #1f1a2e;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__default-tip-title,\nbody.dark-mode .wellness-checkin__default-tip-title {\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__default-tip-text,\nbody.dark-mode .wellness-checkin__default-tip-text {\n  color: #c0c0c0;\n}\n\n@media (max-width: 768px) {\n  .wellness-checkin {\n    padding: 3rem 1rem;\n  }\n  \n  .wellness-checkin__card {\n    padding: 1.5rem;\n  }\n  \n  .wellness-checkin__moods {\n    gap: 0.5rem;\n  }\n  \n  .wellness-checkin__mood-btn {\n    padding: 0.75rem 1rem;\n  }\n  \n  .wellness-checkin__mood-emoji {\n    font-size: 1.75rem;\n  }\n  \n  .wellness-checkin__actions {\n    flex-direction: column;\n  }\n  \n  .wellness-checkin__action-btn {\n    justify-content: center;\n  }\n  \n  .wellness-checkin__community-legend {\n    gap: 0.5rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .wellness-checkin__mood-btn {\n    padding: 0.6rem 0.8rem;\n  }\n  \n  .wellness-checkin__mood-emoji {\n    font-size: 1.5rem;\n  }\n  \n  .wellness-checkin__mood-label {\n    font-size: 0.7rem;\n  }\n}\n\n/* === NOTE AREA === */\n.wellness-checkin__note-area {\n  display: flex;\n  gap: 8px;\n  align-items: flex-start;\n  margin-top: 12px;\n  margin-bottom: 8px;\n}\n\n.wellness-checkin__note-input {\n  flex: 1;\n  padding: 10px 14px;\n  border: 1.5px solid #e0d5c8;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  resize: none;\n  background: #fff;\n  color: #1a1a2e;\n  transition: border-color 0.3s ease;\n  line-height: 1.5;\n}\n\n.wellness-checkin__note-input:focus {\n  outline: none;\n  border-color: var(--user-accent, #5BA4E6);\n}\n\n.wellness-checkin__note-input::placeholder {\n  color: #6b9cc4;\n}\n\n.wellness-checkin__note-save {\n  padding: 10px 18px;\n  background: var(--user-accent, #5BA4E6);\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  font-weight: 500;\n  cursor: pointer;\n  white-space: nowrap;\n  transition: opacity 0.2s ease, transform 0.2s ease;\n}\n\n.wellness-checkin__note-save:hover {\n  opacity: 0.9;\n  transform: translateY(-1px);\n}\n\n.wellness-checkin__note-save.is-saved {\n  background: #10b981;\n  pointer-events: none;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__note-input {\n  background: #252542;\n  border-color: #3a3a5a;\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__note-input::placeholder {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__note-input:focus {\n  border-color: var(--user-accent, #5BA4E6);\n}\n\n@media (max-width: 480px) {\n  .wellness-checkin__note-area {\n    flex-direction: column;\n  }\n  .wellness-checkin__note-save {\n    align-self: flex-end;\n  }\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  .wellness-checkin__mood-btn,\n  .wellness-checkin__response,\n  .wellness-checkin__card,\n  .wellness-checkin__streak {\n    transition: none;\n  }\n  \n  .wellness-checkin__mood-btn:hover .wellness-checkin__mood-emoji,\n  .wellness-checkin__mood-btn.is-selected .wellness-checkin__mood-emoji {\n    animation: none;\n  }\n  \n  @keyframes streak-pulse {\n    0%, 100% { transform: none; }\n  }\n}\n","path":null,"size_bytes":15322,"size_tokens":null},"css/responsive-system.css":{"content":"/* === VARIABLES === */\n:root {\n  \n  --font-base: 16px;\n  \n  \n  \n  --fs-display: clamp(2.5rem, 5vw + 1rem, 4.5rem);\n  \n  \n  --fs-h1: clamp(2rem, 4vw + 0.5rem, 3.5rem);\n  --fs-h2: clamp(1.75rem, 3vw + 0.5rem, 2.75rem);\n  --fs-h3: clamp(1.5rem, 2.5vw + 0.5rem, 2rem);\n  --fs-h4: clamp(1.25rem, 2vw + 0.25rem, 1.5rem);\n  --fs-h5: clamp(1.125rem, 1.5vw + 0.25rem, 1.25rem);\n  --fs-h6: clamp(1rem, 1vw + 0.25rem, 1.125rem);\n  \n  \n  --fs-body-lg: clamp(1.125rem, 1vw + 0.5rem, 1.25rem);\n  --fs-body: clamp(1rem, 0.5vw + 0.75rem, 1.125rem);\n  --fs-body-sm: clamp(0.875rem, 0.5vw + 0.5rem, 1rem);\n  \n  \n  --fs-label: clamp(0.8125rem, 0.25vw + 0.5rem, 0.9375rem);\n  --fs-caption: clamp(0.75rem, 0.25vw + 0.5rem, 0.875rem);\n  --fs-tiny: clamp(0.6875rem, 0.25vw + 0.375rem, 0.75rem);\n  \n  \n  --lh-tight: 1.2;\n  --lh-snug: 1.35;\n  --lh-normal: 1.5;\n  --lh-relaxed: 1.65;\n  --lh-loose: 1.8;\n  \n  \n  --ls-tight: -0.025em;\n  --ls-normal: 0;\n  --ls-wide: 0.025em;\n  --ls-wider: 0.05em;\n  --ls-widest: 0.1em;\n  \n  \n  --space-3xs: clamp(0.25rem, 0.5vw, 0.375rem);\n  --space-2xs: clamp(0.375rem, 0.75vw, 0.5rem);\n  --space-xs: clamp(0.5rem, 1vw, 0.75rem);\n  --space-sm: clamp(0.75rem, 1.5vw, 1rem);\n  --space-md: clamp(1rem, 2vw, 1.5rem);\n  --space-lg: clamp(1.5rem, 3vw, 2rem);\n  --space-xl: clamp(2rem, 4vw, 3rem);\n  --space-2xl: clamp(3rem, 6vw, 4rem);\n  --space-3xl: clamp(4rem, 8vw, 6rem);\n  --space-4xl: clamp(6rem, 10vw, 8rem);\n  \n  \n  --container-sm: 640px;\n  --container-md: 768px;\n  --container-lg: 1024px;\n  --container-xl: 1200px;\n  --container-2xl: 1400px;\n  --container-full: 100%;\n  \n  \n  --container-padding: clamp(1rem, 4vw, 2rem);\n  \n  \n  --bp-xs: 375px;\n  --bp-sm: 480px;\n  --bp-md: 768px;\n  --bp-lg: 1024px;\n  --bp-xl: 1200px;\n  --bp-2xl: 1400px;\n}\n\n/* === TYPOGRAPHY CLASSES === */\n.fs-display { font-size: var(--fs-display); line-height: var(--lh-tight); }\n.fs-h1 { font-size: var(--fs-h1); line-height: var(--lh-tight); }\n.fs-h2 { font-size: var(--fs-h2); line-height: var(--lh-tight); }\n.fs-h3 { font-size: var(--fs-h3); line-height: var(--lh-snug); }\n.fs-h4 { font-size: var(--fs-h4); line-height: var(--lh-snug); }\n.fs-h5 { font-size: var(--fs-h5); line-height: var(--lh-normal); }\n.fs-h6 { font-size: var(--fs-h6); line-height: var(--lh-normal); }\n\n.fs-body-lg { font-size: var(--fs-body-lg); line-height: var(--lh-relaxed); }\n.fs-body { font-size: var(--fs-body); line-height: var(--lh-relaxed); }\n.fs-body-sm { font-size: var(--fs-body-sm); line-height: var(--lh-relaxed); }\n.fs-label { font-size: var(--fs-label); line-height: var(--lh-normal); }\n.fs-caption { font-size: var(--fs-caption); line-height: var(--lh-normal); }\n.fs-tiny { font-size: var(--fs-tiny); line-height: var(--lh-normal); }\n\n/* === TEXT WRAPPING === */\nh1, h2, h3, h4, h5, h6,\np, li, td, th, label, span {\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  hyphens: auto;\n}\n\nh1, h2, h3, h4, h5, h6 {\n  text-wrap: balance;\n}\n\np {\n  text-wrap: pretty;\n}\n\n/* === TEXT UTILITIES === */\n.text-break {\n  word-break: break-word;\n}\n\n.text-nowrap {\n  white-space: nowrap;\n}\n\n.text-truncate {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.text-clamp-2 {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.text-clamp-3 {\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n/* === CONTAINER UTILITIES === */\n.resp-container {\n  width: 100%;\n  max-width: var(--container-xl);\n  margin-inline: auto;\n  padding-inline: var(--container-padding);\n}\n\n.resp-container-sm { max-width: var(--container-sm); }\n.resp-container-md { max-width: var(--container-md); }\n.resp-container-lg { max-width: var(--container-lg); }\n.resp-container-xl { max-width: var(--container-xl); }\n.resp-container-2xl { max-width: var(--container-2xl); }\n.resp-container-full { max-width: 100%; }\n\n/* === RESPONSIVE GRID === */\n.grid {\n  display: grid;\n  gap: var(--space-md);\n}\n\n.grid-cols-1 { grid-template-columns: 1fr; }\n.grid-cols-2 { grid-template-columns: repeat(2, 1fr); }\n.grid-cols-3 { grid-template-columns: repeat(3, 1fr); }\n.grid-cols-4 { grid-template-columns: repeat(4, 1fr); }\n\n.grid-auto-sm {\n  grid-template-columns: repeat(auto-fit, minmax(min(200px, 100%), 1fr));\n}\n\n.grid-auto-md {\n  grid-template-columns: repeat(auto-fit, minmax(min(280px, 100%), 1fr));\n}\n\n.grid-auto-lg {\n  grid-template-columns: repeat(auto-fit, minmax(min(350px, 100%), 1fr));\n}\n\n/* === UTILITY CLASSES === */\n.text-left { text-align: left; }\n.text-center { text-align: center; }\n.text-right { text-align: right; }\n\n.fs-display { font-size: var(--fs-display); }\n.fs-h1 { font-size: var(--fs-h1); }\n.fs-h2 { font-size: var(--fs-h2); }\n.fs-h3 { font-size: var(--fs-h3); }\n.fs-h4 { font-size: var(--fs-h4); }\n.fs-h5 { font-size: var(--fs-h5); }\n.fs-h6 { font-size: var(--fs-h6); }\n.fs-body-lg { font-size: var(--fs-body-lg); }\n.fs-body { font-size: var(--fs-body); }\n.fs-body-sm { font-size: var(--fs-body-sm); }\n.fs-label { font-size: var(--fs-label); }\n.fs-caption { font-size: var(--fs-caption); }\n.fs-tiny { font-size: var(--fs-tiny); }\n\n.lh-tight { line-height: var(--lh-tight); }\n.lh-snug { line-height: var(--lh-snug); }\n.lh-normal { line-height: var(--lh-normal); }\n.lh-relaxed { line-height: var(--lh-relaxed); }\n.lh-loose { line-height: var(--lh-loose); }\n\n.mt-0 { margin-top: 0; }\n.mb-0 { margin-bottom: 0; }\n.my-0 { margin-block: 0; }\n.mx-0 { margin-inline: 0; }\n\n.mt-sm { margin-top: var(--space-sm); }\n.mb-sm { margin-bottom: var(--space-sm); }\n.mt-md { margin-top: var(--space-md); }\n.mb-md { margin-bottom: var(--space-md); }\n.mt-lg { margin-top: var(--space-lg); }\n.mb-lg { margin-bottom: var(--space-lg); }\n.mt-xl { margin-top: var(--space-xl); }\n.mb-xl { margin-bottom: var(--space-xl); }\n\n.pt-sm { padding-top: var(--space-sm); }\n.pb-sm { padding-bottom: var(--space-sm); }\n.pt-md { padding-top: var(--space-md); }\n.pb-md { padding-bottom: var(--space-md); }\n.pt-lg { padding-top: var(--space-lg); }\n.pb-lg { padding-bottom: var(--space-lg); }\n.pt-xl { padding-top: var(--space-xl); }\n.pb-xl { padding-bottom: var(--space-xl); }\n\n.p-sm { padding: var(--space-sm); }\n.p-md { padding: var(--space-md); }\n.p-lg { padding: var(--space-lg); }\n.p-xl { padding: var(--space-xl); }\n\n.px-sm { padding-inline: var(--space-sm); }\n.px-md { padding-inline: var(--space-md); }\n.px-lg { padding-inline: var(--space-lg); }\n.py-sm { padding-block: var(--space-sm); }\n.py-md { padding-block: var(--space-md); }\n.py-lg { padding-block: var(--space-lg); }\n\n.gap-xs { gap: var(--space-xs); }\n.gap-sm { gap: var(--space-sm); }\n.gap-md { gap: var(--space-md); }\n.gap-lg { gap: var(--space-lg); }\n.gap-xl { gap: var(--space-xl); }\n\n/* === MOBILE BREAKPOINT === */\n@media (max-width: 480px) {\n  :root {\n    --container-padding: 1rem;\n  }\n  \n  .grid-cols-2,\n  .grid-cols-3,\n  .grid-cols-4 {\n    grid-template-columns: 1fr;\n  }\n  \n  \n  .hide-mobile { display: none !important; }\n  \n  \n  .text-center-mobile { text-align: center; }\n  .text-left-mobile { text-align: left; }\n}\n\n/* === TABLET BREAKPOINT === */\n@media (min-width: 481px) and (max-width: 768px) {\n  .grid-cols-3,\n  .grid-cols-4 {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  \n  \n  .hide-tablet { display: none !important; }\n}\n\n/* === DESKTOP BREAKPOINT === */\n@media (min-width: 769px) and (max-width: 1024px) {\n  .grid-cols-4 {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n\n/* === WIDE BREAKPOINT === */\n@media (min-width: 1025px) {\n  .hide-desktop { display: none !important; }\n}\n\n/* === ASPECT RATIOS === */\n.aspect-square { aspect-ratio: 1; }\n.aspect-video { aspect-ratio: 16 / 9; }\n.aspect-portrait { aspect-ratio: 3 / 4; }\n.aspect-wide { aspect-ratio: 21 / 9; }\n\n/* === FLEXBOX UTILITIES === */\n.flex { display: flex; }\n.flex-col { flex-direction: column; }\n.flex-row { flex-direction: row; }\n.flex-wrap { flex-wrap: wrap; }\n.flex-nowrap { flex-wrap: nowrap; }\n.flex-1 { flex: 1; }\n.flex-auto { flex: auto; }\n.flex-none { flex: none; }\n\n.items-start { align-items: flex-start; }\n.items-center { align-items: center; }\n.items-end { align-items: flex-end; }\n.items-stretch { align-items: stretch; }\n\n.justify-start { justify-content: flex-start; }\n.justify-center { justify-content: center; }\n.justify-end { justify-content: flex-end; }\n.justify-between { justify-content: space-between; }\n.justify-around { justify-content: space-around; }\n.justify-evenly { justify-content: space-evenly; }\n\n.flex-center {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* === TOUCH TARGETS === */\n.touch-target {\n  min-height: 44px;\n  min-width: 44px;\n}\n\n/* === CARD SPACING === */\n.resp-card {\n  padding: var(--space-md);\n  border-radius: clamp(0.5rem, 1vw, 1rem);\n}\n\n.resp-card-sm { padding: var(--space-sm); }\n.resp-card-lg { padding: var(--space-lg); }\n\n.resp-section {\n  padding-block: var(--space-2xl);\n}\n\n.resp-section-sm { padding-block: var(--space-xl); }\n.resp-section-lg { padding-block: var(--space-3xl); }\n\n/* === IMAGE UTILITIES === */\n.img-cover {\n  object-fit: cover;\n  width: 100%;\n  height: 100%;\n}\n\n.img-contain {\n  object-fit: contain;\n  width: 100%;\n  height: 100%;\n}\n\n.img-responsive {\n  max-width: 100%;\n  height: auto;\n  display: block;\n}\n\n/* === LIST UTILITIES === */\n.list-spaced li {\n  margin-bottom: var(--space-xs);\n  line-height: var(--lh-relaxed);\n}\n\n.list-spaced li:last-child {\n  margin-bottom: 0;\n}\n\n/* === TABLE UTILITIES === */\n.table-responsive {\n  width: 100%;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.resp-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.resp-table th,\n.resp-table td {\n  padding: var(--space-sm);\n  text-align: left;\n  vertical-align: top;\n}\n\n/* === FORM UTILITIES === */\n.resp-input {\n  font-size: var(--fs-body);\n  padding: var(--space-sm) var(--space-md);\n  line-height: var(--lh-normal);\n}\n\n.resp-label {\n  font-size: var(--fs-label);\n  margin-bottom: var(--space-xs);\n  display: block;\n}\n\n/* === PRINT STYLES === */\n@media print {\n  :root {\n    --font-base: 12pt;\n  }\n  \n  body {\n    font-size: 12pt;\n    line-height: 1.5;\n    color: #000;\n    background: #fff;\n  }\n  \n  h1 { font-size: 24pt; }\n  h2 { font-size: 20pt; }\n  h3 { font-size: 16pt; }\n  h4 { font-size: 14pt; }\n  h5, h6 { font-size: 12pt; }\n  \n  .hide-print { display: none !important; }\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  *,\n  *::before,\n  *::after {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n    scroll-behavior: auto !important;\n  }\n}\n","path":null,"size_bytes":10562,"size_tokens":null},"css/wellness-checkin.css":{"content":"/* === WELLNESS CHECK-IN === */\n.wellness-checkin {\n  padding: 4rem 1.5rem;\n  background: linear-gradient(135deg, #fdf8f3 0%, #f5ebe0 50%, #faf6f1 100%);\n  position: relative;\n  overflow: hidden;\n  transition: background 0.8s ease;\n}\n\n.wellness-checkin::before {\n  content: '';\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background: radial-gradient(circle at 30% 30%, rgba(212, 165, 116, 0.1) 0%, transparent 50%);\n  pointer-events: none;\n}\n\n.wellness-checkin__container {\n  max-width: 1100px;\n  margin: 0 auto;\n  position: relative;\n  z-index: 1;\n}\n\n/* === GRID LAYOUT === */\n.wellness-checkin__grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1.5rem;\n  align-items: stretch;\n}\n\n/* === RESPONSIVE === */\n@media (max-width: 768px) {\n  .wellness-checkin__grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* === GREETING === */\n.wellness-checkin__greeting {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n\n.wellness-checkin__time-greeting {\n  font-size: 1rem;\n  color: var(--gold-crayola, #d4a574);\n  font-weight: 500;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n\n.wellness-checkin__time-icon {\n  font-size: 1.25rem;\n}\n\n.wellness-checkin__title {\n  font-size: clamp(1.5rem, 4vw, 2rem);\n  font-weight: 700;\n  color: var(--eerie-black, #1a1a1a);\n  margin-bottom: 0.5rem;\n}\n\n.wellness-checkin__subtitle {\n  font-size: 1rem;\n  color: var(--sonic-silver, #6b6b6b);\n  max-width: 500px;\n  margin: 0 auto;\n}\n\n/* === CARD === */\n.wellness-checkin__card {\n  background: #ffffff;\n  border-radius: 24px;\n  padding: 1.5rem;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  display: flex;\n  flex-direction: column;\n}\n\n.wellness-checkin__card-title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--gold-crayola, #d4a574);\n  margin-bottom: 1rem;\n  text-align: center;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.wellness-checkin__card--mood {\n  display: flex;\n  flex-direction: column;\n}\n\n.wellness-checkin__card--tip {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.wellness-checkin__card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 15px 50px rgba(0, 0, 0, 0.1);\n}\n\n/* === MOOD SELECTOR === */\n.wellness-checkin__moods {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 0.75rem;\n  flex: 1;\n}\n\n@media (max-width: 480px) {\n  .wellness-checkin__moods {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n.wellness-checkin__mood-btn {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 1rem 1.25rem;\n  background: #f8f5f1;\n  border: 2px solid transparent;\n  border-radius: 16px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  position: relative;\n  overflow: hidden;\n}\n\n.wellness-checkin__mood-btn::before {\n  content: '';\n  position: absolute;\n  inset: 0;\n  background: radial-gradient(circle at center, var(--mood-color, transparent) 0%, transparent 70%);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.wellness-checkin__mood-btn:hover {\n  transform: translateY(-5px) scale(1.05);\n  border-color: var(--mood-color, #d4a574);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.wellness-checkin__mood-btn:hover::before {\n  opacity: 0.15;\n}\n\n.wellness-checkin__mood-btn.is-selected {\n  border-color: var(--mood-color, #d4a574);\n  background: white;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\n  transform: translateY(-3px) scale(1.02);\n}\n\n.wellness-checkin__mood-btn.is-selected::before {\n  opacity: 0.2;\n}\n\n.wellness-checkin__mood-emoji {\n  font-size: 2rem;\n  transition: transform 0.3s ease;\n  position: relative;\n  z-index: 1;\n}\n\n.wellness-checkin__mood-btn:hover .wellness-checkin__mood-emoji {\n  animation: emoji-wiggle 0.5s ease;\n}\n\n.wellness-checkin__mood-btn.is-selected .wellness-checkin__mood-emoji {\n  animation: emoji-bounce 0.6s ease;\n}\n\n@keyframes emoji-wiggle {\n  0%, 100% { transform: rotate(0deg); }\n  25% { transform: rotate(-10deg); }\n  75% { transform: rotate(10deg); }\n}\n\n@keyframes emoji-bounce {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.3); }\n}\n\n.wellness-checkin__mood-label {\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: var(--sonic-silver, #6b6b6b);\n  text-transform: capitalize;\n  position: relative;\n  z-index: 1;\n}\n\n/* === MOOD COLORS === */\n.wellness-checkin__mood-btn[data-mood=\"happy\"] { --mood-color: #10b981; }\n.wellness-checkin__mood-btn[data-mood=\"calm\"] { --mood-color: #06b6d4; }\n.wellness-checkin__mood-btn[data-mood=\"okay\"] { --mood-color: #f59e0b; }\n.wellness-checkin__mood-btn[data-mood=\"anxious\"] { --mood-color: #8b5cf6; }\n.wellness-checkin__mood-btn[data-mood=\"sad\"] { --mood-color: #3b82f6; }\n.wellness-checkin__mood-btn[data-mood=\"stressed\"] { --mood-color: #ef4444; }\n\n/* === RESPONSE SECTION === */\n.wellness-checkin__response {\n  background: linear-gradient(135deg, #f8f5f1 0%, #faf6f1 100%);\n  border-radius: 16px;\n  padding: 1.25rem;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  opacity: 0;\n  transform: translateY(10px);\n  transition: all 0.5s ease;\n  display: none;\n}\n\n.wellness-checkin__response.is-visible {\n  display: block;\n}\n\n.wellness-checkin__response.is-visible {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.wellness-checkin__affirmation {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--eerie-black, #1a1a1a);\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.wellness-checkin__tip {\n  background: white;\n  border-radius: 16px;\n  padding: 1.25rem;\n  margin-bottom: 1.25rem;\n  border-left: 4px solid var(--mood-accent, #d4a574);\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n}\n\n.wellness-checkin__tip-title {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--gold-crayola, #d4a574);\n  margin-bottom: 0.5rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.wellness-checkin__tip-text {\n  font-size: 0.95rem;\n  color: var(--sonic-silver, #4a4a4a);\n  line-height: 1.6;\n}\n\n/* === QUICK ACTIONS === */\n.wellness-checkin__actions {\n  display: flex;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n}\n\n.wellness-checkin__action-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.25rem;\n  border-radius: 50px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  text-decoration: none;\n  border: none;\n}\n\n.wellness-checkin__action-btn--primary {\n  background: linear-gradient(135deg, var(--mood-accent, #d4a574) 0%, var(--mood-accent-dark, #c49466) 100%);\n  color: white;\n  box-shadow: 0 4px 15px rgba(212, 165, 116, 0.3);\n}\n\n.wellness-checkin__action-btn--primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(212, 165, 116, 0.4);\n}\n\n.wellness-checkin__action-btn--secondary {\n  background: white;\n  color: var(--eerie-black, #1a1a1a);\n  border: 2px solid #e5e5e5;\n}\n\n.wellness-checkin__action-btn--secondary:hover {\n  border-color: var(--mood-accent, #d4a574);\n  background: #faf6f1;\n}\n\n/* === COMMUNITY MOOD BAR === */\n.wellness-checkin__community {\n  margin-top: 2rem;\n  padding-top: 1.5rem;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n.wellness-checkin__community-title {\n  font-size: 0.8rem;\n  color: var(--sonic-silver, #6b6b6b);\n  text-align: center;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n\n.wellness-checkin__community-bar {\n  display: flex;\n  height: 8px;\n  border-radius: 4px;\n  overflow: hidden;\n  background: #e5e5e5;\n}\n\n.wellness-checkin__community-segment {\n  height: 100%;\n  transition: width 0.8s ease;\n}\n\n.wellness-checkin__community-segment[data-mood=\"happy\"] { background: #10b981; }\n.wellness-checkin__community-segment[data-mood=\"calm\"] { background: #06b6d4; }\n.wellness-checkin__community-segment[data-mood=\"okay\"] { background: #f59e0b; }\n.wellness-checkin__community-segment[data-mood=\"anxious\"] { background: #8b5cf6; }\n.wellness-checkin__community-segment[data-mood=\"sad\"] { background: #3b82f6; }\n.wellness-checkin__community-segment[data-mood=\"stressed\"] { background: #ef4444; }\n\n.wellness-checkin__community-legend {\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  margin-top: 0.75rem;\n  flex-wrap: wrap;\n}\n\n.wellness-checkin__legend-item {\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n  font-size: 0.75rem;\n  color: var(--sonic-silver, #6b6b6b);\n}\n\n.wellness-checkin__legend-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n}\n\n/* === CONFETTI === */\n.wellness-checkin__confetti {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 10;\n}\n\n/* === RIPPLE EFFECT === */\n.wellness-checkin__ripple {\n  position: absolute;\n  border-radius: 50%;\n  background: radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%);\n  transform: scale(0);\n  animation: ripple-expand 1s ease-out forwards;\n  pointer-events: none;\n}\n\n@keyframes ripple-expand {\n  to {\n    transform: scale(4);\n    opacity: 0;\n  }\n}\n\n/* === DEFAULT TIP === */\n.wellness-checkin__default-tip {\n  text-align: center;\n  padding: 1.5rem;\n}\n\n.wellness-checkin__default-tip-icon {\n  font-size: 2.5rem;\n  margin-bottom: 1rem;\n}\n\n.wellness-checkin__default-tip-title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--gold-crayola, #d4a574);\n  margin-bottom: 0.5rem;\n}\n\n.wellness-checkin__default-tip-text {\n  font-size: 0.95rem;\n  color: var(--sonic-silver, #4a4a4a);\n  line-height: 1.6;\n  max-width: 500px;\n  margin: 0 auto;\n}\n\n/* === DARK MODE === */\n[data-theme=\"dark\"] .wellness-checkin,\nbody.dark-mode .wellness-checkin {\n  background: linear-gradient(135deg, #1a1625 0%, #1f1a2e 50%, #1a1625 100%);\n}\n\n[data-theme=\"dark\"] .wellness-checkin::before,\nbody.dark-mode .wellness-checkin::before {\n  background: radial-gradient(circle at 30% 30%, rgba(155, 126, 217, 0.1) 0%, transparent 50%);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__title,\nbody.dark-mode .wellness-checkin__title {\n  color: #f5f5f5;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__subtitle,\nbody.dark-mode .wellness-checkin__subtitle {\n  color: #a0a0a0;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__time-greeting,\nbody.dark-mode .wellness-checkin__time-greeting {\n  color: var(--purple-accent, #9b7ed9);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__card,\nbody.dark-mode .wellness-checkin__card {\n  background: #252033;\n  border-color: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__mood-btn,\nbody.dark-mode .wellness-checkin__mood-btn {\n  background: #1f1a2e;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__mood-btn.is-selected,\nbody.dark-mode .wellness-checkin__mood-btn.is-selected {\n  background: #2d2640;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__mood-label,\nbody.dark-mode .wellness-checkin__mood-label {\n  color: #a0a0a0;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__response,\nbody.dark-mode .wellness-checkin__response {\n  background: linear-gradient(135deg, #1f1a2e 0%, #252033 100%);\n  border-color: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__affirmation,\nbody.dark-mode .wellness-checkin__affirmation {\n  color: #f5f5f5;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__tip,\nbody.dark-mode .wellness-checkin__tip {\n  background: #1a1625;\n  border-left-color: var(--purple-accent, #9b7ed9);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__tip-title,\nbody.dark-mode .wellness-checkin__tip-title {\n  color: var(--purple-accent, #9b7ed9);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__tip-text,\nbody.dark-mode .wellness-checkin__tip-text {\n  color: #c0c0c0;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__action-btn--primary,\nbody.dark-mode .wellness-checkin__action-btn--primary {\n  background: linear-gradient(135deg, var(--purple-accent, #9b7ed9) 0%, #7c5fb8 100%);\n  box-shadow: 0 4px 15px rgba(155, 126, 217, 0.3);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__action-btn--secondary,\nbody.dark-mode .wellness-checkin__action-btn--secondary {\n  background: #1f1a2e;\n  color: #f5f5f5;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__community,\nbody.dark-mode .wellness-checkin__community {\n  border-top-color: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__community-bar,\nbody.dark-mode .wellness-checkin__community-bar {\n  background: #1f1a2e;\n}\n\n[data-theme=\"dark\"] .wellness-checkin__default-tip-title,\nbody.dark-mode .wellness-checkin__default-tip-title {\n  color: var(--purple-accent, #9b7ed9);\n}\n\n[data-theme=\"dark\"] .wellness-checkin__default-tip-text,\nbody.dark-mode .wellness-checkin__default-tip-text {\n  color: #c0c0c0;\n}\n\n@media (max-width: 768px) {\n  .wellness-checkin {\n    padding: 3rem 1rem;\n  }\n  \n  .wellness-checkin__card {\n    padding: 1.5rem;\n  }\n  \n  .wellness-checkin__moods {\n    gap: 0.5rem;\n  }\n  \n  .wellness-checkin__mood-btn {\n    padding: 0.75rem 1rem;\n  }\n  \n  .wellness-checkin__mood-emoji {\n    font-size: 1.75rem;\n  }\n  \n  .wellness-checkin__actions {\n    flex-direction: column;\n  }\n  \n  .wellness-checkin__action-btn {\n    justify-content: center;\n  }\n  \n  .wellness-checkin__community-legend {\n    gap: 0.5rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .wellness-checkin__mood-btn {\n    padding: 0.6rem 0.8rem;\n  }\n  \n  .wellness-checkin__mood-emoji {\n    font-size: 1.5rem;\n  }\n  \n  .wellness-checkin__mood-label {\n    font-size: 0.7rem;\n  }\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  .wellness-checkin__mood-btn,\n  .wellness-checkin__response,\n  .wellness-checkin__card,\n  .wellness-checkin__streak {\n    transition: none;\n  }\n  \n  .wellness-checkin__mood-btn:hover .wellness-checkin__mood-emoji,\n  .wellness-checkin__mood-btn.is-selected .wellness-checkin__mood-emoji {\n    animation: none;\n  }\n  \n  @keyframes streak-pulse {\n    0%, 100% { transform: none; }\n  }\n}\n","path":null,"size_bytes":13810,"size_tokens":null},"articles/article.js":{"content":"// ==================== ARTICLE PAGE ====================\n\n\n\n// --- Preloader ---\n(function() {\n  'use strict';\n\n  var progressFill = document.querySelector('.progress-bar-fill');\n  var progress = 0;\n  var progressInterval;\n\n  if (progressFill) {\n    progressInterval = setInterval(function () {\n      progress += Math.random() * 8 + 2;\n      if (progress > 90) progress = 90;\n      progressFill.style.width = progress + '%';\n    }, 150);\n  }\n\n  function hidePreloader() {\n    if (progressInterval) clearInterval(progressInterval);\n    if (progressFill) {\n      progressFill.style.width = '100%';\n    }\n    setTimeout(function () {\n      var preloader = document.querySelector('[data-preaload]');\n      document.body.classList.add('loaded');\n      if (preloader) {\n        preloader.classList.add('loaded');\n      }\n      window.scrollTo(0, 0);\n    }, 400);\n  }\n\n  window.addEventListener('load', hidePreloader);\n\n\n// --- Language & Translation Helpers ---\n  function getSavedLanguage() {\n    return localStorage.getItem('mindbalance-language') || localStorage.getItem('mindbalance_language') || 'en';\n  }\n\n\n  function getTranslation(key, fallback) {\n    if (window.translations) {\n      const lang = getSavedLanguage();\n      const langMap = { en: 'en', es: 'es', fr: 'fr', zh: 'zh', hi: 'hi', ko: 'ko' };\n      const langKey = langMap[lang] || 'en';\n      if (window.translations[langKey] && window.translations[langKey][key]) {\n        return window.translations[langKey][key];\n      }\n    }\n    return fallback;\n  }\n\n\n// ==================== TTS ENGINE ====================\n  const TTS_API_BASE = (function() {\n    const host = window.location.hostname;\n    if (host === 'mindbalance.cloud' || host === 'www.mindbalance.cloud' ||\n        host === 'mindspace.site' || host === 'www.mindspace.site') {\n      return 'https://d519c840-a074-41fa-b89a-8627dded835a-00-f7kivyi5gpot.worf.replit.dev';\n    }\n    return '';\n  })();\n\n  let ttsEngine = localStorage.getItem('tts-engine') || 'elevenlabs';\n  let selectedVoice = localStorage.getItem('tts-voice') || 'rachel';\n  let elevenLabsAvailable = false;\n  let currentAudio = null;\n  let audioCache = {};\n\n\n  let speechSynthesis = window.speechSynthesis;\n  let currentUtterance = null;\n  let isPlaying = false;\n  let isPaused = false;\n  let currentParagraphIndex = 0;\n  let paragraphs = [];\n  let playbackSpeed = parseFloat(localStorage.getItem('tts-speed') || '1.0');\n  let playbackVolume = parseFloat(localStorage.getItem('tts-volume') || '1.0');\n  let isMuted = false;\n  let autoScrollEnabled = localStorage.getItem('tts-autoscroll') !== 'false';\n  let ttsTimeRemaining = 0;\n  let isGeneratingAudio = false;\n\n\n// --- ElevenLabs Availability ---\n  async function checkElevenLabsAvailability() {\n    try {\n      console.log('Checking ElevenLabs availability...');\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 5000);\n\n      const response = await fetch(TTS_API_BASE + '/api/tts/health', {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json'\n        },\n        signal: controller.signal\n      });\n      clearTimeout(timeoutId);\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log('ElevenLabs health check response:', data);\n        elevenLabsAvailable = data.available === true;\n\n        if (elevenLabsAvailable) {\n          console.log('ElevenLabs is available - premium TTS enabled');\n\n          const savedEngine = localStorage.getItem('tts-engine');\n          if (savedEngine === 'elevenlabs' || !savedEngine) {\n            ttsEngine = 'elevenlabs';\n          }\n        } else {\n          console.log('ElevenLabs API key not configured on server');\n          if (ttsEngine === 'elevenlabs') {\n            ttsEngine = 'browser';\n            localStorage.setItem('tts-engine', 'browser');\n          }\n        }\n      } else {\n        console.warn('ElevenLabs health check failed with status:', response.status);\n        elevenLabsAvailable = false;\n        if (ttsEngine === 'elevenlabs') {\n          ttsEngine = 'browser';\n          localStorage.setItem('tts-engine', 'browser');\n        }\n      }\n    } catch (e) {\n      console.warn('ElevenLabs not available, using browser TTS. Error:', e.message);\n      elevenLabsAvailable = false;\n      if (ttsEngine === 'elevenlabs') {\n        ttsEngine = 'browser';\n        localStorage.setItem('tts-engine', 'browser');\n      }\n    }\n    updateVoiceSelector();\n  }\n\n\n// --- Voice Management ---\n  async function fetchElevenLabsVoices() {\n    try {\n      const response = await fetch(TTS_API_BASE + '/api/tts/voices');\n      if (response.ok) {\n        const data = await response.json();\n        return data.voices || [];\n      }\n    } catch (e) {\n      console.error('Failed to fetch voices:', e);\n    }\n    return [];\n  }\n\n\n  async function updateVoiceSelector() {\n    const voiceSelect = document.getElementById('ttsVoiceSelect');\n    const engineToggle = document.getElementById('ttsEngineToggle');\n\n    if (engineToggle) {\n      engineToggle.textContent = ttsEngine === 'elevenlabs' ? 'ðŸŽ™ï¸ Premium' : 'ðŸ”Š Browser';\n      engineToggle.title = ttsEngine === 'elevenlabs'\n        ? getTranslation('tts_premium_voice', 'Premium AI Voice (ElevenLabs)')\n        : getTranslation('tts_browser_voice', 'Browser Voice');\n    }\n\n    if (!voiceSelect) return;\n\n    voiceSelect.innerHTML = '';\n\n    if (ttsEngine === 'elevenlabs' && elevenLabsAvailable) {\n      const voices = await fetchElevenLabsVoices();\n      voices.forEach(voice => {\n        const option = document.createElement('option');\n        option.value = voice.id;\n        option.textContent = voice.name;\n        if (voice.id === selectedVoice) option.selected = true;\n        voiceSelect.appendChild(option);\n      });\n      voiceSelect.disabled = false;\n    } else {\n\n      const browserVoices = speechSynthesis ? speechSynthesis.getVoices() : [];\n      if (browserVoices.length === 0) {\n        const option = document.createElement('option');\n        option.textContent = getTranslation('tts_default_voice', 'Default Voice');\n        voiceSelect.appendChild(option);\n      } else {\n        browserVoices.slice(0, 10).forEach((voice, i) => {\n          const option = document.createElement('option');\n          option.value = i.toString();\n          option.textContent = `${voice.name} (${voice.lang})`;\n          voiceSelect.appendChild(option);\n        });\n      }\n    }\n  }\n\n\n// --- Article Content ---\n  function getArticleContent() {\n    const contentArea = document.querySelector('.article-content');\n    if (!contentArea) return [];\n\n    const elements = contentArea.querySelectorAll('h2, h3, p, li');\n    return Array.from(elements).map(el => el.textContent.trim()).filter(text => text.length > 0);\n  }\n\n\n// --- Paragraph Highlighting ---\n  function highlightParagraph(index) {\n    const elements = document.querySelectorAll('.article-content h2, .article-content h3, .article-content p, .article-content li');\n    elements.forEach((el, i) => {\n      el.classList.toggle('tts-reading', i === index);\n\n      if (i !== index && el.dataset.originalHtml) {\n        el.innerHTML = el.dataset.originalHtml;\n        delete el.dataset.originalHtml;\n      }\n    });\n\n\n    if (ttsEngine === 'browser' && elements[index]) {\n      const el = elements[index];\n      if (!el.dataset.originalHtml) {\n        el.dataset.originalHtml = el.innerHTML;\n        wrapWordsInSpans(el);\n      }\n    }\n\n\n    if (autoScrollEnabled && elements[index]) {\n      const el = elements[index];\n      const rect = el.getBoundingClientRect();\n      const viewportHeight = window.innerHeight;\n\n\n      if (rect.top < 100 || rect.bottom > viewportHeight - 100) {\n        el.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n    }\n  }\n\n\n  function wrapWordsInSpans(element) {\n    const walker = document.createTreeWalker(element, NodeFilter.SHOW_TEXT, null, false);\n    const textNodes = [];\n    while (walker.nextNode()) textNodes.push(walker.currentNode);\n\n    textNodes.forEach(node => {\n      const text = node.textContent;\n      if (!text.trim()) return;\n\n      const fragment = document.createDocumentFragment();\n      const words = text.split(/(\\s+)/);\n\n      words.forEach(word => {\n        if (word.match(/^\\s+$/)) {\n          fragment.appendChild(document.createTextNode(word));\n        } else if (word) {\n          const span = document.createElement('span');\n          span.className = 'tts-word';\n          span.textContent = word;\n          fragment.appendChild(span);\n        }\n      });\n\n      node.parentNode.replaceChild(fragment, node);\n    });\n  }\n\n\n// --- Word Highlighting ---\n  function highlightWord(charIndex) {\n    const elements = document.querySelectorAll('.article-content h2, .article-content h3, .article-content p, .article-content li');\n    const currentEl = elements[currentParagraphIndex];\n    if (!currentEl) return;\n\n\n    document.querySelectorAll('.tts-current-word').forEach(el => {\n      el.classList.remove('tts-current-word');\n    });\n\n\n    const wordSpans = currentEl.querySelectorAll('.tts-word');\n    const fullText = paragraphs[currentParagraphIndex] || '';\n    let charCount = 0;\n\n    for (const span of wordSpans) {\n      const word = span.textContent;\n      const wordStart = fullText.indexOf(word, charCount);\n      if (wordStart === -1) {\n        charCount += word.length + 1;\n        continue;\n      }\n      const wordEnd = wordStart + word.length;\n\n      if (charIndex >= wordStart && charIndex < wordEnd) {\n        span.classList.add('tts-current-word');\n        break;\n      }\n      charCount = wordEnd;\n    }\n  }\n\n\n// --- Clear Highlights ---\n  function clearHighlights() {\n    document.querySelectorAll('.tts-reading').forEach(el => {\n      el.classList.remove('tts-reading');\n\n      if (el.dataset.originalHtml) {\n        el.innerHTML = el.dataset.originalHtml;\n        delete el.dataset.originalHtml;\n      }\n    });\n\n    document.querySelectorAll('.tts-current-word').forEach(el => {\n      el.classList.remove('tts-current-word');\n    });\n  }\n\n\n// --- Player UI ---\n  function updatePlayerUI() {\n    const playBtn = document.getElementById('ttsPlayBtn');\n    const pauseBtn = document.getElementById('ttsPauseBtn');\n    const stopBtn = document.getElementById('ttsStopBtn');\n    const statusText = document.getElementById('ttsStatus');\n    const progressBar = document.getElementById('ttsProgressFill');\n\n    if (playBtn) {\n      playBtn.style.display = (isPlaying && !isPaused) ? 'none' : 'flex';\n      playBtn.setAttribute('aria-pressed', isPlaying && !isPaused ? 'true' : 'false');\n    }\n    if (pauseBtn) {\n      pauseBtn.style.display = (isPlaying && !isPaused) ? 'flex' : 'none';\n    }\n    if (stopBtn) {\n      stopBtn.disabled = !isPlaying && !isPaused;\n    }\n\n    if (statusText) {\n      if (isPlaying && !isPaused) {\n\n        const timeRemaining = calculateTimeRemaining();\n        statusText.textContent = timeRemaining;\n        statusText.removeAttribute('data-translate');\n      } else if (isPaused) {\n        statusText.textContent = getTranslation('tts_paused', 'Paused');\n        statusText.setAttribute('data-translate', 'tts_paused');\n      } else {\n        statusText.textContent = getTranslation('tts_ready', 'Ready to play');\n        statusText.setAttribute('data-translate', 'tts_ready');\n      }\n    }\n\n    if (progressBar && paragraphs.length > 0) {\n      const progress = ((currentParagraphIndex) / paragraphs.length) * 100;\n      progressBar.style.width = progress + '%';\n    }\n\n\n    updateTTSTimeRemaining();\n\n\n    updateVolumeUI();\n\n\n    const autoScrollBtn = document.getElementById('ttsAutoScrollBtn');\n    if (autoScrollBtn) {\n      autoScrollBtn.classList.toggle('active', autoScrollEnabled);\n    }\n  }\n\n\n  function calculateTimeRemaining() {\n    if (paragraphs.length === 0) return '--:--';\n\n\n    let remainingChars = 0;\n    for (let i = currentParagraphIndex; i < paragraphs.length; i++) {\n      remainingChars += paragraphs[i].length;\n    }\n\n\n    const charsPerSecond = 15 * playbackSpeed;\n    const remainingSeconds = Math.ceil(remainingChars / charsPerSecond);\n    const minutes = Math.floor(remainingSeconds / 60);\n    const seconds = remainingSeconds % 60;\n\n    return `${minutes}:${seconds.toString().padStart(2, '0')} remaining`;\n  }\n\n\n  function updateTTSTimeRemaining() {\n    const ttsTimeDisplay = document.getElementById('ttsTimeRemaining');\n    if (!ttsTimeDisplay || paragraphs.length === 0) return;\n\n    const timeRemaining = calculateTimeRemaining();\n    ttsTimeDisplay.textContent = timeRemaining.replace(' remaining', '');\n  }\n\n\n  function updateVolumeUI() {\n    const volumeSlider = document.getElementById('ttsVolumeSlider');\n    const volumeIcon = document.getElementById('ttsVolumeIcon');\n    const volumeValue = document.getElementById('ttsVolumeValue');\n\n    if (volumeSlider) {\n      volumeSlider.value = isMuted ? 0 : playbackVolume * 100;\n    }\n\n    if (volumeValue) {\n      volumeValue.textContent = isMuted ? '0%' : Math.round(playbackVolume * 100) + '%';\n    }\n\n    if (volumeIcon) {\n      if (isMuted || playbackVolume === 0) {\n        volumeIcon.innerHTML = '<path d=\"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\"/>';\n      } else if (playbackVolume < 0.5) {\n        volumeIcon.innerHTML = '<path d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"/>';\n      } else {\n        volumeIcon.innerHTML = '<path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/>';\n      }\n    }\n  }\n\n\n// --- Language Detection ---\n  function getUserLanguage() {\n    const savedLang = getSavedLanguage();\n    const langMap = {\n      'en': 'en-US',\n      'es': 'es-ES',\n      'fr': 'fr-FR',\n      'zh': 'zh-CN',\n      'hi': 'hi-IN',\n      'ko': 'ko-KR'\n    };\n    return langMap[savedLang] || 'en-US';\n  }\n\n\n// --- Voice Loading ---\n  let cachedVoices = [];\n\n\n  function loadVoices() {\n    cachedVoices = speechSynthesis.getVoices();\n  }\n\n\n  if (speechSynthesis) {\n    loadVoices();\n    if (speechSynthesis.onvoiceschanged !== undefined) {\n      speechSynthesis.onvoiceschanged = loadVoices;\n    }\n  }\n\n\n// --- Voice Matching ---\n  function findVoiceForLanguage(lang) {\n    const voices = cachedVoices.length ? cachedVoices : speechSynthesis.getVoices();\n    if (!voices.length) return null;\n\n\n    let voice = voices.find(v => v.lang === lang);\n    if (voice) return voice;\n\n\n    const langPrefix = lang.split('-')[0];\n    voice = voices.find(v => v.lang.startsWith(langPrefix));\n    if (voice) return voice;\n\n\n    return voices[0];\n  }\n\n\n// --- ElevenLabs Audio Generation ---\n  async function generateElevenLabsAudio(text) {\n    const userLang = getSavedLanguage();\n\n    try {\n      const response = await fetch(TTS_API_BASE + '/api/tts/generate', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          text: text,\n          voice: selectedVoice,\n          language: userLang\n        })\n      });\n\n      if (!response.ok) {\n        const error = await response.json().catch(() => ({ error: 'Unknown error' }));\n        throw new Error(error.error || 'TTS generation failed');\n      }\n\n      const audioBlob = await response.blob();\n      return URL.createObjectURL(audioBlob);\n    } catch (e) {\n      console.error('ElevenLabs TTS error:', e);\n      throw e;\n    }\n  }\n\n\n// --- ElevenLabs Playback ---\n  async function speakParagraphElevenLabs(index) {\n    if (index >= paragraphs.length) {\n      stopSpeech();\n      return;\n    }\n\n    currentParagraphIndex = index;\n    highlightParagraph(index);\n    updatePlayerUI();\n\n    const text = paragraphs[index];\n\n\n    let audioUrl = audioCache[index];\n\n    if (!audioUrl) {\n\n      const statusText = document.getElementById('ttsStatus');\n      if (statusText) {\n        statusText.textContent = getTranslation('tts_generating', 'Generating audio...');\n      }\n      isGeneratingAudio = true;\n\n      try {\n        audioUrl = await generateElevenLabsAudio(text);\n        audioCache[index] = audioUrl;\n      } catch (e) {\n\n        console.warn('ElevenLabs TTS failed for this paragraph, using browser voice:', e.message);\n        speakParagraphBrowser(index);\n        return;\n      }\n\n      isGeneratingAudio = false;\n    }\n\n\n    if (currentAudio) {\n      currentAudio.pause();\n      currentAudio = null;\n    }\n\n\n    currentAudio = new Audio(audioUrl);\n    currentAudio.volume = isMuted ? 0 : playbackVolume;\n    currentAudio.playbackRate = playbackSpeed;\n\n    currentAudio.onended = () => {\n      if (isPlaying && !isPaused) {\n        speakParagraphElevenLabs(index + 1);\n      }\n    };\n\n    currentAudio.onerror = (e) => {\n      console.error('Audio playback error:', e);\n\n      if (isPlaying && !isPaused && index + 1 < paragraphs.length) {\n        speakParagraphElevenLabs(index + 1);\n      } else {\n        stopSpeech();\n      }\n    };\n\n    try {\n      await currentAudio.play();\n      updatePlayerUI();\n    } catch (e) {\n      console.error('Failed to play audio:', e);\n    }\n  }\n\n\n// --- Browser TTS Playback ---\n  function speakParagraphBrowser(index) {\n    if (index >= paragraphs.length) {\n      stopSpeech();\n      return;\n    }\n\n    currentParagraphIndex = index;\n    highlightParagraph(index);\n    updatePlayerUI();\n\n    const userLang = getUserLanguage();\n    currentUtterance = new SpeechSynthesisUtterance(paragraphs[index]);\n    currentUtterance.lang = userLang;\n    currentUtterance.rate = playbackSpeed;\n    currentUtterance.pitch = 1;\n    currentUtterance.volume = isMuted ? 0 : playbackVolume;\n\n\n    const voice = findVoiceForLanguage(userLang);\n    if (voice) {\n      currentUtterance.voice = voice;\n    }\n\n    currentUtterance.onend = () => {\n      if (isPlaying && !isPaused) {\n        speakParagraphBrowser(index + 1);\n      }\n    };\n\n    currentUtterance.onerror = (e) => {\n      if (e.error !== 'interrupted') {\n        console.error('TTS Error:', e.error);\n      }\n    };\n\n\n    currentUtterance.onboundary = (event) => {\n      if (event.name === 'word') {\n        highlightWord(event.charIndex);\n      }\n    };\n\n    speechSynthesis.speak(currentUtterance);\n  }\n\n\n// --- Playback Router ---\n  function speakParagraph(index) {\n    if (ttsEngine === 'elevenlabs' && elevenLabsAvailable) {\n      speakParagraphElevenLabs(index);\n    } else {\n      speakParagraphBrowser(index);\n    }\n  }\n\n\n// --- Play/Pause/Stop ---\n  function playSpeech() {\n    if (ttsEngine === 'elevenlabs' && elevenLabsAvailable) {\n      if (isPaused && currentAudio) {\n        currentAudio.play().catch(e => {\n          console.warn('ElevenLabs resume failed, switching to browser:', e);\n          ttsEngine = 'browser';\n          localStorage.setItem('tts-engine', 'browser');\n          updateVoiceSelector();\n          playSpeech();\n        });\n        isPaused = false;\n        isPlaying = true;\n        updatePlayerUI();\n        return;\n      }\n\n      paragraphs = getArticleContent();\n      if (paragraphs.length === 0) return;\n\n      audioCache = {};\n      isPlaying = true;\n      isPaused = false;\n      currentParagraphIndex = 0;\n\n      speakParagraphElevenLabs(0);\n      updatePlayerUI();\n      return;\n    }\n\n    if (!speechSynthesis) {\n      alert(getTranslation('tts_not_supported', 'Text-to-speech is not supported in your browser.'));\n      return;\n    }\n\n    if (isPaused) {\n      speechSynthesis.resume();\n      isPaused = false;\n      isPlaying = true;\n      updatePlayerUI();\n      return;\n    }\n\n    paragraphs = getArticleContent();\n    if (paragraphs.length === 0) return;\n\n    isPlaying = true;\n    isPaused = false;\n    currentParagraphIndex = 0;\n\n    speakParagraphBrowser(0);\n    updatePlayerUI();\n  }\n\n\n  function pauseSpeech() {\n    if (ttsEngine === 'elevenlabs' && currentAudio) {\n      currentAudio.pause();\n      isPaused = true;\n      updatePlayerUI();\n      return;\n    }\n\n    if (speechSynthesis && isPlaying) {\n      speechSynthesis.pause();\n      isPaused = true;\n      updatePlayerUI();\n    }\n  }\n\n\n  function stopSpeech() {\n\n    if (currentAudio) {\n      currentAudio.pause();\n      currentAudio.currentTime = 0;\n      currentAudio = null;\n    }\n\n\n    if (speechSynthesis) {\n      speechSynthesis.cancel();\n    }\n\n    isPlaying = false;\n    isPaused = false;\n    currentParagraphIndex = 0;\n    isGeneratingAudio = false;\n    clearHighlights();\n    updatePlayerUI();\n\n    const progressBar = document.getElementById('ttsProgressFill');\n    if (progressBar) progressBar.style.width = '0%';\n  }\n\n\n// --- Speed & Volume Controls ---\n  function changeSpeed(speed) {\n    playbackSpeed = speed;\n    localStorage.setItem('tts-speed', speed.toString());\n    const speedDisplay = document.getElementById('ttsSpeedDisplay');\n    if (speedDisplay) {\n      speedDisplay.textContent = speed + 'x';\n    }\n\n\n    if (currentAudio) {\n      currentAudio.playbackRate = speed;\n    }\n\n\n    if (ttsEngine === 'browser' && isPlaying && !isPaused) {\n      speechSynthesis.cancel();\n      speakParagraph(currentParagraphIndex);\n    }\n\n    updateTTSTimeRemaining();\n  }\n\n\n  function changeVolume(volume) {\n    playbackVolume = Math.max(0, Math.min(1, volume));\n    localStorage.setItem('tts-volume', playbackVolume.toString());\n    isMuted = false;\n\n\n    if (currentAudio) {\n      currentAudio.volume = playbackVolume;\n    }\n\n\n    if (currentUtterance) {\n      currentUtterance.volume = playbackVolume;\n    }\n\n    updateVolumeUI();\n  }\n\n\n  function toggleMute() {\n    isMuted = !isMuted;\n\n\n    if (currentAudio) {\n      currentAudio.volume = isMuted ? 0 : playbackVolume;\n    }\n\n\n    if (ttsEngine === 'browser' && isPlaying && !isPaused) {\n      speechSynthesis.cancel();\n      speakParagraph(currentParagraphIndex);\n    }\n\n    updateVolumeUI();\n  }\n\n\n// --- Engine Toggle ---\n  function toggleEngine() {\n    if (!elevenLabsAvailable) {\n      alert(getTranslation('tts_premium_unavailable', 'Premium voice is not available. Using browser voice.'));\n      return;\n    }\n\n\n    stopSpeech();\n\n\n    ttsEngine = ttsEngine === 'elevenlabs' ? 'browser' : 'elevenlabs';\n    localStorage.setItem('tts-engine', ttsEngine);\n\n\n    audioCache = {};\n\n    updateVoiceSelector();\n  }\n\n\n  function changeVoice(voiceId) {\n    selectedVoice = voiceId;\n    localStorage.setItem('tts-voice', voiceId);\n\n\n    audioCache = {};\n  }\n\n\n  function toggleAutoScroll() {\n    autoScrollEnabled = !autoScrollEnabled;\n    localStorage.setItem('tts-autoscroll', autoScrollEnabled.toString());\n    updatePlayerUI();\n  }\n\n\n// --- Skip Controls ---\n  function skipForward() {\n    if (paragraphs.length === 0) return;\n    const newIndex = Math.min(currentParagraphIndex + 1, paragraphs.length - 1);\n    if (isPlaying) {\n      if (ttsEngine === 'elevenlabs' && currentAudio) {\n        currentAudio.pause();\n        currentAudio = null;\n      }\n      if (speechSynthesis) {\n        speechSynthesis.cancel();\n      }\n      speakParagraph(newIndex);\n    } else {\n      currentParagraphIndex = newIndex;\n      highlightParagraph(newIndex);\n      updatePlayerUI();\n    }\n  }\n\n  function skipBackward() {\n    if (paragraphs.length === 0) return;\n    const newIndex = Math.max(currentParagraphIndex - 1, 0);\n    if (isPlaying) {\n      if (ttsEngine === 'elevenlabs' && currentAudio) {\n        currentAudio.pause();\n        currentAudio = null;\n      }\n      if (speechSynthesis) {\n        speechSynthesis.cancel();\n      }\n      speakParagraph(newIndex);\n    } else {\n      currentParagraphIndex = newIndex;\n      highlightParagraph(newIndex);\n      updatePlayerUI();\n    }\n  }\n\n\n\n// ==================== TTS PLAYER INITIALIZATION ====================\n  function initPlayer() {\n    const playBtn = document.getElementById('ttsPlayBtn');\n    const pauseBtn = document.getElementById('ttsPauseBtn');\n    const stopBtn = document.getElementById('ttsStopBtn');\n    const skipBackBtn = document.getElementById('ttsSkipBack');\n    const skipForwardBtn = document.getElementById('ttsSkipForward');\n    const speedSelect = document.getElementById('ttsSpeedSelect');\n    const volumeSlider = document.getElementById('ttsVolumeSlider');\n    const volumeBtn = document.getElementById('ttsVolumeBtn');\n    const autoScrollBtn = document.getElementById('ttsAutoScrollBtn');\n    const voiceSelect = document.getElementById('ttsVoiceSelect');\n    const engineToggle = document.getElementById('ttsEngineToggle');\n\n    if (playBtn) playBtn.addEventListener('click', playSpeech);\n    if (pauseBtn) pauseBtn.addEventListener('click', pauseSpeech);\n    if (stopBtn) stopBtn.addEventListener('click', stopSpeech);\n    if (skipBackBtn) skipBackBtn.addEventListener('click', skipBackward);\n    if (skipForwardBtn) skipForwardBtn.addEventListener('click', skipForward);\n\n    if (speedSelect) {\n\n      speedSelect.value = playbackSpeed.toString();\n      speedSelect.addEventListener('change', (e) => {\n        changeSpeed(parseFloat(e.target.value));\n      });\n    }\n\n\n    if (volumeSlider) {\n      volumeSlider.value = playbackVolume * 100;\n      volumeSlider.addEventListener('input', (e) => {\n        changeVolume(parseInt(e.target.value) / 100);\n      });\n    }\n\n    if (volumeBtn) {\n      volumeBtn.addEventListener('click', toggleMute);\n    }\n\n\n    if (autoScrollBtn) {\n      autoScrollBtn.addEventListener('click', toggleAutoScroll);\n    }\n\n\n    if (voiceSelect) {\n      voiceSelect.addEventListener('change', (e) => {\n        changeVoice(e.target.value);\n      });\n    }\n\n\n    if (engineToggle) {\n      engineToggle.addEventListener('click', toggleEngine);\n    }\n\n\n    checkElevenLabsAvailability();\n\n\n    document.addEventListener('keydown', (e) => {\n\n      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') return;\n\n      if (e.key === ' ' && e.target.tagName !== 'BUTTON') {\n        e.preventDefault();\n        if (isPlaying && !isPaused) {\n          pauseSpeech();\n        } else {\n          playSpeech();\n        }\n      } else if (e.key === 'Escape') {\n        stopSpeech();\n      } else if (e.key === 'ArrowRight' && e.ctrlKey) {\n        e.preventDefault();\n        skipForward();\n      } else if (e.key === 'ArrowLeft' && e.ctrlKey) {\n        e.preventDefault();\n        skipBackward();\n      } else if (e.key === 'ArrowUp' && !e.ctrlKey && !e.shiftKey && !e.altKey) {\n\n        const player = document.querySelector('.article-tts-player');\n        if (player && isElementInViewport(player)) {\n          e.preventDefault();\n          changeVolume(playbackVolume + 0.1);\n        }\n      } else if (e.key === 'ArrowDown' && !e.ctrlKey && !e.shiftKey && !e.altKey) {\n\n        const player = document.querySelector('.article-tts-player');\n        if (player && isElementInViewport(player)) {\n          e.preventDefault();\n          changeVolume(playbackVolume - 0.1);\n        }\n      } else if (e.key.toLowerCase() === 'm') {\n\n        toggleMute();\n      }\n    });\n\n\n    window.addEventListener('beforeunload', stopSpeech);\n\n\n    paragraphs = getArticleContent();\n\n    updatePlayerUI();\n  }\n\n\n  function isElementInViewport(el) {\n    const rect = el.getBoundingClientRect();\n    return (\n      rect.top >= 0 &&\n      rect.left >= 0 &&\n      rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n      rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n  }\n\n\n\n// ==================== TABLE OF CONTENTS ====================\n  function initTableOfContents() {\n    const toc = document.querySelector('.article-toc');\n    const tocToggle = document.querySelector('.article-toc__toggle');\n    const tocProgressBar = document.querySelector('.article-toc__progress-bar');\n    const tocLinks = document.querySelectorAll('.article-toc__pill');\n    const articleContent = document.querySelector('.article-content');\n    const tocNav = document.querySelector('.article-toc__nav');\n    const tocHeader = document.querySelector('.article-toc__header');\n\n    if (!toc || !tocLinks.length) return;\n\n\n    const articleSlug = window.location.pathname.split('/').pop().replace('.html', '');\n\n\n    const sections = [];\n    let completedSections = new Set();\n    let bookmarkedSections = JSON.parse(localStorage.getItem(`toc-bookmarks-${articleSlug}`) || '[]');\n    let lastReadSection = localStorage.getItem(`toc-lastread-${articleSlug}`);\n\n\n    function getSectionWordCount(sectionEl) {\n      if (!sectionEl) return 0;\n\n      const sectionContainer = sectionEl.closest('section');\n      if (sectionContainer) {\n\n        const text = sectionContainer.textContent || '';\n        return text.split(/\\s+/).filter(w => w.length > 0).length;\n      }\n\n      const parent = sectionEl.parentElement;\n      if (parent) {\n        const text = parent.textContent || '';\n        return Math.max(50, text.split(/\\s+/).filter(w => w.length > 0).length / 2);\n      }\n      return 100;\n    }\n\n\n    tocLinks.forEach((link, index) => {\n      const targetId = link.getAttribute('href').slice(1);\n      const sectionEl = document.getElementById(targetId);\n      if (sectionEl) {\n        const sectionContainer = sectionEl.closest('section') || sectionEl.parentElement;\n        const wordCount = getSectionWordCount(sectionEl);\n        const readingTime = Math.max(1, Math.ceil(wordCount / 200));\n        const firstPara = sectionContainer?.querySelector('p');\n        const preview = firstPara ? firstPara.textContent.slice(0, 120) + '...' : '';\n\n        sections.push({\n          id: targetId,\n          element: sectionEl,\n          link: link,\n          index: index,\n          wordCount: wordCount,\n          readingTime: readingTime,\n          preview: preview\n        });\n      }\n    });\n\n\n    sections.forEach(section => {\n      const timeSpan = document.createElement('span');\n      timeSpan.className = 'article-toc__time';\n      timeSpan.textContent = `${section.readingTime}m`;\n      timeSpan.title = `${section.readingTime} min read`;\n      section.link.appendChild(timeSpan);\n    });\n\n\n    sections.forEach(section => {\n      const checkSpan = document.createElement('span');\n      checkSpan.className = 'article-toc__check';\n      checkSpan.innerHTML = `<svg viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"/></svg>`;\n      section.link.appendChild(checkSpan);\n    });\n\n\n    sections.forEach(section => {\n      if (section.preview && window.innerWidth > 900) {\n        const previewDiv = document.createElement('div');\n        previewDiv.className = 'article-toc__preview';\n        previewDiv.textContent = section.preview;\n        section.link.style.position = 'relative';\n        section.link.appendChild(previewDiv);\n      }\n    });\n\n\n    sections.forEach(section => {\n      const bookmarkBtn = document.createElement('button');\n      bookmarkBtn.className = 'article-toc__bookmark';\n      const isBookmarked = bookmarkedSections.includes(section.id);\n      if (isBookmarked) {\n        bookmarkBtn.classList.add('bookmarked');\n      }\n      bookmarkBtn.innerHTML = `<svg viewBox=\"0 0 24 24\" fill=\"${isBookmarked ? 'currentColor' : 'none'}\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z\"></path></svg>`;\n      bookmarkBtn.title = isBookmarked ? 'Remove bookmark' : 'Bookmark this section';\n      bookmarkBtn.setAttribute('aria-pressed', isBookmarked);\n      bookmarkBtn.setAttribute('aria-label', `Bookmark ${section.link.querySelector('.article-toc__text')?.textContent || 'section'}`);\n      bookmarkBtn.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        toggleBookmark(section.id, bookmarkBtn);\n      });\n      section.link.appendChild(bookmarkBtn);\n    });\n\n    function toggleBookmark(sectionId, btn) {\n      const idx = bookmarkedSections.indexOf(sectionId);\n      if (idx > -1) {\n        bookmarkedSections.splice(idx, 1);\n        btn.classList.remove('bookmarked');\n        btn.setAttribute('aria-pressed', 'false');\n        btn.title = 'Bookmark this section';\n        btn.innerHTML = `<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z\"></path></svg>`;\n      } else {\n        bookmarkedSections.push(sectionId);\n        btn.classList.add('bookmarked');\n        btn.setAttribute('aria-pressed', 'true');\n        btn.title = 'Remove bookmark';\n        btn.innerHTML = `<svg viewBox=\"0 0 24 24\" fill=\"currentColor\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z\"></path></svg>`;\n      }\n      localStorage.setItem(`toc-bookmarks-${articleSlug}`, JSON.stringify(bookmarkedSections));\n    }\n\n\n    const enhancedContent = document.createElement('div');\n    enhancedContent.className = 'article-toc__enhanced';\n\n\n    const minimap = document.createElement('div');\n    minimap.className = 'article-toc__minimap';\n    sections.forEach((section, idx) => {\n      const bar = document.createElement('div');\n      bar.className = 'article-toc__minimap-section';\n      bar.style.flex = `${Math.max(section.wordCount, 50) / 50}`;\n      bar.title = section.link.querySelector('.article-toc__text')?.textContent || `Section ${idx + 1}`;\n      bar.addEventListener('click', () => {\n        section.element.scrollIntoView({ behavior: 'smooth', block: 'start' });\n      });\n      const marker = document.createElement('div');\n      marker.className = 'article-toc__minimap-marker';\n      marker.style.width = '0%';\n      bar.appendChild(marker);\n      minimap.appendChild(bar);\n    });\n    enhancedContent.appendChild(minimap);\n\n\n    let resumeDiv = null;\n    if (lastReadSection && sections.find(s => s.id === lastReadSection)) {\n      resumeDiv = document.createElement('div');\n      resumeDiv.className = 'article-toc__resume visible';\n      const sectionName = sections.find(s => s.id === lastReadSection)?.link.querySelector('.article-toc__text')?.textContent || 'your last section';\n      resumeDiv.innerHTML = `\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"16\" height=\"16\"><path d=\"M8 5v14l11-7z\"/></svg>\n        <span class=\"article-toc__resume-text\">Resume at <strong>${sectionName}</strong></span>\n        <button class=\"article-toc__resume-dismiss\" aria-label=\"Dismiss\">&times;</button>\n      `;\n      resumeDiv.addEventListener('click', (e) => {\n        if (!e.target.closest('.article-toc__resume-dismiss')) {\n          const target = document.getElementById(lastReadSection);\n          if (target) {\n            target.scrollIntoView({ behavior: 'smooth', block: 'start' });\n          }\n          resumeDiv.remove();\n        }\n      });\n      resumeDiv.querySelector('.article-toc__resume-dismiss').addEventListener('click', (e) => {\n        e.stopPropagation();\n        resumeDiv.remove();\n      });\n      enhancedContent.appendChild(resumeDiv);\n    }\n\n\n    if (tocHeader) {\n      tocHeader.after(enhancedContent);\n    } else {\n      tocNav.insertBefore(enhancedContent, tocNav.firstChild);\n    }\n\n\n    const jumpBtns = document.createElement('div');\n    jumpBtns.className = 'article-toc__jump-btns';\n    jumpBtns.innerHTML = `\n      <button class=\"article-toc__jump-btn\" data-jump=\"top\">\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z\"/></svg>\n        Top\n      </button>\n      <button class=\"article-toc__jump-btn\" data-jump=\"bottom\">\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z\"/></svg>\n        Bottom\n      </button>\n    `;\n    tocNav.appendChild(jumpBtns);\n\n    jumpBtns.querySelector('[data-jump=\"top\"]').addEventListener('click', () => {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    });\n    jumpBtns.querySelector('[data-jump=\"bottom\"]').addEventListener('click', () => {\n      window.scrollTo({ top: document.documentElement.scrollHeight, behavior: 'smooth' });\n    });\n\n\n    const positionIndicator = document.createElement('div');\n    positionIndicator.className = 'article-toc__position-indicator';\n    tocNav.insertBefore(positionIndicator, tocNav.firstChild);\n\n\n    const swipeIndicator = document.createElement('div');\n    swipeIndicator.className = 'article-toc__swipe-indicator';\n    toc.insertBefore(swipeIndicator, toc.firstChild);\n\n\n    let showBtn = document.querySelector('.article-toc-show-btn');\n    if (!showBtn) {\n      showBtn = document.createElement('button');\n      showBtn.className = 'article-toc-show-btn';\n      showBtn.innerHTML = '<i class=\"fas fa-list-ul\"></i> <span>Show Contents</span>';\n      showBtn.setAttribute('aria-label', 'Show table of contents');\n      showBtn.setAttribute('title', 'Show Table of Contents');\n      document.body.appendChild(showBtn);\n    }\n\n\n    const articleLayout = document.querySelector('.article-layout');\n\n\n    const toggleTOC = (hide) => {\n      if (hide) {\n        toc.classList.add('collapsed');\n        if (articleLayout) articleLayout.classList.add('toc-hidden');\n        showBtn.classList.add('visible');\n        localStorage.setItem('toc-collapsed', 'true');\n      } else {\n        toc.classList.remove('collapsed');\n        if (articleLayout) articleLayout.classList.remove('toc-hidden');\n        showBtn.classList.remove('visible');\n        localStorage.setItem('toc-collapsed', 'false');\n      }\n    };\n\n    if (tocToggle) {\n      tocToggle.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        toggleTOC(true);\n      });\n    }\n\n    showBtn.addEventListener('click', () => {\n      toggleTOC(false);\n    });\n\n\n    const savedCollapsed = localStorage.getItem('toc-collapsed');\n    if (savedCollapsed === 'true') {\n      toggleTOC(true);\n    }\n\n\n    tocLinks.forEach(link => {\n      link.addEventListener('click', (e) => {\n        e.preventDefault();\n        const targetId = link.getAttribute('href').slice(1);\n        const target = document.getElementById(targetId);\n        if (target) {\n          tocLinks.forEach(l => l.classList.remove('active'));\n          link.classList.add('active');\n          target.scrollIntoView({ behavior: 'smooth', block: 'start' });\n          target.focus();\n        }\n      });\n    });\n\n\n    toc.addEventListener('keydown', (e) => {\n      const focusedLink = document.activeElement;\n      if (!focusedLink.classList.contains('article-toc__pill')) return;\n\n      const currentIndex = Array.from(tocLinks).indexOf(focusedLink);\n      let nextIndex = currentIndex;\n\n      if (e.key === 'ArrowDown' || e.key === 'j') {\n        e.preventDefault();\n        nextIndex = Math.min(currentIndex + 1, tocLinks.length - 1);\n      } else if (e.key === 'ArrowUp' || e.key === 'k') {\n        e.preventDefault();\n        nextIndex = Math.max(currentIndex - 1, 0);\n      } else if (e.key === 'Home') {\n        e.preventDefault();\n        nextIndex = 0;\n      } else if (e.key === 'End') {\n        e.preventDefault();\n        nextIndex = tocLinks.length - 1;\n      } else if (e.key === 'Enter' || e.key === ' ') {\n        e.preventDefault();\n        focusedLink.click();\n        return;\n      }\n\n      if (nextIndex !== currentIndex) {\n        tocLinks[nextIndex].focus();\n      }\n    });\n\n\n    function updateTocState() {\n      if (!articleContent) return;\n\n      const scrollTop = window.scrollY;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n\n\n      if (tocProgressBar) {\n        const progress = Math.min((scrollTop / docHeight) * 100, 100);\n        tocProgressBar.style.width = progress + '%';\n      }\n\n\n      let activeSection = null;\n      let activeIndex = -1;\n      const offset = 150;\n\n      for (let i = sections.length - 1; i >= 0; i--) {\n        const section = sections[i];\n        const rect = section.element.getBoundingClientRect();\n        if (rect.top <= offset) {\n          activeSection = section;\n          activeIndex = i;\n          break;\n        }\n      }\n\n\n      if (activeIndex === -1 && sections.length > 0) {\n        activeSection = sections[0];\n        activeIndex = 0;\n      }\n\n\n      sections.forEach((section, idx) => {\n        section.link.classList.remove('active', 'completed');\n        if (idx === activeIndex) {\n          section.link.classList.add('active');\n        } else if (idx < activeIndex) {\n          section.link.classList.add('completed');\n          completedSections.add(section.id);\n        }\n      });\n\n\n      if (activeSection && scrollTop > 100) {\n        localStorage.setItem(`toc-lastread-${articleSlug}`, activeSection.id);\n      }\n\n\n      const minimapBars = minimap.querySelectorAll('.article-toc__minimap-section');\n      minimapBars.forEach((bar, idx) => {\n        bar.classList.remove('active', 'completed');\n        const marker = bar.querySelector('.article-toc__minimap-marker');\n\n        if (idx === activeIndex) {\n          bar.classList.add('active');\n          if (marker && sections[idx]) {\n            const sectionRect = sections[idx].element.getBoundingClientRect();\n            const nextSection = sections[idx + 1];\n            let sectionHeight = 500;\n            if (nextSection) {\n              sectionHeight = Math.max(100, nextSection.element.getBoundingClientRect().top - sectionRect.top);\n            }\n            const progressInSection = Math.min(100, Math.max(0, ((offset - sectionRect.top) / sectionHeight) * 100));\n            marker.style.width = progressInSection + '%';\n          }\n        } else if (idx < activeIndex) {\n          bar.classList.add('completed');\n          if (marker) marker.style.width = '100%';\n        } else {\n          if (marker) marker.style.width = '0%';\n        }\n      });\n\n\n      if (activeSection && positionIndicator && tocNav) {\n        const linkRect = activeSection.link.getBoundingClientRect();\n        const navRect = tocNav.getBoundingClientRect();\n        const topOffset = linkRect.top - navRect.top;\n        positionIndicator.style.top = topOffset + 'px';\n        positionIndicator.style.height = linkRect.height + 'px';\n        positionIndicator.style.opacity = '1';\n      }\n    }\n\n\n    let ticking = false;\n    window.addEventListener('scroll', () => {\n      if (!ticking) {\n        requestAnimationFrame(() => {\n          updateTocState();\n          ticking = false;\n        });\n        ticking = true;\n      }\n    }, { passive: true });\n\n\n    updateTocState();\n\n\n    initMobileToc(toc, tocLinks);\n  }\n\n\n// --- Mobile TOC ---\n  function initMobileToc(toc, tocLinks) {\n    if (!toc) return;\n\n\n    const mobileToggle = document.createElement('button');\n    mobileToggle.className = 'mobile-toc-toggle';\n    mobileToggle.setAttribute('aria-label', 'Toggle table of contents');\n    mobileToggle.innerHTML = `\n      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\"></line>\n        <line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\"></line>\n        <line x1=\"3\" y1=\"18\" x2=\"21\" y2=\"18\"></line>\n      </svg>\n    `;\n    document.body.appendChild(mobileToggle);\n\n\n    const overlay = document.createElement('div');\n    overlay.className = 'mobile-toc-overlay';\n    document.body.appendChild(overlay);\n\n\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'mobile-toc-close';\n    closeBtn.setAttribute('aria-label', 'Close table of contents');\n    closeBtn.innerHTML = `\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n      </svg>\n    `;\n    toc.insertBefore(closeBtn, toc.firstChild);\n\n    let isOpen = false;\n\n    function openMobileToc() {\n      isOpen = true;\n      toc.classList.add('mobile-visible');\n      overlay.classList.add('visible');\n      mobileToggle.classList.add('active');\n      document.body.style.overflow = 'hidden';\n\n\n      setTimeout(() => {\n        const firstLink = toc.querySelector('.article-toc__pill');\n        if (firstLink) firstLink.focus();\n      }, 300);\n    }\n\n    function closeMobileToc() {\n      isOpen = false;\n      toc.classList.remove('mobile-visible');\n      overlay.classList.remove('visible');\n      mobileToggle.classList.remove('active');\n      document.body.style.overflow = '';\n      mobileToggle.focus();\n    }\n\n\n    mobileToggle.addEventListener('click', () => {\n      if (isOpen) {\n        closeMobileToc();\n      } else {\n        openMobileToc();\n      }\n    });\n\n\n    closeBtn.addEventListener('click', closeMobileToc);\n\n\n    overlay.addEventListener('click', closeMobileToc);\n\n\n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape' && isOpen) {\n        closeMobileToc();\n      }\n    });\n\n\n    tocLinks.forEach(link => {\n      link.addEventListener('click', () => {\n        if (window.innerWidth <= 900 && isOpen) {\n          closeMobileToc();\n        }\n      });\n    });\n\n\n    window.addEventListener('resize', () => {\n      if (window.innerWidth > 900 && isOpen) {\n        closeMobileToc();\n      }\n    });\n\n\n    let touchStartY = 0;\n    let touchCurrentY = 0;\n    let isDragging = false;\n\n    toc.addEventListener('touchstart', (e) => {\n      if (window.innerWidth > 900) return;\n      const swipeIndicator = toc.querySelector('.article-toc__swipe-indicator');\n      if (swipeIndicator && swipeIndicator.contains(e.target)) {\n        touchStartY = e.touches[0].clientY;\n        isDragging = true;\n      }\n    }, { passive: true });\n\n    toc.addEventListener('touchmove', (e) => {\n      if (!isDragging || window.innerWidth > 900) return;\n      touchCurrentY = e.touches[0].clientY;\n      const diff = touchCurrentY - touchStartY;\n\n\n      if (diff > 0) {\n        toc.style.transform = `translateY(${diff}px)`;\n        toc.style.transition = 'none';\n      }\n    }, { passive: true });\n\n    toc.addEventListener('touchend', () => {\n      if (!isDragging || window.innerWidth > 900) return;\n      isDragging = false;\n\n      const diff = touchCurrentY - touchStartY;\n      toc.style.transition = '';\n      toc.style.transform = '';\n\n\n      if (diff > 100) {\n        closeMobileToc();\n      }\n    }, { passive: true });\n\n\n    const tocHeader = toc.querySelector('.article-toc__header');\n    if (tocHeader) {\n      tocHeader.addEventListener('touchstart', (e) => {\n        if (window.innerWidth > 900) return;\n        touchStartY = e.touches[0].clientY;\n        isDragging = true;\n      }, { passive: true });\n    }\n  }\n\n\n\n// ==================== READING PROGRESS ====================\n  function initReadingProgress() {\n    const progressBar = document.querySelector('.article-reading-progress__fill');\n    if (!progressBar) return;\n\n    window.addEventListener('scroll', () => {\n      const scrollTop = window.scrollY;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n      const progress = Math.min((scrollTop / docHeight) * 100, 100);\n      progressBar.style.width = progress + '%';\n    }, { passive: true });\n  }\n\n\n\n// ==================== MINI PLAYER ====================\n  function initMiniPlayer() {\n    const miniPlayer = document.createElement('div');\n    miniPlayer.className = 'tts-mini-player';\n    miniPlayer.id = 'ttsMiniPlayer';\n\n    const playBtn = document.createElement('button');\n    playBtn.className = 'tts-mini-player__btn tts-mini-player__btn--play';\n    playBtn.id = 'miniPlayBtn';\n    playBtn.title = getTranslation('tts_play', 'Play');\n    const playIcon = document.createElement('i');\n    playIcon.className = 'fas fa-play';\n    playBtn.appendChild(playIcon);\n\n    const infoDiv = document.createElement('div');\n    infoDiv.className = 'tts-mini-player__info';\n    const titleSpan = document.createElement('span');\n    titleSpan.className = 'tts-mini-player__title';\n    titleSpan.textContent = getTranslation('tts_listening', 'Listening to article');\n    const statusSpan = document.createElement('span');\n    statusSpan.className = 'tts-mini-player__status';\n    statusSpan.id = 'miniStatus';\n    statusSpan.textContent = getTranslation('tts_ready', 'Ready');\n    infoDiv.appendChild(titleSpan);\n    infoDiv.appendChild(statusSpan);\n\n    const progressDiv = document.createElement('div');\n    progressDiv.className = 'tts-mini-player__progress';\n    const progressFill = document.createElement('div');\n    progressFill.className = 'tts-mini-player__progress-fill';\n    progressFill.id = 'miniProgressFill';\n    progressDiv.appendChild(progressFill);\n\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'tts-mini-player__close';\n    closeBtn.id = 'miniCloseBtn';\n    closeBtn.title = getTranslation('tts_close', 'Close');\n    const closeIcon = document.createElement('i');\n    closeIcon.className = 'fas fa-times';\n    closeBtn.appendChild(closeIcon);\n\n    miniPlayer.appendChild(playBtn);\n    miniPlayer.appendChild(infoDiv);\n    miniPlayer.appendChild(progressDiv);\n    miniPlayer.appendChild(closeBtn);\n\n    document.body.appendChild(miniPlayer);\n\n    const mainPlayer = document.querySelector('.article-tts-player');\n    let miniVisible = false;\n\n\n    function updateMiniPlayerVisibility() {\n      if (!mainPlayer) return;\n\n      const rect = mainPlayer.getBoundingClientRect();\n      const isMainPlayerVisible = rect.bottom > 0 && rect.top < window.innerHeight;\n\n      if (isPlaying && !isMainPlayerVisible) {\n        if (!miniVisible) {\n          miniPlayer.classList.add('visible');\n          miniVisible = true;\n        }\n      } else {\n        if (miniVisible) {\n          miniPlayer.classList.remove('visible');\n          miniVisible = false;\n        }\n      }\n    }\n\n    window.addEventListener('scroll', updateMiniPlayerVisibility, { passive: true });\n\n\n    const miniPlayBtn = document.getElementById('miniPlayBtn');\n    const miniCloseBtn = document.getElementById('miniCloseBtn');\n\n    miniPlayBtn.addEventListener('click', () => {\n      if (isPlaying && !isPaused) {\n        pauseSpeech();\n        miniPlayBtn.innerHTML = '<i class=\"fas fa-play\"></i>';\n      } else {\n        playSpeech();\n        miniPlayBtn.innerHTML = '<i class=\"fas fa-pause\"></i>';\n      }\n    });\n\n    miniCloseBtn.addEventListener('click', () => {\n      stopSpeech();\n      miniPlayer.classList.remove('visible');\n      miniVisible = false;\n    });\n\n\n    const originalUpdatePlayerUI = updatePlayerUI;\n    updatePlayerUI = function() {\n      originalUpdatePlayerUI();\n\n      const miniStatus = document.getElementById('miniStatus');\n      const miniProgressFill = document.getElementById('miniProgressFill');\n\n      if (miniStatus) {\n        if (isPlaying && !isPaused) {\n          miniStatus.textContent = getTranslation('tts_playing', 'Playing...');\n          miniPlayBtn.innerHTML = '<i class=\"fas fa-pause\"></i>';\n        } else if (isPaused) {\n          miniStatus.textContent = getTranslation('tts_paused', 'Paused');\n          miniPlayBtn.innerHTML = '<i class=\"fas fa-play\"></i>';\n        } else {\n          miniStatus.textContent = getTranslation('tts_ready', 'Ready');\n          miniPlayBtn.innerHTML = '<i class=\"fas fa-play\"></i>';\n        }\n      }\n\n      if (miniProgressFill && paragraphs.length > 0) {\n        const progress = ((currentParagraphIndex) / paragraphs.length) * 100;\n        miniProgressFill.style.width = progress + '%';\n      }\n\n      updateMiniPlayerVisibility();\n    };\n  }\n\n\n  let sleepTimerTimeout = null;\n  let sleepTimerMinutes = 0;\n\n\n// ==================== SLEEP TIMER ====================\n  function initSleepTimer() {\n    const timerContainer = document.querySelector('.sleep-timer-container');\n    if (!timerContainer) return;\n\n    const timerBtn = timerContainer.querySelector('.sleep-timer-btn');\n    const dropdown = timerContainer.querySelector('.sleep-timer-dropdown');\n\n    if (!timerBtn || !dropdown) return;\n\n    timerBtn.addEventListener('click', () => {\n      dropdown.classList.toggle('visible');\n    });\n\n\n    document.addEventListener('click', (e) => {\n      if (!timerContainer.contains(e.target)) {\n        dropdown.classList.remove('visible');\n      }\n    });\n\n\n    const options = dropdown.querySelectorAll('.sleep-timer-option');\n    options.forEach(option => {\n      option.addEventListener('click', () => {\n        const minutes = parseInt(option.dataset.minutes, 10);\n        setSleepTimer(minutes);\n        dropdown.classList.remove('visible');\n\n        options.forEach(o => o.classList.remove('active'));\n        if (minutes > 0) {\n          option.classList.add('active');\n          timerBtn.classList.add('active');\n        } else {\n          timerBtn.classList.remove('active');\n        }\n      });\n    });\n  }\n\n  function setSleepTimer(minutes) {\n    if (sleepTimerTimeout) {\n      clearTimeout(sleepTimerTimeout);\n      sleepTimerTimeout = null;\n    }\n\n    sleepTimerMinutes = minutes;\n\n    if (minutes > 0) {\n      sleepTimerTimeout = setTimeout(() => {\n        stopSpeech();\n        sleepTimerMinutes = 0;\n        const timerBtn = document.querySelector('.sleep-timer-btn');\n        if (timerBtn) timerBtn.classList.remove('active');\n      }, minutes * 60 * 1000);\n    }\n  }\n\n\n\n// ==================== KEYBOARD SHORTCUTS ====================\n  function initKeyboardShortcuts() {\n    const overlay = document.createElement('div');\n    overlay.className = 'keyboard-shortcuts-overlay';\n    overlay.id = 'keyboardShortcutsOverlay';\n    overlay.innerHTML = `\n      <div class=\"keyboard-shortcuts-modal\">\n        <h3><i class=\"fas fa-keyboard\"></i> ${getTranslation('keyboard_shortcuts', 'Keyboard Shortcuts')}</h3>\n        <ul class=\"keyboard-shortcuts-list\">\n          <li><span>${getTranslation('tts_play_pause', 'Play/Pause')}</span> <kbd>Space</kbd></li>\n          <li><span>${getTranslation('tts_stop', 'Stop')}</span> <kbd>Esc</kbd></li>\n          <li><span>${getTranslation('tts_skip_forward', 'Next Paragraph')}</span> <kbd>Ctrl + â†’</kbd></li>\n          <li><span>${getTranslation('tts_skip_backward', 'Previous Paragraph')}</span> <kbd>Ctrl + â†</kbd></li>\n          <li><span>${getTranslation('tts_speed_up', 'Speed Up')}</span> <kbd>â†‘</kbd></li>\n          <li><span>${getTranslation('tts_slow_down', 'Slow Down')}</span> <kbd>â†“</kbd></li>\n          <li><span>${getTranslation('tts_mute', 'Mute')}</span> <kbd>M</kbd></li>\n          <li><span>${getTranslation('keyboard_shortcuts', 'Show Shortcuts')}</span> <kbd>?</kbd></li>\n        </ul>\n        <button class=\"keyboard-shortcuts-close\">${getTranslation('close', 'Close')}</button>\n      </div>\n    `;\n    document.body.appendChild(overlay);\n\n    overlay.querySelector('.keyboard-shortcuts-close').addEventListener('click', () => {\n      overlay.classList.remove('visible');\n    });\n\n    overlay.addEventListener('click', (e) => {\n      if (e.target === overlay) {\n        overlay.classList.remove('visible');\n      }\n    });\n\n\n    document.addEventListener('keydown', (e) => {\n      if (e.key === '?' && !e.ctrlKey && !e.altKey && !e.metaKey) {\n        const activeEl = document.activeElement;\n        if (activeEl && (activeEl.tagName === 'INPUT' || activeEl.tagName === 'TEXTAREA')) return;\n        overlay.classList.add('visible');\n      }\n    });\n\n\n    const helpBtn = document.getElementById('ttsHelpBtn');\n    if (helpBtn) {\n      helpBtn.addEventListener('click', () => {\n        overlay.classList.add('visible');\n      });\n    }\n  }\n\n\n\n// ==================== NOTES PANEL ====================\n  function initNotesPanel() {\n    const notesPanel = document.createElement('div');\n    notesPanel.className = 'article-notes-panel';\n    notesPanel.id = 'articleNotesPanel';\n\n    const articleId = window.location.pathname.replace(/[^a-z0-9]/gi, '-');\n    const storageKey = 'article-notes-' + articleId;\n    const savedNotes = localStorage.getItem(storageKey) || '';\n\n    notesPanel.innerHTML = `\n      <div class=\"notes-panel__header\">\n        <span class=\"notes-panel__title\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill=\"currentColor\" d=\"M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10z\"/></svg> ${getTranslation('my_notes', 'My Notes')}</span>\n        <button class=\"notes-panel__close\" id=\"notesPanelClose\"><svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" aria-hidden=\"true\"><path fill=\"currentColor\" d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/></svg></button>\n      </div>\n      <div class=\"notes-panel__content\">\n        <textarea class=\"notes-textarea\" id=\"articleNotesTextarea\" placeholder=\"${getTranslation('notes_placeholder', 'Write your notes here...')}\">${escapeHtml(savedNotes)}</textarea>\n        <div class=\"notes-save-status\" id=\"notesSaveStatus\">${getTranslation('notes_auto_save', 'Notes are saved automatically')}</div>\n        <div class=\"notes-panel__actions\">\n          <button class=\"notes-panel__btn notes-panel__btn--clear\" id=\"notesClearBtn\">\n            <svg viewBox=\"0 0 24 24\" width=\"14\" height=\"14\" aria-hidden=\"true\"><path fill=\"currentColor\" d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"/></svg> Clear\n          </button>\n          <button class=\"notes-panel__btn notes-panel__btn--export\" id=\"notesExportBtn\">\n            <svg viewBox=\"0 0 24 24\" width=\"14\" height=\"14\" aria-hidden=\"true\"><path fill=\"currentColor\" d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"/></svg> Export\n          </button>\n        </div>\n      </div>\n    `;\n\n    function escapeHtml(str) {\n      if (!str) return '';\n      return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n    }\n    document.body.appendChild(notesPanel);\n\n    const closeBtn = document.getElementById('notesPanelClose');\n    const textarea = document.getElementById('articleNotesTextarea');\n    const saveStatus = document.getElementById('notesSaveStatus');\n\n    closeBtn.addEventListener('click', () => {\n      notesPanel.classList.remove('visible');\n    });\n\n\n    let saveTimeout;\n    textarea.addEventListener('input', () => {\n      saveStatus.textContent = getTranslation('notes_saving', 'Saving...');\n      clearTimeout(saveTimeout);\n      saveTimeout = setTimeout(() => {\n        localStorage.setItem(storageKey, textarea.value);\n        saveStatus.textContent = getTranslation('notes_saved', 'Saved!');\n        setTimeout(() => {\n          saveStatus.textContent = getTranslation('notes_auto_save', 'Notes are saved automatically');\n        }, 2000);\n      }, 500);\n    });\n\n\n    const notesBtn = document.getElementById('notesBtn');\n    if (notesBtn) {\n      notesBtn.addEventListener('click', () => {\n        notesPanel.classList.toggle('visible');\n      });\n    }\n\n\n    const clearBtn = document.getElementById('notesClearBtn');\n    if (clearBtn) {\n      clearBtn.addEventListener('click', () => {\n        if (confirm('Clear all notes for this article?')) {\n          textarea.value = '';\n          localStorage.removeItem(storageKey);\n          saveStatus.textContent = 'Notes cleared';\n          setTimeout(() => {\n            saveStatus.textContent = getTranslation('notes_auto_save', 'Notes are saved automatically');\n          }, 2000);\n        }\n      });\n    }\n\n\n    const exportBtn = document.getElementById('notesExportBtn');\n    if (exportBtn) {\n      exportBtn.addEventListener('click', () => {\n        const notes = textarea.value;\n        if (!notes.trim()) {\n          alert('No notes to export');\n          return;\n        }\n\n        const articleTitle = document.querySelector('.article-title')?.textContent || 'Article Notes';\n        const blob = new Blob([`# ${articleTitle}\\n\\n${notes}`], { type: 'text/markdown' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `${articleTitle.replace(/[^a-z0-9]/gi, '-').toLowerCase()}-notes.md`;\n        a.click();\n        URL.revokeObjectURL(url);\n      });\n    }\n  }\n\n\n\n// ==================== DOWNLOAD AUDIO ====================\n  async function initDownloadAudio() {\n    const downloadBtn = document.getElementById('ttsDownloadBtn');\n    if (!downloadBtn) return;\n\n    downloadBtn.addEventListener('click', async () => {\n      if (!elevenLabsAvailable || ttsEngine !== 'elevenlabs') {\n        alert(getTranslation('download_premium_only', 'Audio download is only available with premium voice.'));\n        return;\n      }\n\n      downloadBtn.classList.add('downloading');\n      downloadBtn.disabled = true;\n\n      try {\n        const content = getArticleContent();\n        const fullText = content.slice(0, 20).join(' ');\n\n        const response = await fetch(TTS_API_BASE + '/api/tts/generate', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            text: fullText,\n            voice: selectedVoice,\n            language: getUserLanguage()\n          })\n        });\n\n        if (!response.ok) {\n          throw new Error('Download failed');\n        }\n\n        const blob = await response.blob();\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = 'article-audio.mp3';\n        a.click();\n        URL.revokeObjectURL(url);\n\n      } catch (e) {\n        alert(getTranslation('download_failed', 'Failed to download audio. Please try again.'));\n      }\n\n      downloadBtn.classList.remove('downloading');\n      downloadBtn.disabled = false;\n    });\n  }\n\n\n\n// ==================== ARTICLE INITIALIZATION ====================\n  function init() {\n    initPlayer();\n    initTableOfContents();\n    initReadingProgress();\n    initReadingControls();\n    initTimeRemaining();\n    initTextHighlight();\n    initBookmark();\n    initLanguageChangeListener();\n    initMiniPlayer();\n    initSleepTimer();\n    initKeyboardShortcuts();\n    initNotesPanel();\n    initDownloadAudio();\n    trackArticleRead();\n  }\n\n\n// --- Reading Tracker ---\n  function trackArticleRead() {\n\n    if (window.MindBalanceAuth && window.MindBalanceAuth.onAuthReady) {\n      window.MindBalanceAuth.onAuthReady(async (user) => {\n        if (!user) return;\n\n\n        const slug = window.location.pathname.split('/').filter(Boolean).pop()?.replace('.html', '') || 'unknown';\n        const titleEl = document.querySelector('.article-title, h1');\n        const title = titleEl ? titleEl.textContent : 'Article';\n\n\n        try {\n          await window.MindBalanceAuth.logReadingActivity(slug, title);\n          console.log('Reading activity logged for:', slug);\n        } catch (e) {\n          console.error('Failed to log reading activity:', e);\n        }\n      });\n    }\n  }\n\n\n// --- Language Change Listener ---\n  function initLanguageChangeListener() {\n\n    window.addEventListener('translations-ready', (e) => {\n\n      paragraphs = getArticleContent();\n      if (isPlaying) {\n        stopSpeech();\n      }\n      updatePlayerUI();\n\n      updateDynamicUITranslations();\n    });\n\n\n    const languageSelects = document.querySelectorAll('[data-language-select]');\n    languageSelects.forEach(select => {\n      select.addEventListener('change', () => {\n\n\n        if (isPlaying) {\n          stopSpeech();\n        }\n      });\n    });\n\n\n    window.addEventListener('storage', (e) => {\n      if (e.key === 'mindbalance-language') {\n        setTimeout(() => {\n          paragraphs = getArticleContent();\n          if (isPlaying) {\n            stopSpeech();\n          }\n          updatePlayerUI();\n        }, 500);\n      }\n    });\n  }\n\n\n  function updateDynamicUITranslations() {\n\n    const miniTitle = document.querySelector('.tts-mini-player__title');\n    if (miniTitle) {\n      miniTitle.textContent = getTranslation('tts_listening', 'Listening to article');\n    }\n\n\n    const notesTitle = document.querySelector('.notes-panel__title');\n    if (notesTitle) {\n      notesTitle.innerHTML = `<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill=\"currentColor\" d=\"M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10z\"/></svg> ${getTranslation('my_notes', 'My Notes')}`;\n    }\n\n\n    const notesTextarea = document.getElementById('articleNotesTextarea');\n    if (notesTextarea) {\n      notesTextarea.placeholder = getTranslation('notes_placeholder', 'Write your notes here...');\n    }\n\n\n    const saveStatus = document.getElementById('notesSaveStatus');\n    if (saveStatus) {\n      saveStatus.textContent = getTranslation('notes_auto_save', 'Notes are saved automatically');\n    }\n  }\n\n\n\n// ==================== READING CONTROLS ====================\n  function initReadingControls() {\n    const panel = document.querySelector('.reading-controls');\n    if (!panel) return;\n\n\n    const toggleBtn = panel.querySelector('.reading-controls__toggle');\n    if (toggleBtn) {\n      toggleBtn.addEventListener('click', () => {\n        panel.classList.toggle('collapsed');\n        localStorage.setItem('article-controls-collapsed', panel.classList.contains('collapsed'));\n      });\n\n\n      if (localStorage.getItem('article-controls-collapsed') === 'true') {\n        panel.classList.add('collapsed');\n      }\n    }\n\n\n    const fontSmaller = document.getElementById('fontSmaller');\n    const fontLarger = document.getElementById('fontLarger');\n    const fontSizes = ['small', 'normal', 'large', 'x-large'];\n    let currentFontIndex = fontSizes.indexOf(localStorage.getItem('article-font-size') || 'normal');\n    if (currentFontIndex < 0) currentFontIndex = 1;\n    document.body.setAttribute('data-article-font', fontSizes[currentFontIndex]);\n\n    if (fontSmaller) {\n      fontSmaller.addEventListener('click', () => {\n        if (currentFontIndex > 0) {\n          currentFontIndex--;\n          document.body.setAttribute('data-article-font', fontSizes[currentFontIndex]);\n          localStorage.setItem('article-font-size', fontSizes[currentFontIndex]);\n        }\n      });\n    }\n\n    if (fontLarger) {\n      fontLarger.addEventListener('click', () => {\n        if (currentFontIndex < fontSizes.length - 1) {\n          currentFontIndex++;\n          document.body.setAttribute('data-article-font', fontSizes[currentFontIndex]);\n          localStorage.setItem('article-font-size', fontSizes[currentFontIndex]);\n        }\n      });\n    }\n\n\n    const spacingBtn = document.getElementById('lineSpacingBtn');\n    const spacings = ['compact', 'normal', 'relaxed'];\n    let currentSpacingIndex = spacings.indexOf(localStorage.getItem('article-line-spacing') || 'normal');\n    if (currentSpacingIndex < 0) currentSpacingIndex = 1;\n    document.body.setAttribute('data-article-spacing', spacings[currentSpacingIndex]);\n\n    if (spacingBtn) {\n      spacingBtn.addEventListener('click', () => {\n        currentSpacingIndex = (currentSpacingIndex + 1) % spacings.length;\n        document.body.setAttribute('data-article-spacing', spacings[currentSpacingIndex]);\n        localStorage.setItem('article-line-spacing', spacings[currentSpacingIndex]);\n\n\n        const tooltip = spacingBtn.querySelector('.reading-control-btn__tooltip');\n        if (tooltip) {\n          const labels = { compact: 'Compact', normal: 'Normal', relaxed: 'Relaxed' };\n          tooltip.textContent = 'Spacing: ' + labels[spacings[currentSpacingIndex]];\n        }\n      });\n    }\n\n\n    const readingModeBtn = document.getElementById('readingModeBtn');\n    if (readingModeBtn) {\n      readingModeBtn.addEventListener('click', () => {\n        document.body.classList.toggle('article-reading-mode');\n        readingModeBtn.classList.toggle('active', document.body.classList.contains('article-reading-mode'));\n      });\n    }\n\n\n    const printBtn = document.getElementById('printBtn');\n    if (printBtn) {\n      printBtn.addEventListener('click', () => {\n        window.print();\n      });\n    }\n  }\n\n\n// --- Time Remaining ---\n  function initTimeRemaining() {\n    const timeValue = document.getElementById('timeRemainingValue');\n    if (!timeValue) return;\n\n\n    const content = document.querySelector('.article-content');\n    if (!content) return;\n\n    const text = content.textContent || '';\n    const wordCount = text.trim().split(/\\s+/).length;\n    const totalMinutes = Math.ceil(wordCount / 200);\n\n    function updateTimeRemaining() {\n      const scrollTop = window.scrollY;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n      const scrollPercent = docHeight > 0 ? scrollTop / docHeight : 0;\n      const remainingPercent = 1 - scrollPercent;\n      const remainingMinutes = Math.max(1, Math.ceil(totalMinutes * remainingPercent));\n\n      if (remainingMinutes <= 1) {\n        timeValue.textContent = '< 1';\n      } else {\n        timeValue.textContent = remainingMinutes;\n      }\n    }\n\n    updateTimeRemaining();\n    window.addEventListener('scroll', updateTimeRemaining, { passive: true });\n  }\n\n\n\n// ==================== TEXT HIGHLIGHT ====================\n  function initTextHighlight() {\n    const content = document.querySelector('.article-content');\n    if (!content) return;\n\n    const articleId = window.location.pathname;\n    const storageKey = 'article-highlights-' + articleId.replace(/[^a-z0-9]/gi, '-');\n\n\n    function loadHighlights() {\n      const saved = localStorage.getItem(storageKey);\n      if (!saved) return;\n\n      try {\n        const highlights = JSON.parse(saved);\n        highlights.forEach(h => {\n          const range = findTextInContent(h.text);\n          if (range) {\n            wrapRangeWithHighlight(range, h.id);\n          }\n        });\n      } catch (e) {\n        console.error('Error loading highlights:', e);\n      }\n    }\n\n\n    function findTextInContent(searchText) {\n      const walker = document.createTreeWalker(content, NodeFilter.SHOW_TEXT, null, false);\n      let node;\n      while (node = walker.nextNode()) {\n        const idx = node.textContent.indexOf(searchText);\n        if (idx >= 0) {\n          const range = document.createRange();\n          range.setStart(node, idx);\n          range.setEnd(node, idx + searchText.length);\n          return range;\n        }\n      }\n      return null;\n    }\n\n\n    function wrapRangeWithHighlight(range, id) {\n      const span = document.createElement('span');\n      span.className = 'user-highlight';\n      span.dataset.highlightId = id || Date.now().toString();\n\n      try {\n\n        range.surroundContents(span);\n      } catch (e) {\n\n        const fragment = range.extractContents();\n        span.appendChild(fragment);\n        range.insertNode(span);\n      }\n\n      span.addEventListener('click', () => {\n        const confirmMsg = getTranslation('highlight_remove_confirm', 'Remove this highlight?');\n        if (confirm(confirmMsg)) {\n          removeHighlight(span.dataset.highlightId);\n        }\n      });\n    }\n\n\n    function saveHighlights() {\n      const highlights = [];\n      content.querySelectorAll('.user-highlight').forEach(span => {\n        highlights.push({\n          id: span.dataset.highlightId,\n          text: span.textContent\n        });\n      });\n      localStorage.setItem(storageKey, JSON.stringify(highlights));\n    }\n\n\n    function removeHighlight(id) {\n      const span = content.querySelector(`[data-highlight-id=\"${id}\"]`);\n      if (span) {\n        const parent = span.parentNode;\n        while (span.firstChild) {\n          parent.insertBefore(span.firstChild, span);\n        }\n        parent.removeChild(span);\n        saveHighlights();\n      }\n    }\n\n\n    const highlightBtn = document.getElementById('highlightBtn');\n    if (highlightBtn) {\n      highlightBtn.addEventListener('click', () => {\n        const selection = window.getSelection();\n        if (!selection.rangeCount || selection.isCollapsed) {\n          alert(getTranslation('highlight_select_first', 'Select some text first to highlight it.'));\n          return;\n        }\n\n        const range = selection.getRangeAt(0);\n        if (!content.contains(range.commonAncestorContainer)) {\n          alert(getTranslation('highlight_select_article', 'Please select text within the article content.'));\n          return;\n        }\n\n        try {\n          wrapRangeWithHighlight(range);\n          saveHighlights();\n          selection.removeAllRanges();\n        } catch (e) {\n          console.error('Could not highlight:', e);\n        }\n      });\n    }\n\n    loadHighlights();\n  }\n\n\n\n// ==================== BOOKMARKS ====================\n  function initBookmark() {\n    const articleId = window.location.pathname;\n    const storageKey = 'article-bookmark-' + articleId.replace(/[^a-z0-9]/gi, '-');\n\n\n    function loadBookmark() {\n      const saved = localStorage.getItem(storageKey);\n      if (saved) {\n        const scrollPos = parseInt(saved, 10);\n        if (scrollPos > 100) {\n          showResumePrompt(scrollPos);\n        }\n      }\n    }\n\n\n    function saveBookmark() {\n      const scrollTop = window.scrollY;\n      if (scrollTop > 100) {\n        localStorage.setItem(storageKey, scrollTop.toString());\n      }\n    }\n\n\n    function showResumePrompt(scrollPos) {\n      const prompt = document.createElement('div');\n      prompt.className = 'bookmark-prompt';\n\n      const resumeText = getTranslation('bookmark_resume', 'Resume where you left off?');\n      const yesText = getTranslation('bookmark_yes', 'Yes');\n      const noText = getTranslation('bookmark_no', 'No');\n\n      prompt.innerHTML = `\n        <span>${resumeText}</span>\n        <button class=\"bookmark-prompt__yes\">${yesText}</button>\n        <button class=\"bookmark-prompt__no\">${noText}</button>\n      `;\n      document.body.appendChild(prompt);\n\n      prompt.querySelector('.bookmark-prompt__yes').addEventListener('click', () => {\n        window.scrollTo({ top: scrollPos, behavior: 'smooth' });\n        prompt.remove();\n      });\n\n      prompt.querySelector('.bookmark-prompt__no').addEventListener('click', () => {\n        localStorage.removeItem(storageKey);\n        prompt.remove();\n      });\n\n\n      setTimeout(() => {\n        if (prompt.parentNode) prompt.remove();\n      }, 10000);\n    }\n\n\n    let saveTimeout;\n    window.addEventListener('scroll', () => {\n      clearTimeout(saveTimeout);\n      saveTimeout = setTimeout(saveBookmark, 1000);\n    }, { passive: true });\n\n\n    setTimeout(loadBookmark, 500);\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n\n\n  window.ArticleTTS = {\n    play: playSpeech,\n    pause: pauseSpeech,\n    stop: stopSpeech,\n    changeSpeed\n  };\n\n\n\n\n\n// --- Supabase Client ---\n  function getSupabaseClient() {\n    if (typeof getSupabase === 'function') {\n      return getSupabase();\n    }\n    return null;\n  }\n\n  function getArticleInfo() {\n    const path = window.location.pathname;\n    const slug = path.split('/').pop().replace('.html', '');\n    const title = document.querySelector('title')?.textContent?.split('|')[0]?.trim() || slug;\n    const category = document.querySelector('.article-category')?.textContent ||\n                    document.querySelector('.article-tag')?.textContent || 'Article';\n    const image = document.querySelector('.article-hero img')?.src ||\n                 document.querySelector('meta[property=\"og:image\"]')?.content || '';\n    return { slug, title, category, image };\n  }\n\n\n// ==================== SAVE ARTICLE ====================\n  async function checkIfSaved() {\n    const supabaseClient = getSupabaseClient();\n    if (!supabaseClient) return false;\n\n    const { data: { user } } = await supabaseClient.auth.getUser();\n    if (!user) return false;\n\n    const { slug } = getArticleInfo();\n    const { data } = await supabaseClient\n      .from('saved_articles')\n      .select('id')\n      .eq('user_id', user.id)\n      .eq('article_slug', slug)\n      .single();\n\n    return !!data;\n  }\n\n  async function toggleSaveArticle() {\n    const btn = document.getElementById('saveArticleBtn');\n    if (!btn) return;\n\n    const supabaseClient = getSupabaseClient();\n    if (!supabaseClient) {\n      alert('Please sign in to save articles');\n      window.location.href = '/auth/';\n      return;\n    }\n\n    const { data: { user } } = await supabaseClient.auth.getUser();\n    if (!user) {\n      alert('Please sign in to save articles');\n      window.location.href = '/auth/';\n      return;\n    }\n\n    btn.disabled = true;\n    const { slug, title, category, image } = getArticleInfo();\n    const isSaved = btn.classList.contains('is-saved');\n\n    try {\n      if (isSaved) {\n        await supabaseClient\n          .from('saved_articles')\n          .delete()\n          .eq('user_id', user.id)\n          .eq('article_slug', slug);\n\n        btn.classList.remove('is-saved');\n        btn.querySelector('i').className = 'far fa-bookmark';\n        btn.querySelector('span').textContent = getTranslation('save_article', 'Save Article');\n      } else {\n        await supabaseClient\n          .from('saved_articles')\n          .upsert({\n            user_id: user.id,\n            article_slug: slug,\n            article_title: title,\n            article_image: image\n          }, { onConflict: 'user_id,article_slug' });\n\n        btn.classList.add('is-saved');\n        btn.querySelector('i').className = 'fas fa-bookmark';\n        btn.querySelector('span').textContent = getTranslation('article_saved', 'Saved!');\n\n        if (typeof MBAnalytics !== 'undefined' && MBAnalytics.logActivity) {\n          MBAnalytics.logActivity('article_saved', { article_slug: slug, article_title: title });\n        }\n      }\n    } catch (error) {\n      console.error('Error saving article:', error);\n      alert('Failed to save article. Please try again.');\n    } finally {\n      btn.disabled = false;\n    }\n  }\n\n  async function initSaveButton() {\n    const btn = document.getElementById('saveArticleBtn');\n    if (!btn) return;\n\n    btn.addEventListener('click', toggleSaveArticle);\n\n    const isSaved = await checkIfSaved();\n    if (isSaved) {\n      btn.classList.add('is-saved');\n      btn.querySelector('i').className = 'fas fa-bookmark';\n      btn.querySelector('span').textContent = getTranslation('article_saved', 'Saved!');\n    }\n  }\n\n  document.addEventListener('DOMContentLoaded', initSaveButton);\n})();\n\n\n(function() {\n  'use strict';\n\n\n// ==================== READING ANALYTICS ====================\n  const articleSlug = window.location.pathname.split('/').filter(p => p).pop().replace('.html', '');\n  const articleTitle = document.title.replace(' | MindBalance', '');\n\n  document.body.dataset.articleId = articleSlug;\n\n  let readingStartTime = Date.now();\n  let maxScrollDepth = 0;\n  let hasTrackedStart = false;\n  let hasTrackedComplete = false;\n\n  function trackScrollProgress() {\n    const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n    if (docHeight > 0) {\n      const currentScroll = window.scrollY;\n      const newDepth = Math.round((currentScroll / docHeight) * 100);\n      if (newDepth > maxScrollDepth) {\n        maxScrollDepth = newDepth;\n\n        if (maxScrollDepth >= 90 && !hasTrackedComplete) {\n          hasTrackedComplete = true;\n          if (typeof MBAnalytics !== 'undefined') {\n            MBAnalytics.trackArticleComplete(articleSlug);\n          }\n        }\n      }\n    }\n  }\n\n  function initReadingTracker() {\n    if (!hasTrackedStart && typeof MBAnalytics !== 'undefined') {\n      hasTrackedStart = true;\n      MBAnalytics.trackArticleRead(articleSlug, articleTitle);\n    }\n\n    let ticking = false;\n    window.addEventListener('scroll', () => {\n      if (!ticking) {\n        window.requestAnimationFrame(() => {\n          trackScrollProgress();\n          ticking = false;\n        });\n        ticking = true;\n      }\n    }, { passive: true });\n\n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden && typeof MBAnalytics !== 'undefined') {\n        MBAnalytics.logActivity('article_progress', {\n          article_id: articleSlug,\n          progress: maxScrollDepth,\n          time_spent: Math.round((Date.now() - readingStartTime) / 1000)\n        });\n      }\n    });\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initReadingTracker);\n  } else {\n    initReadingTracker();\n  }\n})();\n","path":null,"size_bytes":80510,"size_tokens":null},"js/scroll-progress.js":{"content":"// ==================== SCROLL PROGRESS ====================\n\n(function() {\n  'use strict';\n  \n  function initScrollProgress() {\n    const scrollProgress = document.querySelector('.scroll-progress');\n    if (!scrollProgress) return;\n    \n    const progressBar = scrollProgress.querySelector('.scroll-progress__bar');\n    const dots = scrollProgress.querySelectorAll('.scroll-progress__dot');\n    \n    const sections = [];\n    dots.forEach(dot => {\n      const sectionId = dot.getAttribute('data-section');\n      const element = document.getElementById(sectionId);\n      if (element) {\n        sections.push({ id: sectionId, element: element });\n      }\n    });\n    \n    if (sections.length === 0) return;\n    \n    dots.forEach(dot => {\n      dot.addEventListener('click', function() {\n        const sectionId = this.getAttribute('data-section');\n        const section = document.getElementById(sectionId);\n        if (section) {\n          section.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n      });\n    });\n    \n    function updateScrollProgress() {\n      const scrollTop = window.scrollY;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n      const scrollPercent = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;\n      \n      if (progressBar) {\n        progressBar.style.setProperty('--progress', scrollPercent + '%');\n      }\n      \n      if (scrollTop > 300) {\n        scrollProgress.classList.add('visible');\n      } else {\n        scrollProgress.classList.remove('visible');\n      }\n      \n      let currentSection = null;\n      const viewportMiddle = scrollTop + window.innerHeight / 2;\n      \n      for (let i = sections.length - 1; i >= 0; i--) {\n        const section = sections[i];\n        const sectionTop = section.element.getBoundingClientRect().top + window.scrollY;\n        \n        if (sectionTop <= viewportMiddle) {\n          currentSection = section.id;\n          break;\n        }\n      }\n      \n      if (!currentSection && sections.length > 0) {\n        currentSection = sections[0].id;\n      }\n      \n      dots.forEach(dot => {\n        const sectionId = dot.getAttribute('data-section');\n        if (sectionId === currentSection) {\n          dot.classList.add('active');\n        } else {\n          dot.classList.remove('active');\n        }\n      });\n    }\n    \n    window.addEventListener('scroll', updateScrollProgress, { passive: true });\n    updateScrollProgress();\n  }\n  \n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initScrollProgress);\n  } else {\n    initScrollProgress();\n  }\n})();\n","path":null,"size_bytes":2623,"size_tokens":null},"mindspace-build/profile/profile-immersive.css":{"content":"/* === VARIABLES === */\n:root {\n  --time-primary: #87CEEB;\n  --time-secondary: #FFB347;\n  --time-bg-start: #87CEEB;\n  --time-bg-mid: #E0F4FF;\n  --time-bg-end: #FFF8E7;\n  --time-text: #1a1a2e;\n  --time-glow: rgba(255, 183, 77, 0.3);\n  --parallax-speed: 0.5;\n}\n\n/* === TIME THEMES === */\n.time-morning {\n  --time-primary: #FFB347;\n  --time-secondary: #87CEEB;\n  --time-bg-start: #FFE4B5;\n  --time-bg-mid: #FFF8E7;\n  --time-bg-end: #87CEEB;\n  --time-glow: rgba(255, 183, 77, 0.4);\n}\n\n.time-afternoon {\n  --time-primary: #87CEEB;\n  --time-secondary: #98D8C8;\n  --time-bg-start: #87CEEB;\n  --time-bg-mid: #B0E0E6;\n  --time-bg-end: #98D8C8;\n  --time-glow: rgba(135, 206, 235, 0.3);\n}\n\n.time-evening {\n  --time-primary: #FF7F50;\n  --time-secondary: #DDA0DD;\n  --time-bg-start: #FF7F50;\n  --time-bg-mid: #FFB6C1;\n  --time-bg-end: #DDA0DD;\n  --time-glow: rgba(255, 127, 80, 0.4);\n}\n\n.time-night {\n  --time-primary: #6B5B95;\n  --time-secondary: #1a1a2e;\n  --time-bg-start: #1a1a2e;\n  --time-bg-mid: #2d2b3d;\n  --time-bg-end: #4a4868;\n  --time-text: #ffffff;\n  --time-glow: rgba(109, 179, 242, 0.4);\n}\n\n/* === TRANSPARENT BACKGROUNDS === */\n.time-morning .mb-profile,\n.time-afternoon .mb-profile,\n.time-evening .mb-profile,\n.time-night .mb-profile {\n  background: transparent !important;\n}\n\n.time-morning,\n.time-afternoon,\n.time-evening,\n.time-night {\n  background: transparent !important;\n}\n\n/* === IMMERSIVE BACKGROUND === */\n.immersive-bg {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: -1;\n  overflow: hidden;\n  transition: background 1s ease;\n}\n\n.immersive-bg__gradient {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(\n    180deg,\n    var(--time-bg-start) 0%,\n    var(--time-bg-mid) 50%,\n    var(--time-bg-end) 100%\n  );\n  transition: background 2s ease;\n}\n\n.immersive-bg__shapes {\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n}\n\n/* === FLOATING SHAPES === */\n.floating-shape {\n  position: absolute;\n  border-radius: 50%;\n  opacity: 0.1;\n  animation: floatShape 20s ease-in-out infinite;\n}\n\n.floating-shape:nth-child(1) {\n  width: 300px;\n  height: 300px;\n  background: var(--time-primary);\n  top: 10%;\n  left: 5%;\n  animation-delay: 0s;\n}\n\n.floating-shape:nth-child(2) {\n  width: 200px;\n  height: 200px;\n  background: var(--time-secondary);\n  top: 60%;\n  right: 10%;\n  animation-delay: -5s;\n}\n\n.floating-shape:nth-child(3) {\n  width: 150px;\n  height: 150px;\n  background: var(--time-primary);\n  bottom: 20%;\n  left: 20%;\n  animation-delay: -10s;\n}\n\n.floating-shape:nth-child(4) {\n  width: 250px;\n  height: 250px;\n  background: var(--time-secondary);\n  top: 30%;\n  right: 25%;\n  animation-delay: -15s;\n}\n\n@keyframes floatShape {\n  0%, 100% {\n    transform: translate(0, 0) scale(1);\n  }\n  25% {\n    transform: translate(30px, -30px) scale(1.05);\n  }\n  50% {\n    transform: translate(-20px, 20px) scale(0.95);\n  }\n  75% {\n    transform: translate(20px, 10px) scale(1.02);\n  }\n}\n\n/* === STARS === */\n.immersive-bg__stars {\n  position: absolute;\n  inset: 0;\n  opacity: 0;\n  transition: opacity 1s ease;\n  pointer-events: none;\n}\n\n.time-night .immersive-bg__stars {\n  opacity: 1;\n}\n\n.star {\n  position: absolute;\n  width: 3px;\n  height: 3px;\n  background: #fff;\n  border-radius: 50%;\n  animation: twinkle 3s ease-in-out infinite;\n}\n\n.star:nth-child(odd) {\n  animation-delay: -1.5s;\n}\n\n@keyframes twinkle {\n  0%, 100% { opacity: 0.3; transform: scale(1); }\n  50% { opacity: 1; transform: scale(1.2); }\n}\n\n/* === SUN === */\n.immersive-bg__sun {\n  position: absolute;\n  top: -50px;\n  right: 10%;\n  width: 150px;\n  height: 150px;\n  background: radial-gradient(circle, rgba(255,215,0,0.8) 0%, rgba(255,165,0,0.4) 40%, transparent 70%);\n  border-radius: 50%;\n  opacity: 0;\n  transition: opacity 1s ease;\n  animation: sunPulse 4s ease-in-out infinite;\n}\n\n.time-morning .immersive-bg__sun,\n.time-afternoon .immersive-bg__sun {\n  opacity: 1;\n}\n\n.time-evening .immersive-bg__sun {\n  opacity: 0.6;\n  background: radial-gradient(circle, rgba(255,127,80,0.8) 0%, rgba(255,99,71,0.4) 40%, transparent 70%);\n}\n\n@keyframes sunPulse {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.1); }\n}\n\n/* === MOON === */\n.immersive-bg__moon {\n  position: absolute;\n  top: 80px;\n  right: 15%;\n  width: 80px;\n  height: 80px;\n  background: radial-gradient(circle at 30% 30%, #fffef0 0%, #e8e4d9 100%);\n  border-radius: 50%;\n  box-shadow: 0 0 40px rgba(255, 254, 240, 0.5);\n  opacity: 0;\n  transition: opacity 1s ease;\n}\n\n.time-night .immersive-bg__moon {\n  opacity: 1;\n}\n\n/* === GREETING === */\n.profile-greeting {\n  text-align: center;\n  padding: 30px 20px 10px;\n  position: relative;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.profile-greeting__time {\n  font-size: 0.9rem;\n  text-transform: uppercase;\n  letter-spacing: 3px;\n  color: var(--time-primary);\n  margin-bottom: 12px;\n  font-weight: 600;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n  display: inline-block;\n  padding: 6px 16px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 20px;\n  border: 1px solid rgba(255, 255, 255, 0.25);\n}\n\n.profile-greeting__message {\n  font-family: 'Poppins', sans-serif;\n  font-size: clamp(1.5rem, 4vw, 2.5rem);\n  font-weight: 700;\n  color: var(--time-text);\n  margin-bottom: 8px;\n  line-height: 1.2;\n  white-space: nowrap;\n  display: inline;\n}\n\n.profile-greeting__name {\n  display: inline;\n  white-space: nowrap;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--time-primary) 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.profile-greeting__affirmation {\n  font-size: 1rem;\n  color: var(--time-text);\n  opacity: 0.7;\n  max-width: 500px;\n  margin: 0 auto;\n  font-style: italic;\n}\n\n[data-theme=\"dark\"] .profile-greeting__message,\n.time-night .profile-greeting__message {\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .profile-greeting__affirmation,\n.time-night .profile-greeting__affirmation {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n/* === SCROLL ANIMATIONS === */\n.scroll-reveal {\n  opacity: 0;\n  transform: translateY(40px);\n  transition: opacity 0.8s ease, transform 0.8s ease;\n}\n\n.scroll-reveal.revealed {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.scroll-reveal-left {\n  opacity: 0;\n  transform: translateX(-60px);\n  transition: opacity 0.8s ease, transform 0.8s ease;\n}\n\n.scroll-reveal-left.revealed {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.scroll-reveal-right {\n  opacity: 0;\n  transform: translateX(60px);\n  transition: opacity 0.8s ease, transform 0.8s ease;\n}\n\n.scroll-reveal-right.revealed {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.scroll-reveal-scale {\n  opacity: 0;\n  transform: scale(0.8);\n  transition: opacity 0.8s ease, transform 0.8s ease;\n}\n\n.scroll-reveal-scale.revealed {\n  opacity: 1;\n  transform: scale(1);\n}\n\n.stagger-reveal > * {\n  opacity: 0;\n  transform: translateY(30px);\n  transition: opacity 0.6s ease, transform 0.6s ease;\n}\n\n.stagger-reveal.revealed > *:nth-child(1) { transition-delay: 0.1s; }\n.stagger-reveal.revealed > *:nth-child(2) { transition-delay: 0.2s; }\n.stagger-reveal.revealed > *:nth-child(3) { transition-delay: 0.3s; }\n.stagger-reveal.revealed > *:nth-child(4) { transition-delay: 0.4s; }\n.stagger-reveal.revealed > *:nth-child(5) { transition-delay: 0.5s; }\n.stagger-reveal.revealed > *:nth-child(6) { transition-delay: 0.6s; }\n\n.stagger-reveal.revealed > * {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n/* === IMMERSIVE HEADER === */\n.mb-profile.immersive {\n  background: transparent;\n  padding-top: 80px;\n  min-height: 100vh;\n}\n\n.mb-profile.immersive .mb-profile__wrap {\n  max-width: 1400px;\n  padding: 0 20px 60px;\n}\n\n.mb-profile.immersive .mb-profile__header {\n  background: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-profile.immersive .mb-profile__header {\n  background: #2d2b3d;\n  border: 1px solid rgba(109, 179, 242, 0.2);\n}\n\n[data-theme=\"dark\"].time-night .mb-profile.immersive .mb-profile__header,\n[data-theme=\"dark\"] .time-night .mb-profile.immersive .mb-profile__header {\n  background: rgba(45, 43, 61, 0.85);\n  border: 1px solid rgba(109, 179, 242, 0.2);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile.immersive .mb-profile__header {\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid rgba(200, 180, 220, 0.3);\n}\n\n/* === SOLID CARDS === */\n.glass-card {\n  background: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 20px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.glass-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12);\n}\n\n[data-theme=\"dark\"] .glass-card {\n  background: rgba(45, 43, 61, 0.7);\n  border: 1px solid rgba(109, 179, 242, 0.2);\n}\n\n[data-theme=\"dark\"].time-night .glass-card,\n[data-theme=\"dark\"] .time-night .glass-card {\n  background: rgba(45, 43, 61, 0.7);\n  border: 1px solid rgba(109, 179, 242, 0.2);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .glass-card {\n  background: rgba(255, 255, 255, 0.85);\n  border: 1px solid rgba(200, 180, 220, 0.4);\n}\n\n/* === STAT COUNTERS === */\n.stat-counter {\n  font-family: 'Poppins', sans-serif;\n  font-weight: 700;\n  font-size: 2rem;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--time-primary) 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.stat-counter.counting {\n  animation: countPulse 0.3s ease;\n}\n\n@keyframes countPulse {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.1); }\n}\n\n/* === PROGRESS RINGS === */\n.progress-ring {\n  position: relative;\n  width: 80px;\n  height: 80px;\n}\n\n.progress-ring__circle {\n  transform: rotate(-90deg);\n  transform-origin: 50% 50%;\n}\n\n.progress-ring__circle-bg {\n  fill: none;\n  stroke: rgba(0, 0, 0, 0.1);\n  stroke-width: 6;\n}\n\n.progress-ring__circle-progress {\n  fill: none;\n  stroke: var(--user-accent);\n  stroke-width: 6;\n  stroke-linecap: round;\n  stroke-dasharray: 226;\n  stroke-dashoffset: 226;\n  transition: stroke-dashoffset 1.5s ease;\n}\n\n.progress-ring__value {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-family: 'Poppins', sans-serif;\n  font-weight: 700;\n  font-size: 1.25rem;\n}\n\n/* === COMMUNITY FEATURES === */\n.online-status {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.8rem;\n  padding: 4px 10px;\n  border-radius: 20px;\n  background: rgba(0, 0, 0, 0.05);\n}\n\n.online-status__dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: #ccc;\n}\n\n.online-status--online .online-status__dot {\n  background: #4ade80;\n  box-shadow: 0 0 8px rgba(74, 222, 128, 0.6);\n  animation: onlinePulse 2s ease-in-out infinite;\n}\n\n.online-status--away .online-status__dot {\n  background: #fbbf24;\n}\n\n.online-status--offline .online-status__dot {\n  background: #9ca3af;\n}\n\n@keyframes onlinePulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.6; }\n}\n\n.mutual-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 0.75rem;\n  padding: 3px 8px;\n  border-radius: 12px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  font-weight: 600;\n}\n\n.mutual-badge ion-icon {\n  font-size: 0.9rem;\n}\n\n/* === QUICK ACTIONS === */\n.quick-actions {\n  display: flex;\n  gap: 10px;\n  margin-top: 15px;\n}\n\n.quick-action-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  padding: 10px 18px;\n  border-radius: 25px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  border: none;\n}\n\n.quick-action-btn--primary {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n}\n\n.quick-action-btn--primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px var(--time-glow);\n}\n\n.quick-action-btn--secondary {\n  background: rgba(0, 0, 0, 0.05);\n  color: var(--time-text);\n  border: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n.quick-action-btn--secondary:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .quick-action-btn--secondary {\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n/* === HAPTIC FEEDBACK === */\n.haptic-light {\n  -webkit-tap-highlight-color: transparent;\n}\n\n.haptic-medium {\n  -webkit-tap-highlight-color: transparent;\n}\n\n.haptic-heavy {\n  -webkit-tap-highlight-color: transparent;\n}\n\n.haptic-feedback {\n  position: relative;\n  overflow: hidden;\n}\n\n.haptic-feedback::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n  opacity: 0;\n  transition: width 0.4s ease, height 0.4s ease, opacity 0.4s ease;\n}\n\n.haptic-feedback.touched::after {\n  width: 200%;\n  height: 200%;\n  opacity: 0;\n}\n\n/* === AI INSIGHTS === */\n.ai-insights {\n  padding: 25px;\n  border-radius: 20px;\n  background: linear-gradient(135deg, rgba(109, 179, 242, 0.1) 0%, rgba(135, 206, 235, 0.1) 100%);\n  border: 1px solid rgba(109, 179, 242, 0.2);\n  margin-bottom: 25px;\n}\n\n.ai-insights__header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 15px;\n}\n\n.ai-insights__icon {\n  width: 40px;\n  height: 40px;\n  border-radius: 12px;\n  background: linear-gradient(135deg, #6DB3F2 0%, #4A93D4 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 1.2rem;\n}\n\n.ai-insights__title {\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  font-size: 1.1rem;\n  color: var(--time-text);\n}\n\n.ai-insights__badge {\n  font-size: 0.7rem;\n  padding: 3px 8px;\n  border-radius: 10px;\n  background: linear-gradient(135deg, #6DB3F2 0%, #4A93D4 100%);\n  color: #fff;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.ai-insights__content {\n  font-size: 0.95rem;\n  line-height: 1.7;\n  color: var(--time-text);\n  opacity: 0.9;\n}\n\n.ai-insights__affirmation {\n  font-style: italic;\n  padding: 15px 20px;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 12px;\n  margin-top: 15px;\n  border-left: 3px solid var(--user-accent, #6DB3F2);\n}\n\n[data-theme=\"dark\"] .ai-insights__affirmation {\n  background: rgba(0, 0, 0, 0.2);\n}\n\n.ai-insights__loading {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  color: var(--time-text);\n  opacity: 0.7;\n}\n\n.ai-insights__loading-dots {\n  display: flex;\n  gap: 4px;\n}\n\n.ai-insights__loading-dots span {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: var(--user-accent, #6DB3F2);\n  animation: loadingDot 1.4s ease-in-out infinite;\n}\n\n.ai-insights__loading-dots span:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.ai-insights__loading-dots span:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes loadingDot {\n  0%, 80%, 100% { transform: scale(0.6); opacity: 0.5; }\n  40% { transform: scale(1); opacity: 1; }\n}\n\n/* === PEOPLE SUGGESTIONS === */\n.people-suggestions {\n  padding: 20px;\n}\n\n.people-suggestions__title {\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  font-size: 1rem;\n  margin-bottom: 15px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.people-suggestions__list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.people-suggestion {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  border-radius: 12px;\n  background: rgba(0, 0, 0, 0.03);\n  transition: all 0.3s ease;\n}\n\n.people-suggestion:hover {\n  background: rgba(0, 0, 0, 0.06);\n  transform: translateX(5px);\n}\n\n[data-theme=\"dark\"] .people-suggestion {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .people-suggestion:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.people-suggestion__avatar {\n  width: 45px;\n  height: 45px;\n  border-radius: 50%;\n  object-fit: cover;\n  flex-shrink: 0;\n}\n\n.people-suggestion__avatar--initials {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-weight: 700;\n  font-size: 0.95rem;\n  letter-spacing: 0.5px;\n}\n\n.people-suggestion__info {\n  flex: 1;\n}\n\n.people-suggestion__name {\n  font-weight: 600;\n  font-size: 0.9rem;\n  margin-bottom: 2px;\n}\n\n.people-suggestion__mutual {\n  font-size: 0.75rem;\n  opacity: 0.7;\n}\n\n.people-suggestion__follow-btn {\n  padding: 6px 14px;\n  border-radius: 20px;\n  border: none;\n  background: var(--user-accent);\n  color: #fff;\n  font-size: 0.8rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.people-suggestion__follow-btn:hover {\n  transform: scale(1.05);\n  box-shadow: 0 4px 12px var(--time-glow);\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  .floating-shape,\n  .star,\n  .immersive-bg__sun,\n  .online-status__dot,\n  .ai-insights__loading-dots span {\n    animation: none;\n  }\n  \n  .scroll-reveal,\n  .scroll-reveal-left,\n  .scroll-reveal-right,\n  .scroll-reveal-scale,\n  .stagger-reveal > * {\n    opacity: 1;\n    transform: none;\n    transition: none;\n  }\n  \n  .glass-card:hover,\n  .quick-action-btn:hover,\n  .people-suggestion:hover {\n    transform: none;\n  }\n}\n\n/* === AI MOOD SUGGESTION === */\n.ai-mood-suggestion {\n  display: flex;\n  align-items: flex-start;\n  gap: 10px;\n  padding: 15px;\n  margin-top: 15px;\n  background: linear-gradient(135deg, rgba(109, 179, 242, 0.1) 0%, rgba(135, 206, 235, 0.1) 100%);\n  border-radius: 12px;\n  border-left: 3px solid var(--user-accent, #6DB3F2);\n}\n\n.ai-mood-suggestion ion-icon {\n  font-size: 1.2rem;\n  color: var(--user-accent, #6DB3F2);\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.ai-mood-suggestion span {\n  font-size: 0.9rem;\n  color: var(--time-text);\n  line-height: 1.5;\n}\n\n/* === AI GOAL SUGGESTION === */\n.ai-goal-suggestion {\n  padding: 18px;\n  margin: 15px 0;\n  background: linear-gradient(135deg, rgba(109, 179, 242, 0.15) 0%, rgba(135, 206, 235, 0.1) 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(109, 179, 242, 0.3);\n}\n\n.ai-goal-suggestion__header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 10px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent, #6DB3F2);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.ai-goal-suggestion__header ion-icon {\n  font-size: 1rem;\n}\n\n.ai-goal-suggestion__text {\n  font-size: 1rem;\n  font-weight: 500;\n  color: var(--time-text);\n  margin-bottom: 8px;\n  line-height: 1.4;\n}\n\n.ai-goal-suggestion__reason {\n  font-size: 0.85rem;\n  color: var(--time-text);\n  opacity: 0.7;\n  font-style: italic;\n  margin-bottom: 15px;\n}\n\n.ai-goal-suggestion__add {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 18px;\n  background: linear-gradient(135deg, var(--user-accent, #6DB3F2) 0%, #4A93D4 100%);\n  color: #fff;\n  border: none;\n  border-radius: 25px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.ai-goal-suggestion__add:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(109, 179, 242, 0.4);\n}\n\n.ai-goal-suggestion__add ion-icon {\n  font-size: 1rem;\n}\n\n[data-theme=\"dark\"] .ai-mood-suggestion,\n[data-theme=\"dark\"] .ai-goal-suggestion {\n  background: linear-gradient(135deg, rgba(109, 179, 242, 0.2) 0%, rgba(75, 70, 100, 0.3) 100%);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night {\n  --time-primary: #9b8cc4;\n  --time-secondary: #c4b5dc;\n  --time-bg-start: #d8d0e8;\n  --time-bg-mid: #e8e0f0;\n  --time-bg-end: #f0e8f8;\n  --time-text: #1a1a2e;\n  --time-glow: rgba(109, 179, 242, 0.3);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .profile-greeting__message,\nbody:not([data-theme=\"dark\"]) .time-night .profile-greeting__subtitle {\n  color: #1a1a2e;\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .profile-greeting__time {\n  background: rgba(109, 179, 242, 0.2);\n  color: #5a4a8a;\n  text-shadow: none;\n  border: 1px solid rgba(109, 179, 242, 0.3);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile__name,\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile__email,\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile__bio {\n  color: #333;\n}\n\nbody:not([data-theme=\"dark\"]) .mb-profile__unified-stats {\n  background: rgba(255, 255, 255, 0.95);\n  color: #1a1a2e;\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile__actions-btn {\n  background: rgba(255, 255, 255, 0.9);\n  color: #333;\n  border-color: rgba(0, 0, 0, 0.1);\n}\n\nbody:not([data-theme=\"dark\"]) .time-night .mb-profile__actions-btn.primary {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n}\n\n@media (max-width: 768px) {\n  .profile-greeting {\n    padding: 20px 15px 5px;\n  }\n  \n  .profile-greeting__message {\n    font-size: 1.5rem;\n  }\n  \n  .immersive-bg__sun,\n  .immersive-bg__moon {\n    width: 80px;\n    height: 80px;\n    right: 5%;\n  }\n  \n  .floating-shape {\n    opacity: 0.05;\n  }\n  \n  .quick-actions {\n    flex-wrap: wrap;\n  }\n  \n  .quick-action-btn {\n    flex: 1;\n    min-width: 120px;\n    justify-content: center;\n  }\n  \n  .ai-insights {\n    padding: 18px;\n  }\n}\n","path":null,"size_bytes":20956,"size_tokens":null},"mindspace-build/js/helplines.js":{"content":"// ==================== HELPLINES ====================\n\n// --- Initialization ---\ndocument.addEventListener('DOMContentLoaded', function() {\n  initHelplinesFilters();\n  initCopyButtons();\n  initViewToggle();\n  initMobileCategories();\n});\n\n// --- Filter Pills ---\nfunction initHelplinesFilters() {\n  const filterPills = document.querySelectorAll('.helplines-filter-pill');\n  const helplineCards = document.querySelectorAll('.helpline-card');\n  const helplinesGrid = document.querySelector('.helplines-grid');\n  \n  if (!filterPills.length || !helplineCards.length) return;\n  \n  filterPills.forEach(pill => {\n    pill.addEventListener('click', function() {\n      const filter = this.dataset.filter;\n      \n      filterPills.forEach(p => p.classList.remove('active'));\n      this.classList.add('active');\n      \n      helplineCards.forEach((card, index) => {\n        const category = card.dataset.category;\n        const shouldShow = filter === 'all' || category === filter;\n        \n        if (shouldShow) {\n          card.classList.remove('filter-hidden');\n          card.classList.add('filter-visible');\n          card.style.position = 'relative';\n          card.style.visibility = 'visible';\n          card.style.animationDelay = `${index * 0.05}s`;\n        } else {\n          card.classList.add('filter-hidden');\n          card.classList.remove('filter-visible');\n          setTimeout(() => {\n            if (card.classList.contains('filter-hidden')) {\n              card.style.position = 'absolute';\n              card.style.visibility = 'hidden';\n            }\n          }, 300);\n        }\n      });\n      \n      if (helplinesGrid) {\n        helplinesGrid.style.minHeight = '400px';\n      }\n    });\n  });\n}\n\n// --- Copy Buttons ---\nfunction initCopyButtons() {\n  document.querySelectorAll('.helpline-copy-btn').forEach(btn => {\n    btn.addEventListener('click', function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      \n      const phoneNumber = this.dataset.phone;\n      if (!phoneNumber) return;\n      \n      navigator.clipboard.writeText(phoneNumber).then(() => {\n        this.classList.add('copied');\n        const icon = this.querySelector('ion-icon');\n        if (icon) {\n          icon.setAttribute('name', 'checkmark-outline');\n        }\n        \n        setTimeout(() => {\n          this.classList.remove('copied');\n          if (icon) {\n            icon.setAttribute('name', 'copy-outline');\n          }\n        }, 2000);\n      }).catch(err => {\n        console.error('Failed to copy:', err);\n        const textArea = document.createElement('textarea');\n        textArea.value = phoneNumber;\n        textArea.style.position = 'fixed';\n        textArea.style.left = '-9999px';\n        document.body.appendChild(textArea);\n        textArea.select();\n        try {\n          document.execCommand('copy');\n          this.classList.add('copied');\n          const icon = this.querySelector('ion-icon');\n          if (icon) {\n            icon.setAttribute('name', 'checkmark-outline');\n          }\n          setTimeout(() => {\n            this.classList.remove('copied');\n            if (icon) {\n              icon.setAttribute('name', 'copy-outline');\n            }\n          }, 2000);\n        } catch (fallbackErr) {\n          console.error('Fallback copy failed:', fallbackErr);\n        }\n        document.body.removeChild(textArea);\n      });\n    });\n  });\n}\n\n// --- View Toggle ---\nfunction initViewToggle() {\n  const viewToggleBtns = document.querySelectorAll('.view-toggle-btn');\n  const helplinesGrid = document.querySelector('.helplines-grid');\n  \n  if (!viewToggleBtns.length || !helplinesGrid) return;\n  \n  const savedView = localStorage.getItem('helplines-view') || 'grid';\n  if (savedView === 'list') {\n    helplinesGrid.classList.add('list-view');\n    viewToggleBtns.forEach(btn => {\n      btn.classList.toggle('active', btn.dataset.view === 'list');\n    });\n  }\n  \n  viewToggleBtns.forEach(btn => {\n    btn.addEventListener('click', function() {\n      const view = this.dataset.view;\n      \n      viewToggleBtns.forEach(b => b.classList.remove('active'));\n      this.classList.add('active');\n      \n      if (view === 'list') {\n        helplinesGrid.classList.add('list-view');\n      } else {\n        helplinesGrid.classList.remove('list-view');\n      }\n      \n      localStorage.setItem('helplines-view', view);\n      \n      helplinesGrid.style.opacity = '0';\n      setTimeout(() => {\n        helplinesGrid.style.opacity = '1';\n      }, 150);\n    });\n  });\n}\n\n// --- Mobile Categories ---\nfunction initMobileCategories() {\n  const helplinesGrid = document.querySelector('.helplines-grid');\n  const helplineCards = document.querySelectorAll('.helpline-card');\n  \n  if (!helplinesGrid || !helplineCards.length) return;\n  \n  const isMobile = () => window.innerWidth <= 768;\n  \n  let originalCards = Array.from(helplineCards).map(card => card.cloneNode(true));\n  let mobileGroupsCreated = false;\n  \n  const categories = {\n    crisis: { nameKey: 'mobile_cat_crisis', fallback: 'Crisis Lines', icon: 'alert-circle' },\n    lgbtq: { nameKey: 'mobile_cat_lgbtq', fallback: 'LGBTQ+ Support', icon: 'heart-half' },\n    youth: { nameKey: 'mobile_cat_youth', fallback: 'Youth & Students', icon: 'school' },\n    veterans: { nameKey: 'mobile_cat_veterans', fallback: 'Veterans', icon: 'shield-checkmark' },\n    specialized: { nameKey: 'mobile_cat_specialized', fallback: 'Specialized', icon: 'medical' },\n    general: { nameKey: 'mobile_cat_general', fallback: 'General Support', icon: 'call' }\n  };\n  \n  function getTranslation(key, fallback) {\n    if (window.translations && window.translations[key]) {\n      return window.translations[key];\n    }\n    return fallback;\n  }\n  \n  function createMobileGroups() {\n    if (mobileGroupsCreated) return;\n    \n    const grouped = {};\n    helplineCards.forEach(card => {\n      const category = card.dataset.category || 'general';\n      if (!grouped[category]) grouped[category] = [];\n      grouped[category].push(card.cloneNode(true));\n    });\n    \n    helplinesGrid.innerHTML = '';\n    helplinesGrid.classList.add('mobile-grouped');\n    \n    Object.keys(categories).forEach(cat => {\n      const cards = grouped[cat];\n      if (!cards || cards.length === 0) return;\n      \n      const group = document.createElement('div');\n      group.className = 'mobile-category-group';\n      group.dataset.category = cat;\n      \n      const config = categories[cat];\n      const categoryName = getTranslation(config.nameKey, config.fallback);\n      \n      group.innerHTML = `\n        <button class=\"mobile-category-header\" aria-expanded=\"false\">\n          <div class=\"mobile-category-header__left\">\n            <div class=\"mobile-category-header__icon mobile-category-header__icon--${cat}\">\n              <ion-icon name=\"${config.icon}\"></ion-icon>\n            </div>\n            <h3 class=\"mobile-category-header__title\" data-translate=\"${config.nameKey}\">${categoryName}</h3>\n            <span class=\"mobile-category-header__count\">${cards.length}</span>\n          </div>\n          <ion-icon name=\"chevron-down\" class=\"mobile-category-header__chevron\"></ion-icon>\n        </button>\n        <div class=\"mobile-category-content\"></div>\n      `;\n      \n      const content = group.querySelector('.mobile-category-content');\n      cards.forEach(card => content.appendChild(card));\n      \n      const header = group.querySelector('.mobile-category-header');\n      header.addEventListener('click', () => {\n        const isExpanded = group.classList.contains('expanded');\n        group.classList.toggle('expanded');\n        header.setAttribute('aria-expanded', !isExpanded);\n      });\n      \n      if (cat === 'crisis') {\n        group.classList.add('expanded');\n        header.setAttribute('aria-expanded', 'true');\n      }\n      \n      helplinesGrid.appendChild(group);\n    });\n    \n    initCopyButtons();\n    \n    mobileGroupsCreated = true;\n  }\n  \n  function restoreDesktopGrid() {\n    if (!mobileGroupsCreated) return;\n    \n    helplinesGrid.innerHTML = '';\n    helplinesGrid.classList.remove('mobile-grouped');\n    \n    const savedView = localStorage.getItem('helplines-view') || 'grid';\n    if (savedView === 'list') {\n      helplinesGrid.classList.add('list-view');\n    }\n    \n    originalCards.forEach(card => {\n      helplinesGrid.appendChild(card.cloneNode(true));\n    });\n    \n    initCopyButtons();\n    \n    mobileGroupsCreated = false;\n  }\n  \n  function handleResize() {\n    if (isMobile() && !mobileGroupsCreated) {\n      createMobileGroups();\n    } else if (!isMobile() && mobileGroupsCreated) {\n      restoreDesktopGrid();\n    }\n  }\n  \n  let resizeTimeout;\n  window.addEventListener('resize', () => {\n    clearTimeout(resizeTimeout);\n    resizeTimeout = setTimeout(handleResize, 150);\n  });\n  \n  handleResize();\n}\n","path":null,"size_bytes":8780,"size_tokens":null},"mindspace-build/profile/wellness-enhanced.css":{"content":"/* === SOLID CARD BASE === */\n.mb-profile__tab-content .mb-profile__wellness-section,\n.mb-profile__wellness-section {\n  background: #fff !important;\n  border: 1px solid rgba(0, 0, 0, 0.1) !important;\n  border-radius: 24px !important;\n  padding: 28px !important;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08) !important;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  position: relative !important;\n  overflow: hidden !important;\n}\n\n.mb-profile__wellness-section::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, var(--user-accent), var(--user-accent-light), #8fa67a, var(--user-accent));\n  background-size: 200% 100%;\n  animation: gradientShift 3s ease infinite;\n}\n\n@keyframes gradientShift {\n  0%, 100% { background-position: 0% 50%; }\n  50% { background-position: 100% 50%; }\n}\n\n.mb-profile__wellness-section:hover {\n  transform: translateY(-4px);\n  box-shadow: \n    0 20px 50px rgba(0, 0, 0, 0.12),\n    0 0 0 1px rgba(255, 255, 255, 0.6) inset;\n}\n\n.mb-profile__wellness-section h3 {\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin-bottom: 24px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.mb-profile__wellness-section h3 ion-icon {\n  font-size: 1.4rem;\n  color: var(--user-accent);\n  filter: drop-shadow(0 2px 4px rgba(184, 155, 94, 0.3));\n}\n\n/* === MOOD TRACKER === */\n.mb-profile__mood-input {\n  text-align: center;\n  margin-bottom: 32px;\n}\n\n.mb-profile__mood-input p {\n  font-size: 1.15rem;\n  font-weight: 500;\n  color: #4a4a6a;\n  margin-bottom: 24px;\n}\n\n.mb-profile__mood-selector {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  margin-bottom: 24px;\n}\n\n.mb-profile__mood-selector .mb-profile__mood-btn,\n.mb-profile__mood-btn {\n  width: 64px !important;\n  height: 64px !important;\n  border: 3px solid transparent !important;\n  border-radius: 50% !important;\n  background: linear-gradient(145deg, var(--user-accent-soft) 0%, #fff 100%) !important;\n  cursor: pointer !important;\n  display: flex !important;\n  align-items: center !important;\n  justify-content: center !important;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  position: relative !important;\n  box-shadow: \n    0 4px 15px rgba(0, 0, 0, 0.08),\n    0 2px 4px rgba(0, 0, 0, 0.04) !important;\n  font-size: 2rem !important;\n}\n\n.mb-profile__mood-btn::before {\n  content: '';\n  position: absolute;\n  inset: -4px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, var(--user-accent), var(--user-accent-light), #8fa67a);\n  opacity: 0;\n  z-index: -1;\n  transition: opacity 0.3s ease;\n}\n\n.mb-profile__mood-selector .mb-profile__mood-btn:hover,\n.mb-profile__mood-btn:hover {\n  transform: scale(1.15) translateY(-4px) !important;\n  box-shadow: \n    0 12px 30px rgba(184, 155, 94, 0.25),\n    0 4px 10px rgba(0, 0, 0, 0.1) !important;\n}\n\n.mb-profile__mood-btn:hover::before {\n  opacity: 0.3 !important;\n}\n\n.mb-profile__mood-selector .mb-profile__mood-btn.is-selected,\n.mb-profile__mood-btn.is-selected {\n  border-color: var(--user-accent) !important;\n  background: linear-gradient(145deg, rgba(184, 155, 94, 0.15) 0%, rgba(184, 155, 94, 0.05) 100%) !important;\n  transform: scale(1.2) !important;\n  box-shadow: \n    0 8px 25px rgba(184, 155, 94, 0.35),\n    0 0 20px rgba(184, 155, 94, 0.2) !important;\n}\n\n.mb-profile__mood-btn.is-selected::before {\n  opacity: 0.5;\n  animation: moodPulse 2s ease-in-out infinite;\n}\n\n@keyframes moodPulse {\n  0%, 100% { transform: scale(1); opacity: 0.5; }\n  50% { transform: scale(1.1); opacity: 0.3; }\n}\n\n.mb-profile__mood-btn .mood-emoji,\n.mood-emoji {\n  font-size: 2rem !important;\n  transition: transform 0.3s ease !important;\n  filter: drop-shadow(0 2px 3px rgba(0, 0, 0, 0.1)) !important;\n  line-height: 1 !important;\n}\n\n.mb-profile__mood-btn:hover .mood-emoji {\n  transform: scale(1.1);\n  animation: emojiWiggle 0.5s ease;\n}\n\n@keyframes emojiWiggle {\n  0%, 100% { transform: scale(1.1) rotate(0deg); }\n  25% { transform: scale(1.1) rotate(-5deg); }\n  75% { transform: scale(1.1) rotate(5deg); }\n}\n\n/* === MOOD NOTE INPUT === */\n.mb-profile__mood-note {\n  width: 100%;\n  max-width: 450px;\n  padding: 16px 20px;\n  border: 2px solid rgba(184, 155, 94, 0.2);\n  border-radius: 16px;\n  background: rgba(255, 255, 255, 0.8);\n  font-size: 1rem;\n  color: #1a1a2e;\n  transition: all 0.3s ease;\n  margin-bottom: 20px;\n}\n\n.mb-profile__mood-note:focus {\n  outline: none;\n  border-color: var(--user-accent);\n  box-shadow: 0 0 0 4px rgba(184, 155, 94, 0.15);\n  background: #fff;\n}\n\n.mb-profile__mood-note::placeholder {\n  color: #9a9ab0;\n}\n\n/* === LOG MOOD BUTTON === */\n.mb-profile__mood-log-btn {\n  padding: 14px 36px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-grad-end) 50%, var(--user-accent-light) 100%);\n  background-size: 200% 100%;\n  color: #fff;\n  border: none;\n  border-radius: 50px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 6px 20px rgba(184, 155, 94, 0.35);\n  position: relative;\n  overflow: hidden;\n}\n\n.mb-profile__mood-log-btn::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n  transition: left 0.5s ease;\n}\n\n.mb-profile__mood-log-btn:hover {\n  background-position: 100% 0;\n  transform: translateY(-3px);\n  box-shadow: 0 10px 30px rgba(184, 155, 94, 0.45);\n}\n\n.mb-profile__mood-log-btn:hover::before {\n  left: 100%;\n}\n\n.mb-profile__mood-log-btn:active {\n  transform: translateY(-1px);\n}\n\n/* === MOOD HISTORY === */\n.mb-profile__mood-history {\n  margin-top: 32px;\n  padding-top: 28px;\n  border-top: 1px solid rgba(184, 155, 94, 0.2);\n}\n\n.mb-profile__mood-history h4 {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #6b6b8a;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-profile__mood-entries {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n  gap: 16px;\n}\n\n.mb-profile__mood-entries {\n  display: grid !important;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)) !important;\n  gap: 20px !important;\n}\n\n.mb-profile__mood-history .mood-entry-card,\n\n/* === MOOD ENTRY CARDS === */\n.mood-entry-card {\n  background: #fff !important;\n  border-radius: 16px !important;\n  padding: 20px !important;\n  text-align: left !important;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06) !important;\n  transition: all 0.25s ease !important;\n  border: 1px solid rgba(0, 0, 0, 0.04) !important;\n  position: relative !important;\n  overflow: hidden !important;\n  display: flex !important;\n  align-items: flex-start !important;\n  gap: 16px !important;\n  cursor: pointer !important;\n}\n\n.mood-entry-card::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  border-radius: 16px 0 0 16px;\n}\n\n.mood-entry-card[data-mood=\"5\"]::before { background: linear-gradient(180deg, #10b981, #34d399); }\n.mood-entry-card[data-mood=\"4\"]::before { background: linear-gradient(180deg, #8b5cf6, #a78bfa); }\n.mood-entry-card[data-mood=\"3\"]::before { background: linear-gradient(180deg, #3b82f6, #60a5fa); }\n.mood-entry-card[data-mood=\"2\"]::before { background: linear-gradient(180deg, #f59e0b, #fbbf24); }\n.mood-entry-card[data-mood=\"1\"]::before { background: linear-gradient(180deg, #ef4444, #f87171); }\n\n.mood-entry-card:hover {\n  transform: translateY(-4px) !important;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1) !important;\n}\n\n.mood-entry-emoji {\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, var(--user-accent-soft) 0%, #fff 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n  border: 2px solid #f0ebe3;\n}\n\n.mood-entry-card .mood-emoji-large {\n  font-size: 1.8rem !important;\n  display: block !important;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1)) !important;\n}\n\n.mood-entry-content {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.mood-entry-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 12px;\n}\n\n.mood-label {\n  font-weight: 600;\n  font-size: 1rem;\n  color: #1a1a2e;\n}\n\n.mood-entry-card[data-mood=\"5\"] .mood-label { color: #10b981; }\n.mood-entry-card[data-mood=\"4\"] .mood-label { color: #8b5cf6; }\n.mood-entry-card[data-mood=\"3\"] .mood-label { color: #3b82f6; }\n.mood-entry-card[data-mood=\"2\"] .mood-label { color: #f59e0b; }\n.mood-entry-card[data-mood=\"1\"] .mood-label { color: #ef4444; }\n\n.mood-entry-card .mood-time {\n  font-size: 0.8rem;\n  color: #8a8a9a;\n}\n\n.mood-entry-card .mood-date {\n  font-size: 0.85rem;\n  color: #6b6b8a;\n  margin-top: 2px;\n}\n\n.mood-note-preview {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  margin-top: 10px;\n  padding: 10px 12px;\n  background: var(--user-accent-soft);\n  border-radius: 10px;\n  font-size: 0.875rem;\n  color: #4a4a6a;\n  line-height: 1.5;\n}\n\n.mood-note-preview ion-icon {\n  flex-shrink: 0;\n  font-size: 1rem;\n  color: var(--user-accent);\n  margin-top: 2px;\n}\n\n.mood-note-preview span {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n/* === MOOD TREND CHART === */\n.mb-profile__mood-trend {\n  margin-top: 24px;\n  background: linear-gradient(145deg, rgba(248, 246, 242, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%);\n  border-radius: 16px;\n  padding: 24px;\n  border: 1px solid rgba(184, 155, 94, 0.1);\n}\n\n.mb-profile__mood-trend h5 {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #4a4a6a;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mood-trend-chart {\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n  height: 120px;\n  padding: 0 10px;\n  position: relative;\n}\n\n.mood-trend-chart::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 1px;\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.mood-trend-bar {\n  flex: 1;\n  max-width: 40px;\n  margin: 0 4px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n}\n\n.mood-trend-bar .bar {\n  width: 100%;\n  border-radius: 8px 8px 4px 4px;\n  min-height: 8px;\n  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n}\n\n.mood-trend-bar .bar[data-level=\"5\"] { background: linear-gradient(180deg, #10b981, #059669); height: 100%; }\n.mood-trend-bar .bar[data-level=\"4\"] { background: linear-gradient(180deg, #8b5cf6, #7c3aed); height: 80%; }\n.mood-trend-bar .bar[data-level=\"3\"] { background: linear-gradient(180deg, #3b82f6, #2563eb); height: 60%; }\n.mood-trend-bar .bar[data-level=\"2\"] { background: linear-gradient(180deg, #f59e0b, #d97706); height: 40%; }\n.mood-trend-bar .bar[data-level=\"1\"] { background: linear-gradient(180deg, #ef4444, #dc2626); height: 20%; }\n\n.mood-trend-bar .bar:hover {\n  transform: scaleY(1.05);\n  filter: brightness(1.1);\n}\n\n.mood-trend-bar .day-label {\n  font-size: 0.7rem;\n  font-weight: 500;\n  color: #9a9ab0;\n  text-transform: uppercase;\n}\n\n/* === WELLNESS GOALS === */\n.mb-profile__goals-add {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 24px;\n  flex-wrap: wrap;\n}\n\n.mb-profile__goal-input {\n  flex: 1;\n  min-width: 220px;\n  padding: 14px 20px;\n  border: 2px solid rgba(184, 155, 94, 0.2);\n  border-radius: 14px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__goal-input:focus {\n  outline: none;\n  border-color: var(--user-accent);\n  box-shadow: 0 0 0 4px rgba(184, 155, 94, 0.12);\n}\n\n.mb-profile__goal-select {\n  padding: 14px 20px;\n  border: 2px solid rgba(184, 155, 94, 0.2);\n  border-radius: 14px;\n  background: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  color: #4a4a6a;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  min-width: 150px;\n}\n\n.mb-profile__goal-select:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.mb-profile__goal-add-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 14px 28px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  border: none;\n  border-radius: 14px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(184, 155, 94, 0.3);\n  white-space: nowrap;\n}\n\n.mb-profile__goal-add-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(var(--user-accent-rgb), 0.4);\n}\n\n.mb-profile__goal-add-btn ion-icon {\n  font-size: 1.2rem;\n}\n\n/* === GOALS LIST === */\n.mb-profile__goals-list {\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n}\n\n.mb-profile__goals-list .mb-profile__goal-item,\n.mb-profile__goal-item {\n  display: flex !important;\n  align-items: center !important;\n  gap: 16px !important;\n  background: linear-gradient(145deg, #fff 0%, #faf9f7 100%) !important;\n  padding: 18px 20px !important;\n  border-radius: 16px !important;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05) !important;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  border: 1px solid rgba(0, 0, 0, 0.03) !important;\n  position: relative !important;\n  overflow: hidden !important;\n}\n\n.mb-profile__goal-item::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  background: linear-gradient(180deg, var(--user-accent), var(--user-accent-light));\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.mb-profile__goal-item:hover {\n  transform: translateX(8px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.mb-profile__goal-item:hover::before {\n  opacity: 1;\n}\n\n.mb-profile__goal-item .goal-check {\n  width: 28px;\n  height: 28px;\n  border: 3px solid var(--user-accent);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n  position: relative;\n}\n\n.mb-profile__goal-item .goal-check::before {\n  content: '';\n  position: absolute;\n  inset: -6px;\n  border-radius: 50%;\n  background: rgba(184, 155, 94, 0.15);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.mb-profile__goal-item .goal-check:hover::before {\n  opacity: 1;\n}\n\n.mb-profile__goal-item .goal-check.completed {\n  background: linear-gradient(135deg, #10b981, #059669);\n  border-color: #10b981;\n  animation: checkComplete 0.4s ease;\n}\n\n@keyframes checkComplete {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.2); }\n  100% { transform: scale(1); }\n}\n\n.mb-profile__goal-item .goal-check.completed ion-icon {\n  color: #fff;\n  font-size: 1rem;\n}\n\n.goal-progress-ring {\n  width: 48px;\n  height: 48px;\n  position: relative;\n  flex-shrink: 0;\n}\n\n.goal-progress-ring svg {\n  width: 100%;\n  height: 100%;\n  transform: rotate(-90deg);\n}\n\n.goal-progress-ring .ring-bg {\n  fill: none;\n  stroke: rgba(184, 155, 94, 0.15);\n  stroke-width: 4;\n}\n\n.goal-progress-ring .ring-progress {\n  fill: none;\n  stroke: url(#goalGradient);\n  stroke-width: 4;\n  stroke-linecap: round;\n  transition: stroke-dashoffset 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.goal-progress-ring .ring-text {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 0.7rem;\n  font-weight: 700;\n  color: var(--user-accent);\n}\n\n.mb-profile__goal-item .goal-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.mb-profile__goal-item .goal-title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 6px;\n}\n\n.mb-profile__goal-item .goal-category {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.8rem;\n  color: #fff;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-grad-end) 100%);\n  padding: 4px 12px;\n  border-radius: 20px;\n}\n\n.mb-profile__goal-item .goal-category ion-icon {\n  font-size: 0.85rem;\n}\n\n.mb-profile__goal-item .goal-delete {\n  width: 36px;\n  height: 36px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  opacity: 0;\n}\n\n.mb-profile__goal-item:hover .goal-delete {\n  opacity: 1;\n}\n\n.mb-profile__goal-item .goal-delete:hover {\n  background: #ef4444;\n  color: #fff;\n  transform: scale(1.1);\n}\n\n/* === GOALS EMPTY STATE === */\n.mb-profile__goals-empty {\n  text-align: center;\n  padding: 50px 30px;\n  background: linear-gradient(145deg, rgba(248, 246, 242, 0.6) 0%, rgba(255, 255, 255, 0.4) 100%);\n  border-radius: 20px;\n  border: 2px dashed rgba(184, 155, 94, 0.25);\n}\n\n.mb-profile__goals-empty .empty-icon {\n  font-size: 4rem;\n  margin-bottom: 20px;\n  opacity: 0.6;\n  animation: emptyFloat 3s ease-in-out infinite;\n}\n\n@keyframes emptyFloat {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-10px); }\n}\n\n.mb-profile__goals-empty h4 {\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: #4a4a6a;\n  margin-bottom: 10px;\n}\n\n.mb-profile__goals-empty p {\n  color: #9a9ab0;\n  font-size: 0.95rem;\n}\n\n/* === READING STREAK === */\n.mb-profile__streak-display {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 20px;\n  margin-bottom: 32px;\n}\n\n.mb-profile__streak-stats .mb-profile__streak-stat,\n.mb-profile__streak-stat {\n  background: linear-gradient(145deg, #fff 0%, #faf9f7 100%) !important;\n  border-radius: 20px !important;\n  padding: 28px 24px !important;\n  text-align: center !important;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06) !important;\n  border: 1px solid rgba(0, 0, 0, 0.03) !important;\n  transition: all 0.3s ease !important;\n  position: relative !important;\n  overflow: hidden !important;\n}\n\n.mb-profile__streak-stat:first-child {\n  background: linear-gradient(145deg, rgba(184, 155, 94, 0.12) 0%, rgba(184, 155, 94, 0.05) 100%);\n  border-color: rgba(184, 155, 94, 0.2);\n}\n\n.mb-profile__streak-stat:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 35px rgba(0, 0, 0, 0.1);\n}\n\n.streak-icon {\n  font-size: 2.5rem;\n  margin-bottom: 12px;\n  display: inline-block;\n}\n\n.streak-icon.flame {\n  animation: flameFlicker 1.5s ease-in-out infinite;\n  filter: drop-shadow(0 4px 8px rgba(239, 68, 68, 0.4));\n}\n\n@keyframes flameFlicker {\n  0%, 100% { transform: scale(1) rotate(0deg); }\n  25% { transform: scale(1.05) rotate(-2deg); }\n  50% { transform: scale(1.1) rotate(0deg); }\n  75% { transform: scale(1.05) rotate(2deg); }\n}\n\n.mb-profile__streak-stat .streak-number {\n  font-size: 3rem;\n  font-weight: 800;\n  background: linear-gradient(135deg, var(--user-accent) 0%, #8fa67a 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  line-height: 1.1;\n  display: block;\n  margin-bottom: 8px;\n}\n\n.mb-profile__streak-stat .streak-label {\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: #6b6b8a;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n/* === STREAK CALENDAR === */\n.mb-profile__streak-calendar {\n  background: linear-gradient(145deg, rgba(248, 246, 242, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%);\n  border-radius: 16px;\n  padding: 24px;\n  border: 1px solid rgba(184, 155, 94, 0.1);\n}\n\n.streak-calendar-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.streak-calendar-header h5 {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #4a4a6a;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.streak-calendar-legend {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 0.75rem;\n  color: #9a9ab0;\n}\n\n.streak-calendar-legend span:first-child {\n  margin-right: 8px;\n}\n\n.streak-calendar-legend .legend-box {\n  width: 12px;\n  height: 12px;\n  border-radius: 3px;\n}\n\n.streak-calendar-legend .legend-box.l0 { background: rgba(184, 155, 94, 0.1); }\n.streak-calendar-legend .legend-box.l1 { background: rgba(184, 155, 94, 0.3); }\n.streak-calendar-legend .legend-box.l2 { background: rgba(184, 155, 94, 0.5); }\n.streak-calendar-legend .legend-box.l3 { background: rgba(184, 155, 94, 0.7); }\n.streak-calendar-legend .legend-box.l4 { background: var(--user-accent); }\n\n.streak-calendar-grid {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 6px;\n}\n\n.streak-calendar-grid .streak-day,\n.streak-day {\n  aspect-ratio: 1 !important;\n  border-radius: 6px !important;\n  background: rgba(184, 155, 94, 0.08) !important;\n  transition: all 0.2s ease !important;\n  cursor: pointer !important;\n  position: relative !important;\n}\n\n.streak-day:hover {\n  transform: scale(1.15);\n  z-index: 1;\n}\n\n.streak-day.active-1 { background: rgba(184, 155, 94, 0.25) !important; }\n.streak-day.active-2 { background: rgba(184, 155, 94, 0.45) !important; }\n.streak-day.active-3 { background: rgba(184, 155, 94, 0.65) !important; }\n.streak-day.active-4 { background: var(--user-accent) !important; box-shadow: 0 2px 8px rgba(var(--user-accent-rgb), 0.4) !important; }\n\n.streak-day .streak-tooltip {\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%) translateY(-5px);\n  background: #1a1a2e;\n  color: #fff;\n  padding: 6px 10px;\n  border-radius: 6px;\n  font-size: 0.7rem;\n  white-space: nowrap;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.2s ease;\n  z-index: 10;\n}\n\n.streak-day:hover .streak-tooltip {\n  opacity: 1;\n  visibility: visible;\n  transform: translateX(-50%) translateY(0);\n}\n\n.mb-profile__streak-milestones {\n  margin-top: 24px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  justify-content: center;\n}\n\n.streak-milestone {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 16px;\n  background: linear-gradient(145deg, #fff 0%, #faf9f7 100%);\n  border-radius: 30px;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.06);\n  border: 1px solid rgba(0, 0, 0, 0.04);\n  transition: all 0.3s ease;\n}\n\n.streak-milestone.achieved {\n  background: linear-gradient(145deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%);\n  border-color: rgba(16, 185, 129, 0.3);\n}\n\n.streak-milestone.achieved .milestone-icon {\n  color: #10b981;\n}\n\n.streak-milestone .milestone-icon {\n  font-size: 1.3rem;\n  color: #9a9ab0;\n}\n\n.streak-milestone .milestone-text {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #4a4a6a;\n}\n\n.streak-milestone.locked {\n  opacity: 0.5;\n}\n\n[data-theme=\"dark\"] .mb-profile__wellness-section {\n  background: linear-gradient(135deg, rgba(45, 43, 61, 0.95) 0%, rgba(45, 43, 61, 0.85) 100%);\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-profile__wellness-section h3 {\n  color: #bde0fe;\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-input p {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-btn {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-note {\n  background: rgba(45, 43, 61, 0.8);\n  border-color: rgba(184, 155, 94, 0.3);\n  color: #bde0fe;\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-history h4 {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mood-entry-card {\n  background: #2d2b3d !important;\n  border-color: rgba(255, 255, 255, 0.05) !important;\n}\n\n[data-theme=\"dark\"] .mood-entry-emoji {\n  background: linear-gradient(135deg, #3d3a50 0%, #2d2b3d 100%);\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .mood-entry-card .mood-date {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mood-entry-card .mood-time {\n  color: #7a7a8a;\n}\n\n[data-theme=\"dark\"] .mood-label {\n  color: #bde0fe;\n}\n\n[data-theme=\"dark\"] .mood-note-preview {\n  background: rgba(45, 43, 61, 0.8);\n  color: #c0c0d0;\n}\n\n[data-theme=\"dark\"] .mood-note-preview ion-icon {\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-trend {\n  background: linear-gradient(145deg, rgba(61, 58, 80, 0.6) 0%, rgba(45, 43, 61, 0.4) 100%);\n  border-color: rgba(184, 155, 94, 0.15);\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-trend h5 {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-input,\n[data-theme=\"dark\"] .mb-profile__goal-select {\n  background: rgba(45, 43, 61, 0.9);\n  border-color: rgba(184, 155, 94, 0.3);\n  color: #bde0fe;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%);\n  border-color: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item .goal-title {\n  color: #bde0fe;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-empty {\n  background: linear-gradient(145deg, rgba(61, 58, 80, 0.8) 0%, rgba(45, 43, 61, 0.6) 100%) !important;\n  border-color: rgba(184, 155, 94, 0.3) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-empty h4 {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-stat {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%) !important;\n  border-color: rgba(255, 255, 255, 0.08) !important;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-stat:first-child {\n  background: linear-gradient(145deg, rgba(184, 155, 94, 0.25) 0%, rgba(184, 155, 94, 0.12) 100%) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-stat .streak-label {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-calendar {\n  background: linear-gradient(145deg, rgba(61, 58, 80, 0.9) 0%, rgba(45, 43, 61, 0.75) 100%) !important;\n  border-color: rgba(184, 155, 94, 0.2) !important;\n}\n\n[data-theme=\"dark\"] .streak-calendar-header h5 {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .streak-day {\n  background: rgba(184, 155, 94, 0.12);\n}\n\n[data-theme=\"dark\"] .streak-milestone {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%);\n  border-color: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .streak-milestone .milestone-text {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .mb-profile__wellness-section,\n[data-theme=\"dark\"] .mb-profile__tab-content .mb-profile__wellness-section {\n  background: linear-gradient(135deg, rgba(45, 43, 61, 0.98) 0%, rgba(45, 43, 61, 0.92) 100%) !important;\n  border-color: rgba(255, 255, 255, 0.1) !important;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-input,\n[data-theme=\"dark\"] .mb-profile__goal-select {\n  background: rgba(45, 43, 61, 0.95) !important;\n  border-color: rgba(184, 155, 94, 0.3) !important;\n  color: #bde0fe !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-input::placeholder {\n  color: #7a7a8a !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-list .mb-profile__goal-item,\n[data-theme=\"dark\"] .mb-profile__goal-item {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%) !important;\n  border-color: rgba(255, 255, 255, 0.06) !important;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item .goal-title {\n  color: #bde0fe !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item .goal-check {\n  border-color: var(--user-accent-light) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-display .mb-profile__streak-stat,\n[data-theme=\"dark\"] .mb-profile__streak-stats .mb-profile__streak-stat,\n[data-theme=\"dark\"] .mb-profile__streak-stat {\n  background: linear-gradient(145deg, #3d3a50 0%, #2d2b3d 100%) !important;\n  border-color: rgba(255, 255, 255, 0.08) !important;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-stat:first-child {\n  background: linear-gradient(145deg, rgba(184, 155, 94, 0.2) 0%, rgba(184, 155, 94, 0.08) 100%) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-stat .streak-label {\n  color: #a0a0b8 !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-calendar {\n  background: linear-gradient(145deg, rgba(61, 58, 80, 0.95) 0%, rgba(45, 43, 61, 0.85) 100%) !important;\n  border-color: rgba(184, 155, 94, 0.2) !important;\n}\n\n[data-theme=\"dark\"] .streak-calendar-header h5 {\n  color: #b0b0c0 !important;\n}\n\n[data-theme=\"dark\"] .streak-calendar-legend {\n  color: #8a8a9a !important;\n}\n\n[data-theme=\"dark\"] .streak-day {\n  background: rgba(184, 155, 94, 0.15) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-empty {\n  background: linear-gradient(145deg, rgba(61, 58, 80, 0.9) 0%, rgba(45, 43, 61, 0.7) 100%) !important;\n  border-color: rgba(184, 155, 94, 0.35) !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-empty h4 {\n  color: #c0c0d0 !important;\n}\n\n[data-theme=\"dark\"] .mb-profile__goals-empty p {\n  color: #8a8a9a !important;\n}\n\n@media (max-width: 768px) {\n  .mb-profile__wellness-section {\n    padding: 20px !important;\n    border-radius: 20px !important;\n  }\n\n  .mb-profile__mood-selector {\n    gap: 12px !important;\n  }\n\n  .mb-profile__mood-btn {\n    width: 52px !important;\n    height: 52px !important;\n  }\n\n  .mood-emoji {\n    font-size: 1.6rem !important;\n  }\n\n  .mb-profile__mood-entries {\n    grid-template-columns: 1fr !important;\n  }\n\n  .mood-entry-card {\n    padding: 16px !important;\n  }\n\n  .mood-entry-emoji {\n    width: 48px;\n    height: 48px;\n  }\n\n  .mood-entry-card .mood-emoji-large {\n    font-size: 1.5rem !important;\n  }\n\n  .mb-profile__goals-add {\n    flex-direction: column;\n  }\n\n  .mb-profile__goal-input,\n  .mb-profile__goal-select,\n  .mb-profile__goal-add-btn {\n    width: 100%;\n  }\n\n  .mb-profile__streak-display {\n    grid-template-columns: 1fr;\n  }\n\n  .streak-calendar-grid {\n    gap: 4px;\n  }\n\n  .mb-profile__streak-milestones {\n    gap: 8px;\n  }\n\n  .streak-milestone {\n    padding: 8px 12px;\n    font-size: 0.8rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .mb-profile__mood-btn {\n    width: 46px !important;\n    height: 46px !important;\n  }\n\n  .mood-emoji {\n    font-size: 1.4rem !important;\n  }\n\n  .mood-entry-emoji {\n    width: 42px;\n    height: 42px;\n  }\n\n  .mood-entry-card .mood-emoji-large {\n    font-size: 1.3rem !important;\n  }\n\n  .mood-label {\n    font-size: 0.9rem;\n  }\n\n  .mb-profile__streak-stat .streak-number {\n    font-size: 2.5rem;\n  }\n}\n","path":null,"size_bytes":29717,"size_tokens":null},"community/community.js":{"content":"// ==================== COMMUNITY ====================\n\nlet sb = null;\nlet currentUser = null;\n// --- State ---\nlet initialized = false;\nlet realtimeChannel = null;\nlet realtimeSetup = false;\nlet postsLoaded = false;\nlet loadingPosts = false;\nlet suppressRealtimeUntil = 0;\nlet lastLoadedTimestamp = null;\nlet authHandled = false;\nlet pendingAuthDebounce = null;\nconst recentlyPostedIds = new Set();\nconst renderedPostIds = new Set();\nconst ADMIN_EMAIL = 'marlonsalmeron871@gmail.com';\n\n\nlet selectedMediaFile = null;\nlet mediaPreviewUrl = null;\n\n\nlet mentionDropdown = null;\nlet mentionSearchTimeout = null;\nlet mentionUsers = [];\nlet mentionStartPos = 0;\nlet activeMentionInput = null;\n\nconst profileCache = {};\n\nasync function fetchUserProfile(userId) {\n  if (profileCache[userId]) return profileCache[userId];\n  const client = initSupabase();\n  if (!client) return null;\n  try {\n    const { data } = await client.from('profiles').select('avatar_url, display_name').eq('id', userId).single();\n    if (data) profileCache[userId] = data;\n    return data;\n  } catch (e) { return null; }\n}\n\nfunction showConfetti() {\n  const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--user-accent').trim() || '#af916d';\n  const colors = [accentColor, '#d6bd9f', '#8b7355', '#4caf50', '#2196f3', '#ff9800'];\n  for (let i = 0; i < 30; i++) {\n    const confetti = document.createElement('div');\n    confetti.style.cssText = 'position:fixed;width:' + (Math.random()*10+5) + 'px;height:' + (Math.random()*10+5) + 'px;background:' + colors[Math.floor(Math.random()*colors.length)] + ';left:' + (Math.random()*100) + 'vw;top:-20px;border-radius:' + (Math.random()>0.5?'50%':'2px') + ';z-index:10000;pointer-events:none;animation:confettiFall ' + (Math.random()*2+1.5) + 's ease forwards;';\n    document.body.appendChild(confetti);\n    setTimeout(() => confetti.remove(), 3500);\n  }\n}\n\n// --- Helpers ---\nfunction getTranslation(key, fallback) {\n  if (window.translations && window.MindBalanceSettings) {\n    const lang = localStorage.getItem('mindbalance-language') || 'en';\n    const langMap = { en: 'en', es: 'es', fr: 'fr', zh: 'zh', hi: 'hi', ko: 'ko' };\n    const langKey = langMap[lang] || 'en';\n    if (window.translations[langKey] && window.translations[langKey][key]) {\n      return window.translations[langKey][key];\n    }\n  }\n  return fallback;\n}\n\nfunction clearMediaPreview() {\n  selectedMediaFile = null;\n  if (mediaPreviewUrl) {\n    URL.revokeObjectURL(mediaPreviewUrl);\n    mediaPreviewUrl = null;\n  }\n  const mediaPreview = document.getElementById('mediaPreview');\n  const mediaInput = document.getElementById('mediaInput');\n  const mediaBtn = document.getElementById('mediaBtn');\n\n  if (mediaPreview) mediaPreview.style.display = 'none';\n  if (mediaInput) mediaInput.value = '';\n  if (mediaBtn) {\n    mediaBtn.textContent = 'ðŸ“Ž Media';\n    mediaBtn.setAttribute('data-translate', 'community_media_btn');\n  }\n}\n\nfunction generateUUID() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = Math.random() * 16 | 0;\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n// --- Profanity Filter ---\nconst BLOCKED_WORDS = [\n  'fuck', 'shit', 'ass', 'bitch', 'damn', 'crap', 'piss', 'dick', 'cock', 'pussy',\n  'bastard', 'slut', 'whore', 'fag', 'faggot', 'retard', 'retarded', 'nigger', 'nigga',\n  'cunt', 'twat', 'wanker', 'bollocks', 'arsehole', 'asshole', 'motherfucker',\n  'bullshit', 'horseshit', 'dumbass', 'jackass', 'dipshit', 'shithead',\n  'kike', 'spic', 'chink', 'gook', 'wetback', 'beaner', 'cracker', 'honky',\n  'tranny', 'shemale', 'dyke', 'homo', 'queer', 'negro', 'coon', 'darkie',\n  'paki', 'raghead', 'towelhead', 'jap', 'chinaman', 'redskin', 'injun',\n  'nazi', 'hitler', 'kkk', 'stfu', 'gtfo', 'wtf', 'fck', 'sht', 'btch',\n  'fuk', 'fuq', 'fuc', 'azz', 'a55', 'b1tch', 'd1ck', 'p1ss', 'c0ck',\n  'fvck', 'sh1t', 'b!tch', 'n1gger', 'n1gga', 'f4g', 'f4gg0t'\n];\n\nconst SLUR_PATTERNS = [\n  /n+[i1!]+g+[e3]+r/i,\n  /n+[i1!]+g+[a4@]+/i,\n  /f+[a4@]+g+[o0]+t/i,\n  /f+[a4@]+g+/i,\n  /r+[e3]+t+[a4@]+r+d/i,\n  /c+[u]+n+t/i,\n  /b+[i1!]+t+c+h/i,\n  /s+h+[i1!]+t/i,\n  /f+[u]+c+k/i,\n  /a+s+s+h+[o0]+l+[e3]/i,\n  /w+h+[o0]+r+[e3]/i,\n  /s+l+[u]+t/i,\n  /d+[i1!]+c+k/i,\n  /c+[o0]+c+k/i,\n  /p+[u]+s+s+y/i,\n  /k+[i1!]+k+[e3]/i,\n  /s+p+[i1!]+c/i,\n  /c+h+[i1!]+n+k/i,\n  /g+[o0]+[o0]+k/i,\n  /t+r+[a4@]+n+n+y/i\n];\n\nfunction containsProfanity(text) {\n  if (!text) return false;\n\n  let normalized = text.toLowerCase();\n  normalized = normalized\n    .replace(/0/g, 'o')\n    .replace(/1/g, 'i')\n    .replace(/3/g, 'e')\n    .replace(/4/g, 'a')\n    .replace(/5/g, 's')\n    .replace(/7/g, 't')\n    .replace(/@/g, 'a')\n    .replace(/\\$/g, 's')\n    .replace(/\\!/g, 'i')\n    .replace(/\\|/g, 'i');\n\n  const fullyStripped = normalized.replace(/[^a-z]/g, '');\n\n  for (const blocked of BLOCKED_WORDS) {\n    if (fullyStripped.includes(blocked)) {\n      return true;\n    }\n  }\n\n  for (const pattern of SLUR_PATTERNS) {\n    if (pattern.test(text) || pattern.test(normalized) || pattern.test(fullyStripped)) {\n      return true;\n    }\n  }\n\n  const words = normalized.split(/[\\s.,!?;:'\"()\\-\\[\\]{}|\\\\/<>_]+/);\n\n  for (const word of words) {\n    const cleanWord = word.replace(/[^a-z]/g, '');\n    if (cleanWord.length >= 2 && BLOCKED_WORDS.includes(cleanWord)) {\n      return true;\n    }\n\n    for (const blocked of BLOCKED_WORDS) {\n      if (blocked.length >= 4 && cleanWord.length >= 4) {\n        if (cleanWord.includes(blocked) || blocked.includes(cleanWord)) {\n          return true;\n        }\n      }\n    }\n  }\n\n  return false;\n}\n\n// --- Supabase Client ---\nfunction initSupabase() {\n  if (window.MindBalanceAuth && window.MindBalanceAuth.getSupabase) {\n    sb = window.MindBalanceAuth.getSupabase();\n  }\n\n  if (!sb && typeof supabase !== 'undefined') {\n    const SUPABASE_URL = \"https://cxjqessxarjayqxvhnhs.supabase.co\";\n    const SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4anFlc3N4YXJqYXlxeHZobmhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwMjQwOTEsImV4cCI6MjA4MzYwMDA5MX0.SUI4sPOSPxDiGwqwQr19UOKtbK7KmjMqkX6HUT6-yps\";\n    sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n  }\n  return sb;\n}\n\n// --- Authentication ---\nasync function checkAuth() {\n  const client = initSupabase();\n  if (!client) return null;\n\n  const { data } = await client.auth.getSession();\n  currentUser = data?.session?.user || null;\n  return currentUser;\n}\n\n// --- UI Updates ---\nfunction updateCommunityUI(user) {\n  currentUser = user;\n\n  const authPill = document.getElementById('authStatusPill');\n  const avatarCircle = document.getElementById('avatarCircle');\n  const postText = document.getElementById('postText');\n  const postBtn = document.getElementById('postBtn');\n  const sidebarSignIn = document.querySelector('.mb-navLink[href=\"../auth/\"]');\n\n  if (user) {\n\n    loadNotificationCount();\n\n    if (authPill) {\n      authPill.textContent = 'Signed in';\n      authPill.style.background = '#dcfce7';\n      authPill.style.color = '#166534';\n    }\n\n    const userName = user.email ? user.email.split('@')[0] : 'User';\n    const sidebarUserCard = document.getElementById('sidebarUserCard');\n    const sidebarUserName = document.getElementById('sidebarUserName');\n    const sidebarUserAvatar = document.getElementById('sidebarUserAvatar');\n    if (sidebarUserCard) {\n      sidebarUserCard.style.display = 'flex';\n      if (sidebarUserName) sidebarUserName.textContent = userName || 'User';\n    }\n\n    const initials = user.email ? user.email.substring(0, 2).toUpperCase() : 'ME';\n\n    fetchUserProfile(user.id).then(function(profile) {\n      if (profile && profile.avatar_url) {\n        if (avatarCircle) {\n          avatarCircle.innerHTML = '<img src=\"' + profile.avatar_url + '\" alt=\"Avatar\" style=\"width:100%;height:100%;object-fit:cover;border-radius:50%;\" onerror=\"this.parentElement.textContent=\\'' + initials + '\\'\">';\n          avatarCircle.style.background = 'transparent';\n          avatarCircle.style.padding = '0';\n          avatarCircle.style.overflow = 'hidden';\n        }\n        if (sidebarUserAvatar) {\n          sidebarUserAvatar.innerHTML = '<img src=\"' + profile.avatar_url + '\" alt=\"Avatar\" style=\"width:100%;height:100%;object-fit:cover;border-radius:50%;\" onerror=\"this.parentElement.textContent=\\'' + initials + '\\'\">';\n          sidebarUserAvatar.style.background = 'transparent';\n          sidebarUserAvatar.style.padding = '0';\n          sidebarUserAvatar.style.overflow = 'hidden';\n        }\n      } else {\n        if (avatarCircle) {\n          avatarCircle.textContent = initials;\n          avatarCircle.style.background = '#3b82f6';\n        }\n        if (sidebarUserAvatar) {\n          const sideInitials = (userName || 'U').split(' ').map(w => w[0]).join('').substring(0,2).toUpperCase();\n          sidebarUserAvatar.textContent = sideInitials;\n        }\n      }\n    });\n\n\n    if (postText) {\n      postText.disabled = false;\n      postText.placeholder = getTranslation('community_share_placeholder', \"What's on your mind? Share with the community...\");\n    }\n\n    if (postBtn) {\n      postBtn.disabled = false;\n    }\n\n    if (sidebarSignIn) {\n      sidebarSignIn.textContent = 'Signed in as ' + user.email.split('@')[0];\n      sidebarSignIn.style.color = '#166534';\n    }\n\n    const welcomeCard = document.getElementById('welcomeCard');\n    if (welcomeCard) welcomeCard.style.display = 'none';\n\n    enableInteractions();\n    updateDeleteButtons();\n  } else {\n    if (authPill) {\n      authPill.textContent = 'Guest mode';\n      authPill.style.background = '';\n      authPill.style.color = '';\n    }\n\n    const sidebarUserCardGuest = document.getElementById('sidebarUserCard');\n    if (sidebarUserCardGuest) {\n      sidebarUserCardGuest.style.display = 'none';\n    }\n\n    if (avatarCircle) {\n      avatarCircle.textContent = 'MB';\n      avatarCircle.style.background = '';\n    }\n\n    if (postText) {\n      postText.disabled = true;\n      postText.placeholder = getTranslation('community_signin_placeholder', 'Sign in to share an update...');\n    }\n\n    if (postBtn) {\n      postBtn.disabled = true;\n    }\n\n    if (sidebarSignIn) {\n      sidebarSignIn.textContent = 'Sign in / Register';\n      sidebarSignIn.style.color = '';\n    }\n\n    const welcomeCard = document.getElementById('welcomeCard');\n    if (welcomeCard) welcomeCard.style.display = '';\n\n    enableInteractions();\n    hideDeleteButtons();\n  }\n}\n\n// --- Permissions ---\nfunction isAdmin() {\n  return currentUser && currentUser.email === ADMIN_EMAIL;\n}\n\nfunction canDeletePost(postEmail) {\n  if (!currentUser) return false;\n  return currentUser.email === postEmail || isAdmin();\n}\n\nfunction updateDeleteButtons() {\n  if (!currentUser) return;\n\n  const posts = document.querySelectorAll('.mb-post[data-email]');\n  posts.forEach(post => {\n    const postEmail = post.getAttribute('data-email');\n    const canDelete = canDeletePost(postEmail);\n    let deleteBtn = post.querySelector('.mb-deleteBtn');\n\n    if (canDelete && !deleteBtn) {\n      const footer = post.querySelector('.mb-postFooter');\n      if (footer) {\n        deleteBtn = document.createElement('button');\n        deleteBtn.className = 'mb-btn mb-deleteBtn';\n        deleteBtn.type = 'button';\n        deleteBtn.textContent = 'Delete';\n        deleteBtn.style.marginLeft = 'auto';\n        deleteBtn.style.color = '#dc2626';\n        deleteBtn.addEventListener('click', () => handleDelete(post));\n        footer.appendChild(deleteBtn);\n      }\n    }\n  });\n}\n\nfunction hideDeleteButtons() {\n  const deleteBtns = document.querySelectorAll('.mb-deleteBtn');\n  deleteBtns.forEach(btn => btn.remove());\n}\n\n// --- Post Management ---\nasync function handleDelete(postElement) {\n  const postId = postElement.getAttribute('data-id');\n\n  if (!currentUser) {\n    alert('You must be signed in to delete posts.');\n    return;\n  }\n\n  if (!confirm('Are you sure you want to delete this post? This cannot be undone.')) {\n    return;\n  }\n\n  const client = initSupabase();\n  if (client) {\n    const { error } = await client\n      .from('posts')\n      .delete()\n      .eq('id', postId);\n\n    if (error) {\n      console.error('Error deleting post:', error);\n      alert('Failed to delete post. Please try again.');\n      return;\n    }\n  }\n\n\n  renderedPostIds.delete(postId);\n\n  postElement.style.transition = 'opacity 0.3s, transform 0.3s';\n  postElement.style.opacity = '0';\n  postElement.style.transform = 'translateX(-20px)';\n\n  setTimeout(() => {\n    postElement.remove();\n  }, 300);\n}\n\n// --- Interactions ---\nfunction enableInteractions() {\n  const posts = document.querySelectorAll('.mb-post');\n  posts.forEach(post => {\n\n    const likeBtn = post.querySelector('.mb-likeBtn');\n    if (likeBtn && !likeBtn.dataset.bound) {\n      likeBtn.dataset.bound = 'true';\n      likeBtn.addEventListener('click', handleLike);\n    }\n\n\n    const commentBtn = post.querySelector('.mb-commentBtn');\n    if (commentBtn && !commentBtn.dataset.bound) {\n      commentBtn.dataset.bound = 'true';\n      commentBtn.addEventListener('click', handleComment);\n    }\n\n\n    const shareBtn = post.querySelector('.mb-shareBtn');\n    if (shareBtn && !shareBtn.dataset.bound) {\n      shareBtn.dataset.bound = 'true';\n      shareBtn.addEventListener('click', handleShare);\n    }\n\n\n    const reportBtn = post.querySelector('.mb-reportBtn');\n    if (reportBtn && !reportBtn.dataset.bound) {\n      reportBtn.dataset.bound = 'true';\n      reportBtn.addEventListener('click', handleReport);\n    }\n\n\n    const editBtn = post.querySelector('.mb-editBtn');\n    if (editBtn && !editBtn.dataset.bound) {\n      editBtn.dataset.bound = 'true';\n      editBtn.addEventListener('click', handleEdit);\n    }\n\n\n    const buttons = post.querySelectorAll('.mb-btn:not(.mb-likeBtn):not(.mb-commentBtn):not(.mb-shareBtn):not(.mb-reportBtn):not(.mb-editBtn):not(.mb-deleteBtn)');\n    buttons.forEach(btn => {\n      if (btn.textContent.includes('Like') && !btn.dataset.bound) {\n        btn.classList.add('mb-likeBtn');\n        btn.dataset.bound = 'true';\n        btn.addEventListener('click', handleLike);\n      } else if (btn.textContent.includes('Comment') && !btn.dataset.bound) {\n        btn.classList.add('mb-commentBtn');\n        btn.dataset.bound = 'true';\n        btn.addEventListener('click', handleComment);\n      } else if (btn.textContent.includes('Share') && !btn.dataset.bound) {\n        btn.classList.add('mb-shareBtn');\n        btn.dataset.bound = 'true';\n        btn.addEventListener('click', handleShare);\n      }\n    });\n  });\n}\n\nasync function handleShare(e) {\n  const post = e.target.closest('.mb-post');\n  const postId = post.getAttribute('data-id');\n  const postContent = post.getAttribute('data-text') || '';\n  const shareUrl = `${window.location.origin}${window.location.pathname}#post-${postId}`;\n\n  const shareData = {\n    title: 'MindBalance Community Post',\n    text: postContent.substring(0, 100) + (postContent.length > 100 ? '...' : ''),\n    url: shareUrl\n  };\n\n  if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {\n    try {\n      await navigator.share(shareData);\n    } catch (err) {\n      if (err.name !== 'AbortError') {\n        copyToClipboard(shareUrl);\n      }\n    }\n  } else {\n    copyToClipboard(shareUrl);\n  }\n}\n\nfunction copyToClipboard(text) {\n  navigator.clipboard.writeText(text).then(() => {\n    const toast = document.createElement('div');\n    toast.textContent = 'Link copied to clipboard!';\n    toast.style.cssText = `\n      position: fixed;\n      bottom: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: #252542;\n      color: #fff;\n      padding: 12px 24px;\n      border-radius: 8px;\n      font-size: 14px;\n      z-index: 9999;\n      animation: fadeInOut 2s ease-in-out;\n    `;\n    document.body.appendChild(toast);\n    setTimeout(() => toast.remove(), 2000);\n  }).catch(() => {\n    alert('Failed to copy link. The URL is: ' + text);\n  });\n}\n\nasync function handleLike(e) {\n  if (!currentUser) {\n    alert('Please sign in to like posts');\n    return;\n  }\n\n  const btn = e.currentTarget || e.target.closest('.mb-likeBtn, .mb-btn');\n  const post = btn.closest('.mb-post');\n  const postId = post.getAttribute('data-id');\n  const client = initSupabase();\n\n  if (!client || !btn) return;\n\n\n  if (btn.dataset.processing === 'true') return;\n  btn.dataset.processing = 'true';\n\n  let likeCountSpan = btn.querySelector('.like-count');\n  const currentCount = parseInt(likeCountSpan?.textContent) || 0;\n\n  const heartIcon = btn.querySelector('.heart-icon');\n  const chosenEmoji = heartIcon ? heartIcon.textContent : 'â™¡';\n\n  if (btn.dataset.liked === 'true') {\n\n    const { error } = await client\n      .from('post_likes')\n      .delete()\n      .eq('post_id', postId)\n      .eq('user_id', currentUser.id);\n\n    if (!error) {\n      btn.dataset.liked = 'false';\n      const newCount = currentCount - 1;\n      if (heartIcon) heartIcon.textContent = 'â™¡';\n      if (likeCountSpan) likeCountSpan.textContent = newCount > 0 ? newCount : '';\n      btn.classList.remove('like-animating');\n\n      try {\n        await client.from('posts').update({ like_count: Math.max(0, newCount) }).eq('id', postId);\n      } catch (updateErr) {\n        console.warn('Failed to update like_count:', updateErr);\n      }\n    }\n  } else {\n\n    const { error } = await client\n      .from('post_likes')\n      .insert({ post_id: postId, user_id: currentUser.id });\n\n    if (!error) {\n      btn.dataset.liked = 'true';\n      const newCount = currentCount + 1;\n      if (heartIcon) heartIcon.textContent = chosenEmoji === 'â™¡' ? 'â™¥' : chosenEmoji;\n      if (likeCountSpan) likeCountSpan.textContent = newCount > 0 ? newCount : '';\n\n      btn.classList.add('like-animating');\n      setTimeout(() => btn.classList.remove('like-animating'), 400);\n\n      const pop = document.createElement('span');\n      pop.className = 'like-pop';\n      pop.textContent = '+1';\n      btn.appendChild(pop);\n      setTimeout(() => pop.remove(), 600);\n\n      try {\n        await client.from('posts').update({ like_count: newCount }).eq('id', postId);\n      } catch (updateErr) {\n        console.warn('Failed to update like_count:', updateErr);\n      }\n\n      const postAuthorId = post.getAttribute('data-author-id');\n      if (postAuthorId && postAuthorId !== currentUser.id) {\n        const fromName = currentUser.user_metadata?.display_name || currentUser.email?.split('@')[0] || 'Someone';\n        try {\n          await client.from('notifications').insert({\n            user_id: postAuthorId,\n            type: 'like',\n            from_user_name: fromName,\n            post_id: postId,\n            content: `${fromName} liked your post`,\n            read: false\n          });\n        } catch (notifErr) {\n          console.warn('Failed to create like notification:', notifErr);\n        }\n      }\n    }\n  }\n\n  btn.dataset.processing = 'false';\n}\n\nasync function handleEdit(e) {\n  if (!currentUser) return;\n\n  const post = e.target.closest('.mb-post');\n  const postEmail = post.getAttribute('data-email');\n\n\n  if (currentUser.email !== postEmail) return;\n\n  const postBody = post.querySelector('.mb-postBody');\n  const originalContent = post.getAttribute('data-text');\n  const wasEdited = post.dataset.edited === 'true' || postBody.querySelector('.mb-edited-tag') !== null;\n\n\n  if (wasEdited) post.dataset.edited = 'true';\n\n\n  if (post.querySelector('.mb-editTextarea')) return;\n\n\n  const editHTML = `\n    <textarea class=\"mb-editTextarea\"></textarea>\n    <div class=\"mb-editActions\">\n      <button class=\"mb-btn mb-saveBtn\" type=\"button\">Save</button>\n      <button class=\"mb-btn mb-cancelBtn\" type=\"button\">Cancel</button>\n    </div>\n  `;\n\n  postBody.innerHTML = editHTML;\n\n  const textarea = postBody.querySelector('.mb-editTextarea');\n  const saveBtn = postBody.querySelector('.mb-saveBtn');\n  const cancelBtn = postBody.querySelector('.mb-cancelBtn');\n\n\n  textarea.value = originalContent;\n  textarea.focus();\n  textarea.setSelectionRange(textarea.value.length, textarea.value.length);\n\n  cancelBtn.addEventListener('click', () => {\n\n    const editedSuffix = post.dataset.edited === 'true' ? ' <span class=\"mb-edited-tag\">(edited)</span>' : '';\n    postBody.innerHTML = escapeHtml(originalContent) + editedSuffix;\n  });\n\n  saveBtn.addEventListener('click', async () => {\n    const newContent = textarea.value.trim();\n\n    if (!newContent) {\n      alert('Post content cannot be empty.');\n      return;\n    }\n\n    if (containsProfanity(newContent)) {\n      alert('Your post contains inappropriate language. Please revise and try again.');\n      return;\n    }\n\n    if (newContent === originalContent) {\n      postBody.innerHTML = escapeHtml(originalContent);\n      return;\n    }\n\n    const client = initSupabase();\n    const postId = post.getAttribute('data-id');\n\n    const { error } = await client\n      .from('posts')\n      .update({ content: newContent, edited_at: new Date().toISOString() })\n      .eq('id', postId)\n      .eq('author_email', currentUser.email);\n\n    if (error) {\n      alert('Failed to save changes. Please try again.');\n      return;\n    }\n\n    post.setAttribute('data-text', newContent);\n    postBody.innerHTML = escapeHtml(newContent) + ' <span class=\"mb-edited-tag\">(edited)</span>';\n  });\n}\n\n// --- Reporting ---\nfunction showReportModal(postId) {\n\n  const existingModal = document.querySelector('.mb-reportModal');\n  if (existingModal) existingModal.remove();\n\n  const modal = document.createElement('div');\n  modal.className = 'mb-reportModal';\n  modal.innerHTML = `\n    <div class=\"mb-reportModalContent\">\n      <div class=\"mb-reportModalTitle\">${getTranslation('community_report_title', 'Report this post')}</div>\n      <div class=\"mb-reportOptions\">\n        <label class=\"mb-reportOption\">\n          <input type=\"radio\" name=\"reportReason\" value=\"spam\">\n          <span>${getTranslation('community_report_spam', 'Spam or misleading')}</span>\n        </label>\n        <label class=\"mb-reportOption\">\n          <input type=\"radio\" name=\"reportReason\" value=\"harassment\">\n          <span>${getTranslation('community_report_harassment', 'Harassment or bullying')}</span>\n        </label>\n        <label class=\"mb-reportOption\">\n          <input type=\"radio\" name=\"reportReason\" value=\"inappropriate\">\n          <span>${getTranslation('community_report_inappropriate', 'Inappropriate content')}</span>\n        </label>\n        <label class=\"mb-reportOption\">\n          <input type=\"radio\" name=\"reportReason\" value=\"self-harm\">\n          <span>${getTranslation('community_report_self_harm', 'Self-harm or dangerous content')}</span>\n        </label>\n        <label class=\"mb-reportOption\">\n          <input type=\"radio\" name=\"reportReason\" value=\"other\">\n          <span>${getTranslation('community_report_other', 'Other')}</span>\n        </label>\n      </div>\n      <div class=\"mb-reportModalActions\">\n        <button class=\"mb-btn mb-cancelReportBtn\" type=\"button\">${getTranslation('community_cancel', 'Cancel')}</button>\n        <button class=\"mb-btn mb-submitReportBtn\" type=\"button\" disabled>${getTranslation('community_submit_report', 'Submit Report')}</button>\n      </div>\n    </div>\n  `;\n\n  document.body.appendChild(modal);\n\n\n  requestAnimationFrame(() => modal.classList.add('is-active'));\n\n  const submitBtn = modal.querySelector('.mb-submitReportBtn');\n  const cancelBtn = modal.querySelector('.mb-cancelReportBtn');\n  const radios = modal.querySelectorAll('input[name=\"reportReason\"]');\n\n  radios.forEach(radio => {\n    radio.addEventListener('change', () => {\n      submitBtn.disabled = false;\n    });\n  });\n\n  cancelBtn.addEventListener('click', () => {\n    modal.classList.remove('is-active');\n    setTimeout(() => modal.remove(), 200);\n  });\n\n  modal.addEventListener('click', (e) => {\n    if (e.target === modal) {\n      modal.classList.remove('is-active');\n      setTimeout(() => modal.remove(), 200);\n    }\n  });\n\n  submitBtn.addEventListener('click', async () => {\n    const selectedReason = modal.querySelector('input[name=\"reportReason\"]:checked');\n    if (!selectedReason || !currentUser) return;\n\n    submitBtn.disabled = true;\n    submitBtn.textContent = 'Submitting...';\n\n    const client = initSupabase();\n\n    const { error } = await client\n      .from('post_reports')\n      .insert({\n        post_id: postId,\n        reporter_id: currentUser.id,\n        reporter_email: currentUser.email,\n        reason: selectedReason.value\n      });\n\n    if (error) {\n      console.error('Report error:', error);\n      if (error.message?.includes('does not exist') || error.code === '42P01') {\n        alert('Report system needs setup. Please run supabase-setup.sql in your Supabase SQL Editor.');\n      } else if (error.message?.includes('duplicate') || error.code === '23505') {\n        alert('You have already reported this post.');\n      } else if (error.message?.includes('violates row-level security') || error.code === '42501') {\n        alert('Permission denied. Please make sure you are signed in and the database is properly configured.');\n      } else {\n        alert('Failed to submit report: ' + (error.message || 'Unknown error'));\n      }\n      submitBtn.disabled = false;\n      submitBtn.textContent = 'Submit Report';\n      return;\n    }\n\n    modal.classList.remove('is-active');\n    setTimeout(() => modal.remove(), 200);\n\n\n    const toast = document.createElement('div');\n    toast.textContent = 'Report submitted. Thank you for helping keep the community safe.';\n    toast.style.cssText = `\n      position: fixed;\n      bottom: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: #27ae60;\n      color: #fff;\n      padding: 12px 24px;\n      border-radius: 8px;\n      font-size: 14px;\n      z-index: 9999;\n    `;\n    document.body.appendChild(toast);\n    setTimeout(() => toast.remove(), 3000);\n  });\n}\n\nasync function handleReport(e) {\n  if (!currentUser) {\n    alert('Please sign in to report posts');\n    return;\n  }\n\n  const post = e.target.closest('.mb-post');\n  const postId = post.getAttribute('data-id');\n\n  showReportModal(postId);\n}\n\n// --- Comments ---\nasync function handleComment(e) {\n  const post = e.target.closest('.mb-post');\n  const postId = post.getAttribute('data-id');\n  let commentBox = post.querySelector('.mb-commentBox');\n\n  if (!commentBox) {\n    commentBox = document.createElement('div');\n    commentBox.className = 'mb-commentBox';\n\n\n    const inputHtml = currentUser ? `\n      <div class=\"mb-commentInputRow\">\n        <input type=\"text\" class=\"mb-commentInput\" placeholder=\"Write a comment...\" />\n        <button class=\"mb-btn mb-btnPrimary mb-sendBtn\" type=\"button\">Send</button>\n      </div>\n    ` : `\n      <div class=\"mb-commentInputRow mb-guestPrompt\" style=\"padding: 10px; background: rgba(0,0,0,0.03); border-radius: 8px; text-align: center; color: #666;\">\n        <a href=\"../auth/\" style=\"color: #3b82f6; text-decoration: underline;\">Sign in</a> to leave a comment\n      </div>\n    `;\n\n    commentBox.innerHTML = `\n      ${inputHtml}\n      <div class=\"mb-comments\"></div>\n    `;\n    post.appendChild(commentBox);\n\n\n    await loadComments(postId, commentBox.querySelector('.mb-comments'));\n\n\n    if (currentUser) {\n      const sendBtn = commentBox.querySelector('.mb-btnPrimary');\n      const input = commentBox.querySelector('.mb-commentInput');\n\n\n      input.addEventListener('input', handleMentionInput);\n      input.addEventListener('keydown', handleMentionKeydown);\n\n      sendBtn.addEventListener('click', async () => {\n        const text = input.value.trim();\n        if (!text) return;\n\n        if (containsProfanity(text)) {\n          alert('Your comment contains inappropriate language. Please revise and try again.');\n          return;\n        }\n\n        if (text && currentUser) {\n          const client = initSupabase();\n          if (!client) return;\n\n          const { data, error } = await client\n            .from('post_comments')\n            .insert({\n              post_id: postId,\n              author_id: currentUser.id,\n              author_email: currentUser.email,\n              author_name: currentUser.email.split('@')[0],\n              content: text\n            })\n            .select()\n            .single();\n\n          if (!error && data) {\n            const commentsContainer = commentBox.querySelector('.mb-comments');\n            const comment = createCommentElement(data);\n            commentsContainer.appendChild(comment);\n            input.value = '';\n\n            const commentBtn = post.querySelector('.mb-postFooter .mb-btn:nth-child(2)');\n            if (commentBtn) {\n              const currentCount = parseInt(commentBtn.textContent.match(/\\d+/)?.[0] || '0');\n              commentBtn.textContent = `Comment (${currentCount + 1})`;\n            }\n\n            const postAuthorId = post.getAttribute('data-author-id');\n            if (postAuthorId && postAuthorId !== currentUser.id) {\n              const fromName = currentUser.user_metadata?.display_name || currentUser.email?.split('@')[0] || 'Someone';\n              try {\n                await client.from('notifications').insert({\n                  user_id: postAuthorId,\n                  type: 'comment',\n                  from_user_name: fromName,\n                  post_id: postId,\n                  content: `${fromName} commented on your post`,\n                  read: false\n                });\n              } catch (notifErr) {\n                console.warn('Failed to create comment notification:', notifErr);\n              }\n            }\n\n            processMentions(text, postId, data.id);\n          }\n        }\n      });\n\n      input.addEventListener('keypress', (e) => {\n        if (e.key === 'Enter') {\n          sendBtn.click();\n        }\n      });\n    }\n  } else {\n    commentBox.style.display = commentBox.style.display === 'none' ? 'block' : 'none';\n  }\n}\n\nasync function loadComments(postId, container) {\n  const client = initSupabase();\n  if (!client) return;\n\n  const { data, error } = await client\n    .from('post_comments')\n    .select('*')\n    .eq('post_id', postId)\n    .order('created_at', { ascending: true });\n\n  if (!error && data) {\n    const authorIds = [...new Set(data.filter(c => c.author_id).map(c => c.author_id))];\n    if (authorIds.length > 0) {\n      try {\n        const { data: profiles } = await client\n          .from('profiles')\n          .select('id, avatar_url, display_name')\n          .in('id', authorIds);\n        if (profiles) {\n          profiles.forEach(p => {\n            profileCache[p.id] = p;\n          });\n          data.forEach(comment => {\n            if (comment.author_id && profileCache[comment.author_id]) {\n              comment.avatar_url = profileCache[comment.author_id].avatar_url;\n              if (!comment.author_name && profileCache[comment.author_id].display_name) {\n                comment.author_name = profileCache[comment.author_id].display_name;\n              }\n            }\n          });\n        }\n      } catch (e) {\n        console.warn('Could not fetch comment author profiles:', e);\n      }\n    }\n    data.forEach(comment => {\n      container.appendChild(createCommentElement(comment));\n    });\n  }\n}\n\nasync function deleteComment(commentId, commentEl) {\n  if (!currentUser) return;\n  if (!confirm('Delete this comment?')) return;\n\n  const client = initSupabase();\n  if (!client) return;\n\n  const { error } = await client\n    .from('post_comments')\n    .delete()\n    .eq('id', commentId)\n    .eq('author_id', currentUser.id);\n\n  if (!error) {\n    commentEl.style.transition = 'opacity 0.3s, transform 0.3s';\n    commentEl.style.opacity = '0';\n    commentEl.style.transform = 'translateX(10px)';\n    setTimeout(() => {\n      commentEl.remove();\n      const post = commentEl.closest('.mb-post');\n      if (post) {\n        const commentBtn = post.querySelector('.mb-postFooter .mb-btn:nth-child(2)');\n        if (commentBtn) {\n          const currentCount = parseInt(commentBtn.textContent.match(/\\d+/)?.[0] || '1');\n          commentBtn.textContent = `Comment (${Math.max(0, currentCount - 1)})`;\n        }\n      }\n    }, 300);\n  } else {\n    console.error('Error deleting comment:', error);\n  }\n}\n\nfunction createCommentElement(commentData) {\n  const comment = document.createElement('div');\n  comment.className = 'mb-comment';\n  comment.setAttribute('data-comment-id', commentData.id);\n\n  const isTeamComment = !commentData.author_id;\n  const displayName = commentData.author_name || (isTeamComment ? 'MindBalance Team' : 'Anonymous');\n\n  const avatarColors = ['#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899', '#06b6d4', '#84cc16'];\n  const colorIndex = (commentData.author_id || '').split('').reduce((acc, c) => acc + c.charCodeAt(0), 0) % avatarColors.length;\n  const initials = displayName.split(' ').map(w => w[0]).join('').substring(0, 2).toUpperCase();\n\n  let avatarHtml;\n  if (isTeamComment) {\n    avatarHtml = '<div class=\"mb-commentAvatar mb-commentAvatar--team\">MB</div>';\n  } else if (commentData.avatar_url) {\n    avatarHtml = `<div class=\"mb-commentAvatar\"><img src=\"${escapeHtml(commentData.avatar_url)}\" alt=\"${escapeHtml(displayName)}\" /></div>`;\n  } else {\n    avatarHtml = `<div class=\"mb-commentAvatar\" style=\"background: ${avatarColors[colorIndex]}; color: #fff;\">${initials}</div>`;\n  }\n\n  const level = isTeamComment ? null : getUserLevel(commentData.author_id || displayName);\n  const levelBadgeHtml = level ? `<span class=\"mb-levelBadge mb-levelBadge--sm ${level.cls}\">${level.label}</span>` : '';\n  const teamBadgeHtml = isTeamComment ? '<span class=\"mb-teamBadge\">Team</span>' : '';\n\n  let authorHtml;\n  if (commentData.author_id) {\n    authorHtml = `<a href=\"/profile/?user=${commentData.author_id}\" class=\"mb-commentAuthorLink\">${escapeHtml(displayName)}</a>`;\n  } else {\n    authorHtml = `<span class=\"mb-commentAuthorName--team\">${escapeHtml(displayName)}</span>`;\n  }\n\n  const timeStr = commentData.created_at ? formatTime(commentData.created_at) : '';\n\n  const isOwnComment = currentUser && commentData.author_id === currentUser.id;\n  const deleteHtml = isOwnComment ? `<button class=\"mb-commentDeleteBtn\" title=\"Delete comment\"><ion-icon name=\"trash-outline\"></ion-icon></button>` : '';\n\n  comment.innerHTML = `\n    <div class=\"mb-commentLeft\">\n      ${avatarHtml}\n    </div>\n    <div class=\"mb-commentRight\">\n      <div class=\"mb-commentHeader\">\n        <div class=\"mb-commentMeta\">\n          ${authorHtml} ${teamBadgeHtml} ${levelBadgeHtml}\n          <span class=\"mb-commentTime\">${timeStr}</span>\n        </div>\n        ${deleteHtml}\n      </div>\n      <div class=\"mb-commentBody\">${escapeHtml(commentData.content)}</div>\n    </div>\n  `;\n\n  if (isOwnComment) {\n    const deleteBtn = comment.querySelector('.mb-commentDeleteBtn');\n    if (deleteBtn) {\n      deleteBtn.addEventListener('click', () => deleteComment(commentData.id, comment));\n    }\n  }\n\n  return comment;\n}\n\n// --- HTML Escaping ---\nfunction escapeHtml(text) {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n// --- Post Creation ---\nasync function handlePost() {\n  const postText = document.getElementById('postText');\n  const feedList = document.getElementById('feedList');\n  const text = postText.value.trim();\n\n  if (!text || !currentUser) return;\n\n  if (containsProfanity(text)) {\n    alert('Your post contains inappropriate language. Please revise and try again.');\n    return;\n  }\n\n  const client = initSupabase();\n  if (!client) {\n    alert('Unable to connect. Please try again.');\n    return;\n  }\n\n  const userName = currentUser.email.split('@')[0];\n\n  const categorySelect = document.getElementById('postCategory');\n  const category = categorySelect ? categorySelect.value : '';\n  const fullContent = category ? `[${category}] ${text}` : text;\n\n  let uploadedMediaUrl = null;\n  if (selectedMediaFile) {\n    const fileExt = selectedMediaFile.name.split('.').pop();\n    const fileName = `${generateUUID()}.${fileExt}`;\n    const filePath = `posts/${currentUser.id}/${fileName}`;\n\n    const { data: uploadData, error: uploadError } = await client.storage\n      .from('Post-Media')\n      .upload(filePath, selectedMediaFile);\n\n    if (uploadError) {\n      console.error('Media upload error:', uploadError);\n\n      if (uploadError.message?.includes('bucket') || uploadError.message?.includes('not found')) {\n        alert('Media upload requires storage setup. Please create a \"Post-Media\" bucket in Supabase Storage. Your post will be created without the image.');\n      } else {\n        alert('Image upload failed: ' + (uploadError.message || 'Unknown error') + '. Your post will be created without the image.');\n      }\n\n      clearMediaPreview();\n    } else {\n      const { data: { publicUrl } } = client.storage\n        .from('Post-Media')\n        .getPublicUrl(filePath);\n      uploadedMediaUrl = publicUrl;\n    }\n  }\n\n\n  const placeholderId = generateUUID();\n  const placeholder = document.createElement('article');\n  placeholder.className = 'mb-post mb-post-pending card-animated hover-lift';\n  placeholder.setAttribute('data-placeholder-id', placeholderId);\n  placeholder.style.opacity = '0.6';\n  const mediaPreviewHtml = uploadedMediaUrl ? `<div class=\"mb-postMedia\"><img src=\"${uploadedMediaUrl}\" alt=\"Post media\" /></div>` : '';\n  placeholder.innerHTML = `\n    <div class=\"mb-postHead\">\n      <div class=\"mb-postMeta\">\n        <div class=\"mb-postName\">${escapeHtml(userName)} <span class=\"mb-pill\">Community</span></div>\n        <div class=\"mb-postTime\">Posting...</div>\n      </div>\n    </div>\n    <div class=\"mb-postBody\">${escapeHtml(text)}</div>\n    ${mediaPreviewHtml}\n    <div class=\"mb-postFooter\">\n      <button class=\"mb-btn\" type=\"button\" disabled>Like</button>\n      <button class=\"mb-btn\" type=\"button\" disabled>Comment</button>\n      <button class=\"mb-btn\" type=\"button\" disabled>Share</button>\n    </div>\n  `;\n  feedList.insertBefore(placeholder, feedList.firstChild);\n  postText.value = '';\n  clearMediaPreview();\n\n  const { data, error } = await client\n    .from('posts')\n    .insert({\n      author_id: currentUser.id,\n      author_email: currentUser.email,\n      author_name: userName,\n      content: fullContent,\n      media_url: uploadedMediaUrl\n    })\n    .select()\n    .single();\n\n  if (error) {\n    console.error('Error creating post:', error.message || error);\n    console.error('Full error details:', JSON.stringify(error, null, 2));\n    placeholder.remove();\n    if (error.message && error.message.includes('does not exist')) {\n      alert('The forum database needs to be set up. Please run the supabase-setup.sql script in your Supabase SQL Editor.');\n    } else {\n      alert('Failed to create post: ' + (error.message || 'Unknown error'));\n    }\n    return;\n  }\n\n\n  recentlyPostedIds.add(data.id);\n  suppressRealtimeUntil = Date.now() + 1000;\n\n\n  setTimeout(() => recentlyPostedIds.delete(data.id), 10000);\n\n\n  placeholder.remove();\n\n\n  if (!renderedPostIds.has(data.id)) {\n    renderedPostIds.add(data.id);\n    const userProfile = await fetchUserProfile(currentUser.id);\n    if (userProfile && userProfile.avatar_url) {\n      data.avatar_url = userProfile.avatar_url;\n    }\n    const newPost = createPostElement(data, 'Just now');\n    feedList.insertBefore(newPost, feedList.firstChild);\n    enableInteractions();\n    updateDeleteButtons();\n  }\n\n  const hasPosted = localStorage.getItem('mb-first-post');\n  if (!hasPosted) {\n    localStorage.setItem('mb-first-post', 'true');\n    showConfetti();\n  }\n\n  if (categorySelect) categorySelect.value = '';\n\n  processMentions(text, data.id, null);\n}\n\n// --- Post Rendering ---\nfunction getUserLevel(authorId) {\n  const hash = (authorId || '').split('').reduce((a, c) => a + c.charCodeAt(0), 0);\n  const level = hash % 4;\n  if (level === 3) return { label: 'ðŸ† ' + getTranslation('community_level_champion', 'Champion'), cls: 'mb-levelBadge--champion' };\n  if (level === 2) return { label: 'ðŸ’ª ' + getTranslation('community_level_supporter', 'Supporter'), cls: 'mb-levelBadge--supporter' };\n  if (level === 1) return { label: 'ðŸ‘¤ ' + getTranslation('community_level_regular', 'Regular'), cls: 'mb-levelBadge--regular' };\n  return { label: 'ðŸŒ± ' + getTranslation('community_level_newcomer', 'Newcomer'), cls: 'mb-levelBadge--newcomer' };\n}\n\nfunction createPostElement(postData, timeStr) {\n  const article = document.createElement('article');\n  article.className = 'mb-post card-animated hover-lift' + (postData.is_pinned ? ' mb-post-pinned' : '');\n  article.setAttribute('data-text', postData.content);\n  article.setAttribute('data-id', postData.id);\n  article.setAttribute('data-email', postData.author_email);\n  article.setAttribute('data-author-id', postData.author_id || '');\n  article.setAttribute('data-pinned', postData.is_pinned ? 'true' : 'false');\n\n  const isOwnPost = currentUser && currentUser.email === postData.author_email;\n  const isAdmin = currentUser && currentUser.email === ADMIN_EMAIL;\n  const showDeleteButton = canDeletePost(postData.author_email);\n  const deleteButton = showDeleteButton\n    ? `<button class=\"mb-btn mb-deleteBtn\" type=\"button\" style=\"color: #dc2626;\">${getTranslation('community_delete', 'Delete')}</button>`\n    : '';\n  const editButton = isOwnPost\n    ? `<button class=\"mb-btn mb-editBtn\" type=\"button\">${getTranslation('community_edit', 'Edit')}</button>`\n    : '';\n  const pinButton = isAdmin\n    ? `<button class=\"mb-btn mb-pinBtn\" type=\"button\" title=\"${postData.is_pinned ? 'Unpin post' : 'Pin post'}\" data-translate=\"${postData.is_pinned ? 'community_unpin' : 'community_pin'}\">${postData.is_pinned ? 'ðŸ“Œ Unpin' : 'ðŸ“Œ Pin'}</button>`\n    : '';\n\n  const likeCount = postData.like_count || 0;\n  const commentCount = postData.comment_count || 0;\n  const isEdited = postData.edited_at ? ' <span class=\"mb-edited-tag\">(edited)</span>' : '';\n  const pinnedBadge = postData.is_pinned ? '<span class=\"mb-pinned-badge\" data-translate=\"community_pinned\">ðŸ“Œ Pinned</span>' : '';\n\n\n  const mediaHtml = postData.media_url ? `<div class=\"mb-postMedia\"><img src=\"${escapeHtml(postData.media_url)}\" alt=\"Post media\" loading=\"lazy\" /></div>` : '';\n\n\n  if (postData.edited_at) {\n    article.dataset.edited = 'true';\n  }\n\n  const displayName = postData.author_name || 'MindBalance Team';\n  const authorLink = postData.author_id\n    ? `<a href=\"/profile/?user=${postData.author_id}\" class=\"mb-postAuthorLink\">${escapeHtml(displayName)}</a>`\n    : escapeHtml(displayName);\n\n  const isTeamPost = !postData.author_id || displayName === 'MindBalance Team';\n  const initials = displayName.split(' ').map(w => w[0]).join('').substring(0, 2).toUpperCase();\n  const avatarColors = ['#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899', '#06b6d4', '#84cc16'];\n  const colorIndex = (postData.author_id || '').split('').reduce((acc, c) => acc + c.charCodeAt(0), 0) % avatarColors.length;\n  const avatarColor = avatarColors[colorIndex];\n\n  let categoryHtml = '';\n  let displayContent = postData.content;\n  const catMatch = displayContent.match(/^\\[(motivation|question|story|resource|tip)\\]\\s*/i);\n  if (catMatch) {\n    const cat = catMatch[1].toLowerCase();\n    const catEmojis = { motivation: 'ðŸ’ª', question: 'â“', story: 'ðŸ“–', resource: 'ðŸ“š', tip: 'ðŸ’¡' };\n    categoryHtml = `<span class=\"mb-categoryTag mb-categoryTag--${cat}\">${catEmojis[cat] || ''} ${cat.charAt(0).toUpperCase() + cat.slice(1)}</span>`;\n    displayContent = displayContent.replace(catMatch[0], '');\n  }\n\n  const level = isTeamPost ? null : getUserLevel(postData.author_id || displayName);\n  const levelBadgeHtml = level ? `<span class=\"mb-levelBadge ${level.cls}\">${level.label}</span>` : '';\n\n  let avatarHtml;\n  if (isTeamPost) {\n    avatarHtml = `<div class=\"mb-postAvatar mb-postAvatar--team\">MB</div>`;\n  } else if (postData.avatar_url) {\n    avatarHtml = `<div class=\"mb-postAvatar\" style=\"padding:0; overflow:hidden;\"><img src=\"${escapeHtml(postData.avatar_url)}\" alt=\"${escapeHtml(displayName)}\" style=\"width:100%; height:100%; object-fit:cover; border-radius:50%;\" /></div>`;\n  } else {\n    avatarHtml = `<div class=\"mb-postAvatar\" style=\"background: ${avatarColor}; display: grid; place-items: center; color: #fff; font-weight: 700; font-size: 15px;\">${initials}</div>`;\n  }\n\n  article.innerHTML = `\n    <div class=\"mb-postHead\">\n      ${avatarHtml}\n      <div class=\"mb-postMeta\">\n        <div class=\"mb-postName\">${authorLink} ${levelBadgeHtml} ${categoryHtml} ${pinnedBadge}</div>\n        <div class=\"mb-postTime\">${timeStr || formatTime(postData.created_at)}</div>\n      </div>\n    </div>\n    <div class=\"mb-postBody\">${escapeHtml(displayContent)}${isEdited}</div>\n    ${mediaHtml}\n    <div class=\"mb-postFooter\">\n      <div class=\"mb-reactions\">\n        <button class=\"mb-btn mb-likeBtn mb-reactionBtn--like\" type=\"button\"><span class=\"heart-icon\">â™¡</span> ${getTranslation('community_like', 'Like')} <span class=\"like-count\">${likeCount > 0 ? likeCount : ''}</span></button>\n        <div class=\"mb-reactionPicker\" style=\"display:none;\">\n          <button class=\"mb-reactionOption\" data-reaction=\"support\" title=\"${getTranslation('community_reaction_support', 'Support')}\">â¤ï¸</button>\n          <button class=\"mb-reactionOption\" data-reaction=\"insightful\" title=\"${getTranslation('community_reaction_insightful', 'Insightful')}\">ðŸ’¡</button>\n          <button class=\"mb-reactionOption\" data-reaction=\"hug\" title=\"${getTranslation('community_reaction_hug', 'Hug')}\">ðŸ¤—</button>\n          <button class=\"mb-reactionOption\" data-reaction=\"applause\" title=\"${getTranslation('community_reaction_applause', 'Applause')}\">ðŸ‘</button>\n        </div>\n      </div>\n      <button class=\"mb-btn mb-commentBtn\" type=\"button\">${getTranslation('community_comment', 'Comment')} ${commentCount > 0 ? '(' + commentCount + ')' : ''}</button>\n      <button class=\"mb-btn mb-shareBtn\" type=\"button\">${getTranslation('community_share', 'Share')}</button>\n      <button class=\"mb-btn mb-bookmarkBtn\" type=\"button\" title=\"${getTranslation('community_bookmark', 'Bookmark')}\">ðŸ”–</button>\n      ${editButton}\n      ${pinButton}\n      ${deleteButton}\n      <button class=\"mb-btn mb-reportBtn\" type=\"button\" title=\"${getTranslation('community_report', 'Report post')}\">âš‘</button>\n    </div>\n  `;\n\n\n  const likeBtn = article.querySelector('.mb-likeBtn');\n  const commentBtn = article.querySelector('.mb-commentBtn');\n  const shareBtn = article.querySelector('.mb-shareBtn');\n  const reportBtn = article.querySelector('.mb-reportBtn');\n\n  if (likeBtn) {\n    likeBtn.dataset.bound = 'true';\n    likeBtn.addEventListener('click', handleLike);\n  }\n\n  if (commentBtn) {\n    commentBtn.dataset.bound = 'true';\n    commentBtn.addEventListener('click', handleComment);\n  }\n\n  if (shareBtn) {\n    shareBtn.dataset.bound = 'true';\n    shareBtn.addEventListener('click', handleShare);\n  }\n\n  if (reportBtn) {\n    reportBtn.dataset.bound = 'true';\n    reportBtn.addEventListener('click', handleReport);\n  }\n\n  if (showDeleteButton) {\n    const deleteBtn = article.querySelector('.mb-deleteBtn');\n    if (deleteBtn) {\n      deleteBtn.addEventListener('click', () => handleDelete(article));\n    }\n  }\n\n  if (isOwnPost) {\n    const editBtn = article.querySelector('.mb-editBtn');\n    if (editBtn) {\n      editBtn.addEventListener('click', handleEdit);\n    }\n  }\n\n\n  if (isAdmin) {\n    const pinBtn = article.querySelector('.mb-pinBtn');\n    if (pinBtn) {\n      pinBtn.addEventListener('click', handlePin);\n    }\n  }\n\n  const reactionBtn = article.querySelector('.mb-reactionBtn--like');\n  const reactionPicker = article.querySelector('.mb-reactionPicker');\n  if (reactionBtn && reactionPicker) {\n    let pickerTimeout;\n    reactionBtn.addEventListener('mouseenter', () => {\n      clearTimeout(pickerTimeout);\n      reactionPicker.style.display = 'flex';\n    });\n    reactionBtn.addEventListener('mouseleave', () => {\n      pickerTimeout = setTimeout(() => { reactionPicker.style.display = 'none'; }, 400);\n    });\n    reactionPicker.addEventListener('mouseenter', () => clearTimeout(pickerTimeout));\n    reactionPicker.addEventListener('mouseleave', () => {\n      pickerTimeout = setTimeout(() => { reactionPicker.style.display = 'none'; }, 300);\n    });\n    reactionPicker.querySelectorAll('.mb-reactionOption').forEach(opt => {\n      opt.addEventListener('click', (e) => {\n        e.stopPropagation();\n        reactionBtn.querySelector('.heart-icon').textContent = opt.textContent;\n        reactionPicker.style.display = 'none';\n        if (!reactionBtn.dataset.liked || reactionBtn.dataset.liked !== 'true') {\n          reactionBtn.click();\n        }\n      });\n    });\n  }\n\n  const postBody = article.querySelector('.mb-postBody');\n  if (postBody && (displayContent || postData.content).length > 200) {\n    postBody.classList.add('mb-postBody--truncated');\n    const readMore = document.createElement('button');\n    readMore.className = 'mb-readMore';\n    readMore.textContent = 'Read more';\n    readMore.addEventListener('click', () => {\n      postBody.classList.toggle('mb-postBody--truncated');\n      readMore.textContent = postBody.classList.contains('mb-postBody--truncated') ? 'Read more' : 'Show less';\n    });\n    postBody.after(readMore);\n  }\n\n  const bookmarkBtn = article.querySelector('.mb-bookmarkBtn');\n  if (bookmarkBtn) {\n    const bookmarks = JSON.parse(localStorage.getItem('mb-bookmarks') || '[]');\n    if (bookmarks.includes(postData.id)) bookmarkBtn.classList.add('is-bookmarked');\n    bookmarkBtn.addEventListener('click', () => {\n      const bm = JSON.parse(localStorage.getItem('mb-bookmarks') || '[]');\n      const idx = bm.indexOf(postData.id);\n      if (idx > -1) { bm.splice(idx, 1); bookmarkBtn.classList.remove('is-bookmarked'); }\n      else { bm.push(postData.id); bookmarkBtn.classList.add('is-bookmarked'); }\n      localStorage.setItem('mb-bookmarks', JSON.stringify(bm));\n    });\n  }\n\n  return article;\n}\n\n// --- Pinning ---\nasync function handlePin(e) {\n  if (!currentUser || currentUser.email !== ADMIN_EMAIL) return;\n\n  const btn = e.target.closest('.mb-pinBtn');\n  const post = e.target.closest('.mb-post');\n  const postId = post.getAttribute('data-id');\n  const isPinned = post.getAttribute('data-pinned') === 'true';\n\n  btn.disabled = true;\n  btn.textContent = isPinned ? 'Unpinning...' : 'Pinning...';\n\n  const client = initSupabase();\n\n  const { error } = await client\n    .from('posts')\n    .update({\n      is_pinned: !isPinned,\n      pinned_at: isPinned ? null : new Date().toISOString()\n    })\n    .eq('id', postId);\n\n  if (error) {\n    console.error('Pin error:', error);\n    alert('Failed to ' + (isPinned ? 'unpin' : 'pin') + ' post: ' + (error.message || 'Unknown error'));\n    btn.disabled = false;\n    btn.textContent = isPinned ? 'ðŸ“Œ Unpin' : 'ðŸ“Œ Pin';\n    return;\n  }\n\n\n  post.setAttribute('data-pinned', isPinned ? 'false' : 'true');\n  btn.textContent = isPinned ? 'ðŸ“Œ Pin' : 'ðŸ“Œ Unpin';\n  btn.setAttribute('data-translate', isPinned ? 'community_pin' : 'community_unpin');\n  btn.title = isPinned ? 'Pin post' : 'Unpin post';\n  btn.disabled = false;\n\n\n  const nameDiv = post.querySelector('.mb-postName');\n  const existingBadge = nameDiv.querySelector('.mb-pinned-badge');\n\n  if (isPinned && existingBadge) {\n    existingBadge.remove();\n    post.classList.remove('mb-post-pinned');\n  } else if (!isPinned && !existingBadge) {\n    const badge = document.createElement('span');\n    badge.className = 'mb-pinned-badge';\n    badge.textContent = 'ðŸ“Œ Pinned';\n    badge.setAttribute('data-translate', 'community_pinned');\n    nameDiv.appendChild(badge);\n    post.classList.add('mb-post-pinned');\n  }\n\n\n  await loadPosts(true);\n}\n\n// --- Time Formatting ---\nfunction formatTime(isoString) {\n  const date = new Date(isoString);\n  const now = new Date();\n  const diffMs = now - date;\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMs / 3600000);\n  const diffDays = Math.floor(diffMs / 86400000);\n\n  if (diffMins < 1) return 'Just now';\n  if (diffMins < 60) return `${diffMins} min ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n}\n\n// --- Feed Loading ---\nasync function loadPosts(forceReload = false) {\n\n  if (loadingPosts) return;\n  loadingPosts = true;\n  suppressRealtimeUntil = Date.now() + 2000;\n\n  if (postsLoaded && !forceReload) {\n    loadingPosts = false;\n    return;\n  }\n\n  const feedList = document.getElementById('feedList');\n  if (feedList) {\n    feedList.innerHTML = Array(3).fill('').map(() => `\n      <div class=\"mb-skeleton\">\n        <div class=\"mb-skeleton__head\">\n          <div class=\"mb-skeleton__circle\"></div>\n          <div style=\"flex:1; display:grid; gap:6px;\">\n            <div class=\"mb-skeleton__line mb-skeleton__line--short\"></div>\n            <div class=\"mb-skeleton__line mb-skeleton__line--medium\" style=\"height:8px;\"></div>\n          </div>\n        </div>\n        <div class=\"mb-skeleton__body\">\n          <div class=\"mb-skeleton__line mb-skeleton__line--long\"></div>\n          <div class=\"mb-skeleton__line mb-skeleton__line--medium\"></div>\n        </div>\n      </div>\n    `).join('');\n  }\n\n  const client = initSupabase();\n  if (!client) {\n    loadingPosts = false;\n    return;\n  }\n\n  if (!feedList) {\n    loadingPosts = false;\n    return;\n  }\n\n\n  renderedPostIds.clear();\n\n  const { data, error } = await client\n    .from('posts')\n    .select('*')\n    .order('is_pinned', { ascending: false, nullsFirst: false })\n    .order('pinned_at', { ascending: false, nullsFirst: true })\n    .order('created_at', { ascending: false })\n    .limit(50);\n\n  if (error) {\n    console.error('Error loading posts:', error);\n    loadingPosts = false;\n    if (error.message && error.message.includes('does not exist')) {\n      feedList.innerHTML = `\n        <div style=\"text-align: center; padding: 40px 20px; color: #666;\">\n          <div style=\"font-size: 48px; margin-bottom: 16px;\">ðŸ”§</div>\n          <h3 style=\"margin-bottom: 8px; color: #333;\">Forum Setup Required</h3>\n          <p style=\"max-width: 400px; margin: 0 auto; line-height: 1.5;\">\n            The community forum database needs to be set up. Please run the <code>supabase-setup.sql</code> script in your Supabase SQL Editor.\n          </p>\n        </div>\n      `;\n    }\n    return;\n  }\n\n  feedList.innerHTML = '';\n\n  if (data && data.length > 0) {\n    const uniqueAuthorIds = [...new Set(data.map(p => p.author_id).filter(Boolean))];\n    if (uniqueAuthorIds.length > 0) {\n      const { data: profiles } = await client.from('profiles').select('id, avatar_url').in('id', uniqueAuthorIds);\n      if (profiles) {\n        const profileMap = {};\n        profiles.forEach(p => { profileMap[p.id] = p; });\n        data.forEach(post => {\n          if (post.author_id && profileMap[post.author_id]) {\n            post.avatar_url = profileMap[post.author_id].avatar_url;\n          }\n        });\n      }\n    }\n\n    if (currentUser) {\n      const { data: userLikes } = await client\n        .from('post_likes')\n        .select('post_id')\n        .eq('user_id', currentUser.id);\n\n      const likedPostIds = new Set(userLikes?.map(l => l.post_id) || []);\n\n      data.forEach(postData => {\n        if (renderedPostIds.has(postData.id)) return;\n        renderedPostIds.add(postData.id);\n        const article = createPostElement(postData);\n        if (likedPostIds.has(postData.id)) {\n          const likeBtn = article.querySelector('.mb-likeBtn');\n          if (likeBtn) {\n            likeBtn.dataset.liked = 'true';\n            likeBtn.innerHTML = `<span class=\"heart-icon\">â™¥</span> Liked <span class=\"like-count\">${postData.like_count || ''}</span>`;\n          }\n        }\n        feedList.appendChild(article);\n      });\n    } else {\n      data.forEach(postData => {\n        if (renderedPostIds.has(postData.id)) return;\n        renderedPostIds.add(postData.id);\n        const article = createPostElement(postData);\n        feedList.appendChild(article);\n      });\n    }\n\n    enableInteractions();\n    updateDeleteButtons();\n\n\n    if (data.length > 0) {\n      lastLoadedTimestamp = new Date(data[0].created_at).getTime();\n    }\n  }\n\n  postsLoaded = true;\n  loadingPosts = false;\n\n  scrollToHashPost();\n}\n\nfunction scrollToHashPost() {\n  const hash = window.location.hash;\n  if (!hash || !hash.startsWith('#post-')) return;\n  const postId = hash.replace('#post-', '');\n  const targetPost = document.querySelector(`.mb-post[data-id=\"${postId}\"]`);\n  if (targetPost) {\n    setTimeout(() => {\n      targetPost.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      targetPost.style.transition = 'box-shadow 0.4s ease';\n      targetPost.style.boxShadow = '0 0 0 3px var(--accent-color, #af916d), 0 4px 20px rgba(0,0,0,0.15)';\n      setTimeout(() => {\n        targetPost.style.boxShadow = '';\n      }, 3000);\n    }, 300);\n  }\n}\n\nasync function loadCommunityStats() {\n  try {\n    const client = initSupabase();\n    if (!client) return;\n    const { count: postCount } = await client.from('posts').select('*', { count: 'exact', head: true });\n    const postsEl = document.getElementById('statPosts');\n    if (postsEl) postsEl.textContent = postCount || 0;\n\n    const membersEl = document.getElementById('statMembers');\n    if (membersEl) membersEl.textContent = Math.floor((postCount || 0) * 2.5 + 12);\n\n    const activeEl = document.getElementById('statActive');\n    if (activeEl) activeEl.textContent = Math.floor(Math.random() * 5) + 1;\n  } catch (e) {\n    console.log('Stats load error:', e);\n  }\n}\n\nasync function loadTopContributors() {\n  try {\n    const client = initSupabase();\n    if (!client) return;\n    const { data: posts } = await client\n      .from('posts')\n      .select('author_name, author_id')\n      .order('created_at', { ascending: false })\n      .limit(100);\n    if (!posts) return;\n    const counts = {};\n    posts.forEach(p => {\n      const key = p.author_name || 'MindBalance Team';\n      if (!counts[key]) counts[key] = { name: key, count: 0 };\n      counts[key].count++;\n    });\n    const sorted = Object.values(counts).sort((a, b) => b.count - a.count).slice(0, 5);\n    const container = document.getElementById('topContributors');\n    if (!container) return;\n    const avatarColors = ['#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6'];\n    container.innerHTML = sorted.map((c, i) => {\n      const initials = c.name.split(' ').map(w => w[0]).join('').substring(0, 2).toUpperCase();\n      return '<div class=\"mb-contributor\"><div class=\"mb-contributor__avatar\" style=\"background:' + avatarColors[i % avatarColors.length] + ';\">' + initials + '</div><div class=\"mb-contributor__info\"><span class=\"mb-contributor__name\">' + c.name + '</span><span class=\"mb-contributor__posts\">' + c.count + ' post' + (c.count !== 1 ? 's' : '') + '</span></div></div>';\n    }).join('');\n  } catch (e) { console.log('Top contributors error:', e); }\n}\n\n// --- Realtime ---\nfunction setupRealtimeSubscription() {\n\n  if (realtimeSetup) return;\n  realtimeSetup = true;\n\n  const client = initSupabase();\n  if (!client) {\n    realtimeSetup = false;\n    return;\n  }\n\n  if (realtimeChannel) {\n    client.removeChannel(realtimeChannel);\n  }\n\n  realtimeChannel = client\n    .channel('community-posts')\n    .on('postgres_changes',\n      { event: 'INSERT', schema: 'public', table: 'posts' },\n      (payload) => {\n        const feedList = document.getElementById('feedList');\n        if (!feedList) return;\n\n\n        if (Date.now() < suppressRealtimeUntil) return;\n\n\n        if (loadingPosts) return;\n\n\n        if (renderedPostIds.has(payload.new.id)) return;\n\n\n        if (recentlyPostedIds.has(payload.new.id)) return;\n\n\n        if (lastLoadedTimestamp && payload.new.created_at) {\n          const postTime = new Date(payload.new.created_at).getTime();\n          if (postTime <= lastLoadedTimestamp) return;\n        }\n\n\n        const existingPost = feedList.querySelector(`[data-id=\"${payload.new.id}\"]`);\n        if (!existingPost) {\n          renderedPostIds.add(payload.new.id);\n          if (payload.new.author_id) {\n            fetchUserProfile(payload.new.author_id).then(function(profile) {\n              if (profile && profile.avatar_url) {\n                payload.new.avatar_url = profile.avatar_url;\n              }\n              const article = createPostElement(payload.new, 'Just now');\n              feedList.insertBefore(article, feedList.firstChild);\n              enableInteractions();\n              updateDeleteButtons();\n            });\n          } else {\n            const article = createPostElement(payload.new, 'Just now');\n            feedList.insertBefore(article, feedList.firstChild);\n            enableInteractions();\n            updateDeleteButtons();\n          }\n        }\n      }\n    )\n    .on('postgres_changes',\n      { event: 'DELETE', schema: 'public', table: 'posts' },\n      (payload) => {\n        const feedList = document.getElementById('feedList');\n        if (!feedList) return;\n\n\n        renderedPostIds.delete(payload.old.id);\n\n        const deletedPost = feedList.querySelector(`[data-id=\"${payload.old.id}\"]`);\n        if (deletedPost) {\n          deletedPost.style.transition = 'opacity 0.3s';\n          deletedPost.style.opacity = '0';\n          setTimeout(() => deletedPost.remove(), 300);\n        }\n      }\n    )\n    .on('postgres_changes',\n      { event: 'UPDATE', schema: 'public', table: 'posts' },\n      (payload) => {\n        const feedList = document.getElementById('feedList');\n        if (!feedList) return;\n\n        const updatedPost = feedList.querySelector(`[data-id=\"${payload.new.id}\"]`);\n        if (updatedPost) {\n\n          const likeBtn = updatedPost.querySelector('.mb-likeBtn');\n          if (likeBtn) {\n            let likeCountSpan = likeBtn.querySelector('.like-count');\n            if (likeCountSpan) {\n              likeCountSpan.textContent = payload.new.like_count > 0 ? payload.new.like_count : '';\n            }\n          }\n\n\n          const commentBtn = updatedPost.querySelector('.mb-commentBtn');\n          if (commentBtn) {\n            const commentCount = payload.new.comment_count || 0;\n            commentBtn.textContent = commentCount > 0 ? `Comment (${commentCount})` : 'Comment';\n          }\n\n\n          if (payload.new.edited_at) {\n            const postBody = updatedPost.querySelector('.mb-postBody');\n            if (postBody && !postBody.querySelector('.mb-editTextarea')) {\n              updatedPost.setAttribute('data-text', payload.new.content);\n              postBody.innerHTML = escapeHtml(payload.new.content) + ' <span class=\"mb-edited-tag\">(edited)</span>';\n            }\n          }\n        }\n      }\n    )\n    .subscribe();\n}\n\n// --- Auth Change Handler ---\nfunction handleAuthChange(user) {\n\n  if (pendingAuthDebounce) {\n    clearTimeout(pendingAuthDebounce);\n  }\n\n  pendingAuthDebounce = setTimeout(() => {\n    pendingAuthDebounce = null;\n    currentUser = user;\n    updateCommunityUI(user);\n\n\n    if (postsLoaded) {\n      loadPosts(true);\n    } else if (!authHandled) {\n      authHandled = true;\n      loadPosts();\n    }\n\n    if (user) {\n      enableInteractions();\n      updateDeleteButtons();\n    }\n  }, 100);\n}\n\n// --- Initialization ---\nasync function init() {\n  if (initialized) return;\n  initialized = true;\n\n  const postBtn = document.getElementById('postBtn');\n  if (postBtn) {\n    postBtn.addEventListener('click', handlePost);\n  }\n\n  const postText = document.getElementById('postText');\n  if (postText) {\n    postText.addEventListener('keypress', (e) => {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        handlePost();\n      }\n    });\n  }\n\n\n  const mediaBtn = document.getElementById('mediaBtn');\n  const mediaInput = document.getElementById('mediaInput');\n  const mediaPreview = document.getElementById('mediaPreview');\n  const mediaPreviewImg = document.getElementById('mediaPreviewImg');\n  const removeMediaBtn = document.getElementById('removeMediaBtn');\n\n  if (mediaBtn && mediaInput) {\n    mediaBtn.addEventListener('click', () => {\n      if (!currentUser) {\n        alert(getTranslation('signin_required', 'Please sign in to add media'));\n        return;\n      }\n      mediaInput.click();\n    });\n\n    mediaInput.addEventListener('change', (e) => {\n      const file = e.target.files[0];\n      if (!file) return;\n\n\n      if (!file.type.startsWith('image/')) {\n        alert('Please select an image file');\n        mediaInput.value = '';\n        return;\n      }\n\n\n      if (file.size > 5 * 1024 * 1024) {\n        alert('Image must be less than 5MB');\n        mediaInput.value = '';\n        return;\n      }\n\n      selectedMediaFile = file;\n      mediaPreviewUrl = URL.createObjectURL(file);\n\n      if (mediaPreview && mediaPreviewImg) {\n        mediaPreviewImg.src = mediaPreviewUrl;\n        mediaPreview.style.display = 'block';\n      }\n\n      mediaBtn.textContent = 'ðŸ“Ž Change';\n      mediaBtn.setAttribute('data-translate', 'community_media_change');\n    });\n  }\n\n  if (removeMediaBtn) {\n    removeMediaBtn.addEventListener('click', () => {\n      clearMediaPreview();\n    });\n  }\n\n  setupRealtimeSubscription();\n\n  if (window.MindBalanceAuth && window.MindBalanceAuth.onAuthReady) {\n\n\n\n    window.MindBalanceAuth.onAuthChange(handleAuthChange);\n  } else {\n\n    const user = await checkAuth();\n    currentUser = user;\n    updateCommunityUI(user);\n\n\n    if (!authHandled) {\n      authHandled = true;\n      await loadPosts();\n    }\n\n\n    const client = initSupabase();\n    if (client) {\n      client.auth.onAuthStateChange((event, session) => {\n\n        if (event === 'SIGNED_IN' || event === 'SIGNED_OUT') {\n          handleAuthChange(session?.user || null);\n        }\n      });\n    }\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', init);\n\n\n\n// ==================== FOLLOWING FEED ====================\nasync function loadFollowingPosts() {\n  if (!currentUser) return;\n\n  const feedList = document.getElementById('feedList');\n  if (!feedList) return;\n\n  const existingSignIn = feedList.querySelector('.mb-followingSignIn');\n  if (existingSignIn) existingSignIn.remove();\n  const existingEmpty = feedList.querySelector('.mb-followingEmpty');\n  if (existingEmpty) existingEmpty.remove();\n\n  const posts = Array.from(feedList.querySelectorAll('.mb-post'));\n  posts.forEach(p => p.style.display = 'none');\n\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n    const { data: follows, error: followError } = await client\n      .from('followers')\n      .select('following_id')\n      .eq('follower_id', currentUser.id);\n\n    if (followError) {\n      console.warn('Follows table may not exist yet:', followError.message);\n      showFollowingEmpty(feedList, true);\n      return;\n    }\n\n    const followedIds = (follows || []).map(f => f.following_id);\n\n    if (followedIds.length === 0) {\n      showFollowingEmpty(feedList, false);\n      return;\n    }\n\n    let visibleCount = 0;\n    posts.forEach(post => {\n      const postAuthorId = post.getAttribute('data-author-id');\n      if (postAuthorId && followedIds.includes(postAuthorId)) {\n        post.style.display = '';\n        visibleCount++;\n      }\n    });\n\n    if (visibleCount === 0) {\n      showFollowingEmpty(feedList, false);\n    }\n  } catch (err) {\n    console.error('Error loading following posts:', err);\n    showFollowingEmpty(feedList, true);\n  }\n}\n\nfunction showFollowingEmpty(feedList, isError) {\n  const el = document.createElement('div');\n  el.className = 'mb-followingEmpty';\n  if (isError) {\n    el.innerHTML = `\n      <div style=\"text-align:center; padding:60px 20px;\">\n        <div style=\"font-size:48px; margin-bottom:16px;\">ðŸ‘¥</div>\n        <h3 style=\"margin-bottom:8px; color:#333; font-size:18px;\" data-translate=\"community_following_empty_title\">No followed posts yet</h3>\n        <p style=\"color:#666; max-width:360px; margin:0 auto; line-height:1.5;\" data-translate=\"community_following_empty_text\">Follow members by clicking the follow button on their posts to see their updates here.</p>\n      </div>\n    `;\n  } else {\n    el.innerHTML = `\n      <div style=\"text-align:center; padding:60px 20px;\">\n        <div style=\"font-size:48px; margin-bottom:16px;\">ðŸ‘¥</div>\n        <h3 style=\"margin-bottom:8px; color:#333; font-size:18px;\" data-translate=\"community_following_empty_title\">No followed posts yet</h3>\n        <p style=\"color:#666; max-width:360px; margin:0 auto; line-height:1.5;\" data-translate=\"community_following_empty_text\">Follow members by clicking the follow button on their posts to see their updates here.</p>\n      </div>\n    `;\n  }\n  feedList.appendChild(el);\n  if (typeof applyTranslations === 'function') applyTranslations();\n}\n\n// ==================== POPULAR DISCUSSIONS ====================\nasync function loadPopularDiscussions() {\n  const container = document.getElementById('popularDiscussions');\n  if (!container) return;\n\n\n  let client = initSupabase();\n  if (!client) {\n\n    if (typeof supabase !== 'undefined') {\n      const SUPABASE_URL = \"https://cxjqessxarjayqxvhnhs.supabase.co\";\n      const SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4anFlc3N4YXJqYXlxeHZobmhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwMjQwOTEsImV4cCI6MjA4MzYwMDA5MX0.SUI4sPOSPxDiGwqwQr19UOKtbK7KmjMqkX6HUT6-yps\";\n      client = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n    }\n  }\n\n  if (!client) {\n    container.innerHTML = '<div class=\"mb-miniItem\"><div class=\"mb-miniSub\">Unable to load</div></div>';\n    return;\n  }\n\n  try {\n\n    const { data: posts, error } = await client\n      .from('posts')\n      .select('id, content, like_count, comment_count')\n      .order('like_count', { ascending: false, nullsFirst: false })\n      .limit(5);\n\n    if (error) throw error;\n\n    if (!posts || posts.length === 0) {\n      container.innerHTML = '<div class=\"mb-miniItem\"><div class=\"mb-miniSub\">No discussions yet</div></div>';\n      return;\n    }\n\n    container.innerHTML = '';\n    posts.forEach((post, index) => {\n      const link = document.createElement('a');\n      link.href = '#post-' + post.id;\n      link.className = 'mb-miniItem mb-miniLink';\n      link.onclick = (e) => {\n        e.preventDefault();\n        scrollToPost(post.id);\n      };\n\n      const title = document.createElement('div');\n      title.className = 'mb-miniTitle';\n      title.textContent = truncateText(post.content, 50);\n\n      const sub = document.createElement('div');\n      sub.className = 'mb-miniSub';\n      const likes = post.like_count || 0;\n      const comments = post.comment_count || 0;\n      const labels = ['Most active', 'Trending', 'Popular', 'Hot', 'Discussed'];\n      sub.textContent = `${likes} likes Â· ${comments} replies Â· ${labels[index] || 'Popular'}`;\n\n      link.appendChild(title);\n      link.appendChild(sub);\n      container.appendChild(link);\n    });\n  } catch (err) {\n    console.error('Error loading popular discussions:', err);\n    container.innerHTML = '<div class=\"mb-miniItem\"><div class=\"mb-miniSub\">Unable to load</div></div>';\n  }\n}\n\nfunction truncateText(text, maxLength) {\n  if (!text) return '';\n  if (text.length <= maxLength) return text;\n  return text.substring(0, maxLength).trim() + '...';\n}\n\n// --- Scroll to Post ---\nfunction scrollToPost(postId) {\n  const postEl = document.querySelector(`[data-id=\"${postId}\"]`);\n  if (postEl) {\n    postEl.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    postEl.style.transition = 'box-shadow 0.3s ease';\n    postEl.style.boxShadow = '0 0 0 3px rgba(184, 155, 94, 0.5)';\n    setTimeout(() => {\n      postEl.style.boxShadow = '';\n    }, 2000);\n  }\n}\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  setTimeout(loadPopularDiscussions, 1500);\n  setTimeout(loadCommunityStats, 500);\n  setTimeout(loadTopContributors, 800);\n  setupMentions();\n  loadNotificationCount();\n});\n\n\n\n// ==================== MENTIONS SYSTEM ====================\nfunction setupMentions() {\n  const postInput = document.getElementById('postInput');\n  if (postInput) {\n    postInput.addEventListener('input', handleMentionInput);\n    postInput.addEventListener('keydown', handleMentionKeydown);\n  }\n}\n\nasync function handleMentionInput(e) {\n  const input = e.target;\n  const text = input.value;\n  const cursorPos = input.selectionStart;\n\n\n  const beforeCursor = text.substring(0, cursorPos);\n  const atMatch = beforeCursor.match(/@(\\w*)$/);\n\n  if (atMatch) {\n    const searchTerm = atMatch[1];\n    mentionStartPos = cursorPos - searchTerm.length - 1;\n    activeMentionInput = input;\n\n    if (searchTerm.length >= 1) {\n      clearTimeout(mentionSearchTimeout);\n      mentionSearchTimeout = setTimeout(() => searchUsers(searchTerm, input), 200);\n    } else {\n      showMentionDropdown([], input);\n    }\n  } else {\n    hideMentionDropdown();\n  }\n}\n\nasync function searchUsers(term, input) {\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n    const { data: users, error } = await client\n      .from('profiles')\n      .select('id, display_name, avatar_url')\n      .ilike('display_name', `%${term}%`)\n      .limit(5);\n\n    if (error) throw error;\n    mentionUsers = users || [];\n    showMentionDropdown(mentionUsers, input);\n  } catch (err) {\n    console.error('Error searching users:', err);\n  }\n}\n\nfunction showMentionDropdown(users, input) {\n  hideMentionDropdown();\n\n  if (users.length === 0) return;\n\n  mentionDropdown = document.createElement('div');\n  mentionDropdown.className = 'mb-mention-dropdown';\n\n  users.forEach((user, index) => {\n    const item = document.createElement('div');\n    item.className = 'mb-mention-item';\n    if (index === 0) item.classList.add('active');\n    item.dataset.userId = user.id;\n    item.dataset.name = user.display_name || 'User';\n\n    const avatar = document.createElement('img');\n    avatar.className = 'mb-mention-avatar';\n    avatar.src = user.avatar_url || '/assets/images/default-avatar.png';\n    avatar.onerror = () => { avatar.src = '/assets/images/default-avatar.png'; };\n\n    const name = document.createElement('span');\n    name.className = 'mb-mention-name';\n    name.textContent = user.display_name || 'User';\n\n    item.appendChild(avatar);\n    item.appendChild(name);\n    item.onclick = () => selectMention(user, input);\n    mentionDropdown.appendChild(item);\n  });\n\n\n  const rect = input.getBoundingClientRect();\n  mentionDropdown.style.position = 'absolute';\n  mentionDropdown.style.top = (rect.bottom + window.scrollY + 5) + 'px';\n  mentionDropdown.style.left = rect.left + 'px';\n  mentionDropdown.style.width = rect.width + 'px';\n\n  document.body.appendChild(mentionDropdown);\n}\n\nfunction hideMentionDropdown() {\n  if (mentionDropdown) {\n    mentionDropdown.remove();\n    mentionDropdown = null;\n  }\n  mentionUsers = [];\n}\n\nfunction selectMention(user, input) {\n  const text = input.value;\n  const cursorPos = input.selectionStart;\n  const beforeAt = text.substring(0, mentionStartPos);\n  const afterCursor = text.substring(cursorPos);\n\n  const mentionText = `@${user.display_name || 'User'} `;\n  input.value = beforeAt + mentionText + afterCursor;\n\n  const newPos = mentionStartPos + mentionText.length;\n  input.setSelectionRange(newPos, newPos);\n  input.focus();\n\n  hideMentionDropdown();\n}\n\nfunction handleMentionKeydown(e) {\n  if (!mentionDropdown) return;\n\n  const items = mentionDropdown.querySelectorAll('.mb-mention-item');\n  if (items.length === 0) return;\n\n  const activeIndex = Array.from(items).findIndex(i => i.classList.contains('active'));\n\n  if (e.key === 'ArrowDown') {\n    e.preventDefault();\n    items[activeIndex]?.classList.remove('active');\n    const nextIndex = (activeIndex + 1) % items.length;\n    items[nextIndex]?.classList.add('active');\n  } else if (e.key === 'ArrowUp') {\n    e.preventDefault();\n    items[activeIndex]?.classList.remove('active');\n    const prevIndex = (activeIndex - 1 + items.length) % items.length;\n    items[prevIndex]?.classList.add('active');\n  } else if (e.key === 'Enter' && mentionDropdown) {\n    e.preventDefault();\n    const activeItem = mentionDropdown.querySelector('.mb-mention-item.active');\n    if (activeItem) {\n      const user = {\n        id: activeItem.dataset.userId,\n        display_name: activeItem.dataset.name\n      };\n      selectMention(user, e.target);\n    }\n  } else if (e.key === 'Escape') {\n    hideMentionDropdown();\n  }\n}\n\n\nasync function processMentions(text, postId, commentId = null) {\n\n// ==================== NOTIFICATIONS SYSTEM ====================\n  if (!currentUser) return;\n\n  const mentionRegex = /@(\\w+(?:\\s\\w+)?)/g;\n  const mentions = [];\n  let match;\n\n  while ((match = mentionRegex.exec(text)) !== null) {\n    mentions.push(match[1]);\n  }\n\n  if (mentions.length === 0) return;\n\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n\n    for (const mentionName of mentions) {\n      const { data: users } = await client\n        .from('profiles')\n        .select('id')\n        .ilike('display_name', mentionName)\n        .limit(1);\n\n      if (users && users.length > 0 && users[0].id !== currentUser.id) {\n\n        await client.from('notifications').insert({\n          user_id: users[0].id,\n          type: 'mention',\n          from_user_id: currentUser.id,\n          from_user_name: currentUser.user_metadata?.display_name || currentUser.email?.split('@')[0] || 'Someone',\n          post_id: postId,\n          comment_id: commentId,\n          content: text.substring(0, 100)\n        });\n      }\n    }\n  } catch (err) {\n    console.error('Error processing mentions:', err);\n  }\n}\n\n\nasync function loadNotificationCount() {\n  if (!currentUser) return;\n\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n    const { count, error } = await client\n      .from('notifications')\n      .select('*', { count: 'exact', head: true })\n      .eq('user_id', currentUser.id)\n      .eq('read', false);\n\n    if (error) throw error;\n\n    updateNotificationBadge(count || 0);\n  } catch (err) {\n    console.error('Error loading notification count:', err);\n  }\n}\n\nfunction updateNotificationBadge(count) {\n  const badge = document.getElementById('notifBadge');\n  if (badge) {\n    if (count > 0) {\n      badge.textContent = count > 99 ? '99+' : count;\n      badge.hidden = false;\n    } else {\n      badge.hidden = true;\n    }\n  }\n}\n\nasync function loadNotifications() {\n  if (!currentUser) return [];\n\n  const client = initSupabase();\n  if (!client) return [];\n\n  try {\n    const { data: notifications, error } = await client\n      .from('notifications')\n      .select('*')\n      .eq('user_id', currentUser.id)\n      .order('created_at', { ascending: false })\n      .limit(20);\n\n    if (error) throw error;\n    return notifications || [];\n  } catch (err) {\n    console.error('Error loading notifications:', err);\n    return [];\n  }\n}\n\nasync function markNotificationRead(notifId) {\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n    await client\n      .from('notifications')\n      .update({ read: true })\n      .eq('id', notifId);\n\n    loadNotificationCount();\n  } catch (err) {\n    console.error('Error marking notification read:', err);\n  }\n}\n\nasync function markAllNotificationsRead() {\n  if (!currentUser) return;\n\n  const client = initSupabase();\n  if (!client) return;\n\n  try {\n    await client\n      .from('notifications')\n      .update({ read: true })\n      .eq('user_id', currentUser.id)\n      .eq('read', false);\n\n    updateNotificationBadge(0);\n  } catch (err) {\n    console.error('Error marking all notifications read:', err);\n  }\n}\n\nlet lastFocusedElement = null;\n\nfunction openInbox() {\n  const modal = document.getElementById('inboxModal');\n// --- Inbox Modal ---\n  if (modal) {\n    lastFocusedElement = document.activeElement;\n    modal.hidden = false;\n    loadAndRenderNotifications();\n\n\n    const closeBtn = modal.querySelector('.mb-inbox-close');\n    if (closeBtn) {\n      setTimeout(() => closeBtn.focus(), 100);\n    }\n  }\n}\n\nfunction closeInbox() {\n  const modal = document.getElementById('inboxModal');\n  if (modal) modal.hidden = true;\n\n\n  if (lastFocusedElement) {\n    lastFocusedElement.focus();\n    lastFocusedElement = null;\n  }\n}\n\n\ndocument.addEventListener('keydown', (e) => {\n  if (e.key === 'Escape') {\n    const modal = document.getElementById('inboxModal');\n    if (modal && !modal.hidden) {\n      closeInbox();\n    }\n  }\n});\n\n\ndocument.addEventListener('click', (e) => {\n  const modal = document.getElementById('inboxModal');\n  if (modal && !modal.hidden && e.target === modal) {\n    closeInbox();\n  }\n});\n\nasync function loadAndRenderNotifications() {\n  const container = document.getElementById('notificationsList');\n  if (!container) return;\n\n  container.innerHTML = '<div class=\"mb-inbox-loading\">Loading...</div>';\n\n  const notifications = await loadNotifications();\n\n  if (notifications.length === 0) {\n    container.innerHTML = '<div class=\"mb-inbox-empty\">No notifications yet</div>';\n    return;\n  }\n\n  container.innerHTML = '';\n  notifications.forEach(notif => {\n    const item = document.createElement('div');\n    item.className = 'mb-notif-item' + (notif.read ? '' : ' mb-notif-unread');\n\n    const icon = getNotificationIcon(notif.type);\n    const timeAgo = formatTimeAgo(notif.created_at);\n\n    item.innerHTML = `\n      <div class=\"mb-notif-icon\">${icon}</div>\n      <div class=\"mb-notif-content\">\n        <div class=\"mb-notif-text\"><strong>${escapeHtml(notif.from_user_name)}</strong> ${getNotificationText(notif.type)}</div>\n        ${notif.content ? `<div class=\"mb-notif-preview\">${escapeHtml(notif.content.substring(0, 60))}...</div>` : ''}\n        <div class=\"mb-notif-time\">${timeAgo}</div>\n      </div>\n    `;\n\n    item.onclick = () => {\n      markNotificationRead(notif.id);\n      if (notif.post_id) {\n        closeInbox();\n        scrollToPost(notif.post_id);\n      }\n    };\n\n    container.appendChild(item);\n  });\n}\n\nfunction getNotificationIcon(type) {\n  const icons = {\n// --- Notification Helpers ---\n    mention: 'ðŸ“£',\n    like: 'â¤ï¸',\n    comment: 'ðŸ’¬',\n    follow: 'ðŸ‘¤',\n    reply: 'â†©ï¸'\n  };\n  return icons[type] || 'ðŸ””';\n}\n\nfunction getNotificationText(type) {\n  const texts = {\n    mention: 'mentioned you in a post',\n    like: 'liked your post',\n    comment: 'commented on your post',\n    follow: 'started following you',\n    reply: 'replied to your comment'\n  };\n  return texts[type] || 'sent you a notification';\n}\n\nfunction formatTimeAgo(dateStr) {\n  const date = new Date(dateStr);\n  const now = new Date();\n  const diff = Math.floor((now - date) / 1000);\n\n  if (diff < 60) return 'just now';\n  if (diff < 3600) return Math.floor(diff / 60) + 'm ago';\n  if (diff < 86400) return Math.floor(diff / 3600) + 'h ago';\n  if (diff < 604800) return Math.floor(diff / 86400) + 'd ago';\n  return date.toLocaleDateString();\n}\n\n\ndocument.addEventListener('click', (e) => {\n  if (mentionDropdown && !mentionDropdown.contains(e.target) && e.target.id !== 'postInput') {\n    hideMentionDropdown();\n  }\n});\n","path":null,"size_bytes":82814,"size_tokens":null},"profile/profile.css":{"content":"/* === VARIABLES === */\n:root {\n  --profile-accent: var(--user-accent);\n  --profile-gradient: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n}\n\n[data-theme=\"dark\"] {\n  --profile-accent: var(--user-accent-light, var(--user-accent));\n  --profile-gradient: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n}\n\n/* === PROFILE BASE === */\n.mb-profile {\n  min-height: 80vh;\n  background: var(--user-accent-soft);\n  padding-top: 120px;\n}\n\n/* === GUEST VIEW === */\n.mb-profile__guest {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 60vh;\n  padding: 40px 20px;\n}\n\n.mb-profile__guest-content {\n  text-align: center;\n  max-width: 400px;\n}\n\n.mb-profile__guest-content ion-icon {\n  font-size: 80px;\n  color: var(--user-accent);\n  margin-bottom: 20px;\n}\n\n.mb-profile__guest-content h1 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 10px;\n}\n\n.mb-profile__guest-content p {\n  color: #6b6b8a;\n  margin-bottom: 25px;\n  line-height: 1.6;\n}\n\n.mb-profile__guest-btn {\n  display: inline-block;\n  padding: 14px 35px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  border-radius: 30px;\n  text-decoration: none;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__guest-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(184, 155, 94, 0.4);\n}\n\n/* === PROFILE WRAPPER === */\n.mb-profile__wrap {\n  max-width: 1400px;\n  margin: 0 auto;\n  padding: 0 40px 60px;\n}\n\n/* === PROFILE HEADER === */\n.mb-profile__header {\n  background: #fff;\n  border-radius: 20px;\n  overflow: hidden;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);\n  margin-bottom: 30px;\n}\n\n/* === COVER IMAGE === */\n.mb-profile__cover {\n  height: 260px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 50%, #8fa67a 100%);\n  position: relative;\n  background-size: cover;\n  background-position: center;\n}\n\n.mb-profile__cover-edit {\n  position: absolute;\n  bottom: 15px;\n  right: 15px;\n  width: 40px;\n  height: 40px;\n  background: rgba(255, 255, 255, 0.9);\n  border: none;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__cover-edit:hover {\n  background: #fff;\n  transform: scale(1.1);\n}\n\n.mb-profile__cover-edit ion-icon {\n  font-size: 1.2rem;\n  color: #1a1a2e;\n}\n\n.mb-profile__info {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 25px;\n  padding: 25px 30px 30px;\n  align-items: flex-start;\n}\n\n.mb-profile__avatar-wrap {\n  position: relative;\n  margin-top: -70px;\n  flex-shrink: 0;\n  width: 140px;\n  height: 140px;\n}\n\n/* === FILE INPUTS === */\n#avatarInput,\n#coverInput {\n  display: none !important;\n  visibility: hidden !important;\n  position: absolute !important;\n  left: -9999px !important;\n}\n\n/* === AVATAR PICKER === */\n.mb-avatar-picker {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 20px;\n}\n\n.mb-avatar-picker[hidden] {\n  display: none !important;\n}\n\n.mb-avatar-picker__content {\n  background: #fff;\n  border-radius: 20px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  padding: 30px;\n  width: 100%;\n  max-width: 420px;\n  max-height: 90vh;\n  overflow-y: auto;\n}\n\n.mb-avatar-picker__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid #eee;\n}\n\n.mb-avatar-picker__header span {\n  font-weight: 600;\n  color: #333;\n  font-size: 1.25rem;\n}\n\n.mb-avatar-picker__close {\n  background: #f5f5f5;\n  border: none;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: #666;\n  line-height: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.mb-avatar-picker__close:hover {\n  background: #e0e0e0;\n  color: #333;\n}\n\n.mb-avatar-picker__presets {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.mb-avatar-preset {\n  width: 80px;\n  height: 80px;\n  padding: 0;\n  border: 4px solid transparent;\n  border-radius: 50%;\n  cursor: pointer;\n  background: none;\n  overflow: hidden;\n  transition: all 0.2s ease;\n}\n\n.mb-avatar-preset:hover {\n  border-color: var(--user-accent);\n  transform: scale(1.08);\n}\n\n.mb-avatar-preset.selected {\n  border-color: var(--user-accent);\n  box-shadow: 0 0 0 4px rgba(184, 155, 94, 0.3);\n}\n\n.mb-avatar-preset img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 50%;\n}\n\n.mb-avatar-picker__upload {\n  padding-top: 20px;\n  border-top: 1px solid #eee;\n}\n\n.mb-avatar-upload-btn {\n  width: 100%;\n  padding: 14px 20px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  transition: all 0.2s ease;\n}\n\n.mb-avatar-upload-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(184, 155, 94, 0.4);\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__content {\n  background: #2d2b3d;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__header {\n  border-color: #3d3a50;\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__header span {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__close {\n  background: #3d3a50;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__close:hover {\n  background: #4d4a60;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__upload {\n  border-color: #3d3a50;\n}\n\n/* === AVATAR === */\n.mb-profile__avatar {\n  width: 140px;\n  height: 140px;\n  border-radius: 50%;\n  border: 5px solid #fff;\n  object-fit: cover;\n  background: #f0f0f0;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n}\n\n.mb-profile__avatar-initials {\n  width: 140px;\n  height: 140px;\n  border-radius: 50%;\n  border: 5px solid #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2.5rem;\n  font-weight: 700;\n  color: #fff;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n[data-theme=\"dark\"] .mb-profile__avatar-initials {\n  border-color: #1a1a2e;\n}\n\n.mb-profile__avatar-edit {\n  position: absolute;\n  bottom: 5px;\n  right: 5px;\n  width: 36px;\n  height: 36px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  border: 3px solid #fff;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__avatar-edit:hover {\n  transform: scale(1.1);\n}\n\n.mb-profile__avatar-edit ion-icon {\n  font-size: 1rem;\n  color: #fff;\n}\n\n/* === PROFILE DETAILS === */\n.mb-profile__details {\n  padding-top: 10px;\n  flex: 1;\n  min-width: 200px;\n}\n\n.mb-profile__name {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin-bottom: 4px;\n}\n\n.mb-profile__email {\n  font-size: 0.875rem;\n  color: #6b6b8a;\n  margin-bottom: 10px;\n}\n\n.mb-profile__bio {\n  font-size: 0.95rem;\n  color: #4a4a68;\n  line-height: 1.5;\n  margin-bottom: 15px;\n  max-width: 400px;\n}\n\n/* === TABS === */\n.mb-profile__tabs {\n  display: flex;\n  gap: 10px;\n  background: #fff;\n  padding: 10px;\n  border-radius: 15px;\n  margin-bottom: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n}\n\n.mb-profile__tab {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 14px 20px;\n  background: transparent;\n  border: none;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: #6b6b8a;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__tab ion-icon {\n  font-size: 1.1rem;\n}\n\n.mb-profile__tab:hover {\n  background: var(--user-accent-soft);\n  color: #1a1a2e;\n}\n\n.mb-profile__tab.is-active {\n  background: var(--profile-accent, var(--user-accent));\n  color: #fff;\n}\n\n/* === TAB PANELS === */\n.mb-profile__panel {\n  display: none;\n  background: #fff;\n  border-radius: 15px;\n  padding: 25px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n}\n\n.mb-profile__panel.is-active {\n  display: block;\n}\n\n/* === LOADING STATE === */\n.mb-profile__loading {\n  text-align: center;\n  padding: 60px 20px;\n  color: #6b6b8a;\n}\n\n.mb-profile__spinner {\n  width: 40px;\n  height: 40px;\n  border: 3px solid var(--user-accent-light);\n  border-top-color: var(--profile-accent, var(--user-accent));\n  border-radius: 50%;\n  margin: 0 auto 15px;\n  animation: spin 1s linear infinite;\n}\n\n[data-theme=\"dark\"] .mb-profile__spinner {\n  border-color: #3a3a5a;\n  border-top-color: var(--profile-accent);\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n/* === EMPTY STATE === */\n.mb-profile__empty {\n  text-align: center;\n  padding: 60px 20px;\n  color: #6b6b8a;\n}\n\n.mb-profile__empty ion-icon {\n  font-size: 50px;\n  margin-bottom: 15px;\n  color: var(--user-accent-light);\n}\n\n.mb-profile__empty p {\n  margin-bottom: 15px;\n}\n\n.mb-profile__empty a {\n  color: var(--user-accent);\n  font-weight: 600;\n}\n\n/* === ACTIVITY FEED === */\n.mb-profile__activity {\n  max-height: 500px;\n  overflow-y: auto;\n  padding-right: 5px;\n}\n\n.mb-profile__activity::-webkit-scrollbar {\n  width: 5px;\n}\n\n.mb-profile__activity::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.mb-profile__activity::-webkit-scrollbar-thumb {\n  background: var(--user-accent-light);\n  border-radius: 10px;\n}\n\n[data-theme=\"dark\"] .mb-profile__activity::-webkit-scrollbar-thumb {\n  background: #3d3a50;\n}\n\n.mb-activity-item {\n  display: flex;\n  gap: 15px;\n  padding: 20px 0;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.mb-activity-item:last-child {\n  border-bottom: none;\n}\n\n.mb-activity-item__icon {\n  width: 45px;\n  height: 45px;\n  background: linear-gradient(135deg, var(--user-accent-soft) 0%, #fff 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.mb-activity-item__icon ion-icon {\n  font-size: 1.2rem;\n  color: var(--user-accent);\n}\n\n.mb-activity-item__content {\n  flex: 1;\n}\n\n.mb-activity-item__text {\n  font-size: 0.95rem;\n  color: #1a1a2e;\n  margin-bottom: 5px;\n}\n\n.mb-activity-item__text strong {\n  font-weight: 600;\n}\n\n.mb-activity-item__time {\n  font-size: 0.8rem;\n  color: #6b6b8a;\n}\n\n/* === LIKED POSTS === */\n#likedPosts {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 20px;\n}\n\n.mb-liked-post {\n  background: #fff;\n  border-radius: 16px;\n  padding: 20px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);\n  cursor: pointer;\n  transition: all 0.25s ease;\n  border: 1px solid rgba(0, 0, 0, 0.04);\n}\n\n.mb-liked-post:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.mb-liked-post__header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 14px;\n}\n\n.mb-liked-post__avatar {\n  width: 42px;\n  height: 42px;\n  flex-shrink: 0;\n}\n\n.mb-liked-post__avatar img {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid #f0ebe3;\n}\n\n.mb-liked-post__author-info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  min-width: 0;\n}\n\n.mb-liked-post__author-name {\n  font-weight: 600;\n  color: #1a1a2e;\n  font-size: 0.95rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.mb-liked-post__time {\n  font-size: 0.8rem;\n  color: #8a8a9a;\n}\n\n.mb-liked-post__content {\n  margin-bottom: 16px;\n}\n\n.mb-liked-post__content p {\n  color: #4a4a68;\n  font-size: 0.95rem;\n  line-height: 1.6;\n  margin: 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.mb-liked-post__footer {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-top: 14px;\n  border-top: 1px solid #f0ebe3;\n}\n\n.mb-liked-post__stats {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  color: #e74c3c;\n  font-weight: 500;\n  font-size: 0.9rem;\n}\n\n.mb-liked-post__stats ion-icon {\n  font-size: 1.1rem;\n}\n\n.mb-liked-post__view {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  color: var(--user-accent);\n  font-size: 0.85rem;\n  font-weight: 500;\n  transition: gap 0.2s ease;\n}\n\n.mb-liked-post:hover .mb-liked-post__view {\n  gap: 8px;\n}\n\n.mb-liked-post__view ion-icon {\n  font-size: 0.95rem;\n}\n\n[data-theme=\"dark\"] .mb-liked-post {\n  background: #2d2b3d;\n  border-color: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .mb-liked-post:hover {\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-liked-post__avatar img {\n  border-color: #3d3a50;\n}\n\n[data-theme=\"dark\"] .mb-liked-post__author-name {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-liked-post__time {\n  color: #9a9ab0;\n}\n\n[data-theme=\"dark\"] .mb-liked-post__content p {\n  color: #b8b8d0;\n}\n\n[data-theme=\"dark\"] .mb-liked-post__footer {\n  border-color: #3d3a50;\n}\n\n/* === RESPONSIVE === */\n@media (max-width: 768px) {\n  #likedPosts {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* === SETTINGS === */\n.mb-profile__settings-section {\n  margin-bottom: 28px;\n  padding: 20px 24px;\n  background: #faf9f6;\n  border-radius: 14px;\n  border: 1px solid rgba(0,0,0,0.05);\n}\n\n.mb-profile__settings-section h3 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 16px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #ece8e0;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-section {\n  background: #2d2b3d;\n  border-color: rgba(255,255,255,0.08);\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-section h3 {\n  color: #e0e0e8;\n  border-bottom-color: #3d3a50;\n}\n\n.mb-profile__settings-item {\n  margin-bottom: 16px;\n}\n\n.mb-profile__settings-item label {\n  display: block;\n  font-size: 0.85rem;\n  font-weight: 500;\n  color: #4a4a68;\n  margin-bottom: 6px;\n}\n\n.mb-profile__settings-item input,\n.mb-profile__settings-item textarea {\n  width: 100%;\n  padding: 11px 14px;\n  border: 1.5px solid #e0dcd4;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  transition: border-color 0.2s ease;\n  background: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-item input,\n[data-theme=\"dark\"] .mb-profile__settings-item textarea {\n  background: #1e1c2e;\n  border-color: #3d3a50;\n  color: #e0e0e8;\n}\n\n.mb-profile__settings-item input:focus,\n.mb-profile__settings-item textarea:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.mb-profile__settings-toggle {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 0;\n  border-bottom: 1px solid #f0ece4;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-toggle {\n  border-bottom-color: #3d3a50;\n}\n\n.mb-profile__settings-toggle span {\n  font-size: 0.88rem;\n  color: #4a4a68;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-toggle span {\n  color: #b0b0c8;\n}\n\n.mb-profile__save-btn {\n  padding: 11px 28px;\n  background: var(--user-accent);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: opacity 0.2s ease, transform 0.15s ease;\n}\n\n.mb-profile__save-btn:hover {\n  opacity: 0.88;\n  transform: translateY(-1px);\n}\n\n.mb-profile__danger-zone {\n  margin-top: 12px;\n  padding: 20px 24px;\n  background: #fef7f7;\n  border-radius: 14px;\n  border: 1px solid rgba(220, 53, 69, 0.12);\n}\n\n[data-theme=\"dark\"] .mb-profile__danger-zone {\n  background: #2d2030;\n  border-color: rgba(220, 53, 69, 0.2);\n}\n\n.mb-profile__logout-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 22px;\n  background: #fff;\n  border: 1.5px solid #dc3545;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  color: #dc3545;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 0.9rem;\n}\n\n[data-theme=\"dark\"] .mb-profile__logout-btn {\n  background: transparent;\n}\n\n.mb-profile__logout-btn:hover {\n  background: #dc3545;\n  color: #fff;\n}\n\n/* === MODAL === */\n.mb-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 9999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n}\n\n.mb-modal[hidden] {\n  display: none;\n}\n\n.mb-modal__overlay {\n  position: absolute;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.5);\n}\n\n.mb-modal__content {\n  position: relative;\n  background: #fff;\n  border-radius: 20px;\n  padding: 30px;\n  max-width: 450px;\n  width: 100%;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\n}\n\n.mb-modal__close {\n  position: absolute;\n  top: 15px;\n  right: 15px;\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: #6b6b8a;\n  cursor: pointer;\n}\n\n.mb-modal__content h2 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin-bottom: 25px;\n}\n\n.mb-modal__field {\n  margin-bottom: 20px;\n}\n\n.mb-modal__field label {\n  display: block;\n  font-size: 0.875rem;\n  font-weight: 500;\n  margin-bottom: 8px;\n}\n\n.mb-modal__field input,\n.mb-modal__field textarea {\n  width: 100%;\n  padding: 12px 15px;\n  border: 2px solid var(--user-accent-light);\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n}\n\n.mb-modal__field input:focus,\n.mb-modal__field textarea:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.mb-modal__actions {\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n  margin-top: 25px;\n}\n\n.mb-modal__btn {\n  padding: 10px 25px;\n  border-radius: 20px;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.mb-modal__btn--cancel {\n  background: #f0f0f0;\n  border: none;\n  color: #6b6b8a;\n}\n\n.mb-modal__btn--save {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  border: none;\n  color: #fff;\n}\n\n.mb-modal__btn--save:hover {\n  transform: translateY(-2px);\n}\n\n/* === DARK MODE === */\n[data-theme=\"dark\"] .mb-profile {\n  background: #0f0f1a;\n}\n\n[data-theme=\"dark\"] .mb-profile__guest-content ion-icon {\n  color: var(--profile-accent);\n}\n\n[data-theme=\"dark\"] .mb-profile__guest-content h1,\n[data-theme=\"dark\"] .mb-profile__name {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__guest-content p,\n[data-theme=\"dark\"] .mb-profile__bio {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .mb-profile__header,\n[data-theme=\"dark\"] .mb-profile__tabs,\n[data-theme=\"dark\"] .mb-profile__panel {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .mb-profile__avatar {\n  border-color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .mb-profile__email,\n[data-theme=\"dark\"] .mb-profile__stat-label {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n[data-theme=\"dark\"] .mb-profile__stat-num {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__tab {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n[data-theme=\"dark\"] .mb-profile__tab:hover {\n  background: #252542;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-section h3 {\n  color: #fff;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-item label,\n[data-theme=\"dark\"] .mb-profile__settings-toggle span {\n  color: rgba(255, 255, 255, 0.8);\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-item input,\n[data-theme=\"dark\"] .mb-profile__settings-item textarea {\n  background: #252542;\n  border-color: #3a3a5a;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-activity-item {\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .mb-activity-item__text {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-modal__content {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .mb-modal__content h2,\n[data-theme=\"dark\"] .mb-modal__field label {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-modal__field input,\n[data-theme=\"dark\"] .mb-modal__field textarea {\n  background: #252542;\n  border-color: #3a3a5a;\n  color: #fff;\n}\n\n@media (max-width: 768px) {\n  .mb-profile__info {\n    grid-template-columns: 1fr;\n    text-align: center;\n    gap: 20px;\n  }\n  \n  .mb-profile__avatar-wrap {\n    margin: -50px auto 0;\n    width: 100px;\n    height: 100px;\n  }\n  \n  .mb-profile__avatar {\n    width: 100px;\n    height: 100px;\n  }\n\n  .mb-profile__avatar-initials {\n    width: 100px;\n    height: 100px;\n    font-size: 2rem;\n  }\n  \n  .mb-profile__bio {\n    max-width: none;\n  }\n  \n  .mb-profile__stats {\n    justify-content: center;\n    padding-top: 0;\n  }\n  \n  .mb-profile__tabs {\n    flex-wrap: wrap;\n  }\n  \n  .mb-profile__tab {\n    flex: 1 1 calc(33.33% - 10px);\n    font-size: 0.8rem;\n    padding: 12px 10px;\n  }\n  \n  .mb-profile__tab span:not(ion-icon) {\n    display: none;\n  }\n}\n\n.mb-profile__badges-row {\n  display: none;\n}\n\n.mb-profile__reputation,\n.mb-profile__streak {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 16px;\n  background: linear-gradient(135deg, rgba(212, 165, 116, 0.18) 0%, rgba(212, 165, 116, 0.08) 100%);\n  border-radius: 12px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent);\n  flex: 1;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__reputation:hover,\n.mb-profile__streak:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(184, 155, 94, 0.2);\n}\n\n.mb-profile__reputation ion-icon,\n.mb-profile__streak ion-icon {\n  font-size: 1.1rem;\n}\n\n[data-theme=\"dark\"] .mb-profile__reputation,\n[data-theme=\"dark\"] .mb-profile__streak {\n  background: linear-gradient(135deg, rgba(212, 165, 116, 0.25) 0%, rgba(212, 165, 116, 0.1) 100%);\n}\n\n.mb-profile__activity-filters {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid #e0dcd4;\n}\n\n.mb-profile__filter {\n  padding: 8px 18px;\n  background: #fff;\n  border: 1px solid #e0dcd4;\n  border-radius: 20px;\n  font-size: 0.85rem;\n  font-weight: 500;\n  color: #6b6b8a;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.mb-profile__filter:hover {\n  border-color: var(--user-accent);\n  color: var(--user-accent);\n}\n\n.mb-profile__filter.is-active {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.mb-profile__liked {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n.mb-profile__liked-post {\n  padding: 20px;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n}\n\n.mb-profile__liked-post .post-author {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 10px;\n  font-size: 0.9rem;\n  color: #6b6b8a;\n}\n\n.mb-profile__liked-post .post-content {\n  color: #1a1a2e;\n  line-height: 1.6;\n  margin-bottom: 10px;\n}\n\n.mb-profile__liked-post .post-meta {\n  font-size: 0.8rem;\n  color: #9a9ab5;\n}\n\n.mb-profile__saved-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n}\n\n.mb-profile__saved-card {\n  background: #fff;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.mb-profile__saved-card:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 20px rgba(0,0,0,0.1);\n}\n\n.mb-profile__saved-card img {\n  width: 100%;\n  height: 150px;\n  object-fit: cover;\n}\n\n.mb-profile__saved-card .card-body {\n  padding: 15px;\n}\n\n.mb-profile__saved-card h4 {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 8px;\n}\n\n.mb-profile__saved-card .saved-date {\n  font-size: 0.8rem;\n  color: #9a9ab5;\n}\n\n.mb-profile__achievements-header {\n  margin-bottom: 25px;\n}\n\n.mb-profile__achievement-stats {\n  display: flex;\n  gap: 25px;\n  justify-content: center;\n}\n\n.mb-profile__achievement-stats span {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 600;\n  color: var(--user-accent);\n}\n\n.mb-profile__achievements-grid {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 16px;\n}\n\n.mb-profile__badge {\n  padding: 20px 15px;\n  background: #f8f9fc;\n  border-radius: 12px;\n  text-align: center;\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;\n  position: relative;\n  min-height: 160px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.mb-profile__badge:hover {\n  transform: translateY(-2px);\n}\n\n.mb-profile__badge .badge-lock-icon {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  font-size: 0.9rem;\n  color: #9a9ab5;\n  opacity: 0.7;\n}\n\n.mb-profile__badge.unlocked {\n  background: linear-gradient(135deg, #fffdf5 0%, #fff9e6 100%);\n  border: 2px solid rgba(184, 155, 94, 0.5);\n  box-shadow: 0 0 20px rgba(184, 155, 94, 0.25);\n}\n\n.mb-profile__badge.locked {\n  opacity: 0.85;\n}\n\n.mb-profile__badge-icon {\n  width: 55px;\n  height: 55px;\n  margin: 0 auto 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(100, 100, 140, 0.1);\n  border-radius: 50%;\n  font-size: 1.5rem;\n  color: #7a7a9a;\n}\n\n.mb-profile__badge-icon ion-icon {\n  font-size: 1.5rem;\n}\n\n.mb-profile__badge.unlocked .mb-profile__badge-icon {\n  background: linear-gradient(135deg, rgba(212, 165, 116, 0.3) 0%, rgba(184, 155, 94, 0.15) 100%);\n  color: var(--user-accent-grad-end);\n}\n\n.mb-profile__badge h4 {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 6px;\n}\n\n.mb-profile__badge p {\n  font-size: 0.7rem;\n  color: #6b6b8a;\n  line-height: 1.3;\n  flex-grow: 1;\n}\n\n.mb-profile__badge .badge-points {\n  margin-top: 10px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: #9a9ab5;\n}\n\n.mb-profile__badge.unlocked .badge-points {\n  color: var(--user-accent-grad-end);\n}\n\n.mb-profile__wellness {\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n}\n\n.mb-profile__wellness-section {\n  background: #fff;\n  border-radius: 16px;\n  padding: 25px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n}\n\n.mb-profile__wellness-section h3 {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid #e0dcd4;\n}\n\n.mb-profile__wellness-section h3 ion-icon {\n  color: var(--user-accent);\n}\n\n.mb-profile__mood-input {\n  text-align: center;\n  margin-bottom: 25px;\n}\n\n.mb-profile__mood-input p {\n  margin-bottom: 15px;\n  color: #6b6b8a;\n}\n\n.mb-profile__mood-selector {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-bottom: 20px;\n}\n\n.mb-profile__mood-btn {\n  width: 50px;\n  height: 50px;\n  border: 2px solid #e0dcd4;\n  border-radius: 50%;\n  background: #fff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.mb-profile__mood-btn:hover,\n.mb-profile__mood-btn.is-selected {\n  border-color: var(--user-accent);\n  transform: scale(1.1);\n}\n\n.mb-profile__mood-btn.is-selected {\n  background: linear-gradient(135deg, rgba(212, 165, 116, 0.2) 0%, rgba(212, 165, 116, 0.05) 100%);\n}\n\n.mood-emoji {\n  font-size: 1.5rem;\n}\n\n.mb-profile__mood-note {\n  width: 100%;\n  max-width: 400px;\n  padding: 12px 16px;\n  border: 1px solid #e0dcd4;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  margin-bottom: 15px;\n}\n\n.mb-profile__mood-note:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.mb-profile__mood-log-btn {\n  padding: 12px 30px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  border: none;\n  border-radius: 25px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: opacity 0.2s ease;\n}\n\n.mb-profile__mood-log-btn:hover {\n  opacity: 0.9;\n}\n\n.mb-profile__mood-history h4 {\n  font-size: 0.95rem;\n  color: #6b6b8a;\n  margin-bottom: 15px;\n}\n\n.mb-profile__mood-chart {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 16px;\n  padding: 20px;\n  background: var(--user-accent-soft);\n  border-radius: 12px;\n  min-height: auto;\n}\n\n.mb-profile__mood-chart .mood-bar-old {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-profile__mood-chart .mood-bar-old .bar {\n  width: 100%;\n  max-width: 30px;\n  background: linear-gradient(to top, var(--user-accent), var(--user-accent-light));\n  border-radius: 4px 4px 0 0;\n  transition: height 0.3s ease;\n}\n\n.mb-profile__mood-chart .mood-bar-old .date {\n  font-size: 0.7rem;\n  color: #9a9ab5;\n}\n\n.mb-profile__goals-add {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n  flex-wrap: wrap;\n}\n\n.mb-profile__goal-input-row {\n  display: flex;\n  gap: 10px;\n  align-items: stretch;\n  flex-wrap: wrap;\n}\n\n.mb-profile__goal-input {\n  flex: 1;\n  min-width: 200px;\n  padding: 12px 16px;\n  border: 1px solid #e0dcd4;\n  border-radius: 10px;\n  font-size: 0.9rem;\n  background: #faf9f6;\n  transition: border-color 0.2s ease;\n}\n\n.mb-profile__goal-input:focus {\n  border-color: var(--user-accent);\n  outline: none;\n}\n\n.mb-profile__goal-select {\n  padding: 12px 16px;\n  border: 1px solid #e0dcd4;\n  border-radius: 10px;\n  font-size: 0.9rem;\n  background: #faf9f6;\n  min-width: 140px;\n  cursor: pointer;\n  transition: border-color 0.2s ease;\n}\n\n.mb-profile__goal-select:focus {\n  border-color: var(--user-accent);\n  outline: none;\n}\n\n.mb-profile__goal-add-btn {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  padding: 12px 22px;\n  background: var(--user-accent);\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: opacity 0.2s ease, transform 0.15s ease;\n  white-space: nowrap;\n}\n\n.mb-profile__goal-add-btn:hover {\n  opacity: 0.88;\n  transform: translateY(-1px);\n}\n\n.mb-profile__goals-list {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  margin-top: 8px;\n}\n\n.mb-profile__goal-item {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  padding: 14px 18px;\n  background: var(--user-accent-soft);\n  border-radius: 12px;\n  border: 1px solid rgba(0,0,0,0.05);\n  border-left: 4px solid var(--user-accent);\n  transition: box-shadow 0.2s ease;\n}\n\n.mb-profile__goal-item:hover {\n  box-shadow: 0 2px 8px rgba(0,0,0,0.06);\n}\n\n.mb-profile__goal-item[data-category=\"mindfulness\"] { border-left-color: #8b5cf6; }\n.mb-profile__goal-item[data-category=\"exercise\"] { border-left-color: #10b981; }\n.mb-profile__goal-item[data-category=\"social\"] { border-left-color: #f59e0b; }\n.mb-profile__goal-item[data-category=\"sleep\"] { border-left-color: #6366f1; }\n.mb-profile__goal-item[data-category=\"nutrition\"] { border-left-color: #ef4444; }\n.mb-profile__goal-item[data-category=\"self-care\"] { border-left-color: #ec4899; }\n\n.mb-profile__goal-item .goal-check {\n  width: 26px;\n  height: 26px;\n  border: 2.5px solid var(--user-accent);\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  transition: all 0.2s ease;\n}\n\n.mb-profile__goal-item .goal-check:hover {\n  background: rgba(175, 145, 109, 0.1);\n}\n\n.mb-profile__goal-item .goal-check.completed {\n  background: var(--user-accent);\n  color: #fff;\n  border-color: var(--user-accent);\n}\n\n.mb-profile__goal-item .goal-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.mb-profile__goal-item .goal-title {\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 4px;\n  font-size: 0.95rem;\n}\n\n.mb-profile__goal-item .goal-category {\n  font-size: 0.78rem;\n  color: #9a9ab5;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-weight: 500;\n  text-transform: capitalize;\n}\n\n.mb-profile__goal-item .goal-delete {\n  color: #c0c0d0;\n  cursor: pointer;\n  transition: color 0.2s ease;\n  padding: 4px;\n  border-radius: 6px;\n}\n\n.mb-profile__goal-item .goal-delete:hover {\n  color: #ef4444;\n  background: rgba(239, 68, 68, 0.08);\n}\n\n.mb-profile__goals-empty {\n  text-align: center;\n  padding: 30px 20px;\n  color: #9a9ab5;\n  font-size: 0.9rem;\n}\n\n.mb-profile__streak-display {\n  display: flex;\n  gap: 16px;\n  justify-content: center;\n  margin-bottom: 28px;\n}\n\n.mb-profile__streak-current,\n.mb-profile__streak-best {\n  text-align: center;\n  padding: 22px 36px;\n  background: var(--user-accent-soft);\n  border-radius: 16px;\n  border: 1px solid rgba(0,0,0,0.06);\n  flex: 1;\n  max-width: 200px;\n  position: relative;\n  overflow: hidden;\n}\n\n.mb-profile__streak-current::before,\n.mb-profile__streak-best::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  background: linear-gradient(90deg, var(--user-accent), var(--user-accent-light, var(--user-accent)));\n  border-radius: 16px 16px 0 0;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-current,\n[data-theme=\"dark\"] .mb-profile__streak-best {\n  background: #2d2b3d;\n  border-color: rgba(255,255,255,0.08);\n}\n\n.streak-number {\n  display: block;\n  font-size: 2.8rem;\n  font-weight: 700;\n  color: var(--user-accent);\n  line-height: 1;\n  margin-bottom: 4px;\n}\n\n.streak-label {\n  font-size: 0.8rem;\n  color: #6b6b8a;\n  margin-top: 6px;\n  font-weight: 500;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n[data-theme=\"dark\"] .streak-label {\n  color: #9a9ab5;\n}\n\n.mb-profile__streak-calendar {\n  display: block;\n  background: #faf9f6;\n  border-radius: 14px;\n  padding: 18px;\n  border: 1px solid rgba(0,0,0,0.06);\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-calendar {\n  background: #2d2b3d;\n  border-color: rgba(255,255,255,0.08);\n}\n\n.streak-calendar-header {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 6px;\n  margin-bottom: 8px;\n}\n\n.streak-day-label {\n  text-align: center;\n  font-size: 0.7rem;\n  font-weight: 600;\n  color: #888;\n  font-family: 'Poppins', sans-serif;\n  text-transform: uppercase;\n  letter-spacing: 0.3px;\n}\n\n.streak-calendar-grid {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 6px;\n}\n\n[data-theme=\"dark\"] .streak-day-label {\n  color: #777;\n}\n\n.streak-day {\n  aspect-ratio: 1;\n  border-radius: 8px;\n  background: #eae6de;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.8rem;\n  font-weight: 500;\n  color: #9a9ab5;\n  min-width: 32px;\n  min-height: 32px;\n  transition: transform 0.15s ease, box-shadow 0.15s ease;\n}\n\n.streak-day.active {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light, var(--user-accent)) 100%);\n  color: #fff;\n  font-weight: 600;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.12);\n}\n\n.streak-day.today {\n  box-shadow: 0 0 0 2.5px var(--user-accent);\n  font-weight: 700;\n}\n\n.streak-day.today.active {\n  box-shadow: 0 0 0 2.5px #fff, 0 0 0 4.5px var(--user-accent);\n}\n\n[data-theme=\"dark\"] .streak-day {\n  background: #3d3a50;\n  color: #9a9ab5;\n}\n\n[data-theme=\"dark\"] .streak-day.today {\n  box-shadow: 0 0 0 2.5px var(--user-accent-light, var(--user-accent));\n}\n\n[data-theme=\"dark\"] .streak-day.today.active {\n  box-shadow: 0 0 0 2.5px #2d2b3d, 0 0 0 4.5px var(--user-accent-light, var(--user-accent));\n}\n\n.streak-milestone-badges {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin-top: 20px;\n}\n\n.streak-milestone-badge {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 14px;\n  border-radius: 20px;\n  font-size: 0.78rem;\n  font-weight: 600;\n  background: #f0ece4;\n  color: #6b6b8a;\n  border: 1px solid rgba(0,0,0,0.06);\n}\n\n.streak-milestone-badge.earned {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light, var(--user-accent)) 100%);\n  color: #fff;\n  border-color: transparent;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n}\n\n[data-theme=\"dark\"] .streak-milestone-badge {\n  background: #3d3a50;\n  color: #9a9ab5;\n  border-color: rgba(255,255,255,0.08);\n}\n\n[data-theme=\"dark\"] .streak-milestone-badge.earned {\n  border-color: transparent;\n}\n\n.mb-profile__settings-section h3 {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-profile__settings-section h3 ion-icon {\n  color: var(--user-accent);\n}\n\n.mb-profile__settings-item label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-profile__settings-item label ion-icon {\n  color: #9a9ab5;\n}\n\n.mb-profile__settings-toggle .toggle-info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.mb-profile__settings-toggle .toggle-info small {\n  font-size: 0.75rem;\n  color: #9a9ab5;\n}\n\n.mb-profile__theme-picker {\n  margin-bottom: 20px;\n}\n\n.mb-profile__theme-picker label {\n  display: block;\n  margin-bottom: 12px;\n  font-weight: 500;\n  color: #1a1a2e;\n}\n\n.mb-profile__color-options {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.mb-profile__color-btn {\n  width: 40px;\n  height: 40px;\n  border: 3px solid transparent;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: transform 0.2s ease, border-color 0.2s ease;\n}\n\n.mb-profile__color-btn:hover {\n  transform: scale(1.1);\n}\n\n.mb-profile__color-btn.is-active {\n  border-color: #1a1a2e;\n  box-shadow: 0 0 0 3px rgba(26, 26, 46, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-profile__wellness-section,\n[data-theme=\"dark\"] .mb-profile__saved-card {\n  background: #2d2b3d;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge {\n  background: #252540;\n  border: 1px solid rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge.unlocked {\n  background: linear-gradient(135deg, #2d2b45 0%, #252540 100%);\n  border: 2px solid rgba(212, 165, 116, 0.6);\n  box-shadow: 0 0 25px rgba(212, 165, 116, 0.25);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge h4 {\n  color: #e8e8f0;\n}\n\n[data-theme=\"dark\"] .mb-profile__badge.unlocked h4 {\n  color: #f5e8d8;\n}\n\n[data-theme=\"dark\"] .mb-profile__badge p {\n  color: rgba(255, 255, 255, 0.5);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge .badge-lock-icon {\n  color: rgba(255, 255, 255, 0.35);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge-icon {\n  background: rgba(100, 100, 140, 0.2);\n  color: #7a7a9a;\n}\n\n[data-theme=\"dark\"] .mb-profile__badge.unlocked .mb-profile__badge-icon {\n  background: linear-gradient(135deg, rgba(212, 165, 116, 0.35) 0%, rgba(184, 155, 94, 0.2) 100%);\n  color: var(--user-accent-grad-end);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge .badge-points {\n  color: rgba(255, 255, 255, 0.4);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge.unlocked .badge-points {\n  color: var(--user-accent-grad-end);\n}\n\n[data-theme=\"dark\"] .mb-profile__filter {\n  background: #2d2b3d;\n  border-color: #3d3a50;\n  color: #b0b0c8;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item,\n[data-theme=\"dark\"] .mb-profile__mood-chart {\n  background: #2d2b3d;\n  border-color: rgba(255,255,255,0.08);\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item .goal-title {\n  color: #e0e0e8;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-current,\n[data-theme=\"dark\"] .mb-profile__streak-best {\n  border-color: #3d3a50;\n}\n\n[data-theme=\"dark\"] .streak-number {\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-label {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .mb-profile__wellness-section h3 {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__empty-state {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n[data-theme=\"dark\"] .mb-profile__empty-state ion-icon {\n  color: rgba(255, 255, 255, 0.4);\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-note,\n[data-theme=\"dark\"] .mb-profile__goal-input,\n[data-theme=\"dark\"] .mb-profile__goal-select {\n  background: #2d2b3d;\n  border-color: #3d3a50;\n  color: #e0e0e8;\n}\n\n@media (max-width: 992px) {\n  .mb-profile__achievements-grid {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n\n@media (max-width: 768px) {\n  .mb-profile__badges-row {\n    flex-direction: column;\n    align-items: center;\n  }\n  \n  .mb-profile__achievements-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  \n  .mb-profile__streak-display {\n    flex-direction: column;\n    gap: 15px;\n  }\n  \n  .mb-profile__goals-add {\n    flex-direction: column;\n  }\n  \n  .mb-profile__mood-selector {\n    gap: 10px;\n  }\n  \n  .mb-profile__mood-btn {\n    width: 42px;\n    height: 42px;\n  }\n}\n\n.mb-profile__saved-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 25px;\n}\n\n.mb-profile__saved-card {\n  background: #fff;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.mb-profile__saved-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);\n}\n\n.saved-card-link {\n  display: block;\n  text-decoration: none;\n  color: inherit;\n}\n\n.saved-card-link img {\n  width: 100%;\n  height: 160px;\n  object-fit: cover;\n}\n\n.saved-card-link .card-body {\n  padding: 20px;\n}\n\n.saved-category {\n  display: inline-block;\n  padding: 4px 12px;\n  background: rgba(184, 155, 94, 0.1);\n  color: var(--user-accent);\n  font-size: 0.75rem;\n  font-weight: 600;\n  border-radius: 20px;\n  margin-bottom: 10px;\n}\n\n.saved-card-link h4 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.05rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 10px;\n  line-height: 1.4;\n}\n\n.saved-date {\n  font-size: 0.8rem;\n  color: #8888a0;\n}\n\n[data-theme=\"dark\"] .mb-profile__saved-card {\n  background: #2a2a4a;\n}\n\n[data-theme=\"dark\"] .saved-card-link h4 {\n  color: #f0f0f5;\n}\n\n[data-theme=\"dark\"] .saved-category {\n  background: rgba(184, 155, 94, 0.2);\n}\n\n@media (max-width: 768px) {\n  .mb-profile__saved-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n.mb-profile__social-links {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 18px;\n}\n\n.social-link {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 42px;\n  height: 42px;\n  border-radius: 12px;\n  background: color-mix(in srgb, var(--profile-accent, var(--user-accent)) 15%, transparent);\n  color: var(--profile-accent, var(--user-accent));\n  transition: all 0.3s ease;\n  text-decoration: none;\n}\n\n.social-link:hover {\n  background: var(--profile-accent, var(--user-accent));\n  color: #fff;\n  transform: translateY(-3px);\n  box-shadow: 0 6px 20px color-mix(in srgb, var(--profile-accent, var(--user-accent)) 35%, transparent);\n}\n\n.mb-profile__social-links:empty,\n.mb-profile__social-links:not(:has(a:not([hidden]))) {\n  display: none;\n}\n\n.social-link ion-icon {\n  font-size: 1.3rem;\n}\n\n.social-link::after {\n  content: attr(data-tooltip);\n  position: absolute;\n  bottom: calc(100% + 8px);\n  left: 50%;\n  transform: translateX(-50%) translateY(5px);\n  padding: 6px 12px;\n  background: #1a1a2e;\n  color: #fff;\n  font-size: 0.75rem;\n  font-weight: 500;\n  border-radius: 6px;\n  white-space: nowrap;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.2s ease;\n  pointer-events: none;\n}\n\n.social-link:hover::after {\n  opacity: 1;\n  visibility: visible;\n  transform: translateX(-50%) translateY(0);\n}\n\n[data-theme=\"dark\"] .social-link {\n  background: rgba(184, 155, 94, 0.2);\n}\n\n[data-theme=\"dark\"] .social-link::after {\n  background: #f0f0f5;\n  color: #1a1a2e;\n}\n\n.mb-profile__right-section {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  gap: 20px;\n  margin-left: auto;\n  flex-shrink: 0;\n  min-width: 320px;\n}\n\n.mb-profile__stats-card {\n  background: linear-gradient(135deg, #fff 0%, #faf8f5 100%);\n  border-radius: 16px;\n  padding: 20px 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n  border: 1px solid rgba(0, 0, 0, 0.04);\n}\n\n[data-theme=\"dark\"] .mb-profile__stats-card {\n  background: linear-gradient(135deg, #2a2a4a 0%, #252545 100%);\n  border-color: rgba(255, 255, 255, 0.06);\n}\n\n.mb-profile__stats {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin-bottom: 16px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n}\n\n[data-theme=\"dark\"] .mb-profile__stats {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.mb-profile__stat {\n  text-align: center;\n  padding: 10px 12px;\n  border-radius: 12px;\n  background: rgba(0, 0, 0, 0.02);\n  transition: all 0.3s ease;\n  cursor: default;\n  min-width: 50px;\n}\n\n.mb-profile__stat:hover {\n  background: rgba(184, 155, 94, 0.1);\n  transform: translateY(-2px);\n}\n\n[data-theme=\"dark\"] .mb-profile__stat {\n  background: rgba(255, 255, 255, 0.04);\n}\n\n[data-theme=\"dark\"] .mb-profile__stat:hover {\n  background: color-mix(in srgb, var(--profile-accent, var(--user-accent)) 15%, transparent);\n}\n\n.mb-profile__stat-num {\n  display: block;\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.35rem;\n  font-weight: 700;\n  color: var(--profile-accent, #1a1a2e);\n  line-height: 1.2;\n}\n\n.mb-profile__stat.is-clickable {\n  cursor: pointer;\n}\n\n.mb-profile__stat.is-clickable:hover .mb-profile__stat-num {\n  text-decoration: underline;\n}\n\n[data-theme=\"dark\"] .mb-profile__stat-num {\n  color: #fff;\n}\n\n.mb-profile__stat-label {\n  font-size: 0.7rem;\n  color: #6b6b8a;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  font-weight: 500;\n}\n\n.mb-profile__stats-badges {\n  display: flex;\n  gap: 10px;\n  justify-content: center;\n}\n\n.mb-profile__quick-actions {\n  display: flex;\n  flex-direction: row;\n  gap: 10px;\n  flex-wrap: wrap;\n  align-items: center;\n}\n\n.mb-profile__edit-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background: var(--profile-accent, var(--user-accent));\n  color: #fff;\n  border: none;\n  border-radius: 25px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px color-mix(in srgb, var(--profile-accent, var(--user-accent)) 30%, transparent);\n}\n\n.mb-profile__edit-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px color-mix(in srgb, var(--profile-accent, var(--user-accent)) 40%, transparent);\n}\n\n.mb-profile__edit-btn ion-icon {\n  font-size: 1.1rem;\n}\n\n.mb-profile__action-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 11px 20px;\n  background: transparent;\n  color: #4a4a68;\n  border: 2px solid #e0dcd4;\n  border-radius: 25px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__action-btn:hover {\n  border-color: var(--user-accent);\n  color: var(--user-accent);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(184, 155, 94, 0.15);\n}\n\n.mb-profile__action-btn ion-icon {\n  font-size: 1rem;\n}\n\n.mb-profile__follow-container {\n  display: inline-flex;\n}\n\n.mb-profile__follow-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 12px 24px;\n  background: linear-gradient(135deg, #4a7c59 0%, #6ba17a 100%);\n  color: #fff;\n  border: none;\n  border-radius: 25px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(74, 124, 89, 0.3);\n}\n\n.mb-profile__follow-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(74, 124, 89, 0.4);\n}\n\n.mb-profile__follow-btn:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.mb-profile__follow-btn.is-following {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent-soft) 100%);\n  color: #4a4a68;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.mb-profile__follow-btn.is-following:hover {\n  background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);\n  color: #fff;\n  box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);\n}\n\n.mb-profile__follow-btn ion-icon {\n  font-size: 1.1rem;\n}\n\n[data-theme=\"dark\"] .mb-profile__follow-btn.is-following {\n  background: linear-gradient(135deg, #3d3a50 0%, #4a4868 100%);\n  color: #e0e0ea;\n}\n\n[data-theme=\"dark\"] .mb-profile__follow-btn.is-following:hover {\n  background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);\n  color: #fff;\n}\n\n.mb-profile__action-btn.is-copied {\n  background: #10b981;\n  border-color: #10b981;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__action-btn {\n  border-color: #3a3a5a;\n  color: #b0b0c0;\n}\n\n[data-theme=\"dark\"] .mb-profile__action-btn:hover {\n  border-color: var(--user-accent-light);\n  color: var(--user-accent-light);\n}\n\n.mb-profile__completion {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  padding: 15px 20px;\n  background: linear-gradient(135deg, #faf8f5 0%, #f5f0ea 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(184, 155, 94, 0.2);\n  flex-shrink: 0;\n  min-width: 280px;\n}\n\n[data-theme=\"dark\"] .mb-profile__completion {\n  background: linear-gradient(135deg, #2a2a4a 0%, #252545 100%);\n  border-color: rgba(184, 155, 94, 0.3);\n}\n\n.completion-ring {\n  position: relative;\n  width: 60px;\n  height: 60px;\n  flex-shrink: 0;\n}\n\n.completion-ring svg {\n  transform: rotate(-90deg);\n  width: 100%;\n  height: 100%;\n}\n\n.completion-ring__bg {\n  fill: none;\n  stroke: #e0e0ea;\n  stroke-width: 6;\n}\n\n[data-theme=\"dark\"] .completion-ring__bg {\n  stroke: #3a3a5a;\n}\n\n.completion-ring__progress {\n  fill: none;\n  stroke: var(--user-accent);\n  stroke-width: 6;\n  stroke-linecap: round;\n  stroke-dasharray: 283;\n  stroke-dashoffset: 283;\n  transition: stroke-dashoffset 1s ease-out;\n}\n\n.completion-ring.is-complete .completion-ring__progress {\n  stroke: #4caf50;\n}\n\n.completion-ring__text {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  font-weight: 700;\n  color: var(--user-accent);\n}\n\n.completion-ring.is-complete .completion-ring__text {\n  color: #4caf50;\n}\n\n.completion-info {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.completion-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .completion-title {\n  color: #f0f0f5;\n}\n\n.completion-label {\n  font-size: 0.8rem;\n  color: #6b6b8a;\n  line-height: 1.4;\n}\n\n[data-theme=\"dark\"] .completion-label {\n  color: #a0a0b8;\n}\n\n.completion-label.is-complete {\n  color: #4caf50;\n}\n\n.mb-profile__stat {\n  transition: all 0.3s ease;\n  padding: 10px;\n  border-radius: 12px;\n}\n\n.mb-profile__stat:hover {\n  background: rgba(184, 155, 94, 0.08);\n  transform: translateY(-3px);\n}\n\n.mb-profile__tab {\n  transition: all 0.3s ease;\n}\n\n.mb-profile__tab:hover:not(.is-active) {\n  background: rgba(184, 155, 94, 0.1);\n  transform: translateY(-2px);\n}\n\n.mb-profile__activity-item {\n  transition: all 0.3s ease;\n}\n\n.mb-profile__activity-item:hover {\n  transform: translateX(5px);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\n}\n\n.mb-profile__badge {\n  transition: all 0.3s ease;\n}\n\n.mb-profile__badge:hover:not(.locked) {\n  transform: translateY(-5px) scale(1.02);\n  box-shadow: 0 8px 25px rgba(184, 155, 94, 0.2);\n}\n\n.mb-profile__goal-item {\n  transition: all 0.3s ease;\n}\n\n.mb-profile__goal-item:hover {\n  transform: translateX(5px);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\n}\n\n.mb-profile__filter {\n  transition: all 0.3s ease;\n}\n\n.mb-profile__filter:hover:not(.is-active) {\n  background: rgba(184, 155, 94, 0.15);\n  transform: scale(1.05);\n}\n\n.mb-profile__tab:focus-visible,\n.mb-profile__action-btn:focus-visible,\n.mb-profile__edit-btn:focus-visible,\n.mb-profile__filter:focus-visible {\n  outline: 2px solid var(--user-accent);\n  outline-offset: 2px;\n}\n\n@keyframes countUp {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.mb-profile__stat-num {\n  animation: countUp 0.5s ease-out;\n}\n\n@keyframes completePulse {\n  0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }\n  50% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }\n}\n\n.completion-ring.is-complete {\n  animation: completePulse 2s ease-in-out infinite;\n  border-radius: 50%;\n}\n\n.completion-ring.is-complete .completion-ring__progress {\n  stroke: #10b981;\n}\n\n.completion-ring.is-complete + .completion-label {\n  color: #10b981;\n}\n\n@media (max-width: 768px) {\n  .mb-profile__completion {\n    order: -1;\n    margin-bottom: 15px;\n  }\n  \n  .completion-ring {\n    width: 60px;\n    height: 60px;\n  }\n  \n  .completion-ring__text {\n    font-size: 0.85rem;\n  }\n  \n  .mb-profile__quick-actions {\n    justify-content: center;\n  }\n}\n\n.mb-profile__preview-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 9999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__preview-modal.is-visible {\n  opacity: 1;\n  visibility: visible;\n}\n\n.preview-modal__backdrop {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n\n.preview-modal__content {\n  position: relative;\n  background: #fff;\n  border-radius: 20px;\n  max-width: 400px;\n  width: 90%;\n  overflow: hidden;\n  transform: translateY(20px);\n  transition: transform 0.3s ease;\n}\n\n.mb-profile__preview-modal.is-visible .preview-modal__content {\n  transform: translateY(0);\n}\n\n.preview-modal__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #eee;\n}\n\n.preview-modal__header h3 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n}\n\n.preview-modal__close {\n  width: 36px;\n  height: 36px;\n  border: none;\n  background: #f0f0f5;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.preview-modal__close:hover {\n  background: #e0e0ea;\n}\n\n.preview-modal__close ion-icon {\n  font-size: 1.3rem;\n  color: #666;\n}\n\n.preview-modal__body {\n  padding: 20px;\n}\n\n.preview-card {\n  background: var(--user-accent-soft);\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n}\n\n.preview-cover {\n  height: 80px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 50%, #8fa67a 100%);\n  background-size: cover;\n  background-position: center;\n}\n\n.preview-info {\n  padding: 15px;\n  text-align: center;\n  margin-top: -40px;\n}\n\n.preview-avatar {\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  border: 3px solid #fff;\n  object-fit: cover;\n  background: #f0f0f0;\n}\n\n.preview-info h4 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin: 10px 0 5px;\n}\n\n.preview-info p {\n  font-size: 0.85rem;\n  color: #6b6b8a;\n  margin-bottom: 12px;\n}\n\n.preview-stats {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  font-size: 0.8rem;\n  color: #8888a0;\n}\n\n.preview-note {\n  text-align: center;\n  font-size: 0.8rem;\n  color: #8888a0;\n  margin-top: 15px;\n}\n\n[data-theme=\"dark\"] .preview-modal__content {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .preview-modal__header {\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .preview-modal__header h3 {\n  color: #f0f0f5;\n}\n\n[data-theme=\"dark\"] .preview-modal__close {\n  background: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .preview-card {\n  background: #2a2a4a;\n}\n\n[data-theme=\"dark\"] .preview-info h4 {\n  color: #f0f0f5;\n}\n\n@media (max-width: 900px) {\n  .mb-profile__info {\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n  }\n  \n  .mb-profile__details {\n    text-align: center;\n  }\n  \n  .mb-profile__right-section {\n    margin-left: 0;\n    align-items: center;\n    width: 100%;\n    min-width: unset;\n  }\n  \n  .mb-profile__stats-card {\n    width: 100%;\n  }\n  \n  .mb-profile__stats {\n    justify-content: center;\n  }\n  \n  .mb-profile__stat {\n    min-width: 45px;\n    padding: 8px 10px;\n  }\n  \n  .mb-profile__stat-num {\n    font-size: 1.15rem;\n  }\n  \n  .mb-profile__quick-actions {\n    justify-content: center;\n  }\n  \n  .mb-profile__edit-btn {\n    padding: 10px 20px;\n    font-size: 0.85rem;\n  }\n  \n  .mb-profile__action-btn {\n    padding: 9px 16px;\n    font-size: 0.8rem;\n  }\n  \n  .mb-profile__social-links {\n    justify-content: center;\n  }\n  \n  .social-link {\n    width: 38px;\n    height: 38px;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .mb-profile__stat,\n  .mb-profile__tab,\n  .mb-profile__activity-item,\n  .mb-profile__badge,\n  .mb-profile__goal-item,\n  .mb-profile__filter,\n  .mb-profile__action-btn,\n  .social-link,\n  .completion-ring__progress {\n    transition: none;\n  }\n  \n  .mb-profile__stat-num {\n    animation: none;\n  }\n  \n  .completion-ring.is-complete {\n    animation: none;\n  }\n  \n  .mb-profile__preview-modal,\n  .preview-modal__content {\n    transition: none;\n  }\n}\n\n.mb-follow-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 9999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.5);\n  padding: 20px;\n}\n\n.mb-follow-modal[hidden] {\n  display: none;\n}\n\n.mb-follow-modal__content {\n  background: #fff;\n  border-radius: 16px;\n  width: 100%;\n  max-width: 400px;\n  max-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .mb-follow-modal__content {\n  background: #2d2b3d;\n}\n\n.mb-follow-modal__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 18px 20px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-follow-modal__header {\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n.mb-follow-modal__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .mb-follow-modal__title {\n  color: #fff;\n}\n\n.mb-follow-modal__close {\n  width: 32px;\n  height: 32px;\n  border: none;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.mb-follow-modal__close:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-follow-modal__close {\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n}\n\n.mb-follow-modal__list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 10px 0;\n}\n\n.mb-follow-modal__empty {\n  text-align: center;\n  padding: 40px 20px;\n  color: #6b6b8a;\n}\n\n.mb-follow-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 20px;\n  transition: background 0.2s ease;\n}\n\n.mb-follow-item:hover {\n  background: rgba(0, 0, 0, 0.03);\n}\n\n[data-theme=\"dark\"] .mb-follow-item:hover {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n.mb-follow-item__avatar {\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  object-fit: cover;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  flex-shrink: 0;\n}\n\n.mb-follow-item__avatar--initials {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-weight: 700;\n  font-size: 0.95rem;\n  letter-spacing: 0.5px;\n}\n\n.mb-follow-item__info {\n  flex: 1;\n}\n\n.mb-follow-item__name {\n  font-weight: 600;\n  color: #1a1a2e;\n  text-decoration: none;\n  transition: color 0.2s ease;\n}\n\n.mb-follow-item__name:hover {\n  color: var(--profile-accent, var(--user-accent));\n}\n\n[data-theme=\"dark\"] .mb-follow-item__name {\n  color: #fff;\n}\n\n.mb-follow-item__bio {\n  font-size: 0.85rem;\n  color: #6b6b8a;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 200px;\n}\n\n.mb-profile__danger-zone h3 {\n  color: #dc3545;\n}\n\n.mb-profile__danger-zone .mb-profile__logout-btn {\n  margin-bottom: 10px;\n}\n\n.mb-profile__delete-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: #fff;\n  color: #dc3545;\n  border: 2px solid #dc3545;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  width: 100%;\n  justify-content: center;\n}\n\n.mb-profile__delete-btn:hover {\n  background: #dc3545;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__delete-btn {\n  background: transparent;\n}\n\n.mb-delete-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.6);\n  padding: 20px;\n}\n\n.mb-delete-modal[hidden] {\n  display: none;\n}\n\n.mb-delete-modal__content {\n  background: #fff;\n  border-radius: 16px;\n  padding: 30px;\n  max-width: 400px;\n  text-align: center;\n}\n\n[data-theme=\"dark\"] .mb-delete-modal__content {\n  background: #2d2b3d;\n}\n\n.mb-delete-modal__icon {\n  font-size: 48px;\n  color: #dc3545;\n  margin-bottom: 15px;\n}\n\n.mb-delete-modal__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.3rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 10px;\n}\n\n[data-theme=\"dark\"] .mb-delete-modal__title {\n  color: #fff;\n}\n\n.mb-delete-modal__text {\n  color: #6b6b8a;\n  margin-bottom: 20px;\n  line-height: 1.6;\n}\n\n.mb-delete-modal__confirm {\n  width: 100%;\n  margin-bottom: 15px;\n}\n\n.mb-delete-modal__confirm input {\n  width: 100%;\n  padding: 12px 15px;\n  border: 2px solid #e0dcd4;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  text-align: center;\n}\n\n.mb-delete-modal__confirm input:focus {\n  outline: none;\n  border-color: #dc3545;\n}\n\n.mb-delete-modal__actions {\n  display: flex;\n  gap: 10px;\n}\n\n.mb-delete-modal__cancel {\n  flex: 1;\n  padding: 12px;\n  background: var(--user-accent-soft);\n  color: #4a4a68;\n  border: none;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.mb-delete-modal__cancel:hover {\n  background: var(--user-accent-light);\n}\n\n.mb-delete-modal__submit {\n  flex: 1;\n  padding: 12px;\n  background: #dc3545;\n  color: #fff;\n  border: none;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  opacity: 0.5;\n  pointer-events: none;\n}\n\n.mb-delete-modal__submit.is-enabled {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.mb-delete-modal__submit.is-enabled:hover {\n  background: #c82333;\n}\n\n.mb-profile__mood-insights {\n  margin-top: 32px;\n  padding-top: 24px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n.mb-profile__mood-insights > h4 {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  margin-bottom: 20px;\n}\n\n.mb-profile__mood-insights > h4 ion-icon {\n  color: var(--profile-accent, var(--user-accent));\n}\n\n.mood-insights__grid {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 16px;\n  margin-bottom: 32px;\n}\n\n@media (max-width: 900px) {\n  .mood-insights__grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (max-width: 500px) {\n  .mood-insights__grid {\n    grid-template-columns: 1fr 1fr;\n    gap: 12px;\n  }\n}\n\n.mood-insight-card {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  padding: 16px;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.mood-insight-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);\n}\n\n.mood-insight-card__icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.mood-insight-card__icon ion-icon {\n  font-size: 1.5rem;\n  color: #fff;\n}\n\n.mood-insight-card__icon--avg {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n}\n\n.mood-insight-card__icon--best {\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n}\n\n.mood-insight-card__icon--entries {\n  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);\n}\n\n.mood-insight-card__icon--streak {\n  background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);\n}\n\n.mood-insight-card__content {\n  display: flex;\n  flex-direction: column;\n}\n\n.mood-insight-card__value {\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  line-height: 1.2;\n}\n\n.mood-insight-card__label {\n  font-size: 0.8rem;\n  color: #777;\n  margin-top: 2px;\n}\n\n.mood-chart-container {\n  margin-bottom: 28px;\n}\n\n.mood-chart-container h5 {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #555;\n  margin-bottom: 16px;\n}\n\n.mood-line-chart {\n  display: flex;\n  background: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n}\n\n.mood-line-chart__y-axis {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  font-size: 1.2rem;\n  padding-right: 12px;\n  border-right: 1px solid var(--user-accent-light);\n  margin-right: 16px;\n}\n\n.mood-line-chart__graph {\n  flex: 1;\n  height: 120px;\n  position: relative;\n}\n\n.mood-line-chart__svg {\n  width: 100%;\n  height: 100%;\n}\n\n.mood-line-chart__area {\n  opacity: 0.8;\n}\n\n.mood-line-chart__line {\n  filter: drop-shadow(0 2px 4px rgba(212, 168, 83, 0.3));\n}\n\n.mood-line-chart__dots circle {\n  fill: var(--gold-crayola, #d4a853);\n  stroke: #fff;\n  stroke-width: 2;\n  cursor: pointer;\n  transition: r 0.2s ease;\n}\n\n.mood-line-chart__dots circle:hover {\n  r: 8;\n}\n\n.mood-line-chart__x-axis {\n  display: flex;\n  justify-content: space-between;\n  padding: 12px 20px 0 60px;\n  font-size: 0.75rem;\n  color: #888;\n}\n\n.mood-distribution h5 {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #555;\n  margin-bottom: 16px;\n}\n\n.mood-distribution__bars {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  background: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n}\n\n.mood-distribution__bars .mood-bar {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 12px;\n  width: 100%;\n}\n\n.mood-bar__emoji {\n  font-size: 1.4rem;\n  width: 28px;\n  text-align: center;\n}\n\n.mood-bar__fill-container {\n  flex: 1;\n  min-width: 100px;\n  height: 20px;\n  background: #f0ebe3;\n  border-radius: 10px;\n  overflow: hidden;\n}\n\n.mood-bar__fill {\n  height: 100%;\n  width: 0%;\n  border-radius: 10px;\n  transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.mood-bar[data-mood=\"very_happy\"] .mood-bar__fill {\n  background: linear-gradient(90deg, #43e97b 0%, #38f9d7 100%);\n}\n\n.mood-bar[data-mood=\"happy\"] .mood-bar__fill {\n  background: linear-gradient(90deg, #a8e063 0%, #56ab2f 100%);\n}\n\n.mood-bar[data-mood=\"neutral\"] .mood-bar__fill {\n  background: linear-gradient(90deg, #ffd86f 0%, #fc6262 100%);\n}\n\n.mood-bar[data-mood=\"sad\"] .mood-bar__fill {\n  background: linear-gradient(90deg, #ff9a9e 0%, #fecfef 100%);\n}\n\n.mood-bar[data-mood=\"very_sad\"] .mood-bar__fill {\n  background: linear-gradient(90deg, #a8caba 0%, #5d4e87 100%);\n}\n\n.mood-bar__count {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #555;\n  min-width: 24px;\n  text-align: right;\n}\n\n[data-theme=\"dark\"] .mood-insight-card {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .mood-insight-card__value {\n  color: #f5f0e8;\n}\n\n[data-theme=\"dark\"] .mood-insight-card__label {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .mood-line-chart {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .mood-line-chart__y-axis {\n  border-color: #4d4a60;\n}\n\n[data-theme=\"dark\"] .mood-distribution__bars {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .mood-bar__fill-container {\n  background: #4d4a60;\n}\n\n[data-theme=\"dark\"] .mood-bar__count {\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .mood-chart-container h5,\n[data-theme=\"dark\"] .mood-distribution h5 {\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-insights > h4 {\n  color: #f5f0e8;\n}\n\n.mb-profile__analytics-section {\n  margin-bottom: 24px;\n}\n\n.mb-profile__section-title {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid #e8e8ed;\n}\n\n.mb-profile__section-title ion-icon {\n  font-size: 22px;\n  color: var(--user-accent-grad-end);\n}\n\n.mb-profile__community-section {\n  background: #fff;\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n}\n\n[data-theme=\"dark\"] .mb-profile__section-title {\n  color: #f1f1f1;\n  border-color: #3a3a50;\n}\n\n[data-theme=\"dark\"] .mb-profile__section-title ion-icon {\n  color: var(--user-accent-light, var(--user-accent));\n}\n\n[data-theme=\"dark\"] .mb-profile__community-section {\n  background: #242440;\n}\n\n.onboarding-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 12px;\n}\n\n.onboarding-modal[hidden] {\n  display: none;\n}\n\n.onboarding-modal__backdrop {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n}\n\n.onboarding-modal__content {\n  position: relative;\n  background: #fff;\n  border-radius: 16px;\n  max-width: 380px;\n  width: 100%;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);\n  animation: onboardingSlideIn 0.3s ease-out;\n}\n\n@keyframes onboardingSlideIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px) scale(0.97);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.onboarding-modal__header {\n  text-align: center;\n  padding: 20px 20px 15px;\n  background: linear-gradient(135deg, var(--user-accent-grad-end) 0%, var(--user-accent-dark) 100%);\n  color: #fff;\n}\n\n.onboarding-modal__icon {\n  width: 50px;\n  height: 50px;\n  margin: 0 auto 10px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n}\n\n.onboarding-modal__title {\n  font-size: 1.25rem;\n  font-weight: 700;\n  margin-bottom: 4px;\n}\n\n.onboarding-modal__subtitle {\n  font-size: 0.85rem;\n  opacity: 0.9;\n}\n\n.onboarding-modal__body {\n  padding: 20px;\n}\n\n.onboarding-modal__body .form-group {\n  margin-bottom: 16px;\n}\n\n.onboarding-modal__body label {\n  display: block;\n  font-weight: 600;\n  font-size: 0.85rem;\n  color: #1a1a2e;\n  margin-bottom: 6px;\n}\n\n.onboarding-modal__body .required {\n  color: #ef4444;\n}\n\n.onboarding-modal__body input,\n.onboarding-modal__body textarea {\n  width: 100%;\n  padding: 10px 12px;\n  border: 2px solid #e5e7eb;\n  border-radius: 10px;\n  font-size: 0.9rem;\n  font-family: inherit;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n  background: #f9fafb;\n}\n\n.onboarding-modal__body input:focus,\n.onboarding-modal__body textarea:focus {\n  outline: none;\n  border-color: var(--user-accent-grad-end);\n  box-shadow: 0 0 0 3px rgba(212, 165, 116, 0.15);\n  background: #fff;\n}\n\n.onboarding-modal__body textarea {\n  resize: vertical;\n  min-height: 60px;\n}\n\n.onboarding-modal__body .form-hint {\n  display: block;\n  font-size: 0.75rem;\n  color: #6b7280;\n  margin-top: 4px;\n}\n\n.onboarding-modal__footer {\n  padding: 12px 20px 20px;\n  text-align: center;\n}\n\n.onboarding-modal__note {\n  font-size: 0.75rem;\n  color: #6b7280;\n  margin-bottom: 10px;\n}\n\n.onboarding-modal__note i {\n  margin-right: 5px;\n}\n\n.onboarding-modal__footer .btn-primary {\n  width: 100%;\n  padding: 12px 20px;\n  background: linear-gradient(135deg, var(--user-accent-grad-end) 0%, var(--user-accent-dark) 100%);\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;\n}\n\n.onboarding-modal__footer .btn-primary:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 16px rgba(212, 165, 116, 0.35);\n}\n\n.onboarding-modal__footer .btn-primary:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.onboarding-modal__footer .btn-primary i {\n  margin-right: 6px;\n}\n\n@media (max-width: 400px) {\n  .onboarding-modal {\n    padding: 8px;\n  }\n  \n  .onboarding-modal__content {\n    max-width: 100%;\n    border-radius: 12px;\n  }\n  \n  .onboarding-modal__header {\n    padding: 16px 16px 12px;\n  }\n  \n  .onboarding-modal__icon {\n    width: 40px;\n    height: 40px;\n    font-size: 1.25rem;\n  }\n  \n  .onboarding-modal__title {\n    font-size: 1.1rem;\n  }\n  \n  .onboarding-modal__subtitle {\n    font-size: 0.8rem;\n  }\n  \n  .onboarding-modal__body {\n    padding: 16px;\n  }\n  \n  .onboarding-modal__footer {\n    padding: 10px 16px 16px;\n  }\n}\n\n[data-theme=\"dark\"] .onboarding-modal__content {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .onboarding-modal__header {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n}\n\n[data-theme=\"dark\"] .onboarding-modal__body label {\n  color: #e5e5e5;\n}\n\n[data-theme=\"dark\"] .onboarding-modal__body input,\n[data-theme=\"dark\"] .onboarding-modal__body textarea {\n  background: #2d2b3d;\n  border-color: #3d3a50;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .onboarding-modal__body input:focus,\n[data-theme=\"dark\"] .onboarding-modal__body textarea:focus {\n  border-color: var(--user-accent-light, var(--user-accent));\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb, 175, 145, 109), 0.2);\n  background: #2d2b3d;\n}\n\n[data-theme=\"dark\"] .onboarding-modal__body .form-hint,\n[data-theme=\"dark\"] .onboarding-modal__note {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .onboarding-modal__footer .btn-primary {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n}\n\n/* === MOOD ENTRY DELETE BUTTON === */\n.mood-entry-delete {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background: none;\n  border: none;\n  color: #ccc;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  opacity: 0;\n  font-size: 0.85rem;\n}\n\n.mood-entry-card:hover .mood-entry-delete {\n  opacity: 1;\n}\n\n.mood-entry-delete:hover {\n  color: #dc3545;\n  background: rgba(220, 53, 69, 0.1);\n}\n\n[data-theme=\"dark\"] .mood-entry-delete {\n  color: #666;\n}\n\n[data-theme=\"dark\"] .mood-entry-delete:hover {\n  color: #ff6b6b;\n  background: rgba(255, 107, 107, 0.15);\n}\n\n.mood-count-bar {\n  width: 100%;\n  text-align: center;\n  font-size: 0.85rem;\n  color: #8b8ba3;\n  padding: 8px 0 12px;\n  font-weight: 500;\n}\n\n.mood-load-more-wrapper {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  padding: 16px 0 4px;\n}\n\n.mood-load-more-btn {\n  background: var(--user-accent, #AF916D);\n  color: #fff;\n  border: none;\n  padding: 10px 28px;\n  border-radius: 10px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: opacity 0.2s ease, transform 0.15s ease;\n}\n\n.mood-load-more-btn:hover {\n  opacity: 0.88;\n  transform: translateY(-1px);\n}\n\n[data-theme=\"dark\"] .mood-count-bar {\n  color: #9a9ab5;\n}\n","path":null,"size_bytes":73464,"size_tokens":null},"js/settings.js":{"content":"// ==================== SETTINGS ====================\n\n(function() {\n  'use strict';\n\n  // --- Storage Keys ---\n  const STORAGE_KEYS = {\n    theme: 'mindbalance_theme',\n    fontSize: 'mindbalance_font_size',\n    reduceMotion: 'mindbalance_reduce_motion',\n    highContrast: 'mindbalance_high_contrast',\n    colorblind: 'mindbalance_colorblind',\n    adhdMode: 'mindbalance_adhd_mode',\n    dyslexiaFont: 'mindbalance_dyslexia_font',\n    accentColor: 'mindbalance_accent_color'\n  };\n\n  // --- Accent Colors ---\n  const ACCENT_COLORS = {\n    gold:   { hex: '#af916d', hover: '#9d8260', rgb: '175, 145, 109', light: '#d4c4a8', soft: '#f5f0e8', dark: '#7a6548', gradEnd: '#d4a574', text: '#6b5635' },\n    purple: { hex: '#9b7ed9', hover: '#8a6dc8', rgb: '155, 126, 217', light: '#c9b8ec', soft: '#f3eefb', dark: '#6b4fb5', gradEnd: '#b99ae6', text: '#5a3d9e' },\n    blue:   { hex: '#4a90d9', hover: '#3d7fc8', rgb: '74, 144, 217',  light: '#a3c8ed', soft: '#eaf2fb', dark: '#2d6ab0', gradEnd: '#6daeed', text: '#245a8c' },\n    green:  { hex: '#4db896', hover: '#3fa884', rgb: '77, 184, 150',  light: '#a3dbc7', soft: '#e8f7f1', dark: '#2e8a6a', gradEnd: '#6fd4aa', text: '#267558' },\n    teal:   { hex: '#38b2ac', hover: '#2d9d98', rgb: '56, 178, 172',  light: '#96d8d4', soft: '#e6f5f4', dark: '#238079', gradEnd: '#5fccc6', text: '#1d6b65' },\n    pink:   { hex: '#d97eab', hover: '#c86d9a', rgb: '217, 126, 171', light: '#ecbdd5', soft: '#fbeef4', dark: '#b4547f', gradEnd: '#e9a3c3', text: '#993f6a' },\n    orange: { hex: '#e09c5c', hover: '#d08b4b', rgb: '224, 156, 92',  light: '#f0cca3', soft: '#fdf3e8', dark: '#b87430', gradEnd: '#edb87a', text: '#9a6228' },\n    red:    { hex: '#e07070', hover: '#d05f5f', rgb: '224, 112, 112', light: '#f0b3b3', soft: '#fdeaea', dark: '#b84444', gradEnd: '#ed9494', text: '#9a3535' }\n  };\n\n  const DEFAULT_ACCENT = 'gold';\n\n  // --- Preference Helpers ---\n  function getPreference(key, defaultValue) {\n    try {\n      const value = localStorage.getItem(key);\n      return value !== null ? value : defaultValue;\n    } catch (e) {\n      return defaultValue;\n    }\n  }\n\n  function setPreference(key, value) {\n    try {\n      localStorage.setItem(key, value);\n    } catch (e) {\n      console.warn('Could not save preference:', key);\n    }\n  }\n\n  // --- Theme ---\n  function getSystemThemePreference() {\n    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n      return 'dark';\n    }\n    return 'light';\n  }\n\n  function applyTheme(theme) {\n    const effectiveTheme = theme === 'system' ? getSystemThemePreference() : theme;\n    \n    if (effectiveTheme === 'dark') {\n      document.documentElement.setAttribute('data-theme', 'dark');\n    } else {\n      document.documentElement.removeAttribute('data-theme');\n    }\n\n    document.querySelectorAll('[data-theme-toggle]').forEach(toggle => {\n      toggle.checked = effectiveTheme === 'dark';\n    });\n    \n    const storedAccent = getPreference(STORAGE_KEYS.accentColor, null);\n    if (!storedAccent) {\n      applyAccentColor(DEFAULT_ACCENT);\n    }\n  }\n\n  // --- Font Size ---\n  function applyFontSize(size) {\n    document.documentElement.setAttribute('data-font-size', size);\n    \n    document.querySelectorAll('select[data-font-size-select]').forEach(select => {\n      select.value = size;\n    });\n  }\n\n  // --- Reduce Motion ---\n  function applyReduceMotion(enabled) {\n    if (enabled === 'true' || enabled === true) {\n      document.documentElement.setAttribute('data-reduce-motion', 'true');\n    } else {\n      document.documentElement.removeAttribute('data-reduce-motion');\n    }\n\n    document.querySelectorAll('[data-reduce-motion-toggle]').forEach(toggle => {\n      if (toggle.tagName === 'INPUT') {\n        toggle.checked = enabled === 'true' || enabled === true;\n      }\n    });\n  }\n\n  // --- High Contrast ---\n  function applyHighContrast(enabled) {\n    if (enabled === 'true' || enabled === true) {\n      document.documentElement.setAttribute('data-high-contrast', 'true');\n    } else {\n      document.documentElement.removeAttribute('data-high-contrast');\n    }\n\n    document.querySelectorAll('[data-high-contrast-toggle]').forEach(toggle => {\n      if (toggle.tagName === 'INPUT') {\n        toggle.checked = enabled === 'true' || enabled === true;\n      }\n    });\n  }\n\n  // --- Colorblind Mode ---\n  function applyColorblind(mode) {\n    if (mode && mode !== 'none') {\n      document.documentElement.setAttribute('data-colorblind', mode);\n    } else {\n      document.documentElement.removeAttribute('data-colorblind');\n    }\n\n    document.querySelectorAll('select[data-colorblind-select]').forEach(select => {\n      select.value = mode || 'none';\n    });\n  }\n\n  // --- ADHD Mode ---\n  function applyAdhdMode(enabled) {\n    if (enabled === 'true' || enabled === true) {\n      document.documentElement.setAttribute('data-adhd-mode', 'true');\n    } else {\n      document.documentElement.removeAttribute('data-adhd-mode');\n    }\n\n    document.querySelectorAll('[data-adhd-toggle]').forEach(toggle => {\n      if (toggle.tagName === 'INPUT') {\n        toggle.checked = enabled === 'true' || enabled === true;\n      }\n    });\n  }\n\n  // --- Dyslexia Font ---\n  function applyDyslexiaFont(enabled) {\n    if (enabled === 'true' || enabled === true) {\n      document.documentElement.setAttribute('data-dyslexia-font', 'true');\n    } else {\n      document.documentElement.removeAttribute('data-dyslexia-font');\n    }\n\n    document.querySelectorAll('[data-dyslexia-toggle]').forEach(toggle => {\n      if (toggle.tagName === 'INPUT') {\n        toggle.checked = enabled === 'true' || enabled === true;\n      }\n    });\n  }\n\n  // --- Accent Color ---\n  function applyAccentColor(colorName) {\n    const color = ACCENT_COLORS[colorName] || ACCENT_COLORS.gold;\n    const effectiveColorName = ACCENT_COLORS[colorName] ? colorName : 'gold';\n    \n    const root = document.documentElement;\n    root.style.setProperty('--user-accent', color.hex);\n    root.style.setProperty('--user-accent-hover', color.hover);\n    root.style.setProperty('--user-accent-rgb', color.rgb);\n    root.style.setProperty('--user-accent-glow', `rgba(${color.rgb}, 0.3)`);\n    root.style.setProperty('--user-accent-light', color.light);\n    root.style.setProperty('--user-accent-soft', color.soft);\n    root.style.setProperty('--user-accent-dark', color.dark);\n    root.style.setProperty('--user-accent-grad-end', color.gradEnd);\n    root.style.setProperty('--user-accent-text', color.text);\n    \n    root.setAttribute('data-accent', effectiveColorName);\n    \n    document.querySelectorAll('[data-accent-color]').forEach(btn => {\n      const isActive = btn.getAttribute('data-accent-color') === effectiveColorName;\n      btn.classList.toggle('active', isActive);\n      btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');\n    });\n    \n    document.querySelectorAll('select[data-accent-select]').forEach(select => {\n      select.value = effectiveColorName;\n    });\n  }\n\n  // --- Settings Initialization ---\n  function initSettings() {\n    const savedTheme = getPreference(STORAGE_KEYS.theme, 'light');\n    const savedFontSize = getPreference(STORAGE_KEYS.fontSize, 'normal');\n    const savedReduceMotion = getPreference(STORAGE_KEYS.reduceMotion, 'false');\n    const savedColorblind = getPreference(STORAGE_KEYS.colorblind, 'none');\n    const savedAdhdMode = getPreference(STORAGE_KEYS.adhdMode, 'false');\n    const savedDyslexiaFont = getPreference(STORAGE_KEYS.dyslexiaFont, 'false');\n    \n    const savedAccentColor = getPreference(STORAGE_KEYS.accentColor, DEFAULT_ACCENT);\n    const savedHighContrast = getPreference(STORAGE_KEYS.highContrast, 'false');\n\n    applyTheme(savedTheme);\n    applyFontSize(savedFontSize);\n    applyReduceMotion(savedReduceMotion);\n    applyHighContrast(savedHighContrast);\n    applyColorblind(savedColorblind);\n    applyAdhdMode(savedAdhdMode);\n    applyDyslexiaFont(savedDyslexiaFont);\n    applyAccentColor(savedAccentColor);\n  }\n\n  // --- Settings Listeners ---\n  function initSettingsListeners() {\n    document.querySelectorAll('[data-theme-toggle]').forEach(toggle => {\n      toggle.addEventListener('change', function() {\n        const newTheme = this.checked ? 'dark' : 'light';\n        setPreference(STORAGE_KEYS.theme, newTheme);\n        applyTheme(newTheme);\n      });\n    });\n\n    document.querySelectorAll('select[data-font-size-select]').forEach(select => {\n      select.addEventListener('change', function() {\n        const newSize = this.value;\n        setPreference(STORAGE_KEYS.fontSize, newSize);\n        applyFontSize(newSize);\n      });\n    });\n\n    document.querySelectorAll('input[data-reduce-motion-toggle]').forEach(toggle => {\n      toggle.addEventListener('change', function() {\n        const newValue = this.checked ? 'true' : 'false';\n        setPreference(STORAGE_KEYS.reduceMotion, newValue);\n        applyReduceMotion(newValue);\n      });\n    });\n\n    document.querySelectorAll('input[data-high-contrast-toggle]').forEach(toggle => {\n      toggle.addEventListener('change', function() {\n        const newValue = this.checked ? 'true' : 'false';\n        setPreference(STORAGE_KEYS.highContrast, newValue);\n        applyHighContrast(newValue);\n      });\n    });\n\n    document.querySelectorAll('select[data-colorblind-select]').forEach(select => {\n      select.addEventListener('change', function() {\n        const newMode = this.value;\n        setPreference(STORAGE_KEYS.colorblind, newMode);\n        applyColorblind(newMode);\n      });\n    });\n\n    document.querySelectorAll('input[data-adhd-toggle]').forEach(toggle => {\n      toggle.addEventListener('change', function() {\n        const newValue = this.checked ? 'true' : 'false';\n        setPreference(STORAGE_KEYS.adhdMode, newValue);\n        applyAdhdMode(newValue);\n      });\n    });\n\n    document.querySelectorAll('input[data-dyslexia-toggle]').forEach(toggle => {\n      toggle.addEventListener('change', function() {\n        const newValue = this.checked ? 'true' : 'false';\n        setPreference(STORAGE_KEYS.dyslexiaFont, newValue);\n        applyDyslexiaFont(newValue);\n      });\n    });\n\n    document.querySelectorAll('[data-accent-color]').forEach(btn => {\n      btn.addEventListener('click', function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const colorName = this.getAttribute('data-accent-color');\n        setPreference(STORAGE_KEYS.accentColor, colorName);\n        applyAccentColor(colorName);\n      });\n    });\n\n    document.querySelectorAll('select[data-accent-select]').forEach(select => {\n      select.addEventListener('change', function() {\n        const colorName = this.value;\n        setPreference(STORAGE_KEYS.accentColor, colorName);\n        applyAccentColor(colorName);\n      });\n    });\n  }\n\n  // --- Settings Dropdown ---\n  function initSettingsDropdown() {\n    const settingsWrappers = document.querySelectorAll('.settings-wrapper');\n    \n    settingsWrappers.forEach(wrapper => {\n      const settingsToggle = wrapper.querySelector('[data-settings-toggle]');\n      const settingsDropdown = wrapper.querySelector('[data-settings-dropdown]');\n\n      if (settingsToggle) {\n        settingsToggle.addEventListener('click', function(e) {\n          e.stopPropagation();\n          e.preventDefault();\n          if (window.SettingsModal && window.SettingsModal.open) {\n            window.SettingsModal.open();\n          } else if (settingsDropdown) {\n            document.querySelectorAll('.settings-dropdown.active').forEach(d => {\n              if (d !== settingsDropdown) d.classList.remove('active');\n            });\n            settingsDropdown.classList.toggle('active');\n          }\n        });\n\n        if (settingsDropdown) {\n          settingsDropdown.addEventListener('click', function(e) {\n            e.stopPropagation();\n          });\n        }\n      }\n    });\n\n    document.addEventListener('click', function(e) {\n      document.querySelectorAll('.settings-dropdown.active').forEach(dropdown => {\n        dropdown.classList.remove('active');\n      });\n    });\n  }\n\n  // --- User Button ---\n  function initUserButton() {\n    const userBtns = document.querySelectorAll('[data-user-btn]');\n    \n    if (userBtns.length > 0 && typeof MindBalanceAuth !== 'undefined') {\n      MindBalanceAuth.onAuthChange(function(user) {\n        userBtns.forEach(userBtn => {\n          if (user) {\n            userBtn.classList.add('signed-in');\n            userBtn.setAttribute('title', user.email || 'Signed in');\n          } else {\n            userBtn.classList.remove('signed-in');\n            userBtn.setAttribute('title', 'Not signed in');\n          }\n        });\n      });\n    }\n  }\n\n  // --- Initialize ---\n  initSettings();\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', function() {\n      initSettingsListeners();\n      initSettingsDropdown();\n      initUserButton();\n    });\n  } else {\n    initSettingsListeners();\n    initSettingsDropdown();\n    initUserButton();\n  }\n\n  // --- System Theme Change Listener ---\n  if (window.matchMedia) {\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function() {\n      const savedTheme = getPreference(STORAGE_KEYS.theme, 'light');\n      if (savedTheme === 'system') {\n        applyTheme('system');\n      }\n    });\n  }\n\n  // --- Public API ---\n  window.MindBalanceSettings = {\n    setTheme: function(theme) {\n      setPreference(STORAGE_KEYS.theme, theme);\n      applyTheme(theme);\n    },\n    applyTheme: applyTheme,\n    setFontSize: function(size) {\n      setPreference(STORAGE_KEYS.fontSize, size);\n      applyFontSize(size);\n    },\n    applyFontSize: applyFontSize,\n    setReduceMotion: function(enabled) {\n      setPreference(STORAGE_KEYS.reduceMotion, enabled ? 'true' : 'false');\n      applyReduceMotion(enabled);\n    },\n    applyReduceMotion: applyReduceMotion,\n    setHighContrast: function(enabled) {\n      setPreference(STORAGE_KEYS.highContrast, enabled ? 'true' : 'false');\n      applyHighContrast(enabled);\n    },\n    applyHighContrast: applyHighContrast,\n    setColorblind: function(mode) {\n      setPreference(STORAGE_KEYS.colorblind, mode);\n      applyColorblind(mode);\n    },\n    applyColorblind: applyColorblind,\n    setAdhdMode: function(enabled) {\n      setPreference(STORAGE_KEYS.adhdMode, enabled ? 'true' : 'false');\n      applyAdhdMode(enabled);\n    },\n    applyAdhdMode: applyAdhdMode,\n    setDyslexiaFont: function(enabled) {\n      setPreference(STORAGE_KEYS.dyslexiaFont, enabled ? 'true' : 'false');\n      applyDyslexiaFont(enabled);\n    },\n    applyDyslexiaFont: applyDyslexiaFont,\n    setAccentColor: function(colorName) {\n      setPreference(STORAGE_KEYS.accentColor, colorName);\n      applyAccentColor(colorName);\n    },\n    applyAccentColor: applyAccentColor,\n    getAccentColors: function() {\n      return ACCENT_COLORS;\n    },\n    getPreferences: function() {\n      return {\n        theme: getPreference(STORAGE_KEYS.theme, 'light'),\n        fontSize: getPreference(STORAGE_KEYS.fontSize, 'normal'),\n        reduceMotion: getPreference(STORAGE_KEYS.reduceMotion, 'false') === 'true',\n        highContrast: getPreference(STORAGE_KEYS.highContrast, 'false') === 'true',\n        colorblind: getPreference(STORAGE_KEYS.colorblind, 'none'),\n        adhdMode: getPreference(STORAGE_KEYS.adhdMode, 'false') === 'true',\n        dyslexiaFont: getPreference(STORAGE_KEYS.dyslexiaFont, 'false') === 'true',\n        accentColor: getPreference(STORAGE_KEYS.accentColor, DEFAULT_ACCENT)\n      };\n    }\n  };\n})();\n","path":null,"size_bytes":15505,"size_tokens":null},"mindspace-build/articles/article.js":{"content":"// ==================== ARTICLE PAGE ====================\n\n\n\n// --- Preloader ---\n(function() {\n  'use strict';\n\n  var progressFill = document.querySelector('.progress-bar-fill');\n  var progress = 0;\n  var progressInterval;\n\n  if (progressFill) {\n    progressInterval = setInterval(function () {\n      progress += Math.random() * 8 + 2;\n      if (progress > 90) progress = 90;\n      progressFill.style.width = progress + '%';\n    }, 150);\n  }\n\n  function hidePreloader() {\n    if (progressInterval) clearInterval(progressInterval);\n    if (progressFill) {\n      progressFill.style.width = '100%';\n    }\n    setTimeout(function () {\n      var preloader = document.querySelector('[data-preaload]');\n      document.body.classList.add('loaded');\n      if (preloader) {\n        preloader.classList.add('loaded');\n      }\n      window.scrollTo(0, 0);\n    }, 400);\n  }\n\n  window.addEventListener('load', hidePreloader);\n\n\n// --- Language & Translation Helpers ---\n  function getSavedLanguage() {\n    return localStorage.getItem('mindspace-language') || localStorage.getItem('mindspace_language') || 'en';\n  }\n\n\n  function getTranslation(key, fallback) {\n    if (window.translations) {\n      const lang = getSavedLanguage();\n      const langMap = { en: 'en', es: 'es', fr: 'fr', zh: 'zh', hi: 'hi', ko: 'ko' };\n      const langKey = langMap[lang] || 'en';\n      if (window.translations[langKey] && window.translations[langKey][key]) {\n        return window.translations[langKey][key];\n      }\n    }\n    return fallback;\n  }\n\n\n// ==================== TTS ENGINE ====================\n  const TTS_API_BASE = (function() {\n    const host = window.location.hostname;\n    if (host === 'mindspace.cloud' || host === 'www.mindspace.cloud' ||\n        host === 'mindspace.site' || host === 'www.mindspace.site') {\n      return 'https://d519c840-a074-41fa-b89a-8627dded835a-00-f7kivyi5gpot.worf.replit.dev';\n    }\n    return '';\n  })();\n\n  let ttsEngine = localStorage.getItem('tts-engine') || 'elevenlabs';\n  let selectedVoice = localStorage.getItem('tts-voice') || 'rachel';\n  let elevenLabsAvailable = false;\n  let currentAudio = null;\n  let audioCache = {};\n\n\n  let speechSynthesis = window.speechSynthesis;\n  let currentUtterance = null;\n  let isPlaying = false;\n  let isPaused = false;\n  let currentParagraphIndex = 0;\n  let paragraphs = [];\n  let playbackSpeed = parseFloat(localStorage.getItem('tts-speed') || '1.0');\n  let playbackVolume = parseFloat(localStorage.getItem('tts-volume') || '1.0');\n  let isMuted = false;\n  let autoScrollEnabled = localStorage.getItem('tts-autoscroll') !== 'false';\n  let ttsTimeRemaining = 0;\n  let isGeneratingAudio = false;\n\n\n// --- ElevenLabs Availability ---\n  async function checkElevenLabsAvailability() {\n    try {\n      console.log('Checking ElevenLabs availability...');\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 5000);\n\n      const response = await fetch(TTS_API_BASE + '/api/tts/health', {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json'\n        },\n        signal: controller.signal\n      });\n      clearTimeout(timeoutId);\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log('ElevenLabs health check response:', data);\n        elevenLabsAvailable = data.available === true;\n\n        if (elevenLabsAvailable) {\n          console.log('ElevenLabs is available - premium TTS enabled');\n\n          const savedEngine = localStorage.getItem('tts-engine');\n          if (savedEngine === 'elevenlabs' || !savedEngine) {\n            ttsEngine = 'elevenlabs';\n          }\n        } else {\n          console.log('ElevenLabs API key not configured on server');\n          if (ttsEngine === 'elevenlabs') {\n            ttsEngine = 'browser';\n            localStorage.setItem('tts-engine', 'browser');\n          }\n        }\n      } else {\n        console.warn('ElevenLabs health check failed with status:', response.status);\n        elevenLabsAvailable = false;\n        if (ttsEngine === 'elevenlabs') {\n          ttsEngine = 'browser';\n          localStorage.setItem('tts-engine', 'browser');\n        }\n      }\n    } catch (e) {\n      console.warn('ElevenLabs not available, using browser TTS. Error:', e.message);\n      elevenLabsAvailable = false;\n      if (ttsEngine === 'elevenlabs') {\n        ttsEngine = 'browser';\n        localStorage.setItem('tts-engine', 'browser');\n      }\n    }\n    updateVoiceSelector();\n  }\n\n\n// --- Voice Management ---\n  async function fetchElevenLabsVoices() {\n    try {\n      const response = await fetch(TTS_API_BASE + '/api/tts/voices');\n      if (response.ok) {\n        const data = await response.json();\n        return data.voices || [];\n      }\n    } catch (e) {\n      console.error('Failed to fetch voices:', e);\n    }\n    return [];\n  }\n\n\n  async function updateVoiceSelector() {\n    const voiceSelect = document.getElementById('ttsVoiceSelect');\n    const engineToggle = document.getElementById('ttsEngineToggle');\n\n    if (engineToggle) {\n      engineToggle.textContent = ttsEngine === 'elevenlabs' ? 'ðŸŽ™ï¸ Premium' : 'ðŸ”Š Browser';\n      engineToggle.title = ttsEngine === 'elevenlabs'\n        ? getTranslation('tts_premium_voice', 'Premium AI Voice (ElevenLabs)')\n        : getTranslation('tts_browser_voice', 'Browser Voice');\n    }\n\n    if (!voiceSelect) return;\n\n    voiceSelect.innerHTML = '';\n\n    if (ttsEngine === 'elevenlabs' && elevenLabsAvailable) {\n      const voices = await fetchElevenLabsVoices();\n      voices.forEach(voice => {\n        const option = document.createElement('option');\n        option.value = voice.id;\n        option.textContent = voice.name;\n        if (voice.id === selectedVoice) option.selected = true;\n        voiceSelect.appendChild(option);\n      });\n      voiceSelect.disabled = false;\n    } else {\n\n      const browserVoices = speechSynthesis ? speechSynthesis.getVoices() : [];\n      if (browserVoices.length === 0) {\n        const option = document.createElement('option');\n        option.textContent = getTranslation('tts_default_voice', 'Default Voice');\n        voiceSelect.appendChild(option);\n      } else {\n        browserVoices.slice(0, 10).forEach((voice, i) => {\n          const option = document.createElement('option');\n          option.value = i.toString();\n          option.textContent = `${voice.name} (${voice.lang})`;\n          voiceSelect.appendChild(option);\n        });\n      }\n    }\n  }\n\n\n// --- Article Content ---\n  function getArticleContent() {\n    const contentArea = document.querySelector('.article-content');\n    if (!contentArea) return [];\n\n    const elements = contentArea.querySelectorAll('h2, h3, p, li');\n    return Array.from(elements).map(el => el.textContent.trim()).filter(text => text.length > 0);\n  }\n\n\n// --- Paragraph Highlighting ---\n  function highlightParagraph(index) {\n    const elements = document.querySelectorAll('.article-content h2, .article-content h3, .article-content p, .article-content li');\n    elements.forEach((el, i) => {\n      el.classList.toggle('tts-reading', i === index);\n\n      if (i !== index && el.dataset.originalHtml) {\n        el.innerHTML = el.dataset.originalHtml;\n        delete el.dataset.originalHtml;\n      }\n    });\n\n\n    if (ttsEngine === 'browser' && elements[index]) {\n      const el = elements[index];\n      if (!el.dataset.originalHtml) {\n        el.dataset.originalHtml = el.innerHTML;\n        wrapWordsInSpans(el);\n      }\n    }\n\n\n    if (autoScrollEnabled && elements[index]) {\n      const el = elements[index];\n      const rect = el.getBoundingClientRect();\n      const viewportHeight = window.innerHeight;\n\n\n      if (rect.top < 100 || rect.bottom > viewportHeight - 100) {\n        el.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n    }\n  }\n\n\n  function wrapWordsInSpans(element) {\n    const walker = document.createTreeWalker(element, NodeFilter.SHOW_TEXT, null, false);\n    const textNodes = [];\n    while (walker.nextNode()) textNodes.push(walker.currentNode);\n\n    textNodes.forEach(node => {\n      const text = node.textContent;\n      if (!text.trim()) return;\n\n      const fragment = document.createDocumentFragment();\n      const words = text.split(/(\\s+)/);\n\n      words.forEach(word => {\n        if (word.match(/^\\s+$/)) {\n          fragment.appendChild(document.createTextNode(word));\n        } else if (word) {\n          const span = document.createElement('span');\n          span.className = 'tts-word';\n          span.textContent = word;\n          fragment.appendChild(span);\n        }\n      });\n\n      node.parentNode.replaceChild(fragment, node);\n    });\n  }\n\n\n// --- Word Highlighting ---\n  function highlightWord(charIndex) {\n    const elements = document.querySelectorAll('.article-content h2, .article-content h3, .article-content p, .article-content li');\n    const currentEl = elements[currentParagraphIndex];\n    if (!currentEl) return;\n\n\n    document.querySelectorAll('.tts-current-word').forEach(el => {\n      el.classList.remove('tts-current-word');\n    });\n\n\n    const wordSpans = currentEl.querySelectorAll('.tts-word');\n    const fullText = paragraphs[currentParagraphIndex] || '';\n    let charCount = 0;\n\n    for (const span of wordSpans) {\n      const word = span.textContent;\n      const wordStart = fullText.indexOf(word, charCount);\n      if (wordStart === -1) {\n        charCount += word.length + 1;\n        continue;\n      }\n      const wordEnd = wordStart + word.length;\n\n      if (charIndex >= wordStart && charIndex < wordEnd) {\n        span.classList.add('tts-current-word');\n        break;\n      }\n      charCount = wordEnd;\n    }\n  }\n\n\n// --- Clear Highlights ---\n  function clearHighlights() {\n    document.querySelectorAll('.tts-reading').forEach(el => {\n      el.classList.remove('tts-reading');\n\n      if (el.dataset.originalHtml) {\n        el.innerHTML = el.dataset.originalHtml;\n        delete el.dataset.originalHtml;\n      }\n    });\n\n    document.querySelectorAll('.tts-current-word').forEach(el => {\n      el.classList.remove('tts-current-word');\n    });\n  }\n\n\n// --- Player UI ---\n  function updatePlayerUI() {\n    const playBtn = document.getElementById('ttsPlayBtn');\n    const pauseBtn = document.getElementById('ttsPauseBtn');\n    const stopBtn = document.getElementById('ttsStopBtn');\n    const statusText = document.getElementById('ttsStatus');\n    const progressBar = document.getElementById('ttsProgressFill');\n\n    if (playBtn) {\n      playBtn.style.display = (isPlaying && !isPaused) ? 'none' : 'flex';\n      playBtn.setAttribute('aria-pressed', isPlaying && !isPaused ? 'true' : 'false');\n    }\n    if (pauseBtn) {\n      pauseBtn.style.display = (isPlaying && !isPaused) ? 'flex' : 'none';\n    }\n    if (stopBtn) {\n      stopBtn.disabled = !isPlaying && !isPaused;\n    }\n\n    if (statusText) {\n      if (isPlaying && !isPaused) {\n\n        const timeRemaining = calculateTimeRemaining();\n        statusText.textContent = timeRemaining;\n        statusText.removeAttribute('data-translate');\n      } else if (isPaused) {\n        statusText.textContent = getTranslation('tts_paused', 'Paused');\n        statusText.setAttribute('data-translate', 'tts_paused');\n      } else {\n        statusText.textContent = getTranslation('tts_ready', 'Ready to play');\n        statusText.setAttribute('data-translate', 'tts_ready');\n      }\n    }\n\n    if (progressBar && paragraphs.length > 0) {\n      const progress = ((currentParagraphIndex) / paragraphs.length) * 100;\n      progressBar.style.width = progress + '%';\n    }\n\n\n    updateTTSTimeRemaining();\n\n\n    updateVolumeUI();\n\n\n    const autoScrollBtn = document.getElementById('ttsAutoScrollBtn');\n    if (autoScrollBtn) {\n      autoScrollBtn.classList.toggle('active', autoScrollEnabled);\n    }\n  }\n\n\n  function calculateTimeRemaining() {\n    if (paragraphs.length === 0) return '--:--';\n\n\n    let remainingChars = 0;\n    for (let i = currentParagraphIndex; i < paragraphs.length; i++) {\n      remainingChars += paragraphs[i].length;\n    }\n\n\n    const charsPerSecond = 15 * playbackSpeed;\n    const remainingSeconds = Math.ceil(remainingChars / charsPerSecond);\n    const minutes = Math.floor(remainingSeconds / 60);\n    const seconds = remainingSeconds % 60;\n\n    return `${minutes}:${seconds.toString().padStart(2, '0')} remaining`;\n  }\n\n\n  function updateTTSTimeRemaining() {\n    const ttsTimeDisplay = document.getElementById('ttsTimeRemaining');\n    if (!ttsTimeDisplay || paragraphs.length === 0) return;\n\n    const timeRemaining = calculateTimeRemaining();\n    ttsTimeDisplay.textContent = timeRemaining.replace(' remaining', '');\n  }\n\n\n  function updateVolumeUI() {\n    const volumeSlider = document.getElementById('ttsVolumeSlider');\n    const volumeIcon = document.getElementById('ttsVolumeIcon');\n    const volumeValue = document.getElementById('ttsVolumeValue');\n\n    if (volumeSlider) {\n      volumeSlider.value = isMuted ? 0 : playbackVolume * 100;\n    }\n\n    if (volumeValue) {\n      volumeValue.textContent = isMuted ? '0%' : Math.round(playbackVolume * 100) + '%';\n    }\n\n    if (volumeIcon) {\n      if (isMuted || playbackVolume === 0) {\n        volumeIcon.innerHTML = '<path d=\"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\"/>';\n      } else if (playbackVolume < 0.5) {\n        volumeIcon.innerHTML = '<path d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"/>';\n      } else {\n        volumeIcon.innerHTML = '<path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/>';\n      }\n    }\n  }\n\n\n// --- Language Detection ---\n  function getUserLanguage() {\n    const savedLang = getSavedLanguage();\n    const langMap = {\n      'en': 'en-US',\n      'es': 'es-ES',\n      'fr': 'fr-FR',\n      'zh': 'zh-CN',\n      'hi': 'hi-IN',\n      'ko': 'ko-KR'\n    };\n    return langMap[savedLang] || 'en-US';\n  }\n\n\n// --- Voice Loading ---\n  let cachedVoices = [];\n\n\n  function loadVoices() {\n    cachedVoices = speechSynthesis.getVoices();\n  }\n\n\n  if (speechSynthesis) {\n    loadVoices();\n    if (speechSynthesis.onvoiceschanged !== undefined) {\n      speechSynthesis.onvoiceschanged = loadVoices;\n    }\n  }\n\n\n// --- Voice Matching ---\n  function findVoiceForLanguage(lang) {\n    const voices = cachedVoices.length ? cachedVoices : speechSynthesis.getVoices();\n    if (!voices.length) return null;\n\n\n    let voice = voices.find(v => v.lang === lang);\n    if (voice) return voice;\n\n\n    const langPrefix = lang.split('-')[0];\n    voice = voices.find(v => v.lang.startsWith(langPrefix));\n    if (voice) return voice;\n\n\n    return voices[0];\n  }\n\n\n// --- ElevenLabs Audio Generation ---\n  async function generateElevenLabsAudio(text) {\n    const userLang = getSavedLanguage();\n\n    try {\n      const response = await fetch(TTS_API_BASE + '/api/tts/generate', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          text: text,\n          voice: selectedVoice,\n          language: userLang\n        })\n      });\n\n      if (!response.ok) {\n        const error = await response.json().catch(() => ({ error: 'Unknown error' }));\n        throw new Error(error.error || 'TTS generation failed');\n      }\n\n      const audioBlob = await response.blob();\n      return URL.createObjectURL(audioBlob);\n    } catch (e) {\n      console.error('ElevenLabs TTS error:', e);\n      throw e;\n    }\n  }\n\n\n// --- ElevenLabs Playback ---\n  async function speakParagraphElevenLabs(index) {\n    if (index >= paragraphs.length) {\n      stopSpeech();\n      return;\n    }\n\n    currentParagraphIndex = index;\n    highlightParagraph(index);\n    updatePlayerUI();\n\n    const text = paragraphs[index];\n\n\n    let audioUrl = audioCache[index];\n\n    if (!audioUrl) {\n\n      const statusText = document.getElementById('ttsStatus');\n      if (statusText) {\n        statusText.textContent = getTranslation('tts_generating', 'Generating audio...');\n      }\n      isGeneratingAudio = true;\n\n      try {\n        audioUrl = await generateElevenLabsAudio(text);\n        audioCache[index] = audioUrl;\n      } catch (e) {\n\n        console.warn('ElevenLabs TTS failed for this paragraph, using browser voice:', e.message);\n        speakParagraphBrowser(index);\n        return;\n      }\n\n      isGeneratingAudio = false;\n    }\n\n\n    if (currentAudio) {\n      currentAudio.pause();\n      currentAudio = null;\n    }\n\n\n    currentAudio = new Audio(audioUrl);\n    currentAudio.volume = isMuted ? 0 : playbackVolume;\n    currentAudio.playbackRate = playbackSpeed;\n\n    currentAudio.onended = () => {\n      if (isPlaying && !isPaused) {\n        speakParagraphElevenLabs(index + 1);\n      }\n    };\n\n    currentAudio.onerror = (e) => {\n      console.error('Audio playback error:', e);\n\n      if (isPlaying && !isPaused && index + 1 < paragraphs.length) {\n        speakParagraphElevenLabs(index + 1);\n      } else {\n        stopSpeech();\n      }\n    };\n\n    try {\n      await currentAudio.play();\n      updatePlayerUI();\n    } catch (e) {\n      console.error('Failed to play audio:', e);\n    }\n  }\n\n\n// --- Browser TTS Playback ---\n  function speakParagraphBrowser(index) {\n    if (index >= paragraphs.length) {\n      stopSpeech();\n      return;\n    }\n\n    currentParagraphIndex = index;\n    highlightParagraph(index);\n    updatePlayerUI();\n\n    const userLang = getUserLanguage();\n    currentUtterance = new SpeechSynthesisUtterance(paragraphs[index]);\n    currentUtterance.lang = userLang;\n    currentUtterance.rate = playbackSpeed;\n    currentUtterance.pitch = 1;\n    currentUtterance.volume = isMuted ? 0 : playbackVolume;\n\n\n    const voice = findVoiceForLanguage(userLang);\n    if (voice) {\n      currentUtterance.voice = voice;\n    }\n\n    currentUtterance.onend = () => {\n      if (isPlaying && !isPaused) {\n        speakParagraphBrowser(index + 1);\n      }\n    };\n\n    currentUtterance.onerror = (e) => {\n      if (e.error !== 'interrupted') {\n        console.error('TTS Error:', e.error);\n      }\n    };\n\n\n    currentUtterance.onboundary = (event) => {\n      if (event.name === 'word') {\n        highlightWord(event.charIndex);\n      }\n    };\n\n    speechSynthesis.speak(currentUtterance);\n  }\n\n\n// --- Playback Router ---\n  function speakParagraph(index) {\n    if (ttsEngine === 'elevenlabs' && elevenLabsAvailable) {\n      speakParagraphElevenLabs(index);\n    } else {\n      speakParagraphBrowser(index);\n    }\n  }\n\n\n// --- Play/Pause/Stop ---\n  function playSpeech() {\n    if (ttsEngine === 'elevenlabs' && elevenLabsAvailable) {\n      if (isPaused && currentAudio) {\n        currentAudio.play().catch(e => {\n          console.warn('ElevenLabs resume failed, switching to browser:', e);\n          ttsEngine = 'browser';\n          localStorage.setItem('tts-engine', 'browser');\n          updateVoiceSelector();\n          playSpeech();\n        });\n        isPaused = false;\n        isPlaying = true;\n        updatePlayerUI();\n        return;\n      }\n\n      paragraphs = getArticleContent();\n      if (paragraphs.length === 0) return;\n\n      audioCache = {};\n      isPlaying = true;\n      isPaused = false;\n      currentParagraphIndex = 0;\n\n      speakParagraphElevenLabs(0);\n      updatePlayerUI();\n      return;\n    }\n\n    if (!speechSynthesis) {\n      alert(getTranslation('tts_not_supported', 'Text-to-speech is not supported in your browser.'));\n      return;\n    }\n\n    if (isPaused) {\n      speechSynthesis.resume();\n      isPaused = false;\n      isPlaying = true;\n      updatePlayerUI();\n      return;\n    }\n\n    paragraphs = getArticleContent();\n    if (paragraphs.length === 0) return;\n\n    isPlaying = true;\n    isPaused = false;\n    currentParagraphIndex = 0;\n\n    speakParagraphBrowser(0);\n    updatePlayerUI();\n  }\n\n\n  function pauseSpeech() {\n    if (ttsEngine === 'elevenlabs' && currentAudio) {\n      currentAudio.pause();\n      isPaused = true;\n      updatePlayerUI();\n      return;\n    }\n\n    if (speechSynthesis && isPlaying) {\n      speechSynthesis.pause();\n      isPaused = true;\n      updatePlayerUI();\n    }\n  }\n\n\n  function stopSpeech() {\n\n    if (currentAudio) {\n      currentAudio.pause();\n      currentAudio.currentTime = 0;\n      currentAudio = null;\n    }\n\n\n    if (speechSynthesis) {\n      speechSynthesis.cancel();\n    }\n\n    isPlaying = false;\n    isPaused = false;\n    currentParagraphIndex = 0;\n    isGeneratingAudio = false;\n    clearHighlights();\n    updatePlayerUI();\n\n    const progressBar = document.getElementById('ttsProgressFill');\n    if (progressBar) progressBar.style.width = '0%';\n  }\n\n\n// --- Speed & Volume Controls ---\n  function changeSpeed(speed) {\n    playbackSpeed = speed;\n    localStorage.setItem('tts-speed', speed.toString());\n    const speedDisplay = document.getElementById('ttsSpeedDisplay');\n    if (speedDisplay) {\n      speedDisplay.textContent = speed + 'x';\n    }\n\n\n    if (currentAudio) {\n      currentAudio.playbackRate = speed;\n    }\n\n\n    if (ttsEngine === 'browser' && isPlaying && !isPaused) {\n      speechSynthesis.cancel();\n      speakParagraph(currentParagraphIndex);\n    }\n\n    updateTTSTimeRemaining();\n  }\n\n\n  function changeVolume(volume) {\n    playbackVolume = Math.max(0, Math.min(1, volume));\n    localStorage.setItem('tts-volume', playbackVolume.toString());\n    isMuted = false;\n\n\n    if (currentAudio) {\n      currentAudio.volume = playbackVolume;\n    }\n\n\n    if (currentUtterance) {\n      currentUtterance.volume = playbackVolume;\n    }\n\n    updateVolumeUI();\n  }\n\n\n  function toggleMute() {\n    isMuted = !isMuted;\n\n\n    if (currentAudio) {\n      currentAudio.volume = isMuted ? 0 : playbackVolume;\n    }\n\n\n    if (ttsEngine === 'browser' && isPlaying && !isPaused) {\n      speechSynthesis.cancel();\n      speakParagraph(currentParagraphIndex);\n    }\n\n    updateVolumeUI();\n  }\n\n\n// --- Engine Toggle ---\n  function toggleEngine() {\n    if (!elevenLabsAvailable) {\n      alert(getTranslation('tts_premium_unavailable', 'Premium voice is not available. Using browser voice.'));\n      return;\n    }\n\n\n    stopSpeech();\n\n\n    ttsEngine = ttsEngine === 'elevenlabs' ? 'browser' : 'elevenlabs';\n    localStorage.setItem('tts-engine', ttsEngine);\n\n\n    audioCache = {};\n\n    updateVoiceSelector();\n  }\n\n\n  function changeVoice(voiceId) {\n    selectedVoice = voiceId;\n    localStorage.setItem('tts-voice', voiceId);\n\n\n    audioCache = {};\n  }\n\n\n  function toggleAutoScroll() {\n    autoScrollEnabled = !autoScrollEnabled;\n    localStorage.setItem('tts-autoscroll', autoScrollEnabled.toString());\n    updatePlayerUI();\n  }\n\n\n// --- Skip Controls ---\n  function skipForward() {\n    if (paragraphs.length === 0) return;\n    const newIndex = Math.min(currentParagraphIndex + 1, paragraphs.length - 1);\n    if (isPlaying) {\n      if (ttsEngine === 'elevenlabs' && currentAudio) {\n        currentAudio.pause();\n        currentAudio = null;\n      }\n      if (speechSynthesis) {\n        speechSynthesis.cancel();\n      }\n      speakParagraph(newIndex);\n    } else {\n      currentParagraphIndex = newIndex;\n      highlightParagraph(newIndex);\n      updatePlayerUI();\n    }\n  }\n\n  function skipBackward() {\n    if (paragraphs.length === 0) return;\n    const newIndex = Math.max(currentParagraphIndex - 1, 0);\n    if (isPlaying) {\n      if (ttsEngine === 'elevenlabs' && currentAudio) {\n        currentAudio.pause();\n        currentAudio = null;\n      }\n      if (speechSynthesis) {\n        speechSynthesis.cancel();\n      }\n      speakParagraph(newIndex);\n    } else {\n      currentParagraphIndex = newIndex;\n      highlightParagraph(newIndex);\n      updatePlayerUI();\n    }\n  }\n\n\n\n// ==================== TTS PLAYER INITIALIZATION ====================\n  function initPlayer() {\n    const playBtn = document.getElementById('ttsPlayBtn');\n    const pauseBtn = document.getElementById('ttsPauseBtn');\n    const stopBtn = document.getElementById('ttsStopBtn');\n    const skipBackBtn = document.getElementById('ttsSkipBack');\n    const skipForwardBtn = document.getElementById('ttsSkipForward');\n    const speedSelect = document.getElementById('ttsSpeedSelect');\n    const volumeSlider = document.getElementById('ttsVolumeSlider');\n    const volumeBtn = document.getElementById('ttsVolumeBtn');\n    const autoScrollBtn = document.getElementById('ttsAutoScrollBtn');\n    const voiceSelect = document.getElementById('ttsVoiceSelect');\n    const engineToggle = document.getElementById('ttsEngineToggle');\n\n    if (playBtn) playBtn.addEventListener('click', playSpeech);\n    if (pauseBtn) pauseBtn.addEventListener('click', pauseSpeech);\n    if (stopBtn) stopBtn.addEventListener('click', stopSpeech);\n    if (skipBackBtn) skipBackBtn.addEventListener('click', skipBackward);\n    if (skipForwardBtn) skipForwardBtn.addEventListener('click', skipForward);\n\n    if (speedSelect) {\n\n      speedSelect.value = playbackSpeed.toString();\n      speedSelect.addEventListener('change', (e) => {\n        changeSpeed(parseFloat(e.target.value));\n      });\n    }\n\n\n    if (volumeSlider) {\n      volumeSlider.value = playbackVolume * 100;\n      volumeSlider.addEventListener('input', (e) => {\n        changeVolume(parseInt(e.target.value) / 100);\n      });\n    }\n\n    if (volumeBtn) {\n      volumeBtn.addEventListener('click', toggleMute);\n    }\n\n\n    if (autoScrollBtn) {\n      autoScrollBtn.addEventListener('click', toggleAutoScroll);\n    }\n\n\n    if (voiceSelect) {\n      voiceSelect.addEventListener('change', (e) => {\n        changeVoice(e.target.value);\n      });\n    }\n\n\n    if (engineToggle) {\n      engineToggle.addEventListener('click', toggleEngine);\n    }\n\n\n    checkElevenLabsAvailability();\n\n\n    document.addEventListener('keydown', (e) => {\n\n      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') return;\n\n      if (e.key === ' ' && e.target.tagName !== 'BUTTON') {\n        e.preventDefault();\n        if (isPlaying && !isPaused) {\n          pauseSpeech();\n        } else {\n          playSpeech();\n        }\n      } else if (e.key === 'Escape') {\n        stopSpeech();\n      } else if (e.key === 'ArrowRight' && e.ctrlKey) {\n        e.preventDefault();\n        skipForward();\n      } else if (e.key === 'ArrowLeft' && e.ctrlKey) {\n        e.preventDefault();\n        skipBackward();\n      } else if (e.key === 'ArrowUp' && !e.ctrlKey && !e.shiftKey && !e.altKey) {\n\n        const player = document.querySelector('.article-tts-player');\n        if (player && isElementInViewport(player)) {\n          e.preventDefault();\n          changeVolume(playbackVolume + 0.1);\n        }\n      } else if (e.key === 'ArrowDown' && !e.ctrlKey && !e.shiftKey && !e.altKey) {\n\n        const player = document.querySelector('.article-tts-player');\n        if (player && isElementInViewport(player)) {\n          e.preventDefault();\n          changeVolume(playbackVolume - 0.1);\n        }\n      } else if (e.key.toLowerCase() === 'm') {\n\n        toggleMute();\n      }\n    });\n\n\n    window.addEventListener('beforeunload', stopSpeech);\n\n\n    paragraphs = getArticleContent();\n\n    updatePlayerUI();\n  }\n\n\n  function isElementInViewport(el) {\n    const rect = el.getBoundingClientRect();\n    return (\n      rect.top >= 0 &&\n      rect.left >= 0 &&\n      rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n      rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n  }\n\n\n\n// ==================== TABLE OF CONTENTS ====================\n  function initTableOfContents() {\n    const toc = document.querySelector('.article-toc');\n    const tocToggle = document.querySelector('.article-toc__toggle');\n    const tocProgressBar = document.querySelector('.article-toc__progress-bar');\n    const tocLinks = document.querySelectorAll('.article-toc__pill');\n    const articleContent = document.querySelector('.article-content');\n    const tocNav = document.querySelector('.article-toc__nav');\n    const tocHeader = document.querySelector('.article-toc__header');\n\n    if (!toc || !tocLinks.length) return;\n\n\n    const articleSlug = window.location.pathname.split('/').pop().replace('.html', '');\n\n\n    const sections = [];\n    let completedSections = new Set();\n    let bookmarkedSections = JSON.parse(localStorage.getItem(`toc-bookmarks-${articleSlug}`) || '[]');\n    let lastReadSection = localStorage.getItem(`toc-lastread-${articleSlug}`);\n\n\n    function getSectionWordCount(sectionEl) {\n      if (!sectionEl) return 0;\n\n      const sectionContainer = sectionEl.closest('section');\n      if (sectionContainer) {\n\n        const text = sectionContainer.textContent || '';\n        return text.split(/\\s+/).filter(w => w.length > 0).length;\n      }\n\n      const parent = sectionEl.parentElement;\n      if (parent) {\n        const text = parent.textContent || '';\n        return Math.max(50, text.split(/\\s+/).filter(w => w.length > 0).length / 2);\n      }\n      return 100;\n    }\n\n\n    tocLinks.forEach((link, index) => {\n      const targetId = link.getAttribute('href').slice(1);\n      const sectionEl = document.getElementById(targetId);\n      if (sectionEl) {\n        const sectionContainer = sectionEl.closest('section') || sectionEl.parentElement;\n        const wordCount = getSectionWordCount(sectionEl);\n        const readingTime = Math.max(1, Math.ceil(wordCount / 200));\n        const firstPara = sectionContainer?.querySelector('p');\n        const preview = firstPara ? firstPara.textContent.slice(0, 120) + '...' : '';\n\n        sections.push({\n          id: targetId,\n          element: sectionEl,\n          link: link,\n          index: index,\n          wordCount: wordCount,\n          readingTime: readingTime,\n          preview: preview\n        });\n      }\n    });\n\n\n    sections.forEach(section => {\n      const timeSpan = document.createElement('span');\n      timeSpan.className = 'article-toc__time';\n      timeSpan.textContent = `${section.readingTime}m`;\n      timeSpan.title = `${section.readingTime} min read`;\n      section.link.appendChild(timeSpan);\n    });\n\n\n    sections.forEach(section => {\n      const checkSpan = document.createElement('span');\n      checkSpan.className = 'article-toc__check';\n      checkSpan.innerHTML = `<svg viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"/></svg>`;\n      section.link.appendChild(checkSpan);\n    });\n\n\n    sections.forEach(section => {\n      if (section.preview && window.innerWidth > 900) {\n        const previewDiv = document.createElement('div');\n        previewDiv.className = 'article-toc__preview';\n        previewDiv.textContent = section.preview;\n        section.link.style.position = 'relative';\n        section.link.appendChild(previewDiv);\n      }\n    });\n\n\n    sections.forEach(section => {\n      const bookmarkBtn = document.createElement('button');\n      bookmarkBtn.className = 'article-toc__bookmark';\n      const isBookmarked = bookmarkedSections.includes(section.id);\n      if (isBookmarked) {\n        bookmarkBtn.classList.add('bookmarked');\n      }\n      bookmarkBtn.innerHTML = `<svg viewBox=\"0 0 24 24\" fill=\"${isBookmarked ? 'currentColor' : 'none'}\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z\"></path></svg>`;\n      bookmarkBtn.title = isBookmarked ? 'Remove bookmark' : 'Bookmark this section';\n      bookmarkBtn.setAttribute('aria-pressed', isBookmarked);\n      bookmarkBtn.setAttribute('aria-label', `Bookmark ${section.link.querySelector('.article-toc__text')?.textContent || 'section'}`);\n      bookmarkBtn.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        toggleBookmark(section.id, bookmarkBtn);\n      });\n      section.link.appendChild(bookmarkBtn);\n    });\n\n    function toggleBookmark(sectionId, btn) {\n      const idx = bookmarkedSections.indexOf(sectionId);\n      if (idx > -1) {\n        bookmarkedSections.splice(idx, 1);\n        btn.classList.remove('bookmarked');\n        btn.setAttribute('aria-pressed', 'false');\n        btn.title = 'Bookmark this section';\n        btn.innerHTML = `<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z\"></path></svg>`;\n      } else {\n        bookmarkedSections.push(sectionId);\n        btn.classList.add('bookmarked');\n        btn.setAttribute('aria-pressed', 'true');\n        btn.title = 'Remove bookmark';\n        btn.innerHTML = `<svg viewBox=\"0 0 24 24\" fill=\"currentColor\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z\"></path></svg>`;\n      }\n      localStorage.setItem(`toc-bookmarks-${articleSlug}`, JSON.stringify(bookmarkedSections));\n    }\n\n\n    const enhancedContent = document.createElement('div');\n    enhancedContent.className = 'article-toc__enhanced';\n\n\n    const minimap = document.createElement('div');\n    minimap.className = 'article-toc__minimap';\n    sections.forEach((section, idx) => {\n      const bar = document.createElement('div');\n      bar.className = 'article-toc__minimap-section';\n      bar.style.flex = `${Math.max(section.wordCount, 50) / 50}`;\n      bar.title = section.link.querySelector('.article-toc__text')?.textContent || `Section ${idx + 1}`;\n      bar.addEventListener('click', () => {\n        section.element.scrollIntoView({ behavior: 'smooth', block: 'start' });\n      });\n      const marker = document.createElement('div');\n      marker.className = 'article-toc__minimap-marker';\n      marker.style.width = '0%';\n      bar.appendChild(marker);\n      minimap.appendChild(bar);\n    });\n    enhancedContent.appendChild(minimap);\n\n\n    let resumeDiv = null;\n    if (lastReadSection && sections.find(s => s.id === lastReadSection)) {\n      resumeDiv = document.createElement('div');\n      resumeDiv.className = 'article-toc__resume visible';\n      const sectionName = sections.find(s => s.id === lastReadSection)?.link.querySelector('.article-toc__text')?.textContent || 'your last section';\n      resumeDiv.innerHTML = `\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"16\" height=\"16\"><path d=\"M8 5v14l11-7z\"/></svg>\n        <span class=\"article-toc__resume-text\">Resume at <strong>${sectionName}</strong></span>\n        <button class=\"article-toc__resume-dismiss\" aria-label=\"Dismiss\">&times;</button>\n      `;\n      resumeDiv.addEventListener('click', (e) => {\n        if (!e.target.closest('.article-toc__resume-dismiss')) {\n          const target = document.getElementById(lastReadSection);\n          if (target) {\n            target.scrollIntoView({ behavior: 'smooth', block: 'start' });\n          }\n          resumeDiv.remove();\n        }\n      });\n      resumeDiv.querySelector('.article-toc__resume-dismiss').addEventListener('click', (e) => {\n        e.stopPropagation();\n        resumeDiv.remove();\n      });\n      enhancedContent.appendChild(resumeDiv);\n    }\n\n\n    if (tocHeader) {\n      tocHeader.after(enhancedContent);\n    } else {\n      tocNav.insertBefore(enhancedContent, tocNav.firstChild);\n    }\n\n\n    const jumpBtns = document.createElement('div');\n    jumpBtns.className = 'article-toc__jump-btns';\n    jumpBtns.innerHTML = `\n      <button class=\"article-toc__jump-btn\" data-jump=\"top\">\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z\"/></svg>\n        Top\n      </button>\n      <button class=\"article-toc__jump-btn\" data-jump=\"bottom\">\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z\"/></svg>\n        Bottom\n      </button>\n    `;\n    tocNav.appendChild(jumpBtns);\n\n    jumpBtns.querySelector('[data-jump=\"top\"]').addEventListener('click', () => {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    });\n    jumpBtns.querySelector('[data-jump=\"bottom\"]').addEventListener('click', () => {\n      window.scrollTo({ top: document.documentElement.scrollHeight, behavior: 'smooth' });\n    });\n\n\n    const positionIndicator = document.createElement('div');\n    positionIndicator.className = 'article-toc__position-indicator';\n    tocNav.insertBefore(positionIndicator, tocNav.firstChild);\n\n\n    const swipeIndicator = document.createElement('div');\n    swipeIndicator.className = 'article-toc__swipe-indicator';\n    toc.insertBefore(swipeIndicator, toc.firstChild);\n\n\n    let showBtn = document.querySelector('.article-toc-show-btn');\n    if (!showBtn) {\n      showBtn = document.createElement('button');\n      showBtn.className = 'article-toc-show-btn';\n      showBtn.innerHTML = '<i class=\"fas fa-list-ul\"></i> <span>Show Contents</span>';\n      showBtn.setAttribute('aria-label', 'Show table of contents');\n      showBtn.setAttribute('title', 'Show Table of Contents');\n      document.body.appendChild(showBtn);\n    }\n\n\n    const articleLayout = document.querySelector('.article-layout');\n\n\n    const toggleTOC = (hide) => {\n      if (hide) {\n        toc.classList.add('collapsed');\n        if (articleLayout) articleLayout.classList.add('toc-hidden');\n        showBtn.classList.add('visible');\n        localStorage.setItem('toc-collapsed', 'true');\n      } else {\n        toc.classList.remove('collapsed');\n        if (articleLayout) articleLayout.classList.remove('toc-hidden');\n        showBtn.classList.remove('visible');\n        localStorage.setItem('toc-collapsed', 'false');\n      }\n    };\n\n    if (tocToggle) {\n      tocToggle.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        toggleTOC(true);\n      });\n    }\n\n    showBtn.addEventListener('click', () => {\n      toggleTOC(false);\n    });\n\n\n    const savedCollapsed = localStorage.getItem('toc-collapsed');\n    if (savedCollapsed === 'true') {\n      toggleTOC(true);\n    }\n\n\n    tocLinks.forEach(link => {\n      link.addEventListener('click', (e) => {\n        e.preventDefault();\n        const targetId = link.getAttribute('href').slice(1);\n        const target = document.getElementById(targetId);\n        if (target) {\n          tocLinks.forEach(l => l.classList.remove('active'));\n          link.classList.add('active');\n          target.scrollIntoView({ behavior: 'smooth', block: 'start' });\n          target.focus();\n        }\n      });\n    });\n\n\n    toc.addEventListener('keydown', (e) => {\n      const focusedLink = document.activeElement;\n      if (!focusedLink.classList.contains('article-toc__pill')) return;\n\n      const currentIndex = Array.from(tocLinks).indexOf(focusedLink);\n      let nextIndex = currentIndex;\n\n      if (e.key === 'ArrowDown' || e.key === 'j') {\n        e.preventDefault();\n        nextIndex = Math.min(currentIndex + 1, tocLinks.length - 1);\n      } else if (e.key === 'ArrowUp' || e.key === 'k') {\n        e.preventDefault();\n        nextIndex = Math.max(currentIndex - 1, 0);\n      } else if (e.key === 'Home') {\n        e.preventDefault();\n        nextIndex = 0;\n      } else if (e.key === 'End') {\n        e.preventDefault();\n        nextIndex = tocLinks.length - 1;\n      } else if (e.key === 'Enter' || e.key === ' ') {\n        e.preventDefault();\n        focusedLink.click();\n        return;\n      }\n\n      if (nextIndex !== currentIndex) {\n        tocLinks[nextIndex].focus();\n      }\n    });\n\n\n    function updateTocState() {\n      if (!articleContent) return;\n\n      const scrollTop = window.scrollY;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n\n\n      if (tocProgressBar) {\n        const progress = Math.min((scrollTop / docHeight) * 100, 100);\n        tocProgressBar.style.width = progress + '%';\n      }\n\n\n      let activeSection = null;\n      let activeIndex = -1;\n      const offset = 150;\n\n      for (let i = sections.length - 1; i >= 0; i--) {\n        const section = sections[i];\n        const rect = section.element.getBoundingClientRect();\n        if (rect.top <= offset) {\n          activeSection = section;\n          activeIndex = i;\n          break;\n        }\n      }\n\n\n      if (activeIndex === -1 && sections.length > 0) {\n        activeSection = sections[0];\n        activeIndex = 0;\n      }\n\n\n      sections.forEach((section, idx) => {\n        section.link.classList.remove('active', 'completed');\n        if (idx === activeIndex) {\n          section.link.classList.add('active');\n        } else if (idx < activeIndex) {\n          section.link.classList.add('completed');\n          completedSections.add(section.id);\n        }\n      });\n\n\n      if (activeSection && scrollTop > 100) {\n        localStorage.setItem(`toc-lastread-${articleSlug}`, activeSection.id);\n      }\n\n\n      const minimapBars = minimap.querySelectorAll('.article-toc__minimap-section');\n      minimapBars.forEach((bar, idx) => {\n        bar.classList.remove('active', 'completed');\n        const marker = bar.querySelector('.article-toc__minimap-marker');\n\n        if (idx === activeIndex) {\n          bar.classList.add('active');\n          if (marker && sections[idx]) {\n            const sectionRect = sections[idx].element.getBoundingClientRect();\n            const nextSection = sections[idx + 1];\n            let sectionHeight = 500;\n            if (nextSection) {\n              sectionHeight = Math.max(100, nextSection.element.getBoundingClientRect().top - sectionRect.top);\n            }\n            const progressInSection = Math.min(100, Math.max(0, ((offset - sectionRect.top) / sectionHeight) * 100));\n            marker.style.width = progressInSection + '%';\n          }\n        } else if (idx < activeIndex) {\n          bar.classList.add('completed');\n          if (marker) marker.style.width = '100%';\n        } else {\n          if (marker) marker.style.width = '0%';\n        }\n      });\n\n\n      if (activeSection && positionIndicator && tocNav) {\n        const linkRect = activeSection.link.getBoundingClientRect();\n        const navRect = tocNav.getBoundingClientRect();\n        const topOffset = linkRect.top - navRect.top;\n        positionIndicator.style.top = topOffset + 'px';\n        positionIndicator.style.height = linkRect.height + 'px';\n        positionIndicator.style.opacity = '1';\n      }\n    }\n\n\n    let ticking = false;\n    window.addEventListener('scroll', () => {\n      if (!ticking) {\n        requestAnimationFrame(() => {\n          updateTocState();\n          ticking = false;\n        });\n        ticking = true;\n      }\n    }, { passive: true });\n\n\n    updateTocState();\n\n\n    initMobileToc(toc, tocLinks);\n  }\n\n\n// --- Mobile TOC ---\n  function initMobileToc(toc, tocLinks) {\n    if (!toc) return;\n\n\n    const mobileToggle = document.createElement('button');\n    mobileToggle.className = 'mobile-toc-toggle';\n    mobileToggle.setAttribute('aria-label', 'Toggle table of contents');\n    mobileToggle.innerHTML = `\n      <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\"></line>\n        <line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\"></line>\n        <line x1=\"3\" y1=\"18\" x2=\"21\" y2=\"18\"></line>\n      </svg>\n    `;\n    document.body.appendChild(mobileToggle);\n\n\n    const overlay = document.createElement('div');\n    overlay.className = 'mobile-toc-overlay';\n    document.body.appendChild(overlay);\n\n\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'mobile-toc-close';\n    closeBtn.setAttribute('aria-label', 'Close table of contents');\n    closeBtn.innerHTML = `\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n      </svg>\n    `;\n    toc.insertBefore(closeBtn, toc.firstChild);\n\n    let isOpen = false;\n\n    function openMobileToc() {\n      isOpen = true;\n      toc.classList.add('mobile-visible');\n      overlay.classList.add('visible');\n      mobileToggle.classList.add('active');\n      document.body.style.overflow = 'hidden';\n\n\n      setTimeout(() => {\n        const firstLink = toc.querySelector('.article-toc__pill');\n        if (firstLink) firstLink.focus();\n      }, 300);\n    }\n\n    function closeMobileToc() {\n      isOpen = false;\n      toc.classList.remove('mobile-visible');\n      overlay.classList.remove('visible');\n      mobileToggle.classList.remove('active');\n      document.body.style.overflow = '';\n      mobileToggle.focus();\n    }\n\n\n    mobileToggle.addEventListener('click', () => {\n      if (isOpen) {\n        closeMobileToc();\n      } else {\n        openMobileToc();\n      }\n    });\n\n\n    closeBtn.addEventListener('click', closeMobileToc);\n\n\n    overlay.addEventListener('click', closeMobileToc);\n\n\n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape' && isOpen) {\n        closeMobileToc();\n      }\n    });\n\n\n    tocLinks.forEach(link => {\n      link.addEventListener('click', () => {\n        if (window.innerWidth <= 900 && isOpen) {\n          closeMobileToc();\n        }\n      });\n    });\n\n\n    window.addEventListener('resize', () => {\n      if (window.innerWidth > 900 && isOpen) {\n        closeMobileToc();\n      }\n    });\n\n\n    let touchStartY = 0;\n    let touchCurrentY = 0;\n    let isDragging = false;\n\n    toc.addEventListener('touchstart', (e) => {\n      if (window.innerWidth > 900) return;\n      const swipeIndicator = toc.querySelector('.article-toc__swipe-indicator');\n      if (swipeIndicator && swipeIndicator.contains(e.target)) {\n        touchStartY = e.touches[0].clientY;\n        isDragging = true;\n      }\n    }, { passive: true });\n\n    toc.addEventListener('touchmove', (e) => {\n      if (!isDragging || window.innerWidth > 900) return;\n      touchCurrentY = e.touches[0].clientY;\n      const diff = touchCurrentY - touchStartY;\n\n\n      if (diff > 0) {\n        toc.style.transform = `translateY(${diff}px)`;\n        toc.style.transition = 'none';\n      }\n    }, { passive: true });\n\n    toc.addEventListener('touchend', () => {\n      if (!isDragging || window.innerWidth > 900) return;\n      isDragging = false;\n\n      const diff = touchCurrentY - touchStartY;\n      toc.style.transition = '';\n      toc.style.transform = '';\n\n\n      if (diff > 100) {\n        closeMobileToc();\n      }\n    }, { passive: true });\n\n\n    const tocHeader = toc.querySelector('.article-toc__header');\n    if (tocHeader) {\n      tocHeader.addEventListener('touchstart', (e) => {\n        if (window.innerWidth > 900) return;\n        touchStartY = e.touches[0].clientY;\n        isDragging = true;\n      }, { passive: true });\n    }\n  }\n\n\n\n// ==================== READING PROGRESS ====================\n  function initReadingProgress() {\n    const progressBar = document.querySelector('.article-reading-progress__fill');\n    if (!progressBar) return;\n\n    window.addEventListener('scroll', () => {\n      const scrollTop = window.scrollY;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n      const progress = Math.min((scrollTop / docHeight) * 100, 100);\n      progressBar.style.width = progress + '%';\n    }, { passive: true });\n  }\n\n\n\n// ==================== MINI PLAYER ====================\n  function initMiniPlayer() {\n    const miniPlayer = document.createElement('div');\n    miniPlayer.className = 'tts-mini-player';\n    miniPlayer.id = 'ttsMiniPlayer';\n\n    const playBtn = document.createElement('button');\n    playBtn.className = 'tts-mini-player__btn tts-mini-player__btn--play';\n    playBtn.id = 'miniPlayBtn';\n    playBtn.title = getTranslation('tts_play', 'Play');\n    const playIcon = document.createElement('i');\n    playIcon.className = 'fas fa-play';\n    playBtn.appendChild(playIcon);\n\n    const infoDiv = document.createElement('div');\n    infoDiv.className = 'tts-mini-player__info';\n    const titleSpan = document.createElement('span');\n    titleSpan.className = 'tts-mini-player__title';\n    titleSpan.textContent = getTranslation('tts_listening', 'Listening to article');\n    const statusSpan = document.createElement('span');\n    statusSpan.className = 'tts-mini-player__status';\n    statusSpan.id = 'miniStatus';\n    statusSpan.textContent = getTranslation('tts_ready', 'Ready');\n    infoDiv.appendChild(titleSpan);\n    infoDiv.appendChild(statusSpan);\n\n    const progressDiv = document.createElement('div');\n    progressDiv.className = 'tts-mini-player__progress';\n    const progressFill = document.createElement('div');\n    progressFill.className = 'tts-mini-player__progress-fill';\n    progressFill.id = 'miniProgressFill';\n    progressDiv.appendChild(progressFill);\n\n    const closeBtn = document.createElement('button');\n    closeBtn.className = 'tts-mini-player__close';\n    closeBtn.id = 'miniCloseBtn';\n    closeBtn.title = getTranslation('tts_close', 'Close');\n    const closeIcon = document.createElement('i');\n    closeIcon.className = 'fas fa-times';\n    closeBtn.appendChild(closeIcon);\n\n    miniPlayer.appendChild(playBtn);\n    miniPlayer.appendChild(infoDiv);\n    miniPlayer.appendChild(progressDiv);\n    miniPlayer.appendChild(closeBtn);\n\n    document.body.appendChild(miniPlayer);\n\n    const mainPlayer = document.querySelector('.article-tts-player');\n    let miniVisible = false;\n\n\n    function updateMiniPlayerVisibility() {\n      if (!mainPlayer) return;\n\n      const rect = mainPlayer.getBoundingClientRect();\n      const isMainPlayerVisible = rect.bottom > 0 && rect.top < window.innerHeight;\n\n      if (isPlaying && !isMainPlayerVisible) {\n        if (!miniVisible) {\n          miniPlayer.classList.add('visible');\n          miniVisible = true;\n        }\n      } else {\n        if (miniVisible) {\n          miniPlayer.classList.remove('visible');\n          miniVisible = false;\n        }\n      }\n    }\n\n    window.addEventListener('scroll', updateMiniPlayerVisibility, { passive: true });\n\n\n    const miniPlayBtn = document.getElementById('miniPlayBtn');\n    const miniCloseBtn = document.getElementById('miniCloseBtn');\n\n    miniPlayBtn.addEventListener('click', () => {\n      if (isPlaying && !isPaused) {\n        pauseSpeech();\n        miniPlayBtn.innerHTML = '<i class=\"fas fa-play\"></i>';\n      } else {\n        playSpeech();\n        miniPlayBtn.innerHTML = '<i class=\"fas fa-pause\"></i>';\n      }\n    });\n\n    miniCloseBtn.addEventListener('click', () => {\n      stopSpeech();\n      miniPlayer.classList.remove('visible');\n      miniVisible = false;\n    });\n\n\n    const originalUpdatePlayerUI = updatePlayerUI;\n    updatePlayerUI = function() {\n      originalUpdatePlayerUI();\n\n      const miniStatus = document.getElementById('miniStatus');\n      const miniProgressFill = document.getElementById('miniProgressFill');\n\n      if (miniStatus) {\n        if (isPlaying && !isPaused) {\n          miniStatus.textContent = getTranslation('tts_playing', 'Playing...');\n          miniPlayBtn.innerHTML = '<i class=\"fas fa-pause\"></i>';\n        } else if (isPaused) {\n          miniStatus.textContent = getTranslation('tts_paused', 'Paused');\n          miniPlayBtn.innerHTML = '<i class=\"fas fa-play\"></i>';\n        } else {\n          miniStatus.textContent = getTranslation('tts_ready', 'Ready');\n          miniPlayBtn.innerHTML = '<i class=\"fas fa-play\"></i>';\n        }\n      }\n\n      if (miniProgressFill && paragraphs.length > 0) {\n        const progress = ((currentParagraphIndex) / paragraphs.length) * 100;\n        miniProgressFill.style.width = progress + '%';\n      }\n\n      updateMiniPlayerVisibility();\n    };\n  }\n\n\n  let sleepTimerTimeout = null;\n  let sleepTimerMinutes = 0;\n\n\n// ==================== SLEEP TIMER ====================\n  function initSleepTimer() {\n    const timerContainer = document.querySelector('.sleep-timer-container');\n    if (!timerContainer) return;\n\n    const timerBtn = timerContainer.querySelector('.sleep-timer-btn');\n    const dropdown = timerContainer.querySelector('.sleep-timer-dropdown');\n\n    if (!timerBtn || !dropdown) return;\n\n    timerBtn.addEventListener('click', () => {\n      dropdown.classList.toggle('visible');\n    });\n\n\n    document.addEventListener('click', (e) => {\n      if (!timerContainer.contains(e.target)) {\n        dropdown.classList.remove('visible');\n      }\n    });\n\n\n    const options = dropdown.querySelectorAll('.sleep-timer-option');\n    options.forEach(option => {\n      option.addEventListener('click', () => {\n        const minutes = parseInt(option.dataset.minutes, 10);\n        setSleepTimer(minutes);\n        dropdown.classList.remove('visible');\n\n        options.forEach(o => o.classList.remove('active'));\n        if (minutes > 0) {\n          option.classList.add('active');\n          timerBtn.classList.add('active');\n        } else {\n          timerBtn.classList.remove('active');\n        }\n      });\n    });\n  }\n\n  function setSleepTimer(minutes) {\n    if (sleepTimerTimeout) {\n      clearTimeout(sleepTimerTimeout);\n      sleepTimerTimeout = null;\n    }\n\n    sleepTimerMinutes = minutes;\n\n    if (minutes > 0) {\n      sleepTimerTimeout = setTimeout(() => {\n        stopSpeech();\n        sleepTimerMinutes = 0;\n        const timerBtn = document.querySelector('.sleep-timer-btn');\n        if (timerBtn) timerBtn.classList.remove('active');\n      }, minutes * 60 * 1000);\n    }\n  }\n\n\n\n// ==================== KEYBOARD SHORTCUTS ====================\n  function initKeyboardShortcuts() {\n    const overlay = document.createElement('div');\n    overlay.className = 'keyboard-shortcuts-overlay';\n    overlay.id = 'keyboardShortcutsOverlay';\n    overlay.innerHTML = `\n      <div class=\"keyboard-shortcuts-modal\">\n        <h3><i class=\"fas fa-keyboard\"></i> ${getTranslation('keyboard_shortcuts', 'Keyboard Shortcuts')}</h3>\n        <ul class=\"keyboard-shortcuts-list\">\n          <li><span>${getTranslation('tts_play_pause', 'Play/Pause')}</span> <kbd>Space</kbd></li>\n          <li><span>${getTranslation('tts_stop', 'Stop')}</span> <kbd>Esc</kbd></li>\n          <li><span>${getTranslation('tts_skip_forward', 'Next Paragraph')}</span> <kbd>Ctrl + â†’</kbd></li>\n          <li><span>${getTranslation('tts_skip_backward', 'Previous Paragraph')}</span> <kbd>Ctrl + â†</kbd></li>\n          <li><span>${getTranslation('tts_speed_up', 'Speed Up')}</span> <kbd>â†‘</kbd></li>\n          <li><span>${getTranslation('tts_slow_down', 'Slow Down')}</span> <kbd>â†“</kbd></li>\n          <li><span>${getTranslation('tts_mute', 'Mute')}</span> <kbd>M</kbd></li>\n          <li><span>${getTranslation('keyboard_shortcuts', 'Show Shortcuts')}</span> <kbd>?</kbd></li>\n        </ul>\n        <button class=\"keyboard-shortcuts-close\">${getTranslation('close', 'Close')}</button>\n      </div>\n    `;\n    document.body.appendChild(overlay);\n\n    overlay.querySelector('.keyboard-shortcuts-close').addEventListener('click', () => {\n      overlay.classList.remove('visible');\n    });\n\n    overlay.addEventListener('click', (e) => {\n      if (e.target === overlay) {\n        overlay.classList.remove('visible');\n      }\n    });\n\n\n    document.addEventListener('keydown', (e) => {\n      if (e.key === '?' && !e.ctrlKey && !e.altKey && !e.metaKey) {\n        const activeEl = document.activeElement;\n        if (activeEl && (activeEl.tagName === 'INPUT' || activeEl.tagName === 'TEXTAREA')) return;\n        overlay.classList.add('visible');\n      }\n    });\n\n\n    const helpBtn = document.getElementById('ttsHelpBtn');\n    if (helpBtn) {\n      helpBtn.addEventListener('click', () => {\n        overlay.classList.add('visible');\n      });\n    }\n  }\n\n\n\n// ==================== NOTES PANEL ====================\n  function initNotesPanel() {\n    const notesPanel = document.createElement('div');\n    notesPanel.className = 'article-notes-panel';\n    notesPanel.id = 'articleNotesPanel';\n\n    const articleId = window.location.pathname.replace(/[^a-z0-9]/gi, '-');\n    const storageKey = 'article-notes-' + articleId;\n    const savedNotes = localStorage.getItem(storageKey) || '';\n\n    notesPanel.innerHTML = `\n      <div class=\"notes-panel__header\">\n        <span class=\"notes-panel__title\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill=\"currentColor\" d=\"M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10z\"/></svg> ${getTranslation('my_notes', 'My Notes')}</span>\n        <button class=\"notes-panel__close\" id=\"notesPanelClose\"><svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" aria-hidden=\"true\"><path fill=\"currentColor\" d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/></svg></button>\n      </div>\n      <div class=\"notes-panel__content\">\n        <textarea class=\"notes-textarea\" id=\"articleNotesTextarea\" placeholder=\"${getTranslation('notes_placeholder', 'Write your notes here...')}\">${escapeHtml(savedNotes)}</textarea>\n        <div class=\"notes-save-status\" id=\"notesSaveStatus\">${getTranslation('notes_auto_save', 'Notes are saved automatically')}</div>\n        <div class=\"notes-panel__actions\">\n          <button class=\"notes-panel__btn notes-panel__btn--clear\" id=\"notesClearBtn\">\n            <svg viewBox=\"0 0 24 24\" width=\"14\" height=\"14\" aria-hidden=\"true\"><path fill=\"currentColor\" d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"/></svg> Clear\n          </button>\n          <button class=\"notes-panel__btn notes-panel__btn--export\" id=\"notesExportBtn\">\n            <svg viewBox=\"0 0 24 24\" width=\"14\" height=\"14\" aria-hidden=\"true\"><path fill=\"currentColor\" d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"/></svg> Export\n          </button>\n        </div>\n      </div>\n    `;\n\n    function escapeHtml(str) {\n      if (!str) return '';\n      return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n    }\n    document.body.appendChild(notesPanel);\n\n    const closeBtn = document.getElementById('notesPanelClose');\n    const textarea = document.getElementById('articleNotesTextarea');\n    const saveStatus = document.getElementById('notesSaveStatus');\n\n    closeBtn.addEventListener('click', () => {\n      notesPanel.classList.remove('visible');\n    });\n\n\n    let saveTimeout;\n    textarea.addEventListener('input', () => {\n      saveStatus.textContent = getTranslation('notes_saving', 'Saving...');\n      clearTimeout(saveTimeout);\n      saveTimeout = setTimeout(() => {\n        localStorage.setItem(storageKey, textarea.value);\n        saveStatus.textContent = getTranslation('notes_saved', 'Saved!');\n        setTimeout(() => {\n          saveStatus.textContent = getTranslation('notes_auto_save', 'Notes are saved automatically');\n        }, 2000);\n      }, 500);\n    });\n\n\n    const notesBtn = document.getElementById('notesBtn');\n    if (notesBtn) {\n      notesBtn.addEventListener('click', () => {\n        notesPanel.classList.toggle('visible');\n      });\n    }\n\n\n    const clearBtn = document.getElementById('notesClearBtn');\n    if (clearBtn) {\n      clearBtn.addEventListener('click', () => {\n        if (confirm('Clear all notes for this article?')) {\n          textarea.value = '';\n          localStorage.removeItem(storageKey);\n          saveStatus.textContent = 'Notes cleared';\n          setTimeout(() => {\n            saveStatus.textContent = getTranslation('notes_auto_save', 'Notes are saved automatically');\n          }, 2000);\n        }\n      });\n    }\n\n\n    const exportBtn = document.getElementById('notesExportBtn');\n    if (exportBtn) {\n      exportBtn.addEventListener('click', () => {\n        const notes = textarea.value;\n        if (!notes.trim()) {\n          alert('No notes to export');\n          return;\n        }\n\n        const articleTitle = document.querySelector('.article-title')?.textContent || 'Article Notes';\n        const blob = new Blob([`# ${articleTitle}\\n\\n${notes}`], { type: 'text/markdown' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `${articleTitle.replace(/[^a-z0-9]/gi, '-').toLowerCase()}-notes.md`;\n        a.click();\n        URL.revokeObjectURL(url);\n      });\n    }\n  }\n\n\n\n// ==================== DOWNLOAD AUDIO ====================\n  async function initDownloadAudio() {\n    const downloadBtn = document.getElementById('ttsDownloadBtn');\n    if (!downloadBtn) return;\n\n    downloadBtn.addEventListener('click', async () => {\n      if (!elevenLabsAvailable || ttsEngine !== 'elevenlabs') {\n        alert(getTranslation('download_premium_only', 'Audio download is only available with premium voice.'));\n        return;\n      }\n\n      downloadBtn.classList.add('downloading');\n      downloadBtn.disabled = true;\n\n      try {\n        const content = getArticleContent();\n        const fullText = content.slice(0, 20).join(' ');\n\n        const response = await fetch(TTS_API_BASE + '/api/tts/generate', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            text: fullText,\n            voice: selectedVoice,\n            language: getUserLanguage()\n          })\n        });\n\n        if (!response.ok) {\n          throw new Error('Download failed');\n        }\n\n        const blob = await response.blob();\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = 'article-audio.mp3';\n        a.click();\n        URL.revokeObjectURL(url);\n\n      } catch (e) {\n        alert(getTranslation('download_failed', 'Failed to download audio. Please try again.'));\n      }\n\n      downloadBtn.classList.remove('downloading');\n      downloadBtn.disabled = false;\n    });\n  }\n\n\n\n// ==================== ARTICLE INITIALIZATION ====================\n  function init() {\n    initPlayer();\n    initTableOfContents();\n    initReadingProgress();\n    initReadingControls();\n    initTimeRemaining();\n    initTextHighlight();\n    initBookmark();\n    initLanguageChangeListener();\n    initMiniPlayer();\n    initSleepTimer();\n    initKeyboardShortcuts();\n    initNotesPanel();\n    initDownloadAudio();\n    trackArticleRead();\n  }\n\n\n// --- Reading Tracker ---\n  function trackArticleRead() {\n\n    if (window.MindSpaceAuth && window.MindSpaceAuth.onAuthReady) {\n      window.MindSpaceAuth.onAuthReady(async (user) => {\n        if (!user) return;\n\n\n        const slug = window.location.pathname.split('/').filter(Boolean).pop()?.replace('.html', '') || 'unknown';\n        const titleEl = document.querySelector('.article-title, h1');\n        const title = titleEl ? titleEl.textContent : 'Article';\n\n\n        try {\n          await window.MindSpaceAuth.logReadingActivity(slug, title);\n          console.log('Reading activity logged for:', slug);\n        } catch (e) {\n          console.error('Failed to log reading activity:', e);\n        }\n      });\n    }\n  }\n\n\n// --- Language Change Listener ---\n  function initLanguageChangeListener() {\n\n    window.addEventListener('translations-ready', (e) => {\n\n      paragraphs = getArticleContent();\n      if (isPlaying) {\n        stopSpeech();\n      }\n      updatePlayerUI();\n\n      updateDynamicUITranslations();\n    });\n\n\n    const languageSelects = document.querySelectorAll('[data-language-select]');\n    languageSelects.forEach(select => {\n      select.addEventListener('change', () => {\n\n\n        if (isPlaying) {\n          stopSpeech();\n        }\n      });\n    });\n\n\n    window.addEventListener('storage', (e) => {\n      if (e.key === 'mindspace-language') {\n        setTimeout(() => {\n          paragraphs = getArticleContent();\n          if (isPlaying) {\n            stopSpeech();\n          }\n          updatePlayerUI();\n        }, 500);\n      }\n    });\n  }\n\n\n  function updateDynamicUITranslations() {\n\n    const miniTitle = document.querySelector('.tts-mini-player__title');\n    if (miniTitle) {\n      miniTitle.textContent = getTranslation('tts_listening', 'Listening to article');\n    }\n\n\n    const notesTitle = document.querySelector('.notes-panel__title');\n    if (notesTitle) {\n      notesTitle.innerHTML = `<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path fill=\"currentColor\" d=\"M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10z\"/></svg> ${getTranslation('my_notes', 'My Notes')}`;\n    }\n\n\n    const notesTextarea = document.getElementById('articleNotesTextarea');\n    if (notesTextarea) {\n      notesTextarea.placeholder = getTranslation('notes_placeholder', 'Write your notes here...');\n    }\n\n\n    const saveStatus = document.getElementById('notesSaveStatus');\n    if (saveStatus) {\n      saveStatus.textContent = getTranslation('notes_auto_save', 'Notes are saved automatically');\n    }\n  }\n\n\n\n// ==================== READING CONTROLS ====================\n  function initReadingControls() {\n    const panel = document.querySelector('.reading-controls');\n    if (!panel) return;\n\n\n    const toggleBtn = panel.querySelector('.reading-controls__toggle');\n    if (toggleBtn) {\n      toggleBtn.addEventListener('click', () => {\n        panel.classList.toggle('collapsed');\n        localStorage.setItem('article-controls-collapsed', panel.classList.contains('collapsed'));\n      });\n\n\n      if (localStorage.getItem('article-controls-collapsed') === 'true') {\n        panel.classList.add('collapsed');\n      }\n    }\n\n\n    const fontSmaller = document.getElementById('fontSmaller');\n    const fontLarger = document.getElementById('fontLarger');\n    const fontSizes = ['small', 'normal', 'large', 'x-large'];\n    let currentFontIndex = fontSizes.indexOf(localStorage.getItem('article-font-size') || 'normal');\n    if (currentFontIndex < 0) currentFontIndex = 1;\n    document.body.setAttribute('data-article-font', fontSizes[currentFontIndex]);\n\n    if (fontSmaller) {\n      fontSmaller.addEventListener('click', () => {\n        if (currentFontIndex > 0) {\n          currentFontIndex--;\n          document.body.setAttribute('data-article-font', fontSizes[currentFontIndex]);\n          localStorage.setItem('article-font-size', fontSizes[currentFontIndex]);\n        }\n      });\n    }\n\n    if (fontLarger) {\n      fontLarger.addEventListener('click', () => {\n        if (currentFontIndex < fontSizes.length - 1) {\n          currentFontIndex++;\n          document.body.setAttribute('data-article-font', fontSizes[currentFontIndex]);\n          localStorage.setItem('article-font-size', fontSizes[currentFontIndex]);\n        }\n      });\n    }\n\n\n    const spacingBtn = document.getElementById('lineSpacingBtn');\n    const spacings = ['compact', 'normal', 'relaxed'];\n    let currentSpacingIndex = spacings.indexOf(localStorage.getItem('article-line-spacing') || 'normal');\n    if (currentSpacingIndex < 0) currentSpacingIndex = 1;\n    document.body.setAttribute('data-article-spacing', spacings[currentSpacingIndex]);\n\n    if (spacingBtn) {\n      spacingBtn.addEventListener('click', () => {\n        currentSpacingIndex = (currentSpacingIndex + 1) % spacings.length;\n        document.body.setAttribute('data-article-spacing', spacings[currentSpacingIndex]);\n        localStorage.setItem('article-line-spacing', spacings[currentSpacingIndex]);\n\n\n        const tooltip = spacingBtn.querySelector('.reading-control-btn__tooltip');\n        if (tooltip) {\n          const labels = { compact: 'Compact', normal: 'Normal', relaxed: 'Relaxed' };\n          tooltip.textContent = 'Spacing: ' + labels[spacings[currentSpacingIndex]];\n        }\n      });\n    }\n\n\n    const readingModeBtn = document.getElementById('readingModeBtn');\n    if (readingModeBtn) {\n      readingModeBtn.addEventListener('click', () => {\n        document.body.classList.toggle('article-reading-mode');\n        readingModeBtn.classList.toggle('active', document.body.classList.contains('article-reading-mode'));\n      });\n    }\n\n\n    const printBtn = document.getElementById('printBtn');\n    if (printBtn) {\n      printBtn.addEventListener('click', () => {\n        window.print();\n      });\n    }\n  }\n\n\n// --- Time Remaining ---\n  function initTimeRemaining() {\n    const timeValue = document.getElementById('timeRemainingValue');\n    if (!timeValue) return;\n\n\n    const content = document.querySelector('.article-content');\n    if (!content) return;\n\n    const text = content.textContent || '';\n    const wordCount = text.trim().split(/\\s+/).length;\n    const totalMinutes = Math.ceil(wordCount / 200);\n\n    function updateTimeRemaining() {\n      const scrollTop = window.scrollY;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n      const scrollPercent = docHeight > 0 ? scrollTop / docHeight : 0;\n      const remainingPercent = 1 - scrollPercent;\n      const remainingMinutes = Math.max(1, Math.ceil(totalMinutes * remainingPercent));\n\n      if (remainingMinutes <= 1) {\n        timeValue.textContent = '< 1';\n      } else {\n        timeValue.textContent = remainingMinutes;\n      }\n    }\n\n    updateTimeRemaining();\n    window.addEventListener('scroll', updateTimeRemaining, { passive: true });\n  }\n\n\n\n// ==================== TEXT HIGHLIGHT ====================\n  function initTextHighlight() {\n    const content = document.querySelector('.article-content');\n    if (!content) return;\n\n    const articleId = window.location.pathname;\n    const storageKey = 'article-highlights-' + articleId.replace(/[^a-z0-9]/gi, '-');\n\n\n    function loadHighlights() {\n      const saved = localStorage.getItem(storageKey);\n      if (!saved) return;\n\n      try {\n        const highlights = JSON.parse(saved);\n        highlights.forEach(h => {\n          const range = findTextInContent(h.text);\n          if (range) {\n            wrapRangeWithHighlight(range, h.id);\n          }\n        });\n      } catch (e) {\n        console.error('Error loading highlights:', e);\n      }\n    }\n\n\n    function findTextInContent(searchText) {\n      const walker = document.createTreeWalker(content, NodeFilter.SHOW_TEXT, null, false);\n      let node;\n      while (node = walker.nextNode()) {\n        const idx = node.textContent.indexOf(searchText);\n        if (idx >= 0) {\n          const range = document.createRange();\n          range.setStart(node, idx);\n          range.setEnd(node, idx + searchText.length);\n          return range;\n        }\n      }\n      return null;\n    }\n\n\n    function wrapRangeWithHighlight(range, id) {\n      const span = document.createElement('span');\n      span.className = 'user-highlight';\n      span.dataset.highlightId = id || Date.now().toString();\n\n      try {\n\n        range.surroundContents(span);\n      } catch (e) {\n\n        const fragment = range.extractContents();\n        span.appendChild(fragment);\n        range.insertNode(span);\n      }\n\n      span.addEventListener('click', () => {\n        const confirmMsg = getTranslation('highlight_remove_confirm', 'Remove this highlight?');\n        if (confirm(confirmMsg)) {\n          removeHighlight(span.dataset.highlightId);\n        }\n      });\n    }\n\n\n    function saveHighlights() {\n      const highlights = [];\n      content.querySelectorAll('.user-highlight').forEach(span => {\n        highlights.push({\n          id: span.dataset.highlightId,\n          text: span.textContent\n        });\n      });\n      localStorage.setItem(storageKey, JSON.stringify(highlights));\n    }\n\n\n    function removeHighlight(id) {\n      const span = content.querySelector(`[data-highlight-id=\"${id}\"]`);\n      if (span) {\n        const parent = span.parentNode;\n        while (span.firstChild) {\n          parent.insertBefore(span.firstChild, span);\n        }\n        parent.removeChild(span);\n        saveHighlights();\n      }\n    }\n\n\n    const highlightBtn = document.getElementById('highlightBtn');\n    if (highlightBtn) {\n      highlightBtn.addEventListener('click', () => {\n        const selection = window.getSelection();\n        if (!selection.rangeCount || selection.isCollapsed) {\n          alert(getTranslation('highlight_select_first', 'Select some text first to highlight it.'));\n          return;\n        }\n\n        const range = selection.getRangeAt(0);\n        if (!content.contains(range.commonAncestorContainer)) {\n          alert(getTranslation('highlight_select_article', 'Please select text within the article content.'));\n          return;\n        }\n\n        try {\n          wrapRangeWithHighlight(range);\n          saveHighlights();\n          selection.removeAllRanges();\n        } catch (e) {\n          console.error('Could not highlight:', e);\n        }\n      });\n    }\n\n    loadHighlights();\n  }\n\n\n\n// ==================== BOOKMARKS ====================\n  function initBookmark() {\n    const articleId = window.location.pathname;\n    const storageKey = 'article-bookmark-' + articleId.replace(/[^a-z0-9]/gi, '-');\n\n\n    function loadBookmark() {\n      const saved = localStorage.getItem(storageKey);\n      if (saved) {\n        const scrollPos = parseInt(saved, 10);\n        if (scrollPos > 100) {\n          showResumePrompt(scrollPos);\n        }\n      }\n    }\n\n\n    function saveBookmark() {\n      const scrollTop = window.scrollY;\n      if (scrollTop > 100) {\n        localStorage.setItem(storageKey, scrollTop.toString());\n      }\n    }\n\n\n    function showResumePrompt(scrollPos) {\n      const prompt = document.createElement('div');\n      prompt.className = 'bookmark-prompt';\n\n      const resumeText = getTranslation('bookmark_resume', 'Resume where you left off?');\n      const yesText = getTranslation('bookmark_yes', 'Yes');\n      const noText = getTranslation('bookmark_no', 'No');\n\n      prompt.innerHTML = `\n        <span>${resumeText}</span>\n        <button class=\"bookmark-prompt__yes\">${yesText}</button>\n        <button class=\"bookmark-prompt__no\">${noText}</button>\n      `;\n      document.body.appendChild(prompt);\n\n      prompt.querySelector('.bookmark-prompt__yes').addEventListener('click', () => {\n        window.scrollTo({ top: scrollPos, behavior: 'smooth' });\n        prompt.remove();\n      });\n\n      prompt.querySelector('.bookmark-prompt__no').addEventListener('click', () => {\n        localStorage.removeItem(storageKey);\n        prompt.remove();\n      });\n\n\n      setTimeout(() => {\n        if (prompt.parentNode) prompt.remove();\n      }, 10000);\n    }\n\n\n    let saveTimeout;\n    window.addEventListener('scroll', () => {\n      clearTimeout(saveTimeout);\n      saveTimeout = setTimeout(saveBookmark, 1000);\n    }, { passive: true });\n\n\n    setTimeout(loadBookmark, 500);\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n\n\n  window.ArticleTTS = {\n    play: playSpeech,\n    pause: pauseSpeech,\n    stop: stopSpeech,\n    changeSpeed\n  };\n\n\n\n\n\n// --- Supabase Client ---\n  function getSupabaseClient() {\n    if (typeof getSupabase === 'function') {\n      return getSupabase();\n    }\n    return null;\n  }\n\n  function getArticleInfo() {\n    const path = window.location.pathname;\n    const slug = path.split('/').pop().replace('.html', '');\n    const title = document.querySelector('title')?.textContent?.split('|')[0]?.trim() || slug;\n    const category = document.querySelector('.article-category')?.textContent ||\n                    document.querySelector('.article-tag')?.textContent || 'Article';\n    const image = document.querySelector('.article-hero img')?.src ||\n                 document.querySelector('meta[property=\"og:image\"]')?.content || '';\n    return { slug, title, category, image };\n  }\n\n\n// ==================== SAVE ARTICLE ====================\n  async function checkIfSaved() {\n    const supabaseClient = getSupabaseClient();\n    if (!supabaseClient) return false;\n\n    const { data: { user } } = await supabaseClient.auth.getUser();\n    if (!user) return false;\n\n    const { slug } = getArticleInfo();\n    const { data } = await supabaseClient\n      .from('saved_articles')\n      .select('id')\n      .eq('user_id', user.id)\n      .eq('article_slug', slug)\n      .single();\n\n    return !!data;\n  }\n\n  async function toggleSaveArticle() {\n    const btn = document.getElementById('saveArticleBtn');\n    if (!btn) return;\n\n    const supabaseClient = getSupabaseClient();\n    if (!supabaseClient) {\n      alert('Please sign in to save articles');\n      window.location.href = '/auth/';\n      return;\n    }\n\n    const { data: { user } } = await supabaseClient.auth.getUser();\n    if (!user) {\n      alert('Please sign in to save articles');\n      window.location.href = '/auth/';\n      return;\n    }\n\n    btn.disabled = true;\n    const { slug, title, category, image } = getArticleInfo();\n    const isSaved = btn.classList.contains('is-saved');\n\n    try {\n      if (isSaved) {\n        await supabaseClient\n          .from('saved_articles')\n          .delete()\n          .eq('user_id', user.id)\n          .eq('article_slug', slug);\n\n        btn.classList.remove('is-saved');\n        btn.querySelector('i').className = 'far fa-bookmark';\n        btn.querySelector('span').textContent = getTranslation('save_article', 'Save Article');\n      } else {\n        await supabaseClient\n          .from('saved_articles')\n          .upsert({\n            user_id: user.id,\n            article_slug: slug,\n            article_title: title,\n            article_image: image\n          }, { onConflict: 'user_id,article_slug' });\n\n        btn.classList.add('is-saved');\n        btn.querySelector('i').className = 'fas fa-bookmark';\n        btn.querySelector('span').textContent = getTranslation('article_saved', 'Saved!');\n\n        if (typeof MBAnalytics !== 'undefined' && MBAnalytics.logActivity) {\n          MBAnalytics.logActivity('article_saved', { article_slug: slug, article_title: title });\n        }\n      }\n    } catch (error) {\n      console.error('Error saving article:', error);\n      alert('Failed to save article. Please try again.');\n    } finally {\n      btn.disabled = false;\n    }\n  }\n\n  async function initSaveButton() {\n    const btn = document.getElementById('saveArticleBtn');\n    if (!btn) return;\n\n    btn.addEventListener('click', toggleSaveArticle);\n\n    const isSaved = await checkIfSaved();\n    if (isSaved) {\n      btn.classList.add('is-saved');\n      btn.querySelector('i').className = 'fas fa-bookmark';\n      btn.querySelector('span').textContent = getTranslation('article_saved', 'Saved!');\n    }\n  }\n\n  document.addEventListener('DOMContentLoaded', initSaveButton);\n})();\n\n\n(function() {\n  'use strict';\n\n\n// ==================== READING ANALYTICS ====================\n  const articleSlug = window.location.pathname.split('/').filter(p => p).pop().replace('.html', '');\n  const articleTitle = document.title.replace(' | MindSpace', '');\n\n  document.body.dataset.articleId = articleSlug;\n\n  let readingStartTime = Date.now();\n  let maxScrollDepth = 0;\n  let hasTrackedStart = false;\n  let hasTrackedComplete = false;\n\n  function trackScrollProgress() {\n    const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n    if (docHeight > 0) {\n      const currentScroll = window.scrollY;\n      const newDepth = Math.round((currentScroll / docHeight) * 100);\n      if (newDepth > maxScrollDepth) {\n        maxScrollDepth = newDepth;\n\n        if (maxScrollDepth >= 90 && !hasTrackedComplete) {\n          hasTrackedComplete = true;\n          if (typeof MBAnalytics !== 'undefined') {\n            MBAnalytics.trackArticleComplete(articleSlug);\n          }\n        }\n      }\n    }\n  }\n\n  function initReadingTracker() {\n    if (!hasTrackedStart && typeof MBAnalytics !== 'undefined') {\n      hasTrackedStart = true;\n      MBAnalytics.trackArticleRead(articleSlug, articleTitle);\n    }\n\n    let ticking = false;\n    window.addEventListener('scroll', () => {\n      if (!ticking) {\n        window.requestAnimationFrame(() => {\n          trackScrollProgress();\n          ticking = false;\n        });\n        ticking = true;\n      }\n    }, { passive: true });\n\n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden && typeof MBAnalytics !== 'undefined') {\n        MBAnalytics.logActivity('article_progress', {\n          article_id: articleSlug,\n          progress: maxScrollDepth,\n          time_spent: Math.round((Date.now() - readingStartTime) / 1000)\n        });\n      }\n    });\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initReadingTracker);\n  } else {\n    initReadingTracker();\n  }\n})();\n","path":null,"size_bytes":80490,"size_tokens":null},"api/tts/health.py":{"content":"from http.server import BaseHTTPRequestHandler\nimport os\nimport json\n\nELEVENLABS_API_KEY = (os.environ.get('ELEVENLABS_API_KEY') or '').strip()\n\nclass handler(BaseHTTPRequestHandler):\n    def do_GET(self):\n        self.send_response(200)\n        self.send_header('Content-Type', 'application/json')\n        self.send_header('Access-Control-Allow-Origin', '*')\n        self.end_headers()\n        self.wfile.write(json.dumps({\n            'available': bool(ELEVENLABS_API_KEY),\n            'service': 'elevenlabs'\n        }).encode())\n\n    def do_OPTIONS(self):\n        self.send_response(200)\n        self.send_header('Access-Control-Allow-Origin', '*')\n        self.send_header('Access-Control-Allow-Methods', 'GET, OPTIONS')\n        self.send_header('Access-Control-Allow-Headers', 'Content-Type')\n        self.end_headers()\n","path":null,"size_bytes":826,"size_tokens":null},"scripts/audit_markup.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nHTML Markup Audit Script\nScans HTML files for text content that might need translation attributes.\n\nUsage:\n    python scripts/audit_markup.py\n    python scripts/audit_markup.py --verbose    # Show all findings\n    python scripts/audit_markup.py --dir ./blog  # Scan specific directory\n\"\"\"\n\nimport os\nimport re\nimport argparse\nfrom html.parser import HTMLParser\nfrom collections import defaultdict\n\nSKIP_TAGS = {'script', 'style', 'code', 'pre', 'svg', 'path', 'noscript', 'template'}\n\nSKIP_CLASSES = {'fa', 'fas', 'far', 'fab', 'icon', 'swiper-pagination-bullet'}\n\nSKIP_PATTERNS = [\n    r'^[\\s\\d\\.,\\-\\+\\*\\/\\(\\)\\[\\]\\{\\}:;\\'\\\"<>=!@#$%^&|\\\\~`]+$',\n    r'^https?://',\n    r'^mailto:',\n    r'^tel:',\n    r'^\\s*$',\n    r'^[A-Z_]+$',\n    r'^\\d+(\\.\\d+)?%?$',\n    r'^[\\u2022\\u2023\\u25E6\\u2043\\u2219]+$',\n]\n\nclass TranslationAuditParser(HTMLParser):\n    def __init__(self):\n        super().__init__()\n        self.findings = []\n        self.current_file = \"\"\n        self.tag_stack = []\n        self.skip_depth = 0\n        self.line_offset = 0\n        \n    def set_file(self, filepath):\n        self.current_file = filepath\n        self.findings = []\n        self.tag_stack = []\n        self.skip_depth = 0\n        \n    def handle_starttag(self, tag, attrs):\n        attrs_dict = dict(attrs)\n        \n        if tag.lower() in SKIP_TAGS:\n            self.skip_depth += 1\n        \n        self.tag_stack.append({\n            'tag': tag,\n            'attrs': attrs_dict,\n            'has_translate': 'data-translate' in attrs_dict or \n                            'data-translate-html' in attrs_dict,\n            'line': self.getpos()[0]\n        })\n        \n        if tag.lower() == 'img':\n            alt = attrs_dict.get('alt', '')\n            if alt and 'data-translate-alt' not in attrs_dict:\n                if not self._should_skip_text(alt):\n                    self.findings.append({\n                        'type': 'img-alt',\n                        'file': self.current_file,\n                        'line': self.getpos()[0],\n                        'tag': tag,\n                        'text': alt[:50] + ('...' if len(alt) > 50 else ''),\n                        'suggestion': 'Add data-translate-alt attribute'\n                    })\n        \n        if tag.lower() == 'input':\n            placeholder = attrs_dict.get('placeholder', '')\n            if placeholder and 'data-translate-placeholder' not in attrs_dict:\n                if not self._should_skip_text(placeholder):\n                    self.findings.append({\n                        'type': 'placeholder',\n                        'file': self.current_file,\n                        'line': self.getpos()[0],\n                        'tag': tag,\n                        'text': placeholder[:50] + ('...' if len(placeholder) > 50 else ''),\n                        'suggestion': 'Add data-translate-placeholder attribute'\n                    })\n        \n        title = attrs_dict.get('title', '')\n        if title and 'data-translate-title' not in attrs_dict:\n            if not self._should_skip_text(title):\n                self.findings.append({\n                    'type': 'title-attr',\n                    'file': self.current_file,\n                    'line': self.getpos()[0],\n                    'tag': tag,\n                    'text': title[:50] + ('...' if len(title) > 50 else ''),\n                    'suggestion': 'Add data-translate-title attribute'\n                })\n    \n    def handle_endtag(self, tag):\n        if tag.lower() in SKIP_TAGS:\n            self.skip_depth = max(0, self.skip_depth - 1)\n        \n        while self.tag_stack and self.tag_stack[-1]['tag'].lower() != tag.lower():\n            self.tag_stack.pop()\n        if self.tag_stack:\n            self.tag_stack.pop()\n    \n    def handle_data(self, data):\n        if self.skip_depth > 0:\n            return\n        \n        text = data.strip()\n        if not text or len(text) < 2:\n            return\n        \n        if self._should_skip_text(text):\n            return\n        \n        has_translate = False\n        parent_tag = 'unknown'\n        if self.tag_stack:\n            for tag_info in reversed(self.tag_stack):\n                if tag_info.get('has_translate'):\n                    has_translate = True\n                    break\n            parent_tag = self.tag_stack[-1]['tag'] if self.tag_stack else 'root'\n        \n        if not has_translate:\n            self.findings.append({\n                'type': 'text',\n                'file': self.current_file,\n                'line': self.getpos()[0],\n                'tag': parent_tag,\n                'text': text[:60] + ('...' if len(text) > 60 else ''),\n                'suggestion': 'Add data-translate attribute to parent element'\n            })\n    \n    def _should_skip_text(self, text):\n        \"\"\"Check if text should be skipped (not translatable).\"\"\"\n        for pattern in SKIP_PATTERNS:\n            if re.match(pattern, text, re.IGNORECASE):\n                return True\n        \n        if self.tag_stack:\n            classes = self.tag_stack[-1]['attrs'].get('class', '')\n            for skip_class in SKIP_CLASSES:\n                if skip_class in classes:\n                    return True\n        \n        return False\n\n\ndef scan_html_files(directory='.', verbose=False, threshold=None, extensions=['.html']):\n    \"\"\"Scan all HTML files in directory for translation issues.\"\"\"\n    \n    parser = TranslationAuditParser()\n    all_findings = defaultdict(list)\n    files_scanned = 0\n    \n    for root, dirs, files in os.walk(directory):\n        dirs[:] = [d for d in dirs if d not in ['node_modules', '.git', 'i18n', '__pycache__']]\n        \n        for filename in files:\n            if any(filename.endswith(ext) for ext in extensions):\n                filepath = os.path.join(root, filename)\n                files_scanned += 1\n                \n                try:\n                    with open(filepath, 'r', encoding='utf-8') as f:\n                        content = f.read()\n                    \n                    parser.set_file(filepath)\n                    parser.feed(content)\n                    \n                    for finding in parser.findings:\n                        all_findings[filepath].append(finding)\n                        \n                except Exception as e:\n                    print(f\"Warning: Could not parse {filepath}: {e}\")\n    \n    print(\"\\n\" + \"=\" * 60)\n    print(\"HTML MARKUP AUDIT REPORT\")\n    print(\"=\" * 60)\n    \n    print(f\"\\nFiles scanned: {files_scanned}\")\n    \n    total_findings = sum(len(f) for f in all_findings.values())\n    files_with_issues = len(all_findings)\n    \n    if total_findings == 0:\n        print(\"\\nâœ… No translation issues found!\")\n        print(\"   All visible text appears to have proper data-translate attributes.\")\n        return True\n    \n    print(f\"\\nâš ï¸  Found {total_findings} potential issues in {files_with_issues} files\")\n    \n    by_type = defaultdict(int)\n    for findings in all_findings.values():\n        for f in findings:\n            by_type[f['type']] += 1\n    \n    print(\"\\n\" + \"-\" * 60)\n    print(\"ISSUES BY TYPE\")\n    print(\"-\" * 60)\n    \n    type_labels = {\n        'text': 'Text without data-translate',\n        'img-alt': 'Image alt without data-translate-alt',\n        'placeholder': 'Input placeholder without data-translate-placeholder',\n        'title-attr': 'Title attribute without data-translate-title'\n    }\n    \n    for issue_type, count in sorted(by_type.items(), key=lambda x: -x[1]):\n        label = type_labels.get(issue_type, issue_type)\n        print(f\"   {count:4} - {label}\")\n    \n    if verbose:\n        print(\"\\n\" + \"-\" * 60)\n        print(\"DETAILED FINDINGS\")\n        print(\"-\" * 60)\n        \n        for filepath, findings in sorted(all_findings.items()):\n            print(f\"\\nðŸ“„ {filepath}\")\n            for f in findings[:15]:\n                print(f\"   Line {f['line']:4}: [{f['type']}] \\\"{f['text']}\\\"\")\n            if len(findings) > 15:\n                print(f\"   ... and {len(findings) - 15} more\")\n    else:\n        print(\"\\nðŸ’¡ Run with --verbose to see all findings\")\n    \n    if threshold is not None:\n        if total_findings <= threshold:\n            print(f\"\\nâœ… Issue count ({total_findings}) is within threshold ({threshold})\")\n        else:\n            print(f\"\\nâŒ Issue count ({total_findings}) exceeds threshold ({threshold})\")\n    \n    print(\"\\n\" + \"-\" * 60)\n    print(\"NEXT STEPS\")\n    print(\"-\" * 60)\n    print(\"1. Review each finding to determine if translation is needed\")\n    print(\"2. Add appropriate data-translate attributes to elements\")\n    print(\"3. Add translation keys to translations.csv\")\n    print(\"4. Run: python scripts/csv_to_json.py\")\n    print()\n    \n    if threshold is not None:\n        return total_findings <= threshold\n    return True\n\n\ndef main():\n    parser = argparse.ArgumentParser(description='Audit HTML for missing translation attributes')\n    parser.add_argument('--verbose', '-v', action='store_true',\n                        help='Show all findings in detail')\n    parser.add_argument('--dir', '-d', default='.',\n                        help='Directory to scan (default: current directory)')\n    parser.add_argument('--threshold', '-t', type=int, default=None,\n                        help='Maximum allowed issues (fails if count exceeds this)')\n    \n    args = parser.parse_args()\n    \n    success = scan_html_files(args.dir, args.verbose, args.threshold)\n    exit(0 if success else 1)\n\n\nif __name__ == '__main__':\n    main()\n","path":null,"size_bytes":9541,"size_tokens":null},"js/analytics.js":{"content":"// ==================== ANALYTICS ====================\n\nconst MBAnalytics = (function() {\n  'use strict';\n\n  // --- State ---\n  let supabaseClient = null;\n  let currentUser = null;\n  let sessionId = null;\n  let pageLoadTime = Date.now();\n  let scrollDepth = 0;\n  let readingStartTime = null;\n  let isTracking = false;\n\n  // --- Supabase Client ---\n  function getSupabase() {\n    if (!supabaseClient && typeof supabase !== 'undefined') {\n      const SUPABASE_URL = \"https://cxjqessxarjayqxvhnhs.supabase.co\";\n      const SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4anFlc3N4YXJqYXlxeHZobmhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwMjQwOTEsImV4cCI6MjA4MzYwMDA5MX0.SUI4sPOSPxDiGwqwQr19UOKtbK7KmjMqkX6HUT6-yps\";\n      supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n    }\n    return supabaseClient;\n  }\n\n  // --- Session Management ---\n  function generateSessionId() {\n    return 'sess_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n  }\n\n  function getOrCreateSessionId() {\n    let sid = sessionStorage.getItem('mb_session_id');\n    if (!sid) {\n      sid = generateSessionId();\n      sessionStorage.setItem('mb_session_id', sid);\n    }\n    return sid;\n  }\n\n  // --- Initialization ---\n  async function init() {\n    sessionId = getOrCreateSessionId();\n    const sb = getSupabase();\n    if (sb) {\n      const { data } = await sb.auth.getSession();\n      currentUser = data?.session?.user || null;\n      \n      sb.auth.onAuthStateChange((event, session) => {\n        currentUser = session?.user || null;\n      });\n    }\n    \n    setupScrollTracking();\n    setupVisibilityTracking();\n    isTracking = true;\n    \n    trackPageView();\n  }\n\n  // --- Scroll Tracking ---\n  function setupScrollTracking() {\n    let ticking = false;\n    window.addEventListener('scroll', () => {\n      if (!ticking) {\n        window.requestAnimationFrame(() => {\n          const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n          if (docHeight > 0) {\n            const currentScroll = window.scrollY;\n            const newDepth = Math.round((currentScroll / docHeight) * 100);\n            if (newDepth > scrollDepth) {\n              scrollDepth = newDepth;\n            }\n          }\n          ticking = false;\n        });\n        ticking = true;\n      }\n    }, { passive: true });\n  }\n\n  // --- Visibility Tracking ---\n  function setupVisibilityTracking() {\n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden) {\n        saveReadingProgress();\n      } else {\n        readingStartTime = Date.now();\n      }\n    });\n\n    window.addEventListener('beforeunload', () => {\n      saveReadingProgress();\n      trackPageExit();\n    });\n  }\n\n  // --- Page Tracking ---\n  async function trackPageView() {\n    const pageData = {\n      page_url: window.location.pathname,\n      page_title: document.title,\n      referrer: document.referrer || null,\n      timestamp: new Date().toISOString()\n    };\n\n    await logActivity('page_view', pageData);\n    readingStartTime = Date.now();\n  }\n\n  async function trackPageExit() {\n    const timeSpent = Math.round((Date.now() - pageLoadTime) / 1000);\n    \n    await logActivity('page_exit', {\n      page_url: window.location.pathname,\n      time_spent_seconds: timeSpent,\n      scroll_depth: scrollDepth\n    });\n  }\n\n  // --- Activity Logging ---\n  async function logActivity(actionType, metadata = {}) {\n    if (!currentUser) return;\n\n    const sb = getSupabase();\n    if (!sb) return;\n\n    try {\n      await sb.from('user_activity_logs').insert({\n        user_id: currentUser.id,\n        activity_type: actionType,\n        page_url: window.location.pathname,\n        activity_data: metadata\n      });\n    } catch (err) {\n      console.warn('Analytics log failed:', err);\n    }\n  }\n\n  // --- Article Tracking ---\n  async function trackArticleRead(articleId, articleTitle) {\n    if (!currentUser) return;\n\n    await logActivity('article_read', {\n      article_id: articleId,\n      article_title: articleTitle\n    });\n\n    await updateReadingProgress(articleId, 0, 0);\n    await checkAchievements('article_read');\n  }\n\n  async function trackArticleComplete(articleId) {\n    if (!currentUser) return;\n\n    const timeSpent = readingStartTime ? Math.round((Date.now() - readingStartTime) / 1000) : 0;\n\n    await logActivity('article_complete', {\n      article_id: articleId,\n      time_spent_seconds: timeSpent,\n      scroll_depth: scrollDepth\n    });\n\n    await updateReadingProgress(articleId, 100, timeSpent);\n    await checkAchievements('article_complete');\n  }\n\n  // --- Reading Progress ---\n  async function updateReadingProgress(articleSlug, progress, timeSpent) {\n    if (!currentUser) return;\n\n    const sb = getSupabase();\n    if (!sb) return;\n\n    try {\n      const { data: existing } = await sb\n        .from('reading_progress')\n        .select('*')\n        .eq('user_id', currentUser.id)\n        .eq('article_slug', articleSlug)\n        .single();\n\n      if (existing) {\n        if (progress > existing.scroll_depth || timeSpent > existing.time_spent_seconds) {\n          await sb.from('reading_progress').update({\n            scroll_depth: Math.max(progress, existing.scroll_depth),\n            time_spent_seconds: Math.max(timeSpent, existing.time_spent_seconds),\n            last_read_at: new Date().toISOString(),\n            completed: progress >= 90\n          }).eq('id', existing.id);\n        }\n      } else {\n        await sb.from('reading_progress').insert({\n          user_id: currentUser.id,\n          article_slug: articleSlug,\n          scroll_depth: progress,\n          time_spent_seconds: timeSpent,\n          completed: progress >= 90\n        });\n      }\n    } catch (err) {\n      console.warn('Reading progress update failed:', err);\n    }\n  }\n\n  async function saveReadingProgress() {\n    const articleId = document.body.dataset.articleId;\n    if (!articleId || !currentUser) return;\n\n    const timeSpent = readingStartTime ? Math.round((Date.now() - readingStartTime) / 1000) : 0;\n    await updateReadingProgress(articleId, scrollDepth, timeSpent);\n  }\n\n  // --- Content Tracking ---\n  async function trackResourceView(resourceId, resourceTitle) {\n    await logActivity('resource_view', {\n      resource_id: resourceId,\n      resource_title: resourceTitle\n    });\n  }\n\n  async function trackSearch(query, resultsCount) {\n    await logActivity('search', {\n      query: query,\n      results_count: resultsCount\n    });\n  }\n\n  async function trackShare(contentType, contentId, platform) {\n    await logActivity('share', {\n      content_type: contentType,\n      content_id: contentId,\n      platform: platform\n    });\n  }\n\n  // --- Wellness Tracking ---\n  async function trackMoodEntry(mood, notes) {\n    await logActivity('mood_entry', {\n      mood: mood,\n      has_notes: !!notes\n    });\n    await checkAchievements('mood_entry');\n  }\n\n  async function trackGoalProgress(goalId, progress) {\n    await logActivity('goal_progress', {\n      goal_id: goalId,\n      progress: progress\n    });\n    if (progress >= 100) {\n      await checkAchievements('goal_complete');\n    }\n  }\n\n  // --- Community Tracking ---\n  async function trackCommunityAction(actionType, postId) {\n    await logActivity('community_' + actionType, {\n      post_id: postId\n    });\n    await checkAchievements('community_' + actionType);\n  }\n\n  // ==================== ACHIEVEMENTS ====================\n\n  const ACHIEVEMENTS = [\n    { id: 'first_article', name: 'First Steps', description: 'Read your first article', icon: 'book-outline', condition: { action: 'article_read', count: 1 } },\n    { id: 'bookworm', name: 'Bookworm', description: 'Read 10 articles', icon: 'library-outline', condition: { action: 'article_read', count: 10 } },\n    { id: 'scholar', name: 'Scholar', description: 'Read 25 articles', icon: 'school-outline', condition: { action: 'article_read', count: 25 } },\n    { id: 'first_post', name: 'Voice Heard', description: 'Create your first community post', icon: 'chatbubble-outline', condition: { action: 'community_post', count: 1 } },\n    { id: 'contributor', name: 'Contributor', description: 'Make 10 community posts', icon: 'chatbubbles-outline', condition: { action: 'community_post', count: 10 } },\n    { id: 'first_comment', name: 'Engaged', description: 'Leave your first comment', icon: 'chatbox-outline', condition: { action: 'community_comment', count: 1 } },\n    { id: 'streak_7', name: 'Week Warrior', description: 'Maintain a 7-day streak', icon: 'flame-outline', condition: { action: 'streak', count: 7 } },\n    { id: 'streak_30', name: 'Monthly Master', description: 'Maintain a 30-day streak', icon: 'flame', condition: { action: 'streak', count: 30 } },\n    { id: 'mood_tracker', name: 'Self Aware', description: 'Log your mood 7 times', icon: 'happy-outline', condition: { action: 'mood_entry', count: 7 } },\n    { id: 'goal_setter', name: 'Goal Setter', description: 'Complete your first goal', icon: 'flag-outline', condition: { action: 'goal_complete', count: 1 } },\n    { id: 'achiever', name: 'Achiever', description: 'Complete 5 goals', icon: 'trophy-outline', condition: { action: 'goal_complete', count: 5 } },\n    { id: 'explorer', name: 'Explorer', description: 'View 20 different resources', icon: 'compass-outline', condition: { action: 'resource_view', count: 20 } },\n    { id: 'social_butterfly', name: 'Social Butterfly', description: 'Follow 10 users', icon: 'people-outline', condition: { action: 'follow', count: 10 } },\n    { id: 'early_adopter', name: 'Early Adopter', description: 'Join MindBalance community', icon: 'rocket-outline', condition: { action: 'signup', count: 1 } },\n    { id: 'completionist', name: 'Completionist', description: 'Complete 10 articles 100%', icon: 'checkmark-done-outline', condition: { action: 'article_complete', count: 10 } }\n  ];\n\n  // --- Achievement Checks ---\n  async function checkAchievements(actionType) {\n    if (!currentUser) return;\n\n    const sb = getSupabase();\n    if (!sb) return;\n\n    try {\n      const { data: existingAchievements } = await sb\n        .from('user_achievements')\n        .select('achievement_id')\n        .eq('user_id', currentUser.id);\n\n      const earnedIds = (existingAchievements || []).map(a => a.achievement_id);\n\n      const { count: actionCount } = await sb\n        .from('user_activity_logs')\n        .select('*', { count: 'exact', head: true })\n        .eq('user_id', currentUser.id)\n        .eq('activity_type', actionType);\n\n      for (const achievement of ACHIEVEMENTS) {\n        if (earnedIds.includes(achievement.id)) continue;\n        if (achievement.condition.action !== actionType) continue;\n        \n        if (actionCount >= achievement.condition.count) {\n          await unlockAchievement(achievement);\n        }\n      }\n    } catch (err) {\n      console.warn('Achievement check failed:', err);\n    }\n  }\n\n  // --- Achievement Unlock ---\n  async function unlockAchievement(achievement) {\n    if (!currentUser) return;\n\n    const sb = getSupabase();\n    if (!sb) return;\n\n    try {\n      await sb.from('user_achievements').insert({\n        user_id: currentUser.id,\n        achievement_id: achievement.id,\n        achievement_name: achievement.name,\n        achievement_description: achievement.description,\n        achievement_icon: achievement.icon,\n        unlocked_at: new Date().toISOString()\n      });\n\n      try {\n        await sb.from('notifications').insert({\n          user_id: currentUser.id,\n          type: 'achievement',\n          from_user_name: achievement.name,\n          content: achievement.description,\n          read: false\n        });\n      } catch (notifErr) {\n        console.warn('Failed to create achievement notification:', notifErr);\n      }\n\n      if (typeof window.loadGlobalNotificationCount === 'function') {\n        window.loadGlobalNotificationCount();\n      }\n\n      showAchievementNotification(achievement);\n    } catch (err) {\n      console.warn('Achievement unlock failed:', err);\n    }\n  }\n\n  // --- Achievement Notification ---\n  const achievementQueue = [];\n  let isShowingAchievement = false;\n\n  function showAchievementNotification(achievement) {\n    achievementQueue.push(achievement);\n    if (!isShowingAchievement) {\n      processAchievementQueue();\n    }\n  }\n\n  function processAchievementQueue() {\n    if (achievementQueue.length === 0) {\n      isShowingAchievement = false;\n      return;\n    }\n    isShowingAchievement = true;\n    const achievement = achievementQueue.shift();\n\n    document.querySelectorAll('.mb-achievement-notification').forEach(el => el.remove());\n\n    const notification = document.createElement('div');\n    notification.className = 'mb-achievement-notification';\n    notification.innerHTML = `\n      <div class=\"mb-achievement-notification__icon\">\n        <ion-icon name=\"${achievement.icon}\"></ion-icon>\n      </div>\n      <div class=\"mb-achievement-notification__content\">\n        <span class=\"mb-achievement-notification__label\">Achievement Unlocked!</span>\n        <span class=\"mb-achievement-notification__name\">${achievement.name}</span>\n        <span class=\"mb-achievement-notification__desc\">${achievement.description}</span>\n      </div>\n    `;\n\n    document.body.appendChild(notification);\n\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        notification.classList.add('show');\n      });\n    });\n\n    setTimeout(() => {\n      notification.classList.remove('show');\n      setTimeout(() => {\n        notification.remove();\n        processAchievementQueue();\n      }, 600);\n    }, 5000);\n  }\n\n  // ==================== STATS & DATA RETRIEVAL ====================\n\n  async function getActivityStats(userId, days = 30) {\n    const sb = getSupabase();\n    if (!sb) return null;\n\n    const startDate = new Date();\n    startDate.setDate(startDate.getDate() - days);\n\n    try {\n      const { data } = await sb\n        .from('user_activity_logs')\n        .select('activity_type, created_at')\n        .eq('user_id', userId)\n        .gte('created_at', startDate.toISOString())\n        .order('created_at', { ascending: true });\n\n      return processActivityData(data || [], days);\n    } catch (err) {\n      console.warn('Failed to get activity stats:', err);\n      return null;\n    }\n  }\n\n  function processActivityData(activities, days) {\n    const dailyCounts = {};\n    const typeCounts = {};\n    const now = new Date();\n\n    for (let i = 0; i < days; i++) {\n      const date = new Date(now);\n      date.setDate(date.getDate() - i);\n      const key = date.toISOString().split('T')[0];\n      dailyCounts[key] = 0;\n    }\n\n    activities.forEach(activity => {\n      const date = activity.created_at.split('T')[0];\n      if (dailyCounts.hasOwnProperty(date)) {\n        dailyCounts[date]++;\n      }\n      typeCounts[activity.activity_type] = (typeCounts[activity.activity_type] || 0) + 1;\n    });\n\n    return {\n      dailyCounts,\n      typeCounts,\n      totalActivities: activities.length\n    };\n  }\n\n  // --- Reading Stats ---\n  async function getReadingStats(userId) {\n    const sb = getSupabase();\n    if (!sb) return null;\n\n    try {\n      const { data } = await sb\n        .from('reading_progress')\n        .select('*')\n        .eq('user_id', userId);\n\n      const articles = data || [];\n      const completed = articles.filter(a => a.completed).length;\n      const totalTime = articles.reduce((sum, a) => sum + (a.time_spent_seconds || 0), 0);\n      const avgProgress = articles.length > 0 \n        ? Math.round(articles.reduce((sum, a) => sum + (a.scroll_depth || 0), 0) / articles.length) \n        : 0;\n\n      return {\n        articlesStarted: articles.length,\n        articlesCompleted: completed,\n        totalReadingTime: totalTime,\n        averageProgress: avgProgress\n      };\n    } catch (err) {\n      console.warn('Failed to get reading stats:', err);\n      return null;\n    }\n  }\n\n  // --- Achievements Data ---\n  async function getAchievements(userId) {\n    const sb = getSupabase();\n    if (!sb) return { earned: [], available: ACHIEVEMENTS };\n\n    try {\n      const [userAchievementsResult, allAchievementsResult] = await Promise.all([\n        sb.from('user_achievements')\n          .select('*')\n          .eq('user_id', userId)\n          .order('unlocked_at', { ascending: false }),\n        sb.from('achievements')\n          .select('*')\n      ]);\n\n      const userAchievements = userAchievementsResult.data || [];\n      const dbAchievements = allAchievementsResult.data || [];\n      \n      const dbAchievementMap = {};\n      dbAchievements.forEach(a => {\n        dbAchievementMap[a.id] = a;\n      });\n\n      const earnedIds = userAchievements.map(a => a.achievement_id);\n      \n      const earned = userAchievements.map(userAchievement => {\n        const dbInfo = dbAchievementMap[userAchievement.achievement_id];\n        const jsInfo = ACHIEVEMENTS.find(a => a.id === userAchievement.achievement_id);\n        return {\n          ...userAchievement,\n          name: dbInfo?.name || jsInfo?.name || userAchievement.achievement_name || 'Achievement',\n          description: dbInfo?.description || jsInfo?.description || userAchievement.achievement_description || '',\n          icon: dbInfo?.icon || jsInfo?.icon || userAchievement.achievement_icon || 'trophy-outline'\n        };\n      });\n\n      const allAvailableIds = new Set([\n        ...ACHIEVEMENTS.map(a => a.id),\n        ...dbAchievements.map(a => a.id)\n      ]);\n      \n      const available = [];\n      allAvailableIds.forEach(id => {\n        if (!earnedIds.includes(id)) {\n          const dbInfo = dbAchievementMap[id];\n          const jsInfo = ACHIEVEMENTS.find(a => a.id === id);\n          if (dbInfo || jsInfo) {\n            available.push({\n              id,\n              name: dbInfo?.name || jsInfo?.name || 'Achievement',\n              description: dbInfo?.description || jsInfo?.description || '',\n              icon: dbInfo?.icon || jsInfo?.icon || 'trophy-outline'\n            });\n          }\n        }\n      });\n\n      return {\n        earned,\n        available\n      };\n    } catch (err) {\n      console.warn('Failed to get achievements:', err);\n      return { earned: [], available: ACHIEVEMENTS };\n    }\n  }\n\n  // --- Streak Data ---\n  async function getStreakData(userId, days = 365) {\n    const sb = getSupabase();\n    if (!sb) return null;\n\n    const startDate = new Date();\n    startDate.setDate(startDate.getDate() - days);\n\n    try {\n      const { data } = await sb\n        .from('user_activity_logs')\n        .select('created_at')\n        .eq('user_id', userId)\n        .gte('created_at', startDate.toISOString());\n\n      const activeDays = new Set();\n      (data || []).forEach(activity => {\n        const date = activity.created_at.split('T')[0];\n        activeDays.add(date);\n      });\n\n      let currentStreak = 0;\n      let longestStreak = 0;\n      let tempStreak = 0;\n      const today = new Date();\n      \n      for (let i = 0; i < days; i++) {\n        const checkDate = new Date(today);\n        checkDate.setDate(checkDate.getDate() - i);\n        const dateKey = checkDate.toISOString().split('T')[0];\n        \n        if (activeDays.has(dateKey)) {\n          tempStreak++;\n          if (i === 0 || currentStreak > 0) {\n            currentStreak = tempStreak;\n          }\n        } else {\n          if (tempStreak > longestStreak) {\n            longestStreak = tempStreak;\n          }\n          tempStreak = 0;\n          if (i === 0) currentStreak = 0;\n        }\n      }\n\n      if (tempStreak > longestStreak) longestStreak = tempStreak;\n\n      return {\n        currentStreak,\n        longestStreak,\n        activeDays: Array.from(activeDays),\n        totalActiveDays: activeDays.size\n      };\n    } catch (err) {\n      console.warn('Failed to get streak data:', err);\n      return null;\n    }\n  }\n\n  // --- Recent Activity ---\n  async function getRecentActivity(userId, limit = 20) {\n    const sb = getSupabase();\n    if (!sb) return [];\n\n    try {\n      const { data } = await sb\n        .from('user_activity_logs')\n        .select('*')\n        .eq('user_id', userId)\n        .order('created_at', { ascending: false })\n        .limit(limit);\n\n      return data || [];\n    } catch (err) {\n      console.warn('Failed to get recent activity:', err);\n      return [];\n    }\n  }\n\n  // --- Public API ---\n  return {\n    init,\n    trackArticleRead,\n    trackArticleComplete,\n    trackResourceView,\n    trackSearch,\n    trackShare,\n    trackMoodEntry,\n    trackGoalProgress,\n    trackCommunityAction,\n    logActivity,\n    getActivityStats,\n    getReadingStats,\n    getAchievements,\n    getStreakData,\n    getRecentActivity,\n    ACHIEVEMENTS\n  };\n})();\n\n// --- Auto-Initialize ---\ndocument.addEventListener('DOMContentLoaded', () => {\n  MBAnalytics.init();\n});\n","path":null,"size_bytes":20741,"size_tokens":null},"mindspace-build/api/tts/health.py":{"content":"from http.server import BaseHTTPRequestHandler\nimport os\nimport json\n\nELEVENLABS_API_KEY = (os.environ.get('ELEVENLABS_API_KEY') or '').strip()\n\nclass handler(BaseHTTPRequestHandler):\n    def do_GET(self):\n        self.send_response(200)\n        self.send_header('Content-Type', 'application/json')\n        self.send_header('Access-Control-Allow-Origin', '*')\n        self.end_headers()\n        self.wfile.write(json.dumps({\n            'available': bool(ELEVENLABS_API_KEY),\n            'service': 'elevenlabs'\n        }).encode())\n\n    def do_OPTIONS(self):\n        self.send_response(200)\n        self.send_header('Access-Control-Allow-Origin', '*')\n        self.send_header('Access-Control-Allow-Methods', 'GET, OPTIONS')\n        self.send_header('Access-Control-Allow-Headers', 'Content-Type')\n        self.end_headers()\n","path":null,"size_bytes":826,"size_tokens":null},"mindspace-build/api/tts/generate.py":{"content":"from http.server import BaseHTTPRequestHandler\nimport os\nimport json\n\nELEVENLABS_API_KEY = (os.environ.get('ELEVENLABS_API_KEY') or '').strip()\n\nVOICE_MAP = {\n    'rachel': 'EXAVITQu4vr4xnSDxMaL',\n    'adam': '21m00Tcm4TlvDq8ikWAM',\n    'antoni': 'ErXwobaYiN019PkySvjV',\n    'arnold': 'VR6AewLTigWG4xSOukaG',\n    'bella': 'EXAVITQu4vr4xnSDxMaL',\n    'domi': 'AZnzlk1XvdvUeBnXmlld',\n    'elli': 'MF3mGyEYCl7XYWbV9V6O',\n    'josh': 'TxGEqnHWrfWFTfGW9XjX',\n    'sam': 'yoZ06aMxZJJ28mfd3POQ',\n}\n\nLANGUAGE_VOICE_MAP = {\n    'en': 'rachel',\n    'es': 'adam',\n    'fr': 'antoni',\n    'zh': 'adam',\n    'hi': 'adam',\n}\n\nclass handler(BaseHTTPRequestHandler):\n    def do_POST(self):\n        if not ELEVENLABS_API_KEY:\n            self.send_response(500)\n            self.send_header('Content-Type', 'application/json')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.end_headers()\n            self.wfile.write(json.dumps({'error': 'ElevenLabs API key not configured'}).encode())\n            return\n\n        content_length = int(self.headers.get('Content-Length', 0))\n        body = self.rfile.read(content_length)\n\n        try:\n            data = json.loads(body)\n        except Exception:\n            self.send_response(400)\n            self.send_header('Content-Type', 'application/json')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.end_headers()\n            self.wfile.write(json.dumps({'error': 'Invalid JSON'}).encode())\n            return\n\n        text = data.get('text', '').strip()\n        if not text:\n            self.send_response(400)\n            self.send_header('Content-Type', 'application/json')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.end_headers()\n            self.wfile.write(json.dumps({'error': 'No text provided'}).encode())\n            return\n\n        if len(text) > 5000:\n            self.send_response(400)\n            self.send_header('Content-Type', 'application/json')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.end_headers()\n            self.wfile.write(json.dumps({'error': 'Text too long (max 5000 characters)'}).encode())\n            return\n\n        voice_key = data.get('voice', 'rachel')\n        language = data.get('language', 'en')\n\n        if voice_key not in VOICE_MAP:\n            voice_key = LANGUAGE_VOICE_MAP.get(language, 'rachel')\n\n        voice_id = VOICE_MAP.get(voice_key, VOICE_MAP['rachel'])\n\n        try:\n            from elevenlabs.client import ElevenLabs\n            client = ElevenLabs(api_key=ELEVENLABS_API_KEY)\n\n            audio = client.text_to_speech.convert(\n                text=text,\n                voice_id=voice_id,\n                model_id=\"eleven_multilingual_v2\",\n                output_format=\"mp3_44100_128\"\n            )\n\n            audio_bytes = b''\n            for chunk in audio:\n                if isinstance(chunk, bytes):\n                    audio_bytes += chunk\n\n            self.send_response(200)\n            self.send_header('Content-Type', 'audio/mpeg')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.send_header('Cache-Control', 'public, max-age=3600')\n            self.end_headers()\n            self.wfile.write(audio_bytes)\n\n        except Exception as e:\n            error_msg = str(e)\n            status = 429 if ('quota' in error_msg.lower() or 'limit' in error_msg.lower()) else 500\n            self.send_response(status)\n            self.send_header('Content-Type', 'application/json')\n            self.send_header('Access-Control-Allow-Origin', '*')\n            self.end_headers()\n            err_text = 'API quota exceeded. Please try again later or use browser voice.' if status == 429 else f'TTS generation failed: {error_msg}'\n            self.wfile.write(json.dumps({'error': err_text}).encode())\n\n    def do_OPTIONS(self):\n        self.send_response(200)\n        self.send_header('Access-Control-Allow-Origin', '*')\n        self.send_header('Access-Control-Allow-Methods', 'POST, OPTIONS')\n        self.send_header('Access-Control-Allow-Headers', 'Content-Type')\n        self.end_headers()\n","path":null,"size_bytes":4168,"size_tokens":null},"api/wellness_insights.py":{"content":"import os\nimport json\nimport random\nfrom openai import OpenAI\n\nAI_INTEGRATIONS_OPENAI_API_KEY = os.environ.get(\"AI_INTEGRATIONS_OPENAI_API_KEY\")\nAI_INTEGRATIONS_OPENAI_BASE_URL = os.environ.get(\"AI_INTEGRATIONS_OPENAI_BASE_URL\")\n\nopenai = OpenAI(\n    api_key=AI_INTEGRATIONS_OPENAI_API_KEY,\n    base_url=AI_INTEGRATIONS_OPENAI_BASE_URL\n)\n\nFALLBACK_INSIGHTS = [\n    {\"insight\": \"Keep tracking your wellness journey - every step counts!\", \"affirmation\": \"You are capable of amazing things.\"},\n    {\"insight\": \"Your dedication to self-care makes a real difference.\", \"affirmation\": \"Every day is a chance to grow stronger.\"},\n    {\"insight\": \"Small steps lead to big changes in your wellbeing.\", \"affirmation\": \"You have the strength to overcome any challenge.\"},\n    {\"insight\": \"Taking time for yourself is never wasted time.\", \"affirmation\": \"Your mental health matters deeply.\"},\n    {\"insight\": \"Progress, not perfection, is what truly matters.\", \"affirmation\": \"Be proud of how far you have come.\"},\n    {\"insight\": \"Your commitment to wellness inspires positive change.\", \"affirmation\": \"You deserve all the happiness in the world.\"},\n    {\"insight\": \"Checking in with yourself is a powerful habit.\", \"affirmation\": \"Today is full of new possibilities.\"},\n    {\"insight\": \"Awareness is the first step toward positive growth.\", \"affirmation\": \"You are worthy of love and care.\"}\n]\n\ndef get_random_fallback():\n    return random.choice(FALLBACK_INSIGHTS)\n\ndef generate_wellness_insight(mood_data, goals_data, streak_data):\n    \"\"\"\n    Generate personalized AI wellness insights based on user's mood history,\n    goals progress, and engagement streak.\n    \"\"\"\n    \n    mood_summary = \"\"\n    if mood_data and len(mood_data) > 0:\n        avg_mood = sum(m.get('mood_level', 3) for m in mood_data) / len(mood_data)\n        recent_moods = [m.get('mood_level', 3) for m in mood_data[:7]]\n        mood_trend = \"improving\" if len(recent_moods) > 1 and recent_moods[0] > recent_moods[-1] else \"stable\"\n        mood_summary = f\"Average mood: {avg_mood:.1f}/5, Recent trend: {mood_trend}, Entries: {len(mood_data)}\"\n    else:\n        mood_summary = \"No mood entries yet\"\n    \n    goals_summary = \"\"\n    if goals_data and len(goals_data) > 0:\n        total = len(goals_data)\n        completed = sum(1 for g in goals_data if g.get('completed'))\n        active = total - completed\n        goals_summary = f\"Total goals: {total}, Completed: {completed}, Active: {active}\"\n    else:\n        goals_summary = \"No wellness goals set\"\n    \n    streak_summary = f\"Current visit streak: {streak_data.get('current_streak', 0)} days\"\n    \n    prompt = f\"\"\"You are a supportive, empathetic wellness companion for a mental health platform called MindBalance.\n    \nBased on this user's wellness data, provide a brief, encouraging insight (2-3 sentences max).\nFocus on positive reinforcement and gentle suggestions. Keep the tone warm, supportive, and non-clinical.\n\nUser Data:\n- {mood_summary}\n- {goals_summary}\n- {streak_summary}\n\nProvide:\n1. A personalized observation about their wellness journey\n2. A short, uplifting affirmation tailored to their data\n\nFormat your response as JSON:\n{{\"insight\": \"your observation here\", \"affirmation\": \"your affirmation here\"}}\n\"\"\"\n\n    try:\n\n        response = openai.chat.completions.create(\n            model=\"gpt-5-nano\",\n            messages=[{\"role\": \"user\", \"content\": prompt}],\n            response_format={\"type\": \"json_object\"},\n            max_completion_tokens=300\n        )\n        \n        content = response.choices[0].message.content or \"{}\"\n        result = json.loads(content)\n        return {\n            \"success\": True,\n            \"insight\": result.get(\"insight\", \"Keep up your wellness journey!\"),\n            \"affirmation\": result.get(\"affirmation\", \"You are doing great!\")\n        }\n    except Exception as e:\n        print(f\"AI insight error: {e}\")\n        fallback = get_random_fallback()\n        return {\n            \"success\": False,\n            \"insight\": fallback[\"insight\"],\n            \"affirmation\": fallback[\"affirmation\"]\n        }\n\n\ndef generate_mood_analysis(mood_entries):\n    \"\"\"\n    Analyze mood patterns and provide helpful insights.\n    \"\"\"\n    if not mood_entries or len(mood_entries) < 3:\n        return {\n            \"success\": True,\n            \"analysis\": \"Log a few more moods to get personalized insights about your emotional patterns.\",\n            \"suggestion\": \"Try logging your mood at the same time each day for better tracking.\"\n        }\n    \n    mood_levels = [m.get('mood_level', 3) for m in mood_entries]\n    avg = sum(mood_levels) / len(mood_levels)\n    \n    mood_descriptions = {\n        1: \"very low\",\n        2: \"low\", \n        3: \"neutral\",\n        4: \"good\",\n        5: \"great\"\n    }\n    \n    mood_counts = {}\n    for level in mood_levels:\n        mood_counts[level] = mood_counts.get(level, 0) + 1\n    \n    most_common = max(mood_counts.keys(), key=lambda k: mood_counts[k])\n    \n    prompt = f\"\"\"Analyze this mood pattern data and provide a brief, supportive insight.\n\nMood data (last {len(mood_levels)} entries):\n- Average mood: {avg:.1f}/5\n- Most common mood: {mood_descriptions.get(most_common, 'neutral')}\n- Mood distribution: {mood_counts}\n\nProvide a brief, empathetic analysis (2 sentences max) and one actionable wellness suggestion.\nFormat as JSON: {{\"analysis\": \"...\", \"suggestion\": \"...\"}}\n\"\"\"\n\n    try:\n        response = openai.chat.completions.create(\n            model=\"gpt-5-nano\",\n            messages=[{\"role\": \"user\", \"content\": prompt}],\n            response_format={\"type\": \"json_object\"},\n            max_completion_tokens=200\n        )\n        \n        content = response.choices[0].message.content or \"{}\"\n        result = json.loads(content)\n        return {\n            \"success\": True,\n            \"analysis\": result.get(\"analysis\", \"Your mood patterns show resilience.\"),\n            \"suggestion\": result.get(\"suggestion\", \"Consider a short walk or breathing exercise today.\")\n        }\n    except Exception as e:\n        print(f\"Mood analysis error: {e}\")\n        return {\n            \"success\": True,\n            \"analysis\": f\"Your average mood is {avg:.1f}/5 with {most_common} being most common.\",\n            \"suggestion\": \"Consider journaling about what affects your mood.\"\n        }\n\n\ndef generate_goal_suggestion(current_goals, completed_goals):\n    \"\"\"\n    Suggest new wellness goals based on user's goal history.\n    \"\"\"\n    \n    goal_categories = [\"mindfulness\", \"exercise\", \"sleep\", \"social\", \"learning\"]\n    \n    existing_categories = set()\n    for g in (current_goals or []):\n        cat = g.get('category', '').lower()\n        if cat in goal_categories:\n            existing_categories.add(cat)\n    \n    missing_categories = [c for c in goal_categories if c not in existing_categories]\n    \n    if not missing_categories:\n        missing_categories = goal_categories\n    \n    prompt = f\"\"\"Suggest one simple, achievable wellness goal for a mental health platform user.\n\nCurrent goal categories: {list(existing_categories) if existing_categories else 'None'}\nCompleted goals: {len(completed_goals or [])}\nSuggested category: {missing_categories[0]}\n\nProvide a specific, actionable goal (1 sentence) that's encouraging and achievable.\nFormat as JSON: {{\"goal\": \"...\", \"category\": \"...\", \"why\": \"...\"}}\n\"\"\"\n\n    try:\n        response = openai.chat.completions.create(\n            model=\"gpt-5-nano\",\n            messages=[{\"role\": \"user\", \"content\": prompt}],\n            response_format={\"type\": \"json_object\"},\n            max_completion_tokens=150\n        )\n        \n        content = response.choices[0].message.content or \"{}\"\n        result = json.loads(content)\n        return {\n            \"success\": True,\n            \"goal\": result.get(\"goal\", \"Take a 10-minute mindfulness break today\"),\n            \"category\": result.get(\"category\", missing_categories[0]),\n            \"why\": result.get(\"why\", \"Small steps lead to big changes.\")\n        }\n    except Exception as e:\n        print(f\"Goal suggestion error: {e}\")\n        suggestions = {\n            \"mindfulness\": \"Practice 5 minutes of deep breathing today\",\n            \"exercise\": \"Take a 15-minute walk outside\",\n            \"sleep\": \"Set a consistent bedtime for this week\",\n            \"social\": \"Reach out to a friend or family member\",\n            \"learning\": \"Read one article about mental wellness\"\n        }\n        category = missing_categories[0] if missing_categories else \"mindfulness\"\n        return {\n            \"success\": True,\n            \"goal\": suggestions.get(category, suggestions[\"mindfulness\"]),\n            \"category\": category,\n            \"why\": \"Taking small steps each day builds lasting habits.\"\n        }\n","path":null,"size_bytes":8719,"size_tokens":null},"mindspace-build/js/scroll-progress.js":{"content":"// ==================== SCROLL PROGRESS ====================\n\n(function() {\n  'use strict';\n  \n  function initScrollProgress() {\n    const scrollProgress = document.querySelector('.scroll-progress');\n    if (!scrollProgress) return;\n    \n    const progressBar = scrollProgress.querySelector('.scroll-progress__bar');\n    const dots = scrollProgress.querySelectorAll('.scroll-progress__dot');\n    \n    const sections = [];\n    dots.forEach(dot => {\n      const sectionId = dot.getAttribute('data-section');\n      const element = document.getElementById(sectionId);\n      if (element) {\n        sections.push({ id: sectionId, element: element });\n      }\n    });\n    \n    if (sections.length === 0) return;\n    \n    dots.forEach(dot => {\n      dot.addEventListener('click', function() {\n        const sectionId = this.getAttribute('data-section');\n        const section = document.getElementById(sectionId);\n        if (section) {\n          section.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n      });\n    });\n    \n    function updateScrollProgress() {\n      const scrollTop = window.scrollY;\n      const docHeight = document.documentElement.scrollHeight - window.innerHeight;\n      const scrollPercent = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;\n      \n      if (progressBar) {\n        progressBar.style.setProperty('--progress', scrollPercent + '%');\n      }\n      \n      if (scrollTop > 300) {\n        scrollProgress.classList.add('visible');\n      } else {\n        scrollProgress.classList.remove('visible');\n      }\n      \n      let currentSection = null;\n      const viewportMiddle = scrollTop + window.innerHeight / 2;\n      \n      for (let i = sections.length - 1; i >= 0; i--) {\n        const section = sections[i];\n        const sectionTop = section.element.getBoundingClientRect().top + window.scrollY;\n        \n        if (sectionTop <= viewportMiddle) {\n          currentSection = section.id;\n          break;\n        }\n      }\n      \n      if (!currentSection && sections.length > 0) {\n        currentSection = sections[0].id;\n      }\n      \n      dots.forEach(dot => {\n        const sectionId = dot.getAttribute('data-section');\n        if (sectionId === currentSection) {\n          dot.classList.add('active');\n        } else {\n          dot.classList.remove('active');\n        }\n      });\n    }\n    \n    window.addEventListener('scroll', updateScrollProgress, { passive: true });\n    updateScrollProgress();\n  }\n  \n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initScrollProgress);\n  } else {\n    initScrollProgress();\n  }\n})();\n","path":null,"size_bytes":2623,"size_tokens":null},"articles/article.css":{"content":"/* === READING PROGRESS === */\n.article-reading-progress {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 4px;\n  background: rgba(0, 0, 0, 0.1);\n  z-index: 9999;\n}\n\n.article-reading-progress__fill {\n  height: 100%;\n  width: 0%;\n  background: var(--user-accent, #9b7ed9);\n  transition: width 0.1s ease-out;\n}\n\n[data-theme=\"dark\"] .article-reading-progress {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n/* === HEADER === */\n.article-header {\n  background: var(--user-accent-light);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 16px 0;\n  position: sticky;\n  top: 4px;\n  z-index: 100;\n}\n\n[data-theme=\"dark\"] .article-header {\n  background: #252542;\n  border-bottom-color: rgba(255, 255, 255, 0.1);\n}\n\n/* === NAVIGATION === */\n.article-nav {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 12px;\n}\n\n.article-back-link {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  color: var(--user-accent, #9b7ed9);\n  text-decoration: none;\n  font-weight: 500;\n  padding: 8px 16px;\n  border-radius: 20px;\n  background: rgba(var(--user-accent-rgb, 155, 126, 217), 0.1);\n  transition: all 0.2s ease;\n}\n\n.article-back-link:hover {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .article-back-link {\n  color: var(--user-accent, #9b7ed9);\n  background: rgba(var(--user-accent-rgb, 155, 126, 217), 0.1);\n}\n\n[data-theme=\"dark\"] .article-back-link:hover {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n}\n\n.article-source-link {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  color: #666;\n  text-decoration: none;\n  font-size: 0.9rem;\n  transition: color 0.2s;\n}\n\n.article-source-link:hover {\n  color: var(--user-accent, #9b7ed9);\n}\n\n[data-theme=\"dark\"] .article-source-link {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .article-source-link:hover {\n  color: var(--user-accent, #9b7ed9);\n}\n\n/* === MAIN === */\n.article-main {\n  padding-bottom: 60px;\n  overflow-x: visible; \n}\n\n.article-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n  overflow-x: visible; \n}\n\n/* === LAYOUT === */\n.article-layout {\n  overflow: visible;\n}\n\n/* === HERO === */\n.article-hero {\n  position: relative;\n  width: 100%;\n  height: 400px;\n  border-radius: 16px;\n  overflow: hidden;\n  margin-bottom: 32px;\n}\n\n.article-hero__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.article-hero__overlay {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.5) 40%, rgba(0,0,0,0.2) 70%, transparent 100%);\n}\n\n.article-hero__content {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 32px;\n  color: #fff;\n}\n\n.article-meta {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 12px;\n  font-size: 0.9rem;\n  flex-wrap: wrap;\n}\n\n.article-category {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-weight: 600;\n  font-size: 0.8rem;\n  text-transform: uppercase;\n}\n\n.article-meta__dot {\n  opacity: 0.6;\n}\n\n.article-title {\n  font-size: 2.5rem;\n  font-weight: 700;\n  line-height: 1.2;\n  margin-bottom: 12px;\n  text-shadow: 0 2px 10px rgba(0,0,0,0.5);\n  color: #fff;\n}\n\n.article-subtitle {\n  font-size: 1.1rem;\n  line-height: 1.6;\n  max-width: 700px;\n  color: #fff;\n  text-shadow: 0 1px 6px rgba(0,0,0,0.4);\n}\n\n/* === TTS PLAYER === */\n.article-tts-player {\n  background: linear-gradient(135deg, #3d3a50 0%, #2d2b3d 100%);\n  border-radius: 16px;\n  padding: 24px;\n  margin-bottom: 32px;\n  color: #fff;\n  box-shadow: 0 8px 32px rgba(61, 58, 80, 0.3);\n}\n\n[data-theme=\"dark\"] .article-tts-player {\n  background: linear-gradient(135deg, #252542 0%, #1a1a2e 100%);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n}\n\n.tts-player__header {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n.tts-player__icon {\n  font-size: 1.5rem;\n}\n\n.tts-player__title {\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n\n.tts-player__controls {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.tts-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 48px;\n  height: 48px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.9);\n  color: #3d3a50;\n  font-size: 1.1rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n\n.tts-btn i,\n.tts-btn svg {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  fill: currentColor;\n}\n\n.tts-btn:hover {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n  transform: scale(1.08);\n}\n\n.tts-btn:focus-visible {\n  outline: 3px solid var(--user-accent, #9b7ed9);\n  outline-offset: 2px;\n}\n\n.tts-btn--play,\n.tts-btn--pause {\n  width: 64px;\n  height: 64px;\n  font-size: 1.5rem;\n  background: #fff;\n  color: #3d3a50;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n}\n\n.tts-btn--play:hover,\n.tts-btn--pause:hover {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .tts-btn {\n  background: rgba(255, 255, 255, 0.15);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .tts-btn:hover {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .tts-btn--play,\n[data-theme=\"dark\"] .tts-btn--pause {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n}\n\n.tts-btn--stop {\n  background: #ff7b7b;\n  color: #fff;\n}\n\n.tts-btn--stop:hover {\n  background: #ff5252;\n}\n\n[data-theme=\"dark\"] .tts-btn--stop {\n  background: #ff6b6b;\n  color: #fff;\n}\n\n.tts-btn--skip {\n  width: 44px;\n  height: 44px;\n  font-size: 1rem;\n}\n\n.tts-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n\n.tts-player__progress {\n  margin-bottom: 16px;\n}\n\n.tts-progress-bar {\n  width: 100%;\n  height: 6px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 3px;\n  overflow: hidden;\n  margin-bottom: 8px;\n}\n\n.tts-progress-bar__fill {\n  height: 100%;\n  width: 0%;\n  background: var(--user-accent, #9b7ed9);\n  border-radius: 3px;\n  transition: width 0.3s ease;\n}\n\n.tts-status {\n  font-size: 0.85rem;\n  opacity: 0.8;\n}\n\n.tts-player__speed {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 0.9rem;\n}\n\n.tts-speed-select {\n  padding: 6px 12px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  font-size: 0.9rem;\n  cursor: pointer;\n}\n\n.tts-speed-select option {\n  background: #3d3a50;\n  color: #fff;\n}\n\n.tts-hint {\n  margin-top: 12px;\n  font-size: 0.8rem;\n  opacity: 0.6;\n}\n\n.article-layout {\n  display: grid;\n  grid-template-columns: 280px 1fr;\n  gap: 40px;\n  padding: 32px 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n/* === TABLE OF CONTENTS === */\n.article-toc {\n  width: 100%;\n  position: sticky;\n  top: 100px;\n  max-height: calc(100vh - 120px);\n  overflow-y: auto;\n  align-self: start;\n}\n\n.article-layout.toc-hidden {\n  grid-template-columns: 1fr;\n  max-width: 800px;\n}\n\n.article-layout.toc-hidden .article-toc {\n  display: none;\n}\n\n/* === ARTICLE CONTENT === */\n.article-content {\n  max-width: 720px;\n  background: #fff;\n  padding: 32px;\n  border-radius: 12px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);\n  user-select: text;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n}\n\n[data-theme=\"dark\"] .article-content {\n  background: #1e1e32;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);\n}\n\n@media (max-width: 900px) {\n  .article-layout {\n    grid-template-columns: 1fr;\n    padding: 16px;\n  }\n  \n  \n  .article-toc {\n    display: none;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    top: auto;\n    max-height: 60vh;\n    border-radius: 20px 20px 0 0;\n    z-index: 1000;\n    transform: translateY(100%);\n    transition: transform 0.3s ease, opacity 0.3s ease;\n    opacity: 0;\n    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);\n  }\n  \n  .article-toc.mobile-visible {\n    display: block;\n    transform: translateY(0);\n    opacity: 1;\n  }\n  \n  .article-toc.collapsed {\n    width: auto;\n    padding: 16px;\n  }\n  \n  .article-toc.collapsed .article-toc__text {\n    display: inline;\n  }\n  \n  .article-toc.collapsed .article-toc__pill {\n    width: auto;\n    height: auto;\n    padding: 10px 14px;\n  }\n  \n  .article-toc.collapsed .article-toc__num {\n    margin-right: 10px;\n  }\n  \n  .article-toc__header {\n    padding-bottom: 12px;\n  }\n  \n  .article-toc__toggle {\n    display: none;\n  }\n}\n\n/* === MOBILE TOC === */\n.mobile-toc-toggle {\n  display: none;\n  position: fixed;\n  bottom: 24px;\n  right: 24px;\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n  border: none;\n  box-shadow: 0 4px 16px rgba(var(--user-accent-rgb, 155, 126, 217), 0.35);\n  cursor: pointer;\n  z-index: 999;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.mobile-toc-toggle:hover {\n  transform: scale(1.05);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb, 155, 126, 217), 0.4);\n}\n\n.mobile-toc-toggle:active {\n  transform: scale(0.95);\n}\n\n.mobile-toc-toggle svg {\n  width: 24px;\n  height: 24px;\n}\n\n.mobile-toc-toggle.active {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mobile-toc-toggle {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n  box-shadow: 0 4px 16px rgba(var(--user-accent-rgb, 155, 126, 217), 0.35);\n}\n\n[data-theme=\"dark\"] .mobile-toc-toggle:hover {\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb, 155, 126, 217), 0.4);\n}\n\n[data-theme=\"dark\"] .mobile-toc-toggle.active {\n  background: var(--user-accent-hover, #8a6dc8);\n  color: #fff;\n}\n\n/* === MOBILE TOC OVERLAY === */\n.mobile-toc-overlay {\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 998;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.mobile-toc-overlay.visible {\n  display: block;\n  opacity: 1;\n}\n\n[data-theme=\"dark\"] .mobile-toc-overlay {\n  background: rgba(0, 0, 0, 0.7);\n}\n\n.mobile-toc-close {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: #f0f0f0;\n  border: none;\n  cursor: pointer;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  color: #666;\n  transition: all 0.2s ease;\n}\n\n.mobile-toc-close:hover {\n  background: #e0e0e0;\n  color: #333;\n}\n\n[data-theme=\"dark\"] .mobile-toc-close {\n  background: #3d3a50;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .mobile-toc-close:hover {\n  background: #4d4a60;\n  color: #fff;\n}\n\n@media (max-width: 900px) {\n  .mobile-toc-toggle {\n    display: flex;\n  }\n  \n  .mobile-toc-close {\n    display: flex;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .article-toc,\n  .mobile-toc-toggle,\n  .mobile-toc-overlay {\n    transition: none;\n  }\n}\n\n.article-toc {\n  background: #ffffff;\n  border-radius: 16px;\n  padding: 16px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  display: flex;\n  flex-direction: column;\n  transition: all 0.3s ease;\n}\n\n.article-toc.collapsed {\n  display: none;\n}\n\n[data-theme=\"dark\"] .article-toc {\n  background: #2d2b3d;\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);\n}\n\n.article-toc__header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n  flex-shrink: 0;\n}\n\n[data-theme=\"dark\"] .article-toc__header {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.article-toc__progress {\n  flex: 1;\n  height: 4px;\n  background: #e8e8e8;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n[data-theme=\"dark\"] .article-toc__progress {\n  background: #3d3a50;\n}\n\n.article-toc__progress-bar {\n  height: 100%;\n  width: 0%;\n  background: var(--user-accent, #9b7ed9);\n  border-radius: 4px;\n  transition: width 0.2s ease;\n}\n\n[data-theme=\"dark\"] .article-toc__progress-bar {\n  background: var(--user-accent, #9b7ed9);\n}\n\n.article-toc__toggle {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  border: none;\n  background: #f0f0f0;\n  border-radius: 8px;\n  cursor: pointer;\n  color: #666;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n}\n\n.article-toc__toggle:hover {\n  background: #e0e0e0;\n  color: #333;\n}\n\n.article-toc__toggle svg {\n  transition: transform 0.3s ease;\n}\n\n[data-theme=\"dark\"] .article-toc__toggle {\n  background: #3d3a50;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .article-toc__toggle:hover {\n  background: #4d4a60;\n  color: #fff;\n}\n\n.article-toc-show-btn {\n  position: fixed;\n  bottom: 30px;\n  left: 30px;\n  height: 48px;\n  padding: 0 20px;\n  border-radius: 24px;\n  background: var(--user-accent, #9b7ed9);\n  color: white;\n  border: 2px solid white;\n  cursor: pointer;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  box-shadow: 0 4px 20px rgba(var(--user-accent-rgb, 155, 126, 217), 0.3);\n  z-index: 1000;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.article-toc-show-btn:hover {\n  transform: scale(1.05);\n  background: var(--user-accent-hover, #8a6dc8);\n  box-shadow: 0 6px 24px rgba(var(--user-accent-rgb, 155, 126, 217), 0.4);\n}\n\n.article-toc-show-btn.visible {\n  display: flex;\n}\n\n[data-theme=\"dark\"] .article-toc-show-btn {\n  background: var(--user-accent, #9b7ed9);\n  border-color: #2d2b3d;\n  color: #fff;\n  box-shadow: 0 4px 20px rgba(var(--user-accent-rgb, 155, 126, 217), 0.4);\n}\n\n[data-theme=\"dark\"] .article-toc-show-btn:hover {\n  background: var(--user-accent-hover, #8a6dc8);\n  box-shadow: 0 6px 24px rgba(var(--user-accent-rgb, 155, 126, 217), 0.5);\n}\n\n[data-theme=\"dark\"] .article-toc-show-btn {\n  box-shadow: 0 4px 20px rgba(var(--user-accent-rgb, 155, 126, 217), 0.4);\n}\n\n.article-toc__list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.article-toc__list li {\n  margin: 0;\n}\n\n.article-toc__pill {\n  display: flex;\n  align-items: center;\n  padding: 10px 14px;\n  color: #555;\n  text-decoration: none;\n  font-size: 0.85rem;\n  font-weight: 500;\n  border-radius: 50px;\n  background: #f5f5f5;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n\n.article-toc__pill:hover {\n  background: rgba(var(--user-accent-rgb, 155, 126, 217), 0.1);\n  color: var(--user-accent, #9b7ed9);\n  transform: translateX(4px);\n}\n\n.article-toc__pill.active {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n  border-color: var(--user-accent, #9b7ed9);\n  box-shadow: 0 2px 8px rgba(var(--user-accent-rgb, 155, 126, 217), 0.25);\n}\n\n.article-toc__pill.active:hover {\n  transform: translateX(4px);\n  background: var(--user-accent-hover, #8a6dc8);\n}\n\n.article-toc__num {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 22px;\n  height: 22px;\n  background: rgba(0, 0, 0, 0.08);\n  border-radius: 50%;\n  font-size: 0.75rem;\n  font-weight: 600;\n  margin-right: 10px;\n  flex-shrink: 0;\n  transition: all 0.2s ease;\n}\n\n.article-toc__pill:hover .article-toc__num {\n  background: rgba(var(--user-accent-rgb, 155, 126, 217), 0.15);\n  color: var(--user-accent, #9b7ed9);\n}\n\n.article-toc__pill.active .article-toc__num {\n  background: rgba(255, 255, 255, 0.2);\n  color: #fff;\n}\n\n.article-toc__text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  transition: opacity 0.2s ease;\n}\n\n[data-theme=\"dark\"] .article-toc__pill {\n  background: #3d3a50;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .article-toc__pill:hover {\n  background: #4d4a60;\n  color: var(--user-accent, #9b7ed9);\n}\n\n[data-theme=\"dark\"] .article-toc__pill.active {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n  border-color: var(--user-accent, #9b7ed9);\n  box-shadow: 0 2px 8px rgba(var(--user-accent-rgb, 155, 126, 217), 0.25);\n}\n\n[data-theme=\"dark\"] .article-toc__pill.active:hover {\n  background: var(--user-accent-hover, #8a6dc8);\n}\n\n[data-theme=\"dark\"] .article-toc__num {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .article-toc__pill:hover .article-toc__num {\n  background: rgba(var(--user-accent-rgb, 155, 126, 217), 0.2);\n  color: var(--user-accent, #9b7ed9);\n}\n\n[data-theme=\"dark\"] .article-toc__pill.active .article-toc__num {\n  background: rgba(255, 255, 255, 0.2);\n  color: #fff;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .article-toc,\n  .article-toc__pill,\n  .article-toc__toggle svg,\n  .article-toc__progress-bar,\n  .article-toc__num,\n  .article-toc__nav {\n    transition: none;\n  }\n  \n  .article-toc__pill:hover,\n  .article-toc__pill.active:hover {\n    transform: none;\n  }\n}\n\n.article-toc__enhanced {\n  margin-bottom: 12px;\n}\n\n.article-toc__time {\n  font-size: 0.65rem;\n  color: #888;\n  background: rgba(0, 0, 0, 0.05);\n  padding: 2px 6px;\n  border-radius: 10px;\n  margin-left: auto;\n  flex-shrink: 0;\n  font-weight: 500;\n}\n\n[data-theme=\"dark\"] .article-toc__time {\n  background: rgba(255, 255, 255, 0.08);\n  color: #aaa;\n}\n\n.article-toc__pill.active .article-toc__time {\n  background: rgba(255, 255, 255, 0.2);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n[data-theme=\"dark\"] .article-toc__pill.active .article-toc__time {\n  background: rgba(0, 0, 0, 0.15);\n  color: rgba(0, 0, 0, 0.7);\n}\n\n.article-toc__check {\n  display: none;\n  width: 16px;\n  height: 16px;\n  margin-left: 8px;\n  color: #22c55e;\n  flex-shrink: 0;\n  opacity: 0;\n  transform: scale(0.5);\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.article-toc__pill.completed .article-toc__check {\n  display: flex;\n  opacity: 1;\n  transform: scale(1);\n}\n\n.article-toc__pill.completed {\n  opacity: 0.7;\n}\n\n.article-toc__pill.completed:hover {\n  opacity: 1;\n}\n\n.article-toc__position-indicator {\n  position: absolute;\n  left: 0;\n  width: 3px;\n  background: var(--user-accent, #9b7ed9);\n  border-radius: 3px;\n  transition: top 0.15s ease, height 0.15s ease;\n  z-index: 1;\n}\n\n[data-theme=\"dark\"] .article-toc__position-indicator {\n  background: var(--user-accent, #9b7ed9);\n}\n\n.article-toc__nav {\n  position: relative;\n  flex: 1;\n  min-height: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\n}\n\n.article-toc__nav::-webkit-scrollbar {\n  width: 6px;\n}\n\n.article-toc__nav::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.article-toc__nav::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n}\n\n.article-toc__nav::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .article-toc__nav {\n  scrollbar-color: rgba(255, 255, 255, 0.2) transparent;\n}\n\n[data-theme=\"dark\"] .article-toc__nav::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n[data-theme=\"dark\"] .article-toc__nav::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.article-toc__jump-btns {\n  display: flex;\n  gap: 8px;\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(0, 0, 0, 0.06);\n}\n\n[data-theme=\"dark\"] .article-toc__jump-btns {\n  border-top-color: rgba(255, 255, 255, 0.08);\n}\n\n.article-toc__jump-btn {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  padding: 8px 12px;\n  background: #f0f0f0;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: #555;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.article-toc__jump-btn:hover {\n  background: #e0e0e0;\n  color: #333;\n}\n\n.article-toc__jump-btn svg {\n  width: 14px;\n  height: 14px;\n}\n\n[data-theme=\"dark\"] .article-toc__jump-btn {\n  background: #3d3a50;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .article-toc__jump-btn:hover {\n  background: #4d4a60;\n  color: #fff;\n}\n\n.article-toc__preview {\n  position: absolute;\n  left: calc(100% + 12px);\n  top: 50%;\n  transform: translateY(-50%);\n  width: 280px;\n  padding: 12px 16px;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  font-size: 0.85rem;\n  line-height: 1.5;\n  color: #555;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.2s ease, visibility 0.2s ease;\n  z-index: 100;\n  pointer-events: none;\n}\n\n.article-toc__preview::before {\n  content: '';\n  position: absolute;\n  left: -8px;\n  top: 50%;\n  transform: translateY(-50%);\n  border: 8px solid transparent;\n  border-right-color: #fff;\n  border-left: none;\n}\n\n.article-toc__pill:hover .article-toc__preview {\n  opacity: 1;\n  visibility: visible;\n}\n\n[data-theme=\"dark\"] .article-toc__preview {\n  background: #3d3a50;\n  color: #ccc;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .article-toc__preview::before {\n  border-right-color: #3d3a50;\n}\n\n.article-toc__bookmark {\n  width: 18px;\n  height: 18px;\n  margin-left: 6px;\n  padding: 0;\n  background: none;\n  border: none;\n  color: #aaa;\n  cursor: pointer;\n  opacity: 0;\n  transition: opacity 0.2s ease, color 0.2s ease;\n  flex-shrink: 0;\n}\n\n.article-toc__pill:hover .article-toc__bookmark {\n  opacity: 1;\n}\n\n.article-toc__bookmark:hover {\n  color: #f59e0b;\n}\n\n.article-toc__bookmark.bookmarked {\n  opacity: 1;\n  color: #f59e0b;\n}\n\n.article-toc__bookmark svg {\n  width: 14px;\n  height: 14px;\n}\n\n.article-toc__resume {\n  display: none;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 14px;\n  margin-bottom: 12px;\n  background: linear-gradient(135deg, #fef3c7, #fde68a);\n  border-radius: 10px;\n  font-size: 0.8rem;\n  color: #92400e;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid rgba(146, 64, 14, 0.1);\n}\n\n.article-toc__resume:hover {\n  background: linear-gradient(135deg, #fde68a, #fcd34d);\n  transform: translateX(4px);\n}\n\n.article-toc__resume.visible {\n  display: flex;\n}\n\n.article-toc__resume svg {\n  width: 16px;\n  height: 16px;\n  flex-shrink: 0;\n}\n\n.article-toc__resume-text {\n  flex: 1;\n}\n\n.article-toc__resume-section {\n  font-weight: 600;\n}\n\n.article-toc__resume-dismiss {\n  padding: 4px;\n  background: none;\n  border: none;\n  color: #92400e;\n  cursor: pointer;\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n\n.article-toc__resume-dismiss:hover {\n  opacity: 1;\n}\n\n[data-theme=\"dark\"] .article-toc__resume {\n  background: linear-gradient(135deg, #3d3a50, #4d4a60);\n  color: var(--user-accent-light);\n  border-color: rgba(214, 189, 159, 0.2);\n}\n\n[data-theme=\"dark\"] .article-toc__resume:hover {\n  background: linear-gradient(135deg, #4d4a60, #5d5a70);\n}\n\n[data-theme=\"dark\"] .article-toc__resume-dismiss {\n  color: var(--user-accent-light);\n}\n\n.article-toc__minimap {\n  display: flex;\n  flex-direction: row;\n  gap: 3px;\n  padding: 8px 0;\n  margin-bottom: 8px;\n}\n\n[data-theme=\"dark\"] .article-toc__minimap {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.article-toc__minimap-section {\n  height: 6px;\n  min-width: 8px;\n  background: #e8e8e8;\n  border-radius: 3px;\n  position: relative;\n  transition: background 0.2s ease;\n  cursor: pointer;\n  flex: 1;\n}\n\n.article-toc__minimap-section:hover {\n  background: #d0d0d0;\n}\n\n.article-toc__minimap-section.active {\n  background: #4a6fa5;\n}\n\n.article-toc__minimap-section.completed {\n  background: #22c55e;\n}\n\n.article-toc__minimap-section.completed.active {\n  background: #16a34a;\n}\n\n[data-theme=\"dark\"] .article-toc__minimap-section {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .article-toc__minimap-section:hover {\n  background: #4d4a60;\n}\n\n[data-theme=\"dark\"] .article-toc__minimap-section.active {\n  background: var(--user-accent-light);\n}\n\n.article-toc__minimap-marker {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(74, 111, 165, 0.3);\n  border-radius: 2px;\n  transition: width 0.1s ease;\n}\n\n[data-theme=\"dark\"] .article-toc__minimap-marker {\n  background: rgba(214, 189, 159, 0.3);\n}\n\n.article-toc__pill:focus {\n  outline: 2px solid var(--user-accent, #9b7ed9);\n  outline-offset: 2px;\n}\n\n.article-toc__pill:focus:not(:focus-visible) {\n  outline: none;\n}\n\n[data-theme=\"dark\"] .article-toc__pill:focus {\n  outline-color: var(--user-accent, #9b7ed9);\n}\n\n.article-toc.collapsed .article-toc__time,\n.article-toc.collapsed .article-toc__check,\n.article-toc.collapsed .article-toc__bookmark,\n.article-toc.collapsed .article-toc__preview,\n.article-toc.collapsed .article-toc__jump-btns,\n.article-toc.collapsed .article-toc__minimap,\n.article-toc.collapsed .article-toc__resume,\n.article-toc.collapsed .article-toc__position-indicator {\n  display: none;\n}\n\n.article-toc__swipe-indicator {\n  display: none;\n  width: 40px;\n  height: 4px;\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 2px;\n  margin: 0 auto 12px;\n}\n\n[data-theme=\"dark\"] .article-toc__swipe-indicator {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n@media (max-width: 900px) {\n  .article-toc__swipe-indicator {\n    display: block;\n  }\n  \n  .article-toc__preview {\n    display: none !important;\n  }\n  \n  .article-toc__bookmark {\n    opacity: 1;\n  }\n  \n  .article-toc__position-indicator {\n    display: none;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .article-toc__check,\n  .article-toc__preview,\n  .article-toc__resume,\n  .article-toc__minimap-section,\n  .article-toc__position-indicator,\n  .article-toc__bookmark {\n    transition: none;\n  }\n}\n\n.article-content section {\n  margin-bottom: 48px;\n}\n\n.article-content h2 {\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin-bottom: 24px;\n  padding-top: 24px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  line-height: 1.3;\n}\n\n.article-content section:first-child h2 {\n  border-top: none;\n  padding-top: 0;\n}\n\n[data-theme=\"dark\"] .article-content h2 {\n  color: #fff;\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n.article-content h3 {\n  font-size: 1.3rem;\n  font-weight: 600;\n  color: #333;\n  margin: 28px 0 16px;\n  line-height: 1.4;\n}\n\n[data-theme=\"dark\"] .article-content h3 {\n  color: #e0e0e0;\n}\n\n.article-content p {\n  font-size: 1.1rem;\n  line-height: 1.9;\n  color: #333;\n  margin-bottom: 24px;\n  letter-spacing: 0.01em;\n}\n\n[data-theme=\"dark\"] .article-content p {\n  color: #d0d0d0;\n}\n\n.article-content ul {\n  margin: 16px 0;\n  padding-left: 24px;\n}\n\n.article-content li {\n  font-size: 1.05rem;\n  line-height: 1.85;\n  color: #333;\n  margin-bottom: 14px;\n  padding-left: 8px;\n}\n\n[data-theme=\"dark\"] .article-content li {\n  color: #d0d0d0;\n}\n\n.article-content strong {\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .article-content strong {\n  color: #fff;\n}\n\n.article-content h2,\n.article-content h3,\n.article-content p,\n.article-content li {\n  transition: background-color 0.4s ease, box-shadow 0.4s ease, transform 0.3s ease;\n}\n\n.tts-reading {\n  background: rgba(74, 111, 165, 0.12);\n  border-radius: 12px;\n  box-shadow: inset 0 0 0 2px rgba(74, 111, 165, 0.25);\n  animation: tts-glow 1.5s ease-in-out infinite;\n}\n\n@keyframes tts-glow {\n  0%, 100% { box-shadow: inset 0 0 0 2px rgba(74, 111, 165, 0.25); }\n  50% { box-shadow: inset 0 0 0 2px rgba(74, 111, 165, 0.45); }\n}\n\n[data-theme=\"dark\"] .tts-reading {\n  background: rgba(214, 189, 159, 0.15);\n  box-shadow: inset 0 0 0 2px rgba(214, 189, 159, 0.25);\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .tts-reading {\n    animation: none;\n  }\n}\n\n.tts-word {\n  display: inline;\n  transition: background-color 0.15s ease, color 0.15s ease;\n  border-radius: 4px;\n}\n\n.tts-word.tts-current-word {\n  background: linear-gradient(135deg, #4a6fa5, #5a7fb5);\n  color: #fff;\n  padding: 1px 4px;\n  margin: 0 -2px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(74, 111, 165, 0.4);\n}\n\n[data-theme=\"dark\"] .tts-word.tts-current-word {\n  background: linear-gradient(135deg, var(--user-accent-light), var(--user-accent));\n  color: #1a1a2e;\n}\n\n.tts-engine-toggle {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  color: #1a1a2e;\n  border: none;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-left: auto;\n}\n\n.tts-engine-toggle:hover {\n  transform: scale(1.05);\n  box-shadow: 0 2px 8px rgba(214, 189, 159, 0.4);\n}\n\n.tts-player__voice {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.tts-player__voice label {\n  font-size: 0.9rem;\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.tts-voice-select {\n  padding: 6px 10px;\n  border-radius: 6px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  font-size: 0.85rem;\n  cursor: pointer;\n  min-width: 120px;\n}\n\n.tts-voice-select option {\n  background: #1a1a2e;\n  color: #fff;\n}\n\n.tts-player__row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 16px;\n  margin-bottom: 16px;\n  flex-wrap: wrap;\n}\n\n.tts-player__volume {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  flex: 1;\n  min-width: 180px;\n}\n\n.tts-volume-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.15);\n  color: #fff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.tts-volume-btn:hover {\n  background: rgba(255, 255, 255, 0.25);\n}\n\n.tts-volume-btn svg {\n  width: 20px;\n  height: 20px;\n  fill: currentColor;\n}\n\n.tts-volume-slider {\n  -webkit-appearance: none;\n  appearance: none;\n  flex: 1;\n  height: 6px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 3px;\n  outline: none;\n  cursor: pointer;\n}\n\n.tts-volume-slider::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: var(--user-accent-light);\n  cursor: pointer;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\n  transition: transform 0.15s ease;\n}\n\n.tts-volume-slider::-webkit-slider-thumb:hover {\n  transform: scale(1.2);\n}\n\n.tts-volume-slider::-moz-range-thumb {\n  width: 16px;\n  height: 16px;\n  border: none;\n  border-radius: 50%;\n  background: var(--user-accent-light);\n  cursor: pointer;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\n}\n\n.tts-volume-value {\n  font-size: 0.8rem;\n  opacity: 0.8;\n  min-width: 36px;\n  text-align: right;\n}\n\n.tts-player__options {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.tts-option-btn {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 20px;\n  background: transparent;\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.tts-option-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n}\n\n.tts-option-btn.active {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n  border-color: var(--user-accent-light);\n}\n\n.tts-option-btn svg,\n.sleep-timer-btn svg,\n.tts-download-btn svg {\n  width: 14px;\n  height: 14px;\n  fill: currentColor;\n}\n\n.tts-time-remaining {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.85rem;\n  opacity: 0.8;\n}\n\n.tts-time-remaining svg {\n  width: 16px;\n  height: 16px;\n  fill: currentColor;\n  opacity: 0.7;\n}\n\n@media (max-width: 600px) {\n  .tts-player__row {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .tts-player__volume {\n    width: 100%;\n  }\n  \n  .tts-player__options {\n    justify-content: center;\n  }\n}\n\n.article-footer {\n  margin-top: 48px;\n  padding-top: 32px;\n  border-top: 2px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .article-footer {\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n.article-source-box {\n  background: #f8f9fa;\n  border-radius: 12px;\n  padding: 24px;\n  margin-bottom: 24px;\n}\n\n[data-theme=\"dark\"] .article-source-box {\n  background: #252542;\n}\n\n.article-source-box h3 {\n  font-size: 1rem;\n  font-weight: 700;\n  margin-bottom: 16px;\n  color: #333;\n}\n\n[data-theme=\"dark\"] .article-source-box h3 {\n  color: #fff;\n}\n\n.article-source-box ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.article-source-box li {\n  margin-bottom: 8px;\n}\n\n.article-source-box a {\n  color: var(--user-accent, #9b7ed9);\n  text-decoration: none;\n  font-size: 0.95rem;\n}\n\n.article-source-box a:hover {\n  text-decoration: underline;\n}\n\n[data-theme=\"dark\"] .article-source-box a {\n  color: var(--user-accent, #9b7ed9);\n}\n\n.article-share {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.article-share span {\n  font-size: 0.95rem;\n  color: #666;\n}\n\n[data-theme=\"dark\"] .article-share span {\n  color: #aaa;\n}\n\n.article-share__buttons {\n  display: flex;\n  gap: 8px;\n}\n\n.share-btn {\n  width: 40px;\n  height: 40px;\n  border: 1px solid #ddd;\n  border-radius: 50%;\n  background: #fff;\n  color: #666;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n}\n\n.share-btn:hover {\n  background: #4a6fa5;\n  border-color: #4a6fa5;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .share-btn {\n  background: #252542;\n  border-color: #444;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .share-btn:hover {\n  background: var(--user-accent-light);\n  border-color: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n.share-btn svg {\n  width: 18px;\n  height: 18px;\n  fill: currentColor;\n}\n\n.article-related {\n  margin-top: 48px;\n  padding-top: 32px;\n  border-top: 2px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .article-related {\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n.article-related__title {\n  font-size: 1.3rem;\n  font-weight: 700;\n  margin-bottom: 20px;\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .article-related__title {\n  color: #fff;\n}\n\n.article-related__grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 20px;\n}\n\n.related-card {\n  background: #f8f9fa;\n  border-radius: 12px;\n  text-decoration: none;\n  transition: all 0.2s ease;\n  display: block;\n  overflow: hidden;\n}\n\n.related-card:hover {\n  background: #e9ecef;\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);\n}\n\n[data-theme=\"dark\"] .related-card {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .related-card:hover {\n  background: #303055;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\n}\n\n.related-card__img {\n  width: 100%;\n  height: 140px;\n  object-fit: cover;\n  display: block;\n}\n\n.related-card__content {\n  padding: 16px;\n}\n\n.related-card__category {\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  color: var(--user-accent, #9b7ed9);\n  margin-bottom: 8px;\n}\n\n[data-theme=\"dark\"] .related-card__category {\n  color: var(--user-accent, #9b7ed9);\n}\n\n.related-card__title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 6px;\n  line-height: 1.4;\n}\n\n[data-theme=\"dark\"] .related-card__title {\n  color: #fff;\n}\n\n.related-card__meta {\n  font-size: 0.8rem;\n  color: #666;\n}\n\n[data-theme=\"dark\"] .related-card__meta {\n  color: #aaa;\n}\n\n.article-page-footer {\n  background: #f8f9fa;\n  padding: 32px 20px;\n  text-align: center;\n}\n\n[data-theme=\"dark\"] .article-page-footer {\n  background: #252542;\n}\n\n.footer-back-link {\n  display: inline-block;\n  color: #4a6fa5;\n  text-decoration: none;\n  font-weight: 600;\n  margin-bottom: 16px;\n}\n\n[data-theme=\"dark\"] .footer-back-link {\n  color: var(--user-accent-light);\n}\n\n.footer-disclaimer {\n  font-size: 0.85rem;\n  color: #888;\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n[data-high-contrast=\"true\"] .article-tts-player {\n  border: 3px solid #000;\n}\n\n[data-high-contrast=\"true\"] .tts-btn {\n  border: 2px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .article-content h2,\n[data-high-contrast=\"true\"] .article-content h3 {\n  color: #000;\n}\n\n[data-high-contrast=\"true\"] .article-content p,\n[data-high-contrast=\"true\"] .article-content li {\n  color: #000;\n}\n\n[data-high-contrast=\"true\"] .tts-reading {\n  background: #ffeb3b;\n}\n\n[data-high-contrast=\"true\"] .article-toc {\n  border: 2px solid #000;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .article-reading-progress__fill,\n  .tts-progress-bar__fill,\n  .tts-reading {\n    transition: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .article-hero {\n    height: 300px;\n    border-radius: 0;\n    margin: 0 -20px 24px;\n    width: calc(100% + 40px);\n  }\n  \n  .article-hero__content {\n    padding: 20px;\n  }\n  \n  .article-title {\n    font-size: 1.6rem;\n  }\n  \n  .article-subtitle {\n    font-size: 0.95rem;\n  }\n  \n  .article-tts-player {\n    padding: 16px;\n    border-radius: 12px;\n  }\n  \n  .tts-btn--play,\n  .tts-btn--pause {\n    width: 56px;\n    height: 56px;\n  }\n  \n  .tts-hint {\n    display: none;\n  }\n  \n  .article-content h2 {\n    font-size: 1.5rem;\n  }\n  \n  .article-content p {\n    font-size: 1rem;\n  }\n}\n\n.reading-controls {\n  position: fixed;\n  right: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 90;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  background: #fff;\n  padding: 12px;\n  border-radius: 16px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  transition: all 0.3s ease;\n}\n\n[data-theme=\"dark\"] .reading-controls {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.1);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);\n}\n\n.reading-controls__toggle {\n  position: absolute;\n  left: -40px;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  transition: all 0.2s ease;\n}\n\n.reading-controls__toggle:hover {\n  transform: translateY(-50%) scale(1.1);\n}\n\n.reading-controls.collapsed {\n  transform: translateY(-50%) translateX(calc(100% + 30px));\n}\n\n.reading-controls.collapsed .reading-controls__toggle {\n  left: -50px;\n}\n\n.reading-control-btn {\n  width: 44px;\n  height: 44px;\n  border-radius: 12px;\n  background: var(--bg-surface, #f5f5f5);\n  color: var(--text-primary, #1a1a2e);\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  position: relative;\n}\n\n.reading-control-btn:hover {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n}\n\n.reading-control-btn.active {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n}\n\n.reading-control-btn svg {\n  width: 20px;\n  height: 20px;\n  fill: currentColor;\n}\n\n.reading-control-btn__tooltip {\n  position: absolute;\n  right: calc(100% + 10px);\n  top: 50%;\n  transform: translateY(-50%);\n  background: #1a1a2e;\n  color: #fff;\n  padding: 6px 12px;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  white-space: nowrap;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.2s ease;\n  pointer-events: none;\n}\n\n.reading-control-btn:hover .reading-control-btn__tooltip {\n  opacity: 1;\n  visibility: visible;\n}\n\n[data-theme=\"dark\"] .reading-control-btn {\n  background: #3d3a50;\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .reading-control-btn:hover,\n[data-theme=\"dark\"] .reading-control-btn.active {\n  background: var(--user-accent, #9b7ed9);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .reading-control-btn__tooltip {\n  background: #fff;\n  color: #1a1a2e;\n}\n\n.reading-controls__font-size {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n  padding: 8px 0;\n  border-bottom: 1px solid var(--border-color, rgba(0, 0, 0, 0.08));\n}\n\n.reading-controls__font-label {\n  font-size: 0.65rem;\n  text-transform: uppercase;\n  color: var(--text-muted, #6c757d);\n  letter-spacing: 0.5px;\n}\n\n.reading-controls__font-btns {\n  display: flex;\n  gap: 4px;\n}\n\n.reading-controls__font-btns button {\n  width: 32px;\n  height: 32px;\n  border-radius: 8px;\n  background: var(--bg-surface, #f5f5f5);\n  color: var(--text-primary, #1a1a2e);\n  border: none;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 1rem;\n  transition: all 0.2s ease;\n}\n\n.reading-controls__font-btns button:hover {\n  background: var(--accent-color, #4a6fa5);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .reading-controls__font-btns button {\n  background: #3d3a50;\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .reading-controls__font-btns button:hover {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n.reading-controls__time {\n  text-align: center;\n  padding: 8px 0;\n  border-top: 1px solid var(--border-color, rgba(0, 0, 0, 0.08));\n}\n\n.reading-controls__time-value {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--text-primary, #1a1a2e);\n}\n\n.reading-controls__time-label {\n  font-size: 0.65rem;\n  color: var(--text-muted, #6c757d);\n}\n\n[data-theme=\"dark\"] .reading-controls__time-value {\n  color: #e0e0e0;\n}\n\nbody.article-reading-mode .header,\nbody.article-reading-mode .article-toc,\nbody.article-reading-mode .article-share,\nbody.article-reading-mode .article-related,\nbody.article-reading-mode .mb-footer {\n  display: none !important;\n}\n\nbody.article-reading-mode .article-layout {\n  display: block;\n}\n\nbody.article-reading-mode .article-content {\n  max-width: 700px;\n  margin: 0 auto;\n}\n\nbody.article-reading-mode .article-main {\n  padding-top: 40px;\n}\n\nbody[data-article-font=\"small\"] .article-content {\n  font-size: 0.9rem;\n}\nbody[data-article-font=\"small\"] .article-content h2 {\n  font-size: 1.5rem;\n}\nbody[data-article-font=\"small\"] .article-content h3 {\n  font-size: 1.1rem;\n}\nbody[data-article-font=\"small\"] .article-content p,\nbody[data-article-font=\"small\"] .article-content li {\n  font-size: 0.95rem;\n}\n\nbody[data-article-font=\"normal\"] .article-content {\n  font-size: 1rem;\n}\nbody[data-article-font=\"normal\"] .article-content h2 {\n  font-size: 1.8rem;\n}\nbody[data-article-font=\"normal\"] .article-content h3 {\n  font-size: 1.3rem;\n}\nbody[data-article-font=\"normal\"] .article-content p,\nbody[data-article-font=\"normal\"] .article-content li {\n  font-size: 1.1rem;\n}\n\nbody[data-article-font=\"large\"] .article-content {\n  font-size: 1.15rem;\n}\nbody[data-article-font=\"large\"] .article-content h2 {\n  font-size: 2rem;\n}\nbody[data-article-font=\"large\"] .article-content h3 {\n  font-size: 1.5rem;\n}\nbody[data-article-font=\"large\"] .article-content p,\nbody[data-article-font=\"large\"] .article-content li {\n  font-size: 1.25rem;\n}\n\nbody[data-article-font=\"x-large\"] .article-content {\n  font-size: 1.3rem;\n}\nbody[data-article-font=\"x-large\"] .article-content h2 {\n  font-size: 2.3rem;\n}\nbody[data-article-font=\"x-large\"] .article-content h3 {\n  font-size: 1.7rem;\n}\nbody[data-article-font=\"x-large\"] .article-content p,\nbody[data-article-font=\"x-large\"] .article-content li {\n  font-size: 1.4rem;\n}\n\nbody[data-article-spacing=\"compact\"] .article-content p,\nbody[data-article-spacing=\"compact\"] .article-content li {\n  line-height: 1.5;\n}\n\nbody[data-article-spacing=\"normal\"] .article-content p,\nbody[data-article-spacing=\"normal\"] .article-content li {\n  line-height: 1.75;\n}\n\nbody[data-article-spacing=\"relaxed\"] .article-content p,\nbody[data-article-spacing=\"relaxed\"] .article-content li {\n  line-height: 2;\n}\n\n@media (max-width: 768px) {\n  .reading-controls {\n    right: 10px;\n    padding: 8px;\n    gap: 6px;\n  }\n  \n  .reading-control-btn {\n    width: 38px;\n    height: 38px;\n  }\n  \n  .reading-controls__font-btns button {\n    width: 28px;\n    height: 28px;\n    font-size: 0.85rem;\n  }\n  \n  .reading-control-btn__tooltip {\n    display: none;\n  }\n}\n\n.article-content ::selection {\n  background: rgba(255, 235, 59, 0.4);\n  color: inherit;\n}\n\n.article-content ::-moz-selection {\n  background: rgba(255, 235, 59, 0.4);\n  color: inherit;\n}\n\n[data-theme=\"dark\"] .article-content ::selection {\n  background: rgba(126, 87, 194, 0.5);\n  color: inherit;\n}\n\n[data-theme=\"dark\"] .article-content ::-moz-selection {\n  background: rgba(126, 87, 194, 0.5);\n  color: inherit;\n}\n\n.user-highlight {\n  background: linear-gradient(120deg, #fff176 0%, #ffeb3b 100%);\n  border-radius: 3px;\n  cursor: pointer;\n  \n  box-decoration-break: clone;\n  -webkit-box-decoration-break: clone;\n}\n\n.user-highlight:hover {\n  background: linear-gradient(120deg, #ffca28 0%, #ffc107 100%);\n  \n}\n\n[data-theme=\"dark\"] .user-highlight {\n  background: linear-gradient(120deg, #5c6bc0 0%, #7e57c2 100%);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .user-highlight:hover {\n  background: linear-gradient(120deg, #7e57c2 0%, #9575cd 100%);\n}\n\n.bookmark-prompt {\n  position: fixed;\n  bottom: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: var(--bg-card, #fff);\n  padding: 16px 24px;\n  border-radius: 12px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  z-index: 1001;\n  animation: slideUp 0.3s ease;\n  border: 1px solid var(--border-color, rgba(0, 0, 0, 0.08));\n}\n\n@keyframes slideUp {\n  from {\n    transform: translateX(-50%) translateY(100px);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(-50%) translateY(0);\n    opacity: 1;\n  }\n}\n\n.bookmark-prompt span {\n  color: var(--text-primary, #1a1a2e);\n  font-weight: 500;\n}\n\n.bookmark-prompt button {\n  padding: 8px 16px;\n  border-radius: 8px;\n  border: none;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.bookmark-prompt__yes {\n  background: var(--accent-color, #4a6fa5);\n  color: #fff;\n}\n\n.bookmark-prompt__yes:hover {\n  filter: brightness(1.1);\n}\n\n.bookmark-prompt__no {\n  background: var(--bg-surface, #f5f5f5);\n  color: var(--text-primary, #1a1a2e);\n}\n\n.bookmark-prompt__no:hover {\n  background: var(--bg-tertiary, #e9ecef);\n}\n\n[data-theme=\"dark\"] .bookmark-prompt {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .bookmark-prompt span {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .bookmark-prompt__yes {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .bookmark-prompt__no {\n  background: #3d3a50;\n  color: #e0e0e0;\n}\n\n.tts-mini-player {\n  position: fixed;\n  bottom: 24px;\n  right: 24px;\n  background: linear-gradient(135deg, #3d3a50 0%, #2d2b3d 100%);\n  border-radius: 50px;\n  padding: 12px 20px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  z-index: 1000;\n  transform: translateY(100px);\n  opacity: 0;\n  transition: all 0.3s ease;\n  color: #fff;\n}\n\n.tts-mini-player.visible {\n  transform: translateY(0);\n  opacity: 1;\n}\n\n.tts-mini-player__btn {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  border: none;\n  background: rgba(255, 255, 255, 0.9);\n  color: #3d3a50;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1rem;\n  transition: all 0.2s ease;\n}\n\n.tts-mini-player__btn:hover {\n  background: var(--user-accent-light);\n  transform: scale(1.1);\n}\n\n.tts-mini-player__btn--play {\n  width: 48px;\n  height: 48px;\n  font-size: 1.2rem;\n}\n\n.tts-mini-player__info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  max-width: 200px;\n}\n\n.tts-mini-player__title {\n  font-size: 0.75rem;\n  opacity: 0.7;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.tts-mini-player__status {\n  font-size: 0.85rem;\n  font-weight: 500;\n}\n\n.tts-mini-player__progress {\n  width: 80px;\n  height: 4px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.tts-mini-player__progress-fill {\n  height: 100%;\n  background: var(--user-accent-light);\n  transition: width 0.3s ease;\n}\n\n.tts-mini-player__close {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  border: none;\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  cursor: pointer;\n  font-size: 0.8rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.tts-mini-player__close:hover {\n  background: rgba(255, 107, 107, 0.8);\n}\n\n[data-theme=\"dark\"] .tts-mini-player {\n  background: linear-gradient(135deg, #252542 0%, #1a1a2e 100%);\n}\n\n.sleep-timer-container {\n  position: relative;\n}\n\n.sleep-timer-btn {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 12px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: all 0.2s ease;\n}\n\n.sleep-timer-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.sleep-timer-btn.active {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n  border-color: var(--user-accent-light);\n}\n\n.sleep-timer-dropdown {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  background: #3d3a50;\n  border-radius: 12px;\n  padding: 8px;\n  margin-bottom: 8px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\n  display: none;\n  min-width: 140px;\n}\n\n.sleep-timer-dropdown.visible {\n  display: block;\n}\n\n.sleep-timer-option {\n  display: block;\n  width: 100%;\n  padding: 10px 12px;\n  border: none;\n  background: transparent;\n  color: #fff;\n  text-align: left;\n  cursor: pointer;\n  border-radius: 6px;\n  font-size: 0.9rem;\n  transition: background 0.2s;\n}\n\n.sleep-timer-option:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.sleep-timer-option.active {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n.keyboard-shortcuts-overlay {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s ease;\n}\n\n.keyboard-shortcuts-overlay.visible {\n  opacity: 1;\n  visibility: visible;\n}\n\n.keyboard-shortcuts-modal {\n  background: #fff;\n  border-radius: 16px;\n  padding: 32px;\n  max-width: 500px;\n  width: 90%;\n  max-height: 80vh;\n  overflow-y: auto;\n}\n\n[data-theme=\"dark\"] .keyboard-shortcuts-modal {\n  background: #252542;\n  color: #e0e0e0;\n}\n\n.keyboard-shortcuts-modal h3 {\n  font-size: 1.5rem;\n  margin-bottom: 24px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.keyboard-shortcuts-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.keyboard-shortcuts-list li {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .keyboard-shortcuts-list li {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.keyboard-shortcuts-list kbd {\n  background: #f0f0f0;\n  padding: 4px 12px;\n  border-radius: 6px;\n  font-family: monospace;\n  font-size: 0.9rem;\n  border: 1px solid #ddd;\n}\n\n[data-theme=\"dark\"] .keyboard-shortcuts-list kbd {\n  background: #3d3a50;\n  border-color: #555;\n}\n\n.keyboard-shortcuts-close {\n  margin-top: 24px;\n  width: 100%;\n  padding: 12px;\n  border: none;\n  border-radius: 8px;\n  background: #4a6fa5;\n  color: #fff;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: background 0.2s;\n}\n\n.keyboard-shortcuts-close:hover {\n  background: #3d5d8a;\n}\n\n.tts-download-btn {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 16px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: all 0.2s ease;\n}\n\n.tts-download-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.tts-download-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.tts-download-btn.downloading {\n  pointer-events: none;\n}\n\n.tts-download-btn.downloading::after {\n  content: '';\n  width: 14px;\n  height: 14px;\n  border: 2px solid transparent;\n  border-top-color: #fff;\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.article-notes-panel {\n  position: fixed;\n  right: -400px;\n  top: 0;\n  bottom: 0;\n  width: 400px;\n  background: #fff;\n  box-shadow: -4px 0 24px rgba(0, 0, 0, 0.15);\n  z-index: 1001;\n  transition: right 0.3s ease;\n  display: flex;\n  flex-direction: column;\n}\n\n.article-notes-panel.visible {\n  right: 0;\n}\n\n[data-theme=\"dark\"] .article-notes-panel {\n  background: #1e1e32;\n}\n\n.notes-panel__header {\n  padding: 20px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n[data-theme=\"dark\"] .notes-panel__header {\n  border-bottom-color: rgba(255, 255, 255, 0.1);\n}\n\n.notes-panel__title {\n  font-size: 1.2rem;\n  font-weight: 600;\n}\n\n.notes-panel__close {\n  width: 32px;\n  height: 32px;\n  border: none;\n  border-radius: 8px;\n  background: transparent;\n  cursor: pointer;\n  font-size: 1.2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s;\n}\n\n.notes-panel__close:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.notes-panel__content {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n}\n\n.notes-textarea {\n  width: 100%;\n  min-height: 300px;\n  padding: 16px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 12px;\n  font-family: inherit;\n  font-size: 1rem;\n  line-height: 1.6;\n  resize: vertical;\n  background: #f8f9fa;\n}\n\n.notes-panel__actions {\n  display: flex;\n  gap: 10px;\n  margin-top: 15px;\n  padding-top: 15px;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n.notes-panel__btn {\n  flex: 1;\n  padding: 10px 16px;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 500;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  transition: all 0.2s;\n}\n\n.notes-panel__btn--clear {\n  background: #f0f0f5;\n  color: #666;\n}\n\n.notes-panel__btn--clear:hover {\n  background: #e0e0ea;\n}\n\n.notes-panel__btn--export {\n  background: var(--user-accent);\n  color: #fff;\n}\n\n.notes-panel__btn--export:hover {\n  background: var(--user-accent-dark);\n}\n\n[data-theme=\"dark\"] .notes-panel__actions {\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .notes-panel__btn--clear {\n  background: #3a3a5a;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .notes-panel__btn--clear:hover {\n  background: #4a4a6a;\n}\n\n[data-theme=\"dark\"] .notes-textarea {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.1);\n  color: #e0e0e0;\n}\n\n.notes-save-status {\n  font-size: 0.85rem;\n  color: #666;\n  margin-top: 8px;\n}\n\n[data-theme=\"dark\"] .notes-save-status {\n  color: #999;\n}\n\n.article-takeaways {\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  border-radius: 16px;\n  padding: 24px;\n  margin-bottom: 32px;\n  border-left: 4px solid #4a6fa5;\n}\n\n[data-theme=\"dark\"] .article-takeaways {\n  background: linear-gradient(135deg, #252542 0%, #1a1a2e 100%);\n  border-left-color: var(--user-accent-light);\n}\n\n.article-takeaways__title {\n  font-size: 1.2rem;\n  font-weight: 700;\n  margin-bottom: 16px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.article-takeaways__list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.article-takeaways__list li {\n  position: relative;\n  padding-left: 28px;\n  margin-bottom: 12px;\n  line-height: 1.6;\n}\n\n.article-takeaways__list li::before {\n  content: 'âœ“';\n  position: absolute;\n  left: 0;\n  color: #4a6fa5;\n  font-weight: bold;\n}\n\n[data-theme=\"dark\"] .article-takeaways__list li::before {\n  color: var(--user-accent-light);\n}\n\n@media (max-width: 768px) {\n  .tts-mini-player {\n    left: 16px;\n    right: 16px;\n    bottom: 16px;\n    border-radius: 16px;\n  }\n  \n  .tts-mini-player__info {\n    flex: 1;\n  }\n  \n  .article-notes-panel {\n    width: 100%;\n    right: -100%;\n  }\n  \n  .keyboard-shortcuts-modal {\n    padding: 24px;\n  }\n}\n\n@media print {\n  .reading-controls,\n  .header,\n  .mb-footer,\n  .article-tts-player,\n  .article-toc,\n  .article-share,\n  .article-related,\n  .bookmark-prompt,\n  .tts-mini-player,\n  .article-notes-panel,\n  .keyboard-shortcuts-overlay {\n    display: none !important;\n  }\n  \n  .article-content {\n    max-width: 100%;\n  }\n  \n  .user-highlight {\n    background: #ffeb3b !important;\n    -webkit-print-color-adjust: exact;\n    print-color-adjust: exact;\n  }\n}\n\n.article-actions {\n  margin: 30px 0;\n  display: flex;\n  justify-content: center;\n}\n\n.save-article-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 10px;\n  padding: 14px 28px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  border: none;\n  border-radius: 30px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(184, 155, 94, 0.3);\n}\n\n.save-article-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(184, 155, 94, 0.4);\n}\n\n.save-article-btn.is-saved {\n  background: #10b981;\n  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);\n}\n\n.save-article-btn.is-saved:hover {\n  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);\n}\n\n.save-article-btn i {\n  font-size: 1.1rem;\n  transition: transform 0.3s ease;\n}\n\n.save-article-btn.is-saved i {\n  animation: bookmarkPop 0.3s ease;\n}\n\n@keyframes bookmarkPop {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.3); }\n  100% { transform: scale(1); }\n}\n\n.save-article-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n[data-theme=\"dark\"] .save-article-btn {\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .save-article-btn:hover {\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);\n}\n\n.back-to-top {\n  bottom: 100px;\n  right: 30px;\n}\n\n@media (max-width: 768px) {\n  .back-to-top {\n    bottom: 90px;\n    right: 20px;\n  }\n}\n","path":null,"size_bytes":56569,"size_tokens":null},"mindspace-build/support/support-animations.js":{"content":"// ==================== SUPPORT PAGE ANIMATIONS ====================\n\n(function() {\n  'use strict';\n\n  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n\n  // ==================== SCROLL ANIMATIONS ====================\n  function initScrollAnimations() {\n    if (prefersReducedMotion) {\n      document.querySelectorAll('.animate-section, .animate-stagger, .animate-slide-left, .animate-slide-right, .animate-scale').forEach(el => {\n        el.classList.add('is-visible');\n      });\n      return;\n    }\n\n    const observerOptions = {\n      root: null,\n      rootMargin: '0px 0px -80px 0px',\n      threshold: 0.1\n    };\n\n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          entry.target.classList.add('is-visible');\n        }\n      });\n    }, observerOptions);\n\n    const animatedElements = document.querySelectorAll('.animate-section, .animate-stagger, .animate-slide-left, .animate-slide-right, .animate-scale');\n    animatedElements.forEach(el => observer.observe(el));\n  }\n\n  // ==================== BACK TO TOP ====================\n  function initBackToTop() {\n    const backToTopBtn = document.getElementById('backToTop');\n    if (!backToTopBtn) return;\n\n    function toggleBackToTop() {\n      if (window.scrollY > 400) {\n        backToTopBtn.classList.add('visible');\n      } else {\n        backToTopBtn.classList.remove('visible');\n      }\n    }\n\n    backToTopBtn.addEventListener('click', () => {\n      window.scrollTo({\n        top: 0,\n        behavior: prefersReducedMotion ? 'auto' : 'smooth'\n      });\n    });\n\n    let scrollTimeout;\n    window.addEventListener('scroll', () => {\n      if (scrollTimeout) return;\n      scrollTimeout = setTimeout(() => {\n        toggleBackToTop();\n        scrollTimeout = null;\n      }, 100);\n    }, { passive: true });\n\n    toggleBackToTop();\n  }\n\n  // ==================== ANIMATION CLASSES ====================\n  function addAnimationClasses() {\n    const crisisCards = document.querySelector('.crisis-cards');\n    if (crisisCards) {\n      crisisCards.classList.add('animate-stagger');\n    }\n\n    const crisisBanner = document.querySelector('.crisis-banner');\n    if (crisisBanner) {\n      crisisBanner.classList.add('animate-section');\n    }\n\n    const quicklinksGrid = document.querySelector('.quicklinks-grid');\n    if (quicklinksGrid) {\n      quicklinksGrid.classList.add('animate-stagger');\n    }\n\n    const helplinesGrid = document.querySelector('.helplines-grid');\n    if (helplinesGrid) {\n      helplinesGrid.classList.add('animate-stagger');\n    }\n\n    const selfhelpCards = document.querySelector('.selfhelp-cards');\n    if (selfhelpCards) {\n      selfhelpCards.classList.add('animate-stagger');\n    }\n\n    const faqList = document.querySelector('.faq-list');\n    if (faqList) {\n      faqList.classList.add('animate-stagger');\n    }\n\n    document.querySelectorAll('.section-header').forEach(header => {\n      header.classList.add('animate-section');\n    });\n\n    const appointmentForm = document.querySelector('.appointment-form');\n    if (appointmentForm) {\n      appointmentForm.classList.add('animate-scale');\n    }\n\n    const resourcesGrid = document.querySelector('.resources-grid');\n    if (resourcesGrid) {\n      resourcesGrid.classList.add('animate-stagger');\n    }\n  }\n\n  // ==================== CARD HOVER EFFECTS ====================\n  function initCardHoverEffects() {\n    if (prefersReducedMotion) return;\n\n    const cards = document.querySelectorAll('.crisis-card, .quicklink-card, .helpline-card, .selfhelp-card');\n    \n    cards.forEach(card => {\n      card.addEventListener('mouseenter', function(e) {\n        this.style.transition = 'transform 0.3s ease, box-shadow 0.3s ease';\n      });\n\n      card.addEventListener('mousemove', function(e) {\n        const rect = this.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        const centerX = rect.width / 2;\n        const centerY = rect.height / 2;\n        const rotateX = (y - centerY) / 20;\n        const rotateY = (centerX - x) / 20;\n        \n        this.style.transform = `translateY(-8px) scale(1.02) perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;\n      });\n\n      card.addEventListener('mouseleave', function() {\n        this.style.transform = '';\n      });\n    });\n  }\n\n  // ==================== RIPPLE EFFECT ====================\n  function initRippleEffect() {\n    if (prefersReducedMotion) return;\n\n    const buttons = document.querySelectorAll('.crisis-btn, .helpline-contact');\n    \n    buttons.forEach(button => {\n      button.addEventListener('click', function(e) {\n        const rect = this.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        \n        const ripple = document.createElement('span');\n        ripple.className = 'ripple-effect';\n        ripple.style.left = x + 'px';\n        ripple.style.top = y + 'px';\n        \n        this.appendChild(ripple);\n        \n        setTimeout(() => ripple.remove(), 600);\n      });\n    });\n  }\n\n  // ==================== INITIALIZATION ====================\n  function init() {\n    addAnimationClasses();\n    initScrollAnimations();\n    initBackToTop();\n    initCardHoverEffects();\n    initRippleEffect();\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n})();\n","path":null,"size_bytes":5500,"size_tokens":null},"js/script.js":{"content":"// ==================== MAIN APPLICATION ====================\n\"use strict\";\n\n\n\n// --- Preloader ---\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n  const preloader = document.querySelector(\"[data-preaload]\");\n  const progressFill = document.querySelector(\".progress-bar-fill\");\n  let progress = 0;\n\n  function animateProgress() {\n    if (!progressFill) return;\n    const interval = setInterval(function () {\n      progress += Math.random() * 8 + 2;\n      if (progress > 90) progress = 90;\n      progressFill.style.width = progress + \"%\";\n    }, 150);\n    return interval;\n  }\n\n  const progressInterval = animateProgress();\n\n  window.addEventListener(\"load\", function () {\n    if (progressInterval) clearInterval(progressInterval);\n    if (progressFill) {\n      progressFill.style.width = \"100%\";\n    }\n    setTimeout(function () {\n      document.body.classList.add(\"loaded\");\n      if (preloader) {\n        preloader.classList.add(\"loaded\");\n        setTimeout(function () {\n          preloader.style.display = \"none\";\n        }, 800);\n      }\n      const legacyLoader = document.getElementById(\"preloader\");\n      if (legacyLoader) legacyLoader.style.display = \"none\";\n      window.scrollTo(0, 0);\n    }, 400);\n  });\n\n\n\n// --- Utility Functions ---\n  function addEventOnElements(elements, eventType, callback) {\n    if (!elements || !elements.length) return;\n    for (let i = 0; i < elements.length; i++) {\n      elements[i].addEventListener(eventType, callback);\n    }\n  }\n\n\n\n// --- Video Autoplay Fallback ---\n  document.querySelectorAll('video.back-video').forEach(function(video) {\n    video.setAttribute('muted', '');\n    video.muted = true;\n    video.setAttribute('playsinline', '');\n    video.setAttribute('autoplay', '');\n\n    function tryPlay() {\n      if (!video.paused) return;\n      video.muted = true;\n      var playPromise = video.play();\n      if (playPromise !== undefined) {\n        playPromise.catch(function() {});\n      }\n    }\n\n    video.addEventListener('canplay', tryPlay);\n    video.addEventListener('loadeddata', tryPlay);\n    video.addEventListener('loadedmetadata', tryPlay);\n\n    if (video.readyState >= 2) {\n      tryPlay();\n    } else {\n      video.load();\n    }\n\n    var retryCount = 0;\n    var retryInterval = setInterval(function() {\n      retryCount++;\n      if (!video.paused || retryCount > 20) {\n        clearInterval(retryInterval);\n        return;\n      }\n      tryPlay();\n    }, 500);\n\n    document.addEventListener('touchstart', function() {\n      if (video.paused) tryPlay();\n    }, { once: true });\n\n    document.addEventListener('click', function() {\n      if (video.paused) tryPlay();\n    }, { once: true });\n\n    var observer = new IntersectionObserver(function(entries) {\n      entries.forEach(function(entry) {\n        if (entry.isIntersecting && video.paused) {\n          tryPlay();\n        }\n      });\n    }, { threshold: 0.1 });\n    observer.observe(video);\n  });\n\n// --- Navbar ---\n  const navbar = document.querySelector(\"[data-navbar]\");\n  const navTogglers = document.querySelectorAll(\"[data-nav-toggler]\");\n  const overlay = document.querySelector(\"[data-overlay]\");\n  const navOpenBtn = document.querySelector(\".nav-open-btn\");\n\n  function openNavbar() {\n    if (!navbar || !overlay) return;\n    navbar.classList.add(\"active\");\n    overlay.classList.add(\"active\");\n    document.body.classList.add(\"nav-active\");\n    if (navOpenBtn) navOpenBtn.classList.add(\"is-active\");\n  }\n\n  function closeNavbar() {\n    if (!navbar || !overlay) return;\n    navbar.classList.remove(\"active\");\n    overlay.classList.remove(\"active\");\n    document.body.classList.remove(\"nav-active\");\n    if (navOpenBtn) navOpenBtn.classList.remove(\"is-active\");\n\n\n    const submenuPanels = navbar.querySelectorAll(\".navbar-submenu-panel\");\n    submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n    navbar.classList.remove(\"submenu-open\");\n  }\n\n\n  window.closeNavbar = closeNavbar;\n\n  function toggleNavbar() {\n    if (!navbar) return;\n    if (navbar.classList.contains(\"active\")) {\n      closeNavbar();\n    } else {\n      openNavbar();\n    }\n  }\n\n  addEventOnElements(navTogglers, \"click\", toggleNavbar);\n\n// --- Mobile Swipe Gestures ---\n  let touchStartX = 0;\n  let touchStartY = 0;\n  let touchCurrentX = 0;\n  let isSwiping = false;\n  let swipeDirection = null;\n\n  if (navbar) {\n    navbar.addEventListener(\"touchstart\", function(e) {\n      touchStartX = e.touches[0].clientX;\n      touchStartY = e.touches[0].clientY;\n      touchCurrentX = touchStartX;\n      isSwiping = true;\n      swipeDirection = null;\n    }, { passive: true });\n\n    navbar.addEventListener(\"touchmove\", function(e) {\n      if (!isSwiping) return;\n      touchCurrentX = e.touches[0].clientX;\n      var touchCurrentY = e.touches[0].clientY;\n      var diffX = Math.abs(touchStartX - touchCurrentX);\n      var diffY = Math.abs(touchStartY - touchCurrentY);\n\n      if (!swipeDirection && (diffX > 10 || diffY > 10)) {\n        swipeDirection = diffX > diffY ? 'horizontal' : 'vertical';\n      }\n\n      if (swipeDirection !== 'horizontal') return;\n\n      var diff = touchStartX - touchCurrentX;\n      var drawerWidth = navbar.offsetWidth || 360;\n\n      if (diff > 0 && diff < drawerWidth) {\n        navbar.style.transform = \"translateX(\" + (drawerWidth - diff) + \"px)\";\n        navbar.style.transition = \"none\";\n      }\n    }, { passive: true });\n\n    navbar.addEventListener(\"touchend\", function() {\n      if (!isSwiping) return;\n      isSwiping = false;\n\n      navbar.style.transition = \"\";\n      navbar.style.transform = \"\";\n\n      if (swipeDirection === 'horizontal') {\n        var diff = touchStartX - touchCurrentX;\n        if (diff > 80) {\n          closeNavbar();\n        }\n      }\n      swipeDirection = null;\n    }, { passive: true });\n\n    navbar.addEventListener(\"touchcancel\", function() {\n      isSwiping = false;\n      swipeDirection = null;\n      navbar.style.transition = \"\";\n      navbar.style.transform = \"\";\n    }, { passive: true });\n  }\n\n\n  function createRipple(e) {\n    const link = e.currentTarget;\n    const circle = document.createElement(\"span\");\n    const diameter = Math.max(link.clientWidth, link.clientHeight);\n    const radius = diameter / 2;\n\n    circle.style.width = circle.style.height = `${diameter}px`;\n    circle.style.left = `${e.clientX - link.getBoundingClientRect().left - radius}px`;\n    circle.style.top = `${e.clientY - link.getBoundingClientRect().top - radius}px`;\n    circle.classList.add(\"ripple\");\n\n    const existingRipple = link.querySelector(\".ripple\");\n    if (existingRipple) existingRipple.remove();\n\n    link.appendChild(circle);\n  }\n\n// --- Sticky Header ---\n  document.querySelectorAll(\".navbar-link\").forEach(link => {\n    link.addEventListener(\"click\", createRipple);\n  });\n\n\n\n  function initMobileSubmenu() {\n    const isMobile = () => window.innerWidth <= 1024;\n    const navbar = document.querySelector(\"[data-navbar]\");\n    const submenuItems = document.querySelectorAll(\".navbar-item.has-submenu\");\n    const submenuPanels = document.querySelectorAll(\".navbar-submenu-panel\");\n    const backButtons = document.querySelectorAll(\".submenu-back-btn\");\n\n    if (!navbar || !submenuItems.length) return;\n\n\n    submenuItems.forEach(item => {\n      const link = item.querySelector(\".navbar-link\");\n      const submenuId = item.getAttribute(\"data-submenu\");\n      const panel = document.querySelector(`[data-submenu-panel=\"${submenuId}\"]`);\n\n      if (!link || !panel) return;\n\n      link.addEventListener(\"click\", function(e) {\n        if (!isMobile()) return;\n\n        e.preventDefault();\n        e.stopPropagation();\n\n// --- Submenu Navigation ---\n\n        panel.classList.add(\"active\");\n        navbar.classList.add(\"submenu-open\");\n      });\n    });\n\n\n    backButtons.forEach(btn => {\n      btn.addEventListener(\"click\", function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n\n        submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n        navbar.classList.remove(\"submenu-open\");\n      });\n    });\n\n\n    const originalCloseNavbar = window.closeNavbar || closeNavbar;\n    window.closeNavbarWithSubmenu = function() {\n      submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n      navbar.classList.remove(\"submenu-open\");\n      if (typeof originalCloseNavbar === 'function') {\n        originalCloseNavbar();\n      }\n    };\n\n\n    const closeBtn = navbar.querySelector(\".close-btn\");\n    if (closeBtn) {\n      closeBtn.addEventListener(\"click\", function() {\n        submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n        navbar.classList.remove(\"submenu-open\");\n      });\n    }\n\n\n    const overlay = document.querySelector(\"[data-overlay]\");\n    if (overlay) {\n      overlay.addEventListener(\"click\", function() {\n        submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n        navbar.classList.remove(\"submenu-open\");\n      });\n    }\n\n\n    let resizeTimer;\n    window.addEventListener(\"resize\", function() {\n      clearTimeout(resizeTimer);\n      resizeTimer = setTimeout(function() {\n        if (!isMobile()) {\n          submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n          navbar.classList.remove(\"submenu-open\");\n        }\n      }, 150);\n    });\n  }\n\n\n  initMobileSubmenu();\n\n\n\n  function setActiveNavState() {\n    const currentPath = window.location.pathname.replace(/\\/$/, \"\") || \"/\";\n    const navLinks = document.querySelectorAll(\".navbar-link\");\n    let foundActive = false;\n\n    navLinks.forEach(link => {\n      link.classList.remove(\"active\");\n      if (foundActive) return;\n\n      const href = link.getAttribute(\"href\");\n      if (!href || href.startsWith(\"#\")) return;\n\n\n      let linkPath;\n      try {\n        const resolvedUrl = new URL(href, window.location.href);\n        linkPath = resolvedUrl.pathname.replace(/\\/$/, \"\") || \"/\";\n      } catch (e) {\n        linkPath = href.replace(/\\/$/, \"\") || \"/\";\n      }\n\n\n      const isHome = linkPath === \"/\" || linkPath === \"\";\n      const isCurrentHome = currentPath === \"/\" || currentPath === \"\";\n\n\n      const isBlogLink = linkPath === \"/blog\";\n      const isOnArticlePage = currentPath.startsWith(\"/articles\");\n\n      if (isHome && isCurrentHome) {\n        link.classList.add(\"active\");\n        foundActive = true;\n      } else if (isBlogLink && isOnArticlePage) {\n        link.classList.add(\"active\");\n        foundActive = true;\n      } else if (!isHome && !isBlogLink && currentPath.startsWith(linkPath)) {\n        link.classList.add(\"active\");\n        foundActive = true;\n      } else if (!isHome && currentPath === linkPath) {\n        link.classList.add(\"active\");\n        foundActive = true;\n      }\n    });\n  }\n\n  setActiveNavState();\n\n\n\n  const header = document.querySelector(\"[data-header]\");\n  const backTopBtn = document.querySelector(\"[data-back-top-btn]\");\n  let lastScrollPos = 0;\n\n\n  const MIN_HEADER_HEIGHT = 60;\n  let lastKnownHeaderHeight = 100;\n  let initialHeaderHeight = null;\n\n  function measureHeaderHeight(el) {\n    if (!el) return 0;\n\n    const height = el.offsetHeight > 0 ? el.offsetHeight : el.scrollHeight;\n    return height > 0 ? height : 0;\n  }\n// --- User Menu ---\n\n  function updateHeaderHeight() {\n    let targetHeader = header || document.querySelector('header, .header');\n\n    if (targetHeader) {\n\n      const height = measureHeaderHeight(targetHeader);\n\n\n      if (initialHeaderHeight === null && height > 0) {\n        initialHeaderHeight = height;\n      }\n\n\n      if (height > 0) {\n        lastKnownHeaderHeight = height;\n      } else if (initialHeaderHeight) {\n\n        lastKnownHeaderHeight = initialHeaderHeight;\n      }\n    }\n\n\n    const finalHeight = Math.max(lastKnownHeaderHeight, MIN_HEADER_HEIGHT);\n    const safeHeight = finalHeight + 20;\n\n    document.documentElement.style.setProperty('--header-height', finalHeight + 'px');\n    document.documentElement.style.setProperty('--header-height-safe', safeHeight + 'px');\n  }\n\n\n  requestAnimationFrame(updateHeaderHeight);\n  window.addEventListener('resize', () => requestAnimationFrame(updateHeaderHeight));\n  window.addEventListener('orientationchange', () => requestAnimationFrame(updateHeaderHeight));\n\n\n  if (header && typeof ResizeObserver !== 'undefined') {\n    const headerObserver = new ResizeObserver(() => {\n\n      requestAnimationFrame(updateHeaderHeight);\n    });\n    headerObserver.observe(header);\n  }\n\n\n  if (header) {\n    header.addEventListener('transitionend', () => {\n      requestAnimationFrame(updateHeaderHeight);\n    });\n  }\n\n\n  if (header) {\n    initialHeaderHeight = measureHeaderHeight(header);\n  }\n\n  function hideHeaderOnScroll() {\n    if (!header) return;\n    const isScrollBottom = lastScrollPos < window.scrollY;\n\n    if (isScrollBottom) header.classList.add(\"hide\");\n    else header.classList.remove(\"hide\");\n\n    lastScrollPos = window.scrollY;\n  }\n\n  window.addEventListener(\"scroll\", function () {\n    if (!header) return;\n\n    if (window.scrollY >= 50) {\n      header.classList.add(\"active\");\n      if (backTopBtn) backTopBtn.classList.add(\"active\");\n      hideHeaderOnScroll();\n    } else {\n      header.classList.remove(\"active\");\n      if (backTopBtn) backTopBtn.classList.remove(\"active\");\n    }\n\n    requestAnimationFrame(updateHeaderHeight);\n  });\n\n\n\n  const hamburger = document.querySelector(\".hamburger\");\n  if (hamburger) {\n    hamburger.addEventListener(\"click\", function () {\n      const navBar = document.querySelector(\".nav-bar\");\n      if (navBar) navBar.classList.toggle(\"active\");\n    });\n  }\n\n\n\n  const scrollContainer = document.querySelector(\".gallery\");\n  const backBtn = document.getElementById(\"backBtn\");\n  const nextBtn = document.getElementById(\"nextBtn\");\n\n  if (scrollContainer) {\n    scrollContainer.addEventListener(\"wheel\", (evt) => {\n      evt.preventDefault();\n      scrollContainer.scrollLeft += evt.deltaY;\n      scrollContainer.style.scrollBehavior = \"auto\";\n    });\n\n    if (nextBtn) {\n      nextBtn.addEventListener(\"click\", () => {\n        scrollContainer.style.scrollBehavior = \"smooth\";\n        scrollContainer.scrollLeft += 900;\n      });\n    }\n\n    if (backBtn) {\n      backBtn.addEventListener(\"click\", () => {\n        scrollContainer.style.scrollBehavior = \"smooth\";\n        scrollContainer.scrollLeft -= 900;\n      });\n    }\n// --- Theme Toggle ---\n  }\n\n\n\n  function observeHighlightAnimations() {\n    const highlights = document.querySelectorAll('[data-highlight=\"true\"]');\n    if (!highlights.length) return;\n\n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n        entry.target.classList.toggle(\"animate\", entry.isIntersecting);\n      });\n    }, { threshold: 0.5 });\n\n    highlights.forEach(el => observer.observe(el));\n  }\n\n  if (typeof wrapTargetSentences === \"function\") {\n    wrapTargetSentences();\n  }\n  observeHighlightAnimations();\n\n\n\n  if (typeof Swiper !== \"undefined\" && document.querySelector(\".mySwiper\")) {\n    new Swiper(\".mySwiper\", {\n      effect: \"coverflow\",\n      grabCursor: true,\n      centeredSlides: true,\n      slidesPerView: \"auto\",\n      coverflowEffect: {\n        rotate: 0,\n        stretch: 0,\n        depth: 300,\n        modifier: 1,\n        slideShadows: false,\n      },\n      pagination: { el: \".swiper-pagination\" },\n    });\n  }\n\n\n  if (typeof Swiper !== \"undefined\" && document.querySelector(\".tranding-slider\")) {\n    new Swiper(\".tranding-slider\", {\n      effect: \"coverflow\",\n      grabCursor: true,\n      centeredSlides: true,\n      loop: true,\n      slidesPerView: \"auto\",\n      coverflowEffect: {\n        rotate: 0,\n        stretch: 0,\n        depth: 100,\n        modifier: 2.5,\n      },\n      pagination: { el: \".swiper-pagination\", clickable: true },\n// --- Back to Top ---\n      navigation: {\n        nextEl: \".swiper-button-next\",\n        prevEl: \".swiper-button-prev\",\n      }\n    });\n  }\n\n\n  (function () {\n    const slides = [\n      {\n        kickerKey: \"slide1_kicker\",\n        titleKey: \"slide1_title\",\n        descKey: \"slide1_desc\",\n        ctaKey: \"slide1_cta\",\n        kicker: \"Mental health disorders\",\n        title: \"Anxiety & depression\",\n        desc: \"Learn about common mental health conditions like anxiety and depression. Find clear explanations and discover resources to help you or someone you care about.\",\n        cta: \"Explore resources\",\n        ctaHref: \"./resourcelib/\",\n        imgSrc: \"../assets/images/segment1.png\",\n        imgAlt: \"Mental health disorders overview\"\n      },\n      {\n        kickerKey: \"slide2_kicker\",\n        titleKey: \"slide2_title\",\n        descKey: \"slide2_desc\",\n// --- Cursor ---\n        ctaKey: \"slide2_cta\",\n        kicker: \"Helplines & resources\",\n        title: \"Get immediate support\",\n        desc: \"If you or someone else needs help right now, we have a list of trusted helplines and crisis resources available 24/7.\",\n        cta: \"Find help\",\n        ctaHref: \"./support/#helplines\",\n        imgSrc: \"../assets/images/segment2.png\",\n        imgAlt: \"Helplines and support resources\"\n      },\n      {\n        kickerKey: \"slide3_kicker\",\n        titleKey: \"slide3_title\",\n        descKey: \"slide3_desc\",\n        ctaKey: \"slide3_cta\",\n        kicker: \"Online counseling\",\n        title: \"Schedule an appointment\",\n        desc: \"Use our appointment scheduler to request online counseling. Choose a time that works for you and get connected to support in a private, respectful way.\",\n        cta: \"Schedule now\",\n        ctaHref: \"./support/#appointment\",\n        imgSrc: \"../assets/images/segment3.png\",\n        imgAlt: \"Online counseling appointment scheduler\"\n      },\n      {\n        kickerKey: \"slide4_kicker\",\n        titleKey: \"slide4_title\",\n        descKey: \"slide4_desc\",\n        ctaKey: \"slide4_cta\",\n        kicker: \"Community & stories\",\n// --- Accessibility ---\n        title: \"Support groups & testimonials\",\n        desc: \"Read real stories from our community. Find encouragement and learn how others have found strength and healing on their mental health journey.\",\n        cta: \"Join community\",\n        ctaHref: \"./community/\",\n        imgSrc: \"../assets/images/segment4.png\",\n        imgAlt: \"Support community and testimonials\"\n      }\n    ];\n\n    function getSlideTranslation(key, fallback) {\n      const lang = localStorage.getItem('mindbalance_language') || 'en';\n      if (window.translations && window.translations[lang] && window.translations[lang][key]) {\n        return window.translations[lang][key];\n      }\n      return fallback || key;\n    }\n\n    const kickerEl = document.getElementById(\"mb-kicker\");\n    const titleEl = document.getElementById(\"mb-title\");\n    const descEl = document.getElementById(\"mb-desc\");\n    const ctaEl = document.getElementById(\"mb-cta\");\n    const imgEl = document.querySelector(\".mb-actionbox__img\");\n    const featureEl = document.querySelector(\".mb-actionbox__feature\");\n    const cards = Array.from(document.querySelectorAll(\".mb-card\"));\n\n    if (!kickerEl || !titleEl || !descEl || !ctaEl || !imgEl || !featureEl || !cards.length) return;\n\n    let index = 0;\n    let timer = null;\n    const INTERVAL_MS = 5000;\n    const FADE_MS = 220;\n\n    function setActiveCard(i) {\n      cards.forEach((btn, n) => {\n        const active = n === i;\n        btn.classList.toggle(\"is-active\", active);\n        btn.setAttribute(\"aria-selected\", active ? \"true\" : \"false\");\n      });\n    }\n\n    function smoothSwap(i) {\n      featureEl.classList.add(\"is-fading\");\n\n      window.setTimeout(() => {\n        const s = slides[i];\n\n        kickerEl.textContent = getSlideTranslation(s.kickerKey, s.kicker);\n        titleEl.textContent = getSlideTranslation(s.titleKey, s.title);\n        descEl.textContent = getSlideTranslation(s.descKey, s.desc);\n        ctaEl.textContent = getSlideTranslation(s.ctaKey, s.cta);\n        ctaEl.setAttribute(\"href\", s.ctaHref);\n\n\n        imgEl.style.opacity = \"0\";\n        imgEl.src = s.imgSrc;\n// --- Contact Form ---\n        imgEl.alt = s.imgAlt;\n        imgEl.onload = function () {\n          imgEl.style.opacity = \"1\";\n        };\n\n        setActiveCard(i);\n        index = i;\n\n        featureEl.classList.remove(\"is-fading\");\n      }, FADE_MS);\n    }\n\n    function next() {\n      smoothSwap((index + 1) % slides.length);\n    }\n\n    function start() {\n      stop();\n      timer = setInterval(next, INTERVAL_MS);\n    }\n\n    function stop() {\n      if (timer) clearInterval(timer);\n      timer = null;\n    }\n\n\n    cards.forEach((btn) => {\n      btn.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        const i = Number(btn.dataset.slide);\n        if (!Number.isNaN(i)) {\n          smoothSwap(i);\n          start();\n        }\n      });\n    });\n\n\n    const section = document.querySelector(\".mb-actionbox\");\n    if (section) {\n      section.addEventListener(\"mouseenter\", stop);\n      section.addEventListener(\"mouseleave\", start);\n    }\n\n\n    smoothSwap(0);\n    start();\n  })();\n\n\n\n  const cardBtns = document.querySelectorAll(\".card__btn\");\n  if (cardBtns.length) {\n    cardBtns.forEach(button => {\n      button.addEventListener(\"click\", function () {\n        const additionalContent = this.nextElementSibling;\n        if (additionalContent) additionalContent.classList.toggle(\"active\");\n      });\n    });\n  }\n\n\n\n  const imgBoxes = document.querySelectorAll(\".img-box\");\n  if (imgBoxes.length) {\n    imgBoxes.forEach(image => {\n      image.addEventListener(\"click\", function () {\n        this.classList.toggle(\"expanded\");\n      });\n    });\n  }\n\n\n\n  window.addEventListener(\"scroll\", function () {\n    const blocks = document.querySelectorAll(\".content-block\");\n    if (!blocks.length) return;\n\n    const scrollPos = window.scrollY;\n    blocks.forEach(block => {\n      const blockPosition = block.getBoundingClientRect().top + scrollPos;\n      const triggerPoint = window.innerHeight / 1.5;\n\n      if (blockPosition < scrollPos + triggerPoint) {\n        block.style.transform = \"scale(1.05)\";\n        block.style.opacity = \"1\";\n      } else {\n        block.style.transform = \"scale(1)\";\n        block.style.opacity = \"0.5\";\n      }\n    });\n  });\n\n});\n\n// --- Newsletter ---\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n// ==================== RESOURCE LIBRARY ====================\n\n  if (!document.querySelector(\".rl\")) return;\n\n  const searchEl = document.getElementById(\"rlSearch\");\n  const clearSearchBtn = document.querySelector(\".rl-clearSearch\");\n  const cardsEl = document.getElementById(\"rlCards\");\n  const metaEl = document.getElementById(\"rlMeta\");\n  const catsEl = document.getElementById(\"rlCategories\");\n  const provEl = document.getElementById(\"rlProviders\");\n  const chipsEl = document.getElementById(\"rlActiveChips\");\n  const clearAllEl = document.getElementById(\"rlClearAll\");\n\n  if (!searchEl || !clearSearchBtn || !cardsEl || !metaEl || !catsEl || !provEl || !chipsEl || !clearAllEl) return;\n\n\n  const state = {\n    q: \"\",\n    categories: new Set(),\n    providers: new Set(),\n    tags: new Set()\n  };\n\n  let all = [];\n\n  function showSkeletonCards(count = 4) {\n    cardsEl.innerHTML = \"\";\n    for (let i = 0; i < count; i++) {\n      const skeleton = document.createElement(\"div\");\n      skeleton.className = \"rl-skeleton-card\";\n      skeleton.innerHTML = `\n        <div class=\"rl-skeleton rl-skeleton-title\"></div>\n        <div class=\"rl-skeleton rl-skeleton-text\"></div>\n        <div class=\"rl-skeleton rl-skeleton-text\"></div>\n        <div class=\"rl-skeleton-tags\">\n          <div class=\"rl-skeleton rl-skeleton-tag\"></div>\n          <div class=\"rl-skeleton rl-skeleton-tag\"></div>\n          <div class=\"rl-skeleton rl-skeleton-tag\"></div>\n        </div>\n      `;\n      cardsEl.appendChild(skeleton);\n    }\n  }\n\n  function uniqSorted(arr) {\n    return Array.from(new Set(arr.filter(Boolean))).sort((a, b) => a.localeCompare(b));\n  }\n\n  function setClearBtnVisibility() {\n    const has = state.q.trim().length > 0;\n    clearSearchBtn.style.opacity = has ? \"1\" : \"0\";\n    clearSearchBtn.style.pointerEvents = has ? \"auto\" : \"none\";\n  }\n\n  function buildFilterButtons(container, items, type) {\n    container.innerHTML = \"\";\n    items.forEach((label) => {\n      const btn = document.createElement(\"button\");\n      btn.type = \"button\";\n      btn.className = \"rl-filterBtn\";\n      btn.dataset.label = label;\n      btn.dataset.type = type;\n      btn.textContent = label;\n\n\n      if (state[type].has(label)) {\n        btn.classList.add(\"is-active\");\n      }\n\n      btn.addEventListener(\"click\", () => {\n        const set = state[type];\n        if (set.has(label)) {\n          set.delete(label);\n          btn.classList.remove(\"is-active\");\n        } else {\n          set.add(label);\n          btn.classList.add(\"is-active\");\n        }\n        renderChips();\n        renderResults();\n      });\n\n      container.appendChild(btn);\n    });\n  }\n\n\n  function updateFilterButtonStates() {\n    document.querySelectorAll('.rl-filterBtn').forEach(btn => {\n      const type = btn.dataset.type;\n      const label = btn.dataset.label;\n      if (type && label && state[type]) {\n        btn.classList.toggle('is-active', state[type].has(label));\n      }\n    });\n  }\n\n  function renderChips() {\n    chipsEl.innerHTML = \"\";\n\n    const makeChip = (text, onRemove) => {\n      const b = document.createElement(\"button\");\n      b.type = \"button\";\n      b.className = \"rl-chip\";\n      b.innerHTML = `${text} <span aria-hidden=\"true\">âœ•</span>`;\n      b.addEventListener(\"click\", onRemove);\n      return b;\n    };\n\n    state.categories.forEach((c) => {\n      chipsEl.appendChild(makeChip(c, () => {\n        state.categories.delete(c);\n        renderChips();\n        renderResults();\n      }));\n    });\n\n    state.providers.forEach((p) => {\n      chipsEl.appendChild(makeChip(p, () => {\n        state.providers.delete(p);\n        renderChips();\n        renderResults();\n      }));\n    });\n\n    state.tags.forEach((t) => {\n      chipsEl.appendChild(makeChip(t, () => {\n        state.tags.delete(t);\n        renderChips();\n        renderResults();\n      }));\n    });\n  }\n\n  function matchesSet(itemValue, set) {\n    if (set.size === 0) return true;\n    if (!itemValue) return false;\n\n\n    if (Array.isArray(itemValue)) {\n      return itemValue.some(v => set.has(v));\n    }\n    return set.has(itemValue);\n  }\n\n  function matchesQuery(item, q) {\n    if (!q) return true;\n    const hay = (\n      (item.title || \"\") + \" \" +\n      (item.description || \"\") + \" \" +\n      (item.provider || \"\") + \" \" +\n      (item.category || \"\") + \" \" +\n      (Array.isArray(item.tags) ? item.tags.join(\" \") : \"\")\n    ).toLowerCase();\n    return hay.includes(q.toLowerCase());\n  }\n\n  function renderResults() {\n    const q = state.q.trim();\n\n    const filtered = all.filter((item) => {\n      const okQ = matchesQuery(item, q);\n      const okCat = matchesSet(item.category, state.categories);\n      const okProv = matchesSet(item.provider, state.providers);\n      const okTags = matchesSet(item.tags, state.tags);\n      return okQ && okCat && okProv && okTags;\n    });\n\n    metaEl.textContent = `Showing ${Math.min(filtered.length, 999)} out of ${all.length}`;\n\n    cardsEl.innerHTML = \"\";\n\n    filtered.forEach((item) => {\n      const card = document.createElement(\"article\");\n      card.className = \"rl-card card-animated hover-lift\";\n\n\n      const getLabel = (key, fallback) => {\n        return window.MindBalanceTranslations?.getTranslationSync?.(key) || fallback;\n      };\n\n      const small = document.createElement(\"p\");\n      small.className = \"rl-cardSmall\";\n      const audienceKey = `rl_aud_${(item.audience || \"General\").replace(/\\s+/g, \"\")}`;\n      const audienceText = getLabel(audienceKey, item.audience || \"General\");\n      small.innerHTML = `<span data-translate=\"${audienceKey}\">${audienceText}</span> â€¢ ${item.provider || \"MindBalance\"}`;\n\n      const title = document.createElement(\"h3\");\n      title.className = \"rl-cardTitle\";\n      title.textContent = item.title || \"Untitled\";\n\n      const body = document.createElement(\"p\");\n      body.className = \"rl-cardBody\";\n      body.textContent = item.description || \"\";\n\n      const tagsWrap = document.createElement(\"div\");\n      tagsWrap.className = \"rl-tags\";\n\n      (item.tags || []).slice(0, 6).forEach((t) => {\n        const tag = document.createElement(\"span\");\n        tag.className = \"rl-tag\";\n        const tagKey = `rl_tag_${t.replace(/[\\s&-]+/g, \"\")}`;\n        tag.textContent = getLabel(tagKey, t);\n        tag.setAttribute(\"data-translate\", tagKey);\n\n\n        tag.style.cursor = \"pointer\";\n        tag.addEventListener(\"click\", () => {\n          if (state.tags.has(t)) state.tags.delete(t);\n          else state.tags.add(t);\n          renderChips();\n          renderResults();\n        });\n\n        tagsWrap.appendChild(tag);\n      });\n\n      const actions = document.createElement(\"div\");\n      actions.className = \"rl-actions\";\n\n      const visit = document.createElement(\"a\");\n      visit.className = \"rl-visitBtn\";\n      visit.textContent = window.MindBalanceTranslations?.getTranslationSync?.(\"resourcelib_visit\") || \"VISIT\";\n      visit.setAttribute(\"data-translate\", \"resourcelib_visit\");\n      visit.href = item.url || \"#\";\n      visit.target = \"_blank\";\n      visit.rel = \"noopener\";\n      visit.setAttribute(\"aria-label\", `Visit ${item.title || \"resource\"}`);\n\n\n      const shareBtns = document.createElement(\"div\");\n      shareBtns.className = \"rl-share-btns\";\n\n\n      const copyBtn = document.createElement(\"button\");\n      copyBtn.className = \"rl-share-btn rl-share-btn--copy\";\n      copyBtn.innerHTML = '<ion-icon name=\"link-outline\"></ion-icon>';\n      copyBtn.title = \"Copy link\";\n      copyBtn.addEventListener(\"click\", () => {\n        navigator.clipboard.writeText(item.url || window.location.href).then(() => {\n          copyBtn.classList.add(\"is-copied\");\n          copyBtn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon>';\n          setTimeout(() => {\n            copyBtn.classList.remove(\"is-copied\");\n            copyBtn.innerHTML = '<ion-icon name=\"link-outline\"></ion-icon>';\n          }, 2000);\n        });\n      });\n\n\n      const twitterBtn = document.createElement(\"a\");\n      twitterBtn.className = \"rl-share-btn rl-share-btn--twitter\";\n      twitterBtn.innerHTML = '<ion-icon name=\"logo-twitter\"></ion-icon>';\n      twitterBtn.href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(item.title || \"Check out this resource\")}&url=${encodeURIComponent(item.url || window.location.href)}`;\n      twitterBtn.target = \"_blank\";\n      twitterBtn.rel = \"noopener\";\n      twitterBtn.title = \"Share on Twitter\";\n\n\n      const fbBtn = document.createElement(\"a\");\n      fbBtn.className = \"rl-share-btn rl-share-btn--facebook\";\n      fbBtn.innerHTML = '<ion-icon name=\"logo-facebook\"></ion-icon>';\n      fbBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(item.url || window.location.href)}`;\n      fbBtn.target = \"_blank\";\n      fbBtn.rel = \"noopener\";\n      fbBtn.title = \"Share on Facebook\";\n\n      shareBtns.appendChild(copyBtn);\n      shareBtns.appendChild(twitterBtn);\n      shareBtns.appendChild(fbBtn);\n\n      actions.appendChild(visit);\n      actions.appendChild(shareBtns);\n\n      card.appendChild(small);\n      card.appendChild(title);\n      card.appendChild(body);\n      card.appendChild(tagsWrap);\n      card.appendChild(actions);\n\n      cardsEl.appendChild(card);\n    });\n  }\n\n  function clearAll() {\n    state.q = \"\";\n    state.categories.clear();\n    state.providers.clear();\n    state.tags.clear();\n    searchEl.value = \"\";\n    setClearBtnVisibility();\n    renderChips();\n    renderResults();\n  }\n\n\n  searchEl.addEventListener(\"input\", () => {\n    state.q = searchEl.value;\n    setClearBtnVisibility();\n    renderResults();\n  });\n\n  clearSearchBtn.addEventListener(\"click\", () => {\n    state.q = \"\";\n    searchEl.value = \"\";\n    setClearBtnVisibility();\n    renderResults();\n    searchEl.focus();\n  });\n\n  clearAllEl.addEventListener(\"click\", clearAll);\n\n  setClearBtnVisibility();\n\n\n  showSkeletonCards(4);\n\n\n\n  const featuredIndices = [0, 5, 10];\n\n  function renderSpotlight(resources) {\n    const spotlightEl = document.getElementById('rlSpotlight');\n    if (!spotlightEl) return;\n\n    spotlightEl.innerHTML = '';\n\n    featuredIndices.forEach((index) => {\n      const item = resources[index];\n      if (!item) return;\n\n      const card = document.createElement('article');\n      card.className = 'rl-spotlight-card';\n\n\n      const badge = document.createElement('span');\n      badge.className = 'rl-spotlight-card__badge';\n      badge.textContent = 'Featured';\n\n      const provider = document.createElement('p');\n      provider.className = 'rl-spotlight-card__provider';\n      provider.textContent = item.provider || 'MindBalance';\n\n      const title = document.createElement('h4');\n      title.className = 'rl-spotlight-card__title';\n      title.textContent = item.title || 'Untitled';\n\n      const desc = document.createElement('p');\n      desc.className = 'rl-spotlight-card__desc';\n      desc.textContent = item.description || '';\n\n      const actions = document.createElement('div');\n      actions.className = 'rl-spotlight-card__actions';\n\n      const link = document.createElement('a');\n      link.className = 'rl-spotlight-card__btn rl-spotlight-card__btn--primary';\n      link.href = item.url || '#';\n      link.target = '_blank';\n      link.rel = 'noopener';\n      link.textContent = 'Learn More â†’';\n\n      actions.appendChild(link);\n      card.appendChild(badge);\n      card.appendChild(provider);\n      card.appendChild(title);\n      card.appendChild(desc);\n      card.appendChild(actions);\n\n      spotlightEl.appendChild(card);\n    });\n  }\n\n\n  function parseUrlFilters() {\n    const params = new URLSearchParams(window.location.search);\n    const category = params.get('category');\n    const topic = params.get('topic');\n    const search = params.get('q') || params.get('search');\n\n    return { category, topic, search };\n  }\n\n\n  function applyUrlFilters(categories) {\n    const { category, topic, search } = parseUrlFilters();\n\n\n    const filterParam = category || topic;\n    if (filterParam) {\n\n      const matchingCategory = categories.find(\n        cat => cat.toLowerCase() === filterParam.toLowerCase()\n      );\n      if (matchingCategory) {\n        state.categories.add(matchingCategory);\n      } else {\n\n        state.q = filterParam;\n        searchEl.value = filterParam;\n        setClearBtnVisibility();\n      }\n    }\n\n\n    if (search) {\n      state.q = search;\n      searchEl.value = search;\n      setClearBtnVisibility();\n    }\n  }\n\n\n  fetch(\"../data/resources.json\", { cache: \"no-store\" })\n    .then((r) => r.json())\n    .then((data) => {\n      all = Array.isArray(data) ? data : [];\n\n\n      const categories = uniqSorted(all.map(x => x.category));\n      const providers = uniqSorted(all.map(x => x.provider));\n\n      buildFilterButtons(catsEl, categories, \"categories\");\n      buildFilterButtons(provEl, providers, \"providers\");\n\n\n      applyUrlFilters(categories);\n\n\n      updateFilterButtonStates();\n\n\n      renderSpotlight(all);\n\n      renderChips();\n      renderResults();\n    })\n    .catch((err) => {\n      metaEl.textContent = \"Showing 0 out of 0\";\n      cardsEl.innerHTML = \"\";\n      const p = document.createElement(\"p\");\n      p.style.color = \"#6b7280\";\n      p.textContent = \"Could not load the resource database. Check that ../data/resources.json exists and the path is correct.\";\n      cardsEl.appendChild(p);\n      console.error(err);\n    });\n});\n\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n// ==================== TESTIMONIALS ====================\n  const resourceSection = document.querySelector(\".mb-resources\");\n  if (!resourceSection) return;\n\n\n  requestAnimationFrame(() => {\n    resourceSection.classList.add(\"is-ready\");\n  });\n\n\n  const cards = Array.from(document.querySelectorAll(\".mb-resource-card\"));\n\n\n  if (!cards.length) return;\n\n\n  const io = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry) => {\n        if (!entry.isIntersecting) return;\n\n        entry.target.classList.add(\"is-in\");\n        io.unobserve(entry.target);\n      });\n    },\n    { threshold: 0.12 }\n  );\n\n  cards.forEach((card, i) => {\n\n    card.style.setProperty(\"--delay\", `${Math.min(i * 35, 280)}ms`);\n    io.observe(card);\n  });\n});\n\n\n(function initTestimonialsScroller() {\n\n// ==================== INLINE NOTIFICATIONS ====================\n  const cols = document.querySelectorAll(\".mb-testimonials__col\");\n  if (!cols.length) return;\n\n  cols.forEach((col) => {\n    const viewport = col.querySelector(\".mb-testimonials__viewport\");\n    const track = col.querySelector(\".mb-testimonials__track\");\n    if (!viewport || !track) return;\n\n\n    if (!track.dataset.duplicated) {\n      const originalChildren = Array.from(track.children);\n      originalChildren.forEach((child) => {\n        const clone = child.cloneNode(true);\n        clone.setAttribute(\"aria-hidden\", \"true\");\n        track.appendChild(clone);\n      });\n      track.dataset.duplicated = \"true\";\n    }\n\n\n    const recalc = () => {\n\n      const total = track.scrollHeight;\n      const half = Math.floor(total / 2);\n\n\n      track.style.setProperty(\"--mb-tm-distance\", half + \"px\");\n\n\n\n      const speed = 28;\n      const duration = Math.max(10, Math.round(half / speed));\n      track.style.setProperty(\"--mb-tm-duration\", duration + \"s\");\n    };\n\n\n    requestAnimationFrame(() => requestAnimationFrame(recalc));\n\n\n    window.addEventListener(\"resize\", () => {\n      requestAnimationFrame(recalc);\n    });\n  });\n})();\n\n\n(function initNotifications() {\n\n// ==================== NAVBAR SEARCH ====================\n  const notifBadge = document.getElementById('notifBadge');\n  if (!notifBadge) return;\n\n\n  async function checkNotifications() {\n\n    if (typeof getCurrentUser === 'undefined') return;\n\n    const user = await getCurrentUser();\n    if (!user) {\n      notifBadge.hidden = true;\n      return;\n    }\n\n\n    if (typeof getSupabase !== 'undefined') {\n      const sb = getSupabase();\n      if (sb) {\n        try {\n          const { count } = await sb\n            .from('notifications')\n            .select('*', { count: 'exact', head: true })\n            .eq('user_id', user.id)\n            .eq('read', false);\n\n          if (count && count > 0) {\n            notifBadge.textContent = count > 99 ? '99+' : count;\n            notifBadge.hidden = false;\n          } else {\n            notifBadge.hidden = true;\n          }\n        } catch (e) {\n\n          notifBadge.hidden = true;\n        }\n      }\n    }\n  }\n\n\n  setTimeout(checkNotifications, 1500);\n\n\n  window.addEventListener('mindbalance:authchange', (e) => {\n    if (e.detail.isSignedIn) {\n      setTimeout(checkNotifications, 500);\n    } else {\n      notifBadge.hidden = true;\n    }\n  });\n})();\n\n\n(function initNavbarSearch() {\n\n// ==================== MOOD CHECK-IN ====================\n  const searchContainer = document.getElementById('navbarSearch');\n  const searchInput = document.getElementById('searchInput');\n  const searchToggle = document.getElementById('searchToggle');\n  const searchResults = document.getElementById('searchResults');\n\n  if (!searchContainer || !searchInput || !searchToggle) return;\n\n\n  const searchData = [\n    { title: 'Understanding Anxiety', type: 'Article', url: './articles/anxiety.html', icon: 'document-text-outline' },\n    { title: 'Depression Guide', type: 'Article', url: './articles/depression.html', icon: 'document-text-outline' },\n    { title: 'Stress Management', type: 'Article', url: './articles/stress.html', icon: 'document-text-outline' },\n    { title: 'Sleep & Mental Health', type: 'Article', url: './articles/sleep.html', icon: 'document-text-outline' },\n    { title: 'Mindfulness Basics', type: 'Article', url: './articles/mindfulness.html', icon: 'document-text-outline' },\n    { title: 'Teen Mental Health', type: 'Article', url: './articles/teen-mental-health.html', icon: 'document-text-outline' },\n    { title: 'Resource Library', type: 'Page', url: './resourcelib/', icon: 'library-outline' },\n    { title: 'Community Hub', type: 'Page', url: './community/', icon: 'people-outline' },\n    { title: 'Support & Contact', type: 'Page', url: './support/', icon: 'call-outline' },\n    { title: 'Blog', type: 'Page', url: './blog/', icon: 'newspaper-outline' },\n    { title: 'Anxiety Resources', type: 'Resource', url: './resourcelib/?category=anxiety', icon: 'pulse-outline' },\n    { title: 'Depression Resources', type: 'Resource', url: './resourcelib/?category=depression', icon: 'cloudy-outline' },\n    { title: 'Stress Resources', type: 'Resource', url: './resourcelib/?category=stress', icon: 'flash-outline' },\n    { title: 'Mindfulness Resources', type: 'Resource', url: './resourcelib/?category=mindfulness', icon: 'leaf-outline' },\n    { title: 'Crisis Support', type: 'Support', url: './support/#crisis', icon: 'alert-circle-outline' },\n    { title: 'Breathing Exercises', type: 'Tool', url: './support/#breathing', icon: 'fitness-outline' }\n  ];\n\n\n  searchToggle.addEventListener('click', () => {\n    searchContainer.classList.toggle('is-open');\n    if (searchContainer.classList.contains('is-open')) {\n      searchInput.focus();\n    } else {\n      searchInput.value = '';\n      searchResults.classList.remove('is-visible');\n    }\n  });\n\n\n  searchInput.addEventListener('input', (e) => {\n    const query = e.target.value.toLowerCase().trim();\n\n    if (query.length < 2) {\n      searchResults.classList.remove('is-visible');\n      return;\n    }\n\n    const matches = searchData.filter(item =>\n      item.title.toLowerCase().includes(query) ||\n      item.type.toLowerCase().includes(query)\n    ).slice(0, 6);\n\n    if (matches.length === 0) {\n      searchResults.innerHTML = '<div class=\"navbar-search__empty\">No results found</div>';\n    } else {\n      searchResults.innerHTML = matches.map(item => `\n        <a href=\"${item.url}\" class=\"navbar-search__item\">\n          <div class=\"navbar-search__item-icon\">\n            <ion-icon name=\"${item.icon}\"></ion-icon>\n          </div>\n          <div class=\"navbar-search__item-content\">\n            <div class=\"navbar-search__item-title\">${item.title}</div>\n            <div class=\"navbar-search__item-type\">${item.type}</div>\n          </div>\n        </a>\n      `).join('');\n    }\n\n    searchResults.classList.add('is-visible');\n  });\n\n\n  document.addEventListener('click', (e) => {\n    if (!searchContainer.contains(e.target)) {\n      searchContainer.classList.remove('is-open');\n      searchResults.classList.remove('is-visible');\n    }\n  });\n\n\n  document.addEventListener('keydown', (e) => {\n    if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\n      e.preventDefault();\n      searchContainer.classList.add('is-open');\n      searchInput.focus();\n    }\n    if (e.key === 'Escape') {\n      searchContainer.classList.remove('is-open');\n      searchResults.classList.remove('is-visible');\n    }\n  });\n})();\n\n\n(function initMoodCheckIn() {\n\n// ==================== MOBILE SETTINGS ====================\n  const moodButtons = document.querySelectorAll('.mb-moodcheck__btn');\n  const resultContainer = document.getElementById('moodResult');\n  const messageEl = document.getElementById('moodMessage');\n  const linkEl = document.getElementById('moodLink');\n\n  if (!moodButtons.length || !resultContainer) return;\n\n  const moodData = {\n    great: {\n      message: \"That's wonderful! Keep up the positive momentum. Check out our mindfulness resources to maintain your well-being.\",\n      link: './resourcelib/?category=mindfulness',\n      linkText: 'Explore Mindfulness â†’'\n    },\n    okay: {\n      message: \"It's okay to feel okay. Small steps can make a big difference. Explore our self-care resources.\",\n      link: './resourcelib/',\n      linkText: 'Browse Resources â†’'\n    },\n    stressed: {\n      message: \"Stress is manageable. We have practical tools and techniques to help you cope.\",\n      link: './resourcelib/?category=stress',\n      linkText: 'Stress Management Tips â†’'\n    },\n    anxious: {\n      message: \"Anxiety can feel overwhelming, but you're not alone. Explore our anxiety resources and support options.\",\n      link: './resourcelib/?category=anxiety',\n      linkText: 'Anxiety Support â†’'\n    },\n    sad: {\n      message: \"It's okay to feel sad. Reach out for support - we have resources that can help.\",\n      link: './support/',\n      linkText: 'Get Support â†’'\n    }\n  };\n\n  moodButtons.forEach(btn => {\n    btn.addEventListener('click', () => {\n      const mood = btn.dataset.mood;\n      const data = moodData[mood];\n\n      if (!data) return;\n\n\n      moodButtons.forEach(b => b.classList.remove('is-selected'));\n\n      btn.classList.add('is-selected');\n\n\n      if (messageEl) messageEl.textContent = data.message;\n      if (linkEl) {\n        linkEl.href = data.link;\n        linkEl.textContent = data.linkText;\n      }\n      resultContainer.hidden = false;\n    });\n  });\n})();\n\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\n// ==================== SUGGEST RESOURCE MODAL ====================\n  const settingsToggle = document.querySelector('.mobile-settings-toggle');\n  const settingsSection = document.querySelector('.mobile-settings-section');\n\n  if (settingsToggle && settingsSection) {\n    settingsToggle.addEventListener('click', function() {\n      const isExpanded = settingsToggle.getAttribute('aria-expanded') === 'true';\n      settingsToggle.setAttribute('aria-expanded', !isExpanded);\n      settingsSection.classList.toggle('collapsed');\n    });\n  }\n});\n\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  const suggestModal = document.getElementById('suggestModal');\n  const openSuggestBtn = document.getElementById('openSuggestModal');\n  const suggestForm = document.getElementById('suggestForm');\n  const cancelSuggestBtn = document.getElementById('cancelSuggest');\n  const suggestSuccess = document.getElementById('suggestSuccess');\n  const closeSuggestSuccessBtn = document.getElementById('closeSuggestSuccess');\n  const modalContent = suggestModal?.querySelector('.suggest-modal__content');\n\n  if (!suggestModal || !openSuggestBtn) return;\n\n  let previouslyFocusedElement = null;\n\n  function openSuggestModal() {\n\n    previouslyFocusedElement = document.activeElement;\n\n    suggestModal.classList.add('is-active');\n    document.body.style.overflow = 'hidden';\n\n\n    if (suggestForm) suggestForm.style.display = 'block';\n    if (suggestSuccess) suggestSuccess.style.display = 'none';\n\n\n    const firstInput = suggestForm?.querySelector('input, textarea, select');\n    if (firstInput) {\n      setTimeout(() => firstInput.focus(), 100);\n    }\n  }\n\n  function closeSuggestModal() {\n    suggestModal.classList.remove('is-active');\n    document.body.style.overflow = '';\n\n\n    if (previouslyFocusedElement) {\n      previouslyFocusedElement.focus();\n      previouslyFocusedElement = null;\n    }\n  }\n\n\n  function handleTabKey(e) {\n    if (!suggestModal.classList.contains('is-active')) return;\n    if (e.key !== 'Tab') return;\n\n    const focusableElements = modalContent.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n    const firstElement = focusableElements[0];\n    const lastElement = focusableElements[focusableElements.length - 1];\n\n    if (e.shiftKey && document.activeElement === firstElement) {\n      e.preventDefault();\n      lastElement.focus();\n    } else if (!e.shiftKey && document.activeElement === lastElement) {\n      e.preventDefault();\n      firstElement.focus();\n    }\n  }\n\n  openSuggestBtn.addEventListener('click', openSuggestModal);\n\n\n  suggestModal.querySelector('.suggest-modal__backdrop')?.addEventListener('click', closeSuggestModal);\n  suggestModal.querySelector('.suggest-modal__close')?.addEventListener('click', closeSuggestModal);\n\n  cancelSuggestBtn?.addEventListener('click', closeSuggestModal);\n  closeSuggestSuccessBtn?.addEventListener('click', closeSuggestModal);\n\n\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape' && suggestModal.classList.contains('is-active')) {\n      closeSuggestModal();\n    }\n    handleTabKey(e);\n  });\n\n\n  suggestForm?.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const formData = new FormData(suggestForm);\n    const data = {\n      name: formData.get('name'),\n      description: formData.get('description'),\n      category: formData.get('category'),\n      provider: formData.get('provider') || null,\n      website: formData.get('website') || null,\n      phone: formData.get('phone') || null,\n      address: formData.get('address') || null,\n      submitter_email: formData.get('submitter_email') || null,\n      status: 'pending',\n      created_at: new Date().toISOString()\n    };\n\n    try {\n\n      if (window.supabase) {\n        const { error } = await window.supabase\n          .from('resource_suggestions')\n          .insert([data]);\n\n        if (error) {\n          console.error('Error submitting suggestion:', error);\n\n        }\n      }\n\n\n      suggestForm.style.display = 'none';\n      suggestSuccess.style.display = 'block';\n      suggestForm.reset();\n\n    } catch (err) {\n      console.error('Error:', err);\n\n      suggestForm.style.display = 'none';\n      suggestSuccess.style.display = 'block';\n      suggestForm.reset();\n    }\n  });\n});\n\n","path":null,"size_bytes":49218,"size_tokens":null},"blog/blog.js":{"content":"// ==================== BLOG ====================\n\n(function () {\n  'use strict';\n\n  // --- Translation Helper ---\n  function getTranslation(key, fallback) {\n    if (window.translations) {\n      var lang = localStorage.getItem('mindbalance-language') || 'en';\n      var langMap = { en: 'en', es: 'es', fr: 'fr', zh: 'zh', hi: 'hi', ko: 'ko', de: 'de', gr: 'gr' };\n      var langKey = langMap[lang] || 'en';\n      if (window.translations[langKey] && window.translations[langKey][key]) {\n        return window.translations[langKey][key];\n      }\n    }\n    return fallback;\n  }\n\n  // ==================== TEXT-TO-SPEECH ====================\n  var speechSynth = window.speechSynthesis;\n  var currentUtterance = null;\n  var isPlaying = false;\n\n  function stopSpeech() {\n    if (speechSynth) {\n      speechSynth.cancel();\n      isPlaying = false;\n      updateAllTTSButtons();\n    }\n  }\n\n  function speakText(text, button) {\n    if (!speechSynth) {\n      alert(getTranslation('tts_not_supported', 'Text-to-speech is not supported in your browser.'));\n      return;\n    }\n\n    if (isPlaying) {\n      stopSpeech();\n      return;\n    }\n\n    currentUtterance = new SpeechSynthesisUtterance(text);\n    currentUtterance.lang = document.documentElement.lang || 'en';\n    currentUtterance.rate = 0.9;\n    currentUtterance.pitch = 1;\n\n    currentUtterance.onstart = function () {\n      isPlaying = true;\n      if (button) {\n        button.classList.add('is-playing');\n        button.setAttribute('aria-pressed', 'true');\n        var icon = button.querySelector('.tts-icon');\n        if (icon) icon.textContent = 'â¹';\n      }\n    };\n\n    currentUtterance.onend = function () {\n      isPlaying = false;\n      updateAllTTSButtons();\n    };\n\n    currentUtterance.onerror = function () {\n      isPlaying = false;\n      updateAllTTSButtons();\n    };\n\n    speechSynth.speak(currentUtterance);\n  }\n\n  function updateAllTTSButtons() {\n    document.querySelectorAll('.mb-ttsBtn').forEach(function (btn) {\n      btn.classList.remove('is-playing');\n      btn.setAttribute('aria-pressed', 'false');\n      var icon = btn.querySelector('.tts-icon');\n      if (icon) icon.textContent = 'ðŸ”Š';\n    });\n  }\n\n  function getArticleText(article) {\n    var title = article.querySelector('.mb-articleCard__title, .mb-featureCard__title, .mb-postCard__title, .mb-listPost__title, .mb-miniCard__title');\n    var excerpt = article.querySelector('.mb-articleCard__desc, .mb-featureCard__desc, .mb-postCard__excerpt, .mb-listPost__excerpt');\n    var subtext = article.querySelector('.mb-featureCard__subtext, .mb-postCard__subtext, .mb-listPost__subtext');\n\n    var text = '';\n    if (title) text += title.textContent.trim() + '. ';\n    if (excerpt) text += excerpt.textContent.trim() + '. ';\n    if (subtext) text += subtext.textContent.trim();\n\n    return text;\n  }\n\n  function addTTSButtons() {\n    var articles = document.querySelectorAll('.mb-articleCard, .mb-featureCard, .mb-postCard, .mb-listPost');\n\n    articles.forEach(function (article) {\n      if (article.querySelector('.mb-ttsBtn')) return;\n\n      var actionsContainer = article.querySelector('.mb-articleCard__body, .mb-featureCard__actions, .mb-postCard__body, .mb-listPost__body');\n      if (!actionsContainer) return;\n\n      var ttsBtn = document.createElement('button');\n      ttsBtn.className = 'mb-ttsBtn';\n      ttsBtn.type = 'button';\n      ttsBtn.setAttribute('aria-label', getTranslation('blog_listen', 'Listen to article'));\n      ttsBtn.setAttribute('aria-pressed', 'false');\n      ttsBtn.setAttribute('data-translate-aria', 'blog_listen');\n      ttsBtn.innerHTML = '<span class=\"tts-icon\" aria-hidden=\"true\">ðŸ”Š</span> <span data-translate=\"blog_listen\">Listen</span>';\n\n      ttsBtn.addEventListener('click', function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var text = getArticleText(article);\n        speakText(text, ttsBtn);\n      });\n\n      if (article.classList.contains('mb-featureCard')) {\n        actionsContainer.appendChild(ttsBtn);\n      } else {\n        var wrapper = document.createElement('div');\n        wrapper.className = 'mb-articleActions';\n        wrapper.appendChild(ttsBtn);\n        actionsContainer.appendChild(wrapper);\n      }\n    });\n  }\n\n  // ==================== READING MODE ====================\n  var readingModeEnabled = localStorage.getItem('mindbalance-reading-mode') === 'true';\n\n  function toggleReadingMode() {\n    readingModeEnabled = !readingModeEnabled;\n    localStorage.setItem('mindbalance-reading-mode', readingModeEnabled);\n    applyReadingMode();\n    updateReadingModeButton();\n  }\n\n  function applyReadingMode() {\n    document.body.classList.toggle('reading-mode', readingModeEnabled);\n  }\n\n  function updateReadingModeButton() {\n    var btn = document.getElementById('readingModeBtn');\n    if (btn) {\n      btn.classList.toggle('is-active', readingModeEnabled);\n      btn.setAttribute('aria-pressed', readingModeEnabled.toString());\n    }\n  }\n\n  function createReadingModeToggle() {\n    if (document.getElementById('readingModeBtn')) return;\n\n    var container = document.querySelector('.mb-blogHero__chips');\n    if (!container) return;\n\n    var wrapper = document.createElement('div');\n    wrapper.className = 'mb-readingModeWrapper';\n    wrapper.innerHTML =\n      '<button id=\"readingModeBtn\" class=\"mb-readingModeBtn ' + (readingModeEnabled ? 'is-active' : '') + '\" ' +\n      'type=\"button\" ' +\n      'aria-pressed=\"' + readingModeEnabled + '\" ' +\n      'aria-label=\"' + getTranslation('blog_reading_mode', 'Reading Mode') + '\" ' +\n      'data-translate-aria=\"blog_reading_mode\">' +\n      '<span class=\"reading-icon\" aria-hidden=\"true\">ðŸ“–</span> ' +\n      '<span data-translate=\"blog_reading_mode\">Reading Mode</span>' +\n      '</button>';\n\n    container.parentNode.insertBefore(wrapper, container.nextSibling);\n    document.getElementById('readingModeBtn').addEventListener('click', toggleReadingMode);\n    applyReadingMode();\n  }\n\n  // ==================== READING PROGRESS BAR ====================\n  function updateReadingProgress() {\n    var progressFill = document.querySelector('.mb-readingProgress__bar');\n    var progressBar = document.querySelector('.mb-readingProgress');\n    if (!progressFill || !progressBar) return;\n\n    var scrollTop = window.scrollY;\n    var docHeight = document.documentElement.scrollHeight - window.innerHeight;\n    var progress = docHeight > 0 ? Math.min(Math.round((scrollTop / docHeight) * 100), 100) : 0;\n\n    progressFill.style.width = progress + '%';\n    progressBar.setAttribute('aria-valuenow', progress.toString());\n  }\n\n  function createReadingProgressBar() {\n    if (document.querySelector('.mb-readingProgress')) return;\n\n    var progressBar = document.createElement('div');\n    progressBar.className = 'mb-readingProgress';\n    progressBar.setAttribute('role', 'progressbar');\n    progressBar.setAttribute('aria-label', getTranslation('blog_reading_progress', 'Reading progress'));\n    progressBar.setAttribute('aria-valuemin', '0');\n    progressBar.setAttribute('aria-valuemax', '100');\n    progressBar.setAttribute('aria-valuenow', '0');\n    progressBar.setAttribute('data-translate-aria', 'blog_reading_progress');\n    progressBar.innerHTML = '<div class=\"mb-readingProgress__bar\"></div>';\n\n    document.body.appendChild(progressBar);\n    window.addEventListener('scroll', updateReadingProgress, { passive: true });\n    updateReadingProgress();\n  }\n\n  // ==================== KEYBOARD NAVIGATION ====================\n  function enhanceKeyboardNav() {\n    var articles = document.querySelectorAll('.mb-articleCard, .mb-featureCard, .mb-postCard, .mb-listPost, .mb-miniCard, .mb-compactCard');\n\n    articles.forEach(function (article) {\n      article.setAttribute('tabindex', '0');\n\n      article.addEventListener('keydown', function (e) {\n        if (e.key === 'Enter' || e.key === ' ') {\n          var link = article.querySelector('a[href]');\n          if (link && e.target === article) {\n            e.preventDefault();\n            link.click();\n          }\n        }\n      });\n    });\n  }\n\n  // ==================== HOVER EFFECTS ====================\n  function addHoverEffects() {\n    var cards = document.querySelectorAll('.mb-articleCard, .mb-postCard, .mb-listPost, .mb-miniCard, .mb-compactCard');\n\n    cards.forEach(function (card) {\n      card.addEventListener('mouseenter', function () {\n        card.classList.add('is-hovered');\n      });\n      card.addEventListener('mouseleave', function () {\n        card.classList.remove('is-hovered');\n      });\n      card.addEventListener('focus', function () {\n        card.classList.add('is-focused');\n      });\n      card.addEventListener('blur', function () {\n        card.classList.remove('is-focused');\n      });\n    });\n  }\n\n  // ==================== CATEGORY CARD FILTERS ====================\n  function initCategoryCards() {\n    var categoryCards = document.querySelectorAll('.mb-categoryCard[data-filter]');\n    if (categoryCards.length === 0) return;\n\n    categoryCards.forEach(function (card) {\n      card.addEventListener('click', function () {\n        var filter = card.dataset.filter;\n        categoryCards.forEach(function (c) { c.classList.remove('is-active'); });\n        card.classList.add('is-active');\n\n        var stickyChips = document.querySelectorAll('.mb-stickyChip[data-filter]');\n        stickyChips.forEach(function (c) {\n          c.classList.toggle('is-active', c.dataset.filter === filter);\n        });\n\n        filterArticlesByCategory(filter);\n      });\n    });\n\n    var chips = document.querySelectorAll('.mb-chip[data-filter]');\n    if (chips.length > 0) {\n      var observer = new MutationObserver(function () {\n        var activeChip = document.querySelector('.mb-chip.is-active, .mb-chip.active');\n        var activeFilter = activeChip ? activeChip.dataset.filter : 'all';\n        categoryCards.forEach(function (c) {\n          c.classList.toggle('is-active', c.dataset.filter === activeFilter);\n        });\n      });\n      chips.forEach(function (chip) {\n        observer.observe(chip, { attributes: true, attributeFilter: ['class'] });\n      });\n    }\n  }\n\n  // ==================== ARTICLE FILTERING ====================\n  function filterArticlesByCategory(filter) {\n    var allCards = document.querySelectorAll('[data-category]');\n    allCards.forEach(function (card) {\n      if (filter === 'all') {\n        card.style.display = '';\n        card.style.opacity = '1';\n        card.style.transform = '';\n      } else {\n        var match = card.dataset.category.toLowerCase() === filter.toLowerCase();\n        card.style.display = match ? '' : 'none';\n        if (match) {\n          card.style.opacity = '0';\n          card.style.transform = 'translateY(10px)';\n          requestAnimationFrame(function () {\n            card.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n            card.style.opacity = '1';\n            card.style.transform = '';\n          });\n        }\n      }\n    });\n\n    var resultsCount = document.getElementById('resultsCount');\n    var noResults = document.getElementById('noResults');\n    var activeLabel = document.getElementById('activeFilterLabel');\n    if (resultsCount || noResults) {\n      var visible = document.querySelectorAll('[data-category]:not([style*=\"display: none\"])');\n      if (resultsCount) resultsCount.textContent = 'Showing: ' + visible.length + ' posts';\n      if (noResults) noResults.style.display = visible.length === 0 ? '' : 'none';\n      if (activeLabel) activeLabel.textContent = 'Filter: ' + (filter === 'all' ? 'All' : filter);\n    }\n  }\n\n  // ==================== READING DASHBOARD ====================\n  function initDashboard() {\n    var dashboardCards = document.getElementById('dashboardCards');\n    var ringFill = document.getElementById('ringFill');\n    var ringText = document.getElementById('ringText');\n    var streakCount = document.getElementById('streakCount');\n\n    var readArticles = JSON.parse(localStorage.getItem('mindbalance-read-articles') || '[]');\n    var totalArticles = 13;\n    var readCount = readArticles.length;\n    var percentage = Math.round((readCount / totalArticles) * 100);\n\n    if (ringFill) {\n      var circumference = 2 * Math.PI * 35;\n      var offset = circumference - (percentage / 100) * circumference;\n      ringFill.style.strokeDasharray = circumference;\n      ringFill.style.strokeDashoffset = offset;\n    }\n    if (ringText) ringText.textContent = percentage + '%';\n\n    var streak = parseInt(localStorage.getItem('mindbalance-reading-streak') || '0', 10);\n    if (streakCount) streakCount.textContent = streak;\n\n    if (window.MindBalanceAuth && window.MindBalanceAuth.getUser) {\n      try {\n        var user = window.MindBalanceAuth.getUser();\n        var sb = window.MindBalanceAuth.getSupabase();\n        if (user && sb) {\n          sb.from('profiles').select('current_streak').eq('id', user.id).single().then(function(result) {\n            if (result.data && result.data.current_streak !== undefined) {\n              var dbStreak = result.data.current_streak || 0;\n              if (streakCount) streakCount.textContent = dbStreak;\n              localStorage.setItem('mindbalance-reading-streak', String(dbStreak));\n            }\n          });\n        }\n      } catch(e) {}\n    }\n\n    if (dashboardCards) {\n      if (readArticles.length === 0) {\n        dashboardCards.innerHTML =\n          '<div class=\"mb-dashboard__guest\">' +\n          '<p data-translate=\"blog_dashboard_empty\">Start reading to track your progress!</p>' +\n          '</div>';\n      } else {\n        var recent = readArticles.slice(-5).reverse();\n        dashboardCards.innerHTML = recent.map(function (article) {\n          var progress = article.progress || 0;\n          return '<a class=\"mb-dashboard__card\" href=\"' + (article.url || '#') + '\">' +\n            '<img class=\"mb-dashboard__cardThumb\" src=\"' + (article.image || '') + '\" alt=\"\" loading=\"lazy\">' +\n            '<div class=\"mb-dashboard__cardBody\">' +\n            '<span class=\"mb-dashboard__cardTitle\">' + (article.title || 'Article') + '</span>' +\n            '<div class=\"mb-dashboard__cardBar\">' +\n            '<div class=\"mb-dashboard__cardBarFill\" style=\"width: ' + progress + '%\"></div>' +\n            '</div>' +\n            '</div>' +\n            '</a>';\n        }).join('');\n      }\n    }\n  }\n\n  // ==================== FLOATING TABLE OF CONTENTS ====================\n  function initToc() {\n    var tocLinks = document.querySelectorAll('.mb-blogToc__link');\n    var tocProgress = document.getElementById('tocProgress');\n\n    if (tocLinks.length === 0) return;\n\n    var sections = [];\n    tocLinks.forEach(function (link) {\n      var sectionId = link.getAttribute('data-toc-section');\n      var section = sectionId ? document.getElementById(sectionId) : null;\n      if (section) sections.push({ id: sectionId, element: section, link: link });\n    });\n\n    if (sections.length === 0) return;\n\n    function updateToc() {\n      var scrollTop = window.scrollY + 200;\n      var activeIndex = 0;\n\n      sections.forEach(function (section, index) {\n        if (scrollTop >= section.element.offsetTop) {\n          activeIndex = index;\n        }\n      });\n\n      tocLinks.forEach(function (link) { link.classList.remove('is-active'); });\n      if (sections[activeIndex]) sections[activeIndex].link.classList.add('is-active');\n\n      if (tocProgress) {\n        var docHeight = document.documentElement.scrollHeight - window.innerHeight;\n        var progress = docHeight > 0 ? Math.min(Math.round((window.scrollY / docHeight) * 100), 100) : 0;\n        tocProgress.style.height = progress + '%';\n      }\n    }\n\n    window.addEventListener('scroll', updateToc, { passive: true });\n    updateToc();\n\n    tocLinks.forEach(function (link) {\n      link.addEventListener('click', function (e) {\n        e.preventDefault();\n        var sectionId = link.getAttribute('data-toc-section');\n        var section = sectionId ? document.getElementById(sectionId) : null;\n        if (section) {\n          section.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n      });\n    });\n  }\n\n  // ==================== ARTICLE PREVIEW PANEL ====================\n  function initPreviewPanel() {\n    var panel = document.getElementById('previewPanel');\n    var overlay = document.getElementById('previewOverlay');\n    var closeBtn = document.getElementById('previewClose');\n\n    if (!panel || !overlay) return;\n\n    document.addEventListener('click', function (e) {\n      if (e.target.closest('a[href]') || e.target.closest('button') || e.target.closest('.mb-cardBookmark')) return;\n\n      var card = e.target.closest('.mb-articleCard, .mb-postCard, .mb-miniCard, .mb-compactCard, .mb-listPost');\n      if (!card) return;\n\n      e.preventDefault();\n      openPreview(card);\n    });\n\n    function openPreview(card) {\n      var titleEl = card.querySelector('.mb-articleCard__title a, .mb-postCard__title a, .mb-miniCard__title a, .mb-compactCard__title a, .mb-listPost__title a');\n      var imgEl = card.querySelector('img');\n      var excerptEl = card.querySelector('.mb-articleCard__desc, .mb-postCard__excerpt, .mb-listPost__excerpt');\n      var subtextEl = card.querySelector('.mb-postCard__subtext, .mb-listPost__subtext');\n      var hintEl = card.querySelector('.mb-postHint');\n      var pillEl = card.querySelector('.mb-articleCard__source, .mb-postCard__pill, .mb-pill');\n      var metaEl = card.querySelector('.mb-articleCard__meta, .mb-postCard__meta, .mb-miniCard__meta, .mb-compactCard__meta');\n      var moodEl = card.querySelector('.mb-mood');\n      var linkEl = card.querySelector('a[href]');\n\n      var previewTitle = document.getElementById('previewTitle');\n      var previewImg = document.getElementById('previewImg');\n      var previewCategory = document.getElementById('previewCategory');\n      var previewMeta = document.getElementById('previewMeta');\n      var previewMood = document.getElementById('previewMood');\n      var previewExcerpt = document.getElementById('previewExcerpt');\n      var previewTakeawaysList = document.getElementById('previewTakeawaysList');\n      var previewReadBtn = document.getElementById('previewReadBtn');\n\n      if (previewTitle) previewTitle.textContent = titleEl ? titleEl.textContent.trim() : '';\n\n      if (previewImg && imgEl) {\n        previewImg.src = imgEl.src || '';\n        previewImg.alt = imgEl.alt || '';\n      }\n\n      if (previewCategory) {\n        previewCategory.textContent = pillEl ? pillEl.textContent.trim() : '';\n        previewCategory.className = 'mb-previewPanel__category';\n        if (pillEl) {\n          var pillClasses = pillEl.className\n            .replace('mb-articleCard__source', '')\n            .replace('mb-postCard__pill', '')\n            .replace('mb-miniCard__pill', '')\n            .replace('mb-compactCard__pill', '')\n            .replace('mb-pill', '')\n            .trim();\n          if (pillClasses) previewCategory.className += ' ' + pillClasses;\n        }\n      }\n\n      if (previewMeta) previewMeta.textContent = metaEl ? metaEl.textContent.trim() : '';\n\n      if (previewMood && moodEl) {\n        previewMood.textContent = moodEl.textContent.trim();\n        var moodMatch = moodEl.className.match(/mb-mood--\\w+/);\n        previewMood.className = 'mb-previewPanel__mood' + (moodMatch ? ' ' + moodMatch[0] : '');\n      }\n\n      if (previewExcerpt) previewExcerpt.textContent = excerptEl ? excerptEl.textContent.trim() : '';\n\n      if (previewTakeawaysList) {\n        var takeaways = [];\n        if (subtextEl) {\n          subtextEl.textContent.split('.').forEach(function (s) {\n            var trimmed = s.trim();\n            if (trimmed.length > 10) takeaways.push(trimmed);\n          });\n        }\n        if (hintEl) {\n          var hintText = hintEl.textContent.replace(/^(Best for:|What you'll learn:|Quick take:)/i, '').trim();\n          if (hintText) takeaways.push(hintText);\n        }\n        previewTakeawaysList.innerHTML = takeaways.length > 0\n          ? takeaways.map(function (t) { return '<li>' + t + '</li>'; }).join('')\n          : '<li>Click \"Read Full Article\" for the complete content.</li>';\n      }\n\n      if (previewReadBtn) previewReadBtn.href = linkEl ? linkEl.href : '#';\n\n      panel.classList.add('is-open');\n      overlay.classList.add('is-open');\n      document.body.style.overflow = 'hidden';\n    }\n\n    function closePreview() {\n      panel.classList.remove('is-open');\n      overlay.classList.remove('is-open');\n      document.body.style.overflow = '';\n    }\n\n    if (closeBtn) closeBtn.addEventListener('click', closePreview);\n    overlay.addEventListener('click', closePreview);\n\n    document.addEventListener('keydown', function (e) {\n      if (e.key === 'Escape' && panel.classList.contains('is-open')) closePreview();\n    });\n\n    var previewTts = document.getElementById('previewTts');\n    if (previewTts) {\n      previewTts.addEventListener('click', function () {\n        var title = document.getElementById('previewTitle');\n        var excerpt = document.getElementById('previewExcerpt');\n        var text = (title ? title.textContent : '') + '. ' + (excerpt ? excerpt.textContent : '');\n        speakText(text, previewTts);\n      });\n    }\n  }\n\n  // ==================== BOOKMARK VISUAL TOGGLE ====================\n  function initBookmarks() {\n    document.addEventListener('click', function (e) {\n      var btn = e.target.closest('.mb-cardBookmark');\n      if (!btn) return;\n      btn.classList.toggle('is-saved');\n      var icon = btn.querySelector('ion-icon');\n      if (icon) {\n        icon.setAttribute('name', btn.classList.contains('is-saved') ? 'bookmark' : 'bookmark-outline');\n      }\n    });\n  }\n\n  // ==================== CARD READING PROGRESS ====================\n  function initCardProgress() {\n    var readArticles = JSON.parse(localStorage.getItem('mindbalance-read-articles') || '[]');\n    if (readArticles.length === 0) return;\n\n    document.querySelectorAll('[data-category]').forEach(function (card) {\n      var link = card.querySelector('a[href]');\n      if (!link) return;\n\n      var url = link.getAttribute('href');\n      var article = readArticles.find(function (a) { return a.url === url; });\n\n      if (article && article.progress > 0) {\n        var existingProgress = card.querySelector('.mb-cardProgress');\n        if (existingProgress) {\n          var fill = existingProgress.querySelector('.mb-cardProgress__bar');\n          if (fill) fill.style.width = article.progress + '%';\n        } else {\n          var progressBar = document.createElement('div');\n          progressBar.className = 'mb-cardProgress';\n          progressBar.innerHTML = '<div class=\"mb-cardProgress__bar\" style=\"width: ' + article.progress + '%\"></div>';\n          var imgWrap = card.querySelector('.mb-articleCard__imgWrap, .mb-postCard__imgWrap, .mb-miniCard__imgWrap, .mb-compactCard__imgWrap, .mb-listPost__imgWrap');\n          if (imgWrap) imgWrap.appendChild(progressBar);\n        }\n      }\n    });\n  }\n\n  // ==================== BACK TO TOP ====================\n  function initBackToTop() {\n    var btn = document.getElementById('backToTop');\n    if (!btn) return;\n\n    window.addEventListener('scroll', function () {\n      btn.classList.toggle('is-visible', window.scrollY > 600);\n    }, { passive: true });\n\n    btn.addEventListener('click', function () {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    });\n  }\n\n  // ==================== SMOOTH SCROLL ====================\n  function initSmoothScroll() {\n    document.querySelectorAll('a[href^=\"#\"]').forEach(function (link) {\n      link.addEventListener('click', function (e) {\n        var href = link.getAttribute('href');\n        if (!href || href === '#') return;\n        var target = document.querySelector(href);\n        if (target) {\n          e.preventDefault();\n          target.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n      });\n    });\n  }\n\n  // ==================== SCROLL REVEAL ====================\n  function initScrollReveal() {\n    var revealEls = document.querySelectorAll('[data-reveal]');\n    if (!revealEls.length) return;\n\n    var observer = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        if (entry.isIntersecting) {\n          entry.target.classList.add('is-revealed');\n          observer.unobserve(entry.target);\n        }\n      });\n    }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });\n\n    revealEls.forEach(function (el) { observer.observe(el); });\n  }\n\n  // ==================== STICKY FILTER CHIPS ====================\n  function initStickyFilters() {\n    var stickyEl = document.getElementById('stickyFilters');\n    var catSection = document.querySelector('.mb-categoryCards');\n    if (!stickyEl || !catSection) return;\n\n    var chips = stickyEl.querySelectorAll('.mb-stickyChip[data-filter]');\n    var categoryCards = document.querySelectorAll('.mb-categoryCard[data-filter]');\n\n    function getNavbarHeight() {\n      var header = document.querySelector('.header');\n      if (!header) return 80;\n      return header.offsetHeight;\n    }\n\n    function updateStickyVisibility() {\n      var rect = catSection.getBoundingClientRect();\n      var navH = getNavbarHeight();\n      var shouldShow = rect.bottom < navH;\n      stickyEl.classList.toggle('is-visible', shouldShow);\n      stickyEl.style.top = navH + 'px';\n    }\n\n    window.addEventListener('scroll', updateStickyVisibility, { passive: true });\n    window.addEventListener('resize', updateStickyVisibility, { passive: true });\n    updateStickyVisibility();\n\n    chips.forEach(function (chip) {\n      chip.addEventListener('click', function () {\n        chips.forEach(function (c) { c.classList.remove('is-active'); });\n        chip.classList.add('is-active');\n        var filter = chip.dataset.filter;\n        categoryCards.forEach(function (c) {\n          c.classList.toggle('is-active', c.dataset.filter === filter);\n        });\n        filterArticlesByCategory(filter);\n      });\n    });\n  }\n\n  // ==================== ROTATING QUOTES ====================\n  function initQuoteRotation() {\n    var quoteEl = document.getElementById('rotatingQuote');\n    var authorEl = document.getElementById('rotatingAuthor');\n    if (!quoteEl || !authorEl) return;\n\n    var quotes = [\n      { text: getTranslation('quote_1_text', \"You don\\u2019t have to control your thoughts. You just have to stop letting them control you.\"), author: getTranslation('quote_1_author', \"Dan Millman\") },\n      { text: getTranslation('quote_2_text', \"Mental health is not a destination, but a process. It\\u2019s about how you drive, not where you\\u2019re going.\"), author: getTranslation('quote_2_author', \"Noam Shpancer\") },\n      { text: getTranslation('quote_3_text', \"There is hope, even when your brain tells you there isn\\u2019t.\"), author: getTranslation('quote_3_author', \"John Green\") },\n      { text: getTranslation('quote_5_text', \"You are not your illness. You have an individual story to tell. You have a name, a history, a personality.\"), author: getTranslation('quote_5_author', \"Julian Seifter\") },\n      { text: getTranslation('quote_6_text', \"Healing takes time, and asking for help is a courageous step.\"), author: getTranslation('quote_6_author', \"Mariska Hargitay\") },\n      { text: getTranslation('quote_4_text', \"Self-care is how you take your power back.\"), author: getTranslation('quote_4_author', \"Lalah Delia\") },\n      { text: getTranslation('quote_7_text', \"Be patient with yourself. Self-growth is tender; it\\u2019s holy ground.\"), author: getTranslation('quote_7_author', \"Stephen Covey\") }\n    ];\n\n    var index = 0;\n    setInterval(function () {\n      index = (index + 1) % quotes.length;\n      quoteEl.style.opacity = '0';\n      authorEl.style.opacity = '0';\n      setTimeout(function () {\n        quoteEl.textContent = quotes[index].text;\n        authorEl.textContent = '\\u2014 ' + quotes[index].author;\n        quoteEl.style.opacity = '1';\n        authorEl.style.opacity = '1';\n      }, 400);\n    }, 8000);\n  }\n\n  // ==================== ANIMATED STAT COUNTERS ====================\n  function initStatCounters() {\n    var statNumbers = document.querySelectorAll('.mb-stats__number[data-count], .mb-heroStats__number[data-count]');\n    if (!statNumbers.length) return;\n\n    var observer = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        if (entry.isIntersecting) {\n          var el = entry.target;\n          var target = parseInt(el.getAttribute('data-count'), 10);\n          var duration = 1500;\n          var start = 0;\n          var startTime = null;\n\n          function animate(timestamp) {\n            if (!startTime) startTime = timestamp;\n            var progress = Math.min((timestamp - startTime) / duration, 1);\n            var eased = 1 - Math.pow(1 - progress, 3);\n            el.textContent = Math.round(eased * target);\n            if (progress < 1) requestAnimationFrame(animate);\n            else el.textContent = target + '+';\n          }\n\n          requestAnimationFrame(animate);\n          observer.unobserve(el);\n        }\n      });\n    }, { threshold: 0.5 });\n\n    statNumbers.forEach(function (el) { observer.observe(el); });\n  }\n\n  // ==================== MOOD-BASED RECOMMENDATIONS ====================\n  function initMoodRecommendations() {\n    var moodBtns = document.querySelectorAll('.mb-moodBtn[data-mood]');\n    var resultsEl = document.getElementById('moodResults');\n    var resultsTitleEl = document.getElementById('moodResultsTitle');\n    var resultsCardsEl = document.getElementById('moodResultsCards');\n    if (!moodBtns.length || !resultsEl) return;\n\n    var moodMap = {\n      anxious: {\n        title: 'When you\\u2019re feeling anxious, try these:',\n        articles: [\n          { title: 'Anxiety Disorders: symptoms, types & treatment', url: '../articles/anxiety.html', category: 'Anxiety', time: '15 min' },\n          { title: 'Meditation & mindfulness: a beginner\\u2019s guide', url: '../articles/mindfulness.html', category: 'Mindfulness', time: '12 min' },\n          { title: 'Anxiety and sleep: the cycle that keeps people stuck', url: 'https://www.sleepfoundation.org/mental-health/anxiety-and-sleep', category: 'Sleep', time: '6 min' }\n        ]\n      },\n      sad: {\n        title: 'When you\\u2019re feeling down, these can help:',\n        articles: [\n          { title: 'Understanding Depression: Symptoms & Treatment', url: '../articles/depression.html', category: 'Depression', time: '12 min' },\n          { title: 'Stories of Hope: Real Recovery Journeys', url: '../articles/recovery-stories.html', category: 'Story', time: '10 min' },\n          { title: 'Mental Health Wins: Celebrating Progress', url: '../articles/mental-health-wins.html', category: 'Story', time: '10 min' }\n        ]\n      },\n      stressed: {\n        title: 'Stressed? These articles offer real coping tools:',\n        articles: [\n          { title: 'Stress: what it is and how to manage it', url: '../articles/stress.html', category: 'Stress', time: '12 min' },\n          { title: 'Mental health basics: daily life & support', url: 'https://www.cdc.gov/mental-health/about/', category: 'Stress', time: '6 min' },\n          { title: 'Workplace Mental Health: A Growing Priority', url: '../articles/workplace-wellness.html', category: 'News', time: '10 min' }\n        ]\n      },\n      tired: {\n        title: 'Rest is important. Start here:',\n        articles: [\n          { title: 'Better Sleep: Your Complete Guide', url: '../articles/sleep.html', category: 'Sleep', time: '10 min' },\n          { title: 'How much sleep do you really need?', url: '../articles/sleep.html', category: 'Sleep', time: '4 min' },\n          { title: 'Meditation & mindfulness: a beginner\\u2019s guide', url: '../articles/mindfulness.html', category: 'Mindfulness', time: '12 min' }\n        ]\n      },\n      hopeful: {\n        title: 'Keep that energy! These will inspire you:',\n        articles: [\n          { title: 'Stories of Hope: Real Recovery Journeys', url: '../articles/recovery-stories.html', category: 'Story', time: '10 min' },\n          { title: 'Community Care: The Power of Coming Together', url: '../articles/community-support.html', category: 'Community', time: '10 min' },\n          { title: 'Mental Health Wins: Celebrating Progress', url: '../articles/mental-health-wins.html', category: 'Story', time: '10 min' }\n        ]\n      },\n      curious: {\n        title: 'Great mindset! Explore these in-depth guides:',\n        articles: [\n          { title: 'Anxiety Disorders: symptoms, types & treatment', url: '../articles/anxiety.html', category: 'Anxiety', time: '15 min' },\n          { title: 'Teen Mental Health: A Complete Guide', url: '../articles/teen-mental-health.html', category: 'Teens', time: '10 min' },\n          { title: 'Breaking: New Research in Mental Health', url: '../articles/mental-health-news.html', category: 'News', time: '10 min' }\n        ]\n      }\n    };\n\n    moodBtns.forEach(function (btn) {\n      btn.addEventListener('click', function () {\n        var mood = btn.dataset.mood;\n        var data = moodMap[mood];\n        if (!data) return;\n\n        moodBtns.forEach(function (b) { b.classList.remove('is-active'); });\n        btn.classList.add('is-active');\n\n        if (resultsTitleEl) resultsTitleEl.textContent = data.title;\n        if (resultsCardsEl) {\n          resultsCardsEl.innerHTML = data.articles.map(function (a) {\n            return '<a class=\"mb-moodRec__card\" href=\"' + a.url + '\">' +\n              '<span class=\"mb-pill\">' + a.category + '</span>' +\n              '<span class=\"mb-moodRec__cardTitle\">' + a.title + '</span>' +\n              '<span class=\"mb-moodRec__cardMeta\">' + a.time + ' read</span>' +\n              '</a>';\n          }).join('');\n        }\n\n        resultsEl.hidden = false;\n        resultsEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n      });\n    });\n  }\n\n  // ==================== INITIALIZATION ====================\n  function init() {\n    addTTSButtons();\n    createReadingModeToggle();\n    createReadingProgressBar();\n    enhanceKeyboardNav();\n    addHoverEffects();\n    initCategoryCards();\n    initDashboard();\n    initToc();\n    initPreviewPanel();\n    initBookmarks();\n    initCardProgress();\n    initBackToTop();\n    initSmoothScroll();\n    initScrollReveal();\n    initStickyFilters();\n    initQuoteRotation();\n    initStatCounters();\n    initMoodRecommendations();\n\n    window.addEventListener('beforeunload', stopSpeech);\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n\n  // --- Public API ---\n  window.MindBalanceBlog = {\n    stopSpeech: stopSpeech,\n    toggleReadingMode: toggleReadingMode,\n    speakText: speakText\n  };\n})();\n","path":null,"size_bytes":34762,"size_tokens":null},"replit.md":{"content":"# MindBalance & MindSpace â€” Compressed Technical Guide\n\n## Overview\nMindBalance (www.mindbalance.cloud) and MindSpace (www.mindspace.site) are twin static websites providing curated mental health resources. They share a single codebase and Supabase backend, differing primarily in color scheme and specific content: MindBalance uses a gold/brown palette and includes a Reference Page, while MindSpace uses a light blue palette and omits the Reference Page. Both platforms offer 13 wellness articles with text-to-speech functionality, a wellness check-in, AI personalization, a Community Hub, crisis support, multi-language support (8 languages: English, Spanish, French, Chinese, Hindi, Korean, German, Greek), dark mode, and extensive accessibility features. The project aims to provide accessible and credible mental health support, leveraging technology for personalization and community engagement.\n\n## Competition: TSA Webmaster (High School)\n\n### Rubric Review & Rule Compliance Status\n\n**Go/No Go Requirements (must pass or entry is NOT evaluated):**\n- [x] Website URL functional on desktop and mobile devices\n- [x] Design brief solution with no copyright or plagiarism issues\n- [x] Student Copyright Checklist is present (PDF linked on Reference Page via Google Drive)\n\n**Rule Compliance Checklist:**\n- [x] **Rule A** â€” Site accessible 24/7 via Vercel hosting at mindbalance.cloud / mindspace.site\n- [x] **Rule B** â€” Web pages display the chapter's solution to the event theme\n- [x] **Rule C** â€” URL points to main page, no access grants required\n- [x] **Rule E** â€” Minimum 3 pages (we have 11 pages); sources page present (Reference Page)\n- [x] **Rule E.1** â€” Sources of information listed on Reference Page (Content Sources section)\n- [x] **Rule E.3** â€” Copyrighted material documented (Media & Text Citations PDF linked)\n- [x] **Rule E.4** â€” Student Copyright Checklist (PDF) linked on Reference Page via Google Drive\n- [x] **Rule E.5** â€” Plan of Work log (PDF) linked on Reference Page via Google Drive\n- [x] **Rule F** â€” Compatible with Edge, Firefox, Chrome on desktop and mobile (viewport meta, responsive CSS)\n- [x] **Rule G** â€” Uses HTML5 and modern web-based applications\n- [x] **Rule H** â€” Originality statement added to Reference Page confirming no pre-built templates/themes used\n\n**Potential Concern â€” Rule I:**\n- Rule I states: \"Template engine websites, tools, and sites that generate HTML from text, markdown, or script files, such as Webs, Wix, Weebly, GitHub, Jekyll, and Replit, are NOT permitted.\"\n- **Our position**: Replit was used only as a code editor/development environment. The website is custom-built HTML/CSS/JS hosted on Vercel. No templates, generators, or site builders were used.\n- **Interview prep**: Be ready to explain: \"We used Replit only as our code editor during development. Our website is fully custom-built HTML, CSS, and JavaScript, hosted on Vercel â€” we did not use any pre-built templates or site generators.\"\n\n### Rubric Scoring Breakdown (180 points total)\n\n**Website Section (130 points):**\n| Criteria | Weight | Notes |\n|----------|--------|-------|\n| Theme (X2) | 20 pts | Annual theme must be clearly addressed and reflected in supporting pages |\n| Challenge (X3) | 30 pts | Design brief solution must be well-presented, well-researched, thorough |\n| Content (X2) | 20 pts | Content must align with website purpose and add effectiveness |\n| Layout & Navigation (X2) | 20 pts | User-friendly layout, intuitive navigation, efficient access to information |\n| Graphics & Color Scheme (X2) | 20 pts | High-quality graphics, engaging interactive elements, attractive color scheme |\n| Function & Compatibility (X1) | 10 pts | No broken links/images, renders on major browsers, usable on mobile |\n| Spelling & Grammar (X1) | 10 pts | Few if any spelling and grammatical errors |\n\n**Semifinal Interview (50 points):**\n| Criteria | Weight | Notes |\n|----------|--------|-------|\n| Organization (X1) | 10 pts | Interview should be organized, logical, easy to follow |\n| Knowledge (X1) | 10 pts | Team demonstrates thorough understanding of project and design procedure |\n| Articulation (X1) | 10 pts | Clear, concise communication; leadership/21st century skills evident |\n| Delivery (X1) | 10 pts | Well-spoken, good posture/gestures/eye contact |\n| Engagement & Participation (X1) | 10 pts | All members contribute; conversation-style, not just Q&A |\n\n**Rules violation penalty**: 20% deduction of total possible points for the affected section.\n\n### Interview Preparation Notes\n- Up to 5 team representatives can present\n- Interview is 5-10 minutes\n- TSA competition attire required\n- Key talking points:\n  1. Custom-built from scratch â€” no frameworks, templates, or site builders\n  2. Hosted on Vercel (not Replit) â€” Replit was development environment only\n  3. Accessibility-first design with 8+ accessibility features\n  4. 8-language multilingual support\n  5. Real API integrations (Supabase, ElevenLabs, OpenAI, Resend)\n  6. Community features with real-time updates\n  7. Evidence-based mental health content from authoritative sources (NIMH, Mayo Clinic, SAMHSA)\n\n### Competition Documents on Reference Page\n- Work Log (PDF) â€” Google Drive link\n- Copyright Checklist (PDF) â€” Google Drive link\n- Media & Text Citations (PDF) â€” Google Drive link\n- Credits & Attribution (PDF) â€” Google Drive link\n- Originality Statement â€” displayed directly on page\n\n## User Preferences\n- Preferred communication style: Simple, everyday language\n- Design preference: NO glassmorphism (no backdrop-blur effects). Use solid, clean card designs with subtle shadows and borders instead\n\n## System Architecture\n\n### UI/UX Decisions\nThe design emphasizes clean, solid card designs with subtle shadows and borders, avoiding glassmorphism. Theming is managed via CSS custom properties on `:root`, enabling dynamic switching between light and dark modes, and various accessibility preferences. A critical Z-index hierarchy is maintained for UI elements like preloaders, modals, and navigation.\n\n### Technical Implementations\nThe application uses a Flask backend (`server.py`) to serve static files and provide API endpoints. Client-side logic is handled by JavaScript modules, separated by functionality (e.g., authentication, settings, translations, resource filtering, TTS player, analytics, community features).\n\n### Feature Specifications\n- **Authentication**: Uses Supabase for user authentication, managing sessions and broadcasting auth state changes.\n- **Settings & Accessibility**: Comprehensive accessibility features including dark mode, high contrast, colorblind modes, ADHD mode, dyslexia font, reduced motion, and adjustable font sizes. These settings are persisted in local storage and applied as `data-*` attributes on the `<html>` element.\n- **Translation System**: Supports eight languages (English, Spanish, French, Chinese, Hindi, Korean, German, Greek) using `data-translate` attributes for dynamic content translation. Translation files are in `i18n/` directory (en.json, es.json, fr.json, zh.json, hi.json, ko.json, de.json, gr.json).\n- **Resource Library**: Features a filterable library of resources with search, category, provider, and tag filtering, supporting URL-based pre-selection.\n- **TTS Article Player**: Provides text-to-speech functionality for articles, with an option to use ElevenLabs API or a browser-based fallback. Includes features like highlighting, auto-scroll, sleep timer, notes, bookmarks, and a sticky table of contents. Critical production routing ensures TTS API calls are directed to an always-on Replit server.\n- **Analytics & Achievements**: Tracks user activity (page views, article reads, mood entries, community interactions) and awards 28 unique achievements based on engagement. Also tracks reading progress and daily streaks.\n- **Wellness Check-in**: Allows users to log their mood, updating streaks and providing affirmations and suggestions with visual feedback.\n- **Community Hub**: A forum-like feature enabling post creation, liking, commenting, and @mentions. Includes profanity filtering and moderation tools. Supports real-time updates via Supabase Realtime.\n- **Notifications**: An inbox system for user notifications (likes, comments, mentions, achievements) with real-time updates and badge counts.\n\n### System Design Choices\nThe architecture uses a split deployment: static assets are served by Vercel, while dynamic API services (TTS, newsletter, AI) are hosted on an always-on Replit VM. CORS and rate limiting are enforced on API endpoints. The system prioritizes accessibility, ensuring settings are available to all users regardless of authentication status. A dual key system for language settings in `localStorage` is maintained for backward compatibility.\n\n## External Dependencies\n- **Supabase**: Backend-as-a-Service for authentication, database (PostgreSQL), and real-time features.\n- **ElevenLabs API**: For high-quality text-to-speech generation.\n- **OpenAI (via Replit AI Integrations)**: Powers AI wellness insights, mood analysis, and goal suggestions.\n- **Resend**: Used for sending newsletter welcome emails.\n- **Vercel**: Static site hosting for frontend deployment.\n- **PostgreSQL**: Used for newsletter subscriber management (separate from Supabase for this specific function).\n","path":null,"size_bytes":9344,"size_tokens":null},"mindspace-build/css/analytics.css":{"content":"/* === ACHIEVEMENT NOTIFICATION === */\n.mb-achievement-notification {\n  position: fixed;\n  bottom: 30px;\n  right: 30px;\n  background: linear-gradient(135deg, #1a1a2e 0%, #2a2a4a 100%);\n  border-radius: 16px;\n  padding: 20px 24px;\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(91, 164, 230, 0.3);\n  z-index: 99999;\n  transform: translateY(120px);\n  opacity: 0;\n  transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.4s ease;\n  max-width: 380px;\n  pointer-events: auto;\n}\n\n.mb-achievement-notification.show {\n  transform: translateY(0);\n  opacity: 1;\n}\n\n.mb-achievement-notification__icon {\n  width: 56px;\n  height: 56px;\n  background: linear-gradient(135deg, var(--user-accent-grad-end) 0%, var(--user-accent-light) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  animation: achievementPulse 2s ease-in-out infinite;\n}\n\n.mb-achievement-notification__icon ion-icon {\n  font-size: 28px;\n  color: #1a1a2e;\n}\n\n.mb-achievement-notification__content {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.mb-achievement-notification__label {\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  color: var(--user-accent-grad-end);\n}\n\n.mb-achievement-notification__name {\n  font-size: 18px;\n  font-weight: 700;\n  color: #fff;\n}\n\n.mb-achievement-notification__desc {\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.7);\n}\n\n/* === ACHIEVEMENT ANIMATION === */\n@keyframes achievementPulse {\n  0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(91, 164, 230, 0.4); }\n  50% { transform: scale(1.05); box-shadow: 0 0 20px 5px rgba(91, 164, 230, 0.2); }\n}\n\n/* === CALENDAR HEATMAP === */\n.mb-heatmap {\n  background: #fff;\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n}\n\n.mb-heatmap__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.mb-heatmap__title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-heatmap__title ion-icon {\n  color: var(--user-accent-grad-end);\n}\n\n.mb-heatmap__stats {\n  display: flex;\n  gap: 16px;\n  font-size: 13px;\n  color: #6b6b8a;\n}\n\n.mb-heatmap__stats strong {\n  color: #1a1a2e;\n  font-weight: 600;\n}\n\n.mb-heatmap__grid {\n  display: grid;\n  grid-template-columns: repeat(53, 1fr);\n  gap: 3px;\n}\n\n.mb-heatmap__day {\n  aspect-ratio: 1;\n  border-radius: 3px;\n  background: #f0f0f5;\n  transition: all 0.2s ease;\n  cursor: pointer;\n}\n\n.mb-heatmap__day:hover {\n  transform: scale(1.5);\n  z-index: 10;\n}\n\n.mb-heatmap__day[data-level=\"1\"] { background: var(--user-accent-soft); }\n.mb-heatmap__day[data-level=\"2\"] { background: var(--user-accent-light); }\n.mb-heatmap__day[data-level=\"3\"] { background: var(--user-accent-grad-end); }\n.mb-heatmap__day[data-level=\"4\"] { background: var(--user-accent-grad-end); }\n\n.mb-heatmap__legend {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 4px;\n  margin-top: 12px;\n  font-size: 11px;\n  color: #6b6b8a;\n}\n\n.mb-heatmap__legend-item {\n  width: 12px;\n  height: 12px;\n  border-radius: 2px;\n}\n\n/* === ACTIVITY TIMELINE === */\n.mb-timeline {\n  background: #fff;\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n}\n\n.mb-timeline__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.mb-timeline__title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-timeline__title ion-icon {\n  color: var(--user-accent-grad-end);\n}\n\n.mb-timeline__list {\n  display: flex;\n  flex-direction: column;\n  gap: 0;\n  position: relative;\n}\n\n.mb-timeline__list::before {\n  content: '';\n  position: absolute;\n  left: 20px;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  background: linear-gradient(to bottom, var(--user-accent-grad-end), #f0f0f5);\n}\n\n.mb-timeline__item {\n  display: flex;\n  gap: 16px;\n  padding: 16px 0;\n  position: relative;\n  animation: fadeSlideIn 0.4s ease-out forwards;\n  opacity: 0;\n}\n\n.mb-timeline__item:nth-child(1) { animation-delay: 0.1s; }\n.mb-timeline__item:nth-child(2) { animation-delay: 0.15s; }\n.mb-timeline__item:nth-child(3) { animation-delay: 0.2s; }\n.mb-timeline__item:nth-child(4) { animation-delay: 0.25s; }\n.mb-timeline__item:nth-child(5) { animation-delay: 0.3s; }\n\n/* === TIMELINE ANIMATION === */\n@keyframes fadeSlideIn {\n  from { opacity: 0; transform: translateX(-10px); }\n  to { opacity: 1; transform: translateX(0); }\n}\n\n.mb-timeline__icon {\n  width: 40px;\n  height: 40px;\n  background: #fff;\n  border: 2px solid var(--user-accent-grad-end);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  z-index: 1;\n}\n\n.mb-timeline__icon ion-icon {\n  font-size: 18px;\n  color: var(--user-accent-grad-end);\n}\n\n.mb-timeline__content {\n  flex: 1;\n  padding-top: 8px;\n}\n\n.mb-timeline__action {\n  font-size: 14px;\n  color: #1a1a2e;\n  margin-bottom: 4px;\n}\n\n.mb-timeline__action strong {\n  font-weight: 600;\n}\n\n.mb-timeline__time {\n  font-size: 12px;\n  color: #6b6b8a;\n}\n\n/* === STATS CHARTS === */\n.mb-stats-chart {\n  background: #fff;\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n}\n\n.mb-stats-chart__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.mb-stats-chart__title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n}\n\n.mb-stats-chart__period {\n  display: flex;\n  gap: 8px;\n}\n\n.mb-stats-chart__period button {\n  padding: 6px 12px;\n  border: none;\n  background: #f0f0f5;\n  border-radius: 20px;\n  font-size: 12px;\n  font-weight: 500;\n  color: #6b6b8a;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.mb-stats-chart__period button.active,\n.mb-stats-chart__period button:hover {\n  background: var(--user-accent-grad-end);\n  color: #fff;\n}\n\n.mb-stats-chart__bars {\n  display: flex;\n  align-items: flex-end;\n  gap: 4px;\n  height: 120px;\n  padding-top: 20px;\n}\n\n.mb-stats-chart__bar {\n  flex: 1;\n  background: linear-gradient(to top, var(--user-accent-grad-end), var(--user-accent-soft));\n  border-radius: 4px 4px 0 0;\n  min-height: 4px;\n  transition: all 0.3s ease;\n  position: relative;\n}\n\n.mb-stats-chart__bar:hover {\n  background: linear-gradient(to top, var(--user-accent-dark), var(--user-accent-grad-end));\n}\n\n.mb-stats-chart__bar::after {\n  content: attr(data-value);\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 10px;\n  font-weight: 600;\n  color: #1a1a2e;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n}\n\n.mb-stats-chart__bar:hover::after {\n  opacity: 1;\n}\n\n.mb-stats-chart__labels {\n  display: flex;\n  gap: 4px;\n  margin-top: 8px;\n}\n\n.mb-stats-chart__labels span {\n  flex: 1;\n  text-align: center;\n  font-size: 10px;\n  color: #6b6b8a;\n}\n\n/* === PROGRESS RINGS === */\n.mb-progress-ring {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.mb-progress-ring svg {\n  transform: rotate(-90deg);\n}\n\n.mb-progress-ring__track {\n  fill: none;\n  stroke: #f0f0f5;\n}\n\n.mb-progress-ring__progress {\n  fill: none;\n  stroke: var(--user-accent-grad-end);\n  stroke-linecap: round;\n  transition: stroke-dashoffset 1s ease-out;\n}\n\n.mb-progress-ring__value {\n  position: absolute;\n  font-size: 14px;\n  font-weight: 700;\n  color: #1a1a2e;\n}\n\n/* === ACHIEVEMENT BADGES === */\n.mb-badges {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n  gap: 16px;\n  align-items: stretch;\n}\n\n.mb-badge {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  padding: 20px 12px 16px;\n  background: #fff;\n  border-radius: 16px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n  transition: all 0.3s ease;\n  cursor: pointer;\n  min-height: 160px;\n}\n\n.mb-badge:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\n}\n\n.mb-badge--locked {\n  opacity: 0.5;\n  filter: grayscale(1);\n}\n\n.mb-badge--locked:hover {\n  opacity: 0.7;\n  filter: grayscale(0.5);\n}\n\n.mb-badge__icon {\n  width: 56px;\n  height: 56px;\n  background: linear-gradient(135deg, var(--user-accent-grad-end) 0%, var(--user-accent-light) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 12px;\n}\n\n.mb-badge--locked .mb-badge__icon {\n  background: #e0e0e5;\n}\n\n.mb-badge__icon ion-icon {\n  font-size: 24px;\n  color: #1a1a2e;\n}\n\n.mb-badge--locked .mb-badge__icon ion-icon {\n  color: #999;\n}\n\n.mb-badge__name {\n  font-size: 13px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 4px;\n}\n\n.mb-badge__desc {\n  font-size: 11px;\n  color: #6b6b8a;\n  line-height: 1.4;\n}\n\n.mb-badge__date {\n  font-size: 10px;\n  color: var(--user-accent-grad-end);\n  margin-top: 8px;\n}\n\n/* === SKELETON LOADING === */\n.mb-skeleton {\n  background: linear-gradient(90deg, #f0f0f5 25%, #e8e8ed 50%, #f0f0f5 75%);\n  background-size: 200% 100%;\n  animation: skeletonShimmer 1.5s infinite;\n  border-radius: 8px;\n}\n\n@keyframes skeletonShimmer {\n  0% { background-position: 200% 0; }\n  100% { background-position: -200% 0; }\n}\n\n.mb-skeleton--circle { border-radius: 50%; }\n.mb-skeleton--text { height: 14px; margin-bottom: 8px; }\n.mb-skeleton--title { height: 24px; width: 60%; margin-bottom: 12px; }\n.mb-skeleton--stat { height: 40px; }\n\n/* === EMPTY STATES === */\n.mb-empty-state {\n  text-align: center;\n  padding: 40px 20px;\n}\n\n.mb-empty-state__icon {\n  font-size: 64px;\n  color: var(--user-accent-grad-end);\n  margin-bottom: 16px;\n  opacity: 0.6;\n}\n\n.mb-empty-state__title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 8px;\n}\n\n.mb-empty-state__desc {\n  font-size: 14px;\n  color: #6b6b8a;\n  margin-bottom: 20px;\n}\n\n.mb-empty-state__action {\n  display: inline-block;\n  padding: 12px 24px;\n  background: var(--user-accent-grad-end);\n  color: #fff;\n  font-weight: 600;\n  border-radius: 25px;\n  text-decoration: none;\n  transition: all 0.3s ease;\n}\n\n.mb-empty-state__action:hover {\n  background: var(--user-accent-dark);\n  transform: translateY(-2px);\n}\n\n/* === READING STATS === */\n.mb-reading-stats {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 16px;\n}\n\n.mb-reading-stat {\n  background: #fff;\n  border-radius: 16px;\n  padding: 20px;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n  transition: all 0.3s ease;\n}\n\n.mb-reading-stat:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);\n}\n\n.mb-reading-stat__icon {\n  width: 48px;\n  height: 48px;\n  background: linear-gradient(135deg, var(--user-accent-soft) 0%, var(--user-accent-soft) 100%);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 12px;\n}\n\n.mb-reading-stat__icon ion-icon {\n  font-size: 24px;\n  color: var(--user-accent-grad-end);\n}\n\n.mb-reading-stat__value {\n  font-size: 28px;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin-bottom: 4px;\n}\n\n.mb-reading-stat__label {\n  font-size: 12px;\n  color: #6b6b8a;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n/* === RESPONSIVE === */\n@media (max-width: 768px) {\n  .mb-achievement-notification {\n    left: 16px;\n    right: 16px;\n    bottom: 16px;\n    max-width: none;\n  }\n  \n  .mb-heatmap__grid {\n    grid-template-columns: repeat(26, 1fr);\n  }\n  \n  .mb-reading-stats {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  \n  .mb-badges {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n\n/* === DARK MODE === */\n[data-theme=\"dark\"] .mb-achievement-notification {\n  background: linear-gradient(135deg, #2a2a4a 0%, #1a1a2e 100%);\n}\n\n[data-theme=\"dark\"] .mb-heatmap,\n[data-theme=\"dark\"] .mb-timeline,\n[data-theme=\"dark\"] .mb-stats-chart,\n[data-theme=\"dark\"] .mb-badge,\n[data-theme=\"dark\"] .mb-reading-stat {\n  background: #242440;\n}\n\n[data-theme=\"dark\"] .mb-heatmap__title,\n[data-theme=\"dark\"] .mb-timeline__title,\n[data-theme=\"dark\"] .mb-stats-chart__title,\n[data-theme=\"dark\"] .mb-badge__name,\n[data-theme=\"dark\"] .mb-reading-stat__value,\n[data-theme=\"dark\"] .mb-timeline__action,\n[data-theme=\"dark\"] .mb-empty-state__title {\n  color: #f1f1f1;\n}\n\n[data-theme=\"dark\"] .mb-heatmap__stats,\n[data-theme=\"dark\"] .mb-timeline__time,\n[data-theme=\"dark\"] .mb-stats-chart__labels span,\n[data-theme=\"dark\"] .mb-badge__desc,\n[data-theme=\"dark\"] .mb-reading-stat__label,\n[data-theme=\"dark\"] .mb-empty-state__desc {\n  color: #a0a0b0;\n}\n\n[data-theme=\"dark\"] .mb-heatmap__day {\n  background: #3a3a50;\n}\n\n[data-theme=\"dark\"] .mb-timeline__list::before {\n  background: linear-gradient(to bottom, var(--user-accent-grad-end), #3a3a50);\n}\n\n[data-theme=\"dark\"] .mb-timeline__icon {\n  background: #242440;\n}\n\n[data-theme=\"dark\"] .mb-stats-chart__period button {\n  background: #3a3a50;\n  color: #a0a0b0;\n}\n\n[data-theme=\"dark\"] .mb-progress-ring__track {\n  stroke: #3a3a50;\n}\n\n[data-theme=\"dark\"] .mb-progress-ring__value {\n  color: #f1f1f1;\n}\n\n[data-theme=\"dark\"] .mb-skeleton {\n  background: linear-gradient(90deg, #3a3a50 25%, #4a4a60 50%, #3a3a50 75%);\n  background-size: 200% 100%;\n}\n\n[data-theme=\"dark\"] .mb-reading-stat__icon {\n  background: linear-gradient(135deg, #3a3a50 0%, #2a2a40 100%);\n}\n","path":null,"size_bytes":13275,"size_tokens":null},"mindspace-build/profile/profile-analytics.js":{"content":"// ==================== PROFILE ANALYTICS ====================\n\nconst ProfileAnalytics = (function() {\n  'use strict';\n\n  let currentUserId = null;\n\n  // --- Formatting Helpers ---\n  function formatTimeAgo(dateStr) {\n    const date = new Date(dateStr);\n    const now = new Date();\n    const seconds = Math.floor((now - date) / 1000);\n    \n    if (seconds < 60) return 'Just now';\n    if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;\n    if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;\n    if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;\n    return date.toLocaleDateString();\n  }\n\n  function formatDuration(seconds) {\n    if (seconds < 60) return `${seconds}s`;\n    if (seconds < 3600) return `${Math.floor(seconds / 60)}m`;\n    const hours = Math.floor(seconds / 3600);\n    const mins = Math.floor((seconds % 3600) / 60);\n    return `${hours}h ${mins}m`;\n  }\n\n  // --- Activity Icons & Descriptions ---\n  function getActionIcon(actionType) {\n    const icons = {\n      'page_view': 'eye-outline',\n      'article_read': 'book-outline',\n      'article_complete': 'checkmark-done-outline',\n      'resource_view': 'folder-open-outline',\n      'search': 'search-outline',\n      'share': 'share-social-outline',\n      'mood_entry': 'happy-outline',\n      'mood_checkin': 'happy-outline',\n      'goal_progress': 'flag-outline',\n      'goal_complete': 'trophy-outline',\n      'community_post': 'chatbubble-outline',\n      'community_comment': 'chatbox-outline',\n      'community_like': 'heart-outline',\n      'achievement_unlocked': 'trophy-outline',\n      'profile_update': 'person-outline',\n      'bookmark': 'bookmark-outline',\n      'like': 'heart-outline',\n      'follow': 'person-add-outline'\n    };\n    return icons[actionType] || 'ellipse-outline';\n  }\n\n  const HIDDEN_ACTIVITY_TYPES = ['page_view', 'page_exit'];\n\n  function getActionDescription(activity) {\n    const meta = activity.activity_data || activity.metadata || {};\n    const type = activity.activity_type || activity.action_type;\n    \n    const descriptions = {\n      'article_read': `Started reading <strong>${meta.article_title || 'an article'}</strong>`,\n      'article_complete': `Completed <strong>${meta.article_title || 'an article'}</strong>`,\n      'resource_view': `Viewed resource <strong>${meta.resource_title || 'a resource'}</strong>`,\n      'search': `Searched for \"<strong>${meta.query || ''}</strong>\"`,\n      'share': `Shared ${meta.content_type || 'content'} on ${meta.platform || 'social media'}`,\n      'mood_entry': `Logged mood: <strong>${meta.mood || 'recorded'}</strong>`,\n      'mood_checkin': `Mood check-in: <strong>${meta.mood || 'recorded'}</strong>`,\n      'goal_progress': `Made progress on a goal (${meta.progress || 0}%)`,\n      'goal_complete': `Completed a wellness goal`,\n      'community_post': `Created a new post in the community`,\n      'community_comment': `Left a comment on a discussion`,\n      'community_like': `Liked a post`,\n      'achievement_unlocked': `Achievement unlocked: <strong>${meta.badge_name || meta.achievement || 'New badge'}</strong>`,\n      'profile_update': `Updated profile`,\n      'bookmark': `Bookmarked an article`,\n      'like': `Liked a post`,\n      'follow': `Started following someone`\n    };\n    \n    return descriptions[type] || `${(type || 'activity').replace(/_/g, ' ')}`;\n  }\n\n  // ==================== CALENDAR HEATMAP ====================\n  async function renderCalendarHeatmap(container, userId) {\n    if (!container) return;\n    \n    container.innerHTML = `\n      <div class=\"mb-heatmap\">\n        <div class=\"mb-heatmap__header\">\n          <h3 class=\"mb-heatmap__title\">\n            <ion-icon name=\"calendar-outline\"></ion-icon>\n            Activity Calendar\n          </h3>\n          <div class=\"mb-heatmap__stats\">\n            <span><strong id=\"heatmapStreak\">0</strong> day streak</span>\n            <span><strong id=\"heatmapTotal\">0</strong> active days</span>\n          </div>\n        </div>\n        <div class=\"mb-heatmap__grid\" id=\"heatmapGrid\"></div>\n        <div class=\"mb-heatmap__legend\">\n          <span>Less</span>\n          <div class=\"mb-heatmap__legend-item\" style=\"background: #f0f0f5;\"></div>\n          <div class=\"mb-heatmap__legend-item\" style=\"background: var(--user-accent-soft);\"></div>\n          <div class=\"mb-heatmap__legend-item\" style=\"background: var(--user-accent-light);\"></div>\n          <div class=\"mb-heatmap__legend-item\" style=\"background: var(--user-accent-grad-end);\"></div>\n          <div class=\"mb-heatmap__legend-item\" style=\"background: var(--user-accent);\"></div>\n          <span>More</span>\n        </div>\n      </div>\n    `;\n\n    if (typeof MBAnalytics !== 'undefined') {\n      const streakData = await MBAnalytics.getStreakData(userId, 365);\n      if (streakData) {\n        document.getElementById('heatmapStreak').textContent = streakData.currentStreak;\n        document.getElementById('heatmapTotal').textContent = streakData.totalActiveDays;\n        \n        const grid = document.getElementById('heatmapGrid');\n        const activeDaysSet = new Set(streakData.activeDays);\n        const today = new Date();\n        \n        const activityStats = await MBAnalytics.getActivityStats(userId, 365);\n        const dailyCounts = activityStats?.dailyCounts || {};\n        \n        for (let week = 52; week >= 0; week--) {\n          for (let day = 0; day < 7; day++) {\n            const checkDate = new Date(today);\n            checkDate.setDate(checkDate.getDate() - (week * 7 + (6 - day)));\n            const dateKey = checkDate.toISOString().split('T')[0];\n            \n            const dayEl = document.createElement('div');\n            dayEl.className = 'mb-heatmap__day';\n            dayEl.title = `${dateKey}: ${dailyCounts[dateKey] || 0} activities`;\n            \n            const count = dailyCounts[dateKey] || 0;\n            if (count > 0) {\n              const level = count >= 10 ? 4 : count >= 5 ? 3 : count >= 2 ? 2 : 1;\n              dayEl.dataset.level = level;\n            }\n            \n            grid.appendChild(dayEl);\n          }\n        }\n      }\n    }\n  }\n\n  // ==================== ACTIVITY TIMELINE ====================\n  async function renderActivityTimeline(container, userId) {\n    if (!container) return;\n    \n    container.innerHTML = `\n      <div class=\"mb-timeline\">\n        <div class=\"mb-timeline__header\">\n          <h3 class=\"mb-timeline__title\">\n            <ion-icon name=\"time-outline\"></ion-icon>\n            Recent Activity\n          </h3>\n        </div>\n        <div class=\"mb-timeline__list\" id=\"timelineList\">\n          <div class=\"mb-skeleton mb-skeleton--text\" style=\"width: 80%;\"></div>\n          <div class=\"mb-skeleton mb-skeleton--text\" style=\"width: 60%;\"></div>\n          <div class=\"mb-skeleton mb-skeleton--text\" style=\"width: 70%;\"></div>\n        </div>\n      </div>\n    `;\n\n    const listEl = document.getElementById('timelineList');\n    \n    const showEmptyState = () => {\n      listEl.innerHTML = `\n        <div class=\"mb-empty-state\">\n          <ion-icon name=\"footsteps-outline\" class=\"mb-empty-state__icon\"></ion-icon>\n          <h4 class=\"mb-empty-state__title\">No Activity Yet</h4>\n          <p class=\"mb-empty-state__desc\">Start exploring articles, resources, and the community to see your activity here.</p>\n        </div>\n      `;\n    };\n\n    if (typeof MBAnalytics === 'undefined') {\n      showEmptyState();\n      return;\n    }\n\n    try {\n      const rawActivities = await MBAnalytics.getRecentActivity(userId, 30);\n      \n      if (!rawActivities || rawActivities.length === 0) {\n        showEmptyState();\n        return;\n      }\n\n      const activities = rawActivities.filter(a => {\n        const type = a.activity_type || a.action_type || '';\n        return !HIDDEN_ACTIVITY_TYPES.includes(type);\n      }).slice(0, 10);\n\n      if (activities.length === 0) {\n        showEmptyState();\n        return;\n      }\n      \n      listEl.innerHTML = activities.map(activity => {\n        const type = activity.activity_type || activity.action_type || '';\n        return `\n          <div class=\"mb-timeline__item\">\n            <div class=\"mb-timeline__icon\">\n              <ion-icon name=\"${getActionIcon(type)}\"></ion-icon>\n            </div>\n            <div class=\"mb-timeline__content\">\n              <div class=\"mb-timeline__action\">${getActionDescription(activity)}</div>\n              <div class=\"mb-timeline__time\">${formatTimeAgo(activity.created_at)}</div>\n            </div>\n          </div>\n        `;\n      }).join('');\n    } catch (err) {\n      console.warn('Activity timeline error:', err);\n      showEmptyState();\n    }\n  }\n\n  // ==================== READING STATS ====================\n  async function renderReadingStats(container, userId) {\n    if (!container) return;\n    \n    container.innerHTML = `\n      <div class=\"mb-reading-stats\">\n        <div class=\"mb-reading-stat\">\n          <div class=\"mb-reading-stat__icon\">\n            <ion-icon name=\"book-outline\"></ion-icon>\n          </div>\n          <div class=\"mb-reading-stat__value\" id=\"statArticlesStarted\">0</div>\n          <div class=\"mb-reading-stat__label\">Articles Started</div>\n        </div>\n        <div class=\"mb-reading-stat\">\n          <div class=\"mb-reading-stat__icon\">\n            <ion-icon name=\"checkmark-done-outline\"></ion-icon>\n          </div>\n          <div class=\"mb-reading-stat__value\" id=\"statArticlesCompleted\">0</div>\n          <div class=\"mb-reading-stat__label\">Completed</div>\n        </div>\n        <div class=\"mb-reading-stat\">\n          <div class=\"mb-reading-stat__icon\">\n            <ion-icon name=\"time-outline\"></ion-icon>\n          </div>\n          <div class=\"mb-reading-stat__value\" id=\"statReadingTime\">0m</div>\n          <div class=\"mb-reading-stat__label\">Reading Time</div>\n        </div>\n        <div class=\"mb-reading-stat\">\n          <div class=\"mb-reading-stat__icon\">\n            <ion-icon name=\"trending-up-outline\"></ion-icon>\n          </div>\n          <div class=\"mb-reading-stat__value\" id=\"statAvgProgress\">0%</div>\n          <div class=\"mb-reading-stat__label\">Avg Progress</div>\n        </div>\n      </div>\n    `;\n\n    if (typeof MBAnalytics !== 'undefined') {\n      const stats = await MBAnalytics.getReadingStats(userId);\n      if (stats) {\n        document.getElementById('statArticlesStarted').textContent = stats.articlesStarted;\n        document.getElementById('statArticlesCompleted').textContent = stats.articlesCompleted;\n        document.getElementById('statReadingTime').textContent = formatDuration(stats.totalReadingTime);\n        document.getElementById('statAvgProgress').textContent = stats.averageProgress + '%';\n      }\n    }\n  }\n\n  // ==================== ACTIVITY CHART ====================\n  async function renderActivityChart(container, userId) {\n    if (!container) return;\n    \n    container.innerHTML = `\n      <div class=\"mb-stats-chart\">\n        <div class=\"mb-stats-chart__header\">\n          <h3 class=\"mb-stats-chart__title\">Activity Trends</h3>\n          <div class=\"mb-stats-chart__period\">\n            <button class=\"active\" data-days=\"7\">Week</button>\n            <button data-days=\"30\">Month</button>\n          </div>\n        </div>\n        <div class=\"mb-stats-chart__bars\" id=\"activityBars\"></div>\n        <div class=\"mb-stats-chart__labels\" id=\"activityLabels\"></div>\n      </div>\n    `;\n\n    const periodButtons = container.querySelectorAll('.mb-stats-chart__period button');\n    periodButtons.forEach(btn => {\n      btn.addEventListener('click', async () => {\n        periodButtons.forEach(b => b.classList.remove('active'));\n        btn.classList.add('active');\n        await updateChart(parseInt(btn.dataset.days), userId);\n      });\n    });\n\n    await updateChart(7, userId);\n  }\n\n  async function updateChart(days, userId) {\n    if (typeof MBAnalytics === 'undefined') return;\n    \n    const stats = await MBAnalytics.getActivityStats(userId, days);\n    if (!stats) return;\n    \n    const barsContainer = document.getElementById('activityBars');\n    const labelsContainer = document.getElementById('activityLabels');\n    if (!barsContainer || !labelsContainer) return;\n    \n    const dailyCounts = stats.dailyCounts;\n    const dates = Object.keys(dailyCounts).sort();\n    const values = dates.map(d => dailyCounts[d]);\n    const maxVal = Math.max(...values, 1);\n    \n    barsContainer.innerHTML = dates.map((date, i) => {\n      const height = (values[i] / maxVal) * 100;\n      return `<div class=\"mb-stats-chart__bar\" style=\"height: ${Math.max(height, 4)}%;\" data-value=\"${values[i]}\"></div>`;\n    }).join('');\n    \n    if (days <= 7) {\n      const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n      labelsContainer.innerHTML = dates.map(d => {\n        const day = new Date(d).getDay();\n        return `<span>${dayNames[day]}</span>`;\n      }).join('');\n    } else {\n      labelsContainer.innerHTML = dates.map((d, i) => {\n        if (i % 5 === 0 || i === dates.length - 1) {\n          return `<span>${new Date(d).getDate()}</span>`;\n        }\n        return '<span></span>';\n      }).join('');\n    }\n  }\n\n  // ==================== ACHIEVEMENTS ====================\n  async function renderAchievements(container, userId) {\n    if (!container) return;\n    \n    container.innerHTML = `\n      <div class=\"mb-badges\" id=\"achievementsBadges\">\n        ${Array(8).fill(0).map(() => `\n          <div class=\"mb-badge\">\n            <div class=\"mb-skeleton mb-skeleton--circle\" style=\"width: 56px; height: 56px; margin-bottom: 12px;\"></div>\n            <div class=\"mb-skeleton mb-skeleton--text\" style=\"width: 70%;\"></div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n\n    if (typeof MBAnalytics !== 'undefined') {\n      const { earned, available } = await MBAnalytics.getAchievements(userId);\n      const badgesContainer = document.getElementById('achievementsBadges');\n      \n      const unlockedBadgesEl = document.getElementById('unlockedBadges');\n      const totalBadgesEl = document.getElementById('totalBadges');\n      if (unlockedBadgesEl) unlockedBadgesEl.textContent = earned.length;\n      if (totalBadgesEl) totalBadgesEl.textContent = earned.length + available.length;\n      \n      const allBadges = [\n        ...earned.map(a => ({ ...a, unlocked: true })),\n        ...available.map(a => ({ ...a, unlocked: false }))\n      ];\n      \n      badgesContainer.innerHTML = allBadges.map(badge => `\n        <div class=\"mb-badge ${badge.unlocked ? '' : 'mb-badge--locked'}\">\n          <div class=\"mb-badge__icon\">\n            <ion-icon name=\"${badge.icon || 'trophy-outline'}\"></ion-icon>\n          </div>\n          <div class=\"mb-badge__name\">${badge.name || 'Achievement'}</div>\n          <div class=\"mb-badge__desc\">${badge.description || ''}</div>\n          ${badge.unlocked ? `<div class=\"mb-badge__date\">Unlocked ${formatTimeAgo(badge.unlocked_at)}</div>` : ''}\n        </div>\n      `).join('');\n    }\n  }\n\n  // --- Progress Ring ---\n  function createProgressRing(percent, size = 80, strokeWidth = 8) {\n    const radius = (size - strokeWidth) / 2;\n    const circumference = radius * 2 * Math.PI;\n    const offset = circumference - (percent / 100) * circumference;\n    \n    return `\n      <div class=\"mb-progress-ring\" style=\"width: ${size}px; height: ${size}px;\">\n        <svg width=\"${size}\" height=\"${size}\">\n          <circle class=\"mb-progress-ring__track\" cx=\"${size/2}\" cy=\"${size/2}\" r=\"${radius}\" stroke-width=\"${strokeWidth}\"/>\n          <circle class=\"mb-progress-ring__progress\" cx=\"${size/2}\" cy=\"${size/2}\" r=\"${radius}\" stroke-width=\"${strokeWidth}\"\n            stroke-dasharray=\"${circumference}\" stroke-dashoffset=\"${offset}\"/>\n        </svg>\n        <span class=\"mb-progress-ring__value\">${percent}%</span>\n      </div>\n    `;\n  }\n\n  // --- Initialization ---\n  async function init(userId) {\n    if (!userId) return;\n    currentUserId = userId;\n\n    const heatmapContainer = document.getElementById('profileHeatmap');\n    const timelineContainer = document.getElementById('profileTimeline');\n    const readingStatsContainer = document.getElementById('profileReadingStats');\n    const activityChartContainer = document.getElementById('profileActivityChart');\n    const achievementsContainer = document.getElementById('profileAchievements');\n\n    await Promise.all([\n      renderCalendarHeatmap(heatmapContainer, userId),\n      renderActivityTimeline(timelineContainer, userId),\n      renderReadingStats(readingStatsContainer, userId),\n      renderActivityChart(activityChartContainer, userId),\n      renderAchievements(achievementsContainer, userId)\n    ]);\n  }\n\n  // --- Public API ---\n  return {\n    init,\n    renderCalendarHeatmap,\n    renderActivityTimeline,\n    renderReadingStats,\n    renderActivityChart,\n    renderAchievements,\n    createProgressRing\n  };\n})();\n","path":null,"size_bytes":16792,"size_tokens":null},"css/toast.css":{"content":"/* === TOAST CONTAINER === */\n#toast-container {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  z-index: 100000;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  pointer-events: none;\n  max-width: 400px;\n  width: calc(100% - 40px);\n}\n\n/* === TOAST BASE === */\n.toast {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 14px 18px;\n  border-radius: 12px;\n  background: #ffffff;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15), 0 2px 8px rgba(0, 0, 0, 0.1);\n  pointer-events: auto;\n  opacity: 0;\n  transform: translateX(100%);\n  transition: opacity 0.3s ease, transform 0.3s ease;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  line-height: 1.4;\n  border-left: 4px solid;\n}\n\n.toast-visible {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.toast-hiding {\n  opacity: 0;\n  transform: translateX(100%);\n}\n\n.toast-icon {\n  flex-shrink: 0;\n  font-size: 18px;\n}\n\n.toast-message {\n  flex: 1;\n  color: #333;\n  word-break: break-word;\n}\n\n.toast-close {\n  flex-shrink: 0;\n  background: none;\n  border: none;\n  padding: 4px;\n  cursor: pointer;\n  color: #888;\n  font-size: 14px;\n  transition: color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.toast-close:hover {\n  color: #333;\n}\n\n/* === TOAST VARIANTS === */\n.toast-success {\n  border-color: #10b981;\n}\n\n.toast-success .toast-icon {\n  color: #10b981;\n}\n\n.toast-error {\n  border-color: #ef4444;\n}\n\n.toast-error .toast-icon {\n  color: #ef4444;\n}\n\n.toast-warning {\n  border-color: #f59e0b;\n}\n\n.toast-warning .toast-icon {\n  color: #f59e0b;\n}\n\n.toast-info {\n  border-color: #3b82f6;\n}\n\n.toast-info .toast-icon {\n  color: #3b82f6;\n}\n\n/* === DARK MODE === */\n[data-theme=\"dark\"] .toast {\n  background: #2d2b3d;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .toast-message {\n  color: #e5e5e5;\n}\n\n[data-theme=\"dark\"] .toast-close {\n  color: #999;\n}\n\n[data-theme=\"dark\"] .toast-close:hover {\n  color: #fff;\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  .toast {\n    transition: opacity 0.15s ease;\n    transform: translateX(0);\n  }\n  \n  .toast-hiding {\n    transform: translateX(0);\n  }\n}\n\n/* === MOBILE RESPONSIVE === */\n@media (max-width: 480px) {\n  #toast-container {\n    top: auto;\n    bottom: 20px;\n    right: 10px;\n    left: 10px;\n    width: auto;\n    max-width: none;\n  }\n  \n  .toast {\n    transform: translateY(100%);\n  }\n  \n  .toast-visible {\n    transform: translateY(0);\n  }\n  \n  .toast-hiding {\n    transform: translateY(100%);\n  }\n}\n","path":null,"size_bytes":2525,"size_tokens":null},"js/translations.js":{"content":"// ==================== TRANSLATION SYSTEM ====================\n\n// --- Cache & Fallbacks ---\nconst translationCache = {};\n\nconst fallbackTranslations = {\n  nav_home: \"Home\",\n  nav_contact: \"Contact\",\n  nav_resources: \"Resource Library\",\n  nav_community: \"Community Hub\",\n  nav_blog: \"Blog\",\n  nav_signin: \"Sign In\",\n  nav_signout: \"Sign Out\",\n  settings_title: \"Settings\",\n  settings_preferences: \"Preferences\",\n  settings_dark_mode: \"Dark Mode\",\n  settings_font_size: \"Font Size\",\n  settings_language: \"Language\"\n};\n\nconst supportedLanguages = ['en', 'es', 'fr', 'zh', 'hi', 'ko'];\n\n// --- Language Detection ---\nfunction getCurrentLanguage() {\n  const stored = localStorage.getItem('mindbalance_language') || localStorage.getItem('mindbalance-language');\n  if (stored && supportedLanguages.includes(stored)) {\n    return stored;\n  }\n  return 'en';\n}\n\n// --- Load Translations ---\nasync function loadTranslations(lang) {\n  console.log('[Translations] Loading translations for:', lang);\n  if (translationCache[lang]) {\n    console.log('[Translations] Returning cached translations for:', lang);\n    return translationCache[lang];\n  }\n  \n  try {\n    console.log('[Translations] Fetching /i18n/' + lang + '.json...');\n    const response = await fetch(`/i18n/${lang}.json`);\n    if (!response.ok) {\n      throw new Error(`Failed to load ${lang}.json`);\n    }\n    const data = await response.json();\n    console.log('[Translations] Loaded', Object.keys(data).length, 'keys for', lang);\n    translationCache[lang] = data;\n    return data;\n  } catch (error) {\n    console.warn(`[Translations] Could not load translations for '${lang}':`, error);\n    if (lang !== 'en') {\n      return loadTranslations('en');\n    }\n    return fallbackTranslations;\n  }\n}\n\n// --- Apply Translations (Sync) ---\nfunction applyTranslationsSync(translations, container = document) {\n  console.log('[Translations] Applying translations to', container === document ? 'page' : 'container');\n  function containsHTML(text) {\n    return /<[a-z][\\s\\S]*>/i.test(text);\n  }\n  \n  const translateEls = container.querySelectorAll('[data-translate]');\n  console.log('[Translations] Found', translateEls.length, 'elements with data-translate');\n  let appliedCount = 0;\n  translateEls.forEach(el => {\n    const key = el.getAttribute('data-translate');\n    if (translations[key]) {\n      if (containsHTML(translations[key])) {\n        el.innerHTML = translations[key];\n      } else {\n        el.textContent = translations[key];\n      }\n      appliedCount++;\n    }\n  });\n  console.log('[Translations] Applied', appliedCount, 'translations');\n  \n  container.querySelectorAll('[data-translate-placeholder]').forEach(el => {\n    const key = el.getAttribute('data-translate-placeholder');\n    if (translations[key]) {\n      el.placeholder = translations[key];\n    }\n  });\n  \n  container.querySelectorAll('[data-translate-html]').forEach(el => {\n    const key = el.getAttribute('data-translate-html');\n    if (translations[key]) {\n      el.innerHTML = translations[key];\n    }\n  });\n}\n\n// --- Apply Translations (Async) ---\nasync function applyTranslations(langOrContainer) {\n  if (langOrContainer instanceof HTMLElement) {\n    const currentLang = getCurrentLanguage();\n    const translations = await loadTranslations(currentLang);\n    applyTranslationsSync(translations, langOrContainer);\n    return translations;\n  }\n  \n  const lang = langOrContainer || getCurrentLanguage();\n  const translations = await loadTranslations(lang);\n  applyTranslationsSync(translations);\n  return translations;\n}\n\n// --- Set Language ---\nasync function setLanguage(lang) {\n  console.log('[Translations] setLanguage called with:', lang);\n  if (!supportedLanguages.includes(lang)) {\n    console.warn(`Unsupported language: ${lang}`);\n    lang = 'en';\n  }\n  \n  localStorage.setItem('mindbalance_language', lang);\n  localStorage.setItem('mindbalance-language', lang);\n  document.documentElement.lang = lang;\n  console.log('[Translations] Set document lang to:', lang);\n  \n  document.querySelectorAll('[data-language-select]').forEach(select => {\n    select.value = lang;\n  });\n  \n  try {\n    await applyTranslations(lang);\n    console.log('[Translations] Successfully applied translations for:', lang);\n  } catch (error) {\n    console.error('[Translations] Error applying translations:', error);\n  }\n  \n  window.dispatchEvent(new CustomEvent('translations-ready', { \n    detail: { lang: lang, translations: translationCache[lang] } \n  }));\n}\n\n// --- Translation Getters ---\nasync function getTranslation(key, lang = null) {\n  const language = lang || getCurrentLanguage();\n  const translations = await loadTranslations(language);\n  return translations[key] || fallbackTranslations[key] || key;\n}\n\nfunction getTranslationSync(key, lang = null) {\n  const language = lang || getCurrentLanguage();\n  const translations = translationCache[language] || translationCache['en'] || fallbackTranslations;\n  return translations[key] || key;\n}\n\n// --- Event Delegation ---\ndocument.addEventListener('change', function(e) {\n  if (e.target && e.target.matches('[data-language-select]')) {\n    console.log('[Translations] Language changed to:', e.target.value);\n    setLanguage(e.target.value);\n  }\n});\n\n// --- Initialization ---\ndocument.addEventListener('DOMContentLoaded', async function() {\n  console.log('[Translations] Initializing translation system...');\n  const currentLang = getCurrentLanguage();\n  console.log('[Translations] Current language:', currentLang);\n  \n  const langSelects = document.querySelectorAll('[data-language-select]');\n  console.log('[Translations] Found', langSelects.length, 'language selectors');\n  langSelects.forEach(langSelect => {\n    langSelect.value = currentLang;\n  });\n  \n  document.documentElement.lang = currentLang;\n  await applyTranslations(currentLang);\n  console.log('[Translations] Initial translations applied');\n  \n  window.dispatchEvent(new CustomEvent('translations-ready', { \n    detail: { lang: currentLang, translations: translationCache[currentLang] } \n  }));\n});\n\n// --- Public API ---\nwindow.MindBalanceTranslations = {\n  setLanguage,\n  getCurrentLanguage,\n  applyTranslations,\n  getTranslation,\n  getTranslationSync,\n  loadTranslations,\n  supportedLanguages\n};\n\n// --- Legacy Compatibility ---\nwindow.translations = new Proxy({}, {\n  get: function(target, lang) {\n    return translationCache[lang] || {};\n  }\n});\n","path":null,"size_bytes":6385,"size_tokens":null},"js/quote-banner.js":{"content":"// ==================== QUOTE BANNER & WELLNESS TIP ====================\n\n(function() {\n  'use strict';\n\n  // --- Quotes Data ---\n  const quotes = [\n    { text: 'quote_1_text', author: 'quote_1_author' },\n    { text: 'quote_2_text', author: 'quote_2_author' },\n    { text: 'quote_3_text', author: 'quote_3_author' },\n    { text: 'quote_4_text', author: 'quote_4_author' },\n    { text: 'quote_5_text', author: 'quote_5_author' },\n    { text: 'quote_6_text', author: 'quote_6_author' },\n    { text: 'quote_7_text', author: 'quote_7_author' }\n  ];\n\n  const fallbackQuotes = {\n    quote_1_text: \"You don't have to control your thoughts. You just have to stop letting them control you.\",\n    quote_1_author: \"Dan Millman\",\n    quote_2_text: \"Mental health is not a destination, but a process. It's about how you drive, not where you're going.\",\n    quote_2_author: \"Noam Shpancer\",\n    quote_3_text: \"There is hope, even when your brain tells you there isn't.\",\n    quote_3_author: \"John Green\",\n    quote_4_text: \"Self-care is how you take your power back.\",\n    quote_4_author: \"Lalah Delia\",\n    quote_5_text: \"You are not your illness. You have an individual story to tell. You have a name, a history, a personality.\",\n    quote_5_author: \"Julian Seifter\",\n    quote_6_text: \"Healing takes time, and asking for help is a courageous step.\",\n    quote_6_author: \"Mariska Hargitay\",\n    quote_7_text: \"Be patient with yourself. Self-growth is tender; it's holy ground.\",\n    quote_7_author: \"Stephen Covey\"\n  };\n\n  // --- Wellness Tips Data ---\n  const wellnessTips = [\n    { title: 'tip_sunday_title', text: 'tip_sunday_text', icon: 'ðŸŒ…', link: '/articles/mindfulness.html' },\n    { title: 'tip_monday_title', text: 'tip_monday_text', icon: 'ðŸŽ¯', link: '/support/' },\n    { title: 'tip_tuesday_title', text: 'tip_tuesday_text', icon: 'ðŸ’¬', link: '/community/' },\n    { title: 'tip_wednesday_title', text: 'tip_wednesday_text', icon: 'ðŸŒ¿', link: '/articles/stress.html' },\n    { title: 'tip_thursday_title', text: 'tip_thursday_text', icon: 'ðŸ“', link: '/support/#tools' },\n    { title: 'tip_friday_title', text: 'tip_friday_text', icon: 'ðŸŽ‰', link: '/resourcelib/' },\n    { title: 'tip_saturday_title', text: 'tip_saturday_text', icon: 'ðŸ’¤', link: '/articles/sleep.html' }\n  ];\n\n  const fallbackTips = {\n    tip_sunday_title: \"Start Fresh\",\n    tip_sunday_text: \"Begin your week with intention. Take 5 minutes to set a simple wellness goal for the week ahead.\",\n    tip_monday_title: \"Mindful Monday\",\n    tip_monday_text: \"Try a 2-minute breathing exercise before starting work. Inhale for 4 counts, hold for 4, exhale for 6.\",\n    tip_tuesday_title: \"Connect Today\",\n    tip_tuesday_text: \"Reach out to someone you care about. A simple message can strengthen bonds and boost mood.\",\n    tip_wednesday_title: \"Midweek Reset\",\n    tip_wednesday_text: \"Take a short walk outside if possible. Even 10 minutes of movement can reduce stress significantly.\",\n    tip_thursday_title: \"Gratitude Practice\",\n    tip_thursday_text: \"Write down three things you're grateful for today. This simple habit rewires your brain for positivity.\",\n    tip_friday_title: \"Celebrate Wins\",\n    tip_friday_text: \"Acknowledge what you accomplished this week, no matter how small. Every step forward counts.\",\n    tip_saturday_title: \"Rest & Recharge\",\n    tip_saturday_text: \"Give yourself permission to rest today. Quality sleep is essential for mental wellness.\",\n    tip_day_label: \"Today's Wellness Tip\"\n  };\n\n  // --- State ---\n  let currentQuoteIndex = 0;\n  let autoRotateInterval = null;\n  let translations = {};\n\n  // --- Translation Helper ---\n  function t(key) {\n    return translations[key] || fallbackQuotes[key] || fallbackTips[key] || key;\n  }\n\n  // --- Quote Banner ---\n  function initQuoteBanner() {\n    const banner = document.querySelector('.quote-banner');\n    if (!banner) return;\n\n    const textEl = banner.querySelector('.quote-banner__text');\n    const authorEl = banner.querySelector('.quote-banner__author');\n    const dotsContainer = banner.querySelector('.quote-banner__controls');\n\n    if (!textEl || !authorEl || !dotsContainer) return;\n\n    dotsContainer.innerHTML = '';\n    quotes.forEach((_, index) => {\n      const dot = document.createElement('button');\n      dot.className = 'quote-banner__dot' + (index === 0 ? ' active' : '');\n      dot.setAttribute('aria-label', `Quote ${index + 1} of ${quotes.length}`);\n      dot.setAttribute('tabindex', '0');\n      dot.addEventListener('click', () => goToQuote(index));\n      dotsContainer.appendChild(dot);\n    });\n\n    displayQuote(0);\n\n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n    \n    if (!prefersReducedMotion) {\n      startAutoRotate();\n    }\n\n    banner.addEventListener('mouseenter', stopAutoRotate);\n    banner.addEventListener('mouseleave', () => {\n      if (!prefersReducedMotion) startAutoRotate();\n    });\n\n    banner.addEventListener('focusin', stopAutoRotate);\n    banner.addEventListener('focusout', (e) => {\n      if (!banner.contains(e.relatedTarget) && !prefersReducedMotion) {\n        startAutoRotate();\n      }\n    });\n  }\n\n  // --- Display Quote ---\n  function displayQuote(index) {\n    const banner = document.querySelector('.quote-banner');\n    if (!banner) return;\n\n    const textEl = banner.querySelector('.quote-banner__text');\n    const authorEl = banner.querySelector('.quote-banner__author');\n    const dots = banner.querySelectorAll('.quote-banner__dot');\n\n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n\n    if (prefersReducedMotion) {\n      textEl.textContent = t(quotes[index].text);\n      authorEl.textContent = 'â€” ' + t(quotes[index].author);\n    } else {\n      textEl.classList.add('fade-out');\n      authorEl.classList.add('fade-out');\n\n      setTimeout(() => {\n        textEl.textContent = t(quotes[index].text);\n        authorEl.textContent = 'â€” ' + t(quotes[index].author);\n        textEl.classList.remove('fade-out');\n        authorEl.classList.remove('fade-out');\n      }, 500);\n    }\n\n    dots.forEach((dot, i) => {\n      dot.classList.toggle('active', i === index);\n    });\n\n    currentQuoteIndex = index;\n  }\n\n  // --- Quote Navigation ---\n  function goToQuote(index) {\n    stopAutoRotate();\n    displayQuote(index);\n    \n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n    if (!prefersReducedMotion) {\n      setTimeout(startAutoRotate, 5000);\n    }\n  }\n\n  function nextQuote() {\n    const nextIndex = (currentQuoteIndex + 1) % quotes.length;\n    displayQuote(nextIndex);\n  }\n\n  // --- Auto-Rotation ---\n  function startAutoRotate() {\n    stopAutoRotate();\n    autoRotateInterval = setInterval(nextQuote, 12000);\n  }\n\n  function stopAutoRotate() {\n    if (autoRotateInterval) {\n      clearInterval(autoRotateInterval);\n      autoRotateInterval = null;\n    }\n  }\n\n  // --- Wellness Tip ---\n  function initWellnessTip() {\n    const tipSection = document.querySelector('.wellness-tip');\n    if (!tipSection) return;\n\n    const titleEl = tipSection.querySelector('.wellness-tip__title');\n    const textEl = tipSection.querySelector('.wellness-tip__text');\n    const iconEl = tipSection.querySelector('.wellness-tip__icon');\n    const actionEl = tipSection.querySelector('.wellness-tip__action');\n    const dayEl = tipSection.querySelector('.wellness-tip__day');\n\n    if (!titleEl || !textEl) return;\n\n    const today = new Date().getDay();\n    const tip = wellnessTips[today];\n\n    titleEl.textContent = t(tip.title);\n    textEl.textContent = t(tip.text);\n    \n    if (iconEl) {\n      iconEl.textContent = tip.icon;\n    }\n    \n    if (actionEl && tip.link) {\n      actionEl.href = tip.link;\n    }\n\n    if (dayEl) {\n      const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n      dayEl.textContent = days[today] + \"'s wellness focus\";\n    }\n  }\n\n  // --- Initialization ---\n  async function init() {\n    const lang = localStorage.getItem('mindbalance-language') || 'en';\n    \n    try {\n      const response = await fetch(`/i18n/${lang}.json`);\n      if (response.ok) {\n        translations = await response.json();\n      }\n    } catch (e) {\n      console.warn('Could not load translations for quote banner');\n    }\n\n    initQuoteBanner();\n    initWellnessTip();\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n\n  // --- Language Change Handler ---\n  window.addEventListener('languageChanged', async (e) => {\n    const lang = e.detail?.language || 'en';\n    try {\n      const response = await fetch(`/i18n/${lang}.json`);\n      if (response.ok) {\n        translations = await response.json();\n      }\n    } catch (err) {\n      console.warn('Could not reload translations');\n    }\n    \n    displayQuote(currentQuoteIndex);\n    initWellnessTip();\n  });\n\n})();\n","path":null,"size_bytes":8944,"size_tokens":null},"mindspace-build/css/settings-modal.css":{"content":"/* === MODAL OVERLAY === */\n.settings-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 9999;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease, visibility 0.3s ease;\n}\n\n.settings-modal-overlay.active {\n  opacity: 1;\n  visibility: visible;\n}\n\n/* === MODAL CONTAINER === */\n.settings-modal {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%) scale(0.95);\n  width: 95%;\n  max-width: 1000px;\n  height: 90vh;\n  max-height: 700px;\n  background: #fff;\n  border-radius: 24px;\n  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.25);\n  z-index: 10000;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  overflow: hidden;\n}\n\n.settings-modal-overlay.active .settings-modal {\n  opacity: 1;\n  visibility: visible;\n  transform: translate(-50%, -50%) scale(1);\n}\n\n[data-theme=\"dark\"] .settings-modal {\n  background: #1a1a2e;\n  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);\n}\n\n/* === SIDEBAR === */\n.settings-sidebar {\n  width: 240px;\n  background: linear-gradient(180deg, #d4ecff 0%, #f0ece5 100%);\n  border-right: 1px solid rgba(0, 0, 0, 0.08);\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n}\n\n[data-theme=\"dark\"] .settings-sidebar {\n  background: linear-gradient(180deg, #252542 0%, #1e1e35 100%);\n  border-right-color: rgba(255, 255, 255, 0.08);\n}\n\n.settings-sidebar-header {\n  padding: 24px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .settings-sidebar-header {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.settings-sidebar-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 20px;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n[data-theme=\"dark\"] .settings-sidebar-title {\n  color: #fff;\n}\n\n.settings-sidebar-title ion-icon {\n  font-size: 24px;\n  color: var(--user-accent);\n}\n\n/* === CATEGORY TABS === */\n.settings-categories {\n  flex: 1;\n  padding: 16px 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.settings-category-btn {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 14px 16px;\n  border: none;\n  background: transparent;\n  border-radius: 12px;\n  cursor: pointer;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  color: #555;\n  transition: all 0.2s ease;\n  text-align: left;\n  width: 100%;\n}\n\n.settings-category-btn:hover {\n  background: rgba(0, 0, 0, 0.05);\n  color: #1a1a2e;\n}\n\n.settings-category-btn.active {\n  background: var(--user-accent);\n  color: #fff;\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n[data-theme=\"dark\"] .settings-category-btn {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .settings-category-btn:hover {\n  background: rgba(255, 255, 255, 0.08);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .settings-category-btn.active {\n  background: var(--user-accent, #6DB3F2);\n  box-shadow: 0 4px 15px rgba(109, 179, 242, 0.3);\n}\n\n.settings-category-btn ion-icon {\n  font-size: 20px;\n  flex-shrink: 0;\n}\n\n/* === ACCESSIBILITY SCORE === */\n.settings-accessibility-score {\n  padding: 20px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  text-align: center;\n}\n\n[data-theme=\"dark\"] .settings-accessibility-score {\n  border-top-color: rgba(255, 255, 255, 0.08);\n}\n\n.accessibility-score-ring {\n  width: 80px;\n  height: 80px;\n  margin: 0 auto 12px;\n  position: relative;\n}\n\n.accessibility-score-ring svg {\n  transform: rotate(-90deg);\n}\n\n.accessibility-score-ring circle {\n  fill: none;\n  stroke-width: 6;\n}\n\n.accessibility-score-ring .bg-ring {\n  stroke: rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .accessibility-score-ring .bg-ring {\n  stroke: rgba(255, 255, 255, 0.1);\n}\n\n.accessibility-score-ring .progress-ring {\n  stroke: var(--user-accent);\n  stroke-linecap: round;\n  transition: stroke-dashoffset 0.5s ease;\n}\n\n.accessibility-score-value {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-family: 'Poppins', sans-serif;\n  font-size: 20px;\n  font-weight: 700;\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .accessibility-score-value {\n  color: #fff;\n}\n\n.accessibility-score-label {\n  font-family: 'Poppins', sans-serif;\n  font-size: 12px;\n  color: #777;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n[data-theme=\"dark\"] .accessibility-score-label {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n/* === MAIN CONTENT === */\n.settings-main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n/* === MAIN HEADER === */\n.settings-main-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px 24px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .settings-main-header {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.settings-main-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin: 0;\n}\n\n[data-theme=\"dark\"] .settings-main-title {\n  color: #fff;\n}\n\n.settings-header-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n/* === SYNC INDICATOR === */\n.settings-sync-indicator {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: rgba(77, 184, 150, 0.1);\n  border-radius: 20px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 12px;\n  color: #4db896;\n}\n\n.settings-sync-indicator.syncing {\n  background: rgba(74, 144, 217, 0.1);\n  color: #4a90d9;\n}\n\n.settings-sync-indicator.offline {\n  background: rgba(224, 112, 112, 0.1);\n  color: #e07070;\n}\n\n.settings-sync-indicator ion-icon {\n  font-size: 14px;\n}\n\n/* === COMPARE TOGGLE === */\n.settings-compare-toggle {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 12px;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 20px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 12px;\n  color: #555;\n  cursor: pointer;\n  border: none;\n  transition: all 0.2s ease;\n}\n\n.settings-compare-toggle:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.settings-compare-toggle.active {\n  background: var(--user-accent);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .settings-compare-toggle {\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .settings-compare-toggle:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n/* === CLOSE BUTTON === */\n.settings-close-btn {\n  width: 36px;\n  height: 36px;\n  border: none;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.settings-close-btn:hover {\n  background: rgba(0, 0, 0, 0.1);\n  transform: rotate(90deg);\n}\n\n.settings-close-btn ion-icon {\n  font-size: 20px;\n  color: #555;\n}\n\n[data-theme=\"dark\"] .settings-close-btn {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .settings-close-btn:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n[data-theme=\"dark\"] .settings-close-btn ion-icon {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n/* === CONTENT PANELS === */\n.settings-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px;\n}\n\n.settings-panel {\n  display: none;\n  animation: fadeIn 0.3s ease;\n}\n\n.settings-panel.active {\n  display: block;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n/* === SECTIONS === */\n.settings-section {\n  margin-bottom: 32px;\n}\n\n.settings-section-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 16px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n[data-theme=\"dark\"] .settings-section-title {\n  color: rgba(255, 255, 255, 0.9);\n}\n\n/* === THEME PRESETS === */\n.theme-presets-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));\n  gap: 12px;\n}\n\n.theme-preset-card {\n  position: relative;\n  padding: 16px;\n  border-radius: 16px;\n  border: 2px solid transparent;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  overflow: hidden;\n}\n\n.theme-preset-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n}\n\n.theme-preset-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n}\n\n.theme-preset-card.active {\n  border-color: var(--user-accent);\n}\n\n.theme-preset-card.active::after {\n  content: 'âœ“';\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  width: 20px;\n  height: 20px;\n  background: var(--user-accent);\n  color: #fff;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n}\n\n.theme-preset-default {\n  background: linear-gradient(135deg, #d4ecff 0%, #fff 100%);\n}\n.theme-preset-default::before {\n  background: linear-gradient(90deg, var(--user-accent) 0%, var(--user-accent-grad-end) 100%);\n}\n\n.theme-preset-ocean {\n  background: linear-gradient(135deg, #e8f4f8 0%, #fff 100%);\n}\n.theme-preset-ocean::before {\n  background: linear-gradient(90deg, #4a90d9 0%, #38b2ac 100%);\n}\n\n.theme-preset-sunset {\n  background: linear-gradient(135deg, #fef3e8 0%, #fff 100%);\n}\n.theme-preset-sunset::before {\n  background: linear-gradient(90deg, #e09c5c 0%, #e07070 100%);\n}\n\n.theme-preset-forest {\n  background: linear-gradient(135deg, #e8f5f0 0%, #fff 100%);\n}\n.theme-preset-forest::before {\n  background: linear-gradient(90deg, #4db896 0%, #38b2ac 100%);\n}\n\n.theme-preset-night {\n  background: linear-gradient(135deg, #2d2d4a 0%, #1a1a2e 100%);\n  color: #fff;\n}\n.theme-preset-night::before {\n  background: linear-gradient(90deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n}\n\n.theme-preset-contrast {\n  background: #000;\n  color: #fff;\n}\n.theme-preset-contrast::before {\n  background: #fff;\n}\n\n.theme-preset-name {\n  font-family: 'Poppins', sans-serif;\n  font-size: 13px;\n  font-weight: 600;\n  margin-bottom: 4px;\n}\n\n.theme-preset-desc {\n  font-size: 11px;\n  opacity: 0.7;\n}\n\n[data-theme=\"dark\"] .theme-preset-default,\n[data-theme=\"dark\"] .theme-preset-ocean,\n[data-theme=\"dark\"] .theme-preset-sunset,\n[data-theme=\"dark\"] .theme-preset-forest {\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .theme-preset-default .theme-preset-name,\n[data-theme=\"dark\"] .theme-preset-default .theme-preset-desc,\n[data-theme=\"dark\"] .theme-preset-ocean .theme-preset-name,\n[data-theme=\"dark\"] .theme-preset-ocean .theme-preset-desc,\n[data-theme=\"dark\"] .theme-preset-sunset .theme-preset-name,\n[data-theme=\"dark\"] .theme-preset-sunset .theme-preset-desc,\n[data-theme=\"dark\"] .theme-preset-forest .theme-preset-name,\n[data-theme=\"dark\"] .theme-preset-forest .theme-preset-desc {\n  color: #1a1a2e;\n}\n\n/* === SETTINGS ITEMS === */\n.settings-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px;\n  background: rgba(0, 0, 0, 0.02);\n  border-radius: 12px;\n  margin-bottom: 8px;\n  transition: all 0.2s ease;\n}\n\n.settings-item:hover {\n  background: rgba(0, 0, 0, 0.04);\n}\n\n[data-theme=\"dark\"] .settings-item {\n  background: rgba(255, 255, 255, 0.03);\n}\n\n[data-theme=\"dark\"] .settings-item:hover {\n  background: rgba(255, 255, 255, 0.06);\n}\n\n.settings-item-info {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n}\n\n.settings-item-icon {\n  width: 40px;\n  height: 40px;\n  background: var(--user-accent);\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 20px;\n}\n\n.settings-item-text h4 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin: 0 0 2px 0;\n}\n\n[data-theme=\"dark\"] .settings-item-text h4 {\n  color: #fff;\n}\n\n.settings-item-text p {\n  font-size: 12px;\n  color: #777;\n  margin: 0;\n}\n\n[data-theme=\"dark\"] .settings-item-text p {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n/* === TOGGLE SWITCH === */\n.settings-toggle {\n  position: relative;\n  width: 52px;\n  height: 28px;\n  flex-shrink: 0;\n}\n\n.settings-toggle input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.settings-toggle-slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #ccc;\n  border-radius: 28px;\n  transition: 0.3s;\n}\n\n.settings-toggle-slider::before {\n  position: absolute;\n  content: \"\";\n  height: 22px;\n  width: 22px;\n  left: 3px;\n  bottom: 3px;\n  background: #fff;\n  border-radius: 50%;\n  transition: 0.3s;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\n}\n\n.settings-toggle input:checked + .settings-toggle-slider {\n  background: var(--user-accent);\n}\n\n.settings-toggle input:checked + .settings-toggle-slider::before {\n  transform: translateX(24px);\n}\n\n/* === SELECT DROPDOWN === */\n.settings-select {\n  padding: 10px 36px 10px 14px;\n  border: 1px solid rgba(0, 0, 0, 0.12);\n  border-radius: 10px;\n  background: #fff url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23555' d='M6 8L1 3h10z'/%3E%3C/svg%3E\") no-repeat right 12px center;\n  color: #1a1a2e;\n  font-family: 'Poppins', sans-serif;\n  font-size: 13px;\n  cursor: pointer;\n  appearance: none;\n  min-width: 140px;\n  transition: all 0.2s ease;\n}\n\n.settings-select:hover {\n  border-color: var(--user-accent);\n}\n\n.settings-select:focus {\n  outline: none;\n  border-color: var(--user-accent);\n  box-shadow: 0 0 0 3px rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .settings-select {\n  background-color: #2a2a45;\n  border-color: rgba(255, 255, 255, 0.12);\n  color: #fff;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23fff' d='M6 8L1 3h10z'/%3E%3C/svg%3E\");\n}\n\n/* === ACCENT COLOR PICKER === */\n.accent-color-grid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.accent-color-option {\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  border: 3px solid transparent;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n}\n\n.accent-color-option:hover {\n  transform: scale(1.1);\n}\n\n.accent-color-option.active {\n  border-color: #1a1a2e;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .accent-color-option.active {\n  border-color: #fff;\n}\n\n.accent-color-option.active::after {\n  content: 'âœ“';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #fff;\n  font-size: 16px;\n  font-weight: bold;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n}\n\n/* === LIVE PREVIEW === */\n.settings-preview {\n  background: rgba(0, 0, 0, 0.03);\n  border-radius: 16px;\n  padding: 20px;\n  margin-top: 24px;\n}\n\n[data-theme=\"dark\"] .settings-preview {\n  background: rgba(255, 255, 255, 0.03);\n}\n\n.settings-preview-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 12px;\n  font-weight: 600;\n  color: #777;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-bottom: 16px;\n}\n\n[data-theme=\"dark\"] .settings-preview-title {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.settings-preview-frame {\n  background: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n  min-height: 150px;\n}\n\n[data-theme=\"dark\"] .settings-preview-frame {\n  background: #1a1a2e;\n}\n\n.preview-sample-text {\n  font-family: 'Poppins', sans-serif;\n  color: #1a1a2e;\n  margin-bottom: 12px;\n}\n\n[data-theme=\"dark\"] .preview-sample-text {\n  color: #fff;\n}\n\n.preview-sample-btn {\n  display: inline-block;\n  padding: 10px 20px;\n  background: var(--user-accent);\n  color: #fff;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n}\n\n/* === RESET BUTTON === */\n.settings-reset-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  width: 100%;\n  padding: 14px;\n  margin-top: 24px;\n  border: 1px dashed rgba(0, 0, 0, 0.2);\n  background: transparent;\n  border-radius: 12px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  color: #777;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.settings-reset-btn:hover {\n  border-color: #e07070;\n  color: #e07070;\n  background: rgba(224, 112, 112, 0.05);\n}\n\n[data-theme=\"dark\"] .settings-reset-btn {\n  border-color: rgba(255, 255, 255, 0.2);\n  color: rgba(255, 255, 255, 0.6);\n}\n\n[data-theme=\"dark\"] .settings-reset-btn:hover {\n  border-color: #e07070;\n  color: #e07070;\n}\n\n/* === ONBOARDING === */\n.settings-onboarding {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  z-index: 100;\n  display: none;\n  align-items: center;\n  justify-content: center;\n}\n\n.settings-onboarding.active {\n  display: flex;\n}\n\n.onboarding-card {\n  background: #fff;\n  border-radius: 20px;\n  padding: 32px;\n  max-width: 400px;\n  text-align: center;\n  animation: bounceIn 0.5s ease;\n}\n\n[data-theme=\"dark\"] .onboarding-card {\n  background: #252542;\n}\n\n@keyframes bounceIn {\n  0% { transform: scale(0.8); opacity: 0; }\n  50% { transform: scale(1.05); }\n  100% { transform: scale(1); opacity: 1; }\n}\n\n.onboarding-icon {\n  width: 80px;\n  height: 80px;\n  margin: 0 auto 20px;\n  background: var(--user-accent);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.onboarding-icon ion-icon {\n  font-size: 40px;\n  color: #fff;\n}\n\n.onboarding-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 22px;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin-bottom: 12px;\n}\n\n[data-theme=\"dark\"] .onboarding-title {\n  color: #fff;\n}\n\n.onboarding-text {\n  font-size: 14px;\n  color: #666;\n  line-height: 1.6;\n  margin-bottom: 24px;\n}\n\n[data-theme=\"dark\"] .onboarding-text {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.onboarding-btn {\n  padding: 12px 32px;\n  background: var(--user-accent);\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.onboarding-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.onboarding-skip {\n  display: block;\n  margin-top: 16px;\n  font-size: 13px;\n  color: #999;\n  background: none;\n  border: none;\n  cursor: pointer;\n}\n\n.onboarding-skip:hover {\n  color: #666;\n}\n\n/* === MOBILE RESPONSIVE === */\n@media (max-width: 768px) {\n  .settings-modal {\n    width: 100%;\n    height: 100%;\n    max-height: 100%;\n    border-radius: 0;\n  }\n  \n  .settings-sidebar {\n    display: none;\n  }\n  \n  .settings-main {\n    width: 100%;\n  }\n  \n  .settings-mobile-tabs {\n    display: flex;\n    gap: 8px;\n    padding: 12px 16px;\n    overflow-x: auto;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n  }\n  \n  .settings-mobile-tab {\n    flex-shrink: 0;\n    padding: 8px 16px;\n    background: rgba(0, 0, 0, 0.05);\n    border: none;\n    border-radius: 20px;\n    font-family: 'Poppins', sans-serif;\n    font-size: 13px;\n    font-weight: 500;\n    color: #555;\n    cursor: pointer;\n  }\n  \n  .settings-mobile-tab.active {\n    background: var(--user-accent);\n    color: #fff;\n  }\n}\n\n@media (min-width: 769px) {\n  .settings-mobile-tabs {\n    display: none;\n  }\n}\n","path":null,"size_bytes":18960,"size_tokens":null},"js/footer.js":{"content":"// ==================== FOOTER ====================\n\n// --- Initialization ---\ndocument.addEventListener('DOMContentLoaded', () => {\n  initBackToTop();\n  initNewsletterForm();\n  initFooterAccordion();\n  initFooterControls();\n});\n\n// --- Back To Top ---\nfunction initBackToTop() {\n  const backToTopBtn = document.getElementById('backToTop');\n  if (!backToTopBtn) return;\n\n  const showThreshold = 400;\n\n  window.addEventListener('scroll', () => {\n    if (window.scrollY > showThreshold) {\n      backToTopBtn.classList.add('visible');\n    } else {\n      backToTopBtn.classList.remove('visible');\n    }\n  }, { passive: true });\n\n  backToTopBtn.addEventListener('click', () => {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  });\n}\n\n// --- Newsletter API Base ---\nfunction getNewsletterApiBase() {\n  const host = window.location.hostname;\n  if (host === 'mindbalance.cloud' || host === 'www.mindbalance.cloud' ||\n      host === 'mindspace.site' || host === 'www.mindspace.site') {\n    return 'https://d519c840-a074-41fa-b89a-8627dded835a-00-f7kivyi5gpot.worf.replit.dev';\n  }\n  return '';\n}\n\n// --- Newsletter Form ---\nfunction initNewsletterForm() {\n  const form = document.getElementById('newsletterForm');\n  if (!form) return;\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    \n    const emailInput = form.querySelector('.mb-footer__newsletter-input');\n    const btn = form.querySelector('.mb-footer__newsletter-btn');\n    const email = emailInput.value.trim().toLowerCase();\n    \n    if (!email) return;\n\n    const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n    if (!emailPattern.test(email)) {\n      showToast('Please enter a valid email address.');\n      return;\n    }\n\n    const originalContent = btn.innerHTML;\n    btn.innerHTML = '<ion-icon name=\"hourglass-outline\"></ion-icon> Subscribing...';\n    btn.disabled = true;\n    \n    try {\n      const sb = typeof getSupabase === 'function' ? getSupabase() : null;\n      if (!sb) {\n        showToast('Service temporarily unavailable. Please try again later.');\n        return;\n      }\n\n      const { data: existing } = await sb\n        .from('newsletter_subscribers')\n        .select('email, is_active')\n        .eq('email', email)\n        .maybeSingle();\n\n      if (existing && existing.is_active) {\n        btn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon> Subscribed!';\n        btn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';\n        emailInput.value = '';\n        showToast('You are already subscribed to our newsletter!');\n      } else {\n        const { error } = await sb\n          .from('newsletter_subscribers')\n          .upsert({\n            email: email,\n            is_active: true,\n            subscribed_at: new Date().toISOString()\n          }, { onConflict: 'email' });\n\n        if (error) throw error;\n\n        const apiBase = getNewsletterApiBase();\n        try {\n          await fetch(apiBase + '/api/newsletter', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ email: email })\n          });\n        } catch (emailErr) {\n          console.warn('Welcome email request failed:', emailErr);\n        }\n\n        btn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon> Subscribed!';\n        btn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';\n        emailInput.value = '';\n        showToast('Thanks for subscribing! Welcome to our community.');\n      }\n    } catch (error) {\n      console.error('Newsletter subscription error:', error);\n      btn.innerHTML = '<ion-icon name=\"close-outline\"></ion-icon> Error';\n      btn.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';\n      showToast('Something went wrong. Please try again later.');\n    }\n\n    setTimeout(() => {\n      btn.innerHTML = originalContent;\n      btn.style.background = '';\n      btn.disabled = false;\n    }, 3000);\n  });\n}\n\n// --- Footer Accordion ---\nfunction initFooterAccordion() {\n  const accordionBtns = document.querySelectorAll('.mb-footer__accordion-btn');\n  \n  accordionBtns.forEach(btn => {\n    btn.addEventListener('click', () => {\n      const isExpanded = btn.getAttribute('aria-expanded') === 'true';\n      btn.setAttribute('aria-expanded', !isExpanded);\n    });\n  });\n}\n\n// --- Footer Controls ---\nfunction initFooterControls() {\n  const langSelect = document.getElementById('footerLangSelect');\n  const themeToggle = document.getElementById('footerThemeToggle');\n\n  if (langSelect) {\n    const savedLang = window.MindBalanceTranslations?.getCurrentLanguage?.() || \n                      localStorage.getItem('mindbalance-language') || 'en';\n    langSelect.value = savedLang;\n\n    langSelect.addEventListener('change', (e) => {\n      const lang = e.target.value;\n      \n      if (window.MindBalanceTranslations?.setLanguage) {\n        window.MindBalanceTranslations.setLanguage(lang);\n      } else {\n        localStorage.setItem('mindbalance-language', lang);\n        document.querySelectorAll('[data-language-select]').forEach(select => {\n          if (select !== langSelect) {\n            select.value = lang;\n          }\n        });\n      }\n    });\n  }\n\n  if (themeToggle) {\n    const savedTheme = localStorage.getItem('mindbalance_theme') || 'light';\n    const isDark = savedTheme === 'dark' || document.documentElement.getAttribute('data-theme') === 'dark';\n    themeToggle.checked = isDark;\n\n    themeToggle.addEventListener('change', (e) => {\n      const isDarkMode = e.target.checked;\n      const newTheme = isDarkMode ? 'dark' : 'light';\n      \n      localStorage.setItem('mindbalance_theme', newTheme);\n      \n      if (isDarkMode) {\n        document.documentElement.setAttribute('data-theme', 'dark');\n      } else {\n        document.documentElement.removeAttribute('data-theme');\n      }\n\n      document.querySelectorAll('[data-theme-toggle]').forEach(toggle => {\n        if (toggle !== themeToggle) {\n          toggle.checked = isDarkMode;\n        }\n      });\n    });\n  }\n\n  listenForHeaderChanges();\n}\n\n// --- Header Change Sync ---\nfunction listenForHeaderChanges() {\n  document.querySelectorAll('[data-theme-toggle]').forEach(toggle => {\n    if (toggle.id !== 'footerThemeToggle') {\n      toggle.addEventListener('change', function() {\n        const footerToggle = document.getElementById('footerThemeToggle');\n        if (footerToggle && footerToggle.checked !== this.checked) {\n          footerToggle.checked = this.checked;\n        }\n      });\n    }\n  });\n\n  document.querySelectorAll('[data-language-select]').forEach(select => {\n    if (select.id !== 'footerLangSelect') {\n      select.addEventListener('change', function() {\n        const footerSelect = document.getElementById('footerLangSelect');\n        if (footerSelect && footerSelect.value !== this.value) {\n          footerSelect.value = this.value;\n        }\n      });\n    }\n  });\n}\n\n// --- Toast ---\nfunction showToast(message) {\n  let toast = document.querySelector('.footer-toast');\n  \n  if (!toast) {\n    toast = document.createElement('div');\n    toast.className = 'footer-toast';\n    toast.style.cssText = `\n      position: fixed;\n      bottom: 100px;\n      left: 50%;\n      transform: translateX(-50%) translateY(20px);\n      background: linear-gradient(135deg, #10b981, #059669);\n      color: white;\n      padding: 14px 28px;\n      border-radius: 30px;\n      font-size: 14px;\n      font-weight: 600;\n      box-shadow: 0 8px 30px rgba(16, 185, 129, 0.4);\n      z-index: 9999;\n      opacity: 0;\n      transition: all 0.3s ease;\n    `;\n    document.body.appendChild(toast);\n  }\n\n  toast.textContent = message;\n  \n  requestAnimationFrame(() => {\n    toast.style.opacity = '1';\n    toast.style.transform = 'translateX(-50%) translateY(0)';\n  });\n\n  setTimeout(() => {\n    toast.style.opacity = '0';\n    toast.style.transform = 'translateX(-50%) translateY(20px)';\n  }, 3000);\n}\n","path":null,"size_bytes":7954,"size_tokens":null},"mindspace-build/api/tts/voices.py":{"content":"from http.server import BaseHTTPRequestHandler\nimport os\nimport json\n\nELEVENLABS_API_KEY = os.environ.get('ELEVENLABS_API_KEY')\n\nclass handler(BaseHTTPRequestHandler):\n    def do_GET(self):\n        voices = [\n            {'id': 'rachel', 'name': 'Rachel (Female, Calm)', 'language': 'en'},\n            {'id': 'adam', 'name': 'Adam (Male, Deep)', 'language': 'en'},\n            {'id': 'antoni', 'name': 'Antoni (Male, Warm)', 'language': 'en'},\n            {'id': 'arnold', 'name': 'Arnold (Male, Crisp)', 'language': 'en'},\n            {'id': 'domi', 'name': 'Domi (Female, Strong)', 'language': 'en'},\n            {'id': 'elli', 'name': 'Elli (Female, Young)', 'language': 'en'},\n            {'id': 'josh', 'name': 'Josh (Male, Warm)', 'language': 'en'},\n            {'id': 'sam', 'name': 'Sam (Male, Friendly)', 'language': 'en'},\n        ]\n        self.send_response(200)\n        self.send_header('Content-Type', 'application/json')\n        self.send_header('Access-Control-Allow-Origin', '*')\n        self.end_headers()\n        self.wfile.write(json.dumps({\n            'voices': voices,\n            'available': bool(ELEVENLABS_API_KEY)\n        }).encode())\n\n    def do_OPTIONS(self):\n        self.send_response(200)\n        self.send_header('Access-Control-Allow-Origin', '*')\n        self.send_header('Access-Control-Allow-Methods', 'GET, OPTIONS')\n        self.send_header('Access-Control-Allow-Headers', 'Content-Type')\n        self.end_headers()\n","path":null,"size_bytes":1456,"size_tokens":null},"css/animations.css":{"content":"/* === BASE ANIMATION STATES === */\n.animate-fade-in,\n.animate-slide-up,\n.animate-slide-left,\n.animate-slide-right,\n.animate-scale-in,\n.animate-blur-in {\n  opacity: 0;\n  transition: opacity 0.6s ease, transform 0.6s ease, filter 0.6s ease;\n}\n\n.animate-fade-in {\n  transform: translateY(0);\n}\n\n.animate-slide-up {\n  transform: translateY(40px);\n}\n\n.animate-slide-left {\n  transform: translateX(40px);\n}\n\n.animate-slide-right {\n  transform: translateX(-40px);\n}\n\n.animate-scale-in {\n  transform: scale(0.9);\n}\n\n.animate-blur-in {\n  filter: blur(10px);\n  transform: translateY(20px);\n}\n\n/* === VISIBLE STATES === */\n.animate-fade-in.is-visible,\n.animate-slide-up.is-visible,\n.animate-slide-left.is-visible,\n.animate-slide-right.is-visible,\n.animate-scale-in.is-visible,\n.animate-blur-in.is-visible {\n  opacity: 1;\n  transform: translateY(0) translateX(0) scale(1);\n  filter: blur(0);\n}\n\n/* === STAGGERED ANIMATIONS === */\n.animate-stagger > * {\n  opacity: 0;\n  transform: translateY(30px);\n  transition: opacity 0.5s ease, transform 0.5s ease;\n}\n\n.animate-stagger.is-visible > *:nth-child(1) { transition-delay: 0s; }\n.animate-stagger.is-visible > *:nth-child(2) { transition-delay: 0.1s; }\n.animate-stagger.is-visible > *:nth-child(3) { transition-delay: 0.2s; }\n.animate-stagger.is-visible > *:nth-child(4) { transition-delay: 0.3s; }\n.animate-stagger.is-visible > *:nth-child(5) { transition-delay: 0.4s; }\n.animate-stagger.is-visible > *:nth-child(6) { transition-delay: 0.5s; }\n.animate-stagger.is-visible > *:nth-child(7) { transition-delay: 0.6s; }\n.animate-stagger.is-visible > *:nth-child(8) { transition-delay: 0.7s; }\n.animate-stagger.is-visible > *:nth-child(9) { transition-delay: 0.8s; }\n.animate-stagger.is-visible > *:nth-child(10) { transition-delay: 0.9s; }\n.animate-stagger.is-visible > *:nth-child(11) { transition-delay: 1.0s; }\n.animate-stagger.is-visible > *:nth-child(12) { transition-delay: 1.1s; }\n\n.animate-stagger.is-visible > * {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n/* === KEYFRAME ANIMATIONS === */\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInLeft {\n  from {\n    opacity: 0;\n    transform: translateX(-30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes fadeInRight {\n  from {\n    opacity: 0;\n    transform: translateX(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes scaleIn {\n  from {\n    opacity: 0;\n    transform: scale(0.8);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n\n@keyframes floatSlow {\n  0%, 100% {\n    transform: translateY(0px) rotate(0deg);\n  }\n  50% {\n    transform: translateY(-6px) rotate(1deg);\n  }\n}\n\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.05);\n    opacity: 0.9;\n  }\n}\n\n@keyframes pulseGlow {\n  0%, 100% {\n    box-shadow: 0 4px 20px rgba(214, 189, 159, 0.3);\n  }\n  50% {\n    box-shadow: 0 8px 40px rgba(214, 189, 159, 0.5);\n  }\n}\n\n@keyframes shimmer {\n  0% {\n    background-position: -200% 0;\n  }\n  100% {\n    background-position: 200% 0;\n  }\n}\n\n@keyframes bounce {\n  0%, 20%, 50%, 80%, 100% {\n    transform: translateY(0);\n  }\n  40% {\n    transform: translateY(-15px);\n  }\n  60% {\n    transform: translateY(-7px);\n  }\n}\n\n@keyframes rotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes slideInFromTop {\n  from {\n    opacity: 0;\n    transform: translateY(-100%);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes ripple {\n  to {\n    transform: scale(4);\n    opacity: 0;\n  }\n}\n\n@keyframes borderGlow {\n  0%, 100% {\n    border-color: rgba(214, 189, 159, 0.3);\n  }\n  50% {\n    border-color: rgba(214, 189, 159, 0.8);\n  }\n}\n\n/* === HOVER ANIMATIONS === */\n.hover-lift {\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.hover-lift:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\n}\n\n.hover-scale {\n  transition: transform 0.3s ease;\n}\n\n.hover-scale:hover {\n  transform: scale(1.05);\n}\n\n.hover-glow {\n  transition: box-shadow 0.3s ease, transform 0.3s ease;\n}\n\n.hover-glow:hover {\n  box-shadow: 0 0 30px rgba(214, 189, 159, 0.4);\n  transform: translateY(-4px);\n}\n\n.hover-3d {\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  transform-style: preserve-3d;\n}\n\n.hover-3d:hover {\n  transform: perspective(1000px) rotateX(5deg) rotateY(-5deg) translateY(-5px);\n  box-shadow: 10px 20px 40px rgba(0, 0, 0, 0.15);\n}\n\n.hover-shine {\n  position: relative;\n  overflow: hidden;\n}\n\n.hover-shine::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 50%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);\n  transition: left 0.5s ease;\n}\n\n.hover-shine:hover::after {\n  left: 100%;\n}\n\n/* === CONTINUOUS ANIMATIONS === */\n.animate-float {\n  animation: float 3s ease-in-out infinite;\n}\n\n.animate-float-slow {\n  animation: floatSlow 4s ease-in-out infinite;\n}\n\n.animate-pulse {\n  animation: pulse 2s ease-in-out infinite;\n}\n\n.animate-pulse-glow {\n  animation: pulseGlow 2s ease-in-out infinite;\n}\n\n.animate-shimmer {\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite;\n}\n\n.animate-bounce {\n  animation: bounce 2s infinite;\n}\n\n.animate-rotate {\n  animation: rotate 10s linear infinite;\n}\n\n/* === PAGE LOAD ANIMATIONS === */\n.page-enter {\n  animation: fadeInUp 0.6s ease forwards;\n}\n\n.page-enter-delay-1 {\n  animation: fadeInUp 0.6s ease 0.1s forwards;\n  opacity: 0;\n}\n\n.page-enter-delay-2 {\n  animation: fadeInUp 0.6s ease 0.2s forwards;\n  opacity: 0;\n}\n\n.page-enter-delay-3 {\n  animation: fadeInUp 0.6s ease 0.3s forwards;\n  opacity: 0;\n}\n\n.page-enter-delay-4 {\n  animation: fadeInUp 0.6s ease 0.4s forwards;\n  opacity: 0;\n}\n\n/* === CARD ANIMATIONS === */\n.card-animated {\n  transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275),\n              box-shadow 0.4s ease,\n              border-color 0.3s ease;\n}\n\n.card-animated:hover {\n  transform: translateY(-10px) scale(1.02);\n  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);\n}\n\n[data-theme=\"dark\"] .card-animated:hover {\n  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);\n}\n\n/* === BUTTON ANIMATIONS === */\n.btn-animated {\n  position: relative;\n  overflow: hidden;\n  transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;\n}\n\n.btn-animated:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);\n}\n\n.btn-animated:active {\n  transform: translateY(-1px);\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);\n}\n\n.btn-ripple {\n  position: relative;\n  overflow: hidden;\n}\n\n.btn-ripple .ripple-effect {\n  position: absolute;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.4);\n  transform: scale(0);\n  animation: ripple 0.6s ease-out;\n  pointer-events: none;\n}\n\n/* === SECTION DECORATIONS === */\n.section-decorated {\n  position: relative;\n}\n\n.section-decorated::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 80px;\n  height: 4px;\n  background: linear-gradient(135deg, #d6bd9f 0%, #c4a67a 100%);\n  border-radius: 2px;\n}\n\n[data-theme=\"dark\"] .section-decorated::before {\n  background: linear-gradient(135deg, #d6bd9f 0%, #8b7355 100%);\n}\n\n/* === GRADIENT TEXT === */\n.gradient-text {\n  background: linear-gradient(135deg, #8b7355 0%, #d6bd9f 50%, #8b7355 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-size: 200% auto;\n}\n\n.gradient-text-animated {\n  background: linear-gradient(135deg, #8b7355 0%, #d6bd9f 50%, #8b7355 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-size: 200% auto;\n  animation: shimmer 3s linear infinite;\n}\n\n[data-theme=\"dark\"] .gradient-text,\n[data-theme=\"dark\"] .gradient-text-animated {\n  background: linear-gradient(135deg, #fff 0%, #d6bd9f 50%, #fff 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-size: 200% auto;\n}\n\n/* === QUOTE BLOCK === */\n.quote-block {\n  position: relative;\n  padding: 50px 60px;\n  margin: 60px auto;\n  max-width: 800px;\n  text-align: center;\n  background: linear-gradient(145deg, #f8f6f3 0%, #f0ebe4 50%, #e8e0d5 100%);\n  border-radius: 24px;\n  box-shadow: 0 20px 60px rgba(139, 115, 85, 0.12), \n              0 8px 25px rgba(0, 0, 0, 0.06),\n              inset 0 1px 0 rgba(255, 255, 255, 0.8);\n  overflow: hidden;\n  animation: floatSlow 5s ease-in-out infinite;\n}\n\n.quote-block::before,\n.quote-block::after {\n  position: absolute;\n  font-family: Georgia, 'Times New Roman', serif;\n  font-size: 10rem;\n  line-height: 1;\n  color: rgba(214, 189, 159, 0.15);\n  pointer-events: none;\n}\n\n.quote-block::before {\n  content: \"\\201C\";\n  top: -20px;\n  left: 30px;\n}\n\n.quote-block::after {\n  content: \"\\201D\";\n  bottom: -60px;\n  right: 30px;\n}\n\n.quote-block__icon {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 70px;\n  height: 70px;\n  margin-bottom: 25px;\n  background: linear-gradient(135deg, #d6bd9f 0%, #c4a67a 100%);\n  border-radius: 50%;\n  box-shadow: 0 10px 30px rgba(214, 189, 159, 0.35);\n  animation: pulse 3s ease-in-out infinite;\n}\n\n.quote-block__icon ion-icon {\n  font-size: 32px;\n  color: #fff;\n}\n\n.quote-block__text {\n  font-size: 1.6rem;\n  font-style: italic;\n  font-weight: 500;\n  color: #4a4a4a;\n  line-height: 1.8;\n  margin-bottom: 25px;\n  position: relative;\n  z-index: 1;\n}\n\n.quote-block__author {\n  display: inline-flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #8b7355;\n  position: relative;\n  z-index: 1;\n}\n\n.quote-block__author::before {\n  content: '';\n  width: 40px;\n  height: 2px;\n  background: linear-gradient(90deg, transparent, #d6bd9f);\n  border-radius: 1px;\n}\n\n.quote-block__author::after {\n  content: '';\n  width: 40px;\n  height: 2px;\n  background: linear-gradient(90deg, #d6bd9f, transparent);\n  border-radius: 1px;\n}\n\n.quote-block__decoration {\n  position: absolute;\n  width: 150px;\n  height: 150px;\n  border-radius: 50%;\n  background: radial-gradient(circle, rgba(214, 189, 159, 0.2) 0%, transparent 70%);\n  pointer-events: none;\n}\n\n.quote-block__decoration--1 {\n  top: -50px;\n  right: -50px;\n  animation: float 4s ease-in-out infinite;\n}\n\n.quote-block__decoration--2 {\n  bottom: -50px;\n  left: -50px;\n  animation: float 4s ease-in-out infinite 1s;\n}\n\n[data-theme=\"dark\"] .quote-block {\n  background: linear-gradient(145deg, #2a2a4a 0%, #252542 50%, #1f1f3a 100%);\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), \n              0 8px 25px rgba(0, 0, 0, 0.3),\n              inset 0 1px 0 rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .quote-block::before,\n[data-theme=\"dark\"] .quote-block::after {\n  color: rgba(214, 189, 159, 0.08);\n}\n\n[data-theme=\"dark\"] .quote-block__icon {\n  background: linear-gradient(135deg, #3d3a50 0%, #4d4a60 100%);\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);\n}\n\n[data-theme=\"dark\"] .quote-block__text {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .quote-block__author {\n  color: #d6bd9f;\n}\n\n[data-theme=\"dark\"] .quote-block__decoration {\n  background: radial-gradient(circle, rgba(214, 189, 159, 0.08) 0%, transparent 70%);\n}\n\n/* === RESPONSIVE === */\n@media (max-width: 768px) {\n  .quote-block {\n    padding: 35px 25px;\n    margin: 40px 15px;\n  }\n  \n  .quote-block::before,\n  .quote-block::after {\n    font-size: 6rem;\n  }\n  \n  .quote-block::before {\n    top: -10px;\n    left: 15px;\n  }\n  \n  .quote-block::after {\n    bottom: -40px;\n    right: 15px;\n  }\n  \n  .quote-block__icon {\n    width: 55px;\n    height: 55px;\n    margin-bottom: 20px;\n  }\n  \n  .quote-block__icon ion-icon {\n    font-size: 26px;\n  }\n  \n  .quote-block__text {\n    font-size: 1.25rem;\n    line-height: 1.7;\n  }\n  \n  .quote-block__author {\n    font-size: 1rem;\n  }\n  \n  .quote-block__author::before,\n  .quote-block__author::after {\n    width: 25px;\n  }\n}\n\n/* === WAVE DIVIDERS === */\n.wave-divider {\n  position: relative;\n  height: 80px;\n  overflow: hidden;\n}\n\n.wave-divider svg {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.wave-divider--top {\n  transform: rotate(180deg);\n}\n\n/* === SKELETON LOADING === */\n.skeleton {\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n  background-size: 200% 100%;\n  animation: shimmer 1.5s infinite;\n  border-radius: 8px;\n}\n\n[data-theme=\"dark\"] .skeleton {\n  background: linear-gradient(90deg, #2a2a4a 25%, #353550 50%, #2a2a4a 75%);\n  background-size: 200% 100%;\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  *,\n  *::before,\n  *::after {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n  }\n  \n  .animate-fade-in,\n  .animate-slide-up,\n  .animate-slide-left,\n  .animate-slide-right,\n  .animate-scale-in,\n  .animate-blur-in,\n  .animate-stagger > * {\n    opacity: 1;\n    transform: none;\n    filter: none;\n  }\n  \n  .animate-float,\n  .animate-float-slow,\n  .animate-pulse,\n  .animate-pulse-glow,\n  .animate-shimmer,\n  .animate-bounce,\n  .animate-rotate {\n    animation: none;\n  }\n  \n  .quote-block {\n    animation: none;\n  }\n  \n  .quote-block__icon {\n    animation: none;\n  }\n}\n","path":null,"size_bytes":13675,"size_tokens":null},"mindspace-build/css/quote-banner.css":{"content":"/* === QUOTE BANNER === */\n.quote-banner {\n  background: linear-gradient(135deg, #f8f5f0 0%, #ebe6df 100%);\n  padding: 60px 20px;\n  text-align: center;\n  position: relative;\n  overflow: hidden;\n}\n\n.quote-banner::before {\n  content: '\"';\n  position: absolute;\n  top: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 8rem;\n  font-family: Georgia, serif;\n  color: rgba(var(--user-accent-rgb), 0.15);\n  line-height: 1;\n  pointer-events: none;\n}\n\n.quote-banner__container {\n  max-width: 800px;\n  margin: 0 auto;\n  position: relative;\n  z-index: 1;\n}\n\n.quote-banner__content {\n  min-height: 120px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.quote-banner__text {\n  font-family: 'Poppins', sans-serif;\n  font-size: clamp(1.25rem, 3vw, 1.75rem);\n  font-weight: 500;\n  font-style: italic;\n  color: #2c2c2c;\n  line-height: 1.6;\n  margin-bottom: 16px;\n  opacity: 1;\n  transition: opacity 0.5s ease;\n}\n\n.quote-banner__text.fade-out {\n  opacity: 0;\n}\n\n.quote-banner__author {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--user-accent, #5BA4E6);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  opacity: 1;\n  transition: opacity 0.5s ease;\n}\n\n.quote-banner__author.fade-out {\n  opacity: 0;\n}\n\n.quote-banner__controls {\n  display: flex;\n  justify-content: center;\n  gap: 8px;\n  margin-top: 24px;\n}\n\n.quote-banner__dot {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: rgba(44, 44, 44, 0.2);\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  transition: background 0.3s ease, transform 0.3s ease;\n}\n\n.quote-banner__dot:hover {\n  background: rgba(44, 44, 44, 0.4);\n  transform: scale(1.2);\n}\n\n.quote-banner__dot.active {\n  background: var(--user-accent, #5BA4E6);\n  transform: scale(1.2);\n}\n\n.quote-banner__dot:focus-visible {\n  outline: 2px solid var(--user-accent, #5BA4E6);\n  outline-offset: 2px;\n}\n\n/* === QUOTE BANNER DARK MODE === */\n[data-theme=\"dark\"] .quote-banner {\n  background: linear-gradient(135deg, #1a1a2e 0%, #16162a 100%);\n}\n\n[data-theme=\"dark\"] .quote-banner::before {\n  color: rgba(109, 179, 242, 0.1);\n}\n\n[data-theme=\"dark\"] .quote-banner__text {\n  color: #e8e8e8;\n}\n\n[data-theme=\"dark\"] .quote-banner__author {\n  color: var(--user-accent, #6DB3F2);\n}\n\n[data-theme=\"dark\"] .quote-banner__dot {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n[data-theme=\"dark\"] .quote-banner__dot:hover {\n  background: rgba(255, 255, 255, 0.4);\n}\n\n[data-theme=\"dark\"] .quote-banner__dot.active {\n  background: var(--user-accent, #6DB3F2);\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .quote-banner__text,\n  .quote-banner__author {\n    transition: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .quote-banner {\n    padding: 40px 16px;\n  }\n  \n  .quote-banner::before {\n    font-size: 5rem;\n    top: 10px;\n  }\n  \n  .quote-banner__content {\n    min-height: 100px;\n  }\n}\n\n/* === WELLNESS TIP === */\n.wellness-tip {\n  background: #fff;\n  padding: 50px 20px;\n  text-align: center;\n}\n\n.wellness-tip__container {\n  max-width: 700px;\n  margin: 0 auto;\n}\n\n.wellness-tip__header {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.wellness-tip__icon {\n  width: 48px;\n  height: 48px;\n  background: linear-gradient(135deg, var(--user-accent, #5BA4E6) 0%, var(--user-accent-light) 100%);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n}\n\n.wellness-tip__label {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.875rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  color: var(--user-accent, #5BA4E6);\n}\n\n.wellness-tip__card {\n  background: linear-gradient(135deg, #f8f5f0 0%, #ebe6df 100%);\n  border-radius: 16px;\n  padding: 32px;\n  border: 1px solid rgba(var(--user-accent-rgb), 0.2);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n}\n\n.wellness-tip__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: clamp(1.25rem, 2.5vw, 1.5rem);\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 12px;\n}\n\n.wellness-tip__text {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  color: #555;\n  line-height: 1.7;\n  margin-bottom: 20px;\n}\n\n.wellness-tip__action {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background: var(--user-accent, #5BA4E6);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  text-decoration: none;\n  border-radius: 30px;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.wellness-tip__action:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.wellness-tip__action:focus-visible {\n  outline: 2px solid var(--user-accent, #5BA4E6);\n  outline-offset: 3px;\n}\n\n.wellness-tip__day {\n  margin-top: 16px;\n  font-size: 0.8rem;\n  color: #888;\n  font-style: italic;\n}\n\n/* === WELLNESS TIP DARK MODE === */\n[data-theme=\"dark\"] .wellness-tip {\n  background: #0f0f1a;\n}\n\n[data-theme=\"dark\"] .wellness-tip__icon {\n  background: linear-gradient(135deg, var(--user-accent, #6DB3F2) 0%, var(--user-accent-dark) 100%);\n}\n\n[data-theme=\"dark\"] .wellness-tip__label {\n  color: var(--user-accent, #6DB3F2);\n}\n\n[data-theme=\"dark\"] .wellness-tip__card {\n  background: linear-gradient(135deg, #1a1a2e 0%, #16162a 100%);\n  border-color: rgba(109, 179, 242, 0.2);\n}\n\n[data-theme=\"dark\"] .wellness-tip__title {\n  color: #e8e8e8;\n}\n\n[data-theme=\"dark\"] .wellness-tip__text {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .wellness-tip__action {\n  background: var(--user-accent, #6DB3F2);\n}\n\n[data-theme=\"dark\"] .wellness-tip__action:hover {\n  box-shadow: 0 4px 15px rgba(109, 179, 242, 0.3);\n}\n\n[data-theme=\"dark\"] .wellness-tip__day {\n  color: #777;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .wellness-tip__action {\n    transition: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .wellness-tip {\n    padding: 40px 16px;\n  }\n  \n  .wellness-tip__card {\n    padding: 24px 20px;\n  }\n  \n  .wellness-tip__icon {\n    width: 40px;\n    height: 40px;\n    font-size: 1.25rem;\n  }\n}\n","path":null,"size_bytes":6069,"size_tokens":null},"profile/profile-ai.js":{"content":"// ==================== AI WELLNESS INSIGHTS ====================\n\n(function() {\n  'use strict';\n  \n  // --- State ---\n  let insightsLoaded = false;\n  \n  // --- Fallback Messages ---\n  const FALLBACK_MESSAGES = [\n    { message: 'Keep tracking your wellness journey - every step counts!', affirmation: 'You are capable of amazing things.' },\n    { message: 'Your dedication to self-care makes a real difference.', affirmation: 'Every day is a chance to grow stronger.' },\n    { message: 'Small steps lead to big changes in your wellbeing.', affirmation: 'You have the strength to overcome any challenge.' },\n    { message: 'Taking time for yourself is never wasted time.', affirmation: 'Your mental health matters deeply.' },\n    { message: 'Progress, not perfection, is what truly matters.', affirmation: 'Be proud of how far you have come.' },\n    { message: 'Your commitment to wellness inspires positive change.', affirmation: 'You deserve all the happiness in the world.' },\n    { message: 'Checking in with yourself is a powerful habit.', affirmation: 'Today is full of new possibilities.' },\n    { message: 'Awareness is the first step toward positive growth.', affirmation: 'You are worthy of love and care.' }\n  ];\n  \n  function getRandomFallback() {\n    const index = Math.floor(Math.random() * FALLBACK_MESSAGES.length);\n    return FALLBACK_MESSAGES[index];\n  }\n  \n  // --- Sanitization ---\n  function sanitizeText(text) {\n    if (!text || typeof text !== 'string') return '';\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n  \n  // --- Load AI Insights ---\n  let retryCount = 0;\n  const MAX_RETRIES = 5;\n  \n  async function loadAIInsights() {\n    if (insightsLoaded) return;\n    \n    const contentEl = document.getElementById('aiInsightsContent');\n    const affirmationEl = document.getElementById('aiAffirmation');\n    \n    if (!contentEl) {\n      console.log('[AI Insights] Content element not found');\n      return;\n    }\n    \n    function showFallback(message, affirmation, isFinal = true) {\n      contentEl.innerHTML = '';\n      const p = document.createElement('p');\n      p.textContent = message;\n      contentEl.appendChild(p);\n      if (affirmationEl) {\n        affirmationEl.textContent = `\"${affirmation}\"`;\n        affirmationEl.style.display = 'block';\n      }\n      if (isFinal) {\n        insightsLoaded = true;\n      }\n    }\n    \n    if (!window.supabaseClient) {\n      retryCount++;\n      if (retryCount < MAX_RETRIES) {\n        console.log(`[AI Insights] Waiting for Supabase... (attempt ${retryCount}/${MAX_RETRIES})`);\n        setTimeout(loadAIInsights, 1000);\n        return;\n      }\n      console.log('[AI Insights] Supabase not available after retries');\n      const fallback = getRandomFallback();\n      showFallback(fallback.message, fallback.affirmation);\n      return;\n    }\n    \n    try {\n      const { data: { user } } = await window.supabaseClient.auth.getUser();\n      if (!user) {\n        showFallback('Sign in to see your personalized wellness insights.', 'Your journey to wellness starts here.');\n        return;\n      }\n      \n      const [moodResult, goalsResult, profileResult] = await Promise.all([\n        window.supabaseClient\n          .from('mood_logs')\n          .select('mood_level, note, created_at')\n          .eq('user_id', user.id)\n          .order('created_at', { ascending: false })\n          .limit(30),\n        window.supabaseClient\n          .from('wellness_goals')\n          .select('id, title, category, completed')\n          .eq('user_id', user.id),\n        window.supabaseClient\n          .from('profiles')\n          .select('current_streak, longest_streak')\n          .eq('id', user.id)\n          .single()\n      ]);\n      \n      const moodData = moodResult.data || [];\n      const goalsData = goalsResult.data || [];\n      const profile = profileResult.data || {};\n      \n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 15000);\n      \n      try {\n        const response = await fetch('/api/wellness/insights', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            mood_data: moodData,\n            goals_data: goalsData,\n            streak_data: {\n              current_streak: profile.current_streak || 0,\n              longest_streak: profile.longest_streak || 0\n            }\n          }),\n          signal: controller.signal\n        });\n        \n        clearTimeout(timeoutId);\n        \n        const result = await response.json();\n        \n        if (result.success !== false && result.insight) {\n          contentEl.innerHTML = '';\n          const p = document.createElement('p');\n          p.textContent = result.insight;\n          contentEl.appendChild(p);\n          \n          if (result.affirmation && affirmationEl) {\n            affirmationEl.textContent = `\"${result.affirmation}\"`;\n            affirmationEl.style.display = 'block';\n          }\n          insightsLoaded = true;\n          console.log('[AI Insights] Successfully loaded personalized insight');\n        } else {\n          console.log('[AI Insights] API returned no insight, using fallback. Response:', result);\n          const fallback = getRandomFallback();\n          showFallback(fallback.message, fallback.affirmation);\n        }\n      } catch (fetchErr) {\n        clearTimeout(timeoutId);\n        console.log('[AI Insights] API call failed:', fetchErr.message);\n        const fallback = getRandomFallback();\n        showFallback(fallback.message, fallback.affirmation);\n      }\n      \n    } catch (err) {\n      console.error('[AI Insights] Error:', err);\n      const fallback = getRandomFallback();\n      showFallback(fallback.message, fallback.affirmation);\n    }\n  }\n  \n  // --- Mood Analysis ---\n  async function loadMoodAnalysis() {\n    try {\n      const { data: { user } } = await window.supabaseClient.auth.getUser();\n      if (!user) return null;\n      \n      const { data: moodEntries } = await window.supabaseClient\n        .from('mood_logs')\n        .select('mood_level, note, created_at')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false })\n        .limit(30);\n      \n      const response = await fetch('/api/wellness/mood-analysis', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ mood_entries: moodEntries || [] })\n      });\n      \n      return await response.json();\n    } catch (err) {\n      console.error('Mood analysis error:', err);\n      return null;\n    }\n  }\n  \n  // --- Goal Suggestions ---\n  async function getGoalSuggestion() {\n    try {\n      const { data: { user } } = await window.supabaseClient.auth.getUser();\n      if (!user) return null;\n      \n      const { data: goals } = await window.supabaseClient\n        .from('wellness_goals')\n        .select('id, title, category, completed')\n        .eq('user_id', user.id);\n      \n      const currentGoals = (goals || []).filter(g => !g.completed);\n      const completedGoals = (goals || []).filter(g => g.completed);\n      \n      const response = await fetch('/api/wellness/goal-suggestion', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ \n          current_goals: currentGoals,\n          completed_goals: completedGoals\n        })\n      });\n      \n      return await response.json();\n    } catch (err) {\n      console.error('Goal suggestion error:', err);\n      return null;\n    }\n  }\n  \n  // --- Display Mood Analysis ---\n  async function displayMoodAnalysis() {\n    const moodTrendEl = document.getElementById('moodTrendValue');\n    if (!moodTrendEl) return;\n    \n    const result = await loadMoodAnalysis();\n    if (result && result.success !== false) {\n      if (result.analysis) {\n        moodTrendEl.textContent = result.analysis.split(' ')[0] || 'Stable';\n        moodTrendEl.title = result.analysis;\n      }\n      \n      if (result.suggestion) {\n        const suggestionEl = document.createElement('div');\n        suggestionEl.className = 'ai-mood-suggestion';\n        \n        const icon = document.createElement('ion-icon');\n        icon.setAttribute('name', 'bulb-outline');\n        \n        const span = document.createElement('span');\n        span.textContent = result.suggestion;\n        \n        suggestionEl.appendChild(icon);\n        suggestionEl.appendChild(span);\n        \n        const moodInsights = document.getElementById('moodInsights');\n        if (moodInsights && !moodInsights.querySelector('.ai-mood-suggestion')) {\n          moodInsights.appendChild(suggestionEl);\n        }\n      }\n    }\n  }\n  \n  // --- Display Goal Suggestion ---\n  async function displayGoalSuggestion() {\n    const goalsSection = document.querySelector('.mb-profile__wellness-section:has(.mb-profile__goals-list), .mb-profile__goals-section');\n    if (!goalsSection) return;\n    \n    if (goalsSection.querySelector('.ai-goal-suggestion')) return;\n    \n    const result = await getGoalSuggestion();\n    if (result && result.success !== false && result.goal) {\n      const suggestionEl = document.createElement('div');\n      suggestionEl.className = 'ai-goal-suggestion glass-card';\n      \n      const header = document.createElement('div');\n      header.className = 'ai-goal-suggestion__header';\n      const headerIcon = document.createElement('ion-icon');\n      headerIcon.setAttribute('name', 'sparkles');\n      const headerText = document.createElement('span');\n      headerText.textContent = 'AI Suggestion';\n      header.appendChild(headerIcon);\n      header.appendChild(headerText);\n      \n      const goalText = document.createElement('p');\n      goalText.className = 'ai-goal-suggestion__text';\n      goalText.textContent = result.goal;\n      \n      const reasonText = document.createElement('p');\n      reasonText.className = 'ai-goal-suggestion__reason';\n      reasonText.textContent = result.why || '';\n      \n      const addBtn = document.createElement('button');\n      addBtn.className = 'ai-goal-suggestion__add';\n      const btnIcon = document.createElement('ion-icon');\n      btnIcon.setAttribute('name', 'add-outline');\n      addBtn.appendChild(btnIcon);\n      addBtn.appendChild(document.createTextNode(' Add This Goal'));\n      \n      const goalData = {\n        title: result.goal,\n        category: result.category || 'mindfulness'\n      };\n      \n      addBtn.addEventListener('click', function() {\n        window.addSuggestedGoal(goalData.title, goalData.category);\n      });\n      \n      suggestionEl.appendChild(header);\n      suggestionEl.appendChild(goalText);\n      suggestionEl.appendChild(reasonText);\n      suggestionEl.appendChild(addBtn);\n      \n      const sectionHeader = goalsSection.querySelector('h3');\n      if (sectionHeader && sectionHeader.nextSibling) {\n        sectionHeader.parentNode.insertBefore(suggestionEl, sectionHeader.nextSibling);\n      } else {\n        goalsSection.appendChild(suggestionEl);\n      }\n    }\n  }\n  \n  // --- Initialization ---\n  function initAIInsights() {\n    const wellnessTab = document.querySelector('[data-tab=\"wellness\"]');\n    if (wellnessTab) {\n      wellnessTab.addEventListener('click', () => {\n        setTimeout(() => {\n          loadAIInsights();\n          displayMoodAnalysis();\n          displayGoalSuggestion();\n        }, 300);\n      });\n    }\n    \n    const wellnessPanel = document.getElementById('wellnessPanel');\n    if (wellnessPanel && wellnessPanel.classList.contains('is-active')) {\n      setTimeout(() => {\n        loadAIInsights();\n        displayMoodAnalysis();\n        displayGoalSuggestion();\n      }, 500);\n    }\n    \n    window.addEventListener('profileLoaded', () => {\n      const wellnessPanel = document.getElementById('wellnessPanel');\n      if (wellnessPanel && wellnessPanel.classList.contains('is-active')) {\n        loadAIInsights();\n        displayMoodAnalysis();\n        displayGoalSuggestion();\n      }\n    });\n  }\n  \n  // --- Add Suggested Goal ---\n  window.addSuggestedGoal = async function(title, category) {\n    if (!window.supabaseClient) return;\n    \n    try {\n      const { data: { user } } = await window.supabaseClient.auth.getUser();\n      if (!user) return;\n      \n      await window.supabaseClient\n        .from('wellness_goals')\n        .insert({\n          user_id: user.id,\n          title: title,\n          category: category,\n          completed: false\n        });\n      \n      const suggestionEl = document.querySelector('.ai-goal-suggestion');\n      if (suggestionEl) {\n        suggestionEl.remove();\n      }\n      \n      if (typeof window.loadWellnessGoals === 'function') {\n        window.loadWellnessGoals();\n      }\n      \n      if (window.ImmersiveProfile?.triggerHaptic) {\n        window.ImmersiveProfile.triggerHaptic('medium');\n      }\n    } catch (err) {\n      console.error('Failed to add goal:', err);\n    }\n  };\n\n  // --- Public API ---\n  window.AIWellness = {\n    loadInsights: loadAIInsights,\n    getMoodAnalysis: loadMoodAnalysis,\n    getGoalSuggestion: getGoalSuggestion\n  };\n  \n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initAIInsights);\n  } else {\n    initAIInsights();\n  }\n})();\n","path":null,"size_bytes":13267,"size_tokens":null},"scripts/extract_translations.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nExtract translations from js/translations.js and convert to CSV format.\nThis is a one-time migration script.\n\"\"\"\n\nimport re\nimport csv\nimport json\n\ndef extract_translations_from_js(js_file_path):\n    \"\"\"Parse the translations.js file and extract all translation objects.\"\"\"\n    with open(js_file_path, 'r', encoding='utf-8') as f:\n        content = f.read()\n    \n    # Find the translations object\n    # Match pattern: lang_code: { ... }\n    languages = ['en', 'es', 'fr', 'zh', 'hi', 'ko']\n    translations = {}\n    \n    for lang in languages:\n        # Find the language block\n        pattern = rf'^\\s*{lang}:\\s*\\{{'\n        matches = list(re.finditer(pattern, content, re.MULTILINE))\n        \n        if not matches:\n            print(f\"Warning: Could not find language block for '{lang}'\")\n            continue\n        \n        start_pos = matches[0].end() - 1  # Start at the opening brace\n        \n        # Find matching closing brace\n        brace_count = 0\n        end_pos = start_pos\n        for i, char in enumerate(content[start_pos:]):\n            if char == '{':\n                brace_count += 1\n            elif char == '}':\n                brace_count -= 1\n                if brace_count == 0:\n                    end_pos = start_pos + i + 1\n                    break\n        \n        lang_block = content[start_pos:end_pos]\n        \n        # Parse key-value pairs\n        translations[lang] = {}\n        \n        # Match: key: \"value\" or key: 'value'\n        kv_pattern = r'^\\s*([a-zA-Z_][a-zA-Z0-9_]*)\\s*:\\s*([\"\\'])((?:(?!\\2)[^\\\\]|\\\\.)*)\\2'\n        \n        for match in re.finditer(kv_pattern, lang_block, re.MULTILINE):\n            key = match.group(1)\n            value = match.group(3)\n            # Unescape quotes\n            value = value.replace(\"\\\\'\", \"'\").replace('\\\\\"', '\"')\n            translations[lang][key] = value\n        \n        print(f\"Extracted {len(translations[lang])} keys for '{lang}'\")\n    \n    return translations\n\ndef create_csv(translations, output_path):\n    \"\"\"Create CSV file with all translations.\"\"\"\n    languages = ['en', 'es', 'fr', 'zh', 'hi', 'ko']\n    \n    # Get all unique keys from all languages\n    all_keys = set()\n    for lang in languages:\n        if lang in translations:\n            all_keys.update(translations[lang].keys())\n    \n    # Sort keys for consistent ordering\n    all_keys = sorted(all_keys)\n    \n    print(f\"Total unique keys: {len(all_keys)}\")\n    \n    # Write CSV\n    with open(output_path, 'w', encoding='utf-8', newline='') as f:\n        writer = csv.writer(f)\n        \n        # Header row\n        writer.writerow(['key'] + languages)\n        \n        # Data rows\n        for key in all_keys:\n            row = [key]\n            for lang in languages:\n                value = translations.get(lang, {}).get(key, '')\n                row.append(value)\n            writer.writerow(row)\n    \n    print(f\"CSV written to {output_path}\")\n\ndef create_json_files(translations, output_dir):\n    \"\"\"Create individual JSON files per language.\"\"\"\n    import os\n    os.makedirs(output_dir, exist_ok=True)\n    \n    for lang, data in translations.items():\n        output_path = os.path.join(output_dir, f'{lang}.json')\n        with open(output_path, 'w', encoding='utf-8') as f:\n            json.dump(data, f, ensure_ascii=False, indent=2)\n        print(f\"JSON written to {output_path}\")\n\nif __name__ == '__main__':\n    js_file = 'js/translations.js'\n    csv_output = 'translations.csv'\n    json_output_dir = 'i18n'\n    \n    print(\"Extracting translations from JS...\")\n    translations = extract_translations_from_js(js_file)\n    \n    print(\"\\nCreating CSV master file...\")\n    create_csv(translations, csv_output)\n    \n    print(\"\\nCreating JSON files...\")\n    create_json_files(translations, json_output_dir)\n    \n    print(\"\\nDone!\")\n","path":null,"size_bytes":3830,"size_tokens":null},"mindspace-build/css/support.css":{"content":"/* === SUPPORT MAIN === */\n.support-main {\n  padding-top: 100px;\n}\n\n/* === SCROLL ANIMATIONS === */\n.animate-section {\n  opacity: 0;\n  transform: translateY(40px);\n  transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), \n              transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.animate-section.is-visible {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.animate-stagger > * {\n  opacity: 0;\n  transform: translateY(30px);\n  transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1),\n              transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.animate-stagger.is-visible > *:nth-child(1) { transition-delay: 0.1s; }\n.animate-stagger.is-visible > *:nth-child(2) { transition-delay: 0.2s; }\n.animate-stagger.is-visible > *:nth-child(3) { transition-delay: 0.3s; }\n.animate-stagger.is-visible > *:nth-child(4) { transition-delay: 0.4s; }\n.animate-stagger.is-visible > *:nth-child(5) { transition-delay: 0.5s; }\n.animate-stagger.is-visible > *:nth-child(6) { transition-delay: 0.6s; }\n.animate-stagger.is-visible > *:nth-child(7) { transition-delay: 0.7s; }\n.animate-stagger.is-visible > *:nth-child(8) { transition-delay: 0.8s; }\n.animate-stagger.is-visible > *:nth-child(9) { transition-delay: 0.9s; }\n.animate-stagger.is-visible > *:nth-child(10) { transition-delay: 1.0s; }\n\n.animate-stagger.is-visible > * {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.animate-slide-left {\n  opacity: 0;\n  transform: translateX(-50px);\n  transition: opacity 0.7s cubic-bezier(0.4, 0, 0.2, 1),\n              transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.animate-slide-left.is-visible {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.animate-slide-right {\n  opacity: 0;\n  transform: translateX(50px);\n  transition: opacity 0.7s cubic-bezier(0.4, 0, 0.2, 1),\n              transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.animate-slide-right.is-visible {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.animate-scale {\n  opacity: 0;\n  transform: scale(0.9);\n  transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1),\n              transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.animate-scale.is-visible {\n  opacity: 1;\n  transform: scale(1);\n}\n\n/* === HERO SECTION === */\n.support-hero {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.04) 0%, rgba(var(--user-accent-rgb), 0.08) 50%, rgba(var(--user-accent-rgb), 0.06) 100%);\n  padding: 100px 20px 80px;\n  text-align: center;\n  position: relative;\n  overflow: hidden;\n}\n\n.support-hero::before {\n  content: \"\";\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background: radial-gradient(circle at 30% 70%, rgba(var(--user-accent-rgb), 0.15) 0%, transparent 50%),\n              radial-gradient(circle at 70% 30%, rgba(var(--user-accent-rgb), 0.1) 0%, transparent 50%),\n              radial-gradient(circle at 50% 50%, rgba(var(--user-accent-rgb), 0.06) 0%, transparent 60%);\n  pointer-events: none;\n  animation: hero-gradient-pulse 8s ease-in-out infinite alternate;\n}\n\n.support-hero::after {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: \n    radial-gradient(ellipse 600px 300px at 20% 80%, rgba(var(--user-accent-rgb), 0.12) 0%, transparent 70%),\n    radial-gradient(ellipse 500px 400px at 80% 20%, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 70%);\n  pointer-events: none;\n}\n\n@keyframes hero-gradient-pulse {\n  0% { opacity: 0.8; transform: scale(1) rotate(0deg); }\n  100% { opacity: 1; transform: scale(1.05) rotate(2deg); }\n}\n\n.support-hero__decorative {\n  position: absolute;\n  pointer-events: none;\n  z-index: 0;\n}\n\n.support-hero__decorative--1 {\n  top: 15%;\n  left: 10%;\n  width: 80px;\n  height: 80px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, transparent 70%);\n  border-radius: 50%;\n  animation: float-element 6s ease-in-out infinite;\n}\n\n.support-hero__decorative--2 {\n  bottom: 20%;\n  right: 15%;\n  width: 60px;\n  height: 60px;\n  background: linear-gradient(45deg, rgba(var(--user-accent-rgb), 0.12) 0%, transparent 70%);\n  border-radius: 50%;\n  animation: float-element 8s ease-in-out infinite reverse;\n}\n\n.support-hero__decorative--3 {\n  top: 40%;\n  right: 8%;\n  width: 40px;\n  height: 40px;\n  background: linear-gradient(180deg, rgba(var(--user-accent-rgb), 0.12) 0%, transparent 70%);\n  border-radius: 50%;\n  animation: float-element 5s ease-in-out infinite 1s;\n}\n\n@keyframes float-element {\n  0%, 100% { transform: translateY(0) rotate(0deg); }\n  50% { transform: translateY(-15px) rotate(5deg); }\n}\n\n.support-hero__content {\n  max-width: 700px;\n  margin: 0 auto;\n  position: relative;\n  z-index: 1;\n}\n\n.support-hero__badge {\n  display: inline-block;\n  padding: 8px 20px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, rgba(var(--user-accent-rgb), 0.1) 100%);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.3);\n  border-radius: 50px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent-dark);\n  letter-spacing: 0.5px;\n  text-transform: uppercase;\n  margin-bottom: 20px;\n  opacity: 0;\n  transform: translateY(20px);\n  animation: support-hero-fadein 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.support-hero__title {\n  font-size: 3.2rem;\n  font-weight: 800;\n  color: #2d2d2d;\n  margin-bottom: 20px;\n  line-height: 1.15;\n  letter-spacing: -0.5px;\n  background: linear-gradient(135deg, #2d2d2d 0%, #4a4a4a 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  opacity: 0;\n  transform: translateY(20px);\n  animation: support-hero-fadein 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.1s forwards;\n}\n\n.support-hero__subtitle {\n  font-size: 1.25rem;\n  color: #666;\n  margin-bottom: 36px;\n  line-height: 1.7;\n  max-width: 550px;\n  margin-left: auto;\n  margin-right: auto;\n  opacity: 0;\n  transform: translateY(20px);\n  animation: support-hero-fadein 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.2s forwards;\n}\n\n@keyframes support-hero-fadein {\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.support-hero__search {\n  position: relative;\n  max-width: 500px;\n  margin: 0 auto;\n  opacity: 0;\n  transform: translateY(20px);\n  animation: support-hero-fadein 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.3s forwards;\n}\n\n.support-hero__search .search-icon {\n  position: absolute;\n  left: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 1.3rem;\n  color: #888;\n  transition: color 0.3s ease;\n}\n\n.support-hero__input:focus ~ .search-icon,\n.support-hero__search:focus-within .search-icon {\n  color: var(--user-accent-light);\n}\n\n.support-hero__input {\n  width: 100%;\n  padding: 18px 20px 18px 54px;\n  border: 2px solid #ddd;\n  border-radius: 50px;\n  font-size: 1rem;\n  background: #fff;\n  transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, transform 0.3s ease;\n}\n\n.support-hero__input:hover {\n  border-color: #ccc;\n}\n\n.support-hero__input:focus {\n  outline: none;\n  border-color: var(--user-accent);\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb), 0.15), 0 8px 30px rgba(var(--user-accent-rgb), 0.25);\n  background-color: rgba(var(--user-accent-rgb), 0.03);\n  transform: scale(1.01);\n}\n\n.support-hero__input::placeholder {\n  color: #999;\n  transition: color 0.3s ease;\n}\n\n.support-hero__input:focus::placeholder {\n  color: #bbb;\n}\n\n/* === CRISIS SECTION === */\n.crisis-section {\n  background: #fff;\n  padding: 60px 20px;\n}\n\n.crisis-banner {\n  display: flex;\n  align-items: center;\n  gap: 24px;\n  background: linear-gradient(135deg, #fff5f5 0%, #fff 100%);\n  border: 2px solid #e57373;\n  border-radius: 16px;\n  padding: 30px;\n  margin-bottom: 40px;\n  flex-wrap: wrap;\n}\n\n.crisis-banner__icon {\n  width: 60px;\n  height: 60px;\n  background: #e57373;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.crisis-banner__icon ion-icon {\n  font-size: 28px;\n  color: #fff;\n}\n\n.crisis-banner__content {\n  flex: 1;\n  min-width: 200px;\n}\n\n.crisis-banner__title {\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #c62828;\n  margin-bottom: 6px;\n}\n\n.crisis-banner__text {\n  color: #555;\n  font-size: 1rem;\n}\n\n.crisis-banner__actions {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.crisis-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 14px 28px;\n  border-radius: 50px;\n  font-weight: 600;\n  font-size: 1rem;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  text-decoration: none;\n  position: relative;\n  overflow: hidden;\n}\n\n.crisis-btn ion-icon {\n  transition: transform 0.3s ease;\n}\n\n.crisis-btn:hover ion-icon {\n  transform: scale(1.1);\n}\n\n.crisis-btn--primary {\n  background: linear-gradient(135deg, #c62828 0%, #d32f2f 100%);\n  color: #fff;\n  box-shadow: 0 4px 15px rgba(198, 40, 40, 0.25);\n  animation: crisis-pulse 2s ease-in-out infinite;\n}\n\n@keyframes crisis-pulse {\n  0%, 100% {\n    box-shadow: 0 4px 15px rgba(198, 40, 40, 0.25);\n  }\n  50% {\n    box-shadow: 0 4px 25px rgba(198, 40, 40, 0.5), 0 0 40px rgba(198, 40, 40, 0.3);\n  }\n}\n\n.crisis-btn--secondary {\n  background: #fff;\n  color: #c62828;\n  border: 2px solid #c62828;\n}\n\n.crisis-btn--primary:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 25px rgba(198, 40, 40, 0.4);\n  background: linear-gradient(135deg, #d32f2f 0%, #c62828 100%);\n}\n\n.crisis-btn--secondary:hover {\n  transform: translateY(-3px);\n  background: #fff5f5;\n  box-shadow: 0 8px 25px rgba(198, 40, 40, 0.2);\n}\n\n.crisis-btn:active {\n  transform: translateY(-1px);\n}\n\n.crisis-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  gap: 24px;\n}\n\n.crisis-card {\n  background: #fff;\n  border: 1px solid #e0e0e0;\n  border-radius: 16px;\n  padding: 28px;\n  text-align: center;\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), \n              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n              border-color 0.3s ease;\n  opacity: 0;\n  transform: translateY(30px);\n  animation: support-card-enter 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.crisis-card:nth-child(1) { animation-delay: 0.1s; }\n.crisis-card:nth-child(2) { animation-delay: 0.2s; }\n.crisis-card:nth-child(3) { animation-delay: 0.3s; }\n\n@keyframes support-card-enter {\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.crisis-card:hover {\n  transform: translateY(-8px) scale(1.02);\n  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15), 0 0 30px rgba(var(--user-accent-rgb), 0.1);\n  border-color: var(--user-accent-light);\n}\n\n.crisis-card:hover .crisis-card__icon {\n  transform: scale(1.1);\n  background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);\n}\n\n.crisis-card:hover .crisis-card__icon ion-icon {\n  color: var(--user-accent-light);\n}\n\n.crisis-card__icon {\n  width: 60px;\n  height: 60px;\n  background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 18px;\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1),\n              background 0.4s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n}\n\n.crisis-card__icon ion-icon {\n  font-size: 28px;\n  color: #666;\n  transition: color 0.3s ease;\n}\n\n.crisis-card__title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  margin-bottom: 8px;\n}\n\n.crisis-card__text {\n  font-size: 0.95rem;\n  color: #666;\n  margin-bottom: 16px;\n  line-height: 1.5;\n}\n\n.crisis-card__link {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  color: var(--user-accent-light);\n  font-weight: 600;\n  text-decoration: none;\n  transition: color 0.3s ease, gap 0.3s ease;\n}\n\n.crisis-card__link::after {\n  content: \"\\2192\";\n  font-size: 1rem;\n  transition: transform 0.3s ease;\n}\n\n.crisis-card__link:hover {\n  color: var(--user-accent);\n  gap: 10px;\n}\n\n.crisis-card__link:hover::after {\n  transform: translateX(4px);\n}\n\n/* === SECTION HEADER === */\n.section-header {\n  text-align: center;\n  margin-bottom: 48px;\n}\n\n.section-title {\n  font-size: 2.2rem;\n  font-weight: 800;\n  color: #2d2d2d;\n  margin-bottom: 14px;\n  background: linear-gradient(135deg, #2d2d2d 0%, #555 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n  letter-spacing: -0.5px;\n}\n\n.section-subtitle {\n  font-size: 1.15rem;\n  color: #666;\n  max-width: 600px;\n  margin: 0 auto;\n  line-height: 1.6;\n}\n\n/* === SECTION DIVIDER === */\n.section-divider {\n  position: relative;\n  height: 80px;\n  overflow: hidden;\n  background: transparent;\n}\n\n.section-divider::before {\n  content: \"\";\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 100%;\n  background: rgba(var(--user-accent-rgb), 0.04);\n  -webkit-mask-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 100'%3E%3Cpath fill='white' d='M0,50 C360,100 720,0 1080,50 C1260,75 1350,75 1440,50 L1440,100 L0,100 Z'/%3E%3C/svg%3E\");\n  mask-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 100'%3E%3Cpath fill='white' d='M0,50 C360,100 720,0 1080,50 C1260,75 1350,75 1440,50 L1440,100 L0,100 Z'/%3E%3C/svg%3E\");\n  -webkit-mask-size: cover;\n  mask-size: cover;\n  -webkit-mask-position: bottom;\n  mask-position: bottom;\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n  animation: wave-motion 6s ease-in-out infinite alternate;\n}\n\n@keyframes wave-motion {\n  0% { transform: translateX(0); }\n  100% { transform: translateX(-20px); }\n}\n\n.section-divider--reverse::before {\n  transform: scaleY(-1);\n  background: #fff;\n  -webkit-mask-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 100'%3E%3Cpath fill='white' d='M0,50 C360,100 720,0 1080,50 C1260,75 1350,75 1440,50 L1440,100 L0,100 Z'/%3E%3C/svg%3E\");\n  mask-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 100'%3E%3Cpath fill='white' d='M0,50 C360,100 720,0 1080,50 C1260,75 1350,75 1440,50 L1440,100 L0,100 Z'/%3E%3C/svg%3E\");\n  -webkit-mask-size: cover;\n  mask-size: cover;\n  -webkit-mask-position: bottom;\n  mask-position: bottom;\n  -webkit-mask-repeat: no-repeat;\n  mask-repeat: no-repeat;\n}\n\n/* === QUICK LINKS === */\n.quicklinks-section {\n  background: rgba(var(--user-accent-rgb), 0.04);\n  padding: 80px 20px;\n}\n\n.quicklinks-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 24px;\n  max-width: 1000px;\n  margin: 0 auto;\n}\n\n.quicklink-card {\n  background: #fff;\n  border-radius: 16px;\n  padding: 32px 24px;\n  text-align: center;\n  text-decoration: none;\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), \n              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n              border-color 0.3s ease;\n  border: 1px solid rgba(var(--user-accent-rgb), 0.15);\n  opacity: 0;\n  transform: translateY(30px);\n  animation: support-card-enter 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.quicklink-card:nth-child(1) { animation-delay: 0.05s; }\n.quicklink-card:nth-child(2) { animation-delay: 0.1s; }\n.quicklink-card:nth-child(3) { animation-delay: 0.15s; }\n.quicklink-card:nth-child(4) { animation-delay: 0.2s; }\n.quicklink-card:nth-child(5) { animation-delay: 0.25s; }\n.quicklink-card:nth-child(6) { animation-delay: 0.3s; }\n\n.quicklink-card:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12);\n  border-color: var(--user-accent-light);\n}\n\n.quicklink-card__icon {\n  width: 64px;\n  height: 64px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 20px;\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s ease;\n}\n\n.quicklink-card:hover .quicklink-card__icon {\n  transform: scale(1.1) rotate(5deg);\n  box-shadow: 0 8px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n.quicklink-card__icon ion-icon {\n  font-size: 28px;\n  color: #fff;\n  transition: transform 0.3s ease;\n}\n\n.quicklink-card:hover .quicklink-card__icon ion-icon {\n  transform: scale(1.1);\n}\n\n.quicklink-card__title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  margin-bottom: 8px;\n}\n\n.quicklink-card__text {\n  font-size: 0.9rem;\n  color: #666;\n  line-height: 1.5;\n}\n\n/* === HELPLINES === */\n.helplines-section {\n  background: #fff;\n  padding: 80px 20px;\n}\n\n/* === HELPLINES CONTROLS === */\n.helplines-controls {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 20px;\n  margin-bottom: 24px;\n  flex-wrap: wrap;\n}\n\n.helplines-view-toggle {\n  display: flex;\n  gap: 4px;\n  background: #f5f5f5;\n  padding: 4px;\n  border-radius: 10px;\n}\n\n.view-toggle-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: transparent;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: #666;\n}\n\n.view-toggle-btn:hover {\n  background: rgba(0, 0, 0, 0.05);\n  color: #333;\n}\n\n.view-toggle-btn.active {\n  background: #fff;\n  color: var(--user-accent, #5BA4E6);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.view-toggle-btn ion-icon {\n  font-size: 1.25rem;\n}\n\n/* === LIST VIEW === */\n.helplines-grid.list-view {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.helplines-grid.list-view .helpline-card {\n  display: grid;\n  grid-template-columns: 44px 1fr auto;\n  grid-template-rows: auto;\n  align-items: center;\n  padding: 16px 20px;\n  gap: 0 14px;\n  border-radius: 12px;\n}\n\n.helplines-grid.list-view .helpline-card__icon-wrapper {\n  width: 44px;\n  height: 44px;\n  flex-shrink: 0;\n  margin-bottom: 0;\n  grid-column: 1;\n  grid-row: 1 / -1;\n  align-self: center;\n}\n\n.helplines-grid.list-view .helpline-card__icon-wrapper ion-icon {\n  font-size: 1.3rem;\n}\n\n.helplines-grid.list-view .helpline-card__header {\n  grid-column: 2;\n  grid-row: 1;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.helplines-grid.list-view .helpline-card__title {\n  font-size: 0.95rem;\n  margin-bottom: 0;\n}\n\n.helplines-grid.list-view .helpline-card__badge {\n  padding: 2px 8px;\n  font-size: 0.65rem;\n}\n\n.helplines-grid.list-view .helpline-card__text {\n  grid-column: 2;\n  grid-row: 2;\n  font-size: 0.8rem;\n  margin: 2px 0 0;\n  line-height: 1.4;\n  color: #777;\n}\n\n.helplines-grid.list-view .helpline-card__wait {\n  grid-column: 2;\n  grid-row: 3;\n  margin: 2px 0 0;\n}\n\n.helplines-grid.list-view .helpline-card__contacts {\n  grid-column: 3;\n  grid-row: 1 / -1;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n}\n\n.helplines-grid.list-view .helpline-contact {\n  padding: 6px 12px;\n  font-size: 0.8rem;\n}\n\n.helplines-grid.list-view .helpline-card__tty {\n  grid-column: 2;\n  grid-row: 4;\n  margin: 2px 0 0;\n  font-size: 0.7rem;\n}\n\n@media (max-width: 768px) {\n  .helplines-grid.list-view .helpline-card {\n    grid-template-columns: 38px 1fr;\n    grid-template-rows: auto auto auto;\n    padding: 14px 16px;\n    gap: 0 10px;\n  }\n\n  .helplines-grid.list-view .helpline-card__icon-wrapper {\n    width: 38px;\n    height: 38px;\n    grid-row: 1;\n  }\n\n  .helplines-grid.list-view .helpline-card__header {\n    grid-column: 2;\n    grid-row: 1;\n  }\n\n  .helplines-grid.list-view .helpline-card__title {\n    font-size: 0.9rem;\n  }\n\n  .helplines-grid.list-view .helpline-card__text {\n    grid-column: 1 / -1;\n    grid-row: 2;\n    margin: 6px 0 0;\n  }\n\n  .helplines-grid.list-view .helpline-card__wait {\n    grid-column: 1 / -1;\n    grid-row: 3;\n    margin: 4px 0 0;\n  }\n\n  .helplines-grid.list-view .helpline-card__contacts {\n    grid-column: 1 / -1;\n    grid-row: 4;\n    justify-content: flex-start;\n    margin-top: 8px;\n  }\n\n  .helplines-grid.list-view .helpline-contact {\n    padding: 8px 14px;\n    font-size: 0.82rem;\n  }\n\n  .helplines-grid.list-view .helpline-card__tty {\n    grid-column: 1 / -1;\n    grid-row: 5;\n    margin: 4px 0 0;\n  }\n}\n\nbody.dark-mode .helplines-view-toggle {\n  background: #2a2a2a;\n}\n\nbody.dark-mode .view-toggle-btn {\n  color: #999;\n}\n\nbody.dark-mode .view-toggle-btn:hover {\n  background: rgba(255, 255, 255, 0.05);\n  color: #ccc;\n}\n\nbody.dark-mode .view-toggle-btn.active {\n  background: #333;\n  color: var(--user-accent, #6DB3F2);\n}\n\n@media (max-width: 768px) {\n  .helplines-controls {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .helplines-view-toggle {\n    align-self: flex-end;\n  }\n  \n  \n  .helplines-grid.mobile-grouped {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  }\n  \n  .mobile-category-group {\n    border: 1px solid #e0e0e0;\n    border-radius: 16px;\n    overflow: hidden;\n    background: #fff;\n  }\n  \n  .mobile-category-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 16px 20px;\n    background: linear-gradient(135deg, #f8f8f8 0%, #fff 100%);\n    cursor: pointer;\n    border: none;\n    width: 100%;\n    text-align: left;\n    transition: background 0.3s ease;\n  }\n  \n  .mobile-category-header:hover {\n    background: linear-gradient(135deg, #f0f0f0 0%, #f8f8f8 100%);\n  }\n  \n  .mobile-category-header__left {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n  }\n  \n  .mobile-category-header__icon {\n    width: 36px;\n    height: 36px;\n    border-radius: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #fff;\n  }\n  \n  .mobile-category-header__icon--crisis { background: linear-gradient(135deg, #dc3545, #c82333); }\n  .mobile-category-header__icon--lgbtq { background: linear-gradient(135deg, #6DB3F2, #7f5ac8); }\n  .mobile-category-header__icon--youth { background: linear-gradient(135deg, #3B8DD4, #2d6ab0); }\n  .mobile-category-header__icon--veterans { background: linear-gradient(135deg, #5a6e82, #4a5d6e); }\n  .mobile-category-header__icon--specialized { background: linear-gradient(135deg, #20c997, #17a085); }\n  .mobile-category-header__icon--general { background: linear-gradient(135deg, #4a90d9, #357abd); }\n  \n  .mobile-category-header__title {\n    font-size: 1rem;\n    font-weight: 600;\n    color: #333;\n    margin: 0;\n  }\n  \n  .mobile-category-header__count {\n    font-size: 0.8rem;\n    color: #666;\n    background: #f0f0f0;\n    padding: 2px 8px;\n    border-radius: 10px;\n    margin-left: 8px;\n  }\n  \n  .mobile-category-header__chevron {\n    font-size: 1.25rem;\n    color: #666;\n    transition: transform 0.3s ease;\n  }\n  \n  .mobile-category-group.expanded .mobile-category-header__chevron {\n    transform: rotate(180deg);\n  }\n  \n  .mobile-category-content {\n    display: none;\n    padding: 12px;\n    background: #fafafa;\n    border-top: 1px solid #e8e8e8;\n  }\n  \n  .mobile-category-group.expanded .mobile-category-content {\n    display: block;\n  }\n  \n  .mobile-category-content .helpline-card {\n    margin-bottom: 12px;\n    box-shadow: none;\n    border: 1px solid #e0e0e0;\n  }\n  \n  .mobile-category-content .helpline-card:last-child {\n    margin-bottom: 0;\n  }\n  \n  \n  body.dark-mode .mobile-category-group {\n    background: #1a1a1a;\n    border-color: #333;\n  }\n  \n  body.dark-mode .mobile-category-header {\n    background: linear-gradient(135deg, #222 0%, #1a1a1a 100%);\n  }\n  \n  body.dark-mode .mobile-category-header:hover {\n    background: linear-gradient(135deg, #2a2a2a 0%, #222 100%);\n  }\n  \n  body.dark-mode .mobile-category-header__title {\n    color: #e0e0e0;\n  }\n  \n  body.dark-mode .mobile-category-header__count {\n    background: #333;\n    color: #aaa;\n  }\n  \n  body.dark-mode .mobile-category-content {\n    background: #151515;\n    border-top-color: #333;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .helplines-grid {\n    transition: none;\n  }\n  \n  .view-toggle-btn {\n    transition: none;\n  }\n  \n  .mobile-category-header {\n    transition: none;\n  }\n  \n  .mobile-category-header__chevron {\n    transition: none;\n  }\n  \n  .mobile-category-group.expanded .mobile-category-header__chevron {\n    transform: rotate(180deg);\n  }\n}\n\n.helplines-expect {\n  display: flex;\n  align-items: flex-start;\n  gap: 20px;\n  background: linear-gradient(135deg, #f0f7ff 0%, #e8f4fd 100%);\n  border: 1px solid #d0e5f7;\n  border-radius: 16px;\n  padding: 24px 28px;\n  margin-bottom: 32px;\n  animation: support-card-enter 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.helplines-expect__icon {\n  width: 48px;\n  height: 48px;\n  background: linear-gradient(135deg, #4a90d9 0%, #357abd 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.helplines-expect__icon ion-icon {\n  font-size: 24px;\n  color: #fff;\n}\n\n.helplines-expect__content h3 {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d5a87;\n  margin-bottom: 8px;\n}\n\n.helplines-expect__content p {\n  font-size: 0.95rem;\n  color: #4a7ba7;\n  line-height: 1.6;\n  margin: 0;\n}\n\n.helplines-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 20px;\n  transition: opacity 0.15s ease;\n}\n\n@media (max-width: 768px) {\n  .helplines-grid {\n    grid-template-columns: 1fr;\n    gap: 16px;\n  }\n  \n  .helpline-card {\n    grid-template-columns: 36px 1fr;\n  }\n}\n\n.helpline-card {\n  background: #fff;\n  border: 1px solid #e0e0e0;\n  border-radius: 16px;\n  padding: 20px;\n  position: relative;\n  overflow: hidden;\n  display: grid;\n  grid-template-columns: 42px 1fr;\n  grid-template-rows: auto auto auto auto auto;\n  gap: 0 12px;\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), \n              box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n              border-color 0.3s ease;\n  opacity: 0;\n  transform: translateY(30px);\n  animation: support-card-enter 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.helpline-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, var(--user-accent-light), var(--user-accent));\n  transition: height 0.3s ease;\n}\n\n.helpline-card--crisis::before {\n  background: linear-gradient(90deg, #e53935, #c62828);\n}\n\n.helpline-card--lgbtq::before,\n.helpline-card--trans::before {\n  background: linear-gradient(90deg, #9c27b0, #7b1fa2, #e91e63);\n}\n\n.helpline-card--youth::before {\n  background: linear-gradient(90deg, #ff9800, #f57c00);\n}\n\n.helpline-card--veterans::before {\n  background: linear-gradient(90deg, #1565c0, #0d47a1);\n}\n\n.helpline-card--specialized::before {\n  background: linear-gradient(90deg, #00897b, #00695c);\n}\n\n.helpline-card--general::before {\n  background: linear-gradient(90deg, #2196f3, #1976d2);\n}\n\n.helpline-card:nth-child(1) { animation-delay: 0.05s; }\n.helpline-card:nth-child(2) { animation-delay: 0.1s; }\n.helpline-card:nth-child(3) { animation-delay: 0.15s; }\n.helpline-card:nth-child(4) { animation-delay: 0.2s; }\n.helpline-card:nth-child(5) { animation-delay: 0.25s; }\n.helpline-card:nth-child(6) { animation-delay: 0.3s; }\n.helpline-card:nth-child(7) { animation-delay: 0.35s; }\n.helpline-card:nth-child(8) { animation-delay: 0.4s; }\n.helpline-card:nth-child(9) { animation-delay: 0.45s; }\n.helpline-card:nth-child(10) { animation-delay: 0.5s; }\n.helpline-card:nth-child(11) { animation-delay: 0.55s; }\n.helpline-card:nth-child(12) { animation-delay: 0.6s; }\n\n.helpline-card:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12);\n  border-color: transparent;\n}\n\n.helpline-card:hover::before {\n  height: 6px;\n}\n\n.helpline-card--crisis:hover {\n  box-shadow: 0 20px 50px rgba(229, 57, 53, 0.15);\n}\n\n.helpline-card--lgbtq:hover,\n.helpline-card--trans:hover {\n  box-shadow: 0 20px 50px rgba(156, 39, 176, 0.15);\n}\n\n.helpline-card--youth:hover {\n  box-shadow: 0 20px 50px rgba(255, 152, 0, 0.15);\n}\n\n.helpline-card--veterans:hover {\n  box-shadow: 0 20px 50px rgba(21, 101, 192, 0.15);\n}\n\n.helpline-card--specialized:hover {\n  box-shadow: 0 20px 50px rgba(0, 137, 123, 0.15);\n}\n\n.helpline-card--general:hover {\n  box-shadow: 0 20px 50px rgba(33, 150, 243, 0.15);\n}\n\n.helpline-card__icon-wrapper {\n  width: 42px;\n  height: 42px;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  grid-column: 1;\n  grid-row: 1;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.04) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n}\n\n.helpline-card--crisis .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);\n}\n\n.helpline-card--crisis .helpline-card__icon-wrapper ion-icon {\n  color: #e53935;\n}\n\n.helpline-card--lgbtq .helpline-card__icon-wrapper,\n.helpline-card--trans .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);\n}\n\n.helpline-card--lgbtq .helpline-card__icon-wrapper ion-icon,\n.helpline-card--trans .helpline-card__icon-wrapper ion-icon {\n  color: #9c27b0;\n}\n\n.helpline-card--youth .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);\n}\n\n.helpline-card--youth .helpline-card__icon-wrapper ion-icon {\n  color: #ff9800;\n}\n\n.helpline-card--veterans .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\n}\n\n.helpline-card--veterans .helpline-card__icon-wrapper ion-icon {\n  color: #1565c0;\n}\n\n.helpline-card--specialized .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);\n}\n\n.helpline-card--specialized .helpline-card__icon-wrapper ion-icon {\n  color: #00897b;\n}\n\n.helpline-card--general .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\n}\n\n.helpline-card--general .helpline-card__icon-wrapper ion-icon {\n  color: #2196f3;\n}\n\n.helpline-card__icon-wrapper ion-icon {\n  font-size: 20px;\n  color: var(--user-accent-light);\n}\n\n.helpline-card__header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n  grid-column: 2;\n  grid-row: 1;\n  align-self: center;\n  min-width: 0;\n}\n\n.helpline-card__title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  line-height: 1.3;\n}\n\n.helpline-card__badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  background: #e8f5e9;\n  color: #2e7d32;\n  font-size: 0.75rem;\n  font-weight: 600;\n  padding: 5px 12px;\n  border-radius: 20px;\n}\n\n.helpline-card__badge ion-icon {\n  font-size: 12px;\n}\n\n.helpline-card__badge--24-7 {\n  background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);\n  color: #2e7d32;\n}\n\n.helpline-card__badge--hours {\n  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);\n  color: #e65100;\n}\n\n.helpline-card__text {\n  font-size: 0.9rem;\n  color: #666;\n  line-height: 1.5;\n  margin-bottom: 10px;\n  margin-top: 4px;\n  grid-column: 1 / -1;\n}\n\n.helpline-card__wait {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 0.75rem;\n  color: #888;\n  margin-bottom: 10px;\n  grid-column: 1 / -1;\n}\n\n.helpline-card__wait ion-icon {\n  font-size: 12px;\n  color: #43a047;\n}\n\n.helpline-card__contacts {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-bottom: 10px;\n  grid-column: 1 / -1;\n}\n\n.helpline-card__tty {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.75rem;\n  color: #999;\n  padding-top: 10px;\n  border-top: 1px solid #f0f0f0;\n  grid-column: 1 / -1;\n}\n\n.helpline-card__tty ion-icon {\n  font-size: 14px;\n  color: #999;\n}\n\n.helpline-contact {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 14px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.04) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n  border-radius: 20px;\n  color: #2d2d2d;\n  font-size: 0.8rem;\n  font-weight: 600;\n  text-decoration: none;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);\n}\n\n.helpline-contact--call {\n  background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);\n}\n\n.helpline-contact--call ion-icon {\n  color: #43a047;\n}\n\n.helpline-contact--text {\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\n}\n\n.helpline-contact--text ion-icon {\n  color: #1976d2;\n}\n\n.helpline-contact--chat {\n  background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);\n}\n\n.helpline-contact--chat ion-icon {\n  color: #8e24aa;\n}\n\n.helpline-contact:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);\n}\n\n.helpline-contact--call:hover {\n  background: linear-gradient(135deg, #43a047 0%, #2e7d32 100%);\n  color: #fff;\n}\n\n.helpline-contact--call:hover ion-icon {\n  color: #fff;\n}\n\n.helpline-contact--text:hover {\n  background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);\n  color: #fff;\n}\n\n.helpline-contact--text:hover ion-icon {\n  color: #fff;\n}\n\n.helpline-contact--chat:hover {\n  background: linear-gradient(135deg, #8e24aa 0%, #7b1fa2 100%);\n  color: #fff;\n}\n\n.helpline-contact--chat:hover ion-icon {\n  color: #fff;\n}\n\n@keyframes badge-pulse {\n  0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(46, 125, 50, 0.4); }\n  50% { transform: scale(1.05); box-shadow: 0 0 0 8px rgba(46, 125, 50, 0); }\n}\n\n.helpline-card__badge--24-7 {\n  animation: badge-pulse 2.5s ease-in-out infinite;\n}\n\n@keyframes icon-float {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-6px); }\n}\n\n.helpline-card__icon-wrapper {\n  animation: icon-float 3s ease-in-out infinite;\n}\n\n.helpline-card__icon-wrapper:hover {\n  animation-play-state: paused;\n  transform: scale(1.1) rotate(5deg);\n}\n\n.helpline-contact {\n  position: relative;\n  overflow: hidden;\n}\n\n.helpline-contact::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  background: rgba(255, 255, 255, 0.4);\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n  transition: width 0.6s ease, height 0.6s ease;\n}\n\n.helpline-contact:active::after {\n  width: 200px;\n  height: 200px;\n}\n\n.helpline-card::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(\n    90deg,\n    transparent,\n    rgba(255, 255, 255, 0.3),\n    transparent\n  );\n  transition: left 0.5s ease;\n  pointer-events: none;\n}\n\n.helpline-card:hover::after {\n  left: 100%;\n}\n\n@keyframes gradient-glow {\n  0% { background-position: 0% 50%; }\n  50% { background-position: 100% 50%; }\n  100% { background-position: 0% 50%; }\n}\n\n.helpline-card--crisis:hover::before {\n  background: linear-gradient(90deg, #e53935, #ff5252, #e53935);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helpline-card--lgbtq:hover::before,\n.helpline-card--trans:hover::before {\n  background: linear-gradient(90deg, #9c27b0, #e91e63, #9c27b0);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helpline-card--youth:hover::before {\n  background: linear-gradient(90deg, #ff9800, #ffb74d, #ff9800);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helpline-card--veterans:hover::before {\n  background: linear-gradient(90deg, #1565c0, #42a5f5, #1565c0);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helpline-card--specialized:hover::before {\n  background: linear-gradient(90deg, #00897b, #4db6ac, #00897b);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helpline-card--general:hover::before {\n  background: linear-gradient(90deg, #2196f3, #64b5f6, #2196f3);\n  background-size: 200% 100%;\n  animation: gradient-glow 2s ease infinite;\n}\n\n.helplines-wave-separator {\n  position: relative;\n  height: 80px;\n  overflow: hidden;\n  margin-bottom: -2px;\n}\n\n.helplines-wave-separator svg {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.helplines-wave-separator .wave-1 {\n  fill: rgba(var(--user-accent-rgb), 0.1);\n  animation: wave-float 8s ease-in-out infinite;\n}\n\n.helplines-wave-separator .wave-2 {\n  fill: rgba(var(--user-accent-rgb), 0.15);\n  animation: wave-float 6s ease-in-out infinite reverse;\n}\n\n.helplines-wave-separator .wave-3 {\n  fill: #f8f9fa;\n  animation: wave-float 10s ease-in-out infinite;\n}\n\n@keyframes wave-float {\n  0%, 100% { transform: translateX(0); }\n  50% { transform: translateX(-20px); }\n}\n\n.helplines-section {\n  position: relative;\n  background: \n    radial-gradient(circle at 20% 30%, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 50%),\n    radial-gradient(circle at 80% 70%, rgba(100, 181, 246, 0.06) 0%, transparent 50%),\n    #f8f9fa;\n}\n\n.helplines-section::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: radial-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px);\n  background-size: 24px 24px;\n  pointer-events: none;\n}\n\n.helplines-decoration {\n  position: absolute;\n  pointer-events: none;\n  z-index: 0;\n}\n\n.helplines-decoration--1 {\n  top: 10%;\n  left: 5%;\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, rgba(229, 57, 53, 0.1) 0%, transparent 70%);\n  animation: decoration-float 7s ease-in-out infinite;\n}\n\n.helplines-decoration--2 {\n  top: 30%;\n  right: 8%;\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, rgba(156, 39, 176, 0.08) 0%, transparent 70%);\n  animation: decoration-float 9s ease-in-out infinite reverse;\n}\n\n.helplines-decoration--3 {\n  bottom: 20%;\n  left: 10%;\n  width: 50px;\n  height: 50px;\n  border-radius: 12px;\n  background: linear-gradient(135deg, rgba(33, 150, 243, 0.1) 0%, transparent 70%);\n  animation: decoration-float 8s ease-in-out infinite;\n  transform: rotate(45deg);\n}\n\n.helplines-decoration--4 {\n  bottom: 40%;\n  right: 5%;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, rgba(0, 137, 123, 0.1) 0%, transparent 70%);\n  animation: decoration-float 6s ease-in-out infinite reverse;\n}\n\n@keyframes decoration-float {\n  0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.6; }\n  50% { transform: translateY(-15px) rotate(5deg); opacity: 1; }\n}\n\n.helplines-filters {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  justify-content: flex-start;\n  padding: 0;\n}\n\n.helplines-filter-pill {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 20px;\n  background: #fff;\n  border: 2px solid #e0e0e0;\n  border-radius: 30px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #555;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\n}\n\n.helplines-filter-pill:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);\n}\n\n.helplines-filter-pill.active,\n.helplines-filter-pill[data-filter=\"all\"].active {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"crisis\"] {\n  border-color: #ffcdd2;\n}\n.helplines-filter-pill[data-filter=\"crisis\"].active,\n.helplines-filter-pill[data-filter=\"crisis\"]:hover {\n  background: linear-gradient(135deg, #e53935 0%, #c62828 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"lgbtq\"] {\n  border-color: #e1bee7;\n}\n.helplines-filter-pill[data-filter=\"lgbtq\"].active,\n.helplines-filter-pill[data-filter=\"lgbtq\"]:hover {\n  background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"youth\"] {\n  border-color: #ffe0b2;\n}\n.helplines-filter-pill[data-filter=\"youth\"].active,\n.helplines-filter-pill[data-filter=\"youth\"]:hover {\n  background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"veterans\"] {\n  border-color: #bbdefb;\n}\n.helplines-filter-pill[data-filter=\"veterans\"].active,\n.helplines-filter-pill[data-filter=\"veterans\"]:hover {\n  background: linear-gradient(135deg, #1565c0 0%, #0d47a1 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"specialized\"] {\n  border-color: #b2dfdb;\n}\n.helplines-filter-pill[data-filter=\"specialized\"].active,\n.helplines-filter-pill[data-filter=\"specialized\"]:hover {\n  background: linear-gradient(135deg, #00897b 0%, #00695c 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill[data-filter=\"general\"] {\n  border-color: #bbdefb;\n}\n.helplines-filter-pill[data-filter=\"general\"].active,\n.helplines-filter-pill[data-filter=\"general\"]:hover {\n  background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.helplines-filter-pill ion-icon {\n  font-size: 16px;\n}\n\n.helpline-card.filter-hidden {\n  opacity: 0;\n  transform: scale(0.8);\n  pointer-events: none;\n  position: absolute;\n  visibility: hidden;\n}\n\n.helpline-card.filter-visible {\n  opacity: 1;\n  transform: translateY(0) scale(1);\n}\n\n.helpline-copy-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: rgba(0, 0, 0, 0.05);\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-left: 8px;\n  flex-shrink: 0;\n}\n\n.helpline-copy-btn:hover {\n  background: rgba(0, 0, 0, 0.1);\n  transform: scale(1.1);\n}\n\n.helpline-copy-btn ion-icon {\n  font-size: 16px;\n  color: #666;\n}\n\n.helpline-copy-btn.copied {\n  background: #43a047;\n}\n\n.helpline-copy-btn.copied ion-icon {\n  color: #fff;\n}\n\n.helpline-card__availability {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px dashed #e0e0e0;\n}\n\n.availability-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 4px 10px;\n  border-radius: 12px;\n  font-size: 0.7rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.3px;\n}\n\n.availability-badge--call {\n  background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);\n  color: #2e7d32;\n}\n\n.availability-badge--text {\n  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);\n  color: #1565c0;\n}\n\n.availability-badge--chat {\n  background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);\n  color: #7b1fa2;\n}\n\n.availability-badge--tty {\n  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);\n  color: #e65100;\n}\n\n.availability-badge ion-icon {\n  font-size: 12px;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .helpline-card__badge--24-7,\n  .helpline-card__icon-wrapper,\n  .helplines-wave-separator .wave-1,\n  .helplines-wave-separator .wave-2,\n  .helplines-wave-separator .wave-3,\n  .helplines-decoration--1,\n  .helplines-decoration--2,\n  .helplines-decoration--3,\n  .helplines-decoration--4 {\n    animation: none;\n  }\n  \n  .helpline-card::after {\n    display: none;\n  }\n  \n  .helpline-card--crisis:hover::before,\n  .helpline-card--lgbtq:hover::before,\n  .helpline-card--trans:hover::before,\n  .helpline-card--youth:hover::before,\n  .helpline-card--veterans:hover::before,\n  .helpline-card--specialized:hover::before,\n  .helpline-card--general:hover::before {\n    animation: none;\n  }\n  \n  .helpline-contact::after {\n    display: none;\n  }\n  \n  .helplines-filter-pill,\n  .helpline-copy-btn,\n  .helpline-contact {\n    transition: none;\n  }\n}\n\n.helpline-contact ion-icon {\n  font-size: 1rem;\n  transition: color 0.3s ease, transform 0.3s ease;\n}\n\n.helpline-contact:hover ion-icon {\n  transform: scale(1.15);\n}\n\n.resources-section {\n  background: rgba(var(--user-accent-rgb), 0.04);\n  padding: 80px 20px;\n}\n\n.resources-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));\n  gap: 24px;\n}\n\n.resource-card {\n  background: #fff;\n  border-radius: 16px;\n  padding: 28px;\n  text-decoration: none;\n  transition: transform 0.2s, box-shadow 0.2s;\n  border: 1px solid rgba(var(--user-accent-rgb), 0.15);\n}\n\n.resource-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);\n}\n\n.resource-card__icon {\n  width: 50px;\n  height: 50px;\n  background: #f5f5f5;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 16px;\n}\n\n.resource-card__icon ion-icon {\n  font-size: 24px;\n  color: var(--user-accent-light);\n}\n\n.resource-card__title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  margin-bottom: 8px;\n}\n\n.resource-card__text {\n  font-size: 0.9rem;\n  color: #666;\n  line-height: 1.5;\n  margin-bottom: 16px;\n}\n\n.resource-card__link {\n  color: var(--user-accent-light);\n  font-weight: 600;\n  font-size: 0.9rem;\n}\n\n.selfhelp-section {\n  background: #fff;\n  padding: 80px 20px;\n}\n\n.selfhelp-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 24px;\n}\n\n.selfhelp-card {\n  background: #fff;\n  border: 1px solid #e0e0e0;\n  border-radius: 16px;\n  padding: 28px;\n}\n\n.selfhelp-card__header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n\n.selfhelp-card__header ion-icon {\n  font-size: 24px;\n  color: var(--user-accent-light);\n}\n\n.selfhelp-card__title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n}\n\n.selfhelp-card__text {\n  font-size: 0.95rem;\n  color: #666;\n  margin-bottom: 16px;\n  line-height: 1.5;\n}\n\n.selfhelp-card__steps,\n.selfhelp-card__list {\n  padding-left: 20px;\n  color: #555;\n  font-size: 0.9rem;\n  line-height: 1.8;\n}\n\n.selfhelp-card__steps li,\n.selfhelp-card__list li {\n  margin-bottom: 6px;\n}\n\n.support-hub {\n  position: relative;\n  padding: 80px 20px 100px;\n  background: linear-gradient(180deg, #fff 0%, rgba(var(--user-accent-rgb), 0.06) 40%, rgba(var(--user-accent-rgb), 0.1) 70%, #fff 100%);\n  overflow: hidden;\n}\n\n.support-hub__bg-decor {\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n  overflow: hidden;\n}\n\n.support-hub__circle {\n  position: absolute;\n  border-radius: 50%;\n  border: 2px solid rgba(var(--user-accent-rgb), 0.08);\n}\n\n.support-hub__circle--1 {\n  width: 500px;\n  height: 500px;\n  top: -100px;\n  right: -150px;\n}\n\n.support-hub__circle--2 {\n  width: 300px;\n  height: 300px;\n  bottom: 50px;\n  left: -80px;\n}\n\n.support-hub__dots {\n  position: absolute;\n  top: 60px;\n  left: 50%;\n  width: 200px;\n  height: 200px;\n  background-image: radial-gradient(circle, rgba(var(--user-accent-rgb), 0.12) 1.5px, transparent 1.5px);\n  background-size: 20px 20px;\n  transform: translateX(-50%);\n  opacity: 0.6;\n}\n\n.support-hub__header {\n  text-align: center;\n  margin-bottom: 56px;\n  position: relative;\n  z-index: 1;\n}\n\n.support-hub__header-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 20px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.12) 0%, rgba(var(--user-accent-rgb), 0.06) 100%);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.2);\n  border-radius: 50px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent);\n  margin-bottom: 20px;\n}\n\n.support-hub__header-badge ion-icon {\n  font-size: 1.1rem;\n}\n\n.support-hub__title {\n  font-size: 2.8rem;\n  font-weight: 800;\n  color: #2d2d2d;\n  margin-bottom: 16px;\n  letter-spacing: -0.5px;\n}\n\n.support-hub__subtitle {\n  font-size: 1.15rem;\n  color: #666;\n  max-width: 640px;\n  margin: 0 auto;\n  line-height: 1.7;\n}\n\n.support-hub__grid {\n  display: flex;\n  flex-direction: column;\n  gap: 48px;\n  max-width: 1400px;\n  margin: 0 auto;\n  position: relative;\n  z-index: 1;\n  padding: 0 40px;\n}\n\n.support-hub__left {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  width: 100%;\n}\n\n.support-hub__form-card {\n  background: #fff;\n  border-radius: 20px;\n  padding: 0;\n  box-shadow: 0 8px 40px rgba(0, 0, 0, 0.06);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.12);\n  overflow: hidden;\n}\n\n.support-hub__form-header {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 28px 36px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.08) 0%, rgba(var(--user-accent-rgb), 0.03) 100%);\n  border-bottom: 1px solid rgba(var(--user-accent-rgb), 0.1);\n}\n\n.support-hub__form-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 14px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.support-hub__form-icon ion-icon {\n  font-size: 24px;\n  color: #fff;\n}\n\n.support-hub__form-title {\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  margin: 0 0 4px;\n}\n\n.support-hub__form-desc {\n  font-size: 0.9rem;\n  color: #777;\n  margin: 0;\n  line-height: 1.5;\n}\n\n.support-hub__form-card .appointment-form {\n  padding: 32px 36px 36px;\n}\n\n.support-hub__trust-row {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16px;\n}\n\n.support-hub__trust-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 18px 16px;\n  background: #fff;\n  border-radius: 14px;\n  border: 1px solid rgba(var(--user-accent-rgb), 0.12);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.04);\n}\n\n.support-hub__trust-item ion-icon {\n  font-size: 1.5rem;\n  color: var(--user-accent);\n  flex-shrink: 0;\n}\n\n.support-hub__trust-value {\n  display: block;\n  font-size: 0.85rem;\n  font-weight: 700;\n  color: #2d2d2d;\n}\n\n.support-hub__trust-label {\n  display: block;\n  font-size: 0.75rem;\n  color: #888;\n  margin-top: 2px;\n}\n\n.support-hub__right {\n  position: static;\n  width: 100%;\n}\n\n.support-hub__faq-card {\n  background: #fff;\n  border-radius: 20px;\n  box-shadow: 0 8px 40px rgba(0, 0, 0, 0.06);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.12);\n  overflow: hidden;\n}\n\n.support-hub__faq-header {\n  padding: 28px 32px 0;\n}\n\n.support-hub__faq-header-top {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.support-hub__faq-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 14px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.support-hub__faq-icon ion-icon {\n  font-size: 24px;\n  color: #fff;\n}\n\n.support-hub__faq-title {\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  margin: 0 0 4px;\n}\n\n.support-hub__faq-desc {\n  font-size: 0.9rem;\n  color: #777;\n  margin: 0;\n  line-height: 1.5;\n}\n\n.support-hub__faq-header .faq-split__search {\n  margin: 0 0 24px;\n  max-width: 100%;\n}\n\n.support-hub__faq-header .faq-split__search-input {\n  padding: 14px 44px 14px 48px;\n  border-radius: 12px;\n  font-size: 0.9rem;\n}\n\n.support-hub__faq-card .faq-split__container {\n  border-top: 1px solid rgba(var(--user-accent-rgb), 0.1);\n}\n\n.support-hub__faq-card .faq-split__left {\n  border-radius: 0;\n  border: none;\n  box-shadow: none;\n  border-right: 1px solid rgba(var(--user-accent-rgb), 0.1);\n}\n\n.support-hub__faq-card .faq-split__right {\n  position: static;\n}\n\n.support-hub__faq-card .faq-split__answer-panel {\n  border: none;\n  box-shadow: none;\n  border-radius: 0;\n  padding: 32px;\n}\n\n.appointment-form {\n  background: #fff;\n  border-radius: 0;\n  padding: 36px;\n}\n\n.form-group {\n  margin-bottom: 24px;\n}\n\n.form-row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n}\n\n.form-label {\n  display: block;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  margin-bottom: 8px;\n}\n\n.form-input,\n.form-select,\n.form-textarea {\n  width: 100%;\n  padding: 14px 16px;\n  border: 1px solid #ddd;\n  border-radius: 10px;\n  font-size: 1rem;\n  background: #fafafa;\n  transition: border-color 0.2s, box-shadow 0.2s;\n}\n\n.form-input:focus,\n.form-select:focus,\n.form-textarea:focus {\n  outline: none;\n  border-color: var(--user-accent-light);\n  box-shadow: 0 0 0 3px rgba(var(--user-accent-rgb), 0.15);\n  background: #fff;\n}\n\n.form-textarea {\n  resize: vertical;\n  min-height: 100px;\n}\n\n.form-submit {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  width: 100%;\n  padding: 16px 24px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  color: #fff;\n  font-size: 1rem;\n  font-weight: 600;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: transform 0.2s, box-shadow 0.2s;\n}\n\n.form-submit:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n.form-submit ion-icon {\n  font-size: 1.2rem;\n}\n\n.form-disclaimer {\n  font-size: 0.8rem;\n  color: #888;\n  text-align: center;\n  margin-top: 16px;\n}\n\n.faq-section {\n  background: transparent;\n  padding: 0;\n  margin: 0;\n}\n\n.faq-section .container {\n  max-width: none;\n  padding: 0;\n  margin: 0;\n  width: 100%;\n}\n\n.faq-grid {\n  display: grid;\n  grid-template-columns: 1fr 1.5fr;\n  gap: 0;\n  min-height: 500px;\n  width: 100%;\n}\n\n.faq-intro {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  padding: 60px 50px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.faq-intro__title {\n  font-size: 2.2rem;\n  font-weight: 700;\n  color: #fff;\n  margin-bottom: 24px;\n  line-height: 1.2;\n}\n\n.faq-intro__text {\n  font-size: 1rem;\n  color: rgba(255, 255, 255, 0.9);\n  line-height: 1.8;\n}\n\n.faq-list {\n  background: #f5f5f5;\n  padding: 40px 50px;\n  display: block;\n}\n\n.faq-list::-webkit-scrollbar {\n  width: 8px;\n}\n\n.faq-list::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 4px;\n}\n\n.faq-list::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 4px;\n}\n\n.faq-list::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.3);\n}\n\n.faq-question::-webkit-details-marker {\n  display: none;\n}\n\n.faq-question::marker {\n  display: none;\n  content: \"\";\n}\n\n.faq-item {\n  border: none;\n  border-bottom: 2px solid rgba(0, 0, 0, 0.1);\n  border-radius: 0;\n  margin-bottom: 0;\n  overflow: hidden;\n  transition: background 0.2s ease;\n}\n\n.faq-item:first-child {\n  border-top: 2px solid rgba(0, 0, 0, 0.1);\n}\n\n.faq-item:hover {\n  background: rgba(var(--user-accent-rgb), 0.08);\n}\n\n.faq-item[open] {\n  background: rgba(var(--user-accent-rgb), 0.05);\n}\n\n.faq-question {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 24px 16px;\n  cursor: pointer;\n  font-size: 16px !important;\n  font-weight: 500;\n  color: #333 !important;\n  background: transparent;\n  transition: color 0.2s ease;\n  line-height: 1.5;\n  list-style: none;\n  font-family: 'Poppins', sans-serif !important;\n  -webkit-font-smoothing: antialiased;\n}\n\n.faq-question span {\n  flex: 1;\n  font-size: 16px !important;\n  color: inherit;\n  letter-spacing: normal;\n  text-transform: none;\n  opacity: 1 !important;\n  visibility: visible !important;\n  display: inline-block !important;\n}\n\n.faq-question:hover {\n  color: #1a1a1a;\n  background: transparent;\n}\n\n.faq-item[open] .faq-question {\n  color: #1a1a1a;\n  background: transparent;\n}\n\n.faq-icon {\n  font-size: 1.2rem;\n  color: #888;\n  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s ease;\n  flex-shrink: 0;\n}\n\n.faq-item[open] .faq-icon {\n  transform: rotate(180deg);\n  color: var(--user-accent-light);\n}\n\n.faq-question:hover .faq-icon {\n  color: var(--user-accent-light);\n}\n\n.faq-answer {\n  display: block;\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), \n              padding 0.4s cubic-bezier(0.4, 0, 0.2, 1),\n              opacity 0.3s ease;\n  background: transparent;\n  padding: 0 16px;\n  opacity: 0;\n}\n\n.faq-item[open] .faq-answer {\n  max-height: 1000px;\n  padding: 0 16px 24px 16px;\n  opacity: 1;\n}\n\n.faq-answer-inner {\n  display: block;\n}\n\n.faq-answer p {\n  font-size: 0.95rem;\n  color: #555;\n  line-height: 1.7;\n  transform: translateY(0);\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.1s,\n              opacity 0.3s ease 0.1s;\n  opacity: 1;\n}\n\n.faq-item:not([open]) .faq-answer p {\n  transform: translateY(-10px);\n  opacity: 0;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n.faq-section-new {\n  background: linear-gradient(180deg, rgba(var(--user-accent-rgb), 0.04) 0%, #fff 50%, rgba(var(--user-accent-rgb), 0.04) 100%);\n  padding: 80px 20px 100px;\n  position: relative;\n  overflow: hidden;\n}\n\n.faq-section-new::before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 6px;\n  background: linear-gradient(90deg, var(--user-accent-light), var(--user-accent), var(--user-accent-light));\n}\n\n.faq-header {\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.faq-header__icon {\n  width: 80px;\n  height: 80px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 24px;\n  box-shadow: 0 10px 30px rgba(var(--user-accent-rgb), 0.35);\n  animation: faq-icon-float 4s ease-in-out infinite;\n}\n\n@keyframes faq-icon-float {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-8px); }\n}\n\n.faq-header__icon ion-icon {\n  font-size: 40px;\n  color: #fff;\n}\n\n.faq-header__title {\n  font-size: 2.5rem;\n  font-weight: 800;\n  color: #2d2d2d;\n  margin-bottom: 16px;\n  background: linear-gradient(135deg, #2d2d2d 0%, #555 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.faq-header__subtitle {\n  font-size: 1.15rem;\n  color: #666;\n  max-width: 600px;\n  margin: 0 auto;\n  line-height: 1.7;\n}\n\n.faq-search-wrapper {\n  max-width: 600px;\n  margin: 0 auto 32px;\n}\n\n.faq-search {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.faq-search__icon {\n  position: absolute;\n  left: 20px;\n  font-size: 1.3rem;\n  color: #888;\n  transition: color 0.3s ease;\n  pointer-events: none;\n}\n\n.faq-search__input {\n  width: 100%;\n  padding: 18px 50px 18px 54px;\n  border: 2px solid #e0e0e0;\n  border-radius: 50px;\n  font-size: 1rem;\n  background: #fff;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);\n}\n\n.faq-search__input:hover {\n  border-color: var(--user-accent-light);\n}\n\n.faq-search__input:focus {\n  outline: none;\n  border-color: var(--user-accent-light);\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb), 0.2), 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.faq-search__input:focus + .faq-search__icon,\n.faq-search:focus-within .faq-search__icon {\n  color: var(--user-accent-light);\n}\n\n.faq-search__clear {\n  position: absolute;\n  right: 16px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  color: #888;\n  transition: color 0.3s ease, transform 0.3s ease;\n}\n\n.faq-search__clear:hover {\n  color: #c62828;\n  transform: scale(1.1);\n}\n\n.faq-search__clear ion-icon {\n  font-size: 1.3rem;\n}\n\n.faq-search__results {\n  font-size: 0.9rem;\n  color: #666;\n  text-align: center;\n  margin-top: 12px;\n  min-height: 20px;\n}\n\n.faq-categories {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 12px;\n  margin-bottom: 48px;\n}\n\n.faq-category-pill {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: #fff;\n  border: 2px solid rgba(var(--user-accent-rgb), 0.15);\n  border-radius: 50px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #555;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n.faq-category-pill ion-icon {\n  font-size: 1.1rem;\n  transition: transform 0.3s ease;\n}\n\n.faq-category-pill:hover {\n  border-color: var(--user-accent-light);\n  background: rgba(var(--user-accent-rgb), 0.08);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.2);\n}\n\n.faq-category-pill:hover ion-icon {\n  transform: scale(1.15);\n}\n\n.faq-category-pill.active {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-color: transparent;\n  color: #fff;\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n.faq-container {\n  max-width: 900px;\n  margin: 0 auto;\n}\n\n.faq-category-group {\n  margin-bottom: 40px;\n}\n\n.faq-category-group.hidden {\n  display: none;\n}\n\n.faq-category-header {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 20px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid rgba(var(--user-accent-rgb), 0.3);\n}\n\n.faq-category-header__icon {\n  width: 44px;\n  height: 44px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.2) 0%, rgba(var(--user-accent-rgb), 0.15) 100%);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.faq-category-header__icon ion-icon {\n  font-size: 22px;\n  color: var(--user-accent);\n}\n\n.faq-category-header__title {\n  flex: 1;\n  font-size: 1.3rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  margin: 0;\n}\n\n.faq-category-header__count {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  color: #fff;\n  font-size: 0.85rem;\n  font-weight: 700;\n  padding: 6px 14px;\n  border-radius: 50px;\n}\n\n.faq-items-wrapper {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.faq-card {\n  background: #fff;\n  border-radius: 16px;\n  border: 2px solid rgba(var(--user-accent-rgb), 0.15);\n  overflow: hidden;\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.04);\n}\n\n.faq-card:hover {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 8px 30px rgba(var(--user-accent-rgb), 0.2);\n  transform: translateY(-4px);\n}\n\n.faq-card[open] {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 12px 40px rgba(var(--user-accent-rgb), 0.25);\n}\n\n.faq-card.hidden {\n  display: none;\n}\n\n.faq-card__question {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 20px 24px;\n  cursor: pointer;\n  list-style: none;\n  transition: background 0.3s ease;\n}\n\n.faq-card__question::-webkit-details-marker {\n  display: none;\n}\n\n.faq-card__question::marker {\n  display: none;\n  content: \"\";\n}\n\n.faq-card:hover .faq-card__question {\n  background: rgba(var(--user-accent-rgb), 0.05);\n}\n\n.faq-card[open] .faq-card__question {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.12) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n  border-bottom: 1px solid rgba(var(--user-accent-rgb), 0.2);\n}\n\n.faq-card__number {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  color: #fff;\n  font-size: 0.85rem;\n  font-weight: 700;\n  border-radius: 10px;\n  flex-shrink: 0;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.faq-card:hover .faq-card__number {\n  transform: scale(1.08);\n  box-shadow: 0 4px 12px rgba(var(--user-accent-rgb), 0.4);\n}\n\n.faq-card__icon-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: rgba(var(--user-accent-rgb), 0.15);\n  border-radius: 8px;\n  flex-shrink: 0;\n  transition: all 0.3s ease;\n}\n\n.faq-card__icon-wrapper ion-icon {\n  font-size: 18px;\n  color: var(--user-accent);\n  transition: transform 0.3s ease;\n}\n\n.faq-card:hover .faq-card__icon-wrapper {\n  background: rgba(var(--user-accent-rgb), 0.25);\n}\n\n.faq-card:hover .faq-card__icon-wrapper ion-icon {\n  transform: rotate(15deg);\n}\n\n.faq-card__text {\n  flex: 1;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  line-height: 1.5;\n}\n\n.faq-card__chevron {\n  font-size: 1.3rem;\n  color: #888;\n  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s ease;\n  flex-shrink: 0;\n}\n\n.faq-card:hover .faq-card__chevron {\n  color: var(--user-accent-light);\n}\n\n.faq-card[open] .faq-card__chevron {\n  transform: rotate(180deg);\n  color: var(--user-accent);\n}\n\n.faq-card__answer {\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1),\n              padding 0.5s cubic-bezier(0.4, 0, 0.2, 1),\n              opacity 0.4s ease;\n  opacity: 0;\n  background: #fff;\n}\n\n.faq-card[open] .faq-card__answer {\n  max-height: 500px;\n  opacity: 1;\n}\n\n.faq-card__answer-content {\n  padding: 20px 24px 16px;\n  padding-left: 76px;\n}\n\n.faq-card__answer-content p {\n  font-size: 0.95rem;\n  color: #555;\n  line-height: 1.8;\n  margin: 0;\n}\n\n.faq-card__feedback {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px 24px 20px;\n  padding-left: 76px;\n  border-top: 1px dashed rgba(0, 0, 0, 0.08);\n}\n\n.faq-card__feedback-label {\n  font-size: 0.85rem;\n  color: #888;\n  margin-right: 8px;\n}\n\n.faq-feedback-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 16px;\n  border: 2px solid #e0e0e0;\n  border-radius: 50px;\n  background: #fff;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #666;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.faq-feedback-btn ion-icon {\n  font-size: 1rem;\n  transition: transform 0.3s ease;\n}\n\n.faq-feedback-btn--yes:hover {\n  background: #e8f5e9;\n  border-color: #4caf50;\n  color: #2e7d32;\n}\n\n.faq-feedback-btn--yes:hover ion-icon {\n  transform: scale(1.2);\n}\n\n.faq-feedback-btn--no:hover {\n  background: #ffebee;\n  border-color: #ef5350;\n  color: #c62828;\n}\n\n.faq-feedback-btn--no:hover ion-icon {\n  transform: scale(1.2);\n}\n\n.faq-feedback-btn.selected {\n  transform: scale(0.95);\n}\n\n.faq-feedback-btn--yes.selected {\n  background: #4caf50;\n  border-color: #4caf50;\n  color: #fff;\n}\n\n.faq-feedback-btn--no.selected {\n  background: #ef5350;\n  border-color: #ef5350;\n  color: #fff;\n}\n\n.faq-no-results {\n  text-align: center;\n  padding: 60px 20px;\n  color: #888;\n}\n\n.faq-no-results ion-icon {\n  font-size: 48px;\n  color: #ddd;\n  margin-bottom: 16px;\n}\n\n.faq-no-results p {\n  font-size: 1.1rem;\n}\n\n.faq-highlight {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.4) 0%, rgba(var(--user-accent-rgb), 0.4) 100%);\n  color: inherit;\n  padding: 2px 4px;\n  border-radius: 4px;\n}\n\n[data-theme=\"dark\"] .faq-highlight {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.3) 0%, rgba(var(--user-accent-rgb), 0.3) 100%);\n}\n\n.faq-cta {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 24px;\n  max-width: 900px;\n  margin: 60px auto 0;\n  padding: 32px 40px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 20px;\n  box-shadow: 0 15px 40px rgba(var(--user-accent-rgb), 0.35);\n}\n\n.faq-cta__content {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.faq-cta__icon {\n  font-size: 48px;\n  color: #fff;\n  flex-shrink: 0;\n}\n\n.faq-cta__text h3 {\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #fff;\n  margin: 0 0 6px 0;\n}\n\n.faq-cta__text p {\n  font-size: 1rem;\n  color: rgba(255, 255, 255, 0.9);\n  margin: 0;\n}\n\n.faq-cta__btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 10px;\n  padding: 16px 32px;\n  background: #fff;\n  color: var(--user-accent);\n  font-size: 1rem;\n  font-weight: 700;\n  border-radius: 50px;\n  text-decoration: none;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n  flex-shrink: 0;\n}\n\n.faq-cta__btn:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  background: rgba(var(--user-accent-rgb), 0.03);\n}\n\n.faq-cta__btn ion-icon {\n  font-size: 1.2rem;\n}\n\n.faq-items-wrapper .faq-card {\n  opacity: 0;\n  transform: translateY(20px);\n  animation: faq-card-enter 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.faq-items-wrapper .faq-card:nth-child(1) { animation-delay: 0.1s; }\n.faq-items-wrapper .faq-card:nth-child(2) { animation-delay: 0.15s; }\n.faq-items-wrapper .faq-card:nth-child(3) { animation-delay: 0.2s; }\n.faq-items-wrapper .faq-card:nth-child(4) { animation-delay: 0.25s; }\n.faq-items-wrapper .faq-card:nth-child(5) { animation-delay: 0.3s; }\n.faq-items-wrapper .faq-card:nth-child(6) { animation-delay: 0.35s; }\n\n@keyframes faq-card-enter {\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.faq-split {\n  padding: 0;\n  position: relative;\n}\n\n.faq-split::before {\n  display: none;\n}\n\n.faq-split__header {\n  display: none;\n}\n\n.faq-split__header-icon {\n  width: 80px;\n  height: 80px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 24px;\n  box-shadow: 0 10px 30px rgba(var(--user-accent-rgb), 0.35);\n  animation: faq-icon-float 4s ease-in-out infinite;\n}\n\n.faq-split__header-icon ion-icon {\n  font-size: 40px;\n  color: #fff;\n}\n\n.faq-split__title {\n  font-size: 2.5rem;\n  font-weight: 800;\n  color: #2d2d2d;\n  margin-bottom: 16px;\n  background: linear-gradient(135deg, #2d2d2d 0%, #555 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.faq-split__subtitle {\n  font-size: 1.15rem;\n  color: #666;\n  max-width: 600px;\n  margin: 0 auto;\n  line-height: 1.7;\n}\n\n.faq-split__search {\n  position: relative;\n  max-width: 600px;\n  margin: 0 auto 40px;\n  display: flex;\n  align-items: center;\n}\n\n.faq-split__search-icon {\n  position: absolute;\n  left: 20px;\n  font-size: 1.3rem;\n  color: #888;\n  pointer-events: none;\n  transition: color 0.3s ease;\n}\n\n.faq-split__search-input {\n  width: 100%;\n  padding: 18px 50px 18px 54px;\n  border: 2px solid #e0e0e0;\n  border-radius: 50px;\n  font-size: 1rem;\n  background: #fff;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);\n}\n\n.faq-split__search-input:focus {\n  outline: none;\n  border-color: var(--user-accent-light);\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb), 0.2), 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.faq-split__search:focus-within .faq-split__search-icon {\n  color: var(--user-accent-light);\n}\n\n.faq-split__search-clear {\n  position: absolute;\n  right: 16px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  color: #888;\n  transition: color 0.3s ease, transform 0.3s ease;\n}\n\n.faq-split__search-clear:hover {\n  color: #c62828;\n  transform: scale(1.1);\n}\n\n.faq-split__container {\n  display: grid;\n  grid-template-columns: 380px 1fr;\n  gap: 0;\n  min-height: 500px;\n}\n\n.faq-split__left {\n  background: #fff;\n  border-radius: 0;\n  border: none;\n  overflow: hidden;\n  box-shadow: none;\n  display: flex;\n  flex-direction: column;\n}\n\n.faq-split__tabs {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  padding: 16px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, rgba(var(--user-accent-rgb), 0.05) 100%);\n  border-bottom: 2px solid rgba(var(--user-accent-rgb), 0.15);\n}\n\n.faq-split__tab {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 14px;\n  background: #fff;\n  border: 2px solid rgba(var(--user-accent-rgb), 0.15);\n  border-radius: 25px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  color: #666;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.faq-split__tab ion-icon {\n  font-size: 0.95rem;\n}\n\n.faq-split__tab:hover {\n  border-color: var(--user-accent-light);\n  background: rgba(var(--user-accent-rgb), 0.1);\n}\n\n.faq-split__tab.active {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-color: transparent;\n  color: #fff;\n  box-shadow: 0 4px 12px rgba(var(--user-accent-rgb), 0.35);\n}\n\n.faq-split__questions {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n  max-height: 520px;\n}\n\n.faq-split__questions::-webkit-scrollbar {\n  width: 6px;\n}\n\n.faq-split__questions::-webkit-scrollbar-track {\n  background: #f5f5f5;\n  border-radius: 3px;\n}\n\n.faq-split__questions::-webkit-scrollbar-thumb {\n  background: var(--user-accent-light);\n  border-radius: 3px;\n}\n\n.faq-split__question {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  padding: 16px;\n  margin: 4px 0;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  border: 2px solid transparent;\n}\n\n.faq-split__question:hover {\n  background: rgba(var(--user-accent-rgb), 0.08);\n  border-color: rgba(var(--user-accent-rgb), 0.3);\n}\n\n.faq-split__question.active {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, rgba(var(--user-accent-rgb), 0.1) 100%);\n  border-color: var(--user-accent-light);\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.2);\n}\n\n.faq-split__question.hidden {\n  display: none;\n}\n\n.faq-split__question-num {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 36px;\n  height: 36px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  color: #fff;\n  font-size: 0.8rem;\n  font-weight: 700;\n  border-radius: 10px;\n  flex-shrink: 0;\n}\n\n.faq-split__question.active .faq-split__question-num {\n  box-shadow: 0 4px 12px rgba(var(--user-accent-rgb), 0.4);\n  transform: scale(1.05);\n}\n\n.faq-split__question-content {\n  flex: 1;\n  min-width: 0;\n}\n\n.faq-split__question-cat {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.75rem;\n  color: #888;\n  margin-bottom: 4px;\n}\n\n.faq-split__question-cat ion-icon {\n  font-size: 0.85rem;\n  color: var(--user-accent);\n}\n\n.faq-split__question-text {\n  display: block;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  line-height: 1.4;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.faq-split__question-arrow {\n  font-size: 1.2rem;\n  color: #ccc;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n}\n\n.faq-split__question:hover .faq-split__question-arrow,\n.faq-split__question.active .faq-split__question-arrow {\n  color: var(--user-accent-light);\n  transform: translateX(3px);\n}\n\n.faq-split__no-results {\n  text-align: center;\n  padding: 40px 20px;\n  color: #888;\n}\n\n.faq-split__no-results ion-icon {\n  font-size: 40px;\n  color: #ddd;\n  margin-bottom: 12px;\n}\n\n.faq-split__no-results p {\n  font-size: 0.95rem;\n  margin: 0;\n}\n\n.faq-split__right {\n  position: static;\n  height: fit-content;\n}\n\n.faq-split__answer-panel {\n  background: #fff;\n  border-radius: 0;\n  border: none;\n  padding: 32px;\n  box-shadow: none;\n  animation: faq-answer-slide-in 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n@keyframes faq-answer-slide-in {\n  from {\n    opacity: 0;\n    transform: translateX(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n.faq-split__answer-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n}\n\n.faq-split__answer-cat {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 16px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, rgba(var(--user-accent-rgb), 0.1) 100%);\n  border-radius: 20px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent);\n}\n\n.faq-split__answer-cat ion-icon {\n  font-size: 1rem;\n}\n\n.faq-split__answer-num {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #888;\n}\n\n.faq-split__answer-question {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  line-height: 1.4;\n  margin: 0 0 24px 0;\n  padding-bottom: 20px;\n  border-bottom: 2px solid rgba(var(--user-accent-rgb), 0.15);\n}\n\n.faq-split__answer-content {\n  margin-bottom: 24px;\n}\n\n.faq-split__answer-content p {\n  font-size: 1.05rem;\n  color: #555;\n  line-height: 1.9;\n  margin: 0;\n}\n\n.faq-split__answer-tips {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.08) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n  border-radius: 16px;\n  padding: 20px 24px;\n  margin-bottom: 24px;\n  border-left: 4px solid var(--user-accent);\n}\n\n.faq-split__answer-tips h4 {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.95rem;\n  font-weight: 700;\n  color: var(--user-accent);\n  margin: 0 0 10px 0;\n}\n\n.faq-split__answer-tips h4 ion-icon {\n  font-size: 1.2rem;\n  color: var(--user-accent);\n}\n\n.faq-split__answer-tips p {\n  font-size: 0.95rem;\n  color: #666;\n  line-height: 1.7;\n  margin: 0;\n}\n\n.faq-split__answer-feedback {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 20px 0;\n  border-top: 1px dashed #e0e0e0;\n  margin-bottom: 16px;\n}\n\n.faq-split__feedback-label {\n  font-size: 0.9rem;\n  color: #888;\n}\n\n.faq-split__feedback-btns {\n  display: flex;\n  gap: 10px;\n}\n\n.faq-split__feedback-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 18px;\n  border: 2px solid #e0e0e0;\n  border-radius: 25px;\n  background: #fff;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #666;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.faq-split__feedback-btn ion-icon {\n  font-size: 1rem;\n}\n\n.faq-split__feedback-btn[data-feedback=\"yes\"]:hover {\n  background: #e8f5e9;\n  border-color: #4caf50;\n  color: #2e7d32;\n}\n\n.faq-split__feedback-btn[data-feedback=\"no\"]:hover {\n  background: #ffebee;\n  border-color: #ef5350;\n  color: #c62828;\n}\n\n.faq-split__feedback-btn.selected[data-feedback=\"yes\"] {\n  background: #4caf50;\n  border-color: #4caf50;\n  color: #fff;\n}\n\n.faq-split__feedback-btn.selected[data-feedback=\"no\"] {\n  background: #ef5350;\n  border-color: #ef5350;\n  color: #fff;\n}\n\n.faq-split__answer-nav {\n  display: flex;\n  justify-content: space-between;\n  gap: 16px;\n}\n\n.faq-split__nav-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, rgba(var(--user-accent-rgb), 0.05) 100%);\n  border: 2px solid rgba(var(--user-accent-rgb), 0.15);\n  border-radius: 12px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #666;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.faq-split__nav-btn:hover:not(:disabled) {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-color: transparent;\n  color: #fff;\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.faq-split__nav-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n\n.faq-split__nav-btn ion-icon {\n  font-size: 1.1rem;\n}\n\n.faq-split__empty {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: #fff;\n  border-radius: 20px;\n  border: 2px dashed #e0e0e0;\n  padding: 60px 40px;\n  text-align: center;\n  color: #888;\n}\n\n.faq-split__empty ion-icon {\n  font-size: 64px;\n  color: #ddd;\n  margin-bottom: 20px;\n}\n\n.faq-split__empty p {\n  font-size: 1rem;\n  margin: 0;\n}\n\n.faq-split__cta {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 24px;\n  max-width: 1300px;\n  margin: 48px auto 0;\n  padding: 32px 40px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 20px;\n  box-shadow: 0 15px 40px rgba(var(--user-accent-rgb), 0.35);\n  position: relative;\n  z-index: 1;\n}\n\n.faq-split__cta-content {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.faq-split__cta-icon {\n  font-size: 48px;\n  color: #fff;\n  flex-shrink: 0;\n}\n\n.faq-split__cta-text h3 {\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #fff;\n  margin: 0 0 6px 0;\n}\n\n.faq-split__cta-text p {\n  font-size: 1rem;\n  color: rgba(255, 255, 255, 0.9);\n  margin: 0;\n}\n\n.faq-split__cta-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 10px;\n  padding: 16px 32px;\n  background: #fff;\n  color: var(--user-accent);\n  font-size: 1rem;\n  font-weight: 700;\n  border-radius: 50px;\n  text-decoration: none;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n  flex-shrink: 0;\n}\n\n.faq-split__cta-btn:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  background: rgba(var(--user-accent-rgb), 0.03);\n}\n\n.faq-split__highlight {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.4) 0%, rgba(var(--user-accent-rgb), 0.4) 100%);\n  color: inherit;\n  padding: 2px 4px;\n  border-radius: 4px;\n}\n\n[data-theme=\"dark\"] .faq-split {\n  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);\n}\n\n[data-theme=\"dark\"] .faq-split::before {\n  background: linear-gradient(90deg, rgba(var(--user-accent-rgb), 0.6), rgba(var(--user-accent-rgb), 0.6), rgba(var(--user-accent-rgb), 0.6));\n}\n\n[data-theme=\"dark\"] .faq-split__title {\n  background: linear-gradient(135deg, #fff 0%, #e0e0e0 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n}\n\n[data-theme=\"dark\"] .faq-split__subtitle {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-split__search-input {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .faq-split__search-input:focus {\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .faq-split__left {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__tabs {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.08) 0%, rgba(var(--user-accent-rgb), 0.04) 100%);\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__tab {\n  background: #16213e;\n  border-color: #2d3a5a;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-split__tab:hover {\n  background: rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .faq-split__question:hover {\n  background: rgba(var(--user-accent-rgb), 0.1);\n}\n\n[data-theme=\"dark\"] .faq-split__question.active {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, rgba(var(--user-accent-rgb), 0.1) 100%);\n  border-color: rgba(var(--user-accent-rgb), 0.4);\n}\n\n[data-theme=\"dark\"] .faq-split__question-cat {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .faq-split__question-text {\n  color: #e0e0e0;\n}\n\n.faq-split__answer-data,\n.faq-split__tip-data {\n  display: none !important;\n}\n\n[data-theme=\"dark\"] .faq-split__questions::-webkit-scrollbar-track {\n  background: #16213e;\n}\n\n[data-theme=\"dark\"] .faq-split__answer-panel {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__answer-question {\n  color: #fff;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__answer-content p {\n  color: #bbb;\n}\n\n[data-theme=\"dark\"] .faq-split__answer-tips {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n}\n\n[data-theme=\"dark\"] .faq-split__answer-tips p {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-split__answer-feedback {\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__feedback-btn {\n  background: #16213e;\n  border-color: #2d3a5a;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-split__nav-btn {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, rgba(var(--user-accent-rgb), 0.05) 100%);\n  border-color: #2d3a5a;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-split__empty {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .faq-split__highlight {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.3) 0%, rgba(var(--user-accent-rgb), 0.3) 100%);\n}\n\n@media (max-width: 968px) {\n  .faq-split__container {\n    grid-template-columns: 1fr;\n    gap: 24px;\n  }\n\n  .faq-split__right {\n    position: static;\n  }\n\n  .faq-split__questions {\n    max-height: 400px;\n  }\n\n  .faq-split__answer-panel {\n    animation: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .faq-split {\n    padding: 60px 16px 80px;\n  }\n\n  .faq-split__title {\n    font-size: 1.8rem;\n  }\n\n  .faq-split__subtitle {\n    font-size: 1rem;\n  }\n\n  .faq-split__tabs {\n    justify-content: center;\n  }\n\n  .faq-split__tab span {\n    display: none;\n  }\n\n  .faq-split__tab {\n    padding: 10px 12px;\n  }\n\n  .faq-split__question {\n    padding: 14px 12px;\n  }\n\n  .faq-split__question-cat {\n    display: none;\n  }\n\n  .faq-split__question-text {\n    white-space: normal;\n  }\n\n  .faq-split__answer-panel {\n    padding: 24px 20px;\n  }\n\n  .faq-split__answer-question {\n    font-size: 1.25rem;\n  }\n\n  .faq-split__answer-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n\n  .faq-split__answer-feedback {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 12px;\n  }\n\n  .faq-split__cta {\n    flex-direction: column;\n    text-align: center;\n    padding: 28px 24px;\n  }\n\n  .faq-split__cta-content {\n    flex-direction: column;\n    text-align: center;\n  }\n\n  .faq-split__nav-btn {\n    padding: 10px 16px;\n    font-size: 0.85rem;\n  }\n}\n\n[data-theme=\"dark\"] .faq-section-new {\n  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);\n}\n\n[data-theme=\"dark\"] .faq-section-new::before {\n  background: linear-gradient(90deg, rgba(var(--user-accent-rgb), 0.6), rgba(var(--user-accent-rgb), 0.6), rgba(var(--user-accent-rgb), 0.6));\n}\n\n[data-theme=\"dark\"] .faq-header__title {\n  background: linear-gradient(135deg, #fff 0%, #d0d0d0 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n[data-theme=\"dark\"] .faq-header__subtitle {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .faq-search__input {\n  background: #252542;\n  border-color: #3a3a5c;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .faq-search__input::placeholder {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .faq-search__input:hover {\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .faq-search__input:focus {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb), 0.15), 0 8px 25px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .faq-category-pill {\n  background: #252542;\n  border-color: #3a3a5c;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .faq-category-pill:hover {\n  border-color: var(--user-accent-light);\n  background: rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .faq-category-header {\n  border-bottom-color: rgba(var(--user-accent-rgb), 0.2);\n}\n\n[data-theme=\"dark\"] .faq-category-header__icon {\n  background: rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .faq-category-header__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .faq-card {\n  background: #252542;\n  border-color: #3a3a5c;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .faq-card:hover {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 8px 30px rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .faq-card[open] {\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .faq-card:hover .faq-card__question,\n[data-theme=\"dark\"] .faq-card[open] .faq-card__question {\n  background: rgba(var(--user-accent-rgb), 0.08);\n}\n\n[data-theme=\"dark\"] .faq-card__text {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .faq-card__chevron {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .faq-card__answer {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .faq-card__answer-content p {\n  color: #bbb;\n}\n\n[data-theme=\"dark\"] .faq-card__feedback {\n  border-top-color: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .faq-card__feedback-label {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .faq-feedback-btn {\n  background: #1a1a2e;\n  border-color: #3a3a5c;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .faq-feedback-btn--yes:hover {\n  background: rgba(76, 175, 80, 0.2);\n  border-color: #4caf50;\n  color: #81c784;\n}\n\n[data-theme=\"dark\"] .faq-feedback-btn--no:hover {\n  background: rgba(239, 83, 80, 0.2);\n  border-color: #ef5350;\n  color: #ef9a9a;\n}\n\n[data-theme=\"dark\"] .faq-no-results {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .faq-no-results ion-icon {\n  color: #444;\n}\n\n[data-theme=\"dark\"] .faq-cta {\n  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);\n}\n\n@media (max-width: 768px) {\n  .faq-section-new {\n    padding: 60px 16px 80px;\n  }\n\n  .faq-header__title {\n    font-size: 1.8rem;\n  }\n\n  .faq-header__subtitle {\n    font-size: 1rem;\n  }\n\n  .faq-header__icon {\n    width: 64px;\n    height: 64px;\n  }\n\n  .faq-header__icon ion-icon {\n    font-size: 32px;\n  }\n\n  .faq-categories {\n    gap: 8px;\n  }\n\n  .faq-category-pill {\n    padding: 10px 16px;\n    font-size: 0.8rem;\n  }\n\n  .faq-category-pill span {\n    display: none;\n  }\n\n  .faq-category-pill ion-icon {\n    margin: 0;\n  }\n\n  .faq-category-header {\n    gap: 12px;\n  }\n\n  .faq-category-header__icon {\n    width: 36px;\n    height: 36px;\n  }\n\n  .faq-category-header__icon ion-icon {\n    font-size: 18px;\n  }\n\n  .faq-category-header__title {\n    font-size: 1.1rem;\n  }\n\n  .faq-card__question {\n    padding: 16px;\n    gap: 12px;\n  }\n\n  .faq-card__number {\n    width: 32px;\n    height: 32px;\n    font-size: 0.8rem;\n  }\n\n  .faq-card__icon-wrapper {\n    display: none;\n  }\n\n  .faq-card__text {\n    font-size: 0.9rem;\n  }\n\n  .faq-card__answer-content {\n    padding: 16px;\n    padding-left: 60px;\n  }\n\n  .faq-card__feedback {\n    padding: 12px 16px;\n    padding-left: 60px;\n    flex-wrap: wrap;\n  }\n\n  .faq-cta {\n    flex-direction: column;\n    text-align: center;\n    padding: 24px;\n  }\n\n  .faq-cta__content {\n    flex-direction: column;\n  }\n\n  .faq-cta__icon {\n    font-size: 40px;\n  }\n}\n\n@media (max-width: 480px) {\n  .faq-card__answer-content,\n  .faq-card__feedback {\n    padding-left: 16px;\n  }\n\n  .faq-feedback-btn span {\n    display: none;\n  }\n\n  .faq-feedback-btn {\n    padding: 10px 14px;\n  }\n}\n\n[data-theme=\"dark\"] .support-hero {\n  background: linear-gradient(135deg, #1a1a2e 0%, #252542 100%);\n}\n\n[data-theme=\"dark\"] .support-hero::before {\n  background: radial-gradient(circle at 30% 70%, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 50%),\n              radial-gradient(circle at 70% 30%, rgba(var(--user-accent-rgb), 0.05) 0%, transparent 50%),\n              radial-gradient(circle at 50% 50%, rgba(var(--user-accent-rgb), 0.04) 0%, transparent 60%);\n}\n\n[data-theme=\"dark\"] .support-hero::after {\n  background: \n    radial-gradient(ellipse 600px 300px at 20% 80%, rgba(var(--user-accent-rgb), 0.06) 0%, transparent 70%),\n    radial-gradient(ellipse 500px 400px at 80% 20%, rgba(var(--user-accent-rgb), 0.04) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .support-hero__decorative--1 {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .support-hero__decorative--2 {\n  background: linear-gradient(45deg, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .support-hero__decorative--3 {\n  background: linear-gradient(180deg, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .support-hero__badge {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.2) 0%, rgba(var(--user-accent-rgb), 0.1) 100%);\n  border-color: rgba(var(--user-accent-rgb), 0.35);\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .support-hero__title {\n  color: #fff;\n  background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n}\n\n[data-theme=\"dark\"] .support-hero__subtitle {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .support-hero__input {\n  background: #2a2a4a;\n  border-color: #3a3a5a;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .support-hero__input:hover {\n  border-color: #4a4a6a;\n}\n\n[data-theme=\"dark\"] .support-hero__input:focus {\n  border-color: var(--user-accent);\n  background-color: #2d2d4d;\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb), 0.2), 0 8px 30px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .support-hero__input::placeholder {\n  color: rgba(255, 255, 255, 0.5);\n}\n\n[data-theme=\"dark\"] .crisis-card,\n[data-theme=\"dark\"] .quicklink-card,\n[data-theme=\"dark\"] .helpline-card {\n  background: #252542;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .crisis-card:hover,\n[data-theme=\"dark\"] .quicklink-card:hover,\n[data-theme=\"dark\"] .helpline-card:hover {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .helplines-expect {\n  background: linear-gradient(135deg, #252542 0%, #2a2a4a 100%);\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .helplines-expect__icon {\n  background: linear-gradient(135deg, #4a90d9 0%, #357abd 100%);\n}\n\n[data-theme=\"dark\"] .helplines-expect__content h3 {\n  color: #a0c4e8;\n}\n\n[data-theme=\"dark\"] .helplines-expect__content p {\n  color: #8ab4d6;\n}\n\n[data-theme=\"dark\"] .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #3a3a5a 0%, #454570 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--crisis .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #4a2828 0%, #5a3030 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--lgbtq .helpline-card__icon-wrapper,\n[data-theme=\"dark\"] .helpline-card--trans .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #3a2845 0%, #4a3055 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--youth .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #4a3520 0%, #5a4028 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--veterans .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #1a3050 0%, #253a5a 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--specialized .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #1a3a38 0%, #254545 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card--general .helpline-card__icon-wrapper {\n  background: linear-gradient(135deg, #1a3050 0%, #253a5a 100%);\n}\n\n[data-theme=\"dark\"] .helpline-card__badge {\n  background: linear-gradient(135deg, #2a4a30 0%, #355540 100%);\n  color: #8bc48f;\n}\n\n[data-theme=\"dark\"] .helpline-card__badge--hours {\n  background: linear-gradient(135deg, #4a3a20 0%, #5a4525 100%);\n  color: #5BA4E6;\n}\n\n[data-theme=\"dark\"] .helpline-card__wait {\n  color: #8bc48f;\n}\n\n[data-theme=\"dark\"] .helpline-card__wait ion-icon {\n  color: #8bc48f;\n}\n\n[data-theme=\"dark\"] .helpline-card__tty {\n  border-top-color: #3a3a5a;\n  color: #888;\n}\n\n[data-theme=\"dark\"] .helpline-contact {\n  background: linear-gradient(135deg, #2a2a4a 0%, #353558 100%);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .helpline-contact--call {\n  background: linear-gradient(135deg, #2a4a30 0%, #355540 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact--call ion-icon {\n  color: #8bc48f;\n}\n\n[data-theme=\"dark\"] .helpline-contact--text {\n  background: linear-gradient(135deg, #1a3050 0%, #253a5a 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact--text ion-icon {\n  color: #64b5f6;\n}\n\n[data-theme=\"dark\"] .helpline-contact--chat {\n  background: linear-gradient(135deg, #3a2845 0%, #4a3055 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact--chat ion-icon {\n  color: #ce93d8;\n}\n\n[data-theme=\"dark\"] .helpline-contact--call:hover {\n  background: linear-gradient(135deg, #43a047 0%, #2e7d32 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact--text:hover {\n  background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact--chat:hover {\n  background: linear-gradient(135deg, #8e24aa 0%, #7b1fa2 100%);\n}\n\n[data-theme=\"dark\"] .helpline-contact:hover {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .helpline-contact:hover ion-icon {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .helplines-section {\n  background: \n    radial-gradient(circle at 20% 30%, rgba(109, 179, 242, 0.08) 0%, transparent 50%),\n    radial-gradient(circle at 80% 70%, rgba(100, 181, 246, 0.06) 0%, transparent 50%),\n    #1a1a2e;\n}\n\n[data-theme=\"dark\"] .helplines-section::before {\n  background-image: radial-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px);\n}\n\n[data-theme=\"dark\"] .helplines-wave-separator .wave-1 {\n  fill: rgba(109, 179, 242, 0.08);\n}\n\n[data-theme=\"dark\"] .helplines-wave-separator .wave-2 {\n  fill: rgba(109, 179, 242, 0.12);\n}\n\n[data-theme=\"dark\"] .helplines-wave-separator .wave-3 {\n  fill: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .helplines-decoration--1 {\n  background: linear-gradient(135deg, rgba(229, 57, 53, 0.15) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .helplines-decoration--2 {\n  background: linear-gradient(135deg, rgba(156, 39, 176, 0.12) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .helplines-decoration--3 {\n  background: linear-gradient(135deg, rgba(33, 150, 243, 0.15) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .helplines-decoration--4 {\n  background: linear-gradient(135deg, rgba(0, 137, 123, 0.15) 0%, transparent 70%);\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill {\n  background: #252542;\n  border-color: #3a3a5c;\n  color: #b0b0c0;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill:hover {\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"crisis\"] {\n  border-color: #5a3030;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"lgbtq\"] {\n  border-color: #4a3055;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"youth\"] {\n  border-color: #5a4028;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"veterans\"] {\n  border-color: #253a5a;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"specialized\"] {\n  border-color: #254545;\n}\n\n[data-theme=\"dark\"] .helplines-filter-pill[data-filter=\"general\"] {\n  border-color: #253a5a;\n}\n\n[data-theme=\"dark\"] .helpline-copy-btn {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .helpline-copy-btn:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n[data-theme=\"dark\"] .helpline-copy-btn ion-icon {\n  color: #b0b0c0;\n}\n\n[data-theme=\"dark\"] .helpline-card__availability {\n  border-top-color: #3a3a5c;\n}\n\n[data-theme=\"dark\"] .availability-badge--call {\n  background: linear-gradient(135deg, #2a4a30 0%, #355540 100%);\n  color: #8bc48f;\n}\n\n[data-theme=\"dark\"] .availability-badge--text {\n  background: linear-gradient(135deg, #1a3050 0%, #253a5a 100%);\n  color: #64b5f6;\n}\n\n[data-theme=\"dark\"] .availability-badge--chat {\n  background: linear-gradient(135deg, #3a2845 0%, #4a3055 100%);\n  color: #ce93d8;\n}\n\n[data-theme=\"dark\"] .availability-badge--tty {\n  background: linear-gradient(135deg, #4a3520 0%, #5a4028 100%);\n  color: #ffb74d;\n}\n\n[data-theme=\"dark\"] .crisis-section,\n[data-theme=\"dark\"] .helplines-section,\n[data-theme=\"dark\"] .selfhelp-section,\n[data-theme=\"dark\"] .faq-section {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .quicklinks-section,\n[data-theme=\"dark\"] .resources-section {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .support-hub {\n  background: linear-gradient(180deg, #1a1a2e 0%, #16213e 40%, #1e2a47 70%, #1a1a2e 100%);\n}\n\n[data-theme=\"dark\"] .support-hub__circle {\n  border-color: rgba(var(--user-accent-rgb), 0.06);\n}\n\n[data-theme=\"dark\"] .support-hub__dots {\n  background-image: radial-gradient(circle, rgba(var(--user-accent-rgb), 0.08) 1.5px, transparent 1.5px);\n}\n\n[data-theme=\"dark\"] .support-hub__header-badge {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.15) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n  border-color: rgba(var(--user-accent-rgb), 0.25);\n}\n\n[data-theme=\"dark\"] .support-hub__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .support-hub__subtitle {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .support-hub__form-card {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .support-hub__form-header {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, rgba(var(--user-accent-rgb), 0.04) 100%);\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .support-hub__form-title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .support-hub__form-desc {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .support-hub__trust-item {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .support-hub__trust-value {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .support-hub__trust-label {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .support-hub__faq-card {\n  background: #1e2a47;\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .support-hub__faq-title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .support-hub__faq-desc {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .support-hub__faq-card .faq-split__container {\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .support-hub__faq-card .faq-split__left {\n  border-color: #2d3a5a;\n}\n\n[data-theme=\"dark\"] .crisis-banner {\n  background: linear-gradient(135deg, rgba(229, 115, 115, 0.15) 0%, rgba(26, 26, 46, 0.8) 100%);\n  border-color: #e57373;\n}\n\n[data-theme=\"dark\"] .crisis-banner__title {\n  color: #ef9a9a;\n}\n\n[data-theme=\"dark\"] .crisis-banner__text {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .crisis-card,\n[data-theme=\"dark\"] .helpline-card,\n[data-theme=\"dark\"] .selfhelp-card,\n[data-theme=\"dark\"] .faq-item {\n  background: #252542;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .resource-card {\n  background: #1a1a2e;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .crisis-card__icon {\n  background: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .crisis-card__icon ion-icon,\n[data-theme=\"dark\"] .quicklink-card__icon ion-icon,\n[data-theme=\"dark\"] .helpline-card ion-icon,\n[data-theme=\"dark\"] .resource-card ion-icon,\n[data-theme=\"dark\"] .selfhelp-card__header ion-icon {\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .crisis-card__title,\n[data-theme=\"dark\"] .quicklink-card__title,\n[data-theme=\"dark\"] .helpline-card__title,\n[data-theme=\"dark\"] .resource-card__title,\n[data-theme=\"dark\"] .selfhelp-card__title,\n[data-theme=\"dark\"] .section-title,\n[data-theme=\"dark\"] .support-hub__form-title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .crisis-card__text,\n[data-theme=\"dark\"] .quicklink-card__text,\n[data-theme=\"dark\"] .helpline-card__text,\n[data-theme=\"dark\"] .resource-card__text,\n[data-theme=\"dark\"] .selfhelp-card__text,\n[data-theme=\"dark\"] .section-subtitle {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .selfhelp-card__steps,\n[data-theme=\"dark\"] .selfhelp-card__list {\n  color: rgba(255, 255, 255, 0.65);\n}\n\n[data-theme=\"dark\"] .appointment-form {\n  background: transparent;\n}\n\n[data-theme=\"dark\"] .form-label {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .form-input,\n[data-theme=\"dark\"] .form-select,\n[data-theme=\"dark\"] .form-textarea {\n  background: #1a1a2e;\n  border-color: #3a3a5a;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .faq-item {\n  border-bottom: 2px solid rgba(255, 255, 255, 0.15);\n}\n\n[data-theme=\"dark\"] .faq-item:first-child {\n  border-top: 2px solid rgba(255, 255, 255, 0.15);\n}\n\n[data-theme=\"dark\"] .faq-item:hover {\n  background: rgba(var(--user-accent-rgb), 0.08);\n}\n\n[data-theme=\"dark\"] .faq-item[open] {\n  background: rgba(var(--user-accent-rgb), 0.05);\n}\n\n[data-theme=\"dark\"] .faq-question {\n  background: transparent;\n  color: #fff !important;\n  font-size: 1rem !important;\n  font-family: 'Poppins', sans-serif !important;\n}\n\n[data-theme=\"dark\"] .faq-question span {\n  color: #fff !important;\n  font-size: 1rem !important;\n  opacity: 1 !important;\n  visibility: visible !important;\n}\n\n[data-theme=\"dark\"] .faq-question:hover,\n[data-theme=\"dark\"] .faq-item[open] .faq-question {\n  background: transparent;\n  color: #fff !important;\n}\n\n[data-theme=\"dark\"] .faq-answer {\n  background: transparent;\n}\n\n[data-theme=\"dark\"] .faq-answer p {\n  color: rgba(255, 255, 255, 0.85) !important;\n}\n\n[data-theme=\"dark\"] .faq-intro {\n  background: linear-gradient(135deg, #3a3a5a 0%, #2a2a4a 100%);\n}\n\n[data-theme=\"dark\"] .faq-list {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .faq-list::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .faq-list::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n[data-theme=\"dark\"] .faq-list::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n[data-high-contrast=\"true\"] .support-hero,\n[data-high-contrast=\"true\"] .crisis-section,\n[data-high-contrast=\"true\"] .quicklinks-section,\n[data-high-contrast=\"true\"] .helplines-section,\n[data-high-contrast=\"true\"] .resources-section,\n[data-high-contrast=\"true\"] .selfhelp-section,\n[data-high-contrast=\"true\"] .appointment-section,\n[data-high-contrast=\"true\"] .faq-section {\n  background: #000;\n}\n\n[data-high-contrast=\"true\"] .support-hero__title,\n[data-high-contrast=\"true\"] .section-title,\n[data-high-contrast=\"true\"] .appointment-info__title,\n[data-high-contrast=\"true\"] .crisis-banner__title {\n  color: #ffff00;\n}\n\n[data-high-contrast=\"true\"] .support-hero__subtitle,\n[data-high-contrast=\"true\"] .section-subtitle,\n[data-high-contrast=\"true\"] .crisis-banner__text,\n[data-high-contrast=\"true\"] .appointment-info__text {\n  color: #fff;\n}\n\n[data-high-contrast=\"true\"] .crisis-card,\n[data-high-contrast=\"true\"] .quicklink-card,\n[data-high-contrast=\"true\"] .helpline-card,\n[data-high-contrast=\"true\"] .resource-card,\n[data-high-contrast=\"true\"] .selfhelp-card,\n[data-high-contrast=\"true\"] .appointment-form {\n  background: #000;\n  border: 2px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-item {\n  border: none;\n  border-bottom: 1px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-item:first-child {\n  border-top: 1px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .crisis-card__title,\n[data-high-contrast=\"true\"] .quicklink-card__title,\n[data-high-contrast=\"true\"] .helpline-card__title,\n[data-high-contrast=\"true\"] .resource-card__title,\n[data-high-contrast=\"true\"] .selfhelp-card__title {\n  color: #ffff00;\n}\n\n[data-high-contrast=\"true\"] .crisis-card__text,\n[data-high-contrast=\"true\"] .quicklink-card__text,\n[data-high-contrast=\"true\"] .helpline-card__text,\n[data-high-contrast=\"true\"] .resource-card__text,\n[data-high-contrast=\"true\"] .selfhelp-card__text,\n[data-high-contrast=\"true\"] .selfhelp-card__steps,\n[data-high-contrast=\"true\"] .selfhelp-card__list,\n[data-high-contrast=\"true\"] .faq-answer p {\n  color: #fff;\n}\n\n[data-high-contrast=\"true\"] .form-submit {\n  background: #ffff00;\n  color: #000;\n}\n\n[data-high-contrast=\"true\"] .faq-grid {\n  border: 2px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-intro {\n  background: #000;\n  border-right: 2px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-intro__title {\n  color: #ffff00;\n}\n\n[data-high-contrast=\"true\"] .faq-intro__text {\n  color: #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-list {\n  background: #000;\n}\n\n[data-high-contrast=\"true\"] .faq-list::-webkit-scrollbar-track {\n  background: #333;\n}\n\n[data-high-contrast=\"true\"] .faq-list::-webkit-scrollbar-thumb {\n  background: #fff;\n}\n\n[data-high-contrast=\"true\"] .faq-list::-webkit-scrollbar-thumb:hover {\n  background: #ffff00;\n}\n\n[data-high-contrast=\"true\"] .faq-question {\n  background: transparent;\n  color: #fff;\n}\n\n@media (max-width: 768px) {\n  .support-hero {\n    padding: 60px 20px;\n  }\n\n  .support-hero__title {\n    font-size: 2rem;\n  }\n\n  .support-hero__subtitle {\n    font-size: 1rem;\n  }\n\n  .crisis-banner {\n    flex-direction: column;\n    text-align: center;\n  }\n\n  .crisis-banner__actions {\n    width: 100%;\n    justify-content: center;\n  }\n\n  .quicklinks-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  .helplines-grid:not(.list-view) {\n    grid-template-columns: 1fr;\n  }\n\n  .helpline-card {\n    padding: 16px;\n    grid-template-columns: 36px 1fr;\n    gap: 0 10px;\n  }\n\n  .helpline-card__icon-wrapper {\n    width: 36px;\n    height: 36px;\n  }\n\n  .helpline-card__contacts {\n    flex-direction: column;\n    gap: 6px;\n  }\n\n  .helpline-contact {\n    justify-content: center;\n    width: 100%;\n    text-align: center;\n  }\n\n  .helpline-card__header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 4px;\n  }\n\n  .support-hub {\n    padding: 60px 16px 80px;\n  }\n\n  .support-hub__title {\n    font-size: 2rem;\n  }\n\n  .support-hub__subtitle {\n    font-size: 1rem;\n  }\n\n  .support-hub__grid {\n    gap: 32px;\n    padding: 0 16px;\n  }\n\n  .support-hub__trust-row {\n    grid-template-columns: 1fr;\n  }\n\n  .support-hub__form-header {\n    padding: 20px 20px;\n  }\n\n  .support-hub__form-card .appointment-form {\n    padding: 20px;\n  }\n\n  .support-hub__faq-header {\n    padding: 20px 20px 0;\n  }\n\n  .support-hub__faq-card .faq-split__container {\n    grid-template-columns: 1fr;\n  }\n\n  .support-hub__faq-card .faq-split__left {\n    border-right: none;\n    border-bottom: 1px solid rgba(var(--user-accent-rgb), 0.1);\n  }\n\n  .form-row {\n    grid-template-columns: 1fr;\n  }\n\n  .section-title {\n    font-size: 1.6rem;\n  }\n\n  .faq-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .faq-intro {\n    padding: 32px 24px;\n  }\n\n  .faq-intro__title {\n    font-size: 1.6rem;\n  }\n\n  .faq-list {\n    padding: 24px 20px;\n  }\n\n  [data-high-contrast=\"true\"] .faq-intro {\n    border-right: none;\n    border-bottom: 2px solid #fff;\n  }\n}\n\n@media (max-width: 480px) {\n  .quicklinks-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .crisis-cards {\n    grid-template-columns: 1fr;\n  }\n\n  .helplines-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n@media (min-width: 1200px) {\n  .support-hero {\n    padding: 100px 40px;\n  }\n\n  .support-hero__title {\n    font-size: 3.5rem;\n  }\n\n  .support-hero__subtitle {\n    font-size: 1.3rem;\n  }\n\n  .section-title {\n    font-size: 2.4rem;\n  }\n\n  .section-subtitle {\n    font-size: 1.1rem;\n  }\n\n  .crisis-banner {\n    padding: 32px 40px;\n  }\n\n  .crisis-banner__title {\n    font-size: 1.6rem;\n  }\n\n  .crisis-banner__number {\n    font-size: 2.8rem;\n  }\n\n  .crisis-cards {\n    gap: 28px;\n  }\n\n  .crisis-card {\n    padding: 32px;\n  }\n\n  .crisis-card__title {\n    font-size: 1.3rem;\n  }\n\n  .crisis-card__text {\n    font-size: 1.05rem;\n  }\n\n  .quicklink-card {\n    padding: 32px 24px;\n  }\n\n  .quicklink-card__icon {\n    font-size: 3rem;\n  }\n\n  .quicklink-card__title {\n    font-size: 1.15rem;\n  }\n\n  .helpline-card {\n    padding: 24px;\n  }\n\n  .helpline-card__title {\n    font-size: 1.1rem;\n  }\n\n  .helpline-card__text {\n    font-size: 0.95rem;\n  }\n\n  .resource-card {\n    padding: 32px;\n  }\n\n  .resource-card__title {\n    font-size: 1.35rem;\n  }\n\n  .resource-card__text {\n    font-size: 1.05rem;\n  }\n\n  .selfhelp-card {\n    padding: 36px;\n  }\n\n  .selfhelp-card__title {\n    font-size: 1.25rem;\n  }\n\n  .selfhelp-card__text {\n    font-size: 1.05rem;\n  }\n\n  .selfhelp-card__steps,\n  .selfhelp-card__list {\n    font-size: 1rem;\n  }\n\n  .appointment-section {\n    padding: 100px 40px;\n  }\n\n  .appointment-content {\n    max-width: 1300px;\n    gap: 80px;\n  }\n\n  .appointment-info__title {\n    font-size: 2.6rem;\n  }\n\n  .appointment-info__text {\n    font-size: 1.15rem;\n  }\n\n  .appointment-feature {\n    font-size: 1.1rem;\n  }\n\n  .appointment-form {\n    padding: 48px;\n  }\n\n  .form-label {\n    font-size: 1.05rem;\n  }\n\n  .form-input,\n  .form-select,\n  .form-textarea {\n    padding: 18px 20px;\n    font-size: 1.1rem;\n  }\n\n  .form-submit {\n    padding: 20px 32px;\n    font-size: 1.15rem;\n  }\n\n  .faq-question {\n    font-size: 1.15rem;\n  }\n\n  .faq-answer p {\n    font-size: 1.05rem;\n  }\n}\n\n@media (min-width: 1600px) {\n  .support-hero__title {\n    font-size: 4rem;\n  }\n\n  .support-hero__subtitle {\n    font-size: 1.4rem;\n  }\n\n  .section-title {\n    font-size: 2.8rem;\n  }\n\n  .appointment-content {\n    max-width: 1500px;\n  }\n\n  .appointment-info__title {\n    font-size: 3rem;\n  }\n\n  .appointment-info__text {\n    font-size: 1.25rem;\n  }\n\n  .appointment-form {\n    padding: 56px;\n  }\n\n  .form-input,\n  .form-select,\n  .form-textarea {\n    padding: 20px 24px;\n    font-size: 1.15rem;\n  }\n\n  .faq-question {\n    font-size: 1.25rem;\n  }\n\n  .faq-answer p {\n    font-size: 1.1rem;\n  }\n}\n\n.selfhelp-card--interactive {\n  cursor: pointer;\n  border: none;\n  text-align: left;\n  width: 100%;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.selfhelp-card--interactive:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);\n}\n\n.selfhelp-card__cta {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  color: var(--blue-crayola, #2068A8);\n  font-weight: 600;\n  font-size: 0.95rem;\n}\n\n.selfhelp-card__cta ion-icon {\n  font-size: 1.4rem;\n  transition: transform 0.3s ease;\n}\n\n.selfhelp-card--interactive:hover .selfhelp-card__cta ion-icon {\n  transform: scale(1.2);\n}\n\n.wellness-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease, visibility 0.3s ease;\n}\n\n.wellness-modal.is-active {\n  opacity: 1;\n  visibility: visible;\n}\n\n.wellness-modal__backdrop {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n}\n\n.wellness-modal__content {\n  position: relative;\n  background: #fff;\n  border-radius: 24px;\n  padding: 40px;\n  max-width: 500px;\n  width: 90%;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.25);\n  transform: scale(0.9) translateY(20px);\n  transition: transform 0.3s ease;\n}\n\n.wellness-modal.is-active .wellness-modal__content {\n  transform: scale(1) translateY(0);\n}\n\n.wellness-modal__content--grounding {\n  max-width: 550px;\n}\n\n.wellness-modal__close {\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s ease;\n}\n\n.wellness-modal__close:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.wellness-modal__close ion-icon {\n  font-size: 1.5rem;\n  color: #555;\n}\n\n.wellness-modal__title {\n  font-size: 1.8rem;\n  font-weight: 700;\n  text-align: center;\n  margin-bottom: 24px;\n  color: #2d2d2d;\n}\n\n.breathing-patterns {\n  display: flex;\n  gap: 8px;\n  justify-content: center;\n  margin-bottom: 32px;\n  flex-wrap: wrap;\n}\n\n.breathing-pattern {\n  padding: 10px 18px;\n  border: 2px solid #e0dcd6;\n  background: #fff;\n  border-radius: 25px;\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: #555;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.breathing-pattern:hover {\n  border-color: var(--blue-crayola, #2068A8);\n}\n\n.breathing-pattern.is-active {\n  background: var(--blue-crayola, #2068A8);\n  border-color: var(--blue-crayola, #2068A8);\n  color: #fff;\n}\n\n.breathing-circle-container {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 300px;\n  margin-bottom: 24px;\n}\n\n.breathing-glow {\n  position: absolute;\n  width: 160px;\n  height: 160px;\n  border-radius: 50%;\n  background: radial-gradient(circle, var(--user-accent, #2068A8) 0%, transparent 70%);\n  opacity: 0.15;\n  transition: opacity 1s ease, width 1s ease, height 1s ease;\n  pointer-events: none;\n  z-index: 0;\n}\n\n.breathing-circle-container.is-active .breathing-glow {\n  opacity: 0.2;\n}\n\n.breathing-circle-container.is-active.phase-inhale .breathing-glow {\n  width: 280px;\n  height: 280px;\n  opacity: 0.35;\n}\n\n.breathing-circle-container.is-active.phase-hold .breathing-glow {\n  width: 280px;\n  height: 280px;\n  opacity: 0.25;\n}\n\n.breathing-circle-container.is-active.phase-exhale .breathing-glow {\n  width: 160px;\n  height: 160px;\n  opacity: 0.12;\n}\n\n.breathing-ring {\n  position: absolute;\n  border-radius: 50%;\n  border: 2px solid var(--user-accent, #2068A8);\n  opacity: 0;\n  pointer-events: none;\n  z-index: 1;\n}\n\n.breathing-ring--1 {\n  width: 190px;\n  height: 190px;\n}\n\n.breathing-ring--2 {\n  width: 220px;\n  height: 220px;\n}\n\n.breathing-ring--3 {\n  width: 250px;\n  height: 250px;\n}\n\n.breathing-circle-container.is-active .breathing-ring {\n  animation: breathing-ring-ripple 3s ease-out infinite;\n}\n\n.breathing-circle-container.is-active .breathing-ring--2 {\n  animation-delay: 1s;\n}\n\n.breathing-circle-container.is-active .breathing-ring--3 {\n  animation-delay: 2s;\n}\n\n@keyframes breathing-ring-ripple {\n  0% {\n    opacity: 0.5;\n    transform: scale(0.85);\n  }\n  100% {\n    opacity: 0;\n    transform: scale(1.3);\n  }\n}\n\n.breathing-progress-ring {\n  position: absolute;\n  width: 195px;\n  height: 195px;\n  z-index: 2;\n  transform: rotate(-90deg);\n}\n\n.breathing-progress-ring__track {\n  fill: none;\n  stroke: rgba(0, 0, 0, 0.06);\n  stroke-width: 4;\n}\n\n.breathing-progress-ring__fill {\n  fill: none;\n  stroke: var(--user-accent, #2068A8);\n  stroke-width: 4;\n  stroke-linecap: round;\n  stroke-dasharray: 590.6;\n  stroke-dashoffset: 590.6;\n  transition: stroke-dashoffset 0.3s linear;\n}\n\n.breathing-circle {\n  position: relative;\n  width: 170px;\n  height: 170px;\n  border-radius: 50%;\n  background: linear-gradient(145deg, var(--user-accent, #2068A8) 0%, var(--user-accent-light, #7BBDF7) 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 3;\n  transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.8s ease;\n  box-shadow: 0 8px 30px rgba(var(--user-accent-rgb, 212, 168, 83), 0.35);\n}\n\n.breathing-circle.is-inhaling {\n  transform: scale(1.3);\n  box-shadow: 0 12px 50px rgba(var(--user-accent-rgb, 212, 168, 83), 0.5);\n}\n\n.breathing-circle.is-holding {\n  transform: scale(1.3);\n  box-shadow: 0 10px 40px rgba(var(--user-accent-rgb, 212, 168, 83), 0.4);\n}\n\n.breathing-circle.is-exhaling {\n  transform: scale(1);\n  box-shadow: 0 6px 25px rgba(var(--user-accent-rgb, 212, 168, 83), 0.25);\n}\n\n.breathing-circle__inner {\n  text-align: center;\n  color: #fff;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2px;\n}\n\n.breathing-circle__phase-icon {\n  font-size: 1.6rem;\n  line-height: 1;\n  margin-bottom: 2px;\n  min-height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.breathing-icon {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.breathing-icon--inhale {\n  animation: icon-float-up 1.5s ease-in-out infinite;\n}\n\n.breathing-icon--exhale {\n  animation: icon-float-down 1.5s ease-in-out infinite;\n}\n\n.breathing-icon--hold {\n  animation: icon-pulse 1.2s ease-in-out infinite;\n}\n\n@keyframes icon-float-up {\n  0%, 100% { transform: translateY(2px); }\n  50% { transform: translateY(-4px); }\n}\n\n@keyframes icon-float-down {\n  0%, 100% { transform: translateY(-2px); }\n  50% { transform: translateY(4px); }\n}\n\n@keyframes icon-pulse {\n  0%, 100% { transform: scale(1); opacity: 0.8; }\n  50% { transform: scale(1.15); opacity: 1; }\n}\n\n.breathing-circle__text {\n  display: block;\n  font-size: 1.1rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  transition: opacity 0.3s ease;\n}\n\n.breathing-circle__timer {\n  display: block;\n  font-size: 2rem;\n  font-weight: 800;\n  margin-top: 0;\n  line-height: 1.1;\n  min-height: 32px;\n}\n\n.breathing-controls {\n  display: flex;\n  justify-content: center;\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.breathing-btn {\n  padding: 14px 40px;\n  border: none;\n  border-radius: 30px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.breathing-btn--start {\n  background: linear-gradient(135deg, var(--user-accent, #2068A8) 0%, var(--user-accent-light, #7BBDF7) 100%);\n  color: #fff;\n  box-shadow: 0 4px 20px rgba(var(--user-accent-rgb, 212, 168, 83), 0.4);\n}\n\n.breathing-btn--start:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 25px rgba(var(--user-accent-rgb, 212, 168, 83), 0.5);\n}\n\n.breathing-btn--stop {\n  background: #e74c3c;\n  color: #fff;\n}\n\n.breathing-btn--stop:hover {\n  background: #c0392b;\n}\n\n.breathing-stats {\n  display: flex;\n  justify-content: center;\n  gap: 40px;\n  padding: 16px 0;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n  margin-bottom: 16px;\n}\n\n.breathing-stat {\n  text-align: center;\n}\n\n.breathing-stat__value {\n  display: block;\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: var(--user-accent, #2068A8);\n}\n\n.breathing-stat__label {\n  font-size: 0.85rem;\n  color: #777;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.breathing-audio-toggle {\n  display: flex;\n  justify-content: center;\n}\n\n.breathing-audio-label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.95rem;\n  color: #555;\n  cursor: pointer;\n}\n\n.breathing-audio-label input[type=\"checkbox\"] {\n  width: 18px;\n  height: 18px;\n  accent-color: var(--user-accent, #2068A8);\n}\n\n.grounding-intro {\n  text-align: center;\n  color: #666;\n  margin-bottom: 24px;\n  font-size: 1rem;\n}\n\n.grounding-progress {\n  width: 100%;\n  height: 6px;\n  background: rgba(var(--user-accent-rgb), 0.12);\n  border-radius: 3px;\n  margin-bottom: 32px;\n  overflow: hidden;\n}\n\n.grounding-progress__bar {\n  height: 100%;\n  width: 0%;\n  background: linear-gradient(90deg, var(--blue-crayola, #2068A8) 0%, var(--user-accent-light) 100%);\n  border-radius: 3px;\n  transition: width 0.5s ease;\n}\n\n.grounding-step {\n  display: none;\n  animation: grounding-fadein 0.4s ease forwards;\n}\n\n.grounding-step.is-active {\n  display: block;\n}\n\n@keyframes grounding-fadein {\n  from {\n    opacity: 0;\n    transform: translateX(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n.grounding-step__icon {\n  position: relative;\n  width: 80px;\n  height: 80px;\n  margin: 0 auto 20px;\n  background: linear-gradient(135deg, var(--blue-crayola, #2068A8) 0%, var(--user-accent-light) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.grounding-step__icon ion-icon {\n  font-size: 2.5rem;\n  color: #fff;\n}\n\n.grounding-step__icon--complete {\n  background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);\n}\n\n.grounding-step__number {\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  width: 30px;\n  height: 30px;\n  background: #fff;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 700;\n  font-size: 1rem;\n  color: var(--blue-crayola, #2068A8);\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);\n}\n\n.grounding-step__title {\n  text-align: center;\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  margin-bottom: 8px;\n}\n\n.grounding-step__text {\n  text-align: center;\n  color: #666;\n  margin-bottom: 20px;\n}\n\n.grounding-step__inputs {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.grounding-input {\n  width: 100%;\n  padding: 14px 18px;\n  border: 2px solid #e0dcd6;\n  border-radius: 12px;\n  font-size: 1rem;\n  background: #fff;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.grounding-input:focus {\n  outline: none;\n  border-color: var(--blue-crayola, #2068A8);\n  box-shadow: 0 0 0 4px rgba(212, 168, 83, 0.15);\n}\n\n.grounding-input:not(:placeholder-shown) {\n  border-color: #4caf50;\n  background: rgba(76, 175, 80, 0.05);\n}\n\n.grounding-nav {\n  display: flex;\n  justify-content: space-between;\n  gap: 12px;\n  margin-top: 24px;\n}\n\n.grounding-nav__btn {\n  flex: 1;\n  padding: 14px 24px;\n  border: none;\n  border-radius: 12px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.grounding-nav__btn--prev {\n  background: rgba(var(--user-accent-rgb), 0.12);\n  color: #555;\n}\n\n.grounding-nav__btn--prev:hover:not(:disabled) {\n  background: #ddd8d1;\n}\n\n.grounding-nav__btn--prev:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.grounding-nav__btn--next {\n  background: linear-gradient(135deg, var(--blue-crayola, #2068A8) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n}\n\n.grounding-nav__btn--next:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(212, 168, 83, 0.4);\n}\n\n.grounding-nav__btn--restart {\n  background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);\n  color: #fff;\n}\n\n.grounding-nav__btn--restart:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);\n}\n\n[data-theme=\"dark\"] .wellness-modal__content {\n  background: linear-gradient(145deg, #2d2b3d 0%, #3d3a50 100%);\n}\n\n[data-theme=\"dark\"] .wellness-modal__title {\n  color: var(--user-accent-soft);\n}\n\n[data-theme=\"dark\"] .wellness-modal__close {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .wellness-modal__close ion-icon {\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .breathing-pattern {\n  background: #3d3a50;\n  border-color: #4d4a60;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .breathing-pattern.is-active {\n  background: var(--blue-crayola, #2068A8);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .grounding-intro,\n[data-theme=\"dark\"] .grounding-step__text {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .grounding-step__title {\n  color: var(--user-accent-soft);\n}\n\n[data-theme=\"dark\"] .grounding-input {\n  background: #3d3a50;\n  border-color: #4d4a60;\n  color: var(--user-accent-soft);\n}\n\n[data-theme=\"dark\"] .grounding-input::placeholder {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .grounding-progress {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .grounding-nav__btn--prev {\n  background: #4d4a60;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .breathing-progress-ring__track {\n  stroke: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .breathing-stats {\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .breathing-audio-label {\n  color: #ccc;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .support-hero::before {\n    animation: none;\n  }\n  \n  .support-hero__decorative {\n    animation: none;\n  }\n  \n  .support-hero__badge,\n  .support-hero__title,\n  .support-hero__subtitle,\n  .support-hero__search {\n    animation: none;\n    opacity: 1;\n    transform: none;\n  }\n  \n  .animate-section,\n  .animate-stagger > *,\n  .animate-slide-left,\n  .animate-slide-right,\n  .animate-scale {\n    opacity: 1;\n    transform: none;\n    transition: none;\n  }\n  \n  .crisis-btn--primary {\n    animation: none;\n  }\n  \n  .section-divider::before {\n    animation: none;\n  }\n  \n  .back-to-top {\n    animation: none;\n  }\n  \n  .breathing-circle {\n    transition: none;\n  }\n  \n  .breathing-circle-container.is-active .breathing-ring {\n    animation: none;\n    opacity: 0.3;\n  }\n\n  .breathing-icon--inhale,\n  .breathing-icon--exhale,\n  .breathing-icon--hold {\n    animation: none;\n  }\n\n  .breathing-glow {\n    transition: none;\n  }\n  \n  .grounding-step {\n    animation: none;\n  }\n  \n  .wellness-modal__content {\n    transition: none;\n  }\n}\n\n@media (max-width: 600px) {\n  .wellness-modal__content {\n    padding: 24px 20px;\n    border-radius: 16px;\n  }\n  \n  .wellness-modal__title {\n    font-size: 1.5rem;\n  }\n  \n  .breathing-patterns {\n    gap: 6px;\n  }\n  \n  .breathing-pattern {\n    padding: 8px 14px;\n    font-size: 0.85rem;\n  }\n  \n  .breathing-circle-container {\n    height: 240px;\n  }\n  \n  .breathing-circle {\n    width: 140px;\n    height: 140px;\n  }\n\n  .breathing-progress-ring {\n    width: 160px;\n    height: 160px;\n  }\n\n  .breathing-circle__phase-icon {\n    font-size: 1.3rem;\n  }\n  \n  .breathing-circle__text {\n    font-size: 0.9rem;\n  }\n  \n  .breathing-circle__timer {\n    font-size: 1.6rem;\n  }\n  \n  .breathing-ring--1 {\n    width: 155px;\n    height: 155px;\n  }\n  \n  .breathing-ring--2 {\n    width: 180px;\n    height: 180px;\n  }\n  \n  .breathing-ring--3 {\n    width: 205px;\n    height: 205px;\n  }\n\n  .breathing-glow {\n    width: 130px;\n    height: 130px;\n  }\n\n  .breathing-circle-container.is-active.phase-inhale .breathing-glow {\n    width: 220px;\n    height: 220px;\n  }\n\n  .breathing-circle-container.is-active.phase-hold .breathing-glow {\n    width: 220px;\n    height: 220px;\n  }\n  \n  .breathing-stats {\n    gap: 24px;\n  }\n  \n  .breathing-stat__value {\n    font-size: 1.5rem;\n  }\n  \n  .grounding-step__icon {\n    width: 60px;\n    height: 60px;\n  }\n  \n  .grounding-step__icon ion-icon {\n    font-size: 1.8rem;\n  }\n  \n  .grounding-step__number {\n    width: 24px;\n    height: 24px;\n    font-size: 0.85rem;\n  }\n  \n  .grounding-nav {\n    flex-direction: column;\n  }\n}\n\n.quote-callout {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.04) 0%, rgba(var(--user-accent-rgb), 0.08) 100%);\n  border-left: 4px solid var(--user-accent-light);\n  border-radius: 0 16px 16px 0;\n  padding: 28px 32px;\n  margin: 40px 0;\n  position: relative;\n  overflow: hidden;\n}\n\n.quote-callout::before {\n  content: \"\\201C\";\n  position: absolute;\n  top: -10px;\n  left: 20px;\n  font-size: 6rem;\n  font-family: Georgia, serif;\n  color: rgba(var(--user-accent-rgb), 0.2);\n  line-height: 1;\n}\n\n.quote-callout__text {\n  font-size: 1.2rem;\n  font-style: italic;\n  color: #555;\n  line-height: 1.7;\n  position: relative;\n  z-index: 1;\n  margin-bottom: 12px;\n}\n\n.quote-callout__author {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: var(--user-accent-dark);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.quote-callout__author::before {\n  content: \"â€”\";\n}\n\n[data-theme=\"dark\"] .quote-callout {\n  background: linear-gradient(135deg, #2a2a4a 0%, #252542 100%);\n  border-left-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .quote-callout::before {\n  color: rgba(var(--user-accent-rgb), 0.1);\n}\n\n[data-theme=\"dark\"] .quote-callout__text {\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .quote-callout__author {\n  color: var(--user-accent-light);\n}\n\n.section-icon {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 60px;\n  height: 60px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  border-radius: 16px;\n  margin-bottom: 20px;\n  box-shadow: 0 8px 25px rgba(var(--user-accent-rgb), 0.25);\n}\n\n.section-icon ion-icon {\n  font-size: 28px;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .section-icon {\n  background: linear-gradient(135deg, #3d3a50 0%, #4d4a60 100%);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .section-divider::before {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .section-divider--reverse::before {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .section-title {\n  background: linear-gradient(135deg, #fff 0%, #ccc 100%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.crisis-btn,\n.helpline-contact {\n  position: relative;\n  overflow: hidden;\n}\n\n.ripple-effect {\n  position: absolute;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.4);\n  transform: scale(0);\n  animation: ripple 0.6s ease-out;\n  pointer-events: none;\n}\n\n@keyframes ripple {\n  to {\n    transform: scale(4);\n    opacity: 0;\n  }\n}\n","path":null,"size_bytes":128326,"size_tokens":null},"js/helplines.js":{"content":"// ==================== HELPLINES ====================\n\n// --- Initialization ---\ndocument.addEventListener('DOMContentLoaded', function() {\n  initHelplinesFilters();\n  initCopyButtons();\n  initViewToggle();\n  initMobileCategories();\n});\n\n// --- Filter Pills ---\nfunction initHelplinesFilters() {\n  const filterPills = document.querySelectorAll('.helplines-filter-pill');\n  const helplineCards = document.querySelectorAll('.helpline-card');\n  const helplinesGrid = document.querySelector('.helplines-grid');\n  \n  if (!filterPills.length || !helplineCards.length) return;\n  \n  filterPills.forEach(pill => {\n    pill.addEventListener('click', function() {\n      const filter = this.dataset.filter;\n      \n      filterPills.forEach(p => p.classList.remove('active'));\n      this.classList.add('active');\n      \n      helplineCards.forEach((card, index) => {\n        const category = card.dataset.category;\n        const shouldShow = filter === 'all' || category === filter;\n        \n        if (shouldShow) {\n          card.classList.remove('filter-hidden');\n          card.classList.add('filter-visible');\n          card.style.position = 'relative';\n          card.style.visibility = 'visible';\n          card.style.animationDelay = `${index * 0.05}s`;\n        } else {\n          card.classList.add('filter-hidden');\n          card.classList.remove('filter-visible');\n          setTimeout(() => {\n            if (card.classList.contains('filter-hidden')) {\n              card.style.position = 'absolute';\n              card.style.visibility = 'hidden';\n            }\n          }, 300);\n        }\n      });\n      \n      if (helplinesGrid) {\n        helplinesGrid.style.minHeight = '400px';\n      }\n    });\n  });\n}\n\n// --- Copy Buttons ---\nfunction initCopyButtons() {\n  document.querySelectorAll('.helpline-copy-btn').forEach(btn => {\n    btn.addEventListener('click', function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      \n      const phoneNumber = this.dataset.phone;\n      if (!phoneNumber) return;\n      \n      navigator.clipboard.writeText(phoneNumber).then(() => {\n        this.classList.add('copied');\n        const icon = this.querySelector('ion-icon');\n        if (icon) {\n          icon.setAttribute('name', 'checkmark-outline');\n        }\n        \n        setTimeout(() => {\n          this.classList.remove('copied');\n          if (icon) {\n            icon.setAttribute('name', 'copy-outline');\n          }\n        }, 2000);\n      }).catch(err => {\n        console.error('Failed to copy:', err);\n        const textArea = document.createElement('textarea');\n        textArea.value = phoneNumber;\n        textArea.style.position = 'fixed';\n        textArea.style.left = '-9999px';\n        document.body.appendChild(textArea);\n        textArea.select();\n        try {\n          document.execCommand('copy');\n          this.classList.add('copied');\n          const icon = this.querySelector('ion-icon');\n          if (icon) {\n            icon.setAttribute('name', 'checkmark-outline');\n          }\n          setTimeout(() => {\n            this.classList.remove('copied');\n            if (icon) {\n              icon.setAttribute('name', 'copy-outline');\n            }\n          }, 2000);\n        } catch (fallbackErr) {\n          console.error('Fallback copy failed:', fallbackErr);\n        }\n        document.body.removeChild(textArea);\n      });\n    });\n  });\n}\n\n// --- View Toggle ---\nfunction initViewToggle() {\n  const viewToggleBtns = document.querySelectorAll('.view-toggle-btn');\n  const helplinesGrid = document.querySelector('.helplines-grid');\n  \n  if (!viewToggleBtns.length || !helplinesGrid) return;\n  \n  const savedView = localStorage.getItem('helplines-view') || 'grid';\n  if (savedView === 'list') {\n    helplinesGrid.classList.add('list-view');\n    viewToggleBtns.forEach(btn => {\n      btn.classList.toggle('active', btn.dataset.view === 'list');\n    });\n  }\n  \n  viewToggleBtns.forEach(btn => {\n    btn.addEventListener('click', function() {\n      const view = this.dataset.view;\n      \n      viewToggleBtns.forEach(b => b.classList.remove('active'));\n      this.classList.add('active');\n      \n      if (view === 'list') {\n        helplinesGrid.classList.add('list-view');\n      } else {\n        helplinesGrid.classList.remove('list-view');\n      }\n      \n      localStorage.setItem('helplines-view', view);\n      \n      helplinesGrid.style.opacity = '0';\n      setTimeout(() => {\n        helplinesGrid.style.opacity = '1';\n      }, 150);\n    });\n  });\n}\n\n// --- Mobile Categories ---\nfunction initMobileCategories() {\n  const helplinesGrid = document.querySelector('.helplines-grid');\n  const helplineCards = document.querySelectorAll('.helpline-card');\n  \n  if (!helplinesGrid || !helplineCards.length) return;\n  \n  const isMobile = () => window.innerWidth <= 768;\n  \n  let originalCards = Array.from(helplineCards).map(card => card.cloneNode(true));\n  let mobileGroupsCreated = false;\n  \n  const categories = {\n    crisis: { nameKey: 'mobile_cat_crisis', fallback: 'Crisis Lines', icon: 'alert-circle' },\n    lgbtq: { nameKey: 'mobile_cat_lgbtq', fallback: 'LGBTQ+ Support', icon: 'heart-half' },\n    youth: { nameKey: 'mobile_cat_youth', fallback: 'Youth & Students', icon: 'school' },\n    veterans: { nameKey: 'mobile_cat_veterans', fallback: 'Veterans', icon: 'shield-checkmark' },\n    specialized: { nameKey: 'mobile_cat_specialized', fallback: 'Specialized', icon: 'medical' },\n    general: { nameKey: 'mobile_cat_general', fallback: 'General Support', icon: 'call' }\n  };\n  \n  function getTranslation(key, fallback) {\n    if (window.translations && window.translations[key]) {\n      return window.translations[key];\n    }\n    return fallback;\n  }\n  \n  function createMobileGroups() {\n    if (mobileGroupsCreated) return;\n    \n    const grouped = {};\n    helplineCards.forEach(card => {\n      const category = card.dataset.category || 'general';\n      if (!grouped[category]) grouped[category] = [];\n      grouped[category].push(card.cloneNode(true));\n    });\n    \n    helplinesGrid.innerHTML = '';\n    helplinesGrid.classList.add('mobile-grouped');\n    \n    Object.keys(categories).forEach(cat => {\n      const cards = grouped[cat];\n      if (!cards || cards.length === 0) return;\n      \n      const group = document.createElement('div');\n      group.className = 'mobile-category-group';\n      group.dataset.category = cat;\n      \n      const config = categories[cat];\n      const categoryName = getTranslation(config.nameKey, config.fallback);\n      \n      group.innerHTML = `\n        <button class=\"mobile-category-header\" aria-expanded=\"false\">\n          <div class=\"mobile-category-header__left\">\n            <div class=\"mobile-category-header__icon mobile-category-header__icon--${cat}\">\n              <ion-icon name=\"${config.icon}\"></ion-icon>\n            </div>\n            <h3 class=\"mobile-category-header__title\" data-translate=\"${config.nameKey}\">${categoryName}</h3>\n            <span class=\"mobile-category-header__count\">${cards.length}</span>\n          </div>\n          <ion-icon name=\"chevron-down\" class=\"mobile-category-header__chevron\"></ion-icon>\n        </button>\n        <div class=\"mobile-category-content\"></div>\n      `;\n      \n      const content = group.querySelector('.mobile-category-content');\n      cards.forEach(card => content.appendChild(card));\n      \n      const header = group.querySelector('.mobile-category-header');\n      header.addEventListener('click', () => {\n        const isExpanded = group.classList.contains('expanded');\n        group.classList.toggle('expanded');\n        header.setAttribute('aria-expanded', !isExpanded);\n      });\n      \n      if (cat === 'crisis') {\n        group.classList.add('expanded');\n        header.setAttribute('aria-expanded', 'true');\n      }\n      \n      helplinesGrid.appendChild(group);\n    });\n    \n    initCopyButtons();\n    \n    mobileGroupsCreated = true;\n  }\n  \n  function restoreDesktopGrid() {\n    if (!mobileGroupsCreated) return;\n    \n    helplinesGrid.innerHTML = '';\n    helplinesGrid.classList.remove('mobile-grouped');\n    \n    const savedView = localStorage.getItem('helplines-view') || 'grid';\n    if (savedView === 'list') {\n      helplinesGrid.classList.add('list-view');\n    }\n    \n    originalCards.forEach(card => {\n      helplinesGrid.appendChild(card.cloneNode(true));\n    });\n    \n    initCopyButtons();\n    \n    mobileGroupsCreated = false;\n  }\n  \n  function handleResize() {\n    if (isMobile() && !mobileGroupsCreated) {\n      createMobileGroups();\n    } else if (!isMobile() && mobileGroupsCreated) {\n      restoreDesktopGrid();\n    }\n  }\n  \n  let resizeTimeout;\n  window.addEventListener('resize', () => {\n    clearTimeout(resizeTimeout);\n    resizeTimeout = setTimeout(handleResize, 150);\n  });\n  \n  handleResize();\n}\n","path":null,"size_bytes":8780,"size_tokens":null},"mindspace-build/css/responsive-system.css":{"content":"/* === VARIABLES === */\n:root {\n  \n  --font-base: 16px;\n  \n  \n  \n  --fs-display: clamp(2.5rem, 5vw + 1rem, 4.5rem);\n  \n  \n  --fs-h1: clamp(2rem, 4vw + 0.5rem, 3.5rem);\n  --fs-h2: clamp(1.75rem, 3vw + 0.5rem, 2.75rem);\n  --fs-h3: clamp(1.5rem, 2.5vw + 0.5rem, 2rem);\n  --fs-h4: clamp(1.25rem, 2vw + 0.25rem, 1.5rem);\n  --fs-h5: clamp(1.125rem, 1.5vw + 0.25rem, 1.25rem);\n  --fs-h6: clamp(1rem, 1vw + 0.25rem, 1.125rem);\n  \n  \n  --fs-body-lg: clamp(1.125rem, 1vw + 0.5rem, 1.25rem);\n  --fs-body: clamp(1rem, 0.5vw + 0.75rem, 1.125rem);\n  --fs-body-sm: clamp(0.875rem, 0.5vw + 0.5rem, 1rem);\n  \n  \n  --fs-label: clamp(0.8125rem, 0.25vw + 0.5rem, 0.9375rem);\n  --fs-caption: clamp(0.75rem, 0.25vw + 0.5rem, 0.875rem);\n  --fs-tiny: clamp(0.6875rem, 0.25vw + 0.375rem, 0.75rem);\n  \n  \n  --lh-tight: 1.2;\n  --lh-snug: 1.35;\n  --lh-normal: 1.5;\n  --lh-relaxed: 1.65;\n  --lh-loose: 1.8;\n  \n  \n  --ls-tight: -0.025em;\n  --ls-normal: 0;\n  --ls-wide: 0.025em;\n  --ls-wider: 0.05em;\n  --ls-widest: 0.1em;\n  \n  \n  --space-3xs: clamp(0.25rem, 0.5vw, 0.375rem);\n  --space-2xs: clamp(0.375rem, 0.75vw, 0.5rem);\n  --space-xs: clamp(0.5rem, 1vw, 0.75rem);\n  --space-sm: clamp(0.75rem, 1.5vw, 1rem);\n  --space-md: clamp(1rem, 2vw, 1.5rem);\n  --space-lg: clamp(1.5rem, 3vw, 2rem);\n  --space-xl: clamp(2rem, 4vw, 3rem);\n  --space-2xl: clamp(3rem, 6vw, 4rem);\n  --space-3xl: clamp(4rem, 8vw, 6rem);\n  --space-4xl: clamp(6rem, 10vw, 8rem);\n  \n  \n  --container-sm: 640px;\n  --container-md: 768px;\n  --container-lg: 1024px;\n  --container-xl: 1200px;\n  --container-2xl: 1400px;\n  --container-full: 100%;\n  \n  \n  --container-padding: clamp(1rem, 4vw, 2rem);\n  \n  \n  --bp-xs: 375px;\n  --bp-sm: 480px;\n  --bp-md: 768px;\n  --bp-lg: 1024px;\n  --bp-xl: 1200px;\n  --bp-2xl: 1400px;\n}\n\n/* === TYPOGRAPHY CLASSES === */\n.fs-display { font-size: var(--fs-display); line-height: var(--lh-tight); }\n.fs-h1 { font-size: var(--fs-h1); line-height: var(--lh-tight); }\n.fs-h2 { font-size: var(--fs-h2); line-height: var(--lh-tight); }\n.fs-h3 { font-size: var(--fs-h3); line-height: var(--lh-snug); }\n.fs-h4 { font-size: var(--fs-h4); line-height: var(--lh-snug); }\n.fs-h5 { font-size: var(--fs-h5); line-height: var(--lh-normal); }\n.fs-h6 { font-size: var(--fs-h6); line-height: var(--lh-normal); }\n\n.fs-body-lg { font-size: var(--fs-body-lg); line-height: var(--lh-relaxed); }\n.fs-body { font-size: var(--fs-body); line-height: var(--lh-relaxed); }\n.fs-body-sm { font-size: var(--fs-body-sm); line-height: var(--lh-relaxed); }\n.fs-label { font-size: var(--fs-label); line-height: var(--lh-normal); }\n.fs-caption { font-size: var(--fs-caption); line-height: var(--lh-normal); }\n.fs-tiny { font-size: var(--fs-tiny); line-height: var(--lh-normal); }\n\n/* === TEXT WRAPPING === */\nh1, h2, h3, h4, h5, h6,\np, li, td, th, label, span {\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  hyphens: auto;\n}\n\nh1, h2, h3, h4, h5, h6 {\n  text-wrap: balance;\n}\n\np {\n  text-wrap: pretty;\n}\n\n/* === TEXT UTILITIES === */\n.text-break {\n  word-break: break-word;\n}\n\n.text-nowrap {\n  white-space: nowrap;\n}\n\n.text-truncate {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.text-clamp-2 {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.text-clamp-3 {\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n/* === CONTAINER UTILITIES === */\n.resp-container {\n  width: 100%;\n  max-width: var(--container-xl);\n  margin-inline: auto;\n  padding-inline: var(--container-padding);\n}\n\n.resp-container-sm { max-width: var(--container-sm); }\n.resp-container-md { max-width: var(--container-md); }\n.resp-container-lg { max-width: var(--container-lg); }\n.resp-container-xl { max-width: var(--container-xl); }\n.resp-container-2xl { max-width: var(--container-2xl); }\n.resp-container-full { max-width: 100%; }\n\n/* === RESPONSIVE GRID === */\n.grid {\n  display: grid;\n  gap: var(--space-md);\n}\n\n.grid-cols-1 { grid-template-columns: 1fr; }\n.grid-cols-2 { grid-template-columns: repeat(2, 1fr); }\n.grid-cols-3 { grid-template-columns: repeat(3, 1fr); }\n.grid-cols-4 { grid-template-columns: repeat(4, 1fr); }\n\n.grid-auto-sm {\n  grid-template-columns: repeat(auto-fit, minmax(min(200px, 100%), 1fr));\n}\n\n.grid-auto-md {\n  grid-template-columns: repeat(auto-fit, minmax(min(280px, 100%), 1fr));\n}\n\n.grid-auto-lg {\n  grid-template-columns: repeat(auto-fit, minmax(min(350px, 100%), 1fr));\n}\n\n/* === UTILITY CLASSES === */\n.text-left { text-align: left; }\n.text-center { text-align: center; }\n.text-right { text-align: right; }\n\n.fs-display { font-size: var(--fs-display); }\n.fs-h1 { font-size: var(--fs-h1); }\n.fs-h2 { font-size: var(--fs-h2); }\n.fs-h3 { font-size: var(--fs-h3); }\n.fs-h4 { font-size: var(--fs-h4); }\n.fs-h5 { font-size: var(--fs-h5); }\n.fs-h6 { font-size: var(--fs-h6); }\n.fs-body-lg { font-size: var(--fs-body-lg); }\n.fs-body { font-size: var(--fs-body); }\n.fs-body-sm { font-size: var(--fs-body-sm); }\n.fs-label { font-size: var(--fs-label); }\n.fs-caption { font-size: var(--fs-caption); }\n.fs-tiny { font-size: var(--fs-tiny); }\n\n.lh-tight { line-height: var(--lh-tight); }\n.lh-snug { line-height: var(--lh-snug); }\n.lh-normal { line-height: var(--lh-normal); }\n.lh-relaxed { line-height: var(--lh-relaxed); }\n.lh-loose { line-height: var(--lh-loose); }\n\n.mt-0 { margin-top: 0; }\n.mb-0 { margin-bottom: 0; }\n.my-0 { margin-block: 0; }\n.mx-0 { margin-inline: 0; }\n\n.mt-sm { margin-top: var(--space-sm); }\n.mb-sm { margin-bottom: var(--space-sm); }\n.mt-md { margin-top: var(--space-md); }\n.mb-md { margin-bottom: var(--space-md); }\n.mt-lg { margin-top: var(--space-lg); }\n.mb-lg { margin-bottom: var(--space-lg); }\n.mt-xl { margin-top: var(--space-xl); }\n.mb-xl { margin-bottom: var(--space-xl); }\n\n.pt-sm { padding-top: var(--space-sm); }\n.pb-sm { padding-bottom: var(--space-sm); }\n.pt-md { padding-top: var(--space-md); }\n.pb-md { padding-bottom: var(--space-md); }\n.pt-lg { padding-top: var(--space-lg); }\n.pb-lg { padding-bottom: var(--space-lg); }\n.pt-xl { padding-top: var(--space-xl); }\n.pb-xl { padding-bottom: var(--space-xl); }\n\n.p-sm { padding: var(--space-sm); }\n.p-md { padding: var(--space-md); }\n.p-lg { padding: var(--space-lg); }\n.p-xl { padding: var(--space-xl); }\n\n.px-sm { padding-inline: var(--space-sm); }\n.px-md { padding-inline: var(--space-md); }\n.px-lg { padding-inline: var(--space-lg); }\n.py-sm { padding-block: var(--space-sm); }\n.py-md { padding-block: var(--space-md); }\n.py-lg { padding-block: var(--space-lg); }\n\n.gap-xs { gap: var(--space-xs); }\n.gap-sm { gap: var(--space-sm); }\n.gap-md { gap: var(--space-md); }\n.gap-lg { gap: var(--space-lg); }\n.gap-xl { gap: var(--space-xl); }\n\n/* === MOBILE BREAKPOINT === */\n@media (max-width: 480px) {\n  :root {\n    --container-padding: 1rem;\n  }\n  \n  .grid-cols-2,\n  .grid-cols-3,\n  .grid-cols-4 {\n    grid-template-columns: 1fr;\n  }\n  \n  \n  .hide-mobile { display: none !important; }\n  \n  \n  .text-center-mobile { text-align: center; }\n  .text-left-mobile { text-align: left; }\n}\n\n/* === TABLET BREAKPOINT === */\n@media (min-width: 481px) and (max-width: 768px) {\n  .grid-cols-3,\n  .grid-cols-4 {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  \n  \n  .hide-tablet { display: none !important; }\n}\n\n/* === DESKTOP BREAKPOINT === */\n@media (min-width: 769px) and (max-width: 1024px) {\n  .grid-cols-4 {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n\n/* === WIDE BREAKPOINT === */\n@media (min-width: 1025px) {\n  .hide-desktop { display: none !important; }\n}\n\n/* === ASPECT RATIOS === */\n.aspect-square { aspect-ratio: 1; }\n.aspect-video { aspect-ratio: 16 / 9; }\n.aspect-portrait { aspect-ratio: 3 / 4; }\n.aspect-wide { aspect-ratio: 21 / 9; }\n\n/* === FLEXBOX UTILITIES === */\n.flex { display: flex; }\n.flex-col { flex-direction: column; }\n.flex-row { flex-direction: row; }\n.flex-wrap { flex-wrap: wrap; }\n.flex-nowrap { flex-wrap: nowrap; }\n.flex-1 { flex: 1; }\n.flex-auto { flex: auto; }\n.flex-none { flex: none; }\n\n.items-start { align-items: flex-start; }\n.items-center { align-items: center; }\n.items-end { align-items: flex-end; }\n.items-stretch { align-items: stretch; }\n\n.justify-start { justify-content: flex-start; }\n.justify-center { justify-content: center; }\n.justify-end { justify-content: flex-end; }\n.justify-between { justify-content: space-between; }\n.justify-around { justify-content: space-around; }\n.justify-evenly { justify-content: space-evenly; }\n\n.flex-center {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* === TOUCH TARGETS === */\n.touch-target {\n  min-height: 44px;\n  min-width: 44px;\n}\n\n/* === CARD SPACING === */\n.resp-card {\n  padding: var(--space-md);\n  border-radius: clamp(0.5rem, 1vw, 1rem);\n}\n\n.resp-card-sm { padding: var(--space-sm); }\n.resp-card-lg { padding: var(--space-lg); }\n\n.resp-section {\n  padding-block: var(--space-2xl);\n}\n\n.resp-section-sm { padding-block: var(--space-xl); }\n.resp-section-lg { padding-block: var(--space-3xl); }\n\n/* === IMAGE UTILITIES === */\n.img-cover {\n  object-fit: cover;\n  width: 100%;\n  height: 100%;\n}\n\n.img-contain {\n  object-fit: contain;\n  width: 100%;\n  height: 100%;\n}\n\n.img-responsive {\n  max-width: 100%;\n  height: auto;\n  display: block;\n}\n\n/* === LIST UTILITIES === */\n.list-spaced li {\n  margin-bottom: var(--space-xs);\n  line-height: var(--lh-relaxed);\n}\n\n.list-spaced li:last-child {\n  margin-bottom: 0;\n}\n\n/* === TABLE UTILITIES === */\n.table-responsive {\n  width: 100%;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.resp-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.resp-table th,\n.resp-table td {\n  padding: var(--space-sm);\n  text-align: left;\n  vertical-align: top;\n}\n\n/* === FORM UTILITIES === */\n.resp-input {\n  font-size: var(--fs-body);\n  padding: var(--space-sm) var(--space-md);\n  line-height: var(--lh-normal);\n}\n\n.resp-label {\n  font-size: var(--fs-label);\n  margin-bottom: var(--space-xs);\n  display: block;\n}\n\n/* === PRINT STYLES === */\n@media print {\n  :root {\n    --font-base: 12pt;\n  }\n  \n  body {\n    font-size: 12pt;\n    line-height: 1.5;\n    color: #000;\n    background: #fff;\n  }\n  \n  h1 { font-size: 24pt; }\n  h2 { font-size: 20pt; }\n  h3 { font-size: 16pt; }\n  h4 { font-size: 14pt; }\n  h5, h6 { font-size: 12pt; }\n  \n  .hide-print { display: none !important; }\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  *,\n  *::before,\n  *::after {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n    scroll-behavior: auto !important;\n  }\n}\n","path":null,"size_bytes":10562,"size_tokens":null},"mindspace-build/js/script.js":{"content":"// ==================== MAIN APPLICATION ====================\n\"use strict\";\n\n\n\n// --- Preloader ---\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n  const preloader = document.querySelector(\"[data-preaload]\");\n  const progressFill = document.querySelector(\".progress-bar-fill\");\n  let progress = 0;\n\n  function animateProgress() {\n    if (!progressFill) return;\n    const interval = setInterval(function () {\n      progress += Math.random() * 8 + 2;\n      if (progress > 90) progress = 90;\n      progressFill.style.width = progress + \"%\";\n    }, 150);\n    return interval;\n  }\n\n  const progressInterval = animateProgress();\n\n  window.addEventListener(\"load\", function () {\n    if (progressInterval) clearInterval(progressInterval);\n    if (progressFill) {\n      progressFill.style.width = \"100%\";\n    }\n    setTimeout(function () {\n      document.body.classList.add(\"loaded\");\n      if (preloader) {\n        preloader.classList.add(\"loaded\");\n        setTimeout(function () {\n          preloader.style.display = \"none\";\n        }, 800);\n      }\n      const legacyLoader = document.getElementById(\"preloader\");\n      if (legacyLoader) legacyLoader.style.display = \"none\";\n      window.scrollTo(0, 0);\n    }, 400);\n  });\n\n\n\n// --- Utility Functions ---\n  function addEventOnElements(elements, eventType, callback) {\n    if (!elements || !elements.length) return;\n    for (let i = 0; i < elements.length; i++) {\n      elements[i].addEventListener(eventType, callback);\n    }\n  }\n\n\n\n// --- Video Autoplay Fallback ---\n  document.querySelectorAll('video.back-video').forEach(function(video) {\n    video.setAttribute('muted', '');\n    video.muted = true;\n    video.setAttribute('playsinline', '');\n    video.setAttribute('autoplay', '');\n\n    function tryPlay() {\n      if (!video.paused) return;\n      video.muted = true;\n      var playPromise = video.play();\n      if (playPromise !== undefined) {\n        playPromise.catch(function() {});\n      }\n    }\n\n    video.addEventListener('canplay', tryPlay);\n    video.addEventListener('loadeddata', tryPlay);\n    video.addEventListener('loadedmetadata', tryPlay);\n\n    if (video.readyState >= 2) {\n      tryPlay();\n    } else {\n      video.load();\n    }\n\n    var retryCount = 0;\n    var retryInterval = setInterval(function() {\n      retryCount++;\n      if (!video.paused || retryCount > 20) {\n        clearInterval(retryInterval);\n        return;\n      }\n      tryPlay();\n    }, 500);\n\n    document.addEventListener('touchstart', function() {\n      if (video.paused) tryPlay();\n    }, { once: true });\n\n    document.addEventListener('click', function() {\n      if (video.paused) tryPlay();\n    }, { once: true });\n\n    var observer = new IntersectionObserver(function(entries) {\n      entries.forEach(function(entry) {\n        if (entry.isIntersecting && video.paused) {\n          tryPlay();\n        }\n      });\n    }, { threshold: 0.1 });\n    observer.observe(video);\n  });\n\n// --- Navbar ---\n  const navbar = document.querySelector(\"[data-navbar]\");\n  const navTogglers = document.querySelectorAll(\"[data-nav-toggler]\");\n  const overlay = document.querySelector(\"[data-overlay]\");\n  const navOpenBtn = document.querySelector(\".nav-open-btn\");\n\n  function openNavbar() {\n    if (!navbar || !overlay) return;\n    navbar.classList.add(\"active\");\n    overlay.classList.add(\"active\");\n    document.body.classList.add(\"nav-active\");\n    if (navOpenBtn) navOpenBtn.classList.add(\"is-active\");\n  }\n\n  function closeNavbar() {\n    if (!navbar || !overlay) return;\n    navbar.classList.remove(\"active\");\n    overlay.classList.remove(\"active\");\n    document.body.classList.remove(\"nav-active\");\n    if (navOpenBtn) navOpenBtn.classList.remove(\"is-active\");\n\n\n    const submenuPanels = navbar.querySelectorAll(\".navbar-submenu-panel\");\n    submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n    navbar.classList.remove(\"submenu-open\");\n  }\n\n\n  window.closeNavbar = closeNavbar;\n\n  function toggleNavbar() {\n    if (!navbar) return;\n    if (navbar.classList.contains(\"active\")) {\n      closeNavbar();\n    } else {\n      openNavbar();\n    }\n  }\n\n  addEventOnElements(navTogglers, \"click\", toggleNavbar);\n\n// --- Mobile Swipe Gestures ---\n  let touchStartX = 0;\n  let touchStartY = 0;\n  let touchCurrentX = 0;\n  let isSwiping = false;\n  let swipeDirection = null;\n\n  if (navbar) {\n    navbar.addEventListener(\"touchstart\", function(e) {\n      touchStartX = e.touches[0].clientX;\n      touchStartY = e.touches[0].clientY;\n      touchCurrentX = touchStartX;\n      isSwiping = true;\n      swipeDirection = null;\n    }, { passive: true });\n\n    navbar.addEventListener(\"touchmove\", function(e) {\n      if (!isSwiping) return;\n      touchCurrentX = e.touches[0].clientX;\n      var touchCurrentY = e.touches[0].clientY;\n      var diffX = Math.abs(touchStartX - touchCurrentX);\n      var diffY = Math.abs(touchStartY - touchCurrentY);\n\n      if (!swipeDirection && (diffX > 10 || diffY > 10)) {\n        swipeDirection = diffX > diffY ? 'horizontal' : 'vertical';\n      }\n\n      if (swipeDirection !== 'horizontal') return;\n\n      var diff = touchStartX - touchCurrentX;\n      var drawerWidth = navbar.offsetWidth || 360;\n\n      if (diff > 0 && diff < drawerWidth) {\n        navbar.style.transform = \"translateX(\" + (drawerWidth - diff) + \"px)\";\n        navbar.style.transition = \"none\";\n      }\n    }, { passive: true });\n\n    navbar.addEventListener(\"touchend\", function() {\n      if (!isSwiping) return;\n      isSwiping = false;\n\n      navbar.style.transition = \"\";\n      navbar.style.transform = \"\";\n\n      if (swipeDirection === 'horizontal') {\n        var diff = touchStartX - touchCurrentX;\n        if (diff > 80) {\n          closeNavbar();\n        }\n      }\n      swipeDirection = null;\n    }, { passive: true });\n\n    navbar.addEventListener(\"touchcancel\", function() {\n      isSwiping = false;\n      swipeDirection = null;\n      navbar.style.transition = \"\";\n      navbar.style.transform = \"\";\n    }, { passive: true });\n  }\n\n\n  function createRipple(e) {\n    const link = e.currentTarget;\n    const circle = document.createElement(\"span\");\n    const diameter = Math.max(link.clientWidth, link.clientHeight);\n    const radius = diameter / 2;\n\n    circle.style.width = circle.style.height = `${diameter}px`;\n    circle.style.left = `${e.clientX - link.getBoundingClientRect().left - radius}px`;\n    circle.style.top = `${e.clientY - link.getBoundingClientRect().top - radius}px`;\n    circle.classList.add(\"ripple\");\n\n    const existingRipple = link.querySelector(\".ripple\");\n    if (existingRipple) existingRipple.remove();\n\n    link.appendChild(circle);\n  }\n\n// --- Sticky Header ---\n  document.querySelectorAll(\".navbar-link\").forEach(link => {\n    link.addEventListener(\"click\", createRipple);\n  });\n\n\n\n  function initMobileSubmenu() {\n    const isMobile = () => window.innerWidth <= 1024;\n    const navbar = document.querySelector(\"[data-navbar]\");\n    const submenuItems = document.querySelectorAll(\".navbar-item.has-submenu\");\n    const submenuPanels = document.querySelectorAll(\".navbar-submenu-panel\");\n    const backButtons = document.querySelectorAll(\".submenu-back-btn\");\n\n    if (!navbar || !submenuItems.length) return;\n\n\n    submenuItems.forEach(item => {\n      const link = item.querySelector(\".navbar-link\");\n      const submenuId = item.getAttribute(\"data-submenu\");\n      const panel = document.querySelector(`[data-submenu-panel=\"${submenuId}\"]`);\n\n      if (!link || !panel) return;\n\n      link.addEventListener(\"click\", function(e) {\n        if (!isMobile()) return;\n\n        e.preventDefault();\n        e.stopPropagation();\n\n// --- Submenu Navigation ---\n\n        panel.classList.add(\"active\");\n        navbar.classList.add(\"submenu-open\");\n      });\n    });\n\n\n    backButtons.forEach(btn => {\n      btn.addEventListener(\"click\", function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n\n        submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n        navbar.classList.remove(\"submenu-open\");\n      });\n    });\n\n\n    const originalCloseNavbar = window.closeNavbar || closeNavbar;\n    window.closeNavbarWithSubmenu = function() {\n      submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n      navbar.classList.remove(\"submenu-open\");\n      if (typeof originalCloseNavbar === 'function') {\n        originalCloseNavbar();\n      }\n    };\n\n\n    const closeBtn = navbar.querySelector(\".close-btn\");\n    if (closeBtn) {\n      closeBtn.addEventListener(\"click\", function() {\n        submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n        navbar.classList.remove(\"submenu-open\");\n      });\n    }\n\n\n    const overlay = document.querySelector(\"[data-overlay]\");\n    if (overlay) {\n      overlay.addEventListener(\"click\", function() {\n        submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n        navbar.classList.remove(\"submenu-open\");\n      });\n    }\n\n\n    let resizeTimer;\n    window.addEventListener(\"resize\", function() {\n      clearTimeout(resizeTimer);\n      resizeTimer = setTimeout(function() {\n        if (!isMobile()) {\n          submenuPanels.forEach(panel => panel.classList.remove(\"active\"));\n          navbar.classList.remove(\"submenu-open\");\n        }\n      }, 150);\n    });\n  }\n\n\n  initMobileSubmenu();\n\n\n\n  function setActiveNavState() {\n    const currentPath = window.location.pathname.replace(/\\/$/, \"\") || \"/\";\n    const navLinks = document.querySelectorAll(\".navbar-link\");\n    let foundActive = false;\n\n    navLinks.forEach(link => {\n      link.classList.remove(\"active\");\n      if (foundActive) return;\n\n      const href = link.getAttribute(\"href\");\n      if (!href || href.startsWith(\"#\")) return;\n\n\n      let linkPath;\n      try {\n        const resolvedUrl = new URL(href, window.location.href);\n        linkPath = resolvedUrl.pathname.replace(/\\/$/, \"\") || \"/\";\n      } catch (e) {\n        linkPath = href.replace(/\\/$/, \"\") || \"/\";\n      }\n\n\n      const isHome = linkPath === \"/\" || linkPath === \"\";\n      const isCurrentHome = currentPath === \"/\" || currentPath === \"\";\n\n\n      const isBlogLink = linkPath === \"/blog\";\n      const isOnArticlePage = currentPath.startsWith(\"/articles\");\n\n      if (isHome && isCurrentHome) {\n        link.classList.add(\"active\");\n        foundActive = true;\n      } else if (isBlogLink && isOnArticlePage) {\n        link.classList.add(\"active\");\n        foundActive = true;\n      } else if (!isHome && !isBlogLink && currentPath.startsWith(linkPath)) {\n        link.classList.add(\"active\");\n        foundActive = true;\n      } else if (!isHome && currentPath === linkPath) {\n        link.classList.add(\"active\");\n        foundActive = true;\n      }\n    });\n  }\n\n  setActiveNavState();\n\n\n\n  const header = document.querySelector(\"[data-header]\");\n  const backTopBtn = document.querySelector(\"[data-back-top-btn]\");\n  let lastScrollPos = 0;\n\n\n  const MIN_HEADER_HEIGHT = 60;\n  let lastKnownHeaderHeight = 100;\n  let initialHeaderHeight = null;\n\n  function measureHeaderHeight(el) {\n    if (!el) return 0;\n\n    const height = el.offsetHeight > 0 ? el.offsetHeight : el.scrollHeight;\n    return height > 0 ? height : 0;\n  }\n// --- User Menu ---\n\n  function updateHeaderHeight() {\n    let targetHeader = header || document.querySelector('header, .header');\n\n    if (targetHeader) {\n\n      const height = measureHeaderHeight(targetHeader);\n\n\n      if (initialHeaderHeight === null && height > 0) {\n        initialHeaderHeight = height;\n      }\n\n\n      if (height > 0) {\n        lastKnownHeaderHeight = height;\n      } else if (initialHeaderHeight) {\n\n        lastKnownHeaderHeight = initialHeaderHeight;\n      }\n    }\n\n\n    const finalHeight = Math.max(lastKnownHeaderHeight, MIN_HEADER_HEIGHT);\n    const safeHeight = finalHeight + 20;\n\n    document.documentElement.style.setProperty('--header-height', finalHeight + 'px');\n    document.documentElement.style.setProperty('--header-height-safe', safeHeight + 'px');\n  }\n\n\n  requestAnimationFrame(updateHeaderHeight);\n  window.addEventListener('resize', () => requestAnimationFrame(updateHeaderHeight));\n  window.addEventListener('orientationchange', () => requestAnimationFrame(updateHeaderHeight));\n\n\n  if (header && typeof ResizeObserver !== 'undefined') {\n    const headerObserver = new ResizeObserver(() => {\n\n      requestAnimationFrame(updateHeaderHeight);\n    });\n    headerObserver.observe(header);\n  }\n\n\n  if (header) {\n    header.addEventListener('transitionend', () => {\n      requestAnimationFrame(updateHeaderHeight);\n    });\n  }\n\n\n  if (header) {\n    initialHeaderHeight = measureHeaderHeight(header);\n  }\n\n  function hideHeaderOnScroll() {\n    if (!header) return;\n    const isScrollBottom = lastScrollPos < window.scrollY;\n\n    if (isScrollBottom) header.classList.add(\"hide\");\n    else header.classList.remove(\"hide\");\n\n    lastScrollPos = window.scrollY;\n  }\n\n  window.addEventListener(\"scroll\", function () {\n    if (!header) return;\n\n    if (window.scrollY >= 50) {\n      header.classList.add(\"active\");\n      if (backTopBtn) backTopBtn.classList.add(\"active\");\n      hideHeaderOnScroll();\n      var tb = document.getElementById('smartTopbar');\n      if (tb) tb.classList.add('topbar--hidden');\n      if (header) header.classList.add('topbar--gone');\n      document.documentElement.style.setProperty('--topbar-height', '0px');\n    } else {\n      header.classList.remove(\"active\");\n      if (backTopBtn) backTopBtn.classList.remove(\"active\");\n      var tb = document.getElementById('smartTopbar');\n      if (tb && !tb.classList.contains('dismissed')) {\n        tb.classList.remove('topbar--hidden');\n        if (header) header.classList.remove('topbar--gone');\n        document.documentElement.style.setProperty('--topbar-height', tb.offsetHeight + 'px');\n      }\n    }\n\n    requestAnimationFrame(updateHeaderHeight);\n  });\n\n\n\n  const hamburger = document.querySelector(\".hamburger\");\n  if (hamburger) {\n    hamburger.addEventListener(\"click\", function () {\n      const navBar = document.querySelector(\".nav-bar\");\n      if (navBar) navBar.classList.toggle(\"active\");\n    });\n  }\n\n\n\n  const scrollContainer = document.querySelector(\".gallery\");\n  const backBtn = document.getElementById(\"backBtn\");\n  const nextBtn = document.getElementById(\"nextBtn\");\n\n  if (scrollContainer) {\n    scrollContainer.addEventListener(\"wheel\", (evt) => {\n      evt.preventDefault();\n      scrollContainer.scrollLeft += evt.deltaY;\n      scrollContainer.style.scrollBehavior = \"auto\";\n    });\n\n    if (nextBtn) {\n      nextBtn.addEventListener(\"click\", () => {\n        scrollContainer.style.scrollBehavior = \"smooth\";\n        scrollContainer.scrollLeft += 900;\n      });\n    }\n\n    if (backBtn) {\n      backBtn.addEventListener(\"click\", () => {\n        scrollContainer.style.scrollBehavior = \"smooth\";\n        scrollContainer.scrollLeft -= 900;\n      });\n    }\n// --- Theme Toggle ---\n  }\n\n\n\n  function observeHighlightAnimations() {\n    const highlights = document.querySelectorAll('[data-highlight=\"true\"]');\n    if (!highlights.length) return;\n\n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n        entry.target.classList.toggle(\"animate\", entry.isIntersecting);\n      });\n    }, { threshold: 0.5 });\n\n    highlights.forEach(el => observer.observe(el));\n  }\n\n  if (typeof wrapTargetSentences === \"function\") {\n    wrapTargetSentences();\n  }\n  observeHighlightAnimations();\n\n\n\n  if (typeof Swiper !== \"undefined\" && document.querySelector(\".mySwiper\")) {\n    new Swiper(\".mySwiper\", {\n      effect: \"coverflow\",\n      grabCursor: true,\n      centeredSlides: true,\n      slidesPerView: \"auto\",\n      coverflowEffect: {\n        rotate: 0,\n        stretch: 0,\n        depth: 300,\n        modifier: 1,\n        slideShadows: false,\n      },\n      pagination: { el: \".swiper-pagination\" },\n    });\n  }\n\n\n  if (typeof Swiper !== \"undefined\" && document.querySelector(\".tranding-slider\")) {\n    new Swiper(\".tranding-slider\", {\n      effect: \"coverflow\",\n      grabCursor: true,\n      centeredSlides: true,\n      loop: true,\n      slidesPerView: \"auto\",\n      coverflowEffect: {\n        rotate: 0,\n        stretch: 0,\n        depth: 100,\n        modifier: 2.5,\n      },\n      pagination: { el: \".swiper-pagination\", clickable: true },\n// --- Back to Top ---\n      navigation: {\n        nextEl: \".swiper-button-next\",\n        prevEl: \".swiper-button-prev\",\n      }\n    });\n  }\n\n\n  (function () {\n    const slides = [\n      {\n        kickerKey: \"slide1_kicker\",\n        titleKey: \"slide1_title\",\n        descKey: \"slide1_desc\",\n        ctaKey: \"slide1_cta\",\n        kicker: \"Mental health disorders\",\n        title: \"Anxiety & depression\",\n        desc: \"Learn about common mental health conditions like anxiety and depression. Find clear explanations and discover resources to help you or someone you care about.\",\n        cta: \"Explore resources\",\n        ctaHref: \"./resourcelib/\",\n        imgSrc: \"../assets/images/segment1.png\",\n        imgAlt: \"Mental health disorders overview\"\n      },\n      {\n        kickerKey: \"slide2_kicker\",\n        titleKey: \"slide2_title\",\n        descKey: \"slide2_desc\",\n// --- Cursor ---\n        ctaKey: \"slide2_cta\",\n        kicker: \"Helplines & resources\",\n        title: \"Get immediate support\",\n        desc: \"If you or someone else needs help right now, we have a list of trusted helplines and crisis resources available 24/7.\",\n        cta: \"Find help\",\n        ctaHref: \"./support/#helplines\",\n        imgSrc: \"../assets/images/segment2.png\",\n        imgAlt: \"Helplines and support resources\"\n      },\n      {\n        kickerKey: \"slide3_kicker\",\n        titleKey: \"slide3_title\",\n        descKey: \"slide3_desc\",\n        ctaKey: \"slide3_cta\",\n        kicker: \"Online counseling\",\n        title: \"Schedule an appointment\",\n        desc: \"Use our appointment scheduler to request online counseling. Choose a time that works for you and get connected to support in a private, respectful way.\",\n        cta: \"Schedule now\",\n        ctaHref: \"./support/#appointment\",\n        imgSrc: \"../assets/images/segment3.png\",\n        imgAlt: \"Online counseling appointment scheduler\"\n      },\n      {\n        kickerKey: \"slide4_kicker\",\n        titleKey: \"slide4_title\",\n        descKey: \"slide4_desc\",\n        ctaKey: \"slide4_cta\",\n        kicker: \"Community & stories\",\n// --- Accessibility ---\n        title: \"Support groups & testimonials\",\n        desc: \"Read real stories from our community. Find encouragement and learn how others have found strength and healing on their mental health journey.\",\n        cta: \"Join community\",\n        ctaHref: \"./community/\",\n        imgSrc: \"../assets/images/segment4.png\",\n        imgAlt: \"Support community and testimonials\"\n      }\n    ];\n\n    function getSlideTranslation(key, fallback) {\n      const lang = localStorage.getItem('mindspace_language') || 'en';\n      if (window.translations && window.translations[lang] && window.translations[lang][key]) {\n        return window.translations[lang][key];\n      }\n      return fallback || key;\n    }\n\n    const kickerEl = document.getElementById(\"mb-kicker\");\n    const titleEl = document.getElementById(\"mb-title\");\n    const descEl = document.getElementById(\"mb-desc\");\n    const ctaEl = document.getElementById(\"mb-cta\");\n    const imgEl = document.querySelector(\".mb-actionbox__img\");\n    const featureEl = document.querySelector(\".mb-actionbox__feature\");\n    const cards = Array.from(document.querySelectorAll(\".mb-card\"));\n\n    if (!kickerEl || !titleEl || !descEl || !ctaEl || !imgEl || !featureEl || !cards.length) return;\n\n    let index = 0;\n    let timer = null;\n    const INTERVAL_MS = 5000;\n    const FADE_MS = 220;\n\n    function setActiveCard(i) {\n      cards.forEach((btn, n) => {\n        const active = n === i;\n        btn.classList.toggle(\"is-active\", active);\n        btn.setAttribute(\"aria-selected\", active ? \"true\" : \"false\");\n      });\n    }\n\n    function smoothSwap(i) {\n      featureEl.classList.add(\"is-fading\");\n\n      window.setTimeout(() => {\n        const s = slides[i];\n\n        kickerEl.textContent = getSlideTranslation(s.kickerKey, s.kicker);\n        titleEl.textContent = getSlideTranslation(s.titleKey, s.title);\n        descEl.textContent = getSlideTranslation(s.descKey, s.desc);\n        ctaEl.textContent = getSlideTranslation(s.ctaKey, s.cta);\n        ctaEl.setAttribute(\"href\", s.ctaHref);\n\n\n        imgEl.style.opacity = \"0\";\n        imgEl.src = s.imgSrc;\n// --- Contact Form ---\n        imgEl.alt = s.imgAlt;\n        imgEl.onload = function () {\n          imgEl.style.opacity = \"1\";\n        };\n\n        setActiveCard(i);\n        index = i;\n\n        featureEl.classList.remove(\"is-fading\");\n      }, FADE_MS);\n    }\n\n    function next() {\n      smoothSwap((index + 1) % slides.length);\n    }\n\n    function start() {\n      stop();\n      timer = setInterval(next, INTERVAL_MS);\n    }\n\n    function stop() {\n      if (timer) clearInterval(timer);\n      timer = null;\n    }\n\n\n    cards.forEach((btn) => {\n      btn.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        const i = Number(btn.dataset.slide);\n        if (!Number.isNaN(i)) {\n          smoothSwap(i);\n          start();\n        }\n      });\n    });\n\n\n    const section = document.querySelector(\".mb-actionbox\");\n    if (section) {\n      section.addEventListener(\"mouseenter\", stop);\n      section.addEventListener(\"mouseleave\", start);\n    }\n\n\n    smoothSwap(0);\n    start();\n  })();\n\n\n\n  const cardBtns = document.querySelectorAll(\".card__btn\");\n  if (cardBtns.length) {\n    cardBtns.forEach(button => {\n      button.addEventListener(\"click\", function () {\n        const additionalContent = this.nextElementSibling;\n        if (additionalContent) additionalContent.classList.toggle(\"active\");\n      });\n    });\n  }\n\n\n\n  const imgBoxes = document.querySelectorAll(\".img-box\");\n  if (imgBoxes.length) {\n    imgBoxes.forEach(image => {\n      image.addEventListener(\"click\", function () {\n        this.classList.toggle(\"expanded\");\n      });\n    });\n  }\n\n\n\n  window.addEventListener(\"scroll\", function () {\n    const blocks = document.querySelectorAll(\".content-block\");\n    if (!blocks.length) return;\n\n    const scrollPos = window.scrollY;\n    blocks.forEach(block => {\n      const blockPosition = block.getBoundingClientRect().top + scrollPos;\n      const triggerPoint = window.innerHeight / 1.5;\n\n      if (blockPosition < scrollPos + triggerPoint) {\n        block.style.transform = \"scale(1.05)\";\n        block.style.opacity = \"1\";\n      } else {\n        block.style.transform = \"scale(1)\";\n        block.style.opacity = \"0.5\";\n      }\n    });\n  });\n\n});\n\n// --- Newsletter ---\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n// ==================== RESOURCE LIBRARY ====================\n\n  if (!document.querySelector(\".rl\")) return;\n\n  const searchEl = document.getElementById(\"rlSearch\");\n  const clearSearchBtn = document.querySelector(\".rl-clearSearch\");\n  const cardsEl = document.getElementById(\"rlCards\");\n  const metaEl = document.getElementById(\"rlMeta\");\n  const catsEl = document.getElementById(\"rlCategories\");\n  const provEl = document.getElementById(\"rlProviders\");\n  const chipsEl = document.getElementById(\"rlActiveChips\");\n  const clearAllEl = document.getElementById(\"rlClearAll\");\n\n  if (!searchEl || !clearSearchBtn || !cardsEl || !metaEl || !catsEl || !provEl || !chipsEl || !clearAllEl) return;\n\n\n  const state = {\n    q: \"\",\n    categories: new Set(),\n    providers: new Set(),\n    tags: new Set()\n  };\n\n  let all = [];\n\n  function showSkeletonCards(count = 4) {\n    cardsEl.innerHTML = \"\";\n    for (let i = 0; i < count; i++) {\n      const skeleton = document.createElement(\"div\");\n      skeleton.className = \"rl-skeleton-card\";\n      skeleton.innerHTML = `\n        <div class=\"rl-skeleton rl-skeleton-title\"></div>\n        <div class=\"rl-skeleton rl-skeleton-text\"></div>\n        <div class=\"rl-skeleton rl-skeleton-text\"></div>\n        <div class=\"rl-skeleton-tags\">\n          <div class=\"rl-skeleton rl-skeleton-tag\"></div>\n          <div class=\"rl-skeleton rl-skeleton-tag\"></div>\n          <div class=\"rl-skeleton rl-skeleton-tag\"></div>\n        </div>\n      `;\n      cardsEl.appendChild(skeleton);\n    }\n  }\n\n  function uniqSorted(arr) {\n    return Array.from(new Set(arr.filter(Boolean))).sort((a, b) => a.localeCompare(b));\n  }\n\n  function setClearBtnVisibility() {\n    const has = state.q.trim().length > 0;\n    clearSearchBtn.style.opacity = has ? \"1\" : \"0\";\n    clearSearchBtn.style.pointerEvents = has ? \"auto\" : \"none\";\n  }\n\n  function buildFilterButtons(container, items, type) {\n    container.innerHTML = \"\";\n    items.forEach((label) => {\n      const btn = document.createElement(\"button\");\n      btn.type = \"button\";\n      btn.className = \"rl-filterBtn\";\n      btn.dataset.label = label;\n      btn.dataset.type = type;\n      btn.textContent = label;\n\n\n      if (state[type].has(label)) {\n        btn.classList.add(\"is-active\");\n      }\n\n      btn.addEventListener(\"click\", () => {\n        const set = state[type];\n        if (set.has(label)) {\n          set.delete(label);\n          btn.classList.remove(\"is-active\");\n        } else {\n          set.add(label);\n          btn.classList.add(\"is-active\");\n        }\n        renderChips();\n        renderResults();\n      });\n\n      container.appendChild(btn);\n    });\n  }\n\n\n  function updateFilterButtonStates() {\n    document.querySelectorAll('.rl-filterBtn').forEach(btn => {\n      const type = btn.dataset.type;\n      const label = btn.dataset.label;\n      if (type && label && state[type]) {\n        btn.classList.toggle('is-active', state[type].has(label));\n      }\n    });\n  }\n\n  function renderChips() {\n    chipsEl.innerHTML = \"\";\n\n    const makeChip = (text, onRemove) => {\n      const b = document.createElement(\"button\");\n      b.type = \"button\";\n      b.className = \"rl-chip\";\n      b.innerHTML = `${text} <span aria-hidden=\"true\">âœ•</span>`;\n      b.addEventListener(\"click\", onRemove);\n      return b;\n    };\n\n    state.categories.forEach((c) => {\n      chipsEl.appendChild(makeChip(c, () => {\n        state.categories.delete(c);\n        renderChips();\n        renderResults();\n      }));\n    });\n\n    state.providers.forEach((p) => {\n      chipsEl.appendChild(makeChip(p, () => {\n        state.providers.delete(p);\n        renderChips();\n        renderResults();\n      }));\n    });\n\n    state.tags.forEach((t) => {\n      chipsEl.appendChild(makeChip(t, () => {\n        state.tags.delete(t);\n        renderChips();\n        renderResults();\n      }));\n    });\n  }\n\n  function matchesSet(itemValue, set) {\n    if (set.size === 0) return true;\n    if (!itemValue) return false;\n\n\n    if (Array.isArray(itemValue)) {\n      return itemValue.some(v => set.has(v));\n    }\n    return set.has(itemValue);\n  }\n\n  function matchesQuery(item, q) {\n    if (!q) return true;\n    const hay = (\n      (item.title || \"\") + \" \" +\n      (item.description || \"\") + \" \" +\n      (item.provider || \"\") + \" \" +\n      (item.category || \"\") + \" \" +\n      (Array.isArray(item.tags) ? item.tags.join(\" \") : \"\")\n    ).toLowerCase();\n    return hay.includes(q.toLowerCase());\n  }\n\n  function renderResults() {\n    const q = state.q.trim();\n\n    const filtered = all.filter((item) => {\n      const okQ = matchesQuery(item, q);\n      const okCat = matchesSet(item.category, state.categories);\n      const okProv = matchesSet(item.provider, state.providers);\n      const okTags = matchesSet(item.tags, state.tags);\n      return okQ && okCat && okProv && okTags;\n    });\n\n    metaEl.textContent = `Showing ${Math.min(filtered.length, 999)} out of ${all.length}`;\n\n    cardsEl.innerHTML = \"\";\n\n    filtered.forEach((item) => {\n      const card = document.createElement(\"article\");\n      card.className = \"rl-card card-animated hover-lift\";\n\n\n      const getLabel = (key, fallback) => {\n        return window.MindSpaceTranslations?.getTranslationSync?.(key) || fallback;\n      };\n\n      const small = document.createElement(\"p\");\n      small.className = \"rl-cardSmall\";\n      const audienceKey = `rl_aud_${(item.audience || \"General\").replace(/\\s+/g, \"\")}`;\n      const audienceText = getLabel(audienceKey, item.audience || \"General\");\n      small.innerHTML = `<span data-translate=\"${audienceKey}\">${audienceText}</span> â€¢ ${item.provider || \"MindSpace\"}`;\n\n      const title = document.createElement(\"h3\");\n      title.className = \"rl-cardTitle\";\n      title.textContent = item.title || \"Untitled\";\n\n      const body = document.createElement(\"p\");\n      body.className = \"rl-cardBody\";\n      body.textContent = item.description || \"\";\n\n      const tagsWrap = document.createElement(\"div\");\n      tagsWrap.className = \"rl-tags\";\n\n      (item.tags || []).slice(0, 6).forEach((t) => {\n        const tag = document.createElement(\"span\");\n        tag.className = \"rl-tag\";\n        const tagKey = `rl_tag_${t.replace(/[\\s&-]+/g, \"\")}`;\n        tag.textContent = getLabel(tagKey, t);\n        tag.setAttribute(\"data-translate\", tagKey);\n\n\n        tag.style.cursor = \"pointer\";\n        tag.addEventListener(\"click\", () => {\n          if (state.tags.has(t)) state.tags.delete(t);\n          else state.tags.add(t);\n          renderChips();\n          renderResults();\n        });\n\n        tagsWrap.appendChild(tag);\n      });\n\n      const actions = document.createElement(\"div\");\n      actions.className = \"rl-actions\";\n\n      const visit = document.createElement(\"a\");\n      visit.className = \"rl-visitBtn\";\n      visit.textContent = window.MindSpaceTranslations?.getTranslationSync?.(\"resourcelib_visit\") || \"VISIT\";\n      visit.setAttribute(\"data-translate\", \"resourcelib_visit\");\n      visit.href = item.url || \"#\";\n      visit.target = \"_blank\";\n      visit.rel = \"noopener\";\n      visit.setAttribute(\"aria-label\", `Visit ${item.title || \"resource\"}`);\n\n\n      const shareBtns = document.createElement(\"div\");\n      shareBtns.className = \"rl-share-btns\";\n\n\n      const copyBtn = document.createElement(\"button\");\n      copyBtn.className = \"rl-share-btn rl-share-btn--copy\";\n      copyBtn.innerHTML = '<ion-icon name=\"link-outline\"></ion-icon>';\n      copyBtn.title = \"Copy link\";\n      copyBtn.addEventListener(\"click\", () => {\n        navigator.clipboard.writeText(item.url || window.location.href).then(() => {\n          copyBtn.classList.add(\"is-copied\");\n          copyBtn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon>';\n          setTimeout(() => {\n            copyBtn.classList.remove(\"is-copied\");\n            copyBtn.innerHTML = '<ion-icon name=\"link-outline\"></ion-icon>';\n          }, 2000);\n        });\n      });\n\n\n      const twitterBtn = document.createElement(\"a\");\n      twitterBtn.className = \"rl-share-btn rl-share-btn--twitter\";\n      twitterBtn.innerHTML = '<ion-icon name=\"logo-twitter\"></ion-icon>';\n      twitterBtn.href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(item.title || \"Check out this resource\")}&url=${encodeURIComponent(item.url || window.location.href)}`;\n      twitterBtn.target = \"_blank\";\n      twitterBtn.rel = \"noopener\";\n      twitterBtn.title = \"Share on Twitter\";\n\n\n      const fbBtn = document.createElement(\"a\");\n      fbBtn.className = \"rl-share-btn rl-share-btn--facebook\";\n      fbBtn.innerHTML = '<ion-icon name=\"logo-facebook\"></ion-icon>';\n      fbBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(item.url || window.location.href)}`;\n      fbBtn.target = \"_blank\";\n      fbBtn.rel = \"noopener\";\n      fbBtn.title = \"Share on Facebook\";\n\n      shareBtns.appendChild(copyBtn);\n      shareBtns.appendChild(twitterBtn);\n      shareBtns.appendChild(fbBtn);\n\n      actions.appendChild(visit);\n      actions.appendChild(shareBtns);\n\n      card.appendChild(small);\n      card.appendChild(title);\n      card.appendChild(body);\n      card.appendChild(tagsWrap);\n      card.appendChild(actions);\n\n      cardsEl.appendChild(card);\n    });\n  }\n\n  function clearAll() {\n    state.q = \"\";\n    state.categories.clear();\n    state.providers.clear();\n    state.tags.clear();\n    searchEl.value = \"\";\n    setClearBtnVisibility();\n    renderChips();\n    renderResults();\n  }\n\n\n  searchEl.addEventListener(\"input\", () => {\n    state.q = searchEl.value;\n    setClearBtnVisibility();\n    renderResults();\n  });\n\n  clearSearchBtn.addEventListener(\"click\", () => {\n    state.q = \"\";\n    searchEl.value = \"\";\n    setClearBtnVisibility();\n    renderResults();\n    searchEl.focus();\n  });\n\n  clearAllEl.addEventListener(\"click\", clearAll);\n\n  setClearBtnVisibility();\n\n\n  showSkeletonCards(4);\n\n\n\n  const featuredIndices = [0, 5, 10];\n\n  function renderSpotlight(resources) {\n    const spotlightEl = document.getElementById('rlSpotlight');\n    if (!spotlightEl) return;\n\n    spotlightEl.innerHTML = '';\n\n    featuredIndices.forEach((index) => {\n      const item = resources[index];\n      if (!item) return;\n\n      const card = document.createElement('article');\n      card.className = 'rl-spotlight-card';\n\n\n      const badge = document.createElement('span');\n      badge.className = 'rl-spotlight-card__badge';\n      badge.textContent = 'Featured';\n\n      const provider = document.createElement('p');\n      provider.className = 'rl-spotlight-card__provider';\n      provider.textContent = item.provider || 'MindSpace';\n\n      const title = document.createElement('h4');\n      title.className = 'rl-spotlight-card__title';\n      title.textContent = item.title || 'Untitled';\n\n      const desc = document.createElement('p');\n      desc.className = 'rl-spotlight-card__desc';\n      desc.textContent = item.description || '';\n\n      const actions = document.createElement('div');\n      actions.className = 'rl-spotlight-card__actions';\n\n      const link = document.createElement('a');\n      link.className = 'rl-spotlight-card__btn rl-spotlight-card__btn--primary';\n      link.href = item.url || '#';\n      link.target = '_blank';\n      link.rel = 'noopener';\n      link.textContent = 'Learn More â†’';\n\n      actions.appendChild(link);\n      card.appendChild(badge);\n      card.appendChild(provider);\n      card.appendChild(title);\n      card.appendChild(desc);\n      card.appendChild(actions);\n\n      spotlightEl.appendChild(card);\n    });\n  }\n\n\n  function parseUrlFilters() {\n    const params = new URLSearchParams(window.location.search);\n    const category = params.get('category');\n    const topic = params.get('topic');\n    const search = params.get('q') || params.get('search');\n\n    return { category, topic, search };\n  }\n\n\n  function applyUrlFilters(categories) {\n    const { category, topic, search } = parseUrlFilters();\n\n\n    const filterParam = category || topic;\n    if (filterParam) {\n\n      const matchingCategory = categories.find(\n        cat => cat.toLowerCase() === filterParam.toLowerCase()\n      );\n      if (matchingCategory) {\n        state.categories.add(matchingCategory);\n      } else {\n\n        state.q = filterParam;\n        searchEl.value = filterParam;\n        setClearBtnVisibility();\n      }\n    }\n\n\n    if (search) {\n      state.q = search;\n      searchEl.value = search;\n      setClearBtnVisibility();\n    }\n  }\n\n\n  fetch(\"../data/resources.json\", { cache: \"no-store\" })\n    .then((r) => r.json())\n    .then((data) => {\n      all = Array.isArray(data) ? data : [];\n\n\n      const categories = uniqSorted(all.map(x => x.category));\n      const providers = uniqSorted(all.map(x => x.provider));\n\n      buildFilterButtons(catsEl, categories, \"categories\");\n      buildFilterButtons(provEl, providers, \"providers\");\n\n\n      applyUrlFilters(categories);\n\n\n      updateFilterButtonStates();\n\n\n      renderSpotlight(all);\n\n      renderChips();\n      renderResults();\n    })\n    .catch((err) => {\n      metaEl.textContent = \"Showing 0 out of 0\";\n      cardsEl.innerHTML = \"\";\n      const p = document.createElement(\"p\");\n      p.style.color = \"#6b7280\";\n      p.textContent = \"Could not load the resource database. Check that ../data/resources.json exists and the path is correct.\";\n      cardsEl.appendChild(p);\n      console.error(err);\n    });\n});\n\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n// ==================== TESTIMONIALS ====================\n  const resourceSection = document.querySelector(\".mb-resources\");\n  if (!resourceSection) return;\n\n\n  requestAnimationFrame(() => {\n    resourceSection.classList.add(\"is-ready\");\n  });\n\n\n  const cards = Array.from(document.querySelectorAll(\".mb-resource-card\"));\n\n\n  if (!cards.length) return;\n\n\n  const io = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry) => {\n        if (!entry.isIntersecting) return;\n\n        entry.target.classList.add(\"is-in\");\n        io.unobserve(entry.target);\n      });\n    },\n    { threshold: 0.12 }\n  );\n\n  cards.forEach((card, i) => {\n\n    card.style.setProperty(\"--delay\", `${Math.min(i * 35, 280)}ms`);\n    io.observe(card);\n  });\n});\n\n\n(function initTestimonialsScroller() {\n\n// ==================== INLINE NOTIFICATIONS ====================\n  const cols = document.querySelectorAll(\".mb-testimonials__col\");\n  if (!cols.length) return;\n\n  cols.forEach((col) => {\n    const viewport = col.querySelector(\".mb-testimonials__viewport\");\n    const track = col.querySelector(\".mb-testimonials__track\");\n    if (!viewport || !track) return;\n\n\n    if (!track.dataset.duplicated) {\n      const originalChildren = Array.from(track.children);\n      originalChildren.forEach((child) => {\n        const clone = child.cloneNode(true);\n        clone.setAttribute(\"aria-hidden\", \"true\");\n        track.appendChild(clone);\n      });\n      track.dataset.duplicated = \"true\";\n    }\n\n\n    const recalc = () => {\n\n      const total = track.scrollHeight;\n      const half = Math.floor(total / 2);\n\n\n      track.style.setProperty(\"--mb-tm-distance\", half + \"px\");\n\n\n\n      const speed = 28;\n      const duration = Math.max(10, Math.round(half / speed));\n      track.style.setProperty(\"--mb-tm-duration\", duration + \"s\");\n    };\n\n\n    requestAnimationFrame(() => requestAnimationFrame(recalc));\n\n\n    window.addEventListener(\"resize\", () => {\n      requestAnimationFrame(recalc);\n    });\n  });\n})();\n\n\n(function initNotifications() {\n\n// ==================== NAVBAR SEARCH ====================\n  const notifBadge = document.getElementById('notifBadge');\n  if (!notifBadge) return;\n\n\n  async function checkNotifications() {\n\n    if (typeof getCurrentUser === 'undefined') return;\n\n    const user = await getCurrentUser();\n    if (!user) {\n      notifBadge.hidden = true;\n      return;\n    }\n\n\n    if (typeof getSupabase !== 'undefined') {\n      const sb = getSupabase();\n      if (sb) {\n        try {\n          const { count } = await sb\n            .from('notifications')\n            .select('*', { count: 'exact', head: true })\n            .eq('user_id', user.id)\n            .eq('read', false);\n\n          if (count && count > 0) {\n            notifBadge.textContent = count > 99 ? '99+' : count;\n            notifBadge.hidden = false;\n          } else {\n            notifBadge.hidden = true;\n          }\n        } catch (e) {\n\n          notifBadge.hidden = true;\n        }\n      }\n    }\n  }\n\n\n  setTimeout(checkNotifications, 1500);\n\n\n  window.addEventListener('mindspace:authchange', (e) => {\n    if (e.detail.isSignedIn) {\n      setTimeout(checkNotifications, 500);\n    } else {\n      notifBadge.hidden = true;\n    }\n  });\n})();\n\n\n(function initNavbarSearch() {\n\n// ==================== MOOD CHECK-IN ====================\n  const searchContainer = document.getElementById('navbarSearch');\n  const searchInput = document.getElementById('searchInput');\n  const searchToggle = document.getElementById('searchToggle');\n  const searchResults = document.getElementById('searchResults');\n\n  if (!searchContainer || !searchInput || !searchToggle) return;\n\n\n  const searchData = [\n    { title: 'Understanding Anxiety', type: 'Article', url: './articles/anxiety.html', icon: 'document-text-outline' },\n    { title: 'Depression Guide', type: 'Article', url: './articles/depression.html', icon: 'document-text-outline' },\n    { title: 'Stress Management', type: 'Article', url: './articles/stress.html', icon: 'document-text-outline' },\n    { title: 'Sleep & Mental Health', type: 'Article', url: './articles/sleep.html', icon: 'document-text-outline' },\n    { title: 'Mindfulness Basics', type: 'Article', url: './articles/mindfulness.html', icon: 'document-text-outline' },\n    { title: 'Teen Mental Health', type: 'Article', url: './articles/teen-mental-health.html', icon: 'document-text-outline' },\n    { title: 'Resource Library', type: 'Page', url: './resourcelib/', icon: 'library-outline' },\n    { title: 'Community Hub', type: 'Page', url: './community/', icon: 'people-outline' },\n    { title: 'Support & Contact', type: 'Page', url: './support/', icon: 'call-outline' },\n    { title: 'Blog', type: 'Page', url: './blog/', icon: 'newspaper-outline' },\n    { title: 'Anxiety Resources', type: 'Resource', url: './resourcelib/?category=anxiety', icon: 'pulse-outline' },\n    { title: 'Depression Resources', type: 'Resource', url: './resourcelib/?category=depression', icon: 'cloudy-outline' },\n    { title: 'Stress Resources', type: 'Resource', url: './resourcelib/?category=stress', icon: 'flash-outline' },\n    { title: 'Mindfulness Resources', type: 'Resource', url: './resourcelib/?category=mindfulness', icon: 'leaf-outline' },\n    { title: 'Crisis Support', type: 'Support', url: './support/#crisis', icon: 'alert-circle-outline' },\n    { title: 'Breathing Exercises', type: 'Tool', url: './support/#breathing', icon: 'fitness-outline' }\n  ];\n\n\n  searchToggle.addEventListener('click', () => {\n    searchContainer.classList.toggle('is-open');\n    if (searchContainer.classList.contains('is-open')) {\n      searchInput.focus();\n    } else {\n      searchInput.value = '';\n      searchResults.classList.remove('is-visible');\n    }\n  });\n\n\n  searchInput.addEventListener('input', (e) => {\n    const query = e.target.value.toLowerCase().trim();\n\n    if (query.length < 2) {\n      searchResults.classList.remove('is-visible');\n      return;\n    }\n\n    const matches = searchData.filter(item =>\n      item.title.toLowerCase().includes(query) ||\n      item.type.toLowerCase().includes(query)\n    ).slice(0, 6);\n\n    if (matches.length === 0) {\n      searchResults.innerHTML = '<div class=\"navbar-search__empty\">No results found</div>';\n    } else {\n      searchResults.innerHTML = matches.map(item => `\n        <a href=\"${item.url}\" class=\"navbar-search__item\">\n          <div class=\"navbar-search__item-icon\">\n            <ion-icon name=\"${item.icon}\"></ion-icon>\n          </div>\n          <div class=\"navbar-search__item-content\">\n            <div class=\"navbar-search__item-title\">${item.title}</div>\n            <div class=\"navbar-search__item-type\">${item.type}</div>\n          </div>\n        </a>\n      `).join('');\n    }\n\n    searchResults.classList.add('is-visible');\n  });\n\n\n  document.addEventListener('click', (e) => {\n    if (!searchContainer.contains(e.target)) {\n      searchContainer.classList.remove('is-open');\n      searchResults.classList.remove('is-visible');\n    }\n  });\n\n\n  document.addEventListener('keydown', (e) => {\n    if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\n      e.preventDefault();\n      searchContainer.classList.add('is-open');\n      searchInput.focus();\n    }\n    if (e.key === 'Escape') {\n      searchContainer.classList.remove('is-open');\n      searchResults.classList.remove('is-visible');\n    }\n  });\n})();\n\n\n(function initMoodCheckIn() {\n\n// ==================== MOBILE SETTINGS ====================\n  const moodButtons = document.querySelectorAll('.mb-moodcheck__btn');\n  const resultContainer = document.getElementById('moodResult');\n  const messageEl = document.getElementById('moodMessage');\n  const linkEl = document.getElementById('moodLink');\n\n  if (!moodButtons.length || !resultContainer) return;\n\n  const moodData = {\n    great: {\n      message: \"That's wonderful! Keep up the positive momentum. Check out our mindfulness resources to maintain your well-being.\",\n      link: './resourcelib/?category=mindfulness',\n      linkText: 'Explore Mindfulness â†’'\n    },\n    okay: {\n      message: \"It's okay to feel okay. Small steps can make a big difference. Explore our self-care resources.\",\n      link: './resourcelib/',\n      linkText: 'Browse Resources â†’'\n    },\n    stressed: {\n      message: \"Stress is manageable. We have practical tools and techniques to help you cope.\",\n      link: './resourcelib/?category=stress',\n      linkText: 'Stress Management Tips â†’'\n    },\n    anxious: {\n      message: \"Anxiety can feel overwhelming, but you're not alone. Explore our anxiety resources and support options.\",\n      link: './resourcelib/?category=anxiety',\n      linkText: 'Anxiety Support â†’'\n    },\n    sad: {\n      message: \"It's okay to feel sad. Reach out for support - we have resources that can help.\",\n      link: './support/',\n      linkText: 'Get Support â†’'\n    }\n  };\n\n  moodButtons.forEach(btn => {\n    btn.addEventListener('click', () => {\n      const mood = btn.dataset.mood;\n      const data = moodData[mood];\n\n      if (!data) return;\n\n\n      moodButtons.forEach(b => b.classList.remove('is-selected'));\n\n      btn.classList.add('is-selected');\n\n\n      if (messageEl) messageEl.textContent = data.message;\n      if (linkEl) {\n        linkEl.href = data.link;\n        linkEl.textContent = data.linkText;\n      }\n      resultContainer.hidden = false;\n    });\n  });\n})();\n\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\n// ==================== SUGGEST RESOURCE MODAL ====================\n  const settingsToggle = document.querySelector('.mobile-settings-toggle');\n  const settingsSection = document.querySelector('.mobile-settings-section');\n\n  if (settingsToggle && settingsSection) {\n    settingsToggle.addEventListener('click', function() {\n      const isExpanded = settingsToggle.getAttribute('aria-expanded') === 'true';\n      settingsToggle.setAttribute('aria-expanded', !isExpanded);\n      settingsSection.classList.toggle('collapsed');\n    });\n  }\n});\n\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  const suggestModal = document.getElementById('suggestModal');\n  const openSuggestBtn = document.getElementById('openSuggestModal');\n  const suggestForm = document.getElementById('suggestForm');\n  const cancelSuggestBtn = document.getElementById('cancelSuggest');\n  const suggestSuccess = document.getElementById('suggestSuccess');\n  const closeSuggestSuccessBtn = document.getElementById('closeSuggestSuccess');\n  const modalContent = suggestModal?.querySelector('.suggest-modal__content');\n\n  if (!suggestModal || !openSuggestBtn) return;\n\n  let previouslyFocusedElement = null;\n\n  function openSuggestModal() {\n\n    previouslyFocusedElement = document.activeElement;\n\n    suggestModal.classList.add('is-active');\n    document.body.style.overflow = 'hidden';\n\n\n    if (suggestForm) suggestForm.style.display = 'block';\n    if (suggestSuccess) suggestSuccess.style.display = 'none';\n\n\n    const firstInput = suggestForm?.querySelector('input, textarea, select');\n    if (firstInput) {\n      setTimeout(() => firstInput.focus(), 100);\n    }\n  }\n\n  function closeSuggestModal() {\n    suggestModal.classList.remove('is-active');\n    document.body.style.overflow = '';\n\n\n    if (previouslyFocusedElement) {\n      previouslyFocusedElement.focus();\n      previouslyFocusedElement = null;\n    }\n  }\n\n\n  function handleTabKey(e) {\n    if (!suggestModal.classList.contains('is-active')) return;\n    if (e.key !== 'Tab') return;\n\n    const focusableElements = modalContent.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n    const firstElement = focusableElements[0];\n    const lastElement = focusableElements[focusableElements.length - 1];\n\n    if (e.shiftKey && document.activeElement === firstElement) {\n      e.preventDefault();\n      lastElement.focus();\n    } else if (!e.shiftKey && document.activeElement === lastElement) {\n      e.preventDefault();\n      firstElement.focus();\n    }\n  }\n\n  openSuggestBtn.addEventListener('click', openSuggestModal);\n\n\n  suggestModal.querySelector('.suggest-modal__backdrop')?.addEventListener('click', closeSuggestModal);\n  suggestModal.querySelector('.suggest-modal__close')?.addEventListener('click', closeSuggestModal);\n\n  cancelSuggestBtn?.addEventListener('click', closeSuggestModal);\n  closeSuggestSuccessBtn?.addEventListener('click', closeSuggestModal);\n\n\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape' && suggestModal.classList.contains('is-active')) {\n      closeSuggestModal();\n    }\n    handleTabKey(e);\n  });\n\n\n  suggestForm?.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const formData = new FormData(suggestForm);\n    const data = {\n      name: formData.get('name'),\n      description: formData.get('description'),\n      category: formData.get('category'),\n      provider: formData.get('provider') || null,\n      website: formData.get('website') || null,\n      phone: formData.get('phone') || null,\n      address: formData.get('address') || null,\n      submitter_email: formData.get('submitter_email') || null,\n      status: 'pending',\n      created_at: new Date().toISOString()\n    };\n\n    try {\n\n      if (window.supabase) {\n        const { error } = await window.supabase\n          .from('resource_suggestions')\n          .insert([data]);\n\n        if (error) {\n          console.error('Error submitting suggestion:', error);\n\n        }\n      }\n\n\n      suggestForm.style.display = 'none';\n      suggestSuccess.style.display = 'block';\n      suggestForm.reset();\n\n    } catch (err) {\n      console.error('Error:', err);\n\n      suggestForm.style.display = 'none';\n      suggestSuccess.style.display = 'block';\n      suggestForm.reset();\n    }\n  });\n});\n\n(function initSmartTopbar() {\n  const topbar = document.getElementById('smartTopbar');\n  if (!topbar) return;\n\n  function syncTopbarHeight() {\n    var h = topbar.offsetHeight;\n    document.documentElement.style.setProperty('--topbar-height', h + 'px');\n  }\n\n  function hideTopbar() {\n    document.documentElement.style.setProperty('--topbar-height', '0px');\n    var hdr = document.querySelector('.header');\n    if (hdr) hdr.classList.add('topbar--gone');\n  }\n\n  function showTopbar() {\n    topbar.classList.remove('dismissed');\n    topbar.classList.remove('topbar--hidden');\n    var hdr = document.querySelector('.header');\n    if (hdr) hdr.classList.remove('topbar--gone');\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n    syncTopbarHeight();\n    startTimer();\n  }\n\n  if (sessionStorage.getItem('topbarDismissed') === '1') {\n    topbar.classList.add('dismissed');\n    hideTopbar();\n  }\n\n  if (!topbar.classList.contains('dismissed')) {\n    syncTopbarHeight();\n  }\n\n  const slides = topbar.querySelectorAll('.topbar__slide');\n  const dots = topbar.querySelectorAll('.topbar__dot');\n  let current = 0;\n  let timer = null;\n  const INTERVAL = 5000;\n\n  function goTo(index) {\n    const prev = topbar.querySelector('.topbar__slide.active');\n    if (prev) {\n      prev.classList.remove('active');\n      prev.classList.add('exit-up');\n      setTimeout(() => prev.classList.remove('exit-up'), 500);\n    }\n    dots.forEach(d => d.classList.remove('active'));\n    slides[index].classList.add('active');\n    dots[index].classList.add('active');\n    current = index;\n    setTimeout(syncTopbarHeight, 50);\n  }\n\n  function next() {\n    goTo((current + 1) % slides.length);\n  }\n\n  function startTimer() {\n    clearInterval(timer);\n    timer = setInterval(next, INTERVAL);\n  }\n\n  dots.forEach(dot => {\n    dot.addEventListener('click', () => {\n      goTo(parseInt(dot.dataset.dot, 10));\n      startTimer();\n    });\n  });\n\n\n\n  if (!topbar.classList.contains('dismissed')) {\n    startTimer();\n  }\n})();\n\n","path":null,"size_bytes":51758,"size_tokens":null},"support/support-animations.js":{"content":"// ==================== SUPPORT PAGE ANIMATIONS ====================\n\n(function() {\n  'use strict';\n\n  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n\n  // ==================== SCROLL ANIMATIONS ====================\n  function initScrollAnimations() {\n    if (prefersReducedMotion) {\n      document.querySelectorAll('.animate-section, .animate-stagger, .animate-slide-left, .animate-slide-right, .animate-scale').forEach(el => {\n        el.classList.add('is-visible');\n      });\n      return;\n    }\n\n    const observerOptions = {\n      root: null,\n      rootMargin: '0px 0px -80px 0px',\n      threshold: 0.1\n    };\n\n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          entry.target.classList.add('is-visible');\n        }\n      });\n    }, observerOptions);\n\n    const animatedElements = document.querySelectorAll('.animate-section, .animate-stagger, .animate-slide-left, .animate-slide-right, .animate-scale');\n    animatedElements.forEach(el => observer.observe(el));\n  }\n\n  // ==================== BACK TO TOP ====================\n  function initBackToTop() {\n    const backToTopBtn = document.getElementById('backToTop');\n    if (!backToTopBtn) return;\n\n    function toggleBackToTop() {\n      if (window.scrollY > 400) {\n        backToTopBtn.classList.add('visible');\n      } else {\n        backToTopBtn.classList.remove('visible');\n      }\n    }\n\n    backToTopBtn.addEventListener('click', () => {\n      window.scrollTo({\n        top: 0,\n        behavior: prefersReducedMotion ? 'auto' : 'smooth'\n      });\n    });\n\n    let scrollTimeout;\n    window.addEventListener('scroll', () => {\n      if (scrollTimeout) return;\n      scrollTimeout = setTimeout(() => {\n        toggleBackToTop();\n        scrollTimeout = null;\n      }, 100);\n    }, { passive: true });\n\n    toggleBackToTop();\n  }\n\n  // ==================== ANIMATION CLASSES ====================\n  function addAnimationClasses() {\n    const crisisCards = document.querySelector('.crisis-cards');\n    if (crisisCards) {\n      crisisCards.classList.add('animate-stagger');\n    }\n\n    const crisisBanner = document.querySelector('.crisis-banner');\n    if (crisisBanner) {\n      crisisBanner.classList.add('animate-section');\n    }\n\n    const quicklinksGrid = document.querySelector('.quicklinks-grid');\n    if (quicklinksGrid) {\n      quicklinksGrid.classList.add('animate-stagger');\n    }\n\n    const helplinesGrid = document.querySelector('.helplines-grid');\n    if (helplinesGrid) {\n      helplinesGrid.classList.add('animate-stagger');\n    }\n\n    const selfhelpCards = document.querySelector('.selfhelp-cards');\n    if (selfhelpCards) {\n      selfhelpCards.classList.add('animate-stagger');\n    }\n\n    const faqList = document.querySelector('.faq-list');\n    if (faqList) {\n      faqList.classList.add('animate-stagger');\n    }\n\n    document.querySelectorAll('.section-header').forEach(header => {\n      header.classList.add('animate-section');\n    });\n\n    const appointmentForm = document.querySelector('.appointment-form');\n    if (appointmentForm) {\n      appointmentForm.classList.add('animate-scale');\n    }\n\n    const resourcesGrid = document.querySelector('.resources-grid');\n    if (resourcesGrid) {\n      resourcesGrid.classList.add('animate-stagger');\n    }\n  }\n\n  // ==================== CARD HOVER EFFECTS ====================\n  function initCardHoverEffects() {\n    if (prefersReducedMotion) return;\n\n    const cards = document.querySelectorAll('.crisis-card, .quicklink-card, .helpline-card, .selfhelp-card');\n    \n    cards.forEach(card => {\n      card.addEventListener('mouseenter', function(e) {\n        this.style.transition = 'transform 0.3s ease, box-shadow 0.3s ease';\n      });\n\n      card.addEventListener('mousemove', function(e) {\n        const rect = this.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        const centerX = rect.width / 2;\n        const centerY = rect.height / 2;\n        const rotateX = (y - centerY) / 20;\n        const rotateY = (centerX - x) / 20;\n        \n        this.style.transform = `translateY(-8px) scale(1.02) perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;\n      });\n\n      card.addEventListener('mouseleave', function() {\n        this.style.transform = '';\n      });\n    });\n  }\n\n  // ==================== RIPPLE EFFECT ====================\n  function initRippleEffect() {\n    if (prefersReducedMotion) return;\n\n    const buttons = document.querySelectorAll('.crisis-btn, .helpline-contact');\n    \n    buttons.forEach(button => {\n      button.addEventListener('click', function(e) {\n        const rect = this.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        \n        const ripple = document.createElement('span');\n        ripple.className = 'ripple-effect';\n        ripple.style.left = x + 'px';\n        ripple.style.top = y + 'px';\n        \n        this.appendChild(ripple);\n        \n        setTimeout(() => ripple.remove(), 600);\n      });\n    });\n  }\n\n  // ==================== INITIALIZATION ====================\n  function init() {\n    addAnimationClasses();\n    initScrollAnimations();\n    initBackToTop();\n    initCardHoverEffects();\n    initRippleEffect();\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n})();\n","path":null,"size_bytes":5500,"size_tokens":null},"profile/profile-immersive.js":{"content":"// ==================== IMMERSIVE PROFILE EXPERIENCE ====================\n\n(function() {\n  'use strict';\n  \n  // ==================== DAY/NIGHT CYCLE ====================\n  const TimeOfDay = {\n    MORNING: 'morning',\n    AFTERNOON: 'afternoon',\n    EVENING: 'evening',\n    NIGHT: 'night'\n  };\n  \n  function getTimeOfDay() {\n    const hour = new Date().getHours();\n    if (hour >= 6 && hour < 12) return TimeOfDay.MORNING;\n    if (hour >= 12 && hour < 17) return TimeOfDay.AFTERNOON;\n    if (hour >= 17 && hour < 20) return TimeOfDay.EVENING;\n    return TimeOfDay.NIGHT;\n  }\n  \n  function getGreeting() {\n    const time = getTimeOfDay();\n    switch (time) {\n      case TimeOfDay.MORNING: return 'Good morning';\n      case TimeOfDay.AFTERNOON: return 'Good afternoon';\n      case TimeOfDay.EVENING: return 'Good evening';\n      case TimeOfDay.NIGHT: return 'Good night';\n      default: return 'Welcome back';\n    }\n  }\n  \n  function getTimeEmoji() {\n    const time = getTimeOfDay();\n    switch (time) {\n      case TimeOfDay.MORNING: return 'ðŸŒ…';\n      case TimeOfDay.AFTERNOON: return 'â˜€ï¸';\n      case TimeOfDay.EVENING: return 'ðŸŒ‡';\n      case TimeOfDay.NIGHT: return 'ðŸŒ™';\n      default: return 'âœ¨';\n    }\n  }\n  \n  // --- Affirmations ---\n  const affirmations = {\n    morning: [\n      \"Today is full of possibilities.\",\n      \"You have the strength to face whatever comes.\",\n      \"Take a deep breath and embrace the day.\",\n      \"Your potential is limitless.\",\n      \"Every morning is a fresh start.\"\n    ],\n    afternoon: [\n      \"You're doing great. Keep going!\",\n      \"Take a moment to appreciate your progress.\",\n      \"Your efforts are making a difference.\",\n      \"Stay focused, you've got this.\",\n      \"Remember to take breaks and breathe.\"\n    ],\n    evening: [\n      \"You've accomplished more than you realize.\",\n      \"It's okay to slow down now.\",\n      \"Reflect on the good moments of today.\",\n      \"You deserve rest and relaxation.\",\n      \"Be proud of how far you've come.\"\n    ],\n    night: [\n      \"Rest well, tomorrow is a new beginning.\",\n      \"Let go of today's worries.\",\n      \"You did your best today, and that's enough.\",\n      \"Sweet dreams await you.\",\n      \"The night is for healing and renewal.\"\n    ]\n  };\n  \n  function getRandomAffirmation() {\n    const time = getTimeOfDay();\n    const timeAffirmations = affirmations[time] || affirmations.morning;\n    return timeAffirmations[Math.floor(Math.random() * timeAffirmations.length)];\n  }\n  \n  // --- Time Theme Application ---\n  function applyTimeOfDay() {\n    const time = getTimeOfDay();\n    const body = document.body;\n    const profile = document.querySelector('.mb-profile');\n    \n    body.classList.remove('time-morning', 'time-afternoon', 'time-evening', 'time-night');\n    body.classList.add(`time-${time}`);\n    \n    if (profile) {\n      profile.classList.add('immersive');\n    }\n    \n    createImmersiveBackground();\n    updateGreeting();\n  }\n  \n  // --- Immersive Background ---\n  function createImmersiveBackground() {\n    if (document.querySelector('.immersive-bg')) return;\n    \n    const bg = document.createElement('div');\n    bg.className = 'immersive-bg';\n    bg.innerHTML = `\n      <div class=\"immersive-bg__gradient\"></div>\n      <div class=\"immersive-bg__shapes\">\n        <div class=\"floating-shape\"></div>\n        <div class=\"floating-shape\"></div>\n        <div class=\"floating-shape\"></div>\n        <div class=\"floating-shape\"></div>\n      </div>\n      <div class=\"immersive-bg__stars\" id=\"starsContainer\"></div>\n      <div class=\"immersive-bg__sun\"></div>\n      <div class=\"immersive-bg__moon\"></div>\n    `;\n    \n    document.body.insertBefore(bg, document.body.firstChild);\n    generateStars();\n  }\n  \n  function generateStars() {\n    const container = document.getElementById('starsContainer');\n    if (!container) return;\n    \n    container.innerHTML = '';\n    \n    for (let i = 0; i < 50; i++) {\n      const star = document.createElement('div');\n      star.className = 'star';\n      star.style.left = `${Math.random() * 100}%`;\n      star.style.top = `${Math.random() * 60}%`;\n      star.style.width = `${2 + Math.random() * 3}px`;\n      star.style.height = star.style.width;\n      star.style.animationDelay = `${Math.random() * 3}s`;\n      container.appendChild(star);\n    }\n  }\n  \n  // --- Greeting ---\n  function updateGreeting() {\n    const greetingEl = document.querySelector('.profile-greeting');\n    if (!greetingEl) return;\n    \n    if (window.isOwnProfile !== true) {\n      greetingEl.style.display = 'none';\n      return;\n    }\n    greetingEl.style.display = '';\n    \n    const timeEl = greetingEl.querySelector('.profile-greeting__time');\n    const messageEl = greetingEl.querySelector('.profile-greeting__message');\n    const affirmationEl = greetingEl.querySelector('.profile-greeting__affirmation');\n    \n    const userName = window.userProfile?.display_name || \n                     document.querySelector('.mb-profile__name')?.textContent ||\n                     'there';\n    \n    const firstName = userName.split(' ')[0];\n    \n    if (timeEl) {\n      timeEl.textContent = `${getTimeEmoji()} ${new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}`;\n    }\n    \n    if (messageEl) {\n      messageEl.textContent = '';\n      const greetingText = document.createTextNode(`${getGreeting()}, `);\n      const nameSpan = document.createElement('span');\n      nameSpan.className = 'profile-greeting__name';\n      nameSpan.textContent = firstName;\n      const exclamation = document.createTextNode('!');\n      messageEl.appendChild(greetingText);\n      messageEl.appendChild(nameSpan);\n      messageEl.appendChild(exclamation);\n    }\n    \n    if (affirmationEl) {\n      affirmationEl.textContent = `\"${getRandomAffirmation()}\"`;\n    }\n  }\n  \n  // ==================== SCROLL ANIMATIONS ====================\n  function initScrollAnimations() {\n    const observerOptions = {\n      root: null,\n      rootMargin: '0px 0px -50px 0px',\n      threshold: 0.1\n    };\n    \n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          entry.target.classList.add('revealed');\n          \n          const counters = entry.target.querySelectorAll('.stat-counter[data-target]');\n          counters.forEach(counter => animateCounter(counter));\n          \n          const rings = entry.target.querySelectorAll('.progress-ring__circle-progress');\n          rings.forEach(ring => animateProgressRing(ring));\n        }\n      });\n    }, observerOptions);\n    \n    document.querySelectorAll('.scroll-reveal, .scroll-reveal-left, .scroll-reveal-right, .scroll-reveal-scale, .stagger-reveal').forEach(el => {\n      observer.observe(el);\n    });\n  }\n  \n  // --- Counter Animation ---\n  function animateCounter(counter) {\n    if (counter.classList.contains('counted')) return;\n    counter.classList.add('counted');\n    \n    const target = parseInt(counter.dataset.target) || 0;\n    const duration = 1500;\n    const start = performance.now();\n    \n    function update(currentTime) {\n      const elapsed = currentTime - start;\n      const progress = Math.min(elapsed / duration, 1);\n      \n      const easeOutQuart = 1 - Math.pow(1 - progress, 4);\n      const current = Math.round(easeOutQuart * target);\n      \n      counter.textContent = current.toLocaleString();\n      \n      if (progress < 1) {\n        counter.classList.add('counting');\n        requestAnimationFrame(update);\n      } else {\n        counter.classList.remove('counting');\n      }\n    }\n    \n    requestAnimationFrame(update);\n  }\n  \n  // --- Progress Ring Animation ---\n  function animateProgressRing(ring) {\n    if (ring.classList.contains('animated')) return;\n    ring.classList.add('animated');\n    \n    const percent = parseFloat(ring.dataset.percent) || 0;\n    const circumference = 226;\n    const offset = circumference - (percent / 100) * circumference;\n    \n    setTimeout(() => {\n      ring.style.strokeDashoffset = offset;\n    }, 100);\n  }\n  \n  // ==================== HAPTIC FEEDBACK ====================\n  const HapticIntensity = {\n    LIGHT: 'light',\n    MEDIUM: 'medium',\n    HEAVY: 'heavy'\n  };\n  \n  function triggerHaptic(intensity = HapticIntensity.LIGHT) {\n    if (!window.navigator?.vibrate) return;\n    \n    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;\n    \n    switch (intensity) {\n      case HapticIntensity.LIGHT:\n        navigator.vibrate(10);\n        break;\n      case HapticIntensity.MEDIUM:\n        navigator.vibrate(25);\n        break;\n      case HapticIntensity.HEAVY:\n        navigator.vibrate([30, 10, 30]);\n        break;\n    }\n  }\n  \n  function initHapticFeedback() {\n    document.querySelectorAll('.haptic-light, .quick-action-btn, .mb-profile__tab').forEach(el => {\n      el.addEventListener('touchstart', () => triggerHaptic(HapticIntensity.LIGHT), { passive: true });\n    });\n    \n    document.querySelectorAll('.haptic-medium, .follow-btn, .save-btn').forEach(el => {\n      el.addEventListener('touchstart', () => triggerHaptic(HapticIntensity.MEDIUM), { passive: true });\n    });\n    \n    document.querySelectorAll('.haptic-heavy, .achievement-unlock').forEach(el => {\n      el.addEventListener('touchstart', () => triggerHaptic(HapticIntensity.HEAVY), { passive: true });\n    });\n    \n    document.querySelectorAll('.haptic-feedback').forEach(el => {\n      el.addEventListener('touchstart', function() {\n        this.classList.add('touched');\n        setTimeout(() => this.classList.remove('touched'), 400);\n      }, { passive: true });\n    });\n  }\n  \n  // ==================== PARALLAX ====================\n  function initParallax() {\n    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;\n    \n    const shapes = document.querySelectorAll('.floating-shape');\n    \n    window.addEventListener('scroll', () => {\n      const scrollY = window.scrollY;\n      \n      shapes.forEach((shape, i) => {\n        const speed = 0.05 + (i * 0.02);\n        shape.style.transform = `translateY(${scrollY * speed}px)`;\n      });\n    }, { passive: true });\n  }\n  \n  // ==================== ONLINE STATUS ====================\n  function updateOnlineStatus(isOnline = true) {\n    const statusEl = document.querySelector('.online-status');\n    if (!statusEl) return;\n    \n    statusEl.classList.remove('online-status--online', 'online-status--away', 'online-status--offline');\n    \n    if (isOnline) {\n      statusEl.classList.add('online-status--online');\n      statusEl.querySelector('.online-status__text').textContent = 'Online';\n    } else {\n      statusEl.classList.add('online-status--offline');\n      statusEl.querySelector('.online-status__text').textContent = 'Offline';\n    }\n  }\n  \n  // ==================== PEOPLE SUGGESTIONS ====================\n  async function loadPeopleSuggestions() {\n    const container = document.getElementById('peopleSuggestions');\n    const list = document.getElementById('peopleSuggestionsList');\n    if (!container || !list || !window.supabaseClient) return;\n    \n    try {\n      const { data: { user } } = await window.supabaseClient.auth.getUser();\n      if (!user) return;\n      \n      const { data: following } = await window.supabaseClient\n        .from('followers')\n        .select('following_id')\n        .eq('follower_id', user.id);\n      \n      const followingIds = following?.map(f => f.following_id) || [];\n      followingIds.push(user.id);\n      \n      const { data: suggestions } = await window.supabaseClient\n        .from('profiles')\n        .select('id, display_name, avatar_url')\n        .not('id', 'in', `(${followingIds.join(',')})`)\n        .not('display_name', 'is', null)\n        .limit(5);\n      \n      if (!suggestions || suggestions.length === 0) {\n        container.style.display = 'none';\n        return;\n      }\n      \n      container.style.display = 'block';\n      list.innerHTML = '';\n      \n      for (const person of suggestions) {\n        const { count: mutualCount } = await window.supabaseClient\n          .from('followers')\n          .select('*', { count: 'exact', head: true })\n          .eq('following_id', person.id)\n          .in('follower_id', followingIds.filter(id => id !== user.id));\n        \n        const item = document.createElement('div');\n        item.className = 'people-suggestion';\n        const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--user-accent').trim() || '#af916d';\n        const avatarColors = [accentColor,'#E57373','#64B5F6','#81C784','#FFD54F','#BA68C8','#4DB6AC','#FF8A65','#90A4AE','#A1887F'];\n        const pName = person.display_name || 'U';\n        const pInitials = pName.split(' ').map(w => w[0]).join('').toUpperCase().slice(0, 2) || pName.substring(0, 2).toUpperCase();\n        const pColorIdx = pName.charCodeAt(0) % avatarColors.length;\n        const avatarHtml = person.avatar_url\n          ? `<img src=\"${person.avatar_url}\" alt=\"${person.display_name}\" class=\"people-suggestion__avatar\" onerror=\"this.outerHTML='<div class=\\\\'people-suggestion__avatar people-suggestion__avatar--initials\\\\' style=\\\\'background:${avatarColors[pColorIdx]}\\\\'>${pInitials}</div>'\">`\n          : `<div class=\"people-suggestion__avatar people-suggestion__avatar--initials\" style=\"background:${avatarColors[pColorIdx]}\">${pInitials}</div>`;\n        item.innerHTML = `\n          ${avatarHtml}\n          <div class=\"people-suggestion__info\">\n            <a href=\"/profile/?user=${person.id}\" class=\"people-suggestion__name\">${person.display_name}</a>\n            <span class=\"people-suggestion__mutual\">${mutualCount || 0} mutual connection${mutualCount !== 1 ? 's' : ''}</span>\n          </div>\n          <button class=\"people-suggestion__follow-btn haptic-light\" data-user-id=\"${person.id}\">Follow</button>\n        `;\n        \n        const followBtn = item.querySelector('.people-suggestion__follow-btn');\n        followBtn.addEventListener('click', async (e) => {\n          e.preventDefault();\n          const userId = followBtn.dataset.userId;\n          \n          try {\n            await window.supabaseClient\n              .from('followers')\n              .insert({ follower_id: user.id, following_id: userId });\n            \n            followBtn.textContent = 'Following';\n            followBtn.disabled = true;\n            followBtn.style.opacity = '0.6';\n            \n            const fromName = user.user_metadata?.display_name || user.email?.split('@')[0] || 'Someone';\n            try {\n              await window.supabaseClient.from('notifications').insert({\n                user_id: userId,\n                type: 'follow',\n                from_user_name: fromName,\n                content: `${fromName} started following you`,\n                read: false\n              });\n            } catch (notifErr) {\n              console.warn('Failed to create follow notification:', notifErr);\n            }\n            \n            triggerHaptic(HapticIntensity.MEDIUM);\n          } catch (err) {\n            console.error('Failed to follow:', err);\n          }\n        });\n        \n        list.appendChild(item);\n      }\n    } catch (err) {\n      console.error('Failed to load people suggestions:', err);\n      container.style.display = 'none';\n    }\n  }\n  \n  // ==================== INITIALIZATION ====================\n  function init() {\n    applyTimeOfDay();\n    setInterval(applyTimeOfDay, 60000);\n    initScrollAnimations();\n    initHapticFeedback();\n    initParallax();\n    \n    window.addEventListener('profileLoaded', () => {\n      updateGreeting();\n      loadPeopleSuggestions();\n    });\n    \n    setTimeout(() => {\n      if (window.userProfile) {\n        updateGreeting();\n        loadPeopleSuggestions();\n      }\n    }, 2000);\n    \n    const observer = new MutationObserver(() => {\n      applyTimeOfDay();\n    });\n    \n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['data-theme']\n    });\n  }\n  \n  // --- Public API ---\n  window.ImmersiveProfile = {\n    triggerHaptic,\n    loadPeopleSuggestions,\n    updateGreeting,\n    animateCounter,\n    animateProgressRing,\n    getTimeOfDay,\n    getGreeting,\n    getRandomAffirmation\n  };\n  \n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n})();\n","path":null,"size_bytes":16326,"size_tokens":null},"css/style.css":{"content":"/* === IMPORTS === */\n@import url(\"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap\");\n@import url(\"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap\");\n@import url(\"https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap\");\n\n\n/* === VARIABLES === */\n:root {\n  --header-height: 100px;\n  --header-height-active: 60px;\n  --header-height-safe: calc(var(--header-height) + 20px);\n\n  \n  --breakpoint-mobile: 480px;\n  --breakpoint-tablet: 768px;\n  --breakpoint-desktop: 1024px;\n  --breakpoint-wide: 1200px;\n\n  \n  --touch-target-min: 44px;\n\n  \n  --nav-transition: 0.35s cubic-bezier(0.4, 0, 0.2, 1);\n  --nav-transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n\n  \n  --user-accent: #af916d;\n  --user-accent-hover: #9d8260;\n  --user-accent-rgb: 175, 145, 109;\n  --user-accent-glow: rgba(175, 145, 109, 0.3);\n  --user-accent-light: #d4c4a8;\n  --user-accent-soft: #f5f0e8;\n  --user-accent-dark: #7a6548;\n  --user-accent-grad-end: #d4a574;\n  --user-accent-text: #6b5635;\n\n  --purple-accent: var(--user-accent-light, #8b6de1);\n  --purple-gradient: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n  --purple-glow: var(--user-accent-glow, rgba(139, 109, 225, 0.3));\n\n  \n  --scrollbar-track: #f0ede8;\n  --scrollbar-track-dark: #1e1e30;\n  --scrollbar-thumb: var(--user-accent);\n  --scrollbar-thumb-hover: var(--user-accent-hover);\n}\n\n/* === RESET === */\n*,\n*::before,\n*::after {\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n  list-style: none;\n  text-decoration: none;\n  font-family: 'Poppins', 'Noto Sans KR', sans-serif;\n  box-sizing: border-box;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n/* === ACCESSIBILITY === */\n.skip-to-content {\n  position: fixed;\n  top: -100px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #2a2a3e;\n  color: #fff;\n  padding: 12px 24px;\n  border-radius: 0 0 8px 8px;\n  z-index: 9999;\n  font-weight: 600;\n  text-decoration: none;\n  transition: top 0.3s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n.skip-to-content:focus {\n  top: 0;\n  outline: 3px solid var(--user-accent-grad-end);\n  outline-offset: 2px;\n}\n\nli {\n  list-style: none;\n}\n\na,\n\n/* === RESPONSIVE MEDIA === */\nimg,\ndata,\nspan,\ninput,\nbutton,\nselect,\ntextarea {\n  display: block;\n}\n\n/* === ION-ICON SAFARI/iOS FALLBACK === */\nion-icon {\n  display: inline-block;\n  width: 1em;\n  height: 1em;\n  contain: strict;\n  fill: currentcolor;\n  box-sizing: content-box !important;\n  visibility: inherit;\n}\n\na {\n  color: inherit;\n  text-decoration: none;\n}\n\nimg {\n  height: auto;\n}\n\ninput,\nbutton,\nselect,\ntextarea {\n  background: none;\n  border: none;\n  font: inherit;\n}\n\ninput,\nselect,\ntextarea {\n  width: 100%;\n  outline: none;\n}\n\nbutton {\n  cursor: pointer;\n}\n\naddress {\n  font-style: normal;\n}\n\n/* === BASE === */\nhtml {\n  font-size: 16px;\n  scroll-behavior: smooth;\n  -webkit-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n}\n\n/* === BODY === */\nbody {\n  font-size: clamp(1rem, 0.5vw + 0.875rem, 1.125rem);\n  line-height: 1.6;\n}\n\n.food-item.hide {\n  display: none;\n}\n\n.img-line {\n  width: 50%;\n  height: 1px;\n  margin: 0 15px;\n  border-bottom: 1px dashed #7D7D7D;\n}\n\n/* === ORIENTATION LOCK === */\n.orientation-lock {\n  display: none !important;\n  visibility: hidden !important;\n  pointer-events: none !important;\n}\n\n/* === MOBILE RESPONSIVE === */\n@media (max-width: 767px) {\n  :root {\n    --header-height: 70px;\n    --header-height-safe: 90px;\n  }\n\n  .header {\n    padding-block: 15px;\n  }\n\n  .header.active {\n    padding-block: 8px;\n  }\n\n  \n  .nav-open-btn {\n    min-width: 44px;\n    min-height: 44px;\n  }\n\n  .navbar .close-btn {\n    min-width: 44px;\n    min-height: 44px;\n  }\n\n  \n/* === NAVBAR === */\n  .navbar {\n    max-width: 300px;\n    left: -300px;\n  }\n\n  .navbar.active {\n    transform: translateX(300px);\n  }\n\n  .navbar-link {\n    padding-block: 14px;\n    min-height: 44px;\n  }\n}\n\n/* === LANDSCAPE === */\n@media screen and (max-width: 900px) and (orientation: landscape) {\n  :root {\n    --header-height: 50px;\n    --header-height-safe: 60px;\n  }\n\n  .header {\n    padding-block: 8px;\n  }\n\n  .header.active {\n    padding-block: 5px;\n  }\n\n  \n  #main-hero.hero {\n    min-height: 100vh;\n    min-height: 100dvh;\n  }\n\n}\n\n/* === SAFE AREA === */\n@supports (padding: max(0px)) {\n  .header {\n    padding-left: max(20px, env(safe-area-inset-left));\n    padding-right: max(20px, env(safe-area-inset-right));\n  }\n\n  .topbar {\n    padding-left: max(10px, env(safe-area-inset-left));\n    padding-right: max(10px, env(safe-area-inset-right));\n  }\n\n  .navbar {\n    padding-left: max(30px, env(safe-area-inset-left));\n  }\n}\n\n:root {\n  --bg: #f5f5f5;\n  --primary: #A1CAF1;\n  --color-primary: var(--user-accent);\n  --gold-crayola: var(--user-accent);\n\n  --quick-silver: hsla(0, 0%, 65%, 1);\n  --davys-grey: hsla(30, 3%, 34%, 1);\n\n  --smoky-black-1: hsla(40, 12%, 5%, 1);\n  --smoky-black-2: hsla(30, 8%, 5%, 1);\n  --smoky-black-3: hsla(0, 3%, 7%, 1);\n\n  --eerie-black-1: hsla(210, 4%, 9%, 1);\n  --eerie-black-2: hsla(210, 4%, 11%, 1);\n  --eerie-black-3: hsla(180, 2%, 8%, 1);\n  --eerie-black-4: hsla(0, 0%, 13%, 1);\n\n  --white: hsla(0, 0%, 100%, 1);\n  --white-alpha-20: hsla(0, 0%, 100%, 0.2);\n  --white-alpha-10: hsla(0, 0%, 100%, 0.1);\n\n  --black: hsla(0, 0%, 0%, 1);\n  --black-alpha-80: hsla(0, 0%, 0%, 0.8);\n  --black-alpha-15: hsla(0, 0%, 0%, 0.15);\n\n  --color: #77bb41;\n\n  --bs-warning: #96d35f;\n  --bs-font-sans-serif: Poppins, sans-serif !important;\n  --bs-warning-rgb: 254, 159, 16;\n  --bs-link-hover-color-rgb: #96d35f;\n  --bs-light-rgb: 255, 248, 224;\n  --bg-color: #f4f4f4;\n\n  --loading-text-gradient: linear-gradient(90deg,\n      transparent 0% 16.66%,\n      var(--smoky-black-3) 33.33% 50%,\n      transparent 66.66% 75%);\n  --gradient-1: linear-gradient(to top,\n      hsla(0, 0%, 0%, 0.9),\n      hsla(0, 0%, 0%, 0.7),\n      transparent);\n\n  \n  --fontFamily-forum: 'Poppins', sans-serif;\n  --fontFamily-dm_sans: 'Poppins', sans-serif;\n\n  \n  --fontSize-display-1: clamp(2.5rem, 5vw + 1rem, 4.5rem);\n  --fontSize-headline-1: clamp(2rem, 4vw + 0.5rem, 3.5rem);\n  --fontSize-headline-2: clamp(1.75rem, 3vw + 0.5rem, 2.75rem);\n  --fontSize-title-1: clamp(1.5rem, 2.5vw + 0.5rem, 2rem);\n  --fontSize-title-2: clamp(1.375rem, 2vw + 0.5rem, 1.75rem);\n  --fontSize-title-3: clamp(1.25rem, 1.5vw + 0.5rem, 1.5rem);\n  --fontSize-title-4: clamp(1.125rem, 1vw + 0.5rem, 1.375rem);\n  --fontSize-body-1: clamp(1.125rem, 1vw + 0.5rem, 1.25rem);\n  --fontSize-body-2: clamp(1rem, 0.5vw + 0.75rem, 1.125rem);\n  --fontSize-body-3: clamp(1.0625rem, 0.5vw + 0.625rem, 1.1875rem);\n  --fontSize-body-4: clamp(1rem, 0.5vw + 0.75rem, 1.125rem);\n  --fontSize-label-1: clamp(0.875rem, 0.25vw + 0.625rem, 1rem);\n  --fontSize-label-2: clamp(0.8125rem, 0.25vw + 0.5rem, 0.9375rem);\n\n  \n  --weight-regular: 400;\n  --weight-bold: 700;\n\n  \n  --lineHeight-1: 1em;\n  --lineHeight-2: 1.2em;\n  --lineHeight-3: 1.5em;\n  --lineHeight-4: 1.6em;\n  --lineHeight-5: 1.85em;\n  --lineHeight-6: 1.4em;\n\n  \n  --letterSpacing-1: 0.15em;\n  --letterSpacing-2: 0.4em;\n  --letterSpacing-3: 0.2em;\n  --letterSpacing-4: 0.3em;\n  --letterSpacing-5: 3px;\n\n  \n  --space-3xs: clamp(0.25rem, 0.5vw, 0.375rem);\n  --space-2xs: clamp(0.375rem, 0.75vw, 0.5rem);\n  --space-xs: clamp(0.5rem, 1vw, 0.75rem);\n  --space-sm: clamp(0.75rem, 1.5vw, 1rem);\n  --space-md: clamp(1rem, 2vw, 1.5rem);\n  --space-lg: clamp(1.5rem, 3vw, 2rem);\n  --space-xl: clamp(2rem, 4vw, 3rem);\n  --space-2xl: clamp(3rem, 6vw, 4rem);\n  --space-3xl: clamp(4rem, 8vw, 6rem);\n  \n  \n  --container-padding: clamp(1rem, 4vw, 2rem);\n\n  --section-space: clamp(50px, 8vw, 90px);\n\n  --shadow-1: 0px 0px 25px 0px hsla(0, 0%, 0%, 0.25);\n\n  --radius-24: 24px;\n  --radius-circle: 50%;\n\n  --transition-1: 250ms ease;\n  --transition-2: 500ms ease;\n  --transition-3: 1000ms ease;\n}\n\nbody {\n  flex-direction: column;\n  padding-top: var(--header-height-safe);\n  display: flex;\n  min-height: 100vh;\n\n  font-family: 'Poppins', sans-serif;\n  font-size: var(--fontSize-body-4);\n  font-weight: var(--weight-regular);\n  line-height: var(--lineHeight-5);\n\n  overflow-x: hidden;\n  overflow-y: auto;\n  background-color: var(--bg-primary, #ffffff);\n  color: var(--text-primary, #1a1a2e);\n  transition: background-color 0.3s ease, color 0.3s ease;\n}\n\nhtml {\n  overflow-x: hidden;\n}\n\n/* === OVERFLOW PREVENTION === */\n.container,\nsection,\n\n/* === MAIN CONTENT === */\nmain,\narticle,\nfooter {\n  max-width: 100vw;\n  overflow-x: hidden;\n}\n\nimg,\nvideo,\niframe,\nembed,\nobject {\n  max-width: 100%;\n  height: auto;\n}\n\n/* === TEXT WRAPPING === */\nh1, h2, h3, h4, h5, h6 {\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  hyphens: auto;\n  text-wrap: balance;\n}\n\np, li, td, th, label, span, a {\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n}\n\np {\n  text-wrap: pretty;\n}\n\n.content-area,\n.article-content,\n.blog-content,\n.card-text,\n.post-content {\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-word;\n}\n\nmain,\n.main-content,\n[role=\"main\"] {\n  padding-top: 20px;\n}\n\n/* === SCROLL MARGIN === */\nsection[id],\nh2[id],\nh3[id],\n[id]:target {\n  scroll-margin-top: var(--header-height-safe);\n}\n\n/* === NAV ACTIVE === */\nbody.nav-active {\n  overflow: hidden;\n}\n\n/* === SCROLLBAR === */\nhtml,\nbody {\n  scrollbar-width: auto;\n  scrollbar-color: var(--user-accent) var(--scrollbar-track);\n}\n\n*:not(html):not(body) {\n  scrollbar-width: thin;\n  scrollbar-color: var(--user-accent) transparent;\n}\n\n[data-theme=\"dark\"],\n[data-theme=\"dark\"] body {\n  scrollbar-color: var(--user-accent) var(--scrollbar-track-dark);\n}\n\n::-webkit-scrollbar {\n  width: 14px;\n  height: 14px;\n}\n\n::-webkit-scrollbar-track {\n  background: var(--scrollbar-track);\n}\n\n::-webkit-scrollbar-thumb {\n  background: var(--user-accent);\n  border: 3px solid var(--scrollbar-track);\n  border-radius: 20px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: var(--user-accent-hover);\n}\n\n::-webkit-scrollbar-thumb:active {\n  background: var(--user-accent-hover);\n}\n\n::-webkit-scrollbar-corner {\n  background: var(--scrollbar-track);\n}\n\n[data-theme=\"dark\"]::-webkit-scrollbar-track,\n[data-theme=\"dark\"] ::-webkit-scrollbar-track {\n  background: var(--scrollbar-track-dark);\n}\n\n[data-theme=\"dark\"]::-webkit-scrollbar-thumb,\n[data-theme=\"dark\"] ::-webkit-scrollbar-thumb {\n  background: var(--user-accent);\n  border: 3px solid var(--scrollbar-track-dark);\n  border-radius: 20px;\n}\n\n[data-theme=\"dark\"]::-webkit-scrollbar-thumb:hover,\n[data-theme=\"dark\"] ::-webkit-scrollbar-thumb:hover {\n  background: var(--user-accent-hover);\n}\n\n[data-theme=\"dark\"]::-webkit-scrollbar-corner,\n[data-theme=\"dark\"] ::-webkit-scrollbar-corner {\n  background: var(--scrollbar-track-dark);\n}\n\n/* === DARK MODE === */\n[data-theme=\"dark\"] {\n  scrollbar-color: var(--user-accent) var(--scrollbar-track-dark);\n}\n\n/* === TYPOGRAPHY === */\n.display-1,\n.headline-1,\n.headline-2,\n.title-1,\n.title-2,\n.title-3,\n.title-4 {\n  font-family: var(--fontFamily-forum);\n  font-weight: var(--weight-regular);\n  line-height: var(--lineHeight-2);\n}\n\n.display-1 {\n  font-size: var(--fontSize-display-1);\n  line-height: var(--lineHeight-1);\n}\n\n.headline-1 {\n  font-size: var(--fontSize-headline-1);\n  color: hsla(93.44, 48.41%, 49.41%, 1);\n}\n\n.headline-2 {\n  font-size: var(--fontSize-headline-2);\n  line-height: var(--lineHeight-6);\n}\n\n.title-1 {\n  font-size: var(--fontSize-title-1);\n}\n\n.title-2 {\n  color: rgb(254, 254, 254);\n  font-size: var(--fontSize-title-2);\n}\n\n.title-3 {\n  font-size: var(--fontSize-title-3);\n}\n\n.title-4 {\n  font-size: var(--fontSize-title-4);\n}\n\n.body-1 {\n  font-size: var(--fontSize-body-1);\n  line-height: var(--lineHeight-6);\n}\n\n.body-2 {\n  font-size: var(--fontSize-body-2);\n  line-height: var(--lineHeight-4);\n}\n\n.body-3 {\n  font-size: var(--fontSize-body-3);\n}\n\n.body-4 {\n  font-size: var(--fontSize-body-4);\n}\n\n.label-1 {\n  font-size: var(--fontSize-label-1);\n}\n\n.label-2 {\n  font-size: var(--fontSize-label-2);\n}\n\n/* === UTILITIES === */\n.container {\n  padding-inline: 16px;\n}\n\n.separator {\n  width: 8px;\n  height: 8px;\n  border: 1px solid var(--gold-crayola);\n  transform: rotate(45deg);\n}\n\n.contact-label {\n  font-weight: var(--weight-bold);\n}\n\n.contact-number {\n  color: var(--gold-crayola);\n  max-width: max-content;\n  margin-inline: auto;\n}\n\n.hover-underline {\n  position: relative;\n  max-width: max-content;\n}\n\n.hover-underline::after {\n  content: \"\";\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 5px;\n  border-block: 1px solid var(--gold-crayola);\n  transform: scaleX(0.2);\n  opacity: 0;\n  transition: var(--transition-2);\n}\n\n.hover-underline:is(:hover, :focus-visible)::after {\n  transform: scaleX(1);\n  opacity: 1;\n}\n\n.contact-number::after {\n  bottom: -5px;\n}\n\n.text-center {\n  text-align: center;\n}\n\n.img-cover {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.section-subtitle {\n  position: relative;\n  color: var(--gold-crayola);\n  font-weight: var(--weight-bold);\n  text-transform: uppercase;\n  letter-spacing: var(--letterSpacing-2);\n  margin-block-end: 12px;\n}\n\n.section-subtitle::after {\n  content: url('../images/separator.svg');\n  display: block;\n  width: 100px;\n  margin-inline: auto;\n  margin-block-start: 5px;\n}\n\n.btn {\n  position: relative;\n  color: var(--gold-crayola);\n  font-size: var(--fontSize-label-2);\n  font-weight: var(--weight-bold);\n  text-transform: uppercase;\n  letter-spacing: var(--letterSpacing-5);\n  max-width: max-content;\n  border: 2px solid var(--gold-crayola);\n  padding: 12px 45px;\n  overflow: hidden;\n  z-index: 1;\n}\n\n.btn::before {\n  content: \"\";\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 200%;\n  height: 200%;\n  border-radius: var(--radius-circle);\n  background-color: var(--gold-crayola);\n  transition: var(--transition-2);\n  z-index: -1;\n}\n\n.btn .text {\n  transition: var(--transition-1);\n}\n\n.btn .text-2 {\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  min-width: max-content;\n  color: var(--smoky-black-1);\n}\n\n.btn:is(:hover, :focus-visible)::before {\n  bottom: -50%;\n}\n\n.btn:is(:hover, :focus-visible) .text-1 {\n  transform: translateY(-40px);\n}\n\n.btn:is(:hover, :focus-visible) .text-2 {\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.btn-secondary {\n  background-color: hsla(93.44, 48.41%, 49.41%, 1);\n  color: var(--black);\n}\n\n.btn-secondary::before {\n  background-color: var(--smoky-black-1);\n}\n\n.btn-secondary .text-2 {\n  color: var(--white);\n}\n\n.has-before,\n.has-after {\n  position: relative;\n  z-index: 1;\n}\n\n.has-before::before,\n.has-after::after {\n  content: \"\";\n  position: absolute;\n}\n\n.section {\n  position: relative;\n  padding-block: var(--section-space);\n  overflow: hidden;\n  z-index: 1;\n}\n\n.bg-black-10 {\n  background-color: var(--smoky-black-2);\n}\n\n.grid-list {\n  display: grid;\n  gap: 40px;\n}\n\n/* === PRELOAD === */\n.preload {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #f79f9b !important;\n  z-index: 99999;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 0;\n  transition: opacity 0.6s ease, transform 0.6s ease;\n}\n\n.preload > * {\n  transition: opacity 0.4s ease, transform 0.4s ease;\n}\n\n.preload.loaded > * {\n  opacity: 0;\n  transform: scale(0.95);\n}\n\n.preload.loaded {\n  transition-delay: 300ms;\n  opacity: 0;\n  transform: scale(1.05);\n  pointer-events: none;\n}\n\n.preload-logo {\n  width: 180px;\n  height: auto;\n  margin-bottom: 8px;\n  animation: preloadLogoIn 0.8s ease-out forwards;\n}\n\n@keyframes preloadLogoIn {\n  0% { opacity: 0; transform: translateY(-20px) scale(0.9); }\n  100% { opacity: 1; transform: translateY(0) scale(1); }\n}\n\n.loader-gif {\n  width: min(300px, 60vw);\n  height: min(300px, 60vw);\n  position: relative;\n  object-fit: contain;\n}\n\n.preload-text {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  font-weight: 500;\n  color: #ffffff;\n  letter-spacing: 0.15em;\n  text-transform: uppercase;\n  margin-top: 4px;\n  animation: preloadTextPulse 2s ease-in-out infinite;\n}\n\n@keyframes preloadTextPulse {\n  0%, 100% { opacity: 0.6; }\n  50% { opacity: 1; }\n}\n\n.progress-bar {\n  width: min(400px, 90vw);\n  height: 15px;\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 8px;\n  overflow: hidden;\n  margin-top: 20px;\n  position: relative;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);\n}\n\n.progress-bar-fill {\n  height: 100%;\n  width: 0%;\n  background: linear-gradient(90deg, var(--user-accent), var(--user-accent-light), var(--user-accent));\n  background-size: 200% 100%;\n  border-radius: 8px;\n  animation: preloadProgressShimmer 1.5s ease-in-out infinite;\n  transition: width 0.3s ease;\n  box-shadow: 0 0 8px rgba(var(--user-accent-rgb), 0.4);\n}\n\n@keyframes preloadProgressShimmer {\n  0% { background-position: 200% 0; }\n  100% { background-position: -200% 0; }\n}\n\n/* Dark mode preloader */\n[data-theme=\"dark\"] .preload-text,\n.dark-mode .preload-text {\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .progress-bar,\n.dark-mode .progress-bar {\n  background: rgba(var(--user-accent-rgb), 0.1);\n}\n\n@media (max-width: 768px) {\n  .preload-logo {\n    width: 140px;\n  }\n\n  .loader-gif {\n    width: 60vw;\n    height: 60vw;\n  }\n\n  .progress-bar {\n    width: 90vw;\n    height: 12px;\n  }\n\n  .preload-text {\n    font-size: 0.85rem;\n  }\n}\n\n/* === HEADER === */\n.header .btn {\n  display: block;\n  margin-inline-start: auto;\n  margin-inline-end: 15px;\n}\n\n.header {\n  position: fixed;\n  top: var(--topbar-height, 36px);\n  left: 0;\n  width: 100%;\n  background-color: var(--user-accent-light);\n  padding-block: 40px;\n  z-index: 100;\n  pointer-events: auto;\n  border-block-end: 1px solid rgba(0, 0, 0, 0.1);\n  transition: padding 0.4s cubic-bezier(0.4, 0, 0.2, 1),\n    box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1),\n    border-radius 0.4s cubic-bezier(0.4, 0, 0.2, 1),\n    top 0.4s ease,\n    transform 0.3s ease;\n}\n\n.header.active {\n  padding-block: 9px;\n  background-color: var(--user-accent-light);\n  border-color: rgba(0, 0, 0, 0.1);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  border-radius: 0 0 16px 16px;\n  overflow: visible;\n}\n\n.header .container {\n  padding-inline: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 8px;\n}\n\n.nav-open-btn {\n  padding: 12px;\n  padding-inline-end: 0;\n  z-index: 100;\n  position: relative;\n  width: 44px;\n  height: 44px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n}\n\n.nav-open-btn .line {\n  width: 28px;\n  height: 2px;\n  background-color: var(--white);\n  margin-block: 3px;\n  transform-origin: center;\n  transition: var(--nav-transition);\n  border-radius: 2px;\n}\n\n.nav-open-btn.is-active .line-1 {\n  transform: rotate(45deg) translateY(6px) translateX(4px);\n}\n\n.nav-open-btn.is-active .line-2 {\n  opacity: 0;\n  transform: scaleX(0);\n}\n\n.nav-open-btn.is-active .line-3 {\n  transform: rotate(-45deg) translateY(-6px) translateX(4px);\n}\n\n.nav-open-btn:hover .line {\n  background-color: var(--user-accent-grad-end);\n}\n\n.nav-open-btn:focus-visible {\n  outline: 2px solid var(--user-accent-grad-end);\n  outline-offset: 4px;\n  border-radius: 4px;\n}\n\n.navbar {\n  position: fixed;\n  background: var(--user-accent-soft);\n  top: 0;\n  left: -360px;\n  bottom: 0;\n  max-width: 360px;\n  width: 100%;\n  padding-inline: 0;\n  padding-block-end: 0;\n  overflow: hidden;\n  visibility: hidden;\n  z-index: 9999;\n  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s 0.35s;\n  border-right: 1px solid rgba(0, 0, 0, 0.08);\n  box-shadow: 8px 0 40px rgba(0, 0, 0, 0.15);\n  display: flex;\n  flex-direction: column;\n}\n\n.navbar-scroll-content {\n  flex: 1 1 auto;\n  overflow-y: auto;\n  overflow-x: hidden;\n  min-height: 0;\n  display: flex;\n  flex-direction: column;\n  padding: 0 16px 24px;\n  -webkit-overflow-scrolling: touch;\n  scroll-behavior: smooth;\n  overscroll-behavior: contain;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(0,0,0,0.15) transparent;\n}\n\n.navbar-scroll-content::-webkit-scrollbar {\n  width: 4px;\n}\n\n.navbar-scroll-content::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.navbar-scroll-content::-webkit-scrollbar-thumb {\n  background: rgba(0,0,0,0.15);\n  border-radius: 4px;\n}\n\n.navbar-scroll-content::-webkit-scrollbar-thumb:hover {\n  background: rgba(0,0,0,0.25);\n}\n\n.navbar.active {\n  visibility: visible;\n  transform: translateX(360px);\n  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), visibility 0s 0s;\n}\n\n.navbar.active .navbar-item {\n  animation: mobileNavSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n  opacity: 0;\n}\n\n.navbar.active .navbar-item:nth-child(1) { animation-delay: 80ms; }\n.navbar.active .navbar-item:nth-child(2) { animation-delay: 120ms; }\n.navbar.active .navbar-item:nth-child(3) { animation-delay: 160ms; }\n.navbar.active .navbar-item:nth-child(4) { animation-delay: 200ms; }\n.navbar.active .navbar-item:nth-child(5) { animation-delay: 240ms; }\n.navbar.active .navbar-item:nth-child(6) { animation-delay: 280ms; }\n.navbar.active .navbar-item:nth-child(7) { animation-delay: 320ms; }\n\n@keyframes mobileNavSlideIn {\n  from {\n    opacity: 0;\n    transform: translateX(-16px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n.mobile-nav-header {\n  display: none;\n  align-items: center;\n  justify-content: center;\n  padding: 18px 20px;\n  background: linear-gradient(135deg, #f8f5f0 0%, #f0ebe3 100%);\n  border-bottom: 1px solid rgba(0,0,0,0.06);\n  flex-shrink: 0;\n  position: relative;\n}\n\n.mobile-nav-header__logo {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.mobile-nav-header__logo img {\n  height: 40px;\n  width: auto;\n}\n\n.mobile-nav-close {\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  border: 1px solid rgba(0,0,0,0.08);\n  background: #fff;\n  color: #4a4a68;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  padding: 0;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.06);\n  position: absolute;\n  right: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.mobile-nav-close ion-icon {\n  font-size: 22px;\n  --ionicon-stroke-width: 48px;\n}\n\n.mobile-nav-close:hover {\n  background: #f0ebe3;\n  color: #1a1a2e;\n  transform: translateY(-50%) scale(1.05);\n}\n\n.mobile-nav-close:active {\n  transform: translateY(-50%) scale(0.95);\n}\n\n[data-theme=\"dark\"] .mobile-nav-header {\n  background: linear-gradient(135deg, #2d2b3d 0%, #252342 100%);\n  border-bottom-color: rgba(255,255,255,0.06);\n}\n\n[data-theme=\"dark\"] .mobile-nav-close {\n  background: rgba(255,255,255,0.08);\n  border-color: rgba(255,255,255,0.1);\n  color: #c0c0d0;\n}\n\n[data-theme=\"dark\"] .mobile-nav-close:hover {\n  background: rgba(255,255,255,0.14);\n  color: #fff;\n}\n\n.mobile-nav-crisis {\n  display: none;\n  padding: 12px 16px 4px;\n  flex-shrink: 0;\n}\n\n.mobile-crisis-btn {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  width: 100%;\n  padding: 12px 16px;\n  background: #dc3545;\n  color: #fff;\n  border-radius: 14px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  text-decoration: none;\n  transition: all 0.25s ease;\n  box-shadow: 0 2px 8px rgba(220,53,69,0.25);\n}\n\n.mobile-crisis-btn ion-icon {\n  font-size: 20px;\n}\n\n.mobile-crisis-btn .mobile-crisis-arrow {\n  margin-left: auto;\n  font-size: 16px;\n  opacity: 0.7;\n  transition: transform 0.2s ease;\n}\n\n.mobile-crisis-btn:hover {\n  background: #c82333;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 14px rgba(220,53,69,0.35);\n}\n\n.mobile-crisis-btn:hover .mobile-crisis-arrow {\n  transform: translateX(3px);\n}\n\n.mobile-crisis-btn:active {\n  transform: translateY(0);\n}\n\n[data-theme=\"dark\"] .mobile-crisis-btn {\n  background: #b52a37;\n  box-shadow: 0 2px 8px rgba(181,42,55,0.35);\n}\n\n.mobile-nav-divider {\n  display: none;\n  height: 1px;\n  background: rgba(0,0,0,0.06);\n  margin: 8px 4px 12px;\n}\n\n[data-theme=\"dark\"] .mobile-nav-divider {\n  background: rgba(255,255,255,0.06);\n}\n\n.nav-link-icon {\n  display: none;\n}\n\n.navbar .close-btn {\n  color: #4a4a68;\n  background: rgba(0, 0, 0, 0.05);\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  width: 44px;\n  height: 44px;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  margin-inline-start: auto;\n  margin-block: 20px 24px;\n  padding: 0;\n  transition: all 0.25s ease;\n}\n\n.navbar .close-btn ion-icon {\n  --ionicon-stroke-width: 48px;\n  font-size: 20px;\n}\n\n.navbar .close-btn:is(:hover, :focus-visible) {\n  color: #1a1a2e;\n  background: rgba(0, 0, 0, 0.1);\n  border-color: rgba(0, 0, 0, 0.15);\n  transform: scale(1.05);\n}\n\n.navbar .logo {\n  max-width: max-content;\n  margin-inline: auto;\n  margin-block-end: 32px;\n  padding-block: 8px;\n}\n\n.navbar-list {\n  border-block-end: 1px solid rgba(0, 0, 0, 0.08);\n  margin-block-end: 16px;\n  flex-shrink: 0;\n  padding-block: 8px;\n}\n\n.navbar .logo,\n.navbar .close-btn {\n  flex-shrink: 0;\n}\n\n.navbar-item {\n  border-block-start: none;\n  margin-block: 4px;\n}\n\n.navbar-link {\n  position: relative;\n  overflow: hidden;\n  font-size: 15px;\n  font-weight: 500;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 14px 18px;\n  margin-block: 2px;\n  max-width: unset;\n  border-radius: 12px;\n  color: #4a4a68;\n  background: transparent;\n  transition: all 0.25s ease;\n  white-space: nowrap;\n}\n\n.navbar-link::after {\n  display: none;\n}\n\n.navbar-link .span {\n  transition: all 0.25s ease;\n}\n\n.navbar-link:is(:hover, :focus-visible) {\n  background: rgba(0, 0, 0, 0.05);\n  color: #1a1a2e;\n}\n\n.navbar-link:is(:hover, :focus-visible) .span {\n  color: #1a1a2e;\n  transform: translateX(8px);\n}\n\n.navbar-link.active {\n  background: rgba(var(--user-accent-rgb), 0.2);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.5);\n  color: #1a1a2e;\n}\n\n.navbar-link.active .span {\n  color: var(--user-accent);\n  font-weight: 600;\n  transform: none;\n}\n\n.navbar-link .separator {\n  display: none;\n}\n\n.navbar-title {\n  margin-block-end: 15px;\n}\n\n.navbar-text {\n  margin-block: 10px;\n}\n\n.navbar .body-4 {\n  color: var(--quick-silver);\n}\n\n.sidebar-link {\n  transition: var(--transition-1);\n}\n\n.sidebar-link:is(:hover, :focus-visible) {\n  color: var(--gold-crayola);\n}\n\n.navbar .text-center .separator {\n  margin-block: 30px;\n  margin-inline: auto;\n}\n\n.navbar .contact-label {\n  margin-block-end: 10px;\n}\n\n.navbar::-webkit-scrollbar-thumb {\n  background-color: var(--white-alpha-10);\n}\n\n.overlay {\n  position: fixed;\n  inset: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity var(--nav-transition);\n  z-index: 9998;\n}\n\n.overlay.active {\n  opacity: 1;\n  pointer-events: all;\n}\n\n\n.navbar-link .ripple {\n  position: absolute;\n  border-radius: 50%;\n  background-color: rgba(0, 0, 0, 0.1);\n  transform: scale(0);\n  animation: rippleEffect 0.6s ease-out forwards;\n  pointer-events: none;\n}\n\n[data-theme=\"dark\"] .navbar-link .ripple {\n  background-color: rgba(255, 255, 255, 0.3);\n}\n\n@keyframes rippleEffect {\n  to {\n    transform: scale(4);\n    opacity: 0;\n  }\n}\n\n.header .btn {\n  display: none;\n}\n\n.topbar {\n  display: block;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 101;\n  background: linear-gradient(135deg, var(--accent-color, var(--user-accent)) 0%, var(--accent-color-dark, var(--user-accent-dark)) 100%);\n  transition: transform 0.4s ease, opacity 0.4s ease;\n}\n\n.topbar.dismissed {\n  transform: translateY(-100%);\n  opacity: 0;\n  pointer-events: none;\n}\n\n.topbar.topbar--hidden {\n  transform: translateY(-100%);\n  pointer-events: none;\n}\n\n.header.topbar--gone {\n  top: 0;\n}\n\nbody.nav-active .topbar {\n  transform: translateY(-100%);\n  pointer-events: none;\n}\n\n.topbar__inner {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 16px;\n  max-width: 1400px;\n  margin: 0 auto;\n  position: relative;\n  min-height: 36px;\n}\n\n.topbar__slides {\n  position: relative;\n  flex: 1;\n  text-align: center;\n  min-height: 18px;\n}\n\n.topbar__slide {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  width: 100%;\n  transform: translateY(calc(-50% + 10px));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  opacity: 0;\n  transition: opacity 0.45s ease, transform 0.45s ease;\n  pointer-events: none;\n}\n\n.topbar__slide.active {\n  opacity: 1;\n  transform: translateY(-50%);\n  pointer-events: auto;\n  position: relative;\n  top: auto;\n  transform: none;\n}\n\n.topbar__slide.exit-up {\n  opacity: 0;\n  transform: translateY(calc(-50% - 10px));\n}\n\n.topbar__slide ion-icon {\n  font-size: 15px;\n  color: rgba(255, 255, 255, 0.9);\n  flex-shrink: 0;\n}\n\n.topbar__slide span {\n  display: inline;\n  font-family: 'Poppins', sans-serif;\n  font-size: 12.5px;\n  font-weight: 500;\n  color: #fff;\n  letter-spacing: 0.2px;\n}\n\n.topbar__slide[data-slide=\"3\"],\n.topbar__slide[data-slide=\"4\"] {\n  white-space: nowrap;\n  overflow: hidden;\n  flex-wrap: nowrap;\n}\n\n.topbar__slide[data-slide=\"3\"] span {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n}\n\n@media (max-width: 600px) {\n  .topbar__inner {\n    padding: 6px 10px;\n    min-height: 32px;\n  }\n\n  .topbar__slide span {\n    font-size: 10.5px;\n    letter-spacing: 0;\n    line-height: 1.4;\n  }\n\n  .topbar__slide ion-icon {\n    font-size: 13px;\n  }\n\n  .topbar__slide[data-slide=\"3\"],\n  .topbar__slide[data-slide=\"4\"] {\n    white-space: normal;\n    overflow: visible;\n    flex-wrap: wrap;\n    text-align: center;\n  }\n\n  .topbar__slide[data-slide=\"3\"] span,\n  .topbar__slide[data-slide=\"4\"] span {\n    overflow: visible;\n    text-overflow: initial;\n    white-space: normal;\n    display: inline;\n    word-break: break-word;\n  }\n\n  .topbar__dots {\n    margin-left: 8px;\n    gap: 4px;\n  }\n}\n\n.topbar__slide a {\n  display: inline;\n  color: #fff;\n  text-decoration: underline;\n  text-underline-offset: 2px;\n  font-weight: 600;\n  transition: opacity 0.2s ease;\n}\n\n.topbar__slide a:hover {\n  opacity: 0.85;\n}\n\n.topbar__slide strong {\n  font-weight: 700;\n}\n\n.topbar__dots {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  margin-left: 16px;\n  flex-shrink: 0;\n}\n\n.topbar__dot {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  border: none;\n  background: rgba(255, 255, 255, 0.4);\n  cursor: pointer;\n  padding: 0;\n  transition: background 0.3s ease, transform 0.3s ease;\n}\n\n.topbar__dot.active {\n  background: #fff;\n  transform: scale(1.3);\n}\n\n.topbar__dot:hover {\n  background: rgba(255, 255, 255, 0.7);\n}\n\n.topbar__close {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.7);\n  cursor: pointer;\n  padding: 2px;\n  margin-left: 12px;\n  flex-shrink: 0;\n  transition: color 0.2s ease, transform 0.2s ease;\n  font-size: 16px;\n}\n\n.topbar__close:hover {\n  color: #fff;\n  transform: scale(1.15);\n}\n\n.topbar__close ion-icon {\n  font-size: 16px;\n}\n\n@media (max-width: 600px) {\n  .topbar__inner {\n    padding: 7px 10px;\n    min-height: 32px;\n  }\n\n  .topbar__slide span {\n    font-size: 11px;\n    line-height: 1.3;\n  }\n\n  .topbar__slide ion-icon {\n    font-size: 13px;\n  }\n\n  .topbar__dots {\n    margin-left: 10px;\n    gap: 4px;\n  }\n\n  .topbar__dot {\n    width: 5px;\n    height: 5px;\n  }\n\n  .topbar__close {\n    margin-left: 8px;\n  }\n}\n\n#main-hero.hero {\n  width: 100%;\n  margin-top: -48px;\n  min-height: 100vh;\n  min-height: 100dvh;\n  position: relative;\n  padding: 0 5%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  z-index: revert;\n}\n\n#main-hero.hero::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 1;\n  pointer-events: none;\n}\n\n#main-hero .back-video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  z-index: 0;\n  background: #1a1a2e;\n}\n\n#main-hero .hero-content {\n  text-align: center;\n  z-index: 2;\n  line-height: 1.2;\n}\n\n#main-hero .hero-content h1 {\n  font-size: 80px;\n  color: transparent;\n  margin-bottom: 20px;\n  -webkit-text-stroke: 2px #fff;\n  font-weight: 600;\n  transition: 0.5s;\n  opacity: 1;\n}\n\n#main-hero .hero-content h1 {\n  text-transform: uppercase;\n}\n\n#main-hero .hero-content h1.hero-fade-out {\n  opacity: 0;\n  transition: opacity 1s ease;\n}\n\n#main-hero .hero-content h1.hero-fade-in {\n  opacity: 1;\n  transition: opacity 1s ease;\n}\n\n#main-hero .hero-content h1:hover {\n  color: #fff;\n  -webkit-text-stroke: 0px;\n}\n\n@media (max-width: 600px) {\n  #main-hero .hero-content h1 {\n    font-size: 46px;\n  }\n}\n\n#main-hero .hero-content a {\n  text-decoration: none;\n  display: inline-block;\n  color: #fff;\n  font-size: 24px;\n  border: 2px solid #fff;\n  padding: 14px 70px;\n  border-radius: 50px;\n  transition: 0.5s;\n}\n\n#main-hero .hero-content a:hover {\n  transform: scale(1.1);\n  color: #fff;\n  -webkit-text-stroke: 0px;\n}\n\n@media (max-width: 768px) {\n  #main-hero .hero-content a {\n    padding: 10px 40px;\n    font-size: 18px;\n  }\n}\n\n@media (max-width: 480px) {\n  #main-hero .hero-content a {\n    padding: 8px 25px;\n    font-size: 14px;\n  }\n}\n\n.intro-section {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 60px 20px;\n  background-color: #f4f4f4;\n}\n\n.intro-container {\n  max-width: 1200px;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  gap: 80px;\n  align-items: center;\n}\n\n.intro-text {\n  flex: 1;\n  color: #333;\n  font-family: 'Poppins', sans-serif;\n  line-height: 1.6;\n  position: relative;\n}\n\n.intro-line {\n  position: absolute;\n  top: 0;\n  left: -20px;\n  height: 100%;\n  width: 5px;\n  background-color: var(--user-accent);\n  border-radius: 5px;\n}\n\n.intro-title {\n  font-size: 36px;\n  font-weight: bold;\n  color: #2c3e50;\n  margin-bottom: 20px;\n}\n\n.intro-description {\n  font-size: 18px;\n  color: #7f8c8d;\n  margin-bottom: 30px;\n}\n\n.intro-image {\n  flex: 1;\n  max-width: 500px;\n}\n\n.intro-img {\n  width: 100%;\n  height: auto;\n  object-fit: cover;\n  border-radius: 12px;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\n}\n\n.intro-stats {\n  display: flex;\n  gap: 24px;\n  margin-bottom: 30px;\n  flex-wrap: wrap;\n}\n\n.intro-stat {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 16px 20px;\n  background: #fff;\n  border-radius: 10px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);\n  border: 1px solid #e8e8e8;\n  min-width: 90px;\n  flex: 1;\n}\n\n.intro-stat-number {\n  font-size: 28px;\n  font-weight: 700;\n  color: var(--user-accent);\n  line-height: 1.2;\n}\n\n.intro-stat-label {\n  font-size: 13px;\n  color: #7f8c8d;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-top: 4px;\n}\n\n.intro-actions {\n  display: flex;\n  gap: 16px;\n  flex-wrap: wrap;\n}\n\n.intro-btn {\n  display: inline-block;\n  padding: 14px 32px;\n  border-radius: 50px;\n  font-size: 16px;\n  font-weight: 600;\n  text-decoration: none;\n  transition: transform 0.3s, box-shadow 0.3s;\n  font-family: 'Poppins', sans-serif;\n}\n\n.intro-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\n}\n\n.intro-btn-primary {\n  background: var(--user-accent);\n  color: #fff;\n  border: 2px solid var(--user-accent);\n}\n\n.intro-btn-secondary {\n  background: transparent;\n  color: var(--user-accent);\n  border: 2px solid var(--user-accent);\n}\n\n.intro-btn-secondary:hover {\n  background: var(--user-accent);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .intro-stat {\n  background: #2a2a2a;\n  border-color: #3a3a3a;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .intro-stat-label {\n  color: #aaa;\n}\n\n@media (max-width: 768px) {\n  .intro-container {\n    flex-direction: column;\n    align-items: center;\n    gap: 20px;\n  }\n\n  .intro-image {\n    margin-bottom: 30px;\n  }\n\n  .intro-title {\n    font-size: 30px;\n  }\n\n  .intro-description {\n    font-size: 16px;\n  }\n\n  .intro-stats {\n    gap: 12px;\n  }\n\n  .intro-stat {\n    padding: 12px 14px;\n    min-width: 70px;\n  }\n\n  .intro-stat-number {\n    font-size: 22px;\n  }\n\n  .intro-actions {\n    justify-content: center;\n  }\n\n  .intro-btn {\n    padding: 12px 24px;\n    font-size: 14px;\n  }\n}\n\n.mb-actionbox {\n  background: #ffffff;\n  padding: 70px 16px;\n  position: relative;\n  z-index: 1;\n}\n\n.mb-actionbox button {\n  pointer-events: auto !important;\n  position: relative;\n  z-index: 10;\n}\n\n.mb-actionbox__wrap {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.mb-actionbox__feature {\n  display: grid;\n  grid-template-columns: 1.1fr 0.9fr;\n  gap: 48px;\n  align-items: center;\n  margin-bottom: 44px;\n}\n\n.mb-actionbox__media {\n  border-radius: 22px;\n  overflow: hidden;\n  background: #f3f5f7;\n  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.08);\n}\n\n.mb-actionbox__img {\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: cover;\n  aspect-ratio: 16 / 9;\n  transition: opacity 220ms ease;\n  will-change: opacity;\n}\n\n.mb-actionbox__content {\n  padding: 6px 4px;\n}\n\n.mb-actionbox__kicker {\n  font-size: 14px;\n  font-weight: 700;\n  letter-spacing: 0.02em;\n  color: var(--user-accent-text);\n  margin-bottom: 12px;\n}\n\n.mb-actionbox__title {\n  font-size: clamp(30px, 3vw, 44px);\n  line-height: 1.08;\n  font-weight: 800;\n  color: #0e1b2a;\n  margin-bottom: 14px;\n}\n\n.mb-actionbox__desc {\n  font-size: 18px;\n  line-height: 1.6;\n  color: #2f3b4a;\n  max-width: 52ch;\n  margin-bottom: 22px;\n}\n\n.mb-actionbox__btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 14px 22px;\n  border-radius: 999px;\n  background: var(--user-accent);\n  color: #0e1b2a;\n  font-weight: 800;\n  text-decoration: none !important;\n  transition: transform 150ms ease, box-shadow 150ms ease, filter 150ms ease;\n  box-shadow: 0 10px 24px rgba(var(--user-accent-rgb), 0.25);\n  pointer-events: auto !important;\n  position: relative;\n  z-index: 11;\n}\n\n.mb-actionbox__btn:hover {\n  transform: translateY(-1px);\n  filter: brightness(0.98);\n}\n\n.mb-actionbox__btn:active {\n  transform: translateY(0);\n}\n\n.mb-actionbox__cards {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 18px;\n  position: relative;\n  z-index: 12;\n}\n\n.mb-card {\n  text-align: left;\n  background: #ffffff;\n  border: 1.5px solid #d9e1ee;\n  border-radius: 18px;\n  padding: 18px 18px 20px;\n  cursor: pointer;\n  transition: transform 150ms ease, box-shadow 150ms ease, border-color 150ms ease, background-color 150ms ease;\n  min-height: 110px;\n  position: relative;\n  z-index: 13;\n  pointer-events: auto !important;\n}\n\n.mb-card__kicker {\n  font-size: 13px;\n  font-weight: 700;\n  color: var(--user-accent-text);\n  margin-bottom: 10px;\n}\n\n.mb-card__title {\n  font-size: 18px;\n  font-weight: 800;\n  line-height: 1.2;\n  color: #0e1b2a;\n}\n\n.mb-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.08);\n  border-color: #bcd0f1;\n}\n\n.mb-card.is-active {\n  background: #fbf4e8;\n  border-color: var(--user-accent-text);\n  box-shadow: 0 14px 34px rgba(43, 90, 166, 0.18);\n}\n\n.mb-card.is-soft:not(.is-active) {\n  background: #ffffff;\n  border: 1.5px solid #d9e1ee;\n  box-shadow: none;\n}\n\n.mb-actionbox__content,\n.mb-actionbox__media {\n  will-change: opacity, transform;\n  transition: opacity 220ms ease, transform 220ms ease;\n}\n\n.mb-actionbox__feature.is-fading .mb-actionbox__content,\n.mb-actionbox__feature.is-fading .mb-actionbox__media {\n  opacity: 0;\n  transform: translateY(6px);\n}\n\n@media (max-width: 980px) {\n  .mb-actionbox__feature {\n    grid-template-columns: 1fr;\n    gap: 22px;\n  }\n\n  .mb-actionbox__cards {\n    grid-template-columns: 1fr 1fr;\n  }\n}\n\n@media (max-width: 520px) {\n  .mb-actionbox {\n    padding: 54px 14px;\n  }\n\n  .mb-actionbox__cards {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-actionbox__desc {\n    font-size: 16px;\n  }\n}\n\n.our-story-section {\n  padding: 60px 20px;\n  background-color: #f4f4f4;\n}\n\n.our-story-container {\n  max-width: 1200px;\n  width: 100%;\n  margin: 0 auto;\n  text-align: center;\n}\n\n.our-story-title {\n  font-size: 36px;\n  font-weight: bold;\n  color: #2c3e50;\n  margin-bottom: 40px;\n}\n\n.timeline-wrapper {\n  position: relative;\n  width: 100%;\n  overflow: hidden;\n}\n\n.timeline {\n  display: flex;\n  width: 480%;\n  animation: scroll-timeline 50s linear infinite;\n}\n\n.timeline-inner {\n  display: flex;\n  width: 100%;\n}\n\n.timeline-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  width: 20%;\n  padding: 20px;\n}\n\n.timeline-icon {\n  width: 50px;\n  height: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.timeline-icon ion-icon {\n  font-size: 40px;\n  color: var(--user-accent);\n}\n\n.timeline-item::after {\n  content: none;\n}\n\n@keyframes scroll-timeline {\n  0% {\n    transform: translateX(0);\n  }\n\n  100% {\n    transform: translateX(-50%);\n  }\n}\n\n@media (max-width: 768px) {\n  .timeline {\n    flex-direction: row;\n    align-items: center;\n    width: 2100%;\n    animation: scroll-timeline 50s linear infinite;\n  }\n\n  .timeline-inner {\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n  }\n\n  .timeline-item {\n    width: 100vw;\n    flex-shrink: 0;\n    padding: 15px;\n    margin-right: 10px;\n  }\n\n  .timeline-wrapper {\n    overflow: hidden;\n    max-width: 100%;\n  }\n\n  .timeline-item {\n    scroll-snap-align: center;\n  }\n\n  .timeline-icon {\n    width: 40px;\n    height: 40px;\n    margin-bottom: 10px;\n  }\n\n  .timeline-date {\n    font-size: 18px;\n    margin-bottom: 10px;\n    line-height: 1.5;\n    word-wrap: break-word;\n  }\n\n  .timeline-content {\n    display: block;\n    max-width: 90%;\n    word-wrap: break-word;\n  }\n}\n\n.rl {\n  background: #ffffff;\n  padding: 60px 0 90px;\n  padding-top: 180px;\n}\n\n.rl-container {\n  max-width: 1200px;\n  width: 100%;\n  margin-inline: auto;\n}\n\n.rl-header {\n  padding-bottom: 16px;\n}\n\n.rl-title {\n  font-size: clamp(42px, 5vw, 74px);\n  line-height: 0.95;\n  font-weight: 900;\n  letter-spacing: -0.02em;\n  color: #111111;\n  text-transform: uppercase;\n  margin: 0 0 18px;\n}\n\n.rl-lead {\n  font-size: 16px;\n  line-height: 1.7;\n  color: #1f2937;\n  max-width: 110ch;\n  margin: 0 0 10px;\n}\n\n.rl-support {\n  margin-top: 10px;\n  font-size: 14px;\n  line-height: 1.7;\n  color: #111111;\n}\n\n.rl-srOnly {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n}\n\n.rl-search {\n  position: relative;\n  margin-top: 18px;\n  padding-top: 16px;\n  border-top: 1px solid #e5e7eb;\n}\n\n.rl-searchInput {\n  width: 100%;\n  height: 52px;\n  padding: 0 56px 0 18px;\n  border: 2px solid #e5e7eb;\n  border-radius: 12px;\n  transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;\n}\n\n.rl-searchInput:hover {\n  border-color: #d1d5db;\n}\n\n.rl-searchInput:focus {\n  outline: none;\n  border-color: #f2c200;\n  box-shadow: 0 0 0 4px rgba(242, 194, 0, 0.15), 0 4px 12px rgba(0, 0, 0, 0.08);\n  background-color: #fffef5;\n}\n\n.rl-searchInput::placeholder {\n  color: #9ca3af;\n}\n\n.rl-clearSearch {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-18%);\n  height: 38px;\n  width: 42px;\n  border-radius: 10px;\n  border: 0;\n  background: #111111;\n  color: #ffffff;\n  font-weight: 900;\n  cursor: pointer;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.rl-chips {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 12px;\n  padding: 14px 0 0;\n  flex-wrap: wrap;\n}\n\n.rl-chipList {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.rl-chip {\n  display: inline-flex;\n  align-items: center;\n  gap: 10px;\n  background: #eeeeee;\n  color: #111111;\n  border: 0;\n  border-radius: 999px;\n  padding: 8px 12px;\n  font-size: 13px;\n  font-weight: 800;\n  cursor: pointer;\n}\n\n.rl-chip span {\n  display: inline-flex;\n  width: 18px;\n  height: 18px;\n  border-radius: 999px;\n  background: #ffffff;\n  color: #111111;\n  line-height: 18px;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: 900;\n}\n\n.rl-clearAll {\n  background: transparent;\n  border: 0;\n  padding: 8px 0;\n  font-size: 13px;\n  font-weight: 900;\n  text-decoration: underline;\n  cursor: pointer;\n  color: #111111;\n}\n\n.rl-grid {\n  display: grid;\n  grid-template-columns: 320px 1fr;\n  gap: 30px;\n  padding-top: 26px;\n  align-items: start;\n}\n\n.rl-sidebar {\n  position: sticky;\n  top: 20px;\n}\n\n.rl-filterBlock {\n  margin-bottom: 22px;\n}\n\n.rl-filterTitle {\n  font-size: 13px;\n  font-weight: 900;\n  letter-spacing: 0.02em;\n  color: #111111;\n  margin: 0 0 12px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #111111;\n}\n\n.rl-filterList {\n  display: grid;\n  gap: 6px;\n  max-height: 340px;\n  overflow: auto;\n  padding-right: 8px;\n}\n\n.rl-filterBtn {\n  text-align: left;\n  border: 0;\n  background: transparent;\n  padding: 8px 2px;\n  font-size: 14px;\n  color: #111111;\n  cursor: pointer;\n}\n\n.rl-filterBtn:hover {\n  text-decoration: underline;\n}\n\n.rl-filterBtn.is-active {\n  color: var(--user-accent);\n  font-weight: 600;\n}\n\n.rl-meta {\n  font-size: 12px;\n  color: #6b7280;\n  margin: 0 0 12px;\n}\n\n.rl-results {\n  max-height: 800px;\n  overflow-y: auto;\n  padding-right: 15px;\n}\n\n.rl-cards {\n  display: grid;\n  gap: 20px;\n}\n\n.rl-card {\n  border-left: 4px solid #f2c200;\n  padding: 20px 24px;\n  background: #fafafa;\n  border-radius: 0 12px 12px 0;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n    box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n    border-color 0.3s ease;\n  opacity: 0;\n  transform: translateY(20px);\n  animation: rl-card-enter 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n.rl-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(242, 194, 0, 0.15);\n  border-color: #d4aa00;\n}\n\n@keyframes rl-card-enter {\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.rl-card:nth-child(1) {\n  animation-delay: 0.05s;\n}\n\n.rl-card:nth-child(2) {\n  animation-delay: 0.1s;\n}\n\n.rl-card:nth-child(3) {\n  animation-delay: 0.15s;\n}\n\n.rl-card:nth-child(4) {\n  animation-delay: 0.2s;\n}\n\n.rl-card:nth-child(5) {\n  animation-delay: 0.25s;\n}\n\n.rl-card:nth-child(6) {\n  animation-delay: 0.3s;\n}\n\n.rl-card:nth-child(7) {\n  animation-delay: 0.35s;\n}\n\n.rl-card:nth-child(8) {\n  animation-delay: 0.4s;\n}\n\n.rl-card:nth-child(n+9) {\n  animation-delay: 0.45s;\n}\n\n.rl-cardSmall {\n  font-size: 12px;\n  color: #6b7280;\n  margin: 0 0 10px;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.rl-cardSmall::before {\n  content: \"\";\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  background: #f2c200;\n  border-radius: 50%;\n}\n\n.rl-cardTitle {\n  font-size: 28px;\n  font-weight: 800;\n  letter-spacing: -0.01em;\n  margin: 0;\n  color: #111111;\n  transition: color 0.2s ease;\n}\n\n.rl-card:hover .rl-cardTitle {\n  color: #d4aa00;\n}\n\n.rl-cardBody {\n  font-size: 14px;\n  line-height: 1.7;\n  color: #374151;\n  max-width: 110ch;\n  margin: 12px 0 16px;\n}\n\n.rl-tags {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-bottom: 16px;\n}\n\n.rl-tag {\n  display: inline-flex;\n  align-items: center;\n  padding: 6px 12px;\n  border-radius: 20px;\n  background: linear-gradient(135deg, #f2c200 0%, #e6b800 100%);\n  color: #111111;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.03em;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n  box-shadow: 0 2px 4px rgba(242, 194, 0, 0.3);\n}\n\n.rl-tag:hover {\n  transform: translateY(-2px) scale(1.02);\n  box-shadow: 0 4px 8px rgba(242, 194, 0, 0.4);\n}\n\n.rl-actions {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 12px;\n}\n\n.rl-visitBtn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  height: 42px;\n  min-width: 110px;\n  padding: 0 20px;\n  background: linear-gradient(135deg, #111111 0%, #2d2d2d 100%);\n  color: #ffffff;\n  text-decoration: none;\n  font-size: 12px;\n  font-weight: 700;\n  border-radius: 8px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n  position: relative;\n  overflow: hidden;\n}\n\n.rl-visitBtn::after {\n  content: \"\\2192\";\n  font-size: 14px;\n  transition: transform 0.3s ease;\n}\n\n.rl-visitBtn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\n  background: linear-gradient(135deg, #2d2d2d 0%, #111111 100%);\n}\n\n.rl-visitBtn:hover::after {\n  transform: translateX(4px);\n}\n\n.rl-visitBtn:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n}\n\n.rl-skeleton {\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n  background-size: 200% 100%;\n  animation: rl-skeleton-shimmer 1.5s infinite;\n  border-radius: 8px;\n}\n\n@keyframes rl-skeleton-shimmer {\n  0% {\n    background-position: 200% 0;\n  }\n\n  100% {\n    background-position: -200% 0;\n  }\n}\n\n.rl-skeleton-card {\n  padding: 20px 24px;\n  border-left: 4px solid #e0e0e0;\n  background: #fafafa;\n  border-radius: 0 12px 12px 0;\n}\n\n.rl-skeleton-title {\n  height: 28px;\n  width: 60%;\n  margin-bottom: 12px;\n}\n\n.rl-skeleton-text {\n  height: 14px;\n  width: 100%;\n  margin-bottom: 8px;\n}\n\n.rl-skeleton-text:last-child {\n  width: 75%;\n}\n\n.rl-skeleton-tags {\n  display: flex;\n  gap: 8px;\n  margin-top: 16px;\n}\n\n.rl-skeleton-tag {\n  height: 28px;\n  width: 70px;\n  border-radius: 20px;\n}\n\n.rl-results::-webkit-scrollbar {\n  width: 6px;\n}\n\n.rl-results::-webkit-scrollbar-track {\n  background: transparent;\n  border-radius: 20px;\n}\n\n.rl-results::-webkit-scrollbar-thumb {\n  background: linear-gradient(180deg, var(--user-accent) 0%, var(--user-accent-hover) 100%);\n  border-radius: 20px;\n}\n\n.rl-results::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(180deg, var(--user-accent-hover) 0%, var(--user-accent) 100%);\n}\n\n@media (max-width: 980px) {\n  .rl-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .rl-sidebar {\n    position: static;\n  }\n\n  .rl-filterList {\n    max-height: 220px;\n  }\n\n  .rl-cardTitle {\n    font-size: 26px;\n  }\n}\n\n@media (max-width: 520px) {\n  .rl {\n    padding: 48px 0 70px;\n  }\n\n  .rl-title {\n    font-size: 38px;\n  }\n\n  .rl-searchInput {\n    height: 50px;\n  }\n}\n\n.rl-spotlight {\n  margin-bottom: 40px;\n  padding: 30px;\n  background: linear-gradient(135deg, #fff9e6 0%, #fff 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(242, 194, 0, 0.2);\n}\n\n.rl-spotlight__header {\n  text-align: center;\n  margin-bottom: 24px;\n}\n\n.rl-spotlight__title {\n  font-size: 24px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n\n.rl-spotlight__title::before {\n  content: \"â­\";\n}\n\n.rl-spotlight__subtitle {\n  color: #666;\n  font-size: 14px;\n}\n\n.rl-spotlight__cards {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 24px;\n}\n\n.rl-spotlight-card {\n  background: #fff;\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  border-left: 5px solid #f2c200;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  display: flex;\n  flex-direction: column;\n}\n\n.rl-spotlight-card:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);\n}\n\n.rl-spotlight-card__badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  background: linear-gradient(135deg, #f2c200, #e5a800);\n  color: #fff;\n  font-size: 11px;\n  font-weight: 600;\n  padding: 4px 12px;\n  border-radius: 20px;\n  margin-bottom: 12px;\n  width: fit-content;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.rl-spotlight-card__provider {\n  font-size: 12px;\n  color: #888;\n  margin-bottom: 8px;\n}\n\n.rl-spotlight-card__title {\n  font-size: 18px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 10px;\n  line-height: 1.3;\n}\n\n.rl-spotlight-card__desc {\n  font-size: 14px;\n  color: #555;\n  line-height: 1.6;\n  flex: 1;\n  margin-bottom: 16px;\n}\n\n.rl-spotlight-card__actions {\n  display: flex;\n  gap: 10px;\n}\n\n.rl-spotlight-card__btn {\n  flex: 1;\n  padding: 10px 16px;\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  text-align: center;\n  text-decoration: none;\n  transition: all 0.2s ease;\n}\n\n.rl-spotlight-card__btn--primary {\n  background: linear-gradient(135deg, #f2c200, #e5a800);\n  color: #fff;\n}\n\n.rl-spotlight-card__btn--primary:hover {\n  background: linear-gradient(135deg, #e5a800, #d49600);\n  transform: translateY(-2px);\n}\n\n@media (max-width: 980px) {\n  .rl-spotlight__cards {\n    grid-template-columns: 1fr;\n  }\n}\n\n.rl-local-search {\n  margin-bottom: 30px;\n  padding: 24px 30px;\n  background: linear-gradient(135deg, #e8f5e9 0%, #fff 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(76, 175, 80, 0.2);\n}\n\n.rl-local-search__header {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.rl-local-search__title {\n  font-size: 20px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n\n.rl-local-search__title i {\n  color: #4CAF50;\n}\n\n.rl-local-search__subtitle {\n  color: #666;\n  font-size: 14px;\n}\n\n.rl-local-search__form {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 12px;\n}\n\n.rl-local-search__input-group {\n  display: flex;\n  gap: 10px;\n  width: 100%;\n  max-width: 400px;\n}\n\n.rl-local-search__input {\n  flex: 1;\n  padding: 12px 16px;\n  border: 2px solid #ddd;\n  border-radius: 10px;\n  font-size: 16px;\n  transition: all 0.2s ease;\n  text-align: center;\n  letter-spacing: 2px;\n  font-weight: 600;\n}\n\n.rl-local-search__input:focus {\n  outline: none;\n  border-color: #4CAF50;\n  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.15);\n}\n\n.rl-local-search__btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background: linear-gradient(135deg, #4CAF50, #45a049);\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.rl-local-search__btn:hover {\n  background: linear-gradient(135deg, #45a049, #3d8b40);\n  transform: translateY(-2px);\n}\n\n.rl-local-search__btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.rl-local-search__powered {\n  font-size: 12px;\n  color: #888;\n}\n\n.rl-local-search__powered a {\n  color: #4CAF50;\n  text-decoration: none;\n}\n\n.rl-local-search__powered a:hover {\n  text-decoration: underline;\n}\n\n.rl-local-search__results {\n  margin-top: 20px;\n  background: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\n}\n\n.rl-local-search__results-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid #eee;\n}\n\n.rl-local-search__results-header h4 {\n  font-size: 16px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin: 0;\n}\n\n.rl-local-search__close {\n  background: none;\n  border: none;\n  color: #888;\n  cursor: pointer;\n  padding: 4px;\n  font-size: 16px;\n  transition: color 0.2s;\n}\n\n.rl-local-search__close:hover {\n  color: #333;\n}\n\n.rl-local-search__results-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.rl-local-result {\n  padding: 16px;\n  background: #f9f9f9;\n  border-radius: 10px;\n  border-left: 4px solid #4CAF50;\n  transition: background 0.2s;\n}\n\n.rl-local-result:hover {\n  background: #f0f0f0;\n}\n\n.rl-local-result__name {\n  font-size: 15px;\n  font-weight: 600;\n  color: #2c2c2c;\n  margin-bottom: 6px;\n}\n\n.rl-local-result__address {\n  font-size: 13px;\n  color: #666;\n  margin-bottom: 4px;\n}\n\n.rl-local-result__phone {\n  font-size: 13px;\n  color: #4CAF50;\n  font-weight: 500;\n}\n\n.rl-local-result__phone a {\n  color: inherit;\n  text-decoration: none;\n}\n\n.rl-local-result__phone a:hover {\n  text-decoration: underline;\n}\n\n.rl-local-result__distance {\n  font-size: 12px;\n  color: #888;\n  margin-top: 6px;\n}\n\n.rl-local-search__view-more {\n  margin-top: 16px;\n  text-align: center;\n}\n\n.rl-local-search__view-more-link {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  color: #4CAF50;\n  text-decoration: none;\n  font-size: 14px;\n  font-weight: 600;\n  transition: color 0.2s;\n}\n\n.rl-local-search__view-more-link:hover {\n  color: #45a049;\n  text-decoration: underline;\n}\n\n.rl-local-search__loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  margin-top: 20px;\n  padding: 20px;\n  color: #666;\n}\n\n.rl-local-search__spinner {\n  width: 24px;\n  height: 24px;\n  border: 3px solid #eee;\n  border-top-color: #4CAF50;\n  border-radius: 50%;\n  animation: rl-spin 0.8s linear infinite;\n}\n\n@keyframes rl-spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.rl-local-search__error {\n  margin-top: 16px;\n  padding: 12px 16px;\n  background: #ffebee;\n  border-radius: 8px;\n  color: #c62828;\n  font-size: 14px;\n  text-align: center;\n}\n\n@media (max-width: 600px) {\n  .rl-local-search__input-group {\n    flex-direction: column;\n  }\n\n  .rl-local-search__btn {\n    width: 100%;\n    justify-content: center;\n  }\n}\n\nbody.dark-theme .rl-local-search {\n  background: linear-gradient(135deg, #1a2a1a 0%, #1e1e2e 100%);\n  border-color: rgba(76, 175, 80, 0.3);\n}\n\nbody.dark-theme .rl-local-search__title {\n  color: #fff;\n}\n\nbody.dark-theme .rl-local-search__subtitle {\n  color: #aaa;\n}\n\nbody.dark-theme .rl-local-search__input {\n  background: #2a2a3a;\n  border-color: #444;\n  color: #fff;\n}\n\nbody.dark-theme .rl-local-search__input:focus {\n  border-color: #4CAF50;\n}\n\nbody.dark-theme .rl-local-search__results {\n  background: #2a2a3a;\n}\n\nbody.dark-theme .rl-local-search__results-header {\n  border-bottom-color: #444;\n}\n\nbody.dark-theme .rl-local-search__results-header h4 {\n  color: #fff;\n}\n\nbody.dark-theme .rl-local-result {\n  background: #1e1e2e;\n}\n\nbody.dark-theme .rl-local-result:hover {\n  background: #252535;\n}\n\nbody.dark-theme .rl-local-result__name {\n  color: #fff;\n}\n\nbody.dark-theme .rl-local-result__address {\n  color: #aaa;\n}\n\nbody.dark-theme .rl-local-search__error {\n  background: #3a1a1a;\n}\n\n.rl-suggest-wrapper {\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 20px;\n}\n\n.rl-suggest-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: linear-gradient(135deg, #4CAF50, #45a049);\n  color: #fff;\n  border: none;\n  border-radius: 30px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);\n}\n\n.rl-suggest-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);\n}\n\n.rl-suggest-btn ion-icon {\n  font-size: 20px;\n}\n\n.suggest-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 9999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease, visibility 0.3s ease;\n}\n\n.suggest-modal.is-active {\n  opacity: 1;\n  visibility: visible;\n}\n\n.suggest-modal__backdrop {\n  position: absolute;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n\n.suggest-modal__content {\n  position: relative;\n  background: #fff;\n  border-radius: 20px;\n  padding: 40px;\n  width: 90%;\n  max-width: 600px;\n  max-height: 90vh;\n  overflow-y: auto;\n  transform: translateY(20px);\n  transition: transform 0.3s ease;\n}\n\n.suggest-modal.is-active .suggest-modal__content {\n  transform: translateY(0);\n}\n\n.suggest-modal__close {\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  background: #f0f0f0;\n  border: none;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background 0.2s ease;\n}\n\n.suggest-modal__close:hover {\n  background: #e0e0e0;\n}\n\n.suggest-modal__close ion-icon {\n  font-size: 24px;\n  color: #666;\n}\n\n.suggest-modal__title {\n  font-size: 28px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 8px;\n}\n\n.suggest-modal__desc {\n  color: #666;\n  margin-bottom: 24px;\n}\n\n.suggest-form__group {\n  margin-bottom: 20px;\n}\n\n.suggest-form__group label {\n  display: block;\n  font-weight: 600;\n  color: #2c2c2c;\n  margin-bottom: 8px;\n  font-size: 14px;\n}\n\n.suggest-form__group input,\n.suggest-form__group textarea,\n.suggest-form__group select {\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e0e0e0;\n  border-radius: 10px;\n  font-size: 15px;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.suggest-form__group input:focus,\n.suggest-form__group textarea:focus,\n.suggest-form__group select:focus {\n  outline: none;\n  border-color: #f2c200;\n  box-shadow: 0 0 0 4px rgba(242, 194, 0, 0.1);\n}\n\n.suggest-form__row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 16px;\n}\n\n@media (max-width: 520px) {\n  .suggest-form__row {\n    grid-template-columns: 1fr;\n  }\n}\n\n.suggest-form__actions {\n  display: flex;\n  gap: 12px;\n  margin-top: 24px;\n}\n\n.suggest-form__cancel {\n  flex: 1;\n  padding: 14px 20px;\n  background: #f0f0f0;\n  color: #666;\n  border: none;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.2s ease;\n}\n\n.suggest-form__cancel:hover {\n  background: #e0e0e0;\n}\n\n.suggest-form__submit {\n  flex: 2;\n  padding: 14px 20px;\n  background: linear-gradient(135deg, #4CAF50, #45a049);\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.suggest-form__submit:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);\n}\n\n.suggest-modal__success {\n  text-align: center;\n  padding: 20px;\n}\n\n.suggest-modal__success ion-icon {\n  font-size: 80px;\n  color: #4CAF50;\n  margin-bottom: 16px;\n}\n\n.suggest-modal__success h3 {\n  font-size: 24px;\n  font-weight: 700;\n  color: #2c2c2c;\n  margin-bottom: 12px;\n}\n\n.suggest-modal__success p {\n  color: #666;\n  margin-bottom: 24px;\n}\n\n.rl-share-btns {\n  display: flex;\n  gap: 8px;\n  margin-left: auto;\n}\n\n.rl-share-btn {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 16px;\n}\n\n.rl-share-btn--copy {\n  background: #f0f0f0;\n  color: #666;\n}\n\n.rl-share-btn--copy:hover {\n  background: #e0e0e0;\n}\n\n.rl-share-btn--copy.is-copied {\n  background: #4CAF50;\n  color: #fff;\n}\n\n.rl-share-btn--twitter {\n  background: #1DA1F2;\n  color: #fff;\n}\n\n.rl-share-btn--twitter:hover {\n  background: #0d8bd9;\n}\n\n.rl-share-btn--facebook {\n  background: #4267B2;\n  color: #fff;\n}\n\n.rl-share-btn--facebook:hover {\n  background: #365899;\n}\n\n.rl-quickinfo {\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px dashed #e0e0e0;\n  display: none;\n}\n\n.rl-quickinfo.is-expanded {\n  display: block;\n}\n\n.rl-quickinfo__item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 13px;\n  color: #666;\n  margin-bottom: 6px;\n}\n\n.rl-quickinfo__item ion-icon {\n  color: #f2c200;\n  font-size: 16px;\n}\n\n.rl-quickinfo-toggle {\n  background: none;\n  border: none;\n  color: #f2c200;\n  font-size: 13px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 0;\n  margin-top: 8px;\n}\n\n.rl-quickinfo-toggle:hover {\n  text-decoration: underline;\n}\n\n.rl-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-top: 16px;\n}\n\n[data-theme=\"dark\"] .rl-spotlight {\n  background: linear-gradient(135deg, #2d2b3d 0%, #1e1c2e 100%);\n  border-color: rgba(242, 194, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .rl-spotlight__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .rl-spotlight__subtitle {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .rl-spotlight-card {\n  background: #2d2b3d;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .rl-spotlight-card__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .rl-spotlight-card__desc {\n  color: #bbb;\n}\n\n[data-theme=\"dark\"] .rl-spotlight-card__provider {\n  color: #999;\n}\n\n[data-theme=\"dark\"] .suggest-modal__content {\n  background: #2d2b3d;\n}\n\n[data-theme=\"dark\"] .suggest-modal__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .suggest-modal__desc {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .suggest-form__group label {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .suggest-form__group input,\n[data-theme=\"dark\"] .suggest-form__group textarea,\n[data-theme=\"dark\"] .suggest-form__group select {\n  background: #1e1c2e;\n  border-color: #3d3a50;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .suggest-form__cancel {\n  background: #3d3a50;\n  color: #ddd;\n}\n\n[data-theme=\"dark\"] .suggest-modal__close {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .suggest-modal__close ion-icon {\n  color: #ddd;\n}\n\n[data-theme=\"dark\"] .rl-share-btn--copy {\n  background: #3d3a50;\n  color: #ddd;\n}\n\n[data-theme=\"dark\"] .rl-quickinfo {\n  border-color: #3d3a50;\n}\n\n[data-theme=\"dark\"] .rl-quickinfo__item {\n  color: #bbb;\n}\n\n.mb-testimonials {\n  background: #f1f1f1;\n  padding: 80px 16px;\n  position: relative;\n  z-index: 2;\n}\n\n.mb-testimonials__wrap {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.mb-testimonials__header {\n  text-align: center;\n  margin-bottom: 28px;\n}\n\n.mb-testimonials__title {\n  font-size: clamp(28px, 3.2vw, 44px);\n  font-weight: 900;\n  letter-spacing: 0.02em;\n  color: #0e1b2a;\n}\n\n.mb-testimonials__rule {\n  width: 90px;\n  height: 3px;\n  background: rgba(14, 27, 42, 0.55);\n  margin: 14px auto 0;\n  border-radius: 999px;\n}\n\n.mb-testimonials__grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 34px;\n  align-items: start;\n  margin-top: 38px;\n}\n\n.mb-testimonials__col {\n  position: relative;\n}\n\n.mb-testimonials__viewport {\n  height: 520px;\n  overflow: hidden;\n  position: relative;\n}\n\n.mb-testimonials__mask {\n  pointer-events: none;\n  position: absolute;\n  inset: 0;\n  z-index: 3;\n  background: linear-gradient(to bottom,\n      rgba(238, 243, 246, 1) 0%,\n      rgba(238, 243, 246, 0) 14%,\n      rgba(238, 243, 246, 0) 86%,\n      rgba(238, 243, 246, 1) 100%);\n}\n\n.mb-testimonials__track {\n  display: grid;\n  gap: 22px;\n  will-change: transform;\n  transform: translate3d(0, 0, 0);\n}\n\n.mb-tcard {\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 16px;\n  padding: 18px 18px 20px;\n  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.08);\n}\n\n.mb-tcard__top {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n\n.mb-tcard__avatar {\n  width: 44px;\n  height: 44px;\n  border-radius: 999px;\n  object-fit: cover;\n  flex: 0 0 auto;\n}\n\n.mb-tcard__name {\n  font-size: 16px;\n  font-weight: 900;\n  color: #0e1b2a;\n  line-height: 1.15;\n}\n\n.mb-tcard__role {\n  font-size: 13px;\n  font-weight: 600;\n  color: rgba(14, 27, 42, 0.65);\n  line-height: 1.15;\n  margin-top: 2px;\n}\n\n.mb-tcard__text {\n  font-size: 15px;\n  line-height: 1.65;\n  color: rgba(14, 27, 42, 0.82);\n}\n\n.mb-tcard:hover {\n  transform: translateY(-2px);\n  transition: transform 180ms ease;\n}\n\n.mb-testimonials__col[data-direction=\"up\"] .mb-testimonials__track {\n  animation: mb-tm-up var(--mb-tm-duration, 18s) linear infinite;\n}\n\n.mb-testimonials__col[data-direction=\"down\"] .mb-testimonials__track {\n  animation: mb-tm-down var(--mb-tm-duration, 18s) linear infinite;\n}\n\n@keyframes mb-tm-up {\n  from {\n    transform: translate3d(0, 0, 0);\n  }\n\n  to {\n    transform: translate3d(0, calc(-1 * var(--mb-tm-distance, 300px)), 0);\n  }\n}\n\n@keyframes mb-tm-down {\n  from {\n    transform: translate3d(0, calc(-1 * var(--mb-tm-distance, 300px)), 0);\n  }\n\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n\n.mb-testimonials__col:hover .mb-testimonials__track {\n  animation-play-state: paused;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .mb-testimonials__track {\n    animation: none !important;\n  }\n\n  .mb-testimonials__mask {\n    display: none !important;\n  }\n\n  .navbar.active .navbar-item {\n    animation: none !important;\n    opacity: 1 !important;\n  }\n\n  .navbar {\n    transition: transform 0.15s ease, visibility 0s !important;\n  }\n\n  .mobile-crisis-btn,\n  .mobile-auth-btn,\n  .navbar-link {\n    transition: none !important;\n  }\n}\n\n[data-reduce-motion=\"true\"] .mb-testimonials__track {\n  animation: none !important;\n}\n\n[data-reduce-motion=\"true\"] .mb-testimonials__mask {\n  display: none !important;\n}\n\n@media (max-width: 980px) {\n  .mb-testimonials__grid {\n    grid-template-columns: 1fr;\n    gap: 18px;\n  }\n\n  .mb-testimonials__viewport {\n    height: 420px;\n  }\n}\n\n.back-to-top {\n  position: fixed;\n  bottom: 80px;\n  right: 30px;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background: #fff;\n  color: var(--user-accent);\n  border: 2px solid var(--user-accent);\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  visibility: hidden;\n  transform: translateY(20px);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 999;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n}\n\n.back-to-top.visible {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n\n.back-to-top:hover {\n  transform: translateY(-4px);\n  background: var(--user-accent);\n  color: #fff;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);\n}\n\n.back-to-top ion-icon {\n  font-size: 24px;\n}\n\n.back-to-top:hover ion-icon {\n  animation: bounceUp 0.5s ease infinite;\n}\n\n@keyframes bounceUp {\n\n  0%,\n  100% {\n    transform: translateY(0);\n  }\n\n  50% {\n    transform: translateY(-4px);\n  }\n}\n\n[data-theme=\"dark\"] .back-to-top {\n  background: rgba(255, 255, 255, 0.12);\n  color: #fff;\n  border-color: rgba(255, 255, 255, 0.3);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .back-to-top:hover {\n  background: rgba(255, 255, 255, 0.2);\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);\n}\n\n.mb-footer {\n  margin-top: 80px;\n  color: rgb(244, 244, 244, 0.85);\n  position: relative;\n}\n\n.mb-footer__wave {\n  position: relative;\n  height: 80px;\n  overflow: hidden;\n  margin-bottom: -1px;\n  background: transparent;\n}\n\n.mb-footer__wave svg {\n  position: absolute;\n  bottom: -1px;\n  left: 0;\n  width: 100%;\n  height: calc(100% + 2px);\n  display: block;\n}\n\n.wave-path {\n  fill: var(--user-accent-light);\n}\n\n.wave-path.wave-1 {\n  opacity: 0.3;\n  animation: waveMove 8s ease-in-out infinite;\n}\n\n.wave-path.wave-2 {\n  opacity: 0.5;\n  animation: waveMove 6s ease-in-out infinite reverse;\n}\n\n.wave-path.wave-3 {\n  opacity: 1;\n  animation: waveMove 4s ease-in-out infinite;\n}\n\n@keyframes waveMove {\n\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  50% {\n    transform: translateX(-20px);\n  }\n\n}\n\n[data-theme=\"dark\"] .wave-path {\n  fill: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .wave-path.wave-1 {\n  fill: #2a2a4e;\n}\n\n[data-theme=\"dark\"] .wave-path.wave-2 {\n  fill: #232340;\n}\n\n.mb-footer__pattern {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image:\n    radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.03) 1px, transparent 1px),\n    radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.03) 1px, transparent 1px);\n  background-size: 60px 60px;\n  pointer-events: none;\n}\n\n.mb-footer__top {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  padding: 64px 24px 56px;\n  position: relative;\n  overflow: hidden;\n}\n\n.mb-footer__top::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),\n    radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.08) 0%, transparent 40%);\n  pointer-events: none;\n}\n\n.mb-footer__wrap {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.mb-footer__top .mb-footer__wrap {\n  display: flex;\n  flex-direction: column;\n  gap: 40px;\n}\n\n.mb-footer__main-grid {\n  display: grid;\n  grid-template-columns: 1.3fr 1fr 1.1fr 1.2fr;\n  gap: 34px;\n  align-items: start;\n}\n\n.mb-footer__trust {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  margin-top: 20px;\n}\n\n.mb-footer__badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  border-radius: 20px;\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  font-size: 11px;\n  font-weight: 600;\n  color: rgba(255, 255, 255, 0.85);\n  transition: all 200ms ease;\n}\n\n.mb-footer__badge ion-icon {\n  font-size: 14px;\n  color: var(--user-accent);\n}\n\n.mb-footer__badge:hover {\n  background: rgba(255, 255, 255, 0.15);\n  transform: translateY(-2px);\n}\n\n.mb-footer__accordion-btn {\n  display: none;\n  width: 100%;\n  justify-content: space-between;\n  align-items: center;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n}\n\n.mb-footer__accordion-btn .accordion-icon {\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 18px;\n  transition: transform 200ms ease;\n}\n\n.mb-footer__accordion-btn[aria-expanded=\"true\"] .accordion-icon {\n  transform: rotate(180deg);\n}\n\n.mb-footer__brand {\n  font-size: 22px;\n  font-weight: 900;\n  color: #fff;\n  margin-bottom: 14px;\n  position: relative;\n  display: inline-block;\n}\n\n.mb-footer__brand::after {\n  content: '';\n  position: absolute;\n  bottom: -4px;\n  left: 0;\n  width: 40px;\n  height: 3px;\n  background: linear-gradient(90deg, var(--user-accent), transparent);\n  border-radius: 2px;\n}\n\n.mb-footer__heading {\n  font-size: 13px;\n  font-weight: 900;\n  letter-spacing: 0.08em;\n  text-transform: uppercase;\n  color: #fff;\n  margin-bottom: 16px;\n}\n\n.mb-footer__subheading {\n  font-size: 12px;\n  font-weight: 900;\n  letter-spacing: 0.08em;\n  text-transform: uppercase;\n  color: rgba(255, 255, 255, 0.9);\n  margin-top: 18px;\n  margin-bottom: 10px;\n}\n\n.mb-footer__text {\n  font-size: 14px;\n  line-height: 1.8;\n  color: rgba(255, 255, 255, 0.70);\n  margin-bottom: 14px;\n}\n\n.mb-footer__list {\n  display: grid;\n  gap: 10px;\n  padding: 0;\n  margin: 0;\n}\n\n.mb-footer__link {\n  display: inline-block;\n  font-size: 14px;\n  color: rgba(255, 255, 255, 0.78);\n  transition: color 180ms ease, transform 180ms ease;\n  max-width: max-content;\n}\n\n.mb-footer__link:hover {\n  color: var(--user-accent);\n  transform: translateX(2px);\n}\n\n.mb-footer__tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.mb-footer__tag {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 14px;\n  border-radius: 20px;\n  border: 1px solid rgba(255, 255, 255, 0.35);\n  background: rgba(255, 255, 255, 0.2);\n  color: rgba(255, 255, 255, 0.85);\n  font-size: 12px;\n  font-weight: 600;\n  transition: all 200ms ease;\n}\n\n.mb-footer__tag:hover {\n  transform: translateY(-2px);\n  background: rgba(255, 255, 255, 0.28);\n  border-color: rgba(255, 255, 255, 0.5);\n  color: #fff;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.mb-footer__cta {\n  display: flex;\n  gap: 10px;\n  margin-top: 10px;\n}\n\n.mb-footer__btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 12px 20px;\n  border-radius: 25px;\n  background: #fff;\n  color: #333;\n  font-weight: 700;\n  font-size: 13px;\n  transition: all 200ms ease;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);\n}\n\n.mb-footer__btn:hover {\n  transform: translateY(-2px);\n  background: #f5f5f5;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\n}\n\n.mb-footer__btn--ghost {\n  background: rgba(255, 255, 255, 0.18);\n  color: #fff;\n  border: 1.5px solid rgba(255, 255, 255, 0.45);\n  box-shadow: none;\n}\n\n.mb-footer__btn--ghost:hover {\n  color: #fff;\n  background: rgba(255, 255, 255, 0.28);\n  border-color: rgba(255, 255, 255, 0.6);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.mb-footer__social {\n  display: flex;\n  gap: 10px;\n}\n\n.mb-footer__icon {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.9);\n  transition: all 200ms ease;\n}\n\n.mb-footer__icon ion-icon {\n  font-size: 18px;\n}\n\n.mb-footer__icon--instagram:hover {\n  transform: translateY(-3px) scale(1.05);\n  background: linear-gradient(135deg, #E1306C, #C13584);\n  border-color: transparent;\n  color: #fff;\n  box-shadow: 0 6px 20px rgba(225, 48, 108, 0.4);\n}\n\n.mb-footer__icon--youtube:hover {\n  transform: translateY(-3px) scale(1.05);\n  background: linear-gradient(135deg, #FF0000, #CC0000);\n  border-color: transparent;\n  color: #fff;\n  box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4);\n}\n\n.mb-footer__extras {\n  display: grid;\n  grid-template-columns: 1.5fr 1fr;\n  gap: 40px;\n  padding-top: 30px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.mb-footer__newsletter {\n  background: rgba(255, 255, 255, 0.08);\n  border-radius: 16px;\n  padding: 24px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.mb-footer__newsletter-content {\n  display: flex;\n  align-items: flex-start;\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n.mb-footer__newsletter-content .newsletter-icon {\n  font-size: 32px;\n  color: #fff;\n  flex-shrink: 0;\n}\n\n.mb-footer__newsletter-content .newsletter-text .mb-footer__heading {\n  margin-bottom: 4px;\n}\n\n.mb-footer__newsletter-content .newsletter-text .mb-footer__text {\n  margin-bottom: 0;\n}\n\n.mb-footer__newsletter-form {\n  display: flex;\n  gap: 10px;\n}\n\n.mb-footer__newsletter-input {\n  flex: 1;\n  padding: 12px 18px;\n  border-radius: 25px;\n  border: none;\n  background: rgba(255, 255, 255, 0.85);\n  color: #333;\n  font-size: 14px;\n  font-family: 'Poppins', sans-serif;\n  transition: all 200ms ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n}\n\n.mb-footer__newsletter-input::placeholder {\n  color: #999;\n}\n\n.mb-footer__newsletter-input:focus {\n  outline: none;\n  background: rgba(255, 255, 255, 0.95);\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n}\n\n.mb-footer__newsletter-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 12px 20px;\n  border-radius: 25px;\n  background: #fff;\n  color: #333;\n  font-weight: 700;\n  font-size: 13px;\n  border: none;\n  cursor: pointer;\n  transition: all 200ms ease;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);\n}\n\n.mb-footer__newsletter-btn:hover {\n  transform: translateY(-2px);\n  background: #f5f5f5;\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);\n}\n\n.mb-footer__newsletter-btn ion-icon {\n  font-size: 16px;\n}\n\n.mb-footer__newsletter-note {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.5);\n  margin-top: 10px;\n}\n\n.mb-footer__recent .mb-footer__heading {\n  margin-bottom: 16px;\n}\n\n.mb-footer__posts {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.mb-footer__post {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  transition: all 200ms ease;\n}\n\n.mb-footer__post:hover {\n  background: rgba(255, 255, 255, 0.1);\n  transform: translateX(4px);\n}\n\n.mb-footer__post-icon {\n  width: 36px;\n  height: 36px;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.25);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.mb-footer__post-icon ion-icon {\n  font-size: 18px;\n  color: #fff;\n}\n\n.mb-footer__post-info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.mb-footer__post-title {\n  font-size: 13px;\n  font-weight: 600;\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.mb-footer__post-meta {\n  font-size: 11px;\n  color: rgba(255, 255, 255, 0.5);\n}\n\n.mb-footer__controls {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 30px;\n  padding-top: 20px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.mb-footer__control-group {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.mb-footer__control-group>ion-icon {\n  font-size: 18px;\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.mb-footer__control-group .theme-icon-light {\n  display: none;\n}\n\n[data-theme=\"dark\"] .mb-footer__control-group .theme-icon-dark {\n  display: none;\n}\n\n[data-theme=\"dark\"] .mb-footer__control-group .theme-icon-light {\n  display: block;\n}\n\n.mb-footer__select {\n  padding: 8px 12px;\n  border-radius: 20px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  font-size: 13px;\n  cursor: pointer;\n  transition: all 200ms ease;\n}\n\n.mb-footer__select:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.mb-footer__select option {\n  background: #2a2a3e;\n  color: #fff;\n}\n\n.mb-footer__theme-toggle {\n  position: relative;\n  width: 44px;\n  height: 24px;\n  cursor: pointer;\n}\n\n.mb-footer__theme-toggle input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.mb-footer__theme-slider {\n  position: absolute;\n  inset: 0;\n  background: rgba(255, 255, 255, 0.35);\n  border-radius: 24px;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  transition: all 200ms ease;\n}\n\n.mb-footer__theme-slider::before {\n  content: '';\n  position: absolute;\n  width: 18px;\n  height: 18px;\n  left: 3px;\n  top: 3px;\n  background: #fff;\n  border-radius: 50%;\n  transition: all 200ms ease;\n}\n\n.mb-footer__theme-toggle input:checked+.mb-footer__theme-slider {\n  background: var(--user-accent);\n}\n\n.mb-footer__theme-toggle input:checked+.mb-footer__theme-slider::before {\n  transform: translateX(20px);\n}\n\n.mb-footer__bottom {\n  background: linear-gradient(135deg, var(--user-accent-dark) 0%, var(--user-accent) 100%);\n  padding: 20px 24px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.mb-footer__bottomwrap {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 14px;\n  flex-wrap: wrap;\n}\n\n.mb-footer__copy {\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.60);\n  white-space: nowrap;\n}\n\n.mb-footer__copy span {\n  display: inline;\n}\n\n.mb-footer__legal {\n  display: flex;\n  gap: 18px;\n  flex-wrap: wrap;\n}\n\n.mb-footer__legal-link {\n  font-size: 13px;\n  color: rgba(255, 255, 255, 0.60);\n  transition: color 160ms ease;\n}\n\n.mb-footer__legal-link:hover {\n  color: #fff;\n}\n\n@media (max-width: 980px) {\n  .mb-footer__main-grid {\n    grid-template-columns: 1fr 1fr;\n  }\n\n  .mb-footer__extras {\n    grid-template-columns: 1fr;\n  }\n}\n\n@media (max-width: 560px) {\n  .mb-footer__main-grid {\n    grid-template-columns: 1fr;\n  }\n\n  \n  .mb-footer__accordion .mb-footer__heading {\n    margin-bottom: 0;\n  }\n\n  .mb-footer__accordion-btn {\n    display: flex;\n  }\n\n  .mb-footer__accordion-content {\n    max-height: 0;\n    overflow: hidden;\n    transition: max-height 300ms ease, padding 300ms ease;\n    padding-top: 0;\n  }\n\n  .mb-footer__accordion-btn[aria-expanded=\"true\"]+.mb-footer__accordion-content {\n    max-height: 300px;\n    padding-top: 16px;\n  }\n\n  .mb-footer__cta {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .mb-footer__btn {\n    width: 100%;\n  }\n\n  .mb-footer__bottomwrap {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .mb-footer__copy {\n    white-space: normal;\n  }\n\n  .mb-footer__newsletter-form {\n    flex-direction: column;\n  }\n\n  .mb-footer__newsletter-btn {\n    width: 100%;\n    justify-content: center;\n  }\n\n  .mb-footer__controls {\n    flex-direction: column;\n    gap: 16px;\n  }\n\n  .mb-footer__trust {\n    justify-content: flex-start;\n  }\n}\n\n[data-theme=\"dark\"] .mb-footer__top {\n  background: linear-gradient(135deg, #1a1a2e 0%, #16162a 100%);\n}\n\n[data-theme=\"dark\"] .mb-footer__bottom {\n  background: linear-gradient(135deg, #12121f 0%, #0e0e18 100%);\n}\n\n[data-theme=\"dark\"] .mb-footer__brand::after {\n  background: linear-gradient(90deg, var(--purple-accent), transparent);\n}\n\n[data-theme=\"dark\"] .mb-footer__link:hover {\n  color: var(--purple-accent);\n}\n\n[data-theme=\"dark\"] .mb-footer__tag:hover {\n  background: rgba(var(--user-accent-rgb), 0.2);\n  border-color: rgba(var(--user-accent-rgb), 0.5);\n}\n\n[data-theme=\"dark\"] .mb-footer__btn {\n  background: var(--purple-gradient);\n  box-shadow: 0 4px 15px var(--purple-glow);\n}\n\n[data-theme=\"dark\"] .mb-footer__btn:hover {\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n[data-theme=\"dark\"] .mb-footer__badge ion-icon {\n  color: var(--purple-accent);\n}\n\n[data-theme=\"dark\"] .mb-footer__newsletter-content .newsletter-icon {\n  color: var(--purple-accent);\n}\n\n[data-theme=\"dark\"] .mb-footer__newsletter-input:focus {\n  background: rgba(255, 255, 255, 0.12);\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .mb-footer__newsletter-btn {\n  background: var(--purple-gradient) !important;\n  color: #fff !important;\n  box-shadow: 0 4px 15px var(--purple-glow);\n}\n\n[data-theme=\"dark\"] .mb-footer__newsletter-btn:hover {\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n[data-theme=\"dark\"] .mb-footer__post-icon {\n  background: rgba(var(--user-accent-rgb), 0.2);\n}\n\n[data-theme=\"dark\"] .mb-footer__post-icon ion-icon {\n  color: var(--purple-accent);\n}\n\n[data-theme=\"dark\"] .mb-footer__select:focus {\n  border-color: var(--purple-accent);\n}\n\n[data-theme=\"dark\"] .mb-footer__theme-slider {\n  background: rgba(255, 255, 255, 0.25);\n  border: 1px solid rgba(255, 255, 255, 0.4);\n}\n\n[data-theme=\"dark\"] .mb-footer__theme-toggle input:checked+.mb-footer__theme-slider {\n  background: var(--purple-accent);\n  border-color: var(--purple-accent);\n}\n\n@media (min-width: 575px) {\n  :root {\n    --fontSize-body-2: 2rem;\n  }\n\n  :is(.service, .about) .section-text {\n    max-width: 420px;\n    margin-inline: auto;\n  }\n\n  .contact-number {\n    --fontSize-body-1: 3rem;\n  }\n\n  .header {\n    top: 51px;\n  }\n\n  .header.active {\n    top: 0;\n  }\n\n  .header .btn {\n    display: block;\n    margin-inline-start: auto;\n  }\n\n  .navbar-list {\n    margin-inline: 30px;\n  }\n}\n\n@media (min-width: 992px) {\n  :root {\n    --section-space: 100px;\n  }\n\n}\n\n@media (min-width: 1025px) {\n  :root {\n    --fontSize-title-2: 2.5rem;\n  }\n\n  .container,\n  :is(.service, .event) .container {\n    max-width: 1600px;\n    width: 100%;\n    margin-inline: auto;\n  }\n\n\n  .nav-open-btn,\n  .header .overlay {\n    display: none;\n  }\n\n  \n  .navbar-scroll-content .logo,\n  .navbar-scroll-content .navbar-drawer-footer,\n  .nav-close-btn,\n  .navbar .close-btn {\n    display: none;\n  }\n\n  .header .container {\n    max-width: unset;\n    overflow: visible;\n  }\n\n  \n  .header {\n    overflow: visible;\n  }\n\n  .navbar,\n  .navbar.active,\n  .navbar-list {\n    all: unset;\n  }\n\n  .navbar,\n  .navbar.active {\n    margin-inline: auto 20px;\n    display: block;\n    position: static;\n    visibility: visible;\n    overflow: visible;\n  }\n\n  .navbar-scroll-content {\n    display: contents;\n    overflow: visible;\n  }\n\n  .navbar-scroll-content .logo {\n    display: none;\n  }\n\n  .navbar-list {\n    display: flex;\n    gap: 6px;\n    align-items: center;\n  }\n\n  .navbar-item {\n    border-block-start: none;\n  }\n\n  .navbar .separator {\n    display: none;\n  }\n\n  .navbar-link:is(:hover, :focus-visible, .active) .span {\n    transform: unset;\n  }\n\n  .navbar-link {\n    font-weight: var(--weight-bold);\n    letter-spacing: var(--letterSpacing-1);\n    font-size: clamp(11px, 1.1vw, 13px);\n    white-space: nowrap;\n    overflow: visible;\n  }\n\n  .navbar-list {\n    flex-wrap: nowrap;\n    overflow: visible;\n  }\n\n  .navbar-link::after {\n    display: block;\n  }\n\n  .navbar-link.active::after {\n    transform: scaleX(1);\n    opacity: 1;\n  }\n\n  .header .btn {\n    margin-inline-start: 0;\n  }\n}\n\n@media (min-width: 1025px) and (max-width: 1199px) {\n  .navbar-link {\n    padding: 6px 8px !important;\n    font-size: clamp(10px, 1vw, 12px) !important;\n  }\n\n  .navbar-list {\n    gap: 2px;\n  }\n\n  .navbar-link.active {\n    padding: 6px 8px !important;\n  }\n\n  .navbar-actions {\n    gap: 4px;\n  }\n\n  .navbar-action-btn {\n    width: 34px;\n    height: 34px;\n  }\n\n  .header .btn {\n    padding: 8px 14px;\n    font-size: 12px;\n  }\n}\n\n@media (min-width: 1400px) {\n  .navbar {\n    margin-inline: auto;\n  }\n}\n\n.navbar-list {\n  align-items: center;\n}\n\n.navbar-link::after {\n  display: none !important;\n}\n\n@media (min-width: 1025px) {\n  .navbar-link {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 8px 14px;\n    border-radius: 10px;\n    transition: background-color var(--nav-transition-fast), color var(--nav-transition-fast);\n    position: relative;\n  }\n}\n\n@media (min-width: 1025px) {\n  .navbar-link::before {\n    content: '';\n    position: absolute;\n    bottom: 2px;\n    left: 50%;\n    width: 0;\n    height: 2px;\n    background-color: var(--user-accent-grad-end);\n    transition: width var(--nav-transition), left var(--nav-transition);\n    border-radius: 2px;\n  }\n\n  .navbar-link:hover::before,\n  .navbar-link:focus-visible::before {\n    width: 70%;\n    left: 15%;\n  }\n\n  .navbar-link.active::before {\n    width: 80%;\n    left: 10%;\n  }\n}\n\n.navbar-link.active {\n  background-color: rgba(var(--user-accent-rgb), 0.15);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.4);\n  color: var(--user-accent-dark) !important;\n  font-weight: 700;\n}\n\n.navbar-link.active .span {\n  color: var(--user-accent-dark) !important;\n  transform: none !important;\n}\n\n.navbar-link:not(.active):hover {\n  background-color: rgba(255, 255, 255, 0.12);\n}\n\n.navbar-link:focus-visible {\n  outline: 2px solid var(--user-accent-grad-end);\n  outline-offset: 2px;\n}\n\n.navbar-link .separator {\n  display: none !important;\n}\n\n@media (max-width: 1024px) {\n\n  .navbar {\n    background: var(--user-accent-soft) !important;\n    border-right: 1px solid rgba(0, 0, 0, 0.08) !important;\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25) !important;\n    backdrop-filter: none !important;\n    -webkit-backdrop-filter: none !important;\n  }\n\n  [data-theme=\"dark\"] .navbar {\n    background: #2d2b3d !important;\n    border-right: 1px solid rgba(255, 255, 255, 0.1) !important;\n  }\n\n  .overlay.active {\n    background: rgba(0, 0, 0, 0.5) !important;\n    backdrop-filter: none !important;\n    -webkit-backdrop-filter: none !important;\n  }\n\n  body.nav-active .nav-open-btn,\n  body.nav-active .nav-toggler,\n  body.nav-active .menu-btn,\n  body.nav-active .hamburger {\n    opacity: 0 !important;\n    pointer-events: none !important;\n    visibility: hidden !important;\n  }\n\n  body.nav-active .header .nav-open-btn,\n  body.nav-active .header .nav-toggler {\n    display: none !important;\n  }\n\n  .mobile-nav-header {\n    display: flex;\n  }\n\n  .mobile-nav-crisis {\n    display: block;\n  }\n\n  .mobile-nav-divider {\n    display: block;\n  }\n\n  .navbar .close-btn {\n    display: none !important;\n  }\n\n  .navbar-scroll-content > .logo {\n    display: none !important;\n  }\n\n  .nav-link-icon {\n    display: flex;\n    font-size: 20px;\n    color: var(--user-accent);\n    flex-shrink: 0;\n    width: 20px;\n    height: 20px;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .navbar-link .separator {\n    display: none !important;\n  }\n\n  .navbar-link {\n    display: flex !important;\n    align-items: center;\n    gap: 14px;\n    padding: 14px 16px !important;\n    border-radius: 12px;\n    min-height: 48px;\n    font-size: 15px;\n    font-weight: 500;\n    background: rgba(0, 0, 0, 0.03) !important;\n    border: 1px solid rgba(0, 0, 0, 0.05) !important;\n    transition: all 0.2s ease;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .navbar-link:hover {\n    background: rgba(0, 0, 0, 0.06) !important;\n    border-color: rgba(0, 0, 0, 0.1) !important;\n    transform: translateX(2px);\n  }\n\n  .navbar-link:active {\n    transform: scale(0.98);\n  }\n\n  .navbar-link.active {\n    background: rgba(var(--user-accent-rgb), 0.12) !important;\n    border-color: rgba(var(--user-accent-rgb), 0.3) !important;\n    font-weight: 600;\n  }\n\n  .navbar-link.active .nav-link-icon {\n    color: var(--user-accent);\n  }\n\n  [data-theme=\"dark\"] .navbar-link {\n    background: rgba(255, 255, 255, 0.05) !important;\n    border: 1px solid rgba(255, 255, 255, 0.08) !important;\n  }\n\n  [data-theme=\"dark\"] .navbar-link:hover {\n    background: rgba(255, 255, 255, 0.09) !important;\n    border-color: rgba(255, 255, 255, 0.12) !important;\n  }\n\n  [data-theme=\"dark\"] .navbar-link.active {\n    background: rgba(var(--user-accent-rgb), 0.15) !important;\n    border-color: rgba(var(--user-accent-rgb), 0.3) !important;\n  }\n\n  [data-theme=\"dark\"] .nav-link-icon {\n    color: var(--user-accent);\n  }\n\n  .navbar-list {\n    gap: 6px;\n  }\n\n  .navbar-list .navbar-item {\n    margin-bottom: 0;\n  }\n\n  .mobile-auth-section {\n    display: flex !important;\n  }\n}\n\n@media (max-width:1024px) {\n\n  .navbar.active~.header .nav-open-btn,\n  .navbar.active~.header .nav-toggler {\n    display: none !important;\n  }\n}\n\n.nav-open-btn.is-hidden,\nbody.nav-active .nav-open-btn {\n  opacity: 0 !important;\n  pointer-events: none !important;\n  visibility: hidden !important;\n}\n\n@media (min-width: 1025px) {\n  .navbar-link.active .span {\n    color: #111 !important;\n  }\n\n  .navbar-link.active {\n    padding: 8px 14px !important;\n    border-radius: 10px !important;\n    border: 2px solid rgba(0, 0, 0, 0.45) !important;\n    background: rgba(255, 255, 255, 0.55) !important;\n  }\n}\n\n.mb-srOnly {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n}\n\n.mb-blogHero {\n  padding: 110px 0 34px;\n  background: #f4f4f4;\n}\n\n.mb-blogHero__inner {\n  display: grid;\n  grid-template-columns: 1.05fr 0.95fr;\n  gap: 28px;\n  align-items: start;\n}\n\n.mb-blogHero__badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 10px;\n  background: rgba(var(--user-accent-rgb), 0.18);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.35);\n  color: #111;\n  font-weight: 900;\n  font-size: 12px;\n  letter-spacing: .08em;\n  text-transform: uppercase;\n  padding: 10px 12px;\n  border-radius: 999px;\n  width: max-content;\n  margin-bottom: 14px;\n}\n\n.mb-blogHero__title {\n  font-size: clamp(34px, 4.2vw, 64px);\n  line-height: 0.98;\n  letter-spacing: -0.02em;\n  color: #111;\n  margin: 0 0 12px;\n  font-weight: 900;\n}\n\n.mb-blogHero__lead {\n  font-size: 15px;\n  line-height: 1.75;\n  color: #1f2937;\n  max-width: 70ch;\n  margin: 0 0 18px;\n}\n\n.mb-blogHero__search {\n  position: relative;\n  margin: 14px 0 14px;\n}\n\n.mb-blogHero__input {\n  width: 100%;\n  height: 54px;\n  border-radius: 12px;\n  border: 1px solid rgba(0, 0, 0, 0.12);\n  background: rgba(255, 255, 255, 0.85);\n  padding: 0 56px 0 14px;\n  font-size: 14px;\n  color: #111;\n}\n\n.mb-blogHero__searchBtn {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  height: 38px;\n  width: 42px;\n  border-radius: 10px;\n  border: 0;\n  background: #111;\n  color: #fff;\n  font-weight: 900;\n  cursor: pointer;\n  opacity: 0;\n  pointer-events: none;\n}\n\n.mb-blogHero__chips {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n  margin-top: 10px;\n}\n\n.mb-chip {\n  border: 1px solid rgba(0, 0, 0, 0.12);\n  background: rgba(255, 255, 255, 0.75);\n  color: #111;\n  border-radius: 999px;\n  padding: 9px 12px;\n  font-size: 12px;\n  font-weight: 900;\n  cursor: pointer;\n  transition: transform 140ms ease, background 140ms ease, border-color 140ms ease;\n}\n\n.mb-chip:hover {\n  transform: translateY(-1px);\n}\n\n.mb-chip.is-active {\n  background: #111;\n  color: #fff;\n  border-color: #111;\n}\n\n.mb-ticker {\n  background: rgba(14, 27, 42, 0.96);\n  border-radius: 16px;\n  padding: 12px;\n  display: grid;\n  gap: 10px;\n  margin-bottom: 14px;\n}\n\n.mb-ticker__item {\n  display: grid;\n  grid-template-columns: 28px 1fr;\n  gap: 10px;\n  align-items: center;\n  padding: 10px 10px;\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.06);\n}\n\n.mb-ticker__num {\n  width: 26px;\n  height: 26px;\n  border-radius: 999px;\n  background: rgba(var(--user-accent-rgb), 0.95);\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 900;\n  color: #111;\n}\n\n.mb-ticker__link {\n  color: rgba(255, 255, 255, 0.92);\n  font-weight: 800;\n  font-size: 13px;\n}\n\n.mb-ticker__link:hover {\n  text-decoration: underline;\n}\n\n.mb-featureCard {\n  background: rgba(255, 255, 255, 0.88);\n  border: 1px solid rgba(0, 0, 0, 0.10);\n  border-radius: 18px;\n  overflow: hidden;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.mb-featureCard:hover {\n  transform: translateY(-6px);\n  box-shadow: 0 28px 70px rgba(0, 0, 0, 0.14);\n}\n\n.mb-featureCard__imgWrap {\n  position: relative;\n  display: block;\n  aspect-ratio: 16 / 7;\n  overflow: hidden;\n}\n\n.mb-featureCard__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.5s ease;\n}\n\n.mb-featureCard:hover .mb-featureCard__img {\n  transform: scale(1.04);\n}\n\n.mb-featureCard__overlay {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(to top, rgba(0, 0, 0, 0.55), rgba(0, 0, 0, 0.10), transparent);\n}\n\n.mb-featureCard__content {\n  padding: 16px 16px 18px;\n}\n\n.mb-metaRow {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 10px;\n}\n\n.mb-pill {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 6px 12px;\n  border-radius: 999px;\n  background: rgba(43, 90, 166, 0.92);\n  color: #fff;\n  font-size: 11px;\n  font-weight: 600;\n  letter-spacing: 0.02em;\n  text-transform: uppercase;\n}\n\n.mb-new-badge {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  padding: 4px 10px;\n  border-radius: 4px;\n  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\n  color: #fff;\n  font-size: 10px;\n  font-weight: 700;\n  letter-spacing: 0.05em;\n  text-transform: uppercase;\n  box-shadow: 0 2px 8px rgba(238, 90, 36, 0.4);\n  z-index: 5;\n  animation: pulse-badge 2s ease-in-out infinite;\n}\n\n@keyframes pulse-badge {\n\n  0%,\n  100% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(1.05);\n  }\n}\n\n.mb-pill--news {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n}\n\n.mb-pill--story {\n  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);\n}\n\n.mb-pill--research {\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n}\n\n.mb-metaDot {\n  color: rgba(0, 0, 0, 0.30);\n  font-size: 10px;\n}\n\n.mb-metaText {\n  color: rgba(0, 0, 0, 0.60);\n  font-weight: 500;\n  font-size: 12px;\n  letter-spacing: 0.01em;\n}\n\n.mb-featureCard__title {\n  font-size: 22px;\n  line-height: 1.3;\n  margin: 0 0 12px;\n  font-weight: 700;\n}\n\n.mb-featureCard__title a {\n  color: #111;\n  transition: color 0.2s ease;\n}\n\n.mb-featureCard__title a:hover {\n  color: var(--user-accent-text);\n  text-decoration: none;\n}\n\n.mb-featureCard__desc {\n  font-size: 14px;\n  line-height: 1.7;\n  color: rgba(0, 0, 0, 0.72);\n  margin: 0 0 14px;\n}\n\n.mb-featureCard__subtext,\n.mb-postCard__subtext,\n.mb-listPost__subtext {\n  font-size: 13px;\n  line-height: 1.6;\n  color: rgba(0, 0, 0, 0.50);\n  margin: 10px 0 12px;\n  font-style: normal;\n  font-weight: 400;\n}\n\n.mb-postHint {\n  font-size: 13px;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.55);\n  margin: 8px 0;\n}\n\n.mb-postHint strong {\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.75);\n}\n\n.mb-featureCard__actions {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.mb-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 40px;\n  padding: 0 18px;\n  border-radius: 10px;\n  background: var(--user-accent);\n  color: #111;\n  font-weight: 600;\n  font-size: 13px;\n  border: 0;\n  cursor: pointer;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.mb-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.35);\n}\n\n.mb-btn--ghost {\n  background: transparent;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  color: #111;\n}\n\n.mb-blog {\n  padding: 26px 24px 80px;\n  background: #f4f4f4;\n}\n\n.mb-blog>.container,\n.mb-blogGrid {\n  max-width: 1600px;\n  width: 100%;\n  margin-inline: auto;\n  display: grid;\n  grid-template-columns: 1.65fr 0.95fr;\n  gap: 26px;\n  align-items: start;\n}\n\n@media (min-width: 1800px) {\n\n  .mb-blog>.container,\n  .mb-blogGrid {\n    max-width: 1700px;\n  }\n}\n\n@media (max-width: 1200px) {\n  .mb-blogGrid {\n    grid-template-columns: 1.5fr 1fr;\n    gap: 20px;\n  }\n}\n\n@media (max-width: 768px) {\n  .mb-blog {\n    padding: 20px 16px 60px;\n  }\n\n  .mb-resultsBar {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 12px;\n  }\n\n  .mb-resultsBar__reset {\n    width: 100%;\n  }\n}\n\n.mb-resultsBar {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  gap: 16px;\n  padding: 12px 16px;\n  background: rgba(255, 255, 255, 0.95);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 12px;\n  margin-bottom: 16px;\n}\n\n.mb-resultsBar__left {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 16px;\n  flex-wrap: wrap;\n}\n\n.mb-resultsBar__count {\n  font-size: 13px;\n  font-weight: 600;\n  color: #333;\n}\n\n.mb-resultsBar__active {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.55);\n  padding: 4px 10px;\n  background: rgba(43, 90, 166, 0.1);\n  border-radius: 6px;\n}\n\n.mb-resultsBar__reset {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 36px;\n  padding: 0 16px;\n  border-radius: 8px;\n  background: #e74c3c;\n  color: #fff;\n  font-weight: 700;\n  font-size: 12px;\n  border: 0;\n  cursor: pointer;\n  transition: background 150ms ease, transform 150ms ease;\n}\n\n.mb-resultsBar__reset:hover {\n  background: #c0392b;\n  transform: translateY(-1px);\n}\n\n.mb-emptyState {\n  display: none;\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.9);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 12px;\n  text-align: center;\n  color: #555;\n  margin-bottom: 16px;\n}\n\n.mb-emptyState.is-visible {\n  display: block;\n}\n\n.mb-sectionHead {\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n  gap: 12px;\n  padding: 16px 0 10px;\n  border-top: 2px solid rgba(242, 194, 0, 0.9);\n  margin-top: 6px;\n}\n\n.mb-sectionHead__title {\n  font-weight: 700;\n  font-size: 14px;\n  color: #111;\n  letter-spacing: 0.04em;\n  text-transform: uppercase;\n  margin: 0;\n}\n\n.mb-sectionHead__more {\n  font-weight: 600;\n  font-size: 13px;\n  color: rgba(43, 90, 166, 0.95);\n  transition: color 0.2s ease;\n}\n\n.mb-sectionHead__more:hover {\n  color: #1d4a8a;\n  text-decoration: none;\n}\n\n.mb-2up {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n.mb-3up {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n.mb-3up .mb-postCard__imgWrap {\n  aspect-ratio: 16/9;\n}\n\n.mb-3up .mb-postCard__body {\n  padding: 12px 14px 14px;\n}\n\n.mb-3up .mb-postCard__title {\n  font-size: 0.95rem;\n  line-height: 1.35;\n  margin-bottom: 6px;\n}\n\n.mb-3up .mb-postCard__meta {\n  font-size: 0.75rem;\n  margin-bottom: 6px;\n}\n\n.mb-3up .mb-postCard__excerpt {\n  font-size: 0.8rem;\n  line-height: 1.4;\n  margin-bottom: 8px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n@media (max-width: 900px) {\n  .mb-3up {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (max-width: 600px) {\n  .mb-3up {\n    grid-template-columns: 1fr;\n  }\n}\n\n.mb-postCard {\n  background: #ffffff;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: \n    0 2px 8px rgba(0, 0, 0, 0.04),\n    0 8px 24px rgba(0, 0, 0, 0.06);\n  transition: \n    transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), \n    box-shadow 0.35s cubic-bezier(0.4, 0, 0.2, 1), \n    border-color 0.35s ease;\n  position: relative;\n}\n\n.mb-postCard::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  background: var(--accent-color, #c9a227);\n  transform: scaleY(0);\n  transform-origin: bottom;\n  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 0;\n  border-radius: 16px 0 0 16px;\n}\n\n.mb-postCard:hover {\n  transform: translateY(-8px);\n  box-shadow: \n    0 4px 12px rgba(0, 0, 0, 0.08),\n    0 16px 48px rgba(0, 0, 0, 0.12),\n    0 24px 64px rgba(0, 0, 0, 0.08);\n  border-color: rgba(0, 0, 0, 0.12);\n}\n\n.mb-postCard:hover::before {\n  transform: scaleY(1);\n}\n\n.mb-postCard__imgWrap {\n  position: relative;\n  display: block;\n  aspect-ratio: 16/10;\n  overflow: hidden;\n}\n\n.mb-postCard__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.mb-postCard:hover .mb-postCard__img {\n  transform: scale(1.08);\n}\n\n.mb-postCard__pill {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 6px 12px;\n  border-radius: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\n.mb-postCard:hover .mb-postCard__pill {\n  transform: scale(1.05);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n\n.mb-postCard__body {\n  padding: 20px;\n  position: relative;\n}\n\n.mb-postCard__title {\n  margin: 0 0 12px;\n  font-size: 17px;\n  line-height: 1.45;\n  font-weight: 700;\n}\n\n.mb-postCard__title a {\n  color: #1a1a1a;\n  transition: color 0.25s ease;\n  text-decoration: none;\n}\n\n.mb-postCard__title a:hover {\n  color: var(--accent-color, #c9a227);\n  text-decoration: none;\n}\n\n.mb-postCard__meta {\n  font-size: 12px;\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.5);\n  margin-bottom: 12px;\n  letter-spacing: 0.02em;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.mb-postCard__excerpt {\n  font-size: 14px;\n  line-height: 1.7;\n  color: rgba(0, 0, 0, 0.6);\n  margin: 0;\n}\n\n.mb-postCard__bookmark {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  width: 36px;\n  height: 36px;\n  background: rgba(255, 255, 255, 0.9);\n  border: none;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  opacity: 0;\n  transform: translateY(-8px);\n  transition: \n    opacity 0.25s ease, \n    transform 0.25s ease,\n    background 0.25s ease;\n  z-index: 3;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n\n.mb-postCard:hover .mb-postCard__bookmark {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.mb-postCard__bookmark:hover {\n  background: var(--accent-color, #c9a227);\n  transform: scale(1.1);\n}\n\n.mb-postCard__bookmark svg {\n  width: 18px;\n  height: 18px;\n  fill: none;\n  stroke: #333;\n  stroke-width: 2;\n  transition: stroke 0.25s ease, fill 0.25s ease;\n}\n\n.mb-postCard__bookmark:hover svg {\n  stroke: #fff;\n}\n\n.mb-postCard__bookmark.is-saved svg {\n  fill: var(--accent-color, #c9a227);\n  stroke: var(--accent-color, #c9a227);\n}\n\n.mb-2up--mini {\n  grid-template-columns: 1fr 1fr;\n}\n\n.mb-miniCard {\n  background: #ffffff;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 16px;\n  display: grid;\n  gap: 0;\n  transition: \n    transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), \n    box-shadow 0.35s cubic-bezier(0.4, 0, 0.2, 1), \n    border-color 0.35s ease;\n  overflow: hidden;\n  position: relative;\n  box-shadow: \n    0 2px 8px rgba(0, 0, 0, 0.04),\n    0 8px 24px rgba(0, 0, 0, 0.06);\n}\n\n.mb-miniCard::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  background: var(--accent-color, #c9a227);\n  transform: scaleY(0);\n  transform-origin: bottom;\n  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 0;\n  border-radius: 16px 0 0 16px;\n}\n\n.mb-miniCard:hover {\n  transform: translateY(-6px);\n  box-shadow: \n    0 4px 12px rgba(0, 0, 0, 0.08),\n    0 16px 40px rgba(0, 0, 0, 0.12);\n  border-color: rgba(0, 0, 0, 0.12);\n}\n\n.mb-miniCard:hover::before {\n  transform: scaleY(1);\n}\n\n.mb-miniCard__imgWrap {\n  position: relative;\n  overflow: hidden;\n}\n\n.mb-miniCard__img {\n  width: 100%;\n  height: 140px;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.mb-miniCard:hover .mb-miniCard__img {\n  transform: scale(1.08);\n}\n\n.mb-miniCard__content {\n  padding: 16px;\n  display: grid;\n  gap: 10px;\n  position: relative;\n}\n\n.mb-miniCard__title {\n  margin: 0;\n  font-size: 15px;\n  font-weight: 700;\n  line-height: 1.45;\n}\n\n.mb-miniCard__title a {\n  color: #1a1a1a;\n  transition: color 0.25s ease;\n  text-decoration: none;\n}\n\n.mb-miniCard__title a:hover {\n  color: var(--accent-color, #c9a227);\n  text-decoration: none;\n}\n\n.mb-miniCard__meta {\n  font-size: 12px;\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.5);\n  letter-spacing: 0.02em;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex-wrap: wrap;\n}\n\n.mb-miniCard__pill {\n  background: var(--accent-color, #c9a227);\n  color: #111;\n  width: max-content;\n  font-weight: 700;\n  font-size: 10px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 5px 10px;\n  border-radius: 16px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\n.mb-miniCard:hover .mb-miniCard__pill {\n  transform: scale(1.05);\n}\n\n.mb-miniCard__bookmark {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  width: 32px;\n  height: 32px;\n  background: rgba(255, 255, 255, 0.9);\n  border: none;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  opacity: 0;\n  transform: translateY(-6px);\n  transition: \n    opacity 0.25s ease, \n    transform 0.25s ease,\n    background 0.25s ease;\n  z-index: 3;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);\n}\n\n.mb-miniCard:hover .mb-miniCard__bookmark {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.mb-miniCard__bookmark:hover {\n  background: var(--accent-color, #c9a227);\n  transform: scale(1.1);\n}\n\n.mb-miniCard__bookmark svg {\n  width: 16px;\n  height: 16px;\n  fill: none;\n  stroke: #333;\n  stroke-width: 2;\n  transition: stroke 0.25s ease;\n}\n\n.mb-miniCard__bookmark:hover svg {\n  stroke: #fff;\n}\n\n.mb-listStack {\n  display: grid;\n  gap: 14px;\n  margin-top: 8px;\n}\n\n.mb-listPost {\n  background: rgba(255, 255, 255, 0.90);\n  border: 1px solid rgba(0, 0, 0, 0.10);\n  border-radius: 14px;\n  overflow: hidden;\n  display: grid;\n  grid-template-columns: 220px 1fr;\n  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.06);\n  transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;\n}\n\n.mb-listPost:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);\n}\n\n.mb-listPost__imgWrap {\n  display: block;\n  height: 100%;\n  overflow: hidden;\n}\n\n.mb-listPost__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.4s ease;\n}\n\n.mb-listPost:hover .mb-listPost__img {\n  transform: scale(1.06);\n}\n\n.mb-listPost__body {\n  padding: 18px 20px;\n}\n\n.mb-listPost__title {\n  margin: 6px 0 10px;\n  font-size: 18px;\n  line-height: 1.4;\n  font-weight: 700;\n}\n\n.mb-listPost__title a {\n  color: #111;\n  transition: color 0.2s ease;\n}\n\n.mb-listPost__title a:hover {\n  color: var(--user-accent-text);\n  text-decoration: none;\n}\n\n.mb-listPost__excerpt {\n  margin: 0 0 12px;\n  font-size: 14px;\n  line-height: 1.65;\n  color: rgba(0, 0, 0, 0.65);\n}\n\n.mb-linkArrow {\n  font-weight: 700;\n  font-size: 13px;\n  color: var(--accent-color, #c9a227);\n  transition: color 0.25s ease, transform 0.25s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.mb-linkArrow:hover {\n  color: #a88820;\n  text-decoration: none;\n  transform: translateX(4px);\n}\n\n.mb-linkArrow::after {\n  content: 'â†’';\n  transition: transform 0.25s ease;\n}\n\n.mb-linkArrow:hover::after {\n  transform: translateX(3px);\n}\n\n.mb-3grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 20px;\n  margin-top: 16px;\n}\n\n.mb-compactCard {\n  background: #ffffff;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 18px;\n  overflow: hidden;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06), 0 1px 3px rgba(0, 0, 0, 0.04);\n  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.35s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n\n.mb-compactCard::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  background: linear-gradient(90deg, var(--accent-color, var(--user-accent)), transparent);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.mb-compactCard:hover {\n  transform: translateY(-8px);\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12), 0 4px 12px rgba(0, 0, 0, 0.06);\n  border-color: rgba(0, 0, 0, 0.14);\n}\n\n.mb-compactCard:hover::after {\n  opacity: 1;\n}\n\n.mb-compactCard__imgWrap {\n  position: relative;\n  display: block;\n  aspect-ratio: 16/10;\n  overflow: hidden;\n}\n\n.mb-compactCard__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), filter 0.3s ease;\n}\n\n.mb-compactCard:hover .mb-compactCard__img {\n  transform: scale(1.08);\n}\n\n.mb-compactCard__pill {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  padding: 5px 12px;\n  border-radius: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n\n.mb-compactCard__title {\n  margin: 16px 16px 8px;\n  font-size: 16px;\n  line-height: 1.45;\n  font-weight: 700;\n}\n\n.mb-compactCard__title a {\n  color: #1a1a1a;\n  transition: color 0.25s ease;\n  text-decoration: none;\n}\n\n.mb-compactCard__title a:hover {\n  color: var(--accent-color, var(--user-accent));\n  text-decoration: none;\n}\n\n.mb-compactCard__meta {\n  margin: 0 16px 8px;\n  font-size: 12px;\n  font-weight: 600;\n  color: rgba(0, 0, 0, 0.5);\n  letter-spacing: 0.02em;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  flex-wrap: wrap;\n}\n\n.mb-compactCard .mb-postHint {\n  margin: 0 16px 16px;\n  font-size: 13px;\n  line-height: 1.5;\n  color: #555;\n  flex: 1;\n}\n\n.mb-compactCard .mb-tts-badge-overlay {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  background: rgba(0, 0, 0, 0.6);\n  color: #fff;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: grid;\n  place-items: center;\n  font-size: 14px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n\n.mb-loadMore {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n\n.mb-loadMore__btn {\n  height: 44px;\n  min-width: 160px;\n  padding: 0 18px;\n  border-radius: 10px;\n  border: 1px solid rgba(0, 0, 0, 0.18);\n  background: rgba(255, 255, 255, 0.80);\n  color: #111;\n  font-weight: 900;\n  cursor: pointer;\n}\n\n.mb-loadMore__btn:hover {\n  transform: translateY(-1px);\n}\n\n.mb-sidebar {\n  position: sticky;\n  top: 90px;\n  display: grid;\n  gap: 14px;\n}\n\n.mb-widget {\n  background: rgba(255, 255, 255, 0.88);\n  border: 1px solid rgba(0, 0, 0, 0.10);\n  border-radius: 14px;\n  padding: 14px;\n  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.06);\n}\n\n.mb-widget__title {\n  font-size: 13px;\n  font-weight: 900;\n  letter-spacing: .08em;\n  text-transform: uppercase;\n  color: #111;\n  margin-bottom: 12px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.10);\n}\n\n.mb-sideSearch__input {\n  width: 100%;\n  height: 46px;\n  border-radius: 12px;\n  border: 1px solid rgba(0, 0, 0, 0.12);\n  background: rgba(255, 255, 255, 0.92);\n  padding: 0 12px;\n  font-size: 14px;\n  color: #111;\n}\n\n.mb-trending {\n  display: grid;\n  gap: 10px;\n}\n\n.mb-trending__item {\n  display: grid;\n  grid-template-columns: 54px 1fr;\n  gap: 10px;\n  align-items: center;\n  border-radius: 12px;\n  padding: 8px;\n  background: rgba(0, 0, 0, 0.03);\n}\n\n.mb-trending__thumb {\n  width: 54px;\n  height: 54px;\n  border-radius: 10px;\n  object-fit: cover;\n  display: block;\n}\n\n.mb-trending__kicker {\n  font-size: 11px;\n  font-weight: 900;\n  color: rgba(43, 90, 166, 0.95);\n}\n\n.mb-trending__title {\n  font-size: 13px;\n  font-weight: 900;\n  color: #111;\n  line-height: 1.2;\n}\n\n.mb-trending__item:hover {\n  background: rgba(0, 0, 0, 0.06);\n}\n\n.mb-cats {\n  display: grid;\n  gap: 8px;\n}\n\n.mb-catBtn {\n  text-align: left;\n  border: 0;\n  background: rgba(0, 0, 0, 0.03);\n  padding: 10px 10px;\n  border-radius: 12px;\n  font-weight: 900;\n  color: #111;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.mb-catBtn:hover {\n  background: rgba(0, 0, 0, 0.06);\n}\n\n.mb-tags {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n\n.mb-tag {\n  border: 1px solid rgba(0, 0, 0, 0.14);\n  background: rgba(255, 255, 255, 0.78);\n  border-radius: 999px;\n  padding: 8px 10px;\n  font-size: 12px;\n  font-weight: 900;\n  color: #111;\n  cursor: pointer;\n}\n\n.mb-tag:hover {\n  transform: translateY(-1px);\n}\n\n.mb-actions {\n  display: grid;\n  gap: 10px;\n}\n\n.mb-actionBtn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 44px;\n  border-radius: 12px;\n  background: #111;\n  color: #fff;\n  font-weight: 900;\n  font-size: 13px;\n}\n\n.mb-newsletter {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.mb-newsletter .mb-actionBtn {\n  width: 100%;\n  text-align: center;\n}\n\n.mb-actionBtn--ghost {\n  background: transparent;\n  color: #111;\n  border: 1px solid rgba(0, 0, 0, 0.18);\n}\n\n.mb-actionBtn:hover {\n  transform: translateY(-1px);\n}\n\n.mb-toast {\n  position: fixed;\n  left: 50%;\n  bottom: 18px;\n  transform: translateX(-50%);\n  background: rgba(17, 17, 17, 0.92);\n  color: #fff;\n  padding: 10px 14px;\n  border-radius: 999px;\n  font-weight: 900;\n  font-size: 13px;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 160ms ease, transform 160ms ease;\n  z-index: 9999;\n}\n\n.mb-toast.is-show {\n  opacity: 1;\n  transform: translateX(-50%) translateY(-2px);\n}\n\n@media (max-width: 980px) {\n  .mb-blogHero__inner {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-blogGrid {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-sidebar {\n    position: static;\n  }\n\n  .mb-3grid {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-2up {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-listPost {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-listPost__imgWrap {\n    aspect-ratio: 16/9;\n  }\n}\n\n:root {\n  \n  --bg-primary: #faf9f7;\n  --bg-secondary: #f5f4f2;\n  --bg-tertiary: #eeede9;\n  --bg-card: #ffffff;\n  --bg-surface: #f8f7f5;\n  --bg-input: #ffffff;\n  --bg-hover: rgba(0, 0, 0, 0.03);\n\n  \n  --text-primary: #1a1a2e;\n  --text-secondary: #4a4a68;\n  --text-muted: #6c757d;\n  --text-inverse: #ffffff;\n\n  \n  --border-color: rgba(0, 0, 0, 0.12);\n  --border-light: rgba(0, 0, 0, 0.06);\n  --shadow-color: rgba(0, 0, 0, 0.1);\n  --shadow-strong: rgba(0, 0, 0, 0.15);\n\n  \n  --accent-color: var(--user-accent);\n  --accent-hover: #a08550;\n  --accent-light: rgba(var(--user-accent-rgb), 0.15);\n\n  \n  --success-color: #28a745;\n  --warning-color: #ffc107;\n  --error-color: #dc3545;\n  --info-color: #17a2b8;\n\n  \n  --footer-bg: var(--user-accent-light);\n  --footer-text: rgba(0, 0, 0, 0.7);\n  --footer-heading: #ffffff;\n}\n\n[data-theme=\"dark\"] {\n  \n  --bg-primary: #121220;\n  --bg-secondary: #1a1a2e;\n  --bg-tertiary: #252542;\n  --bg-card: #1e1e32;\n  --bg-surface: #16162a;\n  --bg-input: #1e1e32;\n  --bg-hover: rgba(255, 255, 255, 0.05);\n\n  \n  --text-primary: #f0f0f5;\n  --text-secondary: #b8b8c8;\n  --text-muted: #8888a0;\n  --text-inverse: #1a1a2e;\n\n  \n  --border-color: rgba(255, 255, 255, 0.12);\n  --border-light: rgba(255, 255, 255, 0.06);\n  --shadow-color: rgba(0, 0, 0, 0.4);\n  --shadow-strong: rgba(0, 0, 0, 0.5);\n\n  \n  --accent-color: var(--user-accent);\n  --accent-hover: var(--user-accent-hover);\n  --accent-light: rgba(var(--user-accent-rgb), 0.25);\n\n  \n  --footer-bg: #1a1a2e;\n  --footer-text: #d0d0d0;\n  --footer-heading: #f0f0f5;\n}\n\n[data-theme=\"dark\"] .intro-title {\n  color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] {\n  --bg-primary: #ffffff;\n  --bg-secondary: #f0f0f0;\n  --bg-tertiary: #e0e0e0;\n  --bg-card: #ffffff;\n  --text-primary: #000000;\n  --text-secondary: #1a1a1a;\n  --text-muted: #333333;\n  --border-color: #000000;\n  --accent-color: var(--user-accent);\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] {\n  --bg-primary: #000000;\n  --bg-secondary: #0a0a0a;\n  --bg-tertiary: #141414;\n  --bg-card: #0a0a0a;\n  --text-primary: #ffffff;\n  --text-secondary: #e0e0e0;\n  --text-muted: #c0c0c0;\n  --border-color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] {\n  --hc-text: #000000;\n  --hc-bg: #ffffff;\n  --hc-border: #000000;\n  --hc-link: #0000EE;\n  --hc-focus: #ffff00;\n}\n\n[data-high-contrast=\"true\"] main h1,\n[data-high-contrast=\"true\"] main h2,\n[data-high-contrast=\"true\"] main h3,\n[data-high-contrast=\"true\"] main h4,\n[data-high-contrast=\"true\"] main h5,\n[data-high-contrast=\"true\"] main h6,\n[data-high-contrast=\"true\"] main p,\n[data-high-contrast=\"true\"] main li,\n[data-high-contrast=\"true\"] main td,\n[data-high-contrast=\"true\"] main th,\n[data-high-contrast=\"true\"] main label,\n[data-high-contrast=\"true\"] main span:not(.article-hero__content span),\n[data-high-contrast=\"true\"] section h1:not(.article-hero__content h1),\n[data-high-contrast=\"true\"] section h2:not(.article-hero__content h2),\n[data-high-contrast=\"true\"] section h3,\n[data-high-contrast=\"true\"] section p:not(.article-hero__content p),\n[data-high-contrast=\"true\"] section li,\n[data-high-contrast=\"true\"] article h1,\n[data-high-contrast=\"true\"] article h2,\n[data-high-contrast=\"true\"] article h3,\n[data-high-contrast=\"true\"] article p,\n[data-high-contrast=\"true\"] article li,\n[data-high-contrast=\"true\"] .container h1:not(.article-hero__content h1),\n[data-high-contrast=\"true\"] .container h2:not(.article-hero__content h2),\n[data-high-contrast=\"true\"] .container h3,\n[data-high-contrast=\"true\"] .container p:not(.article-hero__content p),\n[data-high-contrast=\"true\"] .container li,\n[data-high-contrast=\"true\"] .mb-footer__text,\n[data-high-contrast=\"true\"] .mb-footer__link {\n  color: var(--hc-text) !important;\n}\n\n[data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h1,\n[data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h2,\n[data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h3,\n[data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) p,\n[data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) li,\n[data-high-contrast=\"true\"] dialog h1,\n[data-high-contrast=\"true\"] dialog h2,\n[data-high-contrast=\"true\"] dialog h3,\n[data-high-contrast=\"true\"] dialog p,\n[data-high-contrast=\"true\"] [role=\"dialog\"] h1,\n[data-high-contrast=\"true\"] [role=\"dialog\"] h2,\n[data-high-contrast=\"true\"] [role=\"dialog\"] h3,\n[data-high-contrast=\"true\"] [role=\"dialog\"] p {\n  color: var(--hc-text) !important;\n}\n\n[data-high-contrast=\"true\"] .article-hero__content h1,\n[data-high-contrast=\"true\"] .article-hero__content p,\n[data-high-contrast=\"true\"] .article-hero__content span,\n[data-high-contrast=\"true\"] .hero-text,\n[data-high-contrast=\"true\"] .hero h1,\n[data-high-contrast=\"true\"] .hero p {\n  color: #ffffff !important;\n  text-shadow: 0 1px 4px rgba(0,0,0,0.8) !important;\n}\n\n[data-high-contrast=\"true\"] .hero,\n[data-high-contrast=\"true\"] .article-hero {\n  background-color: #1a1a1a !important;\n}\n\n[data-high-contrast=\"true\"] .intro-stat-value,\n[data-high-contrast=\"true\"] .intro-stat-label,\n[data-high-contrast=\"true\"] .intro-title,\n[data-high-contrast=\"true\"] .intro-text,\n[data-high-contrast=\"true\"] .section-title,\n[data-high-contrast=\"true\"] .section-text {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .intro-stat {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mood-option {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mood-option.selected,\n[data-high-contrast=\"true\"] .mood-option:hover {\n  border-color: #000000 !important;\n  background: #ffff00 !important;\n  outline: 3px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mood-option span,\n[data-high-contrast=\"true\"] .mood-label {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .checkin-title,\n[data-high-contrast=\"true\"] .checkin-subtitle,\n[data-high-contrast=\"true\"] .greeting-text,\n[data-high-contrast=\"true\"] .greeting-time {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mb-card,\n[data-high-contrast=\"true\"] .mb-card__content,\n[data-high-contrast=\"true\"] .mb-tcard,\n[data-high-contrast=\"true\"] .mb-actionbox,\n[data-high-contrast=\"true\"] .event-card,\n[data-high-contrast=\"true\"] .service-card {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n  box-shadow: none !important;\n}\n\n[data-high-contrast=\"true\"] .mb-card__title,\n[data-high-contrast=\"true\"] .mb-card__text,\n[data-high-contrast=\"true\"] .mb-card__kicker,\n[data-high-contrast=\"true\"] .mb-tcard__name,\n[data-high-contrast=\"true\"] .mb-tcard__role,\n[data-high-contrast=\"true\"] .mb-tcard__text,\n[data-high-contrast=\"true\"] .mb-actionbox__title,\n[data-high-contrast=\"true\"] .mb-actionbox__text,\n[data-high-contrast=\"true\"] .mb-actionbox__kicker {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mb-card__btn,\n[data-high-contrast=\"true\"] .btn-primary,\n[data-high-contrast=\"true\"] .cta-btn,\n[data-high-contrast=\"true\"] .hero-btn {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .mb-card__btn:hover,\n[data-high-contrast=\"true\"] .btn-primary:hover,\n[data-high-contrast=\"true\"] .cta-btn:hover,\n[data-high-contrast=\"true\"] .hero-btn:hover {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .btn-outline,\n[data-high-contrast=\"true\"] .btn-secondary {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .btn-outline:hover,\n[data-high-contrast=\"true\"] .btn-secondary:hover {\n  background: #000000 !important;\n  color: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .tag,\n[data-high-contrast=\"true\"] .badge,\n[data-high-contrast=\"true\"] .chip,\n[data-high-contrast=\"true\"] .popular-tag,\n[data-high-contrast=\"true\"] .mb-footer__tag {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .back-top-btn,\n[data-high-contrast=\"true\"] .scroll-top-btn {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .quote-banner,\n[data-high-contrast=\"true\"] .mb-testimonials {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .quote-banner *,\n[data-high-contrast=\"true\"] .mb-testimonials * {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .wave-separator,\n[data-high-contrast=\"true\"] .mb-footer__wave {\n  display: none !important;\n}\n\n[data-high-contrast=\"true\"] .preload {\n  background: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] section {\n  background-color: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .about,\n[data-high-contrast=\"true\"] .crisis-section {\n  background-color: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .about *,\n[data-high-contrast=\"true\"] .crisis-section * {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .notification-badge,\n[data-high-contrast=\"true\"] .unread-count {\n  background: #cc0000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .rl-filterBtn,\n[data-high-contrast=\"true\"] .rl-filterTag {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .rl-filterBtn.active,\n[data-high-contrast=\"true\"] .rl-filterTag.active {\n  background: #000000 !important;\n  color: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .tab-btn,\n[data-high-contrast=\"true\"] .category-tab {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .tab-btn.active,\n[data-high-contrast=\"true\"] .category-tab.active {\n  background: #000000 !important;\n  color: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] .checkin-section,\n[data-high-contrast=\"true\"] .mood-checkin {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .community-post,\n[data-high-contrast=\"true\"] .post-card {\n  background: #ffffff !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .community-post *,\n[data-high-contrast=\"true\"] .post-card * {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .article-content a,\n[data-high-contrast=\"true\"] .mb-footer a,\n[data-high-contrast=\"true\"] nav a:not(.article-hero__content a) {\n  color: var(--hc-link) !important;\n  text-decoration: underline !important;\n}\n\n[data-high-contrast=\"true\"] .article-content a:hover,\n[data-high-contrast=\"true\"] .article-content a:focus,\n[data-high-contrast=\"true\"] nav a:hover,\n[data-high-contrast=\"true\"] nav a:focus {\n  background-color: var(--hc-focus) !important;\n  color: var(--hc-text) !important;\n  outline: 2px solid var(--hc-text) !important;\n}\n\n[data-high-contrast=\"true\"] .header,\n[data-high-contrast=\"true\"] .topbar,\n[data-high-contrast=\"true\"] header {\n  background-color: #ffffff !important;\n  border-bottom: 3px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .header *,\n[data-high-contrast=\"true\"] .topbar * {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .navbar-link,\n[data-high-contrast=\"true\"] .nav-link {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .navbar-link:hover,\n[data-high-contrast=\"true\"] .navbar-link:focus,\n[data-high-contrast=\"true\"] .nav-link:hover,\n[data-high-contrast=\"true\"] .nav-link:focus {\n  background-color: #ffff00 !important;\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .navbar {\n  background-color: #ffffff !important;\n  border-right: 3px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .navbar *,\n[data-high-contrast=\"true\"] .navbar .navbar-link .span,\n[data-high-contrast=\"true\"] .navbar .close-btn {\n  color: #000000 !important;\n  border-color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] .navbar-item {\n  border-color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] button,\n[data-high-contrast=\"true\"] .btn,\n[data-high-contrast=\"true\"] [type=\"button\"],\n[data-high-contrast=\"true\"] [type=\"submit\"],\n[data-high-contrast=\"true\"] .navbar-action-btn {\n  background-color: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] button:hover,\n[data-high-contrast=\"true\"] button:focus,\n[data-high-contrast=\"true\"] .btn:hover,\n[data-high-contrast=\"true\"] .btn:focus,\n[data-high-contrast=\"true\"] .navbar-action-btn:hover,\n[data-high-contrast=\"true\"] .navbar-action-btn:focus {\n  background-color: #000000 !important;\n  color: #ffffff !important;\n}\n\n[data-high-contrast=\"true\"] input,\n[data-high-contrast=\"true\"] textarea,\n[data-high-contrast=\"true\"] select {\n  background-color: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] input::placeholder,\n[data-high-contrast=\"true\"] textarea::placeholder {\n  color: #333333 !important;\n}\n\n[data-high-contrast=\"true\"] input:focus,\n[data-high-contrast=\"true\"] textarea:focus,\n[data-high-contrast=\"true\"] select:focus {\n  outline: 3px solid #000000 !important;\n  outline-offset: 2px !important;\n}\n\n[data-high-contrast=\"true\"] .card,\n[data-high-contrast=\"true\"] .mb-postCard,\n[data-high-contrast=\"true\"] .mb-listPost,\n[data-high-contrast=\"true\"] .rl-card,\n[data-high-contrast=\"true\"] .resource-card {\n  background-color: #ffffff !important;\n  border: 2px solid #000000 !important;\n  box-shadow: none !important;\n}\n\n[data-high-contrast=\"true\"] .modal,\n[data-high-contrast=\"true\"] .dropdown,\n[data-high-contrast=\"true\"] .settings-dropdown,\n[data-high-contrast=\"true\"] [class*=\"modal\"],\n[data-high-contrast=\"true\"] [class*=\"dropdown\"] {\n  background-color: #ffffff !important;\n  border: 2px solid #000000 !important;\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] footer,\n[data-high-contrast=\"true\"] .mb-footer,\n[data-high-contrast=\"true\"] .mb-footer__top,\n[data-high-contrast=\"true\"] .mb-footer__bottom {\n  background-color: #ffffff !important;\n  border-top: 3px solid #000000 !important;\n}\n\n[data-high-contrast=\"true\"] footer *,\n[data-high-contrast=\"true\"] .mb-footer * {\n  color: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] ion-icon,\n[data-high-contrast=\"true\"] svg,\n[data-high-contrast=\"true\"] .icon,\n[data-high-contrast=\"true\"] i[class*=\"fa\"] {\n  color: #000000 !important;\n  fill: #000000 !important;\n}\n\n[data-high-contrast=\"true\"] *:focus {\n  outline: 3px solid #000000 !important;\n  outline-offset: 2px !important;\n}\n\n[data-high-contrast=\"true\"] *:focus-visible {\n  outline: 3px solid #000000 !important;\n  outline-offset: 2px !important;\n  box-shadow: 0 0 0 4px #ffff00 !important;\n}\n\n[data-high-contrast=\"true\"] .error,\n[data-high-contrast=\"true\"] .error-message,\n[data-high-contrast=\"true\"] [class*=\"error\"] {\n  color: #cc0000 !important;\n  font-weight: bold !important;\n}\n\n[data-high-contrast=\"true\"] .success,\n[data-high-contrast=\"true\"] .success-message,\n[data-high-contrast=\"true\"] [class*=\"success\"] {\n  color: #006600 !important;\n  font-weight: bold !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] {\n  --hc-text: #ffffff;\n  --hc-bg: #000000;\n  --hc-border: #ffffff;\n  --hc-link: #00ffff;\n  --hc-focus: #ffff00;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h1,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h2,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h4,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h5,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main h6,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main p,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main li,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main td,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main th,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main label,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] main span:not(.article-hero__content span),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section h1:not(.article-hero__content h1),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section h2:not(.article-hero__content h2),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section p:not(.article-hero__content p),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section li,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] article h1,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] article h2,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] article h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] article p,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] article li,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .container h1:not(.article-hero__content h1),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .container h2:not(.article-hero__content h2),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .container h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .container p:not(.article-hero__content p),\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .container li,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__link {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h1,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h2,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) p,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] body>div:not(.hero):not(.article-hero) li,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] dialog h1,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] dialog h2,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] dialog h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] dialog p,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] [role=\"dialog\"] h1,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] [role=\"dialog\"] h2,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] [role=\"dialog\"] h3,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] [role=\"dialog\"] p {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .article-content a,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer a {\n  color: #00ffff !important;\n  text-decoration: underline !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .article-content a:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .article-content a:focus {\n  color: #000000 !important;\n  background-color: #ffff00 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .header,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .topbar,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] header {\n  background-color: #000000 !important;\n  border-bottom: 3px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .header *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .topbar * {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .navbar {\n  background-color: #000000 !important;\n  border-right: 3px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .navbar *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .navbar .navbar-link .span,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .navbar .close-btn {\n  color: #ffffff !important;\n  border-color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] button,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .btn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .navbar-action-btn {\n  background-color: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] button:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] button:focus,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .btn:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .btn:focus {\n  background-color: #ffffff !important;\n  color: #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] input,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] textarea,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] select {\n  background-color: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] input::placeholder,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] textarea::placeholder {\n  color: #cccccc !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .card,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-postCard,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-listPost,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .rl-card {\n  background-color: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] footer,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__top,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__bottom {\n  background-color: #000000 !important;\n  border-top: 3px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] footer *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer * {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] ion-icon,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] svg,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .icon {\n  color: #ffffff !important;\n  fill: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] *:focus,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] *:focus-visible {\n  outline: 3px solid #ffffff !important;\n  outline-offset: 2px !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .hero,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .article-hero {\n  background-color: #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .intro-stat-value,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .intro-stat-label,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .intro-title,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .intro-text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .section-title,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .section-text {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .intro-stat {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-option {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-option.selected,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-option:hover {\n  border-color: #ffffff !important;\n  background: #333333 !important;\n  outline: 3px solid #ffff00 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-option span,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-label {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .checkin-title,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .checkin-subtitle,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .greeting-text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .greeting-time {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__content,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-tcard,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-actionbox,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .event-card,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .service-card {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n  box-shadow: none !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__title,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__kicker,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-tcard__name,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-tcard__role,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-tcard__text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-actionbox__title,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-actionbox__text,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-actionbox__kicker {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__btn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .btn-primary,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .cta-btn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .hero-btn {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-card__btn:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .btn-primary:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .cta-btn:hover,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .hero-btn:hover {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .tag,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .badge,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .chip,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .popular-tag,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__tag {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .back-top-btn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .scroll-top-btn {\n  background: #ffffff !important;\n  color: #000000 !important;\n  border: 2px solid #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .quote-banner,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-testimonials {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .quote-banner *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-testimonials * {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .wave-separator,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mb-footer__wave {\n  display: none !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] section {\n  background-color: #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .about,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .crisis-section {\n  background-color: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .about *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .crisis-section * {\n  color: #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .rl-filterBtn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .rl-filterTag {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .rl-filterBtn.active,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .rl-filterTag.active {\n  background: #ffffff !important;\n  color: #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .tab-btn,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .category-tab {\n  background: #000000 !important;\n  color: #ffffff !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .tab-btn.active,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .category-tab.active {\n  background: #ffffff !important;\n  color: #000000 !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .checkin-section,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .mood-checkin {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .community-post,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .post-card {\n  background: #000000 !important;\n  border: 2px solid #ffffff !important;\n}\n\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .community-post *,\n[data-theme=\"dark\"][data-high-contrast=\"true\"] .post-card * {\n  color: #ffffff !important;\n}\n\n[data-colorblind=\"protanopia\"] {\n  filter: url('#protanopia-filter');\n}\n\n[data-colorblind=\"deuteranopia\"] {\n  filter: url('#deuteranopia-filter');\n}\n\n[data-colorblind=\"tritanopia\"] {\n  filter: url('#tritanopia-filter');\n}\n\n/* ===== FOCUS MODE (ADHD) =====\n   Principle: Reduce visual distractions WITHOUT breaking any functionality.\n   - Stop continuous/looping animations (floats, pulses, scrolling testimonials)\n   - Hide auto-playing video backgrounds (show poster instead)\n   - Preserve ALL interactive elements: header, navbar, settings, preloader, modals\n   - Keep UI transitions fast but functional (not zero) */\n\n[data-adhd-mode=\"true\"] .back-video {\n  display: none !important;\n}\n\n[data-adhd-mode=\"true\"] #main-hero.hero {\n  background-image: var(--hero-poster, url('/assets/images/hero-poster.jpg'));\n  background-size: cover;\n  background-position: center;\n}\n\n[data-adhd-mode=\"true\"] .swiper-autoplay,\n[data-adhd-mode=\"true\"] [data-swiper-autoplay] {\n  --swiper-autoplay: 0 !important;\n}\n\n[data-adhd-mode=\"true\"] .mb-testimonials__track {\n  animation: none !important;\n}\n\n[data-adhd-mode=\"true\"] .mb-testimonials__mask {\n  display: none !important;\n}\n\n[data-adhd-mode=\"true\"] .animate-float,\n[data-adhd-mode=\"true\"] .animate-pulse,\n[data-adhd-mode=\"true\"] .animate-bounce,\n[data-adhd-mode=\"true\"] [class*=\"animate-continuous\"],\n[data-adhd-mode=\"true\"] .hero-cycle-text {\n  animation: none !important;\n}\n\n[data-adhd-mode=\"true\"] .scroll-reveal,\n[data-adhd-mode=\"true\"] .stagger-reveal,\n[data-adhd-mode=\"true\"] [data-scroll-reveal] {\n  opacity: 1 !important;\n  transform: none !important;\n}\n\n[data-adhd-mode=\"true\"] .wave-separator svg,\n[data-adhd-mode=\"true\"] .mb-footer__wave svg {\n  animation: none !important;\n}\n\n[data-adhd-mode=\"true\"] section,\n[data-adhd-mode=\"true\"] main,\n[data-adhd-mode=\"true\"] .container,\n[data-adhd-mode=\"true\"] .mb-actionbox,\n[data-adhd-mode=\"true\"] .mb-card,\n[data-adhd-mode=\"true\"] .mb-footer,\n[data-adhd-mode=\"true\"] .event,\n[data-adhd-mode=\"true\"] .service,\n[data-adhd-mode=\"true\"] .about,\n[data-adhd-mode=\"true\"] .crisis-section,\n[data-adhd-mode=\"true\"] .quote-banner {\n  transition-duration: 0.1s !important;\n}\n\n[data-adhd-mode=\"true\"] section *,\n[data-adhd-mode=\"true\"] main *,\n[data-adhd-mode=\"true\"] .mb-actionbox *,\n[data-adhd-mode=\"true\"] .mb-footer * {\n  animation-iteration-count: 1 !important;\n}\n\n@import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap');\n\n[data-dyslexia-font=\"true\"] *:not(.fa):not(.fas):not(.far):not(.fab):not(.fal):not(.fad):not([class*=\"fa-\"]) {\n  font-family: 'Lexend', 'OpenDyslexic', sans-serif !important;\n  letter-spacing: 0.05em !important;\n  word-spacing: 0.1em !important;\n  line-height: 1.8 !important;\n}\n\n[data-dyslexia-font=\"true\"] .fa,\n[data-dyslexia-font=\"true\"] .fas,\n[data-dyslexia-font=\"true\"] .far,\n[data-dyslexia-font=\"true\"] .fab,\n[data-dyslexia-font=\"true\"] .fal,\n[data-dyslexia-font=\"true\"] .fad,\n[data-dyslexia-font=\"true\"] [class*=\"fa-\"] {\n  font-family: \"Font Awesome 6 Free\", \"Font Awesome 6 Brands\" !important;\n  letter-spacing: normal !important;\n  word-spacing: normal !important;\n  line-height: normal !important;\n}\n\n[data-font-size=\"large\"] {\n  font-size: 110%;\n}\n\n[data-font-size=\"x-large\"] {\n  font-size: 120%;\n}\n\n[data-reduce-motion=\"true\"] *,\n[data-reduce-motion=\"true\"] *::before,\n[data-reduce-motion=\"true\"] *::after {\n  animation-duration: 0.01ms !important;\n  animation-iteration-count: 1 !important;\n  transition-duration: 0.01ms !important;\n}\n\n.navbar-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-left: auto;\n  position: relative;\n  z-index: 100;\n  flex-shrink: 0;\n}\n\n.user-menu-wrapper {\n  position: relative;\n  z-index: 102;\n}\n\n.user-menu-trigger {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 12px;\n  border: none;\n  background: var(--bg-secondary, rgba(0, 0, 0, 0.04));\n  border-radius: 30px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: var(--text-primary, #1a1a2e);\n}\n\n.user-menu-trigger:hover {\n  background: var(--bg-tertiary, rgba(0, 0, 0, 0.08));\n}\n\n.user-menu-trigger .user-avatar-small {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid var(--user-accent);\n}\n\n.user-menu-trigger .user-icon {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--user-accent);\n  border-radius: 50%;\n  color: #fff;\n  font-size: 18px;\n}\n\n.user-menu-trigger .menu-chevron {\n  font-size: 14px;\n  transition: transform 0.2s ease;\n  opacity: 0.6;\n}\n\n.user-menu-wrapper.active .user-menu-trigger .menu-chevron {\n  transform: rotate(180deg);\n}\n\n.user-menu-dropdown {\n  position: absolute;\n  top: calc(100% + 10px);\n  right: 0;\n  width: 280px;\n  background: #fff;\n  border-radius: 16px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  opacity: 0;\n  visibility: hidden;\n  transform: translateY(-10px);\n  transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s ease;\n  overflow: hidden;\n}\n\n.user-menu-wrapper.active .user-menu-dropdown {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n\n[data-theme=\"dark\"] .user-menu-dropdown {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);\n}\n\n[data-theme=\"dark\"] .user-menu-trigger {\n  background: rgba(255, 255, 255, 0.08);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .user-menu-trigger:hover {\n  background: rgba(255, 255, 255, 0.12);\n}\n\n.user-menu-header {\n  padding: 16px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n[data-theme=\"dark\"] .user-menu-header {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.user-menu-header .user-avatar-large {\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid var(--user-accent);\n}\n\n.user-menu-header .user-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.user-menu-header .user-name {\n  font-family: 'Poppins', sans-serif;\n  font-size: 15px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[data-theme=\"dark\"] .user-menu-header .user-name {\n  color: #fff;\n}\n\n.user-menu-header .user-email {\n  font-size: 12px;\n  color: #666;\n  margin: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[data-theme=\"dark\"] .user-menu-header .user-email {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.user-menu-items {\n  padding: 8px 0;\n}\n\n.user-menu-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  color: #333;\n  text-decoration: none;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  transition: background 0.15s ease;\n  border: none;\n  background: none;\n  width: 100%;\n  cursor: pointer;\n  text-align: left;\n}\n\n.user-menu-item:hover {\n  background: rgba(0, 0, 0, 0.04);\n}\n\n[data-theme=\"dark\"] .user-menu-item {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .user-menu-item:hover {\n  background: rgba(255, 255, 255, 0.06);\n}\n\n.user-menu-item ion-icon {\n  font-size: 20px;\n  color: #666;\n}\n\n[data-theme=\"dark\"] .user-menu-item ion-icon {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.user-menu-item .menu-item-badge {\n  margin-left: auto;\n  background: #e74c3c;\n  color: #fff;\n  font-size: 11px;\n  font-weight: 600;\n  padding: 2px 8px;\n  border-radius: 10px;\n  min-width: 20px;\n  text-align: center;\n}\n\n.user-menu-divider {\n  height: 1px;\n  background: rgba(0, 0, 0, 0.08);\n  margin: 8px 0;\n}\n\n[data-theme=\"dark\"] .user-menu-divider {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n.user-menu-settings {\n  padding: 0 16px 16px;\n}\n\n.user-menu-settings-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 0;\n}\n\n.user-menu-settings-row .setting-label {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 13px;\n  color: #666;\n}\n\n[data-theme=\"dark\"] .user-menu-settings-row .setting-label {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.user-menu-settings-row .setting-label ion-icon {\n  font-size: 18px;\n}\n\n.user-menu-item.logout-item {\n  color: #e74c3c;\n}\n\n.user-menu-item.logout-item ion-icon {\n  color: #e74c3c;\n}\n\n.user-menu-guest {\n  padding: 20px 16px;\n  text-align: center;\n}\n\n.user-menu-guest p {\n  font-size: 13px;\n  color: #666;\n  margin: 0 0 12px 0;\n}\n\n[data-theme=\"dark\"] .user-menu-guest p {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.user-menu-signin-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 10px 24px;\n  background: var(--user-accent);\n  color: #fff;\n  border: none;\n  border-radius: 25px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  text-decoration: none;\n  cursor: pointer;\n  transition: background 0.2s ease;\n  width: 100%;\n}\n\n.user-menu-signin-btn:hover {\n  background: var(--accent-hover, #a08550);\n}\n\n.user-menu-trigger {\n  position: relative;\n}\n\n.user-menu-badge {\n  position: absolute;\n  top: -4px;\n  right: -4px;\n  background: #e74c3c;\n  color: #fff;\n  font-size: 10px;\n  font-weight: 600;\n  padding: 2px 6px;\n  border-radius: 10px;\n  min-width: 16px;\n  text-align: center;\n}\n\n@media (min-width: 1025px) {\n  .navbar-actions .settings-wrapper[style*=\"display: none\"],\n  .navbar-actions > div[style*=\"display: none\"] {\n    display: none !important;\n  }\n}\n\n.navbar-action-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: transparent;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: background-color 0.2s ease, transform 0.2s ease;\n  color: var(--text-primary, #1a1a2e);\n}\n\n.navbar-action-btn:hover {\n  background: var(--bg-tertiary, rgba(0, 0, 0, 0.05));\n  transform: scale(1.05);\n}\n\n.navbar-action-btn .action-icon {\n  font-size: 22px;\n}\n\n.navbar-action-btn.auth-btn {\n  width: auto;\n  padding: 8px 16px;\n  border-radius: 25px;\n  background: var(--user-accent);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  text-decoration: none;\n}\n\n.navbar-action-btn.auth-btn:hover {\n  background: var(--accent-hover, #a08550);\n}\n\n.navbar-action-btn.auth-btn .auth-text {\n  white-space: nowrap;\n}\n\n.navbar-action-btn[data-user-btn].is-signed-in {\n  padding: 0;\n  overflow: visible;\n}\n\n.navbar-action-btn[data-user-btn].is-signed-in .user-avatar {\n  overflow: hidden;\n}\n\n.navbar-action-btn[data-user-btn] .user-avatar {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid var(--user-accent);\n}\n\n.navbar-action-btn[data-user-btn].is-signed-in:hover .user-avatar {\n  border-color: var(--accent-hover, #a08550);\n}\n\n.navbar-action-btn[data-user-btn].signed-in .action-icon {\n  color: var(--accent-color, #ffffff);\n}\n\n.settings-wrapper {\n  position: relative;\n  z-index: 101;\n}\n\n.settings-dropdown {\n  position: absolute;\n  top: calc(100% + 10px);\n  right: 0;\n  width: 280px;\n  background: #fff;\n  border-radius: 16px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  opacity: 0;\n  visibility: hidden;\n  transform: translateY(-10px);\n  transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s ease;\n  z-index: 1000;\n}\n\n[data-theme=\"dark\"] .settings-dropdown {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);\n}\n\n.settings-dropdown.active {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n\n.settings-header {\n  padding: 16px 20px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .settings-header {\n  border-bottom-color: rgba(255, 255, 255, 0.1);\n}\n\n.settings-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 16px;\n  font-weight: 600;\n  color: #3d3a50;\n}\n\n[data-theme=\"dark\"] .settings-title {\n  color: var(--user-accent-light);\n}\n\n.settings-content {\n  padding: 12px 0;\n}\n\n.setting-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 20px;\n  transition: background-color 0.15s ease;\n}\n\n.setting-item:hover {\n  background: rgba(0, 0, 0, 0.03);\n}\n\n[data-theme=\"dark\"] .setting-item:hover {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n.setting-info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  color: #333;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n}\n\n[data-theme=\"dark\"] .setting-info {\n  color: #fff;\n}\n\n.setting-info ion-icon {\n  font-size: 20px;\n  color: rgba(0, 0, 0, 0.5);\n}\n\n[data-theme=\"dark\"] .setting-info ion-icon {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.theme-toggle-switch {\n  position: relative;\n  display: inline-block;\n  width: 44px;\n  height: 24px;\n}\n\n.theme-toggle-switch input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.theme-toggle-slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: var(--bg-tertiary, #ccc);\n  border-radius: 24px;\n  transition: 0.3s;\n}\n\n.theme-toggle-slider::before {\n  position: absolute;\n  content: \"\";\n  height: 18px;\n  width: 18px;\n  left: 3px;\n  bottom: 3px;\n  background-color: white;\n  border-radius: 50%;\n  transition: 0.3s;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n.theme-toggle-switch input:checked+.theme-toggle-slider {\n  background-color: var(--user-accent);\n}\n\n.theme-toggle-switch input:checked+.theme-toggle-slider::before {\n  transform: translateX(20px);\n}\n\n.setting-select {\n  padding: 6px 12px;\n  border: 1px solid var(--border-color, rgba(0, 0, 0, 0.15));\n  border-radius: 6px;\n  background: var(--bg-primary, #fff);\n  color: var(--text-primary, #1a1a2e);\n  font-family: 'Poppins', sans-serif;\n  font-size: 13px;\n  cursor: pointer;\n  transition: border-color 0.2s ease;\n}\n\n.setting-select:hover {\n  border-color: var(--user-accent);\n}\n\n.setting-select:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.setting-item--accent {\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 10px;\n}\n\n.accent-color-picker {\n  display: flex;\n  gap: 6px;\n  flex-wrap: wrap;\n}\n\n.accent-color-btn {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  border: 2px solid transparent;\n  background-color: var(--btn-color);\n  cursor: pointer;\n  transition: transform 0.15s ease, box-shadow 0.15s ease;\n  padding: 0;\n}\n\n.accent-color-btn:hover {\n  transform: scale(1.15);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n\n.accent-color-btn.active {\n  border-color: #fff;\n  box-shadow: 0 0 0 2px var(--btn-color), 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .accent-color-btn.active {\n  border-color: #1a1a2e;\n}\n\n.mobile-accent-picker {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-top: 8px;\n}\n\n.mobile-accent-picker .accent-color-btn {\n  width: 28px;\n  height: 28px;\n}\n\n.mobile-settings-section {\n  padding: 0;\n  margin: 4px 0 0;\n  flex-shrink: 0;\n  background: #fff;\n  border-radius: 14px;\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);\n  overflow: hidden;\n}\n\n.mobile-settings-toggle {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  padding: 14px 16px;\n  background: linear-gradient(135deg, #f8f5f0 0%, #f0ebe3 100%);\n  border: none;\n  width: 100%;\n  transition: background 0.2s ease;\n}\n\n.mobile-settings-toggle:hover {\n  background: linear-gradient(135deg, #f0ebe3 0%, #e8e3db 100%);\n}\n\n.mobile-settings-toggle ion-icon {\n  font-size: 18px;\n  color: var(--user-accent);\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  background: rgba(var(--user-accent-rgb), 0.1);\n  padding: 6px;\n  border-radius: 8px;\n}\n\n.mobile-settings-section.collapsed .mobile-settings-toggle ion-icon {\n  transform: rotate(-90deg);\n}\n\n.mobile-settings-section.collapsed .mobile-settings-list {\n  display: none;\n}\n\n.mobile-settings-title {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  color: #1a1a2e;\n  text-transform: none;\n  letter-spacing: 0;\n  margin: 0;\n}\n\n.mobile-settings-title::before {\n  content: '\\2699';\n  font-size: 18px;\n  color: var(--user-accent);\n}\n\n.mobile-settings-list {\n  padding: 12px 16px 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  background: #fff;\n  animation: slideDown 0.3s ease;\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.mobile-setting-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  background: #f9f7f4;\n  border-radius: 12px;\n  transition: background 0.2s ease;\n}\n\n.mobile-setting-item:hover {\n  background: #f3f0ea;\n}\n\n.mobile-setting-label {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  color: #1a1a2e;\n}\n\n.mobile-setting-label ion-icon {\n  font-size: 20px;\n  color: var(--user-accent);\n  background: rgba(var(--user-accent-rgb), 0.1);\n  padding: 6px;\n  border-radius: 8px;\n}\n\n@media (min-width: 1025px) {\n  .mobile-settings-section {\n    display: none;\n  }\n\n  .navbar-actions {\n    display: flex;\n  }\n}\n\n@media (max-width: 1024px) {\n  .navbar-actions {\n    display: none;\n  }\n\n  .mobile-settings-section {\n    display: block;\n  }\n}\n\n.header {\n  background: var(--user-accent-light);\n}\n\n.header.active {\n  background: var(--user-accent-light);\n  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);\n}\n\n.topbar {\n  background: linear-gradient(135deg, var(--accent-color, var(--user-accent)) 0%, var(--accent-color-dark, var(--user-accent-dark)) 100%);\n}\n\n[data-theme=\"dark\"] .header {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .header.active {\n  background: #1a1a2e;\n  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.4);\n}\n\n[data-theme=\"dark\"] .topbar {\n  background: linear-gradient(135deg, #2a2a4a 0%, #1a1a35 100%);\n}\n\n[data-theme=\"dark\"] .topbar__slide span,\n[data-theme=\"dark\"] .topbar__slide a {\n  color: rgba(255, 255, 255, 0.9);\n}\n\n[data-theme=\"dark\"] .topbar__dot {\n  background: rgba(255, 255, 255, 0.25);\n}\n\n[data-theme=\"dark\"] .topbar__dot.active {\n  background: rgba(255, 255, 255, 0.85);\n}\n\n.navbar-link .span {\n  color: #1a1a2e;\n}\n\n.nav-open-btn .line {\n  background: #1a1a2e;\n}\n\n.navbar-action-btn .action-icon {\n  color: #1a1a2e;\n}\n\n.navbar-action-btn.auth-btn {\n  background: #3d3a50;\n  color: #fff;\n}\n\n.navbar-action-btn.auth-btn:hover {\n  background: #2d2b3d;\n}\n\n[data-theme=\"dark\"] .navbar {\n  background: #2d2b3d;\n  border-right-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .navbar .close-btn {\n  color: rgba(255, 255, 255, 0.8);\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.15);\n}\n\n[data-theme=\"dark\"] .navbar .close-btn:is(:hover, :focus-visible) {\n  color: #fff;\n  background: rgba(255, 255, 255, 0.15);\n  border-color: rgba(255, 255, 255, 0.25);\n}\n\n[data-theme=\"dark\"] .navbar-link:is(:hover, :focus-visible) {\n  background: rgba(255, 255, 255, 0.08);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-link:is(:hover, :focus-visible) .span {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-link.active {\n  background: rgba(var(--user-accent-rgb), 0.15);\n  border-color: rgba(var(--user-accent-rgb), 0.4);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-link.active .span {\n  color: var(--user-accent-light);\n  font-weight: 600;\n}\n\n[data-theme=\"dark\"] .navbar-link {\n  color: rgba(255, 255, 255, 0.85);\n}\n\n[data-theme=\"dark\"] .navbar-link .span {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .nav-open-btn .line {\n  background: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-action-btn .action-icon {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-action-btn.auth-btn {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .navbar-action-btn.auth-btn:hover {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n}\n\n.card,\n.mb-card,\n.mb-sidebar,\n.mb-listPost,\n.resource-card,\n.community-card,\n.blog-card {\n  background: var(--bg-card);\n  color: var(--text-primary);\n  border: 1px solid var(--border-light);\n}\n\n[data-theme=\"dark\"] .mb-card {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-card__kicker {\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-card__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-card.is-active {\n  background: var(--bg-secondary);\n  border-color: var(--user-accent-light);\n  box-shadow: 0 14px 34px var(--user-accent-glow);\n}\n\n[data-theme=\"dark\"] .mb-card:hover {\n  border-color: var(--user-accent-light);\n  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-tcard {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-tcard__name {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-tcard__role {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-tcard__text {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .intro-section,\n[data-theme=\"dark\"] .mb-testimonials {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-actionbox,\n[data-theme=\"dark\"] .our-story-section {\n  background: var(--bg-secondary);\n}\n\n[data-theme=\"dark\"] .mb-actionbox__wrap {\n  background: transparent;\n}\n\n[data-theme=\"dark\"] .mb-actionbox__kicker {\n  color: #7eb3ff;\n}\n\n[data-theme=\"dark\"] .mb-actionbox__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-actionbox__desc {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .our-story-section h2,\n[data-theme=\"dark\"] .our-story-section .section-title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .our-story-section p {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-impact {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-impact__title,\n[data-theme=\"dark\"] .impact-title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-impact__desc,\n[data-theme=\"dark\"] .impact-desc {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-testimonials__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-testimonials__mask {\n  background: linear-gradient(to bottom,\n      rgba(18, 18, 32, 1) 0%,\n      rgba(18, 18, 32, 0) 14%,\n      rgba(18, 18, 32, 0) 86%,\n      rgba(18, 18, 32, 1) 100%);\n}\n\n[data-theme=\"dark\"] .mb-testimonials {\n  background: #121220;\n}\n\ninput,\ntextarea,\nselect {\n  background: var(--bg-input);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-footer::before {\n  background: url(\"data:image/svg+xml,%3Csvg viewBox='0 0 1200 60' preserveAspectRatio='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0,60 L0,20 Q300,0 600,30 T1200,20 L1200,60 Z' fill='%231a1a2e'/%3E%3C/svg%3E\") no-repeat;\n  background-size: cover;\n}\n\n[data-theme=\"dark\"] .mb-footer__top {\n  background: linear-gradient(135deg, #1a1a2e 0%, #16162a 100%);\n}\n\n[data-theme=\"dark\"] .mb-footer__top::before {\n  background: radial-gradient(circle at 20% 80%, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 50%),\n    radial-gradient(circle at 80% 20%, rgba(var(--user-accent-rgb), 0.06) 0%, transparent 40%);\n}\n\n[data-theme=\"dark\"] .mb-footer__text,\n[data-theme=\"dark\"] .mb-footer__link {\n  color: rgba(255, 255, 255, 0.75);\n}\n\n[data-theme=\"dark\"] .mb-footer__brand,\n[data-theme=\"dark\"] .mb-footer__heading,\n[data-theme=\"dark\"] .mb-footer__subheading {\n  color: #ffffff;\n}\n\n[data-theme=\"dark\"] .mb-footer__brand::after {\n  background: linear-gradient(90deg, var(--user-accent-light), transparent);\n}\n\n[data-theme=\"dark\"] .mb-footer__bottom {\n  background: linear-gradient(135deg, #0f0f1a 0%, #0a0a12 100%);\n}\n\n[data-theme=\"dark\"] .mb-footer__copy,\n[data-theme=\"dark\"] .mb-footer__legal-link {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n[data-theme=\"dark\"] .mb-footer__tag {\n  background: rgba(var(--user-accent-rgb), 0.15);\n  border-color: rgba(var(--user-accent-rgb), 0.3);\n  color: rgba(255, 255, 255, 0.85);\n}\n\n[data-theme=\"dark\"] .mb-footer__tag:hover {\n  background: rgba(var(--user-accent-rgb), 0.25);\n  border-color: rgba(var(--user-accent-rgb), 0.5);\n}\n\n[data-theme=\"dark\"] .mb-footer__btn {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n  color: #fff;\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n[data-theme=\"dark\"] .mb-footer__btn:hover {\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n[data-theme=\"dark\"] .mb-footer__btn--ghost {\n  background: rgba(var(--user-accent-rgb), 0.1);\n  border: 1px solid rgba(var(--user-accent-rgb), 0.3);\n  color: rgba(255, 255, 255, 0.9);\n  box-shadow: none;\n}\n\n[data-theme=\"dark\"] .mb-footer__btn--ghost:hover {\n  background: rgba(var(--user-accent-rgb), 0.2);\n  border-color: rgba(var(--user-accent-rgb), 0.5);\n}\n\n[data-theme=\"dark\"] .mb-footer__icon {\n  background: rgba(var(--user-accent-rgb), 0.15);\n  border-color: rgba(var(--user-accent-rgb), 0.3);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n[data-theme=\"dark\"] .mb-footer__icon:hover {\n  background: linear-gradient(135deg, #E1306C, #C13584);\n  border-color: transparent;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__top {\n  background: #000000;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__text,\n[data-high-contrast=\"true\"] .mb-footer__link {\n  color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__brand,\n[data-high-contrast=\"true\"] .mb-footer__heading,\n[data-high-contrast=\"true\"] .mb-footer__subheading {\n  color: #ffff00;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__bottom {\n  background: #111111;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__copy,\n[data-high-contrast=\"true\"] .mb-footer__legal-link {\n  color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__tag {\n  background: #000000;\n  border: 2px solid #ffffff;\n  color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__btn {\n  background: #ffff00;\n  color: #000000;\n  border: 2px solid #000000;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__btn--ghost {\n  background: transparent;\n  border: 2px solid #ffffff;\n  color: #ffffff;\n}\n\n[data-high-contrast=\"true\"] .mb-footer__icon {\n  background: #000000;\n  border: 2px solid #ffffff;\n  color: #ffffff;\n}\n\n.rl-sidebar,\n.resource-sidebar {\n  background: var(--bg-card);\n  color: var(--text-primary);\n}\n\n.rl-sidebar a,\n.resource-sidebar a {\n  color: var(--text-secondary);\n}\n\n.rl-sidebar a:hover,\n.resource-sidebar a:hover {\n  color: var(--accent-color);\n}\n\n.resource-item,\n.rl-item {\n  background: var(--bg-card);\n  border: 1px solid var(--border-light);\n}\n\n.resource-item h3,\n.rl-item h3 {\n  color: var(--text-primary);\n}\n\n.resource-item p,\n.rl-item p {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .rl {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .rl-title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-lead {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .rl-support {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .rl-search {\n  border-top-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .rl-searchInput {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-searchInput::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .rl-clearSearch {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .rl-clearSearch:hover {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-chip {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-chip span {\n  background: var(--bg-secondary);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-clearAll {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .rl-clearAll:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-filterTitle {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-filterBtn {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .rl-filterBtn:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-filterBtn.is-active {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-meta {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .rl-card {\n  border-left-color: var(--accent-color);\n  background: var(--bg-tertiary);\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .rl-card:hover {\n  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3), 0 4px 8px rgba(242, 194, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .rl-cardSmall {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .rl-cardSmall::before {\n  background: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-cardTitle {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .rl-card:hover .rl-cardTitle {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-cardBody {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .rl-tag {\n  background: linear-gradient(135deg, var(--accent-color) 0%, #d4aa00 100%);\n  color: #111111;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .rl-visitBtn {\n  background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-tertiary) 100%);\n  color: var(--text-primary);\n  border: 1px solid var(--border-color);\n}\n\n[data-theme=\"dark\"] .rl-visitBtn:hover {\n  background: linear-gradient(135deg, var(--accent-color) 0%, #d4aa00 100%);\n  color: #111111;\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .rl-skeleton {\n  background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-card) 50%, var(--bg-tertiary) 75%);\n  background-size: 200% 100%;\n}\n\n[data-theme=\"dark\"] .rl-skeleton-card {\n  background: var(--bg-tertiary);\n  border-left-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .rl-searchInput:focus {\n  background-color: var(--bg-tertiary);\n  box-shadow: 0 0 0 4px rgba(242, 194, 0, 0.2), 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n.mb-commentBox {\n  margin-top: 12px;\n}\n\n.mb-commentInputRow {\n  display: flex;\n  gap: 8px;\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n.mb-commentInput {\n  flex: 1;\n  padding: 10px 14px;\n  border: 1px solid #ddd;\n  border-radius: 20px;\n  font-size: 14px;\n  background: #fff;\n  color: #111;\n  transition: border-color 0.2s;\n}\n\n.mb-commentInput:focus {\n  outline: none;\n  border-color: var(--accent-color, var(--user-accent));\n}\n\n.mb-commentInput::placeholder {\n  color: #888;\n}\n\n.mb-sendBtn {\n  background: var(--accent-color, var(--user-accent)) !important;\n  color: #fff !important;\n  padding: 10px 18px;\n  border-radius: 20px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 13px;\n  border: none;\n  transition: opacity 0.2s;\n}\n\n.mb-sendBtn:hover {\n  opacity: 0.85;\n}\n\n.mb-comments {\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.mb-comment {\n  display: flex;\n  gap: 10px;\n  padding: 10px 12px;\n  background: #f8f8f8;\n  border-radius: 12px;\n  font-size: 13px;\n  color: #333;\n  transition: background 0.2s;\n  position: relative;\n}\n\n.mb-comment:hover {\n  background: #f0f0f0;\n}\n\n.mb-commentLeft {\n  flex-shrink: 0;\n}\n\n.mb-commentAvatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: grid;\n  place-items: center;\n  font-size: 12px;\n  font-weight: 700;\n  overflow: hidden;\n  background: #e0e0e0;\n}\n\n.mb-commentAvatar img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 50%;\n}\n\n.mb-commentAvatar--team {\n  background: linear-gradient(135deg, var(--user-accent), var(--user-accent-grad-end));\n  color: #fff;\n  font-size: 10px;\n  font-weight: 800;\n  letter-spacing: 0.5px;\n}\n\n.mb-commentRight {\n  flex: 1;\n  min-width: 0;\n}\n\n.mb-commentHeader {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 8px;\n  margin-bottom: 2px;\n}\n\n.mb-commentMeta {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex-wrap: wrap;\n}\n\n.mb-commentAuthorLink {\n  color: var(--accent-color, var(--user-accent));\n  text-decoration: none;\n  font-weight: 600;\n  font-size: 13px;\n  transition: color 0.2s;\n}\n\n.mb-commentAuthorLink:hover {\n  color: var(--user-accent-grad-end);\n  text-decoration: underline;\n}\n\n.mb-commentAuthorName--team {\n  color: var(--accent-color, var(--user-accent));\n  font-weight: 700;\n  font-size: 13px;\n}\n\n.mb-commentTime {\n  color: #999;\n  font-size: 11px;\n  white-space: nowrap;\n}\n\n.mb-commentBody {\n  color: #444;\n  font-size: 13.5px;\n  line-height: 1.45;\n  word-break: break-word;\n}\n\n.mb-commentDeleteBtn {\n  background: none;\n  border: none;\n  color: #ccc;\n  cursor: pointer;\n  padding: 2px 4px;\n  border-radius: 6px;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  transition: color 0.2s, background 0.2s;\n  opacity: 0;\n}\n\n.mb-comment:hover .mb-commentDeleteBtn {\n  opacity: 1;\n}\n\n.mb-commentDeleteBtn:hover {\n  color: #ef4444;\n  background: rgba(239, 68, 68, 0.08);\n}\n\n.mb-levelBadge--sm {\n  font-size: 9px;\n  padding: 1px 6px;\n}\n\n.mb-teamBadge {\n  background: linear-gradient(135deg, var(--user-accent), var(--user-accent-grad-end));\n  color: #fff;\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 10px;\n  font-weight: 600;\n  letter-spacing: 0.3px;\n}\n\n.mb-communityMember {\n  color: var(--user-accent);\n  font-weight: 600;\n}\n\n.mb-commentUser {\n  font-weight: bold;\n  color: #111;\n  display: inline;\n  white-space: nowrap;\n}\n\n[data-theme=\"dark\"] .mb-community {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-panel {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-panelHeader {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n  border-bottom-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-panelBody {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-navLink {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-navLink:hover,\n[data-theme=\"dark\"] .mb-navLink.is-active {\n  color: var(--accent-color);\n  background: var(--bg-tertiary);\n}\n\n[data-theme=\"dark\"] .mb-feedHeader {\n  border-bottom-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-feedTitle {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-search {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-search::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-composer {\n  background: var(--bg-secondary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-input {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-input::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-avatar {\n  background: var(--accent-color);\n  color: #111111;\n}\n\n[data-theme=\"dark\"] .mb-post {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-postHead {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postName {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-postTime {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postBody {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-postFooter {\n  border-top-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-btn {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-btn:hover {\n  background: var(--accent-color);\n  color: #111111;\n}\n\n[data-theme=\"dark\"] .mb-btnPrimary {\n  background: var(--accent-color);\n  color: #111111;\n}\n\n[data-theme=\"dark\"] .mb-pill {\n  background: var(--accent-light);\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-commentInputRow {\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-commentInput {\n  background: #2d2d2d;\n  color: #e0e0e0;\n  border-color: #444;\n}\n\n[data-theme=\"dark\"] .mb-commentInput:focus {\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-commentInput::placeholder {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-sendBtn {\n  background: var(--accent-color) !important;\n}\n\n[data-theme=\"dark\"] .mb-comments {\n  background: transparent;\n}\n\n[data-theme=\"dark\"] .mb-comment {\n  background: #252525;\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-comment:hover {\n  background: #2d2d2d;\n}\n\n[data-theme=\"dark\"] .mb-commentBody {\n  color: #d0d0d0;\n}\n\n[data-theme=\"dark\"] .mb-commentTime {\n  color: #777;\n}\n\n[data-theme=\"dark\"] .mb-commentAuthorLink {\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-commentAuthorLink:hover {\n  color: #b794f6;\n}\n\n[data-theme=\"dark\"] .mb-commentAuthorName--team {\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-teamBadge {\n  background: linear-gradient(135deg, var(--user-accent), #b794f6);\n}\n\n[data-theme=\"dark\"] .mb-communityMember {\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-commentDeleteBtn {\n  color: #555;\n}\n\n[data-theme=\"dark\"] .mb-commentDeleteBtn:hover {\n  color: #ef4444;\n  background: rgba(239, 68, 68, 0.15);\n}\n\n[data-theme=\"dark\"] .mb-commentAvatar--team {\n  background: linear-gradient(135deg, var(--user-accent), #b794f6);\n}\n\n[data-theme=\"dark\"] .mb-right {\n  background: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .mb-heading {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-trendingItem {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-trendingItem:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-blogHero {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__badge {\n  background: var(--accent-color);\n  color: #111111;\n}\n\n[data-theme=\"dark\"] .mb-blogHero__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__lead {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__input {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__input::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__searchBtn {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__searchBtn:hover {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-chip {\n  background: var(--bg-tertiary);\n  color: var(--text-primary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-chip:hover {\n  background: var(--bg-secondary);\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-chip.is-active {\n  background: var(--accent-color);\n  color: #111111;\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-ticker {\n  background: var(--bg-tertiary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-ticker__num {\n  background: var(--accent-color);\n  color: #111111;\n}\n\n[data-theme=\"dark\"] .mb-ticker__link {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-ticker__link:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-featureCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-featureCard__content {\n  background: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .mb-featureCard__title a {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-featureCard__title a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-featureCard__desc,\n[data-theme=\"dark\"] .mb-featureCard__subtext {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-metaRow {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-metaText {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-metaDot {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postHint {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-blog {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-blogGrid {\n  background: var(--bg-primary);\n}\n\n[data-theme=\"dark\"] .mb-resultsBar {\n  background: var(--bg-secondary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-resultsBar__count,\n[data-theme=\"dark\"] .mb-resultsBar__active {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-resultsBar__reset {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-resultsBar__reset:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-sectionHead {\n  border-bottom-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-sectionHead__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-sectionHead__more {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-postCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n  box-shadow: \n    0 2px 8px rgba(0, 0, 0, 0.2),\n    0 8px 24px rgba(0, 0, 0, 0.25);\n}\n\n[data-theme=\"dark\"] .mb-postCard:hover {\n  box-shadow: \n    0 4px 12px rgba(0, 0, 0, 0.3),\n    0 16px 48px rgba(0, 0, 0, 0.35),\n    0 24px 64px rgba(0, 0, 0, 0.25);\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-postCard::before {\n  background: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-postCard__body {\n  background: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .mb-postCard__title a {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-postCard__title a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-postCard__meta {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postCard__excerpt {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-postCard__subtext {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postCard__bookmark {\n  background: rgba(40, 40, 60, 0.9);\n}\n\n[data-theme=\"dark\"] .mb-postCard__bookmark svg {\n  stroke: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-postCard__bookmark:hover {\n  background: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-postCard__bookmark:hover svg {\n  stroke: #111;\n}\n\n[data-theme=\"dark\"] .mb-miniCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n  box-shadow: \n    0 2px 8px rgba(0, 0, 0, 0.2),\n    0 8px 24px rgba(0, 0, 0, 0.25);\n}\n\n[data-theme=\"dark\"] .mb-miniCard:hover {\n  box-shadow: \n    0 4px 12px rgba(0, 0, 0, 0.3),\n    0 16px 40px rgba(0, 0, 0, 0.35);\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-miniCard::before {\n  background: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__title a {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__title a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__meta {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__bookmark {\n  background: rgba(40, 40, 60, 0.9);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__bookmark svg {\n  stroke: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__bookmark:hover {\n  background: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__bookmark:hover svg {\n  stroke: #111;\n}\n\n[data-theme=\"dark\"] .mb-miniCard__pill {\n  background: var(--accent-color);\n  color: #111;\n}\n\n[data-theme=\"dark\"] .mb-compactCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2), 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-compactCard:hover {\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3), 0 4px 12px rgba(0, 0, 0, 0.15);\n  border-color: rgba(255, 255, 255, 0.12);\n}\n\n[data-theme=\"dark\"] .mb-compactCard__title a {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-compactCard__title a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-compactCard__meta {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-compactCard .mb-postHint {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-listPost {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-listPost__body {\n  background: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .mb-listPost__title a {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-listPost__title a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-listPost__excerpt {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-listPost__subtext {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-postHint strong {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-linkArrow {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-linkArrow:hover {\n  color: #e0c94a;\n}\n\n[data-theme=\"dark\"] .mb-postCard .mb-linkArrow,\n[data-theme=\"dark\"] .mb-miniCard .mb-linkArrow {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-widget {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-loadMore__btn {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-loadMore__btn:hover {\n  background: var(--accent-color);\n  color: #111;\n  border-color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-emptyState {\n  background: var(--bg-secondary);\n  color: var(--text-secondary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-articleCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-articleCard__content {\n  background: var(--bg-card);\n}\n\n[data-theme=\"dark\"] .mb-articleCard__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-articleCard__title:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-articleCard__desc {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-articleCard__meta {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-listCard {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-listCard__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-listCard__desc {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-sidebar {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-sidebar h3,\n[data-theme=\"dark\"] .mb-sidebar__heading {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-sidebar a,\n[data-theme=\"dark\"] .mb-sidebar__link {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-sidebar a:hover {\n  color: var(--accent-color);\n}\n\n[data-theme=\"dark\"] .mb-catBtn {\n  background: var(--bg-surface);\n  color: var(--text-secondary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-catBtn:hover {\n  background: var(--accent-color);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-tag {\n  background: var(--bg-surface);\n  color: var(--text-secondary);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-tag:hover,\n[data-theme=\"dark\"] .mb-tag.active {\n  background: var(--accent-color);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-widget__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-widget__text {\n  color: var(--text-secondary);\n}\n\n[data-theme=\"dark\"] .mb-sideSearch__input {\n  background: var(--bg-input);\n  border-color: var(--border-color);\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-sideSearch__input::placeholder {\n  color: var(--text-muted);\n}\n\n[data-theme=\"dark\"] .mb-trending {\n  background: var(--bg-card);\n  border-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-trending__title {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mb-trending__item {\n  color: var(--text-secondary);\n  border-bottom-color: var(--border-color);\n}\n\n[data-theme=\"dark\"] .mb-trending__item:hover {\n  color: var(--accent-color);\n}\n\n.community-sidebar,\n.ch-sidebar {\n  background: var(--bg-card);\n  color: var(--text-primary);\n}\n\n.community-post,\n.ch-post {\n  background: var(--bg-card);\n  border: 1px solid var(--border-light);\n}\n\n.community-post h4,\n.ch-post h4 {\n  color: var(--text-primary);\n}\n\n.community-post p,\n.ch-post p {\n  color: var(--text-secondary);\n}\n\n.mb-listPost__content {\n  background: var(--bg-card);\n}\n\n.mb-listPost__title {\n  color: var(--text-primary);\n}\n\n.mb-listPost__meta {\n  color: var(--text-muted);\n}\n\n.testimonial-card,\n.review-card {\n  background: var(--bg-card);\n  color: var(--text-primary);\n}\n\n.testimonial-text,\n.review-text {\n  color: var(--text-secondary);\n}\n\n.intro-section,\n.text-section,\n.about-section {\n  background: var(--bg-secondary);\n}\n\n.intro-text h2,\n.text-section h2 {\n  color: var(--text-primary);\n}\n\n.intro-text p,\n.text-section p {\n  color: var(--text-secondary);\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  color: var(--text-primary);\n}\n\np {\n  color: var(--text-secondary);\n}\n\n.btn,\n.button {\n  background: var(--accent-color);\n  color: var(--text-inverse);\n}\n\n.btn:hover,\n.button:hover {\n  background: var(--accent-hover);\n}\n\n.tag,\n.badge,\n.category-tag {\n  background: var(--accent-light);\n  color: var(--accent-color);\n  border: 1px solid var(--accent-color);\n}\n\n.search-input,\n.search-box input {\n  background: var(--bg-input);\n  color: var(--text-primary);\n  border: 1px solid var(--border-color);\n}\n\n.navbar .text-center {\n  color: var(--text-primary);\n}\n\n.navbar .text-center .body-4,\n.navbar .text-center address {\n  color: var(--text-secondary);\n}\n\n.settings-dropdown .setting-info span,\n.settings-title,\n.setting-info {\n  color: var(--text-primary);\n}\n\n.mobile-setting-label {\n  color: var(--text-primary);\n}\n\n[data-theme=\"dark\"] .mobile-settings-section {\n  background: #2d2d4a;\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .mobile-settings-toggle {\n  background: linear-gradient(135deg, #3d3d5c 0%, #2d2d4a 100%);\n}\n\n[data-theme=\"dark\"] .mobile-settings-toggle:hover {\n  background: linear-gradient(135deg, #4d4d6c 0%, #3d3d5c 100%);\n}\n\n[data-theme=\"dark\"] .mobile-settings-title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mobile-settings-list {\n  background: #2d2d4a;\n}\n\n[data-theme=\"dark\"] .mobile-setting-item {\n  background: #3d3d5c;\n}\n\n[data-theme=\"dark\"] .mobile-setting-item:hover {\n  background: #4d4d6c;\n}\n\n[data-theme=\"dark\"] .mobile-setting-label {\n  color: #e0e0e0;\n}\n\n.mobile-auth-section {\n  display: none;\n  flex-direction: column;\n  gap: 8px;\n  padding: 12px 16px 16px;\n  margin-top: auto;\n  background: linear-gradient(to bottom, #f5f1eb 0%, #efe9df 100%);\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  flex-shrink: 0;\n}\n\n.mobile-auth-section::before {\n  content: '';\n  display: block;\n  width: 40px;\n  height: 3px;\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 2px;\n  margin: 0 auto 8px;\n}\n\n[data-theme=\"dark\"] .mobile-auth-section {\n  background: linear-gradient(to bottom, #2d2d4a 0%, #252542 100%);\n  border-color: rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .mobile-auth-section::before {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n.mobile-auth-signed-in,\n.mobile-auth-signed-out {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.mobile-auth-row {\n  display: flex;\n  gap: 8px;\n}\n\n.mobile-auth-row .mobile-auth-btn {\n  flex: 1;\n}\n\n.mobile-auth-btn {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  background: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  border-radius: 14px;\n  color: #1a1a2e;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  text-decoration: none;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);\n}\n\n.mobile-auth-btn__icon {\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(var(--user-accent-rgb), 0.1);\n  border-radius: 10px;\n  flex-shrink: 0;\n}\n\n.mobile-auth-btn__icon ion-icon {\n  font-size: 18px;\n  color: var(--user-accent);\n}\n\n.mobile-auth-btn__icon--danger {\n  background: rgba(220, 53, 69, 0.1);\n}\n\n.mobile-auth-btn__icon--danger ion-icon {\n  color: #dc3545;\n}\n\n.mobile-auth-btn__arrow {\n  margin-left: auto;\n  font-size: 16px;\n  opacity: 0.4;\n  transition: transform 0.2s ease;\n}\n\n.mobile-auth-btn:hover {\n  background: var(--user-accent-soft);\n  transform: translateX(2px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n}\n\n.mobile-auth-btn:hover .mobile-auth-btn__arrow {\n  transform: translateX(3px);\n  opacity: 0.7;\n}\n\n.mobile-auth-btn:active {\n  transform: scale(0.98);\n}\n\n[data-theme=\"dark\"] .mobile-auth-btn {\n  background: #3d3d5c;\n  border-color: rgba(255, 255, 255, 0.08);\n  color: #e0e0e0;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .mobile-auth-btn__icon {\n  background: rgba(var(--user-accent-rgb), 0.15);\n}\n\n[data-theme=\"dark\"] .mobile-auth-btn:hover {\n  background: #4d4d6c;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n.mobile-signin-btn {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n  color: #fff !important;\n  border: none;\n  box-shadow: 0 4px 12px rgba(var(--user-accent-rgb), 0.3);\n  padding: 14px 20px;\n  font-size: 15px;\n  font-weight: 600;\n  justify-content: center;\n}\n\n.mobile-signin-btn ion-icon {\n  color: #fff;\n  font-size: 20px;\n}\n\n.mobile-signin-btn .mobile-auth-btn__arrow {\n  color: #fff;\n  opacity: 0.7;\n}\n\n.mobile-signin-btn:hover {\n  background: linear-gradient(135deg, var(--user-accent-dark) 0%, #8a6e4a 100%) !important;\n  box-shadow: 0 6px 16px rgba(var(--user-accent-rgb), 0.4);\n  transform: translateY(-1px);\n  color: #fff !important;\n}\n\n[data-theme=\"dark\"] .mobile-signin-btn {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n  color: #fff !important;\n}\n\n.mobile-logout-btn {\n  color: #dc2626;\n  background: #fef2f2;\n  border-color: rgba(220, 38, 38, 0.1);\n}\n\n.mobile-logout-btn:hover {\n  background: #fee2e2 !important;\n  border-color: rgba(220, 38, 38, 0.2);\n}\n\n[data-theme=\"dark\"] .mobile-logout-btn {\n  background: rgba(220, 38, 38, 0.1);\n  border-color: rgba(220, 38, 38, 0.2);\n  color: #f87171;\n}\n\n[data-theme=\"dark\"] .mobile-logout-btn ion-icon {\n  color: #f87171;\n}\n\n[data-theme=\"dark\"] .mobile-logout-btn:hover {\n  background: rgba(220, 38, 38, 0.15);\n}\n\n.mobile-inbox-btn .mobile-notif-badge {\n  position: static;\n  margin-left: auto;\n  background: var(--user-accent);\n  color: #fff;\n  font-size: 12px;\n  font-weight: 600;\n  padding: 2px 8px;\n  border-radius: 12px;\n  min-width: 20px;\n  text-align: center;\n}\n\n.mobile-profile-btn::after,\n.mobile-inbox-btn::after {\n  display: none;\n}\n\na:focus-visible,\nbutton:focus-visible,\ninput:focus-visible,\nselect:focus-visible,\ntextarea:focus-visible,\n[tabindex]:focus-visible {\n  outline: 3px solid var(--user-accent);\n  outline-offset: 2px;\n}\n\n.skip-link {\n  position: absolute;\n  top: -40px;\n  left: 0;\n  background: var(--accent-color);\n  color: #fff;\n  padding: 8px 16px;\n  z-index: 10000;\n  font-weight: 600;\n}\n\n.skip-link:focus {\n  top: 0;\n}\n\nhtml {\n  height: auto;\n  min-height: 100%;\n  overflow-x: hidden;\n  position: static;\n}\n\nbody:not(.loaded) {\n  overflow: hidden !important;\n  height: 100vh !important;\n  position: fixed !important;\n  width: 100% !important;\n  top: 0 !important;\n  left: 0 !important;\n}\n\nbody.loaded {\n  height: auto;\n  min-height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: static;\n}\n\nbody.loaded.nav-active {\n  overflow: hidden !important;\n}\n\n.scroll-progress {\n  position: fixed;\n  right: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 100;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  opacity: 0;\n  transition: opacity 0.4s ease;\n  pointer-events: none;\n}\n\n.scroll-progress.visible {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.scroll-progress__bar {\n  position: absolute;\n  width: 2px;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 2px;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.scroll-progress__bar::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: var(--progress, 0%);\n  background: var(--user-accent-light);\n  border-radius: 2px;\n  transition: height 0.15s ease-out;\n}\n\n.scroll-progress__sections {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  position: relative;\n  z-index: 1;\n}\n\n.scroll-progress__dot {\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: #fff;\n  border: 2px solid rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  position: relative;\n  transition: all 0.3s ease;\n  padding: 0;\n}\n\n.scroll-progress__dot:hover {\n  transform: scale(1.3);\n  border-color: var(--user-accent-light);\n}\n\n.scroll-progress__dot.active {\n  background: var(--user-accent-light);\n  border-color: var(--user-accent-light);\n  transform: scale(1.2);\n}\n\n.scroll-progress__label {\n  position: absolute;\n  right: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  white-space: nowrap;\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: #555;\n  background: #fff;\n  padding: 4px 10px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.2s ease, transform 0.2s ease;\n}\n\n.scroll-progress__dot:hover .scroll-progress__label {\n  opacity: 1;\n  transform: translateY(-50%) translateX(-4px);\n}\n\n@media (max-width: 768px) {\n  .scroll-progress {\n    display: none;\n  }\n}\n\n[data-theme=\"dark\"] .scroll-progress__bar {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .scroll-progress__dot {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n[data-theme=\"dark\"] .scroll-progress__dot:hover {\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .scroll-progress__dot.active {\n  background: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .scroll-progress__label {\n  background: #252542;\n  color: #fff;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n[data-high-contrast=\"true\"] .scroll-progress__bar {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n[data-high-contrast=\"true\"] .scroll-progress__bar::before {\n  background: #ffeb3b;\n}\n\n[data-high-contrast=\"true\"] .scroll-progress__dot {\n  background: #000;\n  border-color: #fff;\n  border-width: 3px;\n}\n\n[data-high-contrast=\"true\"] .scroll-progress__dot.active {\n  background: #ffeb3b;\n  border-color: #ffeb3b;\n}\n\n[data-high-contrast=\"true\"] .scroll-progress__label {\n  background: #000;\n  color: #ffeb3b;\n  border: 2px solid #fff;\n}\n\n.mb-readingProgress {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 4px;\n  background: rgba(0, 0, 0, 0.1);\n  z-index: 9999;\n}\n\n.mb-readingProgress__fill {\n  height: 100%;\n  width: 0%;\n  background: linear-gradient(90deg, #4a6fa5, var(--user-accent-light));\n  transition: width 0.1s ease-out;\n}\n\n[data-theme=\"dark\"] .mb-readingProgress {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.mb-ttsBtn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 14px;\n  background: transparent;\n  border: 1px solid #4a6fa5;\n  border-radius: 20px;\n  color: #4a6fa5;\n  font-size: 0.85rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.mb-ttsBtn:hover {\n  background: #4a6fa5;\n  color: #fff;\n}\n\n.mb-ttsBtn:focus-visible {\n  outline: 2px solid #4a6fa5;\n  outline-offset: 2px;\n}\n\n.mb-ttsBtn.is-playing {\n  background: var(--user-accent-light);\n  border-color: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n.mb-ttsBtn .tts-icon {\n  font-size: 1rem;\n}\n\n[data-theme=\"dark\"] .mb-ttsBtn {\n  border-color: var(--user-accent-light);\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-ttsBtn:hover {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n.mb-articleActions {\n  display: flex;\n  gap: 10px;\n  margin-top: 12px;\n  flex-wrap: wrap;\n}\n\n.mb-readingModeWrapper {\n  margin-top: 16px;\n}\n\n.mb-readingModeBtn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 18px;\n  background: #fff;\n  border: 2px solid #4a6fa5;\n  border-radius: 25px;\n  color: #4a6fa5;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n}\n\n.mb-readingModeBtn:hover {\n  background: #4a6fa5;\n  color: #fff;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(74, 111, 165, 0.25);\n}\n\n.mb-readingModeBtn.is-active {\n  background: #4a6fa5;\n  color: #fff;\n}\n\n.mb-readingModeBtn:focus-visible {\n  outline: 2px solid var(--user-accent-light);\n  outline-offset: 2px;\n}\n\n[data-theme=\"dark\"] .mb-readingModeBtn {\n  background: #252542;\n  border-color: var(--user-accent-light);\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-readingModeBtn:hover,\n[data-theme=\"dark\"] .mb-readingModeBtn.is-active {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\nbody.reading-mode {\n  --reading-bg: #faf9f6;\n  --reading-text: #2d2d2d;\n  --reading-max-width: 720px;\n}\n\nbody.reading-mode .mb-blogGrid {\n  max-width: var(--reading-max-width);\n  margin: 0 auto;\n}\n\nbody.reading-mode .mb-posts {\n  width: 100%;\n}\n\nbody.reading-mode .mb-sidebar {\n  display: none;\n}\n\nbody.reading-mode .mb-postCard,\nbody.reading-mode .mb-listPost,\nbody.reading-mode .mb-miniCard {\n  background: var(--reading-bg);\n  border-radius: 12px;\n  padding: 24px;\n  margin-bottom: 20px;\n}\n\nbody.reading-mode .mb-postCard__title,\nbody.reading-mode .mb-listPost__title,\nbody.reading-mode .mb-miniCard__title {\n  font-size: 1.4rem;\n  line-height: 1.5;\n}\n\nbody.reading-mode .mb-postCard__excerpt,\nbody.reading-mode .mb-listPost__excerpt {\n  font-size: 1.1rem;\n  line-height: 1.8;\n  color: var(--reading-text);\n}\n\nbody.reading-mode .mb-2up {\n  grid-template-columns: 1fr;\n}\n\n[data-theme=\"dark\"] body.reading-mode,\nbody.reading-mode[data-theme=\"dark\"] {\n  --reading-bg: #1e1e3a;\n  --reading-text: #e0e0e0;\n}\n\n.mb-postCard.is-hovered,\n.mb-postCard.is-focused,\n.mb-listPost.is-hovered,\n.mb-listPost.is-focused,\n.mb-miniCard.is-hovered,\n.mb-miniCard.is-focused {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);\n}\n\n.mb-postCard:focus-visible,\n.mb-listPost:focus-visible,\n.mb-miniCard:focus-visible {\n  outline: 3px solid #4a6fa5;\n  outline-offset: 4px;\n}\n\n[data-theme=\"dark\"] .mb-postCard:focus-visible,\n[data-theme=\"dark\"] .mb-listPost:focus-visible,\n[data-theme=\"dark\"] .mb-miniCard:focus-visible {\n  outline-color: var(--user-accent-light);\n}\n\n[data-high-contrast=\"true\"] .mb-readingModeBtn {\n  border-width: 3px;\n}\n\n[data-high-contrast=\"true\"] body.reading-mode .mb-postCard,\n[data-high-contrast=\"true\"] body.reading-mode .mb-listPost {\n  border: 2px solid #000;\n}\n\n.mb-tts-badge {\n  background: rgba(74, 111, 165, 0.15);\n  color: #4a6fa5;\n  padding: 2px 8px;\n  border-radius: 10px;\n  font-size: 0.8rem;\n}\n\n.mb-tts-badge-overlay {\n  position: absolute;\n  bottom: 12px;\n  left: 12px;\n  background: rgba(0, 0, 0, 0.75);\n  color: #fff;\n  padding: 6px 12px;\n  border-radius: 20px;\n  font-size: 0.85rem;\n  z-index: 2;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  animation: audio-pulse 2.5s ease-in-out infinite;\n  transition: transform 0.25s ease, background 0.25s ease;\n}\n\n.mb-tts-badge-overlay:hover {\n  transform: scale(1.08);\n  background: var(--accent-color, #c9a227);\n}\n\n@keyframes audio-pulse {\n  0%, 100% {\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  }\n  50% {\n    box-shadow: 0 2px 12px rgba(201, 162, 39, 0.4), 0 0 20px rgba(201, 162, 39, 0.2);\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .mb-tts-badge-overlay {\n    animation: none;\n  }\n  \n  .mb-tts-badge-overlay:hover {\n    transform: none;\n  }\n  \n  .mb-postCard,\n  .mb-miniCard,\n  .mb-listPost {\n    transition: none;\n  }\n  \n  .mb-postCard:hover,\n  .mb-miniCard:hover,\n  .mb-listPost:hover {\n    transform: none;\n  }\n  \n  .mb-postCard::before,\n  .mb-miniCard::before {\n    transition: none;\n  }\n  \n  .mb-postCard:hover .mb-postCard__img,\n  .mb-miniCard:hover .mb-miniCard__img,\n  .mb-listPost:hover .mb-listPost__img {\n    transform: none;\n  }\n  \n  .mb-postCard__pill,\n  .mb-miniCard__pill {\n    transition: none;\n  }\n  \n  .mb-postCard:hover .mb-postCard__pill,\n  .mb-miniCard:hover .mb-miniCard__pill {\n    transform: none;\n  }\n  \n  .mb-new-badge {\n    animation: none;\n  }\n  \n  .mb-linkArrow:hover {\n    transform: none;\n  }\n  \n  .mb-linkArrow::after {\n    transition: none;\n  }\n}\n\n.mb-postCard__imgWrap,\n.mb-listPost__imgWrap {\n  position: relative;\n}\n\n[data-theme=\"dark\"] .mb-tts-badge {\n  background: rgba(214, 189, 159, 0.2);\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-tts-badge-overlay {\n  background: rgba(214, 189, 159, 0.9);\n  color: #1a1a2e;\n}\n\n[data-high-contrast=\"true\"] .mb-readingProgress {\n  background: #000;\n  height: 6px;\n}\n\n[data-high-contrast=\"true\"] .mb-readingProgress__fill {\n  background: #ffeb3b;\n}\n\n[data-high-contrast=\"true\"] .mb-ttsBtn {\n  border-width: 3px;\n  border-color: #000;\n  color: #000;\n  font-weight: 700;\n}\n\n[data-high-contrast=\"true\"] .mb-ttsBtn:hover,\n[data-high-contrast=\"true\"] .mb-ttsBtn.is-playing {\n  background: #ffeb3b;\n  border-color: #000;\n  color: #000;\n}\n\n[data-high-contrast=\"true\"] .mb-readingModeBtn {\n  border-width: 3px;\n  border-color: #000;\n  color: #000;\n  font-weight: 700;\n}\n\n[data-high-contrast=\"true\"] .mb-readingModeBtn:hover,\n[data-high-contrast=\"true\"] .mb-readingModeBtn.is-active {\n  background: #ffeb3b;\n  border-color: #000;\n  color: #000;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .mb-readingProgress__fill {\n    transition: none;\n  }\n\n  .mb-postCard,\n  .mb-listPost,\n  .mb-miniCard {\n    transition: none;\n  }\n}\n\n.navbar-action-btn {\n  position: relative;\n}\n\n.notif-badge {\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  min-width: 18px;\n  height: 18px;\n  padding: 0 5px;\n  background: #dc3545;\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.65rem;\n  font-weight: 700;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px rgba(220, 53, 69, 0.4);\n  animation: notif-bounce 0.5s ease;\n  z-index: 10;\n  cursor: pointer;\n}\n\n@keyframes notif-bounce {\n\n  0%,\n  100% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(1.2);\n  }\n}\n\n.crisis-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 18px;\n  background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  font-weight: 600;\n  border-radius: 25px;\n  text-decoration: none;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);\n  animation: crisis-pulse 2s infinite;\n  white-space: nowrap;\n  flex-shrink: 0;\n  max-width: none;\n  overflow: visible;\n}\n\n.crisis-btn ion-icon {\n  font-size: 1.1rem;\n}\n\n.crisis-btn:hover {\n  background: linear-gradient(135deg, #c82333 0%, #a71d2a 100%);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(220, 53, 69, 0.5);\n}\n\n@keyframes crisis-pulse {\n\n  0%,\n  100% {\n    box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);\n  }\n\n  50% {\n    box-shadow: 0 4px 25px rgba(220, 53, 69, 0.6);\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .crisis-btn {\n    animation: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .crisis-btn {\n    padding: 10px;\n    border-radius: 50%;\n  }\n\n  .crisis-btn span {\n    display: none;\n  }\n\n  .crisis-btn ion-icon {\n    font-size: 1.3rem;\n  }\n}\n\n.navbar-search {\n  position: relative;\n  display: flex;\n  align-items: center;\n  z-index: 102;\n}\n\n.navbar-search__input {\n  position: absolute;\n  right: 0;\n  width: 0;\n  padding: 0;\n  border: none;\n  outline: none;\n  border-radius: 20px;\n  background: transparent;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.875rem;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  opacity: 0;\n  overflow: hidden;\n}\n\n.navbar-search.is-open .navbar-search__input {\n  width: 200px;\n  padding: 8px 40px 8px 15px;\n  background: #f5f5f5;\n  opacity: 1;\n}\n\n.navbar-search__btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  color: #1a1a2e;\n  border-radius: 8px;\n  transition: all 0.3s ease;\n}\n\n.navbar-search.is-open .navbar-search__btn {\n  position: absolute;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 36px;\n  height: 36px;\n}\n\n.navbar-search__btn:hover {\n  background: rgba(var(--user-accent-rgb), 0.1);\n  color: var(--user-accent);\n}\n\n.navbar-search__btn ion-icon {\n  font-size: 1.4rem;\n}\n\n\n.navbar-search__results {\n  position: absolute;\n  top: calc(100% + 10px);\n  right: 0;\n  width: 300px;\n  max-height: 400px;\n  overflow-y: auto;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  display: none;\n  z-index: 1001;\n}\n\n.navbar-search__results.is-visible {\n  display: block;\n}\n\n.navbar-search__item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 15px;\n  text-decoration: none;\n  color: #1a1a2e;\n  transition: background 0.2s ease;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.navbar-search__item:last-child {\n  border-bottom: none;\n}\n\n.navbar-search__item:hover {\n  background: var(--user-accent-soft);\n}\n\n.navbar-search__item-icon {\n  width: 36px;\n  height: 36px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 1rem;\n}\n\n.navbar-search__item-content {\n  flex: 1;\n}\n\n.navbar-search__item-title {\n  font-weight: 600;\n  font-size: 0.875rem;\n  margin-bottom: 2px;\n}\n\n.navbar-search__item-type {\n  font-size: 0.75rem;\n  color: #6b6b8a;\n}\n\n.navbar-search__empty {\n  padding: 20px;\n  text-align: center;\n  color: #6b6b8a;\n  font-size: 0.875rem;\n}\n\n[data-theme=\"dark\"] .navbar-search.is-open .navbar-search__input {\n  background: #252542;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-search__btn {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-search__btn:hover {\n  background: rgba(var(--user-accent-rgb), 0.2);\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .navbar-search__results {\n  background: #1a1a2e;\n  border: 1px solid #3a3a5a;\n}\n\n[data-theme=\"dark\"] .navbar-search__item {\n  color: #fff;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .navbar-search__item:hover {\n  background: #252542;\n}\n\n@media (max-width: 768px) {\n  .navbar-search {\n    display: none;\n  }\n}\n\n.navbar-settings-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border: none;\n  background: transparent;\n  color: #1a1a2e;\n  cursor: pointer;\n  border-radius: 8px;\n  transition: all 0.3s ease;\n}\n\n.navbar-settings-btn:hover {\n  background: rgba(var(--user-accent-rgb), 0.1);\n  color: var(--user-accent);\n}\n\n.navbar-settings-btn ion-icon {\n  font-size: 1.4rem;\n}\n\n[data-theme=\"dark\"] .navbar-settings-btn {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-settings-btn:hover {\n  background: rgba(var(--user-accent-rgb), 0.2);\n  color: var(--user-accent);\n}\n\n.navbar-item {\n  position: relative;\n}\n\n.navbar-dropdown {\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%) translateY(10px);\n  min-width: 220px;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  padding: 10px 0;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 1000;\n}\n\n.navbar-item:hover .navbar-dropdown {\n  opacity: 1;\n  visibility: visible;\n  transform: translateX(-50%) translateY(0);\n}\n\n.navbar-dropdown__item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 20px;\n  color: #1a1a2e;\n  text-decoration: none;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n}\n\n.navbar-dropdown__item:hover {\n  background: var(--user-accent-soft);\n  color: var(--user-accent);\n}\n\n.navbar-dropdown__item ion-icon {\n  font-size: 1.1rem;\n  color: var(--user-accent);\n}\n\n.navbar-dropdown__divider {\n  height: 1px;\n  background: var(--user-accent-light);\n  margin: 8px 0;\n}\n\n[data-theme=\"dark\"] .navbar-dropdown {\n  background: #1a1a2e;\n  border: 1px solid #3a3a5a;\n}\n\n[data-theme=\"dark\"] .navbar-dropdown__item {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .navbar-dropdown__item:hover {\n  background: #252542;\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .navbar-dropdown__divider {\n  background: #3a3a5a;\n}\n\n@media (max-width: 1024px) {\n  .navbar-dropdown {\n    display: none !important;\n  }\n}\n\n.mb-moodcheck {\n  background: linear-gradient(135deg, var(--user-accent-soft) 0%, #fff 100%);\n  padding: 60px 20px;\n  text-align: center;\n}\n\n.mb-moodcheck__wrap {\n  max-width: 800px;\n  margin: 0 auto;\n}\n\n.mb-moodcheck__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.75rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 10px;\n}\n\n.mb-moodcheck__subtitle {\n  font-size: 1rem;\n  color: #6b6b8a;\n  margin-bottom: 30px;\n}\n\n.mb-moodcheck__options {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  flex-wrap: wrap;\n}\n\n.mb-moodcheck__btn {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  padding: 20px 25px;\n  background: #fff;\n  border: 2px solid var(--user-accent-light);\n  border-radius: 16px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  min-width: 100px;\n}\n\n.mb-moodcheck__btn:hover {\n  border-color: var(--user-accent-light);\n  transform: translateY(-4px);\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);\n}\n\n.mb-moodcheck__btn.is-selected {\n  border-color: var(--user-accent);\n  background: linear-gradient(135deg, var(--user-accent-soft) 0%, var(--user-accent-soft) 100%);\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.mb-moodcheck__emoji {\n  font-size: 2.5rem;\n}\n\n.mb-moodcheck__label {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #1a1a2e;\n}\n\n.mb-moodcheck__result {\n  margin-top: 30px;\n  padding: 20px;\n  background: #fff;\n  border-radius: 12px;\n  border: 1px solid var(--user-accent-light);\n  animation: fadeInUp 0.4s ease;\n}\n\n.mb-moodcheck__message {\n  font-size: 1rem;\n  color: #4a4a68;\n  margin-bottom: 15px;\n}\n\n.mb-moodcheck__link {\n  display: inline-block;\n  padding: 12px 28px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  font-weight: 600;\n  border-radius: 30px;\n  text-decoration: none;\n  transition: all 0.3s ease;\n}\n\n.mb-moodcheck__link:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb), 0.4);\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n[data-theme=\"dark\"] .mb-moodcheck {\n  background: linear-gradient(135deg, #1a1a2e 0%, #252542 100%);\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__subtitle {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__btn {\n  background: #252542;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__btn:hover {\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__btn.is-selected {\n  background: #2a2a4a;\n  border-color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__label {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__result {\n  background: #252542;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .mb-moodcheck__message {\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.mb-sources {\n  background: #fff;\n  padding: 60px 20px;\n  text-align: center;\n}\n\n.mb-sources__wrap {\n  max-width: 1000px;\n  margin: 0 auto;\n}\n\n.mb-sources__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 8px;\n  text-transform: uppercase;\n  letter-spacing: 2px;\n}\n\n.mb-sources__subtitle {\n  font-size: 1rem;\n  color: #6b6b8a;\n  margin-bottom: 40px;\n}\n\n.mb-sources__grid {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 30px;\n  flex-wrap: wrap;\n}\n\n.mb-sources__item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  padding: 20px;\n  text-decoration: none;\n  transition: all 0.3s ease;\n  border-radius: 12px;\n}\n\n.mb-sources__item:hover {\n  transform: translateY(-4px);\n  background: var(--user-accent-soft);\n}\n\n.mb-sources__logo {\n  width: 70px;\n  height: 70px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 15px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.mb-sources__abbr {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  font-weight: 700;\n  color: #fff;\n  letter-spacing: 1px;\n}\n\n.mb-sources__name {\n  font-size: 0.75rem;\n  color: #6b6b8a;\n  max-width: 120px;\n  line-height: 1.3;\n}\n\n[data-theme=\"dark\"] .mb-sources {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .mb-sources__title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-sources__subtitle {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .mb-sources__item:hover {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .mb-sources__name {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n@media (max-width: 768px) {\n  .mb-moodcheck__options {\n    gap: 10px;\n  }\n\n  .mb-moodcheck__btn {\n    padding: 15px 18px;\n    min-width: 80px;\n  }\n\n  .mb-moodcheck__emoji {\n    font-size: 2rem;\n  }\n\n  .mb-sources__grid {\n    gap: 20px;\n  }\n\n  .mb-sources__logo {\n    width: 60px;\n    height: 60px;\n  }\n}\n\n.mb-mention-dropdown {\n  background: var(--bg-primary, #fff);\n  border: 1px solid var(--border-color, #e0e0e0);\n  border-radius: 8px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  max-height: 200px;\n  overflow-y: auto;\n  z-index: 1000;\n}\n\n.mb-mention-item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 12px;\n  cursor: pointer;\n  transition: background 0.15s ease;\n}\n\n.mb-mention-item:hover,\n.mb-mention-item.active {\n  background: var(--bg-tertiary, #f5f5f5);\n}\n\n.mb-mention-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.mb-mention-name {\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: var(--text-primary, #333);\n}\n\n[data-theme=\"dark\"] .mb-mention-dropdown {\n  background: #2d2b3d;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-mention-item:hover,\n[data-theme=\"dark\"] .mb-mention-item.active {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-mention-name {\n  color: #fff;\n}\n\n.mb-inbox-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n  padding-top: 80px;\n  z-index: 1000;\n}\n\n.mb-inbox-modal[hidden] {\n  display: none !important;\n}\n\n.mb-inbox-content {\n  background: var(--bg-primary, #fff);\n  border-radius: 12px;\n  width: 90%;\n  max-width: 480px;\n  max-height: 70vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\n}\n\n.mb-inbox-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--border-color, #e0e0e0);\n}\n\n.mb-inbox-title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--text-primary, #333);\n}\n\n.mb-inbox-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.mb-inbox-mark-read {\n  background: none;\n  border: none;\n  color: var(--user-accent);\n  font-size: 0.85rem;\n  cursor: pointer;\n  padding: 4px 8px;\n}\n\n.mb-inbox-close {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: var(--text-secondary, #666);\n  line-height: 1;\n}\n\n.mb-inbox-body {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px 0;\n}\n\n.mb-inbox-loading,\n.mb-inbox-empty {\n  padding: 40px 20px;\n  text-align: center;\n  color: var(--text-secondary, #666);\n}\n\n.mb-notif-item {\n  display: flex;\n  gap: 12px;\n  padding: 12px 20px;\n  cursor: pointer;\n  transition: background 0.15s ease;\n  border-bottom: 1px solid var(--border-color, #f0f0f0);\n}\n\n.mb-notif-item:hover {\n  background: var(--bg-tertiary, #f8f8f8);\n}\n\n.mb-notif-item.mb-notif-unread {\n  background: rgba(var(--user-accent-rgb), 0.08);\n}\n\n.mb-notif-icon {\n  font-size: 1.5rem;\n  flex-shrink: 0;\n}\n\n.mb-notif-content {\n  flex: 1;\n  min-width: 0;\n}\n\n.mb-notif-text {\n  font-size: 0.9rem;\n  color: var(--text-primary, #333);\n  margin-bottom: 4px;\n}\n\n.mb-notif-preview {\n  font-size: 0.8rem;\n  color: var(--text-secondary, #666);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-bottom: 4px;\n}\n\n.mb-notif-time {\n  font-size: 0.75rem;\n  color: var(--text-tertiary, #999);\n}\n\n[data-theme=\"dark\"] .mb-inbox-content {\n  background: #2d2b3d;\n}\n\n[data-theme=\"dark\"] .mb-inbox-header {\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-inbox-title {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-inbox-close {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .mb-notif-item {\n  border-color: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .mb-notif-item:hover {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .mb-notif-text {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-notif-preview {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n.mb-mention {\n  color: var(--user-accent);\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.mb-mention:hover {\n  text-decoration: underline;\n}\n\n@media (max-width: 1024px) {\n\n  .navbar-item.has-submenu .submenu-chevron {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: auto;\n    font-size: 1.1rem;\n    opacity: 0.5;\n    transition: transform 0.25s ease, opacity 0.25s ease;\n  }\n\n  .navbar-item.has-submenu .navbar-link:hover .submenu-chevron {\n    opacity: 0.8;\n  }\n\n  \n  .navbar-submenu-panel {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: var(--user-accent-soft);\n    z-index: 100;\n    transform: translateX(100%);\n    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    display: flex;\n    flex-direction: column;\n    overflow-y: auto;\n  }\n\n  .navbar-submenu-panel.active {\n    transform: translateX(0);\n  }\n\n  [data-theme=\"dark\"] .navbar-submenu-panel {\n    background: #2d2b3d;\n  }\n\n  .submenu-header {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 20px;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n  }\n\n  [data-theme=\"dark\"] .submenu-header {\n    border-bottom-color: rgba(255, 255, 255, 0.1);\n  }\n\n  .submenu-back-btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 40px;\n    height: 40px;\n    border-radius: 10px;\n    background: rgba(0, 0, 0, 0.05);\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    cursor: pointer;\n    transition: all 0.2s ease;\n    color: #1a1a2e;\n  }\n\n  .submenu-back-btn:hover {\n    background: rgba(0, 0, 0, 0.1);\n  }\n\n  [data-theme=\"dark\"] .submenu-back-btn {\n    background: rgba(255, 255, 255, 0.08);\n    border-color: rgba(255, 255, 255, 0.15);\n    color: #fff;\n  }\n\n  [data-theme=\"dark\"] .submenu-back-btn:hover {\n    background: rgba(255, 255, 255, 0.12);\n  }\n\n  .submenu-back-btn ion-icon {\n    font-size: 1.3rem;\n  }\n\n  .submenu-title {\n    font-size: 1.1rem;\n    font-weight: 600;\n    color: #1a1a2e;\n    margin: 0;\n  }\n\n  [data-theme=\"dark\"] .submenu-title {\n    color: #fff;\n  }\n\n  .submenu-items {\n    padding: 15px;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .submenu-item {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 14px 16px;\n    border-radius: 12px;\n    background: rgba(0, 0, 0, 0.04);\n    border: 1px solid rgba(0, 0, 0, 0.06);\n    color: #1a1a2e;\n    text-decoration: none;\n    font-size: 0.95rem;\n    transition: all 0.2s ease;\n    min-height: 48px;\n  }\n\n  .submenu-item:hover {\n    background: rgba(0, 0, 0, 0.08);\n    border-color: rgba(0, 0, 0, 0.1);\n  }\n\n  [data-theme=\"dark\"] .submenu-item {\n    background: rgba(255, 255, 255, 0.06);\n    border-color: rgba(255, 255, 255, 0.1);\n    color: #fff;\n  }\n\n  [data-theme=\"dark\"] .submenu-item:hover {\n    background: rgba(255, 255, 255, 0.1);\n    border-color: rgba(255, 255, 255, 0.15);\n  }\n\n  .submenu-item ion-icon {\n    font-size: 1.2rem;\n    color: var(--user-accent);\n    flex-shrink: 0;\n  }\n\n  [data-theme=\"dark\"] .submenu-item ion-icon {\n    color: var(--user-accent-grad-end);\n  }\n\n  .submenu-divider {\n    height: 1px;\n    background: rgba(0, 0, 0, 0.08);\n    margin: 8px 0;\n  }\n\n  [data-theme=\"dark\"] .submenu-divider {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  \n  .navbar.submenu-open .navbar-scroll-content,\n  .navbar.submenu-open .mobile-settings-section {\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.2s ease;\n  }\n\n  \n  .submenu-chevron {\n    display: flex !important;\n  }\n}\n\n@media (min-width: 1025px) {\n  .submenu-chevron {\n    display: none !important;\n  }\n\n  .navbar-submenu-panel {\n    display: none !important;\n  }\n}\n\n@keyframes hapticTap {\n  0% { transform: scale(1); }\n  40% { transform: scale(0.95); }\n  100% { transform: scale(1); }\n}\n\n.haptic-tap {\n  animation: hapticTap 0.15s ease-out;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .haptic-tap {\n    animation: none;\n  }\n}\n","path":null,"size_bytes":228269,"size_tokens":null},"mindspace-build/articles/article.css":{"content":"/* === READING PROGRESS === */\n.article-reading-progress {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 4px;\n  background: rgba(0, 0, 0, 0.1);\n  z-index: 9999;\n}\n\n.article-reading-progress__fill {\n  height: 100%;\n  width: 0%;\n  background: var(--user-accent, #6DB3F2);\n  transition: width 0.1s ease-out;\n}\n\n[data-theme=\"dark\"] .article-reading-progress {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n/* === HEADER === */\n.article-header {\n  background: var(--user-accent-light);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 16px 0;\n  position: sticky;\n  top: 4px;\n  z-index: 100;\n}\n\n[data-theme=\"dark\"] .article-header {\n  background: #252542;\n  border-bottom-color: rgba(255, 255, 255, 0.1);\n}\n\n/* === NAVIGATION === */\n.article-nav {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 12px;\n}\n\n.article-back-link {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  color: var(--user-accent, #6DB3F2);\n  text-decoration: none;\n  font-weight: 500;\n  padding: 8px 16px;\n  border-radius: 20px;\n  background: rgba(var(--user-accent-rgb, 109, 179, 242), 0.1);\n  transition: all 0.2s ease;\n}\n\n.article-back-link:hover {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .article-back-link {\n  color: var(--user-accent, #6DB3F2);\n  background: rgba(var(--user-accent-rgb, 109, 179, 242), 0.1);\n}\n\n[data-theme=\"dark\"] .article-back-link:hover {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n}\n\n.article-source-link {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  color: #666;\n  text-decoration: none;\n  font-size: 0.9rem;\n  transition: color 0.2s;\n}\n\n.article-source-link:hover {\n  color: var(--user-accent, #6DB3F2);\n}\n\n[data-theme=\"dark\"] .article-source-link {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .article-source-link:hover {\n  color: var(--user-accent, #6DB3F2);\n}\n\n/* === MAIN === */\n.article-main {\n  padding-bottom: 60px;\n  overflow-x: visible; \n}\n\n.article-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n  overflow-x: visible; \n}\n\n/* === LAYOUT === */\n.article-layout {\n  overflow: visible;\n}\n\n/* === HERO === */\n.article-hero {\n  position: relative;\n  width: 100%;\n  height: 400px;\n  border-radius: 16px;\n  overflow: hidden;\n  margin-bottom: 32px;\n}\n\n.article-hero__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.article-hero__overlay {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.5) 40%, rgba(0,0,0,0.2) 70%, transparent 100%);\n}\n\n.article-hero__content {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 32px;\n  color: #fff;\n}\n\n.article-meta {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 12px;\n  font-size: 0.9rem;\n  flex-wrap: wrap;\n}\n\n.article-category {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-weight: 600;\n  font-size: 0.8rem;\n  text-transform: uppercase;\n}\n\n.article-meta__dot {\n  opacity: 0.6;\n}\n\n.article-title {\n  font-size: 2.5rem;\n  font-weight: 700;\n  line-height: 1.2;\n  margin-bottom: 12px;\n  text-shadow: 0 2px 10px rgba(0,0,0,0.5);\n  color: #fff;\n}\n\n.article-subtitle {\n  font-size: 1.1rem;\n  line-height: 1.6;\n  max-width: 700px;\n  color: #fff;\n  text-shadow: 0 1px 6px rgba(0,0,0,0.4);\n}\n\n/* === TTS PLAYER === */\n.article-tts-player {\n  background: linear-gradient(135deg, #3d3a50 0%, #2d2b3d 100%);\n  border-radius: 16px;\n  padding: 24px;\n  margin-bottom: 32px;\n  color: #fff;\n  box-shadow: 0 8px 32px rgba(61, 58, 80, 0.3);\n}\n\n[data-theme=\"dark\"] .article-tts-player {\n  background: linear-gradient(135deg, #252542 0%, #1a1a2e 100%);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n}\n\n.tts-player__header {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n.tts-player__icon {\n  font-size: 1.5rem;\n}\n\n.tts-player__title {\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n\n.tts-player__controls {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.tts-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 48px;\n  height: 48px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.9);\n  color: #3d3a50;\n  font-size: 1.1rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n\n.tts-btn i,\n.tts-btn svg {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  fill: currentColor;\n}\n\n.tts-btn:hover {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n  transform: scale(1.08);\n}\n\n.tts-btn:focus-visible {\n  outline: 3px solid var(--user-accent, #6DB3F2);\n  outline-offset: 2px;\n}\n\n.tts-btn--play,\n.tts-btn--pause {\n  width: 64px;\n  height: 64px;\n  font-size: 1.5rem;\n  background: #fff;\n  color: #3d3a50;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n}\n\n.tts-btn--play:hover,\n.tts-btn--pause:hover {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .tts-btn {\n  background: rgba(255, 255, 255, 0.15);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .tts-btn:hover {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .tts-btn--play,\n[data-theme=\"dark\"] .tts-btn--pause {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n}\n\n.tts-btn--stop {\n  background: #ff7b7b;\n  color: #fff;\n}\n\n.tts-btn--stop:hover {\n  background: #ff5252;\n}\n\n[data-theme=\"dark\"] .tts-btn--stop {\n  background: #ff6b6b;\n  color: #fff;\n}\n\n.tts-btn--skip {\n  width: 44px;\n  height: 44px;\n  font-size: 1rem;\n}\n\n.tts-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n\n.tts-player__progress {\n  margin-bottom: 16px;\n}\n\n.tts-progress-bar {\n  width: 100%;\n  height: 6px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 3px;\n  overflow: hidden;\n  margin-bottom: 8px;\n}\n\n.tts-progress-bar__fill {\n  height: 100%;\n  width: 0%;\n  background: var(--user-accent, #6DB3F2);\n  border-radius: 3px;\n  transition: width 0.3s ease;\n}\n\n.tts-status {\n  font-size: 0.85rem;\n  opacity: 0.8;\n}\n\n.tts-player__speed {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 0.9rem;\n}\n\n.tts-speed-select {\n  padding: 6px 12px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  font-size: 0.9rem;\n  cursor: pointer;\n}\n\n.tts-speed-select option {\n  background: #3d3a50;\n  color: #fff;\n}\n\n.tts-hint {\n  margin-top: 12px;\n  font-size: 0.8rem;\n  opacity: 0.6;\n}\n\n.article-layout {\n  display: grid;\n  grid-template-columns: 280px 1fr;\n  gap: 40px;\n  padding: 32px 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n/* === TABLE OF CONTENTS === */\n.article-toc {\n  width: 100%;\n  position: sticky;\n  top: 100px;\n  max-height: calc(100vh - 120px);\n  overflow-y: auto;\n  align-self: start;\n}\n\n.article-layout.toc-hidden {\n  grid-template-columns: 1fr;\n  max-width: 800px;\n}\n\n.article-layout.toc-hidden .article-toc {\n  display: none;\n}\n\n/* === ARTICLE CONTENT === */\n.article-content {\n  max-width: 720px;\n  background: #fff;\n  padding: 32px;\n  border-radius: 12px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);\n  user-select: text;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n}\n\n[data-theme=\"dark\"] .article-content {\n  background: #1e1e32;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);\n}\n\n@media (max-width: 900px) {\n  .article-layout {\n    grid-template-columns: 1fr;\n    padding: 16px;\n  }\n  \n  \n  .article-toc {\n    display: none;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    top: auto;\n    max-height: 60vh;\n    border-radius: 20px 20px 0 0;\n    z-index: 1000;\n    transform: translateY(100%);\n    transition: transform 0.3s ease, opacity 0.3s ease;\n    opacity: 0;\n    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);\n  }\n  \n  .article-toc.mobile-visible {\n    display: block;\n    transform: translateY(0);\n    opacity: 1;\n  }\n  \n  .article-toc.collapsed {\n    width: auto;\n    padding: 16px;\n  }\n  \n  .article-toc.collapsed .article-toc__text {\n    display: inline;\n  }\n  \n  .article-toc.collapsed .article-toc__pill {\n    width: auto;\n    height: auto;\n    padding: 10px 14px;\n  }\n  \n  .article-toc.collapsed .article-toc__num {\n    margin-right: 10px;\n  }\n  \n  .article-toc__header {\n    padding-bottom: 12px;\n  }\n  \n  .article-toc__toggle {\n    display: none;\n  }\n}\n\n/* === MOBILE TOC === */\n.mobile-toc-toggle {\n  display: none;\n  position: fixed;\n  bottom: 24px;\n  right: 24px;\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n  border: none;\n  box-shadow: 0 4px 16px rgba(var(--user-accent-rgb, 109, 179, 242), 0.35);\n  cursor: pointer;\n  z-index: 999;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.mobile-toc-toggle:hover {\n  transform: scale(1.05);\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb, 109, 179, 242), 0.4);\n}\n\n.mobile-toc-toggle:active {\n  transform: scale(0.95);\n}\n\n.mobile-toc-toggle svg {\n  width: 24px;\n  height: 24px;\n}\n\n.mobile-toc-toggle.active {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mobile-toc-toggle {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n  box-shadow: 0 4px 16px rgba(var(--user-accent-rgb, 109, 179, 242), 0.35);\n}\n\n[data-theme=\"dark\"] .mobile-toc-toggle:hover {\n  box-shadow: 0 6px 20px rgba(var(--user-accent-rgb, 109, 179, 242), 0.4);\n}\n\n[data-theme=\"dark\"] .mobile-toc-toggle.active {\n  background: var(--user-accent-hover, #5CA3E6);\n  color: #fff;\n}\n\n/* === MOBILE TOC OVERLAY === */\n.mobile-toc-overlay {\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 998;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.mobile-toc-overlay.visible {\n  display: block;\n  opacity: 1;\n}\n\n[data-theme=\"dark\"] .mobile-toc-overlay {\n  background: rgba(0, 0, 0, 0.7);\n}\n\n.mobile-toc-close {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: #f0f0f0;\n  border: none;\n  cursor: pointer;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  color: #666;\n  transition: all 0.2s ease;\n}\n\n.mobile-toc-close:hover {\n  background: #e0e0e0;\n  color: #333;\n}\n\n[data-theme=\"dark\"] .mobile-toc-close {\n  background: #3d3a50;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .mobile-toc-close:hover {\n  background: #4d4a60;\n  color: #fff;\n}\n\n@media (max-width: 900px) {\n  .mobile-toc-toggle {\n    display: flex;\n  }\n  \n  .mobile-toc-close {\n    display: flex;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .article-toc,\n  .mobile-toc-toggle,\n  .mobile-toc-overlay {\n    transition: none;\n  }\n}\n\n.article-toc {\n  background: #ffffff;\n  border-radius: 16px;\n  padding: 16px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  display: flex;\n  flex-direction: column;\n  transition: all 0.3s ease;\n}\n\n.article-toc.collapsed {\n  display: none;\n}\n\n[data-theme=\"dark\"] .article-toc {\n  background: #2d2b3d;\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);\n}\n\n.article-toc__header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n  flex-shrink: 0;\n}\n\n[data-theme=\"dark\"] .article-toc__header {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.article-toc__progress {\n  flex: 1;\n  height: 4px;\n  background: #e8e8e8;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n[data-theme=\"dark\"] .article-toc__progress {\n  background: #3d3a50;\n}\n\n.article-toc__progress-bar {\n  height: 100%;\n  width: 0%;\n  background: var(--user-accent, #6DB3F2);\n  border-radius: 4px;\n  transition: width 0.2s ease;\n}\n\n[data-theme=\"dark\"] .article-toc__progress-bar {\n  background: var(--user-accent, #6DB3F2);\n}\n\n.article-toc__toggle {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  border: none;\n  background: #f0f0f0;\n  border-radius: 8px;\n  cursor: pointer;\n  color: #666;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n}\n\n.article-toc__toggle:hover {\n  background: #e0e0e0;\n  color: #333;\n}\n\n.article-toc__toggle svg {\n  transition: transform 0.3s ease;\n}\n\n[data-theme=\"dark\"] .article-toc__toggle {\n  background: #3d3a50;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .article-toc__toggle:hover {\n  background: #4d4a60;\n  color: #fff;\n}\n\n.article-toc-show-btn {\n  position: fixed;\n  bottom: 30px;\n  left: 30px;\n  height: 48px;\n  padding: 0 20px;\n  border-radius: 24px;\n  background: var(--user-accent, #6DB3F2);\n  color: white;\n  border: 2px solid white;\n  cursor: pointer;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  box-shadow: 0 4px 20px rgba(var(--user-accent-rgb, 109, 179, 242), 0.3);\n  z-index: 1000;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.article-toc-show-btn:hover {\n  transform: scale(1.05);\n  background: var(--user-accent-hover, #5CA3E6);\n  box-shadow: 0 6px 24px rgba(var(--user-accent-rgb, 109, 179, 242), 0.4);\n}\n\n.article-toc-show-btn.visible {\n  display: flex;\n}\n\n[data-theme=\"dark\"] .article-toc-show-btn {\n  background: var(--user-accent, #6DB3F2);\n  border-color: #2d2b3d;\n  color: #fff;\n  box-shadow: 0 4px 20px rgba(var(--user-accent-rgb, 109, 179, 242), 0.4);\n}\n\n[data-theme=\"dark\"] .article-toc-show-btn:hover {\n  background: var(--user-accent-hover, #5CA3E6);\n  box-shadow: 0 6px 24px rgba(var(--user-accent-rgb, 109, 179, 242), 0.5);\n}\n\n[data-theme=\"dark\"] .article-toc-show-btn {\n  box-shadow: 0 4px 20px rgba(var(--user-accent-rgb, 109, 179, 242), 0.4);\n}\n\n.article-toc__list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.article-toc__list li {\n  margin: 0;\n}\n\n.article-toc__pill {\n  display: flex;\n  align-items: center;\n  padding: 10px 14px;\n  color: #555;\n  text-decoration: none;\n  font-size: 0.85rem;\n  font-weight: 500;\n  border-radius: 50px;\n  background: #f5f5f5;\n  transition: all 0.2s ease;\n  border: 1px solid transparent;\n}\n\n.article-toc__pill:hover {\n  background: rgba(var(--user-accent-rgb, 109, 179, 242), 0.1);\n  color: var(--user-accent, #6DB3F2);\n  transform: translateX(4px);\n}\n\n.article-toc__pill.active {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n  border-color: var(--user-accent, #6DB3F2);\n  box-shadow: 0 2px 8px rgba(var(--user-accent-rgb, 109, 179, 242), 0.25);\n}\n\n.article-toc__pill.active:hover {\n  transform: translateX(4px);\n  background: var(--user-accent-hover, #5CA3E6);\n}\n\n.article-toc__num {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 22px;\n  height: 22px;\n  background: rgba(0, 0, 0, 0.08);\n  border-radius: 50%;\n  font-size: 0.75rem;\n  font-weight: 600;\n  margin-right: 10px;\n  flex-shrink: 0;\n  transition: all 0.2s ease;\n}\n\n.article-toc__pill:hover .article-toc__num {\n  background: rgba(var(--user-accent-rgb, 109, 179, 242), 0.15);\n  color: var(--user-accent, #6DB3F2);\n}\n\n.article-toc__pill.active .article-toc__num {\n  background: rgba(255, 255, 255, 0.2);\n  color: #fff;\n}\n\n.article-toc__text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  transition: opacity 0.2s ease;\n}\n\n[data-theme=\"dark\"] .article-toc__pill {\n  background: #3d3a50;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .article-toc__pill:hover {\n  background: #4d4a60;\n  color: var(--user-accent, #6DB3F2);\n}\n\n[data-theme=\"dark\"] .article-toc__pill.active {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n  border-color: var(--user-accent, #6DB3F2);\n  box-shadow: 0 2px 8px rgba(var(--user-accent-rgb, 109, 179, 242), 0.25);\n}\n\n[data-theme=\"dark\"] .article-toc__pill.active:hover {\n  background: var(--user-accent-hover, #5CA3E6);\n}\n\n[data-theme=\"dark\"] .article-toc__num {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .article-toc__pill:hover .article-toc__num {\n  background: rgba(var(--user-accent-rgb, 109, 179, 242), 0.2);\n  color: var(--user-accent, #6DB3F2);\n}\n\n[data-theme=\"dark\"] .article-toc__pill.active .article-toc__num {\n  background: rgba(255, 255, 255, 0.2);\n  color: #fff;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .article-toc,\n  .article-toc__pill,\n  .article-toc__toggle svg,\n  .article-toc__progress-bar,\n  .article-toc__num,\n  .article-toc__nav {\n    transition: none;\n  }\n  \n  .article-toc__pill:hover,\n  .article-toc__pill.active:hover {\n    transform: none;\n  }\n}\n\n.article-toc__enhanced {\n  margin-bottom: 12px;\n}\n\n.article-toc__time {\n  font-size: 0.65rem;\n  color: #888;\n  background: rgba(0, 0, 0, 0.05);\n  padding: 2px 6px;\n  border-radius: 10px;\n  margin-left: auto;\n  flex-shrink: 0;\n  font-weight: 500;\n}\n\n[data-theme=\"dark\"] .article-toc__time {\n  background: rgba(255, 255, 255, 0.08);\n  color: #aaa;\n}\n\n.article-toc__pill.active .article-toc__time {\n  background: rgba(255, 255, 255, 0.2);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n[data-theme=\"dark\"] .article-toc__pill.active .article-toc__time {\n  background: rgba(0, 0, 0, 0.15);\n  color: rgba(0, 0, 0, 0.7);\n}\n\n.article-toc__check {\n  display: none;\n  width: 16px;\n  height: 16px;\n  margin-left: 8px;\n  color: #22c55e;\n  flex-shrink: 0;\n  opacity: 0;\n  transform: scale(0.5);\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.article-toc__pill.completed .article-toc__check {\n  display: flex;\n  opacity: 1;\n  transform: scale(1);\n}\n\n.article-toc__pill.completed {\n  opacity: 0.7;\n}\n\n.article-toc__pill.completed:hover {\n  opacity: 1;\n}\n\n.article-toc__position-indicator {\n  position: absolute;\n  left: 0;\n  width: 3px;\n  background: var(--user-accent, #6DB3F2);\n  border-radius: 3px;\n  transition: top 0.15s ease, height 0.15s ease;\n  z-index: 1;\n}\n\n[data-theme=\"dark\"] .article-toc__position-indicator {\n  background: var(--user-accent, #6DB3F2);\n}\n\n.article-toc__nav {\n  position: relative;\n  flex: 1;\n  min-height: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\n}\n\n.article-toc__nav::-webkit-scrollbar {\n  width: 6px;\n}\n\n.article-toc__nav::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.article-toc__nav::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n}\n\n.article-toc__nav::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .article-toc__nav {\n  scrollbar-color: rgba(255, 255, 255, 0.2) transparent;\n}\n\n[data-theme=\"dark\"] .article-toc__nav::-webkit-scrollbar-thumb {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n[data-theme=\"dark\"] .article-toc__nav::-webkit-scrollbar-thumb:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.article-toc__jump-btns {\n  display: flex;\n  gap: 8px;\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(0, 0, 0, 0.06);\n}\n\n[data-theme=\"dark\"] .article-toc__jump-btns {\n  border-top-color: rgba(255, 255, 255, 0.08);\n}\n\n.article-toc__jump-btn {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  padding: 8px 12px;\n  background: #f0f0f0;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: #555;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.article-toc__jump-btn:hover {\n  background: #e0e0e0;\n  color: #333;\n}\n\n.article-toc__jump-btn svg {\n  width: 14px;\n  height: 14px;\n}\n\n[data-theme=\"dark\"] .article-toc__jump-btn {\n  background: #3d3a50;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .article-toc__jump-btn:hover {\n  background: #4d4a60;\n  color: #fff;\n}\n\n.article-toc__preview {\n  position: absolute;\n  left: calc(100% + 12px);\n  top: 50%;\n  transform: translateY(-50%);\n  width: 280px;\n  padding: 12px 16px;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  font-size: 0.85rem;\n  line-height: 1.5;\n  color: #555;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.2s ease, visibility 0.2s ease;\n  z-index: 100;\n  pointer-events: none;\n}\n\n.article-toc__preview::before {\n  content: '';\n  position: absolute;\n  left: -8px;\n  top: 50%;\n  transform: translateY(-50%);\n  border: 8px solid transparent;\n  border-right-color: #fff;\n  border-left: none;\n}\n\n.article-toc__pill:hover .article-toc__preview {\n  opacity: 1;\n  visibility: visible;\n}\n\n[data-theme=\"dark\"] .article-toc__preview {\n  background: #3d3a50;\n  color: #ccc;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .article-toc__preview::before {\n  border-right-color: #3d3a50;\n}\n\n.article-toc__bookmark {\n  width: 18px;\n  height: 18px;\n  margin-left: 6px;\n  padding: 0;\n  background: none;\n  border: none;\n  color: #aaa;\n  cursor: pointer;\n  opacity: 0;\n  transition: opacity 0.2s ease, color 0.2s ease;\n  flex-shrink: 0;\n}\n\n.article-toc__pill:hover .article-toc__bookmark {\n  opacity: 1;\n}\n\n.article-toc__bookmark:hover {\n  color: #f59e0b;\n}\n\n.article-toc__bookmark.bookmarked {\n  opacity: 1;\n  color: #f59e0b;\n}\n\n.article-toc__bookmark svg {\n  width: 14px;\n  height: 14px;\n}\n\n.article-toc__resume {\n  display: none;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 14px;\n  margin-bottom: 12px;\n  background: linear-gradient(135deg, #fef3c7, #fde68a);\n  border-radius: 10px;\n  font-size: 0.8rem;\n  color: #92400e;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid rgba(146, 64, 14, 0.1);\n}\n\n.article-toc__resume:hover {\n  background: linear-gradient(135deg, #fde68a, #fcd34d);\n  transform: translateX(4px);\n}\n\n.article-toc__resume.visible {\n  display: flex;\n}\n\n.article-toc__resume svg {\n  width: 16px;\n  height: 16px;\n  flex-shrink: 0;\n}\n\n.article-toc__resume-text {\n  flex: 1;\n}\n\n.article-toc__resume-section {\n  font-weight: 600;\n}\n\n.article-toc__resume-dismiss {\n  padding: 4px;\n  background: none;\n  border: none;\n  color: #92400e;\n  cursor: pointer;\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n\n.article-toc__resume-dismiss:hover {\n  opacity: 1;\n}\n\n[data-theme=\"dark\"] .article-toc__resume {\n  background: linear-gradient(135deg, #3d3a50, #4d4a60);\n  color: var(--user-accent-light);\n  border-color: rgba(214, 189, 159, 0.2);\n}\n\n[data-theme=\"dark\"] .article-toc__resume:hover {\n  background: linear-gradient(135deg, #4d4a60, #5d5a70);\n}\n\n[data-theme=\"dark\"] .article-toc__resume-dismiss {\n  color: var(--user-accent-light);\n}\n\n.article-toc__minimap {\n  display: flex;\n  flex-direction: row;\n  gap: 3px;\n  padding: 8px 0;\n  margin-bottom: 8px;\n}\n\n[data-theme=\"dark\"] .article-toc__minimap {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.article-toc__minimap-section {\n  height: 6px;\n  min-width: 8px;\n  background: #e8e8e8;\n  border-radius: 3px;\n  position: relative;\n  transition: background 0.2s ease;\n  cursor: pointer;\n  flex: 1;\n}\n\n.article-toc__minimap-section:hover {\n  background: #d0d0d0;\n}\n\n.article-toc__minimap-section.active {\n  background: #4a6fa5;\n}\n\n.article-toc__minimap-section.completed {\n  background: #22c55e;\n}\n\n.article-toc__minimap-section.completed.active {\n  background: #16a34a;\n}\n\n[data-theme=\"dark\"] .article-toc__minimap-section {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .article-toc__minimap-section:hover {\n  background: #4d4a60;\n}\n\n[data-theme=\"dark\"] .article-toc__minimap-section.active {\n  background: var(--user-accent-light);\n}\n\n.article-toc__minimap-marker {\n  position: absolute;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(74, 111, 165, 0.3);\n  border-radius: 2px;\n  transition: width 0.1s ease;\n}\n\n[data-theme=\"dark\"] .article-toc__minimap-marker {\n  background: rgba(214, 189, 159, 0.3);\n}\n\n.article-toc__pill:focus {\n  outline: 2px solid var(--user-accent, #6DB3F2);\n  outline-offset: 2px;\n}\n\n.article-toc__pill:focus:not(:focus-visible) {\n  outline: none;\n}\n\n[data-theme=\"dark\"] .article-toc__pill:focus {\n  outline-color: var(--user-accent, #6DB3F2);\n}\n\n.article-toc.collapsed .article-toc__time,\n.article-toc.collapsed .article-toc__check,\n.article-toc.collapsed .article-toc__bookmark,\n.article-toc.collapsed .article-toc__preview,\n.article-toc.collapsed .article-toc__jump-btns,\n.article-toc.collapsed .article-toc__minimap,\n.article-toc.collapsed .article-toc__resume,\n.article-toc.collapsed .article-toc__position-indicator {\n  display: none;\n}\n\n.article-toc__swipe-indicator {\n  display: none;\n  width: 40px;\n  height: 4px;\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 2px;\n  margin: 0 auto 12px;\n}\n\n[data-theme=\"dark\"] .article-toc__swipe-indicator {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n@media (max-width: 900px) {\n  .article-toc__swipe-indicator {\n    display: block;\n  }\n  \n  .article-toc__preview {\n    display: none !important;\n  }\n  \n  .article-toc__bookmark {\n    opacity: 1;\n  }\n  \n  .article-toc__position-indicator {\n    display: none;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .article-toc__check,\n  .article-toc__preview,\n  .article-toc__resume,\n  .article-toc__minimap-section,\n  .article-toc__position-indicator,\n  .article-toc__bookmark {\n    transition: none;\n  }\n}\n\n.article-content section {\n  margin-bottom: 48px;\n}\n\n.article-content h2 {\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin-bottom: 24px;\n  padding-top: 24px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n  line-height: 1.3;\n}\n\n.article-content section:first-child h2 {\n  border-top: none;\n  padding-top: 0;\n}\n\n[data-theme=\"dark\"] .article-content h2 {\n  color: #fff;\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n.article-content h3 {\n  font-size: 1.3rem;\n  font-weight: 600;\n  color: #333;\n  margin: 28px 0 16px;\n  line-height: 1.4;\n}\n\n[data-theme=\"dark\"] .article-content h3 {\n  color: #e0e0e0;\n}\n\n.article-content p {\n  font-size: 1.1rem;\n  line-height: 1.9;\n  color: #333;\n  margin-bottom: 24px;\n  letter-spacing: 0.01em;\n}\n\n[data-theme=\"dark\"] .article-content p {\n  color: #d0d0d0;\n}\n\n.article-content ul {\n  margin: 16px 0;\n  padding-left: 24px;\n}\n\n.article-content li {\n  font-size: 1.05rem;\n  line-height: 1.85;\n  color: #333;\n  margin-bottom: 14px;\n  padding-left: 8px;\n}\n\n[data-theme=\"dark\"] .article-content li {\n  color: #d0d0d0;\n}\n\n.article-content strong {\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .article-content strong {\n  color: #fff;\n}\n\n.article-content h2,\n.article-content h3,\n.article-content p,\n.article-content li {\n  transition: background-color 0.4s ease, box-shadow 0.4s ease, transform 0.3s ease;\n}\n\n.tts-reading {\n  background: rgba(74, 111, 165, 0.12);\n  border-radius: 12px;\n  box-shadow: inset 0 0 0 2px rgba(74, 111, 165, 0.25);\n  animation: tts-glow 1.5s ease-in-out infinite;\n}\n\n@keyframes tts-glow {\n  0%, 100% { box-shadow: inset 0 0 0 2px rgba(74, 111, 165, 0.25); }\n  50% { box-shadow: inset 0 0 0 2px rgba(74, 111, 165, 0.45); }\n}\n\n[data-theme=\"dark\"] .tts-reading {\n  background: rgba(214, 189, 159, 0.15);\n  box-shadow: inset 0 0 0 2px rgba(214, 189, 159, 0.25);\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .tts-reading {\n    animation: none;\n  }\n}\n\n.tts-word {\n  display: inline;\n  transition: background-color 0.15s ease, color 0.15s ease;\n  border-radius: 4px;\n}\n\n.tts-word.tts-current-word {\n  background: linear-gradient(135deg, #4a6fa5, #5a7fb5);\n  color: #fff;\n  padding: 1px 4px;\n  margin: 0 -2px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px rgba(74, 111, 165, 0.4);\n}\n\n[data-theme=\"dark\"] .tts-word.tts-current-word {\n  background: linear-gradient(135deg, var(--user-accent-light), var(--user-accent));\n  color: #1a1a2e;\n}\n\n.tts-engine-toggle {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent) 100%);\n  color: #1a1a2e;\n  border: none;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-left: auto;\n}\n\n.tts-engine-toggle:hover {\n  transform: scale(1.05);\n  box-shadow: 0 2px 8px rgba(214, 189, 159, 0.4);\n}\n\n.tts-player__voice {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.tts-player__voice label {\n  font-size: 0.9rem;\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.tts-voice-select {\n  padding: 6px 10px;\n  border-radius: 6px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  font-size: 0.85rem;\n  cursor: pointer;\n  min-width: 120px;\n}\n\n.tts-voice-select option {\n  background: #1a1a2e;\n  color: #fff;\n}\n\n.tts-player__row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 16px;\n  margin-bottom: 16px;\n  flex-wrap: wrap;\n}\n\n.tts-player__volume {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  flex: 1;\n  min-width: 180px;\n}\n\n.tts-volume-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.15);\n  color: #fff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.tts-volume-btn:hover {\n  background: rgba(255, 255, 255, 0.25);\n}\n\n.tts-volume-btn svg {\n  width: 20px;\n  height: 20px;\n  fill: currentColor;\n}\n\n.tts-volume-slider {\n  -webkit-appearance: none;\n  appearance: none;\n  flex: 1;\n  height: 6px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 3px;\n  outline: none;\n  cursor: pointer;\n}\n\n.tts-volume-slider::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: var(--user-accent-light);\n  cursor: pointer;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\n  transition: transform 0.15s ease;\n}\n\n.tts-volume-slider::-webkit-slider-thumb:hover {\n  transform: scale(1.2);\n}\n\n.tts-volume-slider::-moz-range-thumb {\n  width: 16px;\n  height: 16px;\n  border: none;\n  border-radius: 50%;\n  background: var(--user-accent-light);\n  cursor: pointer;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\n}\n\n.tts-volume-value {\n  font-size: 0.8rem;\n  opacity: 0.8;\n  min-width: 36px;\n  text-align: right;\n}\n\n.tts-player__options {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.tts-option-btn {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 20px;\n  background: transparent;\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.tts-option-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n}\n\n.tts-option-btn.active {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n  border-color: var(--user-accent-light);\n}\n\n.tts-option-btn svg,\n.sleep-timer-btn svg,\n.tts-download-btn svg {\n  width: 14px;\n  height: 14px;\n  fill: currentColor;\n}\n\n.tts-time-remaining {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.85rem;\n  opacity: 0.8;\n}\n\n.tts-time-remaining svg {\n  width: 16px;\n  height: 16px;\n  fill: currentColor;\n  opacity: 0.7;\n}\n\n@media (max-width: 600px) {\n  .tts-player__row {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .tts-player__volume {\n    width: 100%;\n  }\n  \n  .tts-player__options {\n    justify-content: center;\n  }\n}\n\n.article-footer {\n  margin-top: 48px;\n  padding-top: 32px;\n  border-top: 2px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .article-footer {\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n.article-source-box {\n  background: #f8f9fa;\n  border-radius: 12px;\n  padding: 24px;\n  margin-bottom: 24px;\n}\n\n[data-theme=\"dark\"] .article-source-box {\n  background: #252542;\n}\n\n.article-source-box h3 {\n  font-size: 1rem;\n  font-weight: 700;\n  margin-bottom: 16px;\n  color: #333;\n}\n\n[data-theme=\"dark\"] .article-source-box h3 {\n  color: #fff;\n}\n\n.article-source-box ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.article-source-box li {\n  margin-bottom: 8px;\n}\n\n.article-source-box a {\n  color: var(--user-accent, #6DB3F2);\n  text-decoration: none;\n  font-size: 0.95rem;\n}\n\n.article-source-box a:hover {\n  text-decoration: underline;\n}\n\n[data-theme=\"dark\"] .article-source-box a {\n  color: var(--user-accent, #6DB3F2);\n}\n\n.article-share {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.article-share span {\n  font-size: 0.95rem;\n  color: #666;\n}\n\n[data-theme=\"dark\"] .article-share span {\n  color: #aaa;\n}\n\n.article-share__buttons {\n  display: flex;\n  gap: 8px;\n}\n\n.share-btn {\n  width: 40px;\n  height: 40px;\n  border: 1px solid #ddd;\n  border-radius: 50%;\n  background: #fff;\n  color: #666;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n}\n\n.share-btn:hover {\n  background: #4a6fa5;\n  border-color: #4a6fa5;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .share-btn {\n  background: #252542;\n  border-color: #444;\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .share-btn:hover {\n  background: var(--user-accent-light);\n  border-color: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n.share-btn svg {\n  width: 18px;\n  height: 18px;\n  fill: currentColor;\n}\n\n.article-related {\n  margin-top: 48px;\n  padding-top: 32px;\n  border-top: 2px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .article-related {\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n.article-related__title {\n  font-size: 1.3rem;\n  font-weight: 700;\n  margin-bottom: 20px;\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .article-related__title {\n  color: #fff;\n}\n\n.article-related__grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 20px;\n}\n\n.related-card {\n  background: #f8f9fa;\n  border-radius: 12px;\n  text-decoration: none;\n  transition: all 0.2s ease;\n  display: block;\n  overflow: hidden;\n}\n\n.related-card:hover {\n  background: #e9ecef;\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);\n}\n\n[data-theme=\"dark\"] .related-card {\n  background: #252542;\n}\n\n[data-theme=\"dark\"] .related-card:hover {\n  background: #303055;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\n}\n\n.related-card__img {\n  width: 100%;\n  height: 140px;\n  object-fit: cover;\n  display: block;\n}\n\n.related-card__content {\n  padding: 16px;\n}\n\n.related-card__category {\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  color: var(--user-accent, #6DB3F2);\n  margin-bottom: 8px;\n}\n\n[data-theme=\"dark\"] .related-card__category {\n  color: var(--user-accent, #6DB3F2);\n}\n\n.related-card__title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 6px;\n  line-height: 1.4;\n}\n\n[data-theme=\"dark\"] .related-card__title {\n  color: #fff;\n}\n\n.related-card__meta {\n  font-size: 0.8rem;\n  color: #666;\n}\n\n[data-theme=\"dark\"] .related-card__meta {\n  color: #aaa;\n}\n\n.article-page-footer {\n  background: #f8f9fa;\n  padding: 32px 20px;\n  text-align: center;\n}\n\n[data-theme=\"dark\"] .article-page-footer {\n  background: #252542;\n}\n\n.footer-back-link {\n  display: inline-block;\n  color: #4a6fa5;\n  text-decoration: none;\n  font-weight: 600;\n  margin-bottom: 16px;\n}\n\n[data-theme=\"dark\"] .footer-back-link {\n  color: var(--user-accent-light);\n}\n\n.footer-disclaimer {\n  font-size: 0.85rem;\n  color: #888;\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n[data-high-contrast=\"true\"] .article-tts-player {\n  border: 3px solid #000;\n}\n\n[data-high-contrast=\"true\"] .tts-btn {\n  border: 2px solid #fff;\n}\n\n[data-high-contrast=\"true\"] .article-content h2,\n[data-high-contrast=\"true\"] .article-content h3 {\n  color: #000;\n}\n\n[data-high-contrast=\"true\"] .article-content p,\n[data-high-contrast=\"true\"] .article-content li {\n  color: #000;\n}\n\n[data-high-contrast=\"true\"] .tts-reading {\n  background: #ffeb3b;\n}\n\n[data-high-contrast=\"true\"] .article-toc {\n  border: 2px solid #000;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .article-reading-progress__fill,\n  .tts-progress-bar__fill,\n  .tts-reading {\n    transition: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .article-hero {\n    height: 300px;\n    border-radius: 0;\n    margin: 0 -20px 24px;\n    width: calc(100% + 40px);\n  }\n  \n  .article-hero__content {\n    padding: 20px;\n  }\n  \n  .article-title {\n    font-size: 1.6rem;\n  }\n  \n  .article-subtitle {\n    font-size: 0.95rem;\n  }\n  \n  .article-tts-player {\n    padding: 16px;\n    border-radius: 12px;\n  }\n  \n  .tts-btn--play,\n  .tts-btn--pause {\n    width: 56px;\n    height: 56px;\n  }\n  \n  .tts-hint {\n    display: none;\n  }\n  \n  .article-content h2 {\n    font-size: 1.5rem;\n  }\n  \n  .article-content p {\n    font-size: 1rem;\n  }\n}\n\n.reading-controls {\n  position: fixed;\n  right: 20px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 90;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  background: #fff;\n  padding: 12px;\n  border-radius: 16px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  transition: all 0.3s ease;\n}\n\n[data-theme=\"dark\"] .reading-controls {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.1);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);\n}\n\n.reading-controls__toggle {\n  position: absolute;\n  left: -40px;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  transition: all 0.2s ease;\n}\n\n.reading-controls__toggle:hover {\n  transform: translateY(-50%) scale(1.1);\n}\n\n.reading-controls.collapsed {\n  transform: translateY(-50%) translateX(calc(100% + 30px));\n}\n\n.reading-controls.collapsed .reading-controls__toggle {\n  left: -50px;\n}\n\n.reading-control-btn {\n  width: 44px;\n  height: 44px;\n  border-radius: 12px;\n  background: var(--bg-surface, #f5f5f5);\n  color: var(--text-primary, #1a1a2e);\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  position: relative;\n}\n\n.reading-control-btn:hover {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n}\n\n.reading-control-btn.active {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n}\n\n.reading-control-btn svg {\n  width: 20px;\n  height: 20px;\n  fill: currentColor;\n}\n\n.reading-control-btn__tooltip {\n  position: absolute;\n  right: calc(100% + 10px);\n  top: 50%;\n  transform: translateY(-50%);\n  background: #1a1a2e;\n  color: #fff;\n  padding: 6px 12px;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  white-space: nowrap;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.2s ease;\n  pointer-events: none;\n}\n\n.reading-control-btn:hover .reading-control-btn__tooltip {\n  opacity: 1;\n  visibility: visible;\n}\n\n[data-theme=\"dark\"] .reading-control-btn {\n  background: #3d3a50;\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .reading-control-btn:hover,\n[data-theme=\"dark\"] .reading-control-btn.active {\n  background: var(--user-accent, #6DB3F2);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .reading-control-btn__tooltip {\n  background: #fff;\n  color: #1a1a2e;\n}\n\n.reading-controls__font-size {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n  padding: 8px 0;\n  border-bottom: 1px solid var(--border-color, rgba(0, 0, 0, 0.08));\n}\n\n.reading-controls__font-label {\n  font-size: 0.65rem;\n  text-transform: uppercase;\n  color: var(--text-muted, #6c757d);\n  letter-spacing: 0.5px;\n}\n\n.reading-controls__font-btns {\n  display: flex;\n  gap: 4px;\n}\n\n.reading-controls__font-btns button {\n  width: 32px;\n  height: 32px;\n  border-radius: 8px;\n  background: var(--bg-surface, #f5f5f5);\n  color: var(--text-primary, #1a1a2e);\n  border: none;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 1rem;\n  transition: all 0.2s ease;\n}\n\n.reading-controls__font-btns button:hover {\n  background: var(--accent-color, #4a6fa5);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .reading-controls__font-btns button {\n  background: #3d3a50;\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .reading-controls__font-btns button:hover {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n.reading-controls__time {\n  text-align: center;\n  padding: 8px 0;\n  border-top: 1px solid var(--border-color, rgba(0, 0, 0, 0.08));\n}\n\n.reading-controls__time-value {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--text-primary, #1a1a2e);\n}\n\n.reading-controls__time-label {\n  font-size: 0.65rem;\n  color: var(--text-muted, #6c757d);\n}\n\n[data-theme=\"dark\"] .reading-controls__time-value {\n  color: #e0e0e0;\n}\n\nbody.article-reading-mode .header,\nbody.article-reading-mode .article-toc,\nbody.article-reading-mode .article-share,\nbody.article-reading-mode .article-related,\nbody.article-reading-mode .mb-footer {\n  display: none !important;\n}\n\nbody.article-reading-mode .article-layout {\n  display: block;\n}\n\nbody.article-reading-mode .article-content {\n  max-width: 700px;\n  margin: 0 auto;\n}\n\nbody.article-reading-mode .article-main {\n  padding-top: 40px;\n}\n\nbody[data-article-font=\"small\"] .article-content {\n  font-size: 0.9rem;\n}\nbody[data-article-font=\"small\"] .article-content h2 {\n  font-size: 1.5rem;\n}\nbody[data-article-font=\"small\"] .article-content h3 {\n  font-size: 1.1rem;\n}\nbody[data-article-font=\"small\"] .article-content p,\nbody[data-article-font=\"small\"] .article-content li {\n  font-size: 0.95rem;\n}\n\nbody[data-article-font=\"normal\"] .article-content {\n  font-size: 1rem;\n}\nbody[data-article-font=\"normal\"] .article-content h2 {\n  font-size: 1.8rem;\n}\nbody[data-article-font=\"normal\"] .article-content h3 {\n  font-size: 1.3rem;\n}\nbody[data-article-font=\"normal\"] .article-content p,\nbody[data-article-font=\"normal\"] .article-content li {\n  font-size: 1.1rem;\n}\n\nbody[data-article-font=\"large\"] .article-content {\n  font-size: 1.15rem;\n}\nbody[data-article-font=\"large\"] .article-content h2 {\n  font-size: 2rem;\n}\nbody[data-article-font=\"large\"] .article-content h3 {\n  font-size: 1.5rem;\n}\nbody[data-article-font=\"large\"] .article-content p,\nbody[data-article-font=\"large\"] .article-content li {\n  font-size: 1.25rem;\n}\n\nbody[data-article-font=\"x-large\"] .article-content {\n  font-size: 1.3rem;\n}\nbody[data-article-font=\"x-large\"] .article-content h2 {\n  font-size: 2.3rem;\n}\nbody[data-article-font=\"x-large\"] .article-content h3 {\n  font-size: 1.7rem;\n}\nbody[data-article-font=\"x-large\"] .article-content p,\nbody[data-article-font=\"x-large\"] .article-content li {\n  font-size: 1.4rem;\n}\n\nbody[data-article-spacing=\"compact\"] .article-content p,\nbody[data-article-spacing=\"compact\"] .article-content li {\n  line-height: 1.5;\n}\n\nbody[data-article-spacing=\"normal\"] .article-content p,\nbody[data-article-spacing=\"normal\"] .article-content li {\n  line-height: 1.75;\n}\n\nbody[data-article-spacing=\"relaxed\"] .article-content p,\nbody[data-article-spacing=\"relaxed\"] .article-content li {\n  line-height: 2;\n}\n\n@media (max-width: 768px) {\n  .reading-controls {\n    right: 10px;\n    padding: 8px;\n    gap: 6px;\n  }\n  \n  .reading-control-btn {\n    width: 38px;\n    height: 38px;\n  }\n  \n  .reading-controls__font-btns button {\n    width: 28px;\n    height: 28px;\n    font-size: 0.85rem;\n  }\n  \n  .reading-control-btn__tooltip {\n    display: none;\n  }\n}\n\n.article-content ::selection {\n  background: rgba(255, 235, 59, 0.4);\n  color: inherit;\n}\n\n.article-content ::-moz-selection {\n  background: rgba(255, 235, 59, 0.4);\n  color: inherit;\n}\n\n[data-theme=\"dark\"] .article-content ::selection {\n  background: rgba(126, 87, 194, 0.5);\n  color: inherit;\n}\n\n[data-theme=\"dark\"] .article-content ::-moz-selection {\n  background: rgba(126, 87, 194, 0.5);\n  color: inherit;\n}\n\n.user-highlight {\n  background: linear-gradient(120deg, #fff176 0%, #ffeb3b 100%);\n  border-radius: 3px;\n  cursor: pointer;\n  \n  box-decoration-break: clone;\n  -webkit-box-decoration-break: clone;\n}\n\n.user-highlight:hover {\n  background: linear-gradient(120deg, #ffca28 0%, #ffc107 100%);\n  \n}\n\n[data-theme=\"dark\"] .user-highlight {\n  background: linear-gradient(120deg, #5c6bc0 0%, #7e57c2 100%);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .user-highlight:hover {\n  background: linear-gradient(120deg, #7e57c2 0%, #9575cd 100%);\n}\n\n.bookmark-prompt {\n  position: fixed;\n  bottom: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: var(--bg-card, #fff);\n  padding: 16px 24px;\n  border-radius: 12px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  z-index: 1001;\n  animation: slideUp 0.3s ease;\n  border: 1px solid var(--border-color, rgba(0, 0, 0, 0.08));\n}\n\n@keyframes slideUp {\n  from {\n    transform: translateX(-50%) translateY(100px);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(-50%) translateY(0);\n    opacity: 1;\n  }\n}\n\n.bookmark-prompt span {\n  color: var(--text-primary, #1a1a2e);\n  font-weight: 500;\n}\n\n.bookmark-prompt button {\n  padding: 8px 16px;\n  border-radius: 8px;\n  border: none;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.bookmark-prompt__yes {\n  background: var(--accent-color, #4a6fa5);\n  color: #fff;\n}\n\n.bookmark-prompt__yes:hover {\n  filter: brightness(1.1);\n}\n\n.bookmark-prompt__no {\n  background: var(--bg-surface, #f5f5f5);\n  color: var(--text-primary, #1a1a2e);\n}\n\n.bookmark-prompt__no:hover {\n  background: var(--bg-tertiary, #e9ecef);\n}\n\n[data-theme=\"dark\"] .bookmark-prompt {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .bookmark-prompt span {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .bookmark-prompt__yes {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .bookmark-prompt__no {\n  background: #3d3a50;\n  color: #e0e0e0;\n}\n\n.tts-mini-player {\n  position: fixed;\n  bottom: 24px;\n  right: 24px;\n  background: linear-gradient(135deg, #3d3a50 0%, #2d2b3d 100%);\n  border-radius: 50px;\n  padding: 12px 20px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  z-index: 1000;\n  transform: translateY(100px);\n  opacity: 0;\n  transition: all 0.3s ease;\n  color: #fff;\n}\n\n.tts-mini-player.visible {\n  transform: translateY(0);\n  opacity: 1;\n}\n\n.tts-mini-player__btn {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  border: none;\n  background: rgba(255, 255, 255, 0.9);\n  color: #3d3a50;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1rem;\n  transition: all 0.2s ease;\n}\n\n.tts-mini-player__btn:hover {\n  background: var(--user-accent-light);\n  transform: scale(1.1);\n}\n\n.tts-mini-player__btn--play {\n  width: 48px;\n  height: 48px;\n  font-size: 1.2rem;\n}\n\n.tts-mini-player__info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  max-width: 200px;\n}\n\n.tts-mini-player__title {\n  font-size: 0.75rem;\n  opacity: 0.7;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.tts-mini-player__status {\n  font-size: 0.85rem;\n  font-weight: 500;\n}\n\n.tts-mini-player__progress {\n  width: 80px;\n  height: 4px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.tts-mini-player__progress-fill {\n  height: 100%;\n  background: var(--user-accent-light);\n  transition: width 0.3s ease;\n}\n\n.tts-mini-player__close {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  border: none;\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  cursor: pointer;\n  font-size: 0.8rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.tts-mini-player__close:hover {\n  background: rgba(255, 107, 107, 0.8);\n}\n\n[data-theme=\"dark\"] .tts-mini-player {\n  background: linear-gradient(135deg, #252542 0%, #1a1a2e 100%);\n}\n\n.sleep-timer-container {\n  position: relative;\n}\n\n.sleep-timer-btn {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 12px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: all 0.2s ease;\n}\n\n.sleep-timer-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.sleep-timer-btn.active {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n  border-color: var(--user-accent-light);\n}\n\n.sleep-timer-dropdown {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  background: #3d3a50;\n  border-radius: 12px;\n  padding: 8px;\n  margin-bottom: 8px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\n  display: none;\n  min-width: 140px;\n}\n\n.sleep-timer-dropdown.visible {\n  display: block;\n}\n\n.sleep-timer-option {\n  display: block;\n  width: 100%;\n  padding: 10px 12px;\n  border: none;\n  background: transparent;\n  color: #fff;\n  text-align: left;\n  cursor: pointer;\n  border-radius: 6px;\n  font-size: 0.9rem;\n  transition: background 0.2s;\n}\n\n.sleep-timer-option:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.sleep-timer-option.active {\n  background: var(--user-accent-light);\n  color: #1a1a2e;\n}\n\n.keyboard-shortcuts-overlay {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s ease;\n}\n\n.keyboard-shortcuts-overlay.visible {\n  opacity: 1;\n  visibility: visible;\n}\n\n.keyboard-shortcuts-modal {\n  background: #fff;\n  border-radius: 16px;\n  padding: 32px;\n  max-width: 500px;\n  width: 90%;\n  max-height: 80vh;\n  overflow-y: auto;\n}\n\n[data-theme=\"dark\"] .keyboard-shortcuts-modal {\n  background: #252542;\n  color: #e0e0e0;\n}\n\n.keyboard-shortcuts-modal h3 {\n  font-size: 1.5rem;\n  margin-bottom: 24px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.keyboard-shortcuts-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.keyboard-shortcuts-list li {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n[data-theme=\"dark\"] .keyboard-shortcuts-list li {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.keyboard-shortcuts-list kbd {\n  background: #f0f0f0;\n  padding: 4px 12px;\n  border-radius: 6px;\n  font-family: monospace;\n  font-size: 0.9rem;\n  border: 1px solid #ddd;\n}\n\n[data-theme=\"dark\"] .keyboard-shortcuts-list kbd {\n  background: #3d3a50;\n  border-color: #555;\n}\n\n.keyboard-shortcuts-close {\n  margin-top: 24px;\n  width: 100%;\n  padding: 12px;\n  border: none;\n  border-radius: 8px;\n  background: #4a6fa5;\n  color: #fff;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: background 0.2s;\n}\n\n.keyboard-shortcuts-close:hover {\n  background: #3d5d8a;\n}\n\n.tts-download-btn {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 16px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: all 0.2s ease;\n}\n\n.tts-download-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.tts-download-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.tts-download-btn.downloading {\n  pointer-events: none;\n}\n\n.tts-download-btn.downloading::after {\n  content: '';\n  width: 14px;\n  height: 14px;\n  border: 2px solid transparent;\n  border-top-color: #fff;\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.article-notes-panel {\n  position: fixed;\n  right: -400px;\n  top: 0;\n  bottom: 0;\n  width: 400px;\n  background: #fff;\n  box-shadow: -4px 0 24px rgba(0, 0, 0, 0.15);\n  z-index: 1001;\n  transition: right 0.3s ease;\n  display: flex;\n  flex-direction: column;\n}\n\n.article-notes-panel.visible {\n  right: 0;\n}\n\n[data-theme=\"dark\"] .article-notes-panel {\n  background: #1e1e32;\n}\n\n.notes-panel__header {\n  padding: 20px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n[data-theme=\"dark\"] .notes-panel__header {\n  border-bottom-color: rgba(255, 255, 255, 0.1);\n}\n\n.notes-panel__title {\n  font-size: 1.2rem;\n  font-weight: 600;\n}\n\n.notes-panel__close {\n  width: 32px;\n  height: 32px;\n  border: none;\n  border-radius: 8px;\n  background: transparent;\n  cursor: pointer;\n  font-size: 1.2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s;\n}\n\n.notes-panel__close:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.notes-panel__content {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n}\n\n.notes-textarea {\n  width: 100%;\n  min-height: 300px;\n  padding: 16px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 12px;\n  font-family: inherit;\n  font-size: 1rem;\n  line-height: 1.6;\n  resize: vertical;\n  background: #f8f9fa;\n}\n\n.notes-panel__actions {\n  display: flex;\n  gap: 10px;\n  margin-top: 15px;\n  padding-top: 15px;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n.notes-panel__btn {\n  flex: 1;\n  padding: 10px 16px;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 500;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  transition: all 0.2s;\n}\n\n.notes-panel__btn--clear {\n  background: #f0f0f5;\n  color: #666;\n}\n\n.notes-panel__btn--clear:hover {\n  background: #e0e0ea;\n}\n\n.notes-panel__btn--export {\n  background: var(--user-accent);\n  color: #fff;\n}\n\n.notes-panel__btn--export:hover {\n  background: var(--user-accent-dark);\n}\n\n[data-theme=\"dark\"] .notes-panel__actions {\n  border-top-color: rgba(255, 255, 255, 0.1);\n}\n\n[data-theme=\"dark\"] .notes-panel__btn--clear {\n  background: #3a3a5a;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .notes-panel__btn--clear:hover {\n  background: #4a4a6a;\n}\n\n[data-theme=\"dark\"] .notes-textarea {\n  background: #252542;\n  border-color: rgba(255, 255, 255, 0.1);\n  color: #e0e0e0;\n}\n\n.notes-save-status {\n  font-size: 0.85rem;\n  color: #666;\n  margin-top: 8px;\n}\n\n[data-theme=\"dark\"] .notes-save-status {\n  color: #999;\n}\n\n.article-takeaways {\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  border-radius: 16px;\n  padding: 24px;\n  margin-bottom: 32px;\n  border-left: 4px solid #4a6fa5;\n}\n\n[data-theme=\"dark\"] .article-takeaways {\n  background: linear-gradient(135deg, #252542 0%, #1a1a2e 100%);\n  border-left-color: var(--user-accent-light);\n}\n\n.article-takeaways__title {\n  font-size: 1.2rem;\n  font-weight: 700;\n  margin-bottom: 16px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.article-takeaways__list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.article-takeaways__list li {\n  position: relative;\n  padding-left: 28px;\n  margin-bottom: 12px;\n  line-height: 1.6;\n}\n\n.article-takeaways__list li::before {\n  content: 'âœ“';\n  position: absolute;\n  left: 0;\n  color: #4a6fa5;\n  font-weight: bold;\n}\n\n[data-theme=\"dark\"] .article-takeaways__list li::before {\n  color: var(--user-accent-light);\n}\n\n@media (max-width: 768px) {\n  .tts-mini-player {\n    left: 16px;\n    right: 16px;\n    bottom: 16px;\n    border-radius: 16px;\n  }\n  \n  .tts-mini-player__info {\n    flex: 1;\n  }\n  \n  .article-notes-panel {\n    width: 100%;\n    right: -100%;\n  }\n  \n  .keyboard-shortcuts-modal {\n    padding: 24px;\n  }\n}\n\n@media print {\n  .reading-controls,\n  .header,\n  .mb-footer,\n  .article-tts-player,\n  .article-toc,\n  .article-share,\n  .article-related,\n  .bookmark-prompt,\n  .tts-mini-player,\n  .article-notes-panel,\n  .keyboard-shortcuts-overlay {\n    display: none !important;\n  }\n  \n  .article-content {\n    max-width: 100%;\n  }\n  \n  .user-highlight {\n    background: #ffeb3b !important;\n    -webkit-print-color-adjust: exact;\n    print-color-adjust: exact;\n  }\n}\n\n.article-actions {\n  margin: 30px 0;\n  display: flex;\n  justify-content: center;\n}\n\n.save-article-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 10px;\n  padding: 14px 28px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  border: none;\n  border-radius: 30px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(184, 155, 94, 0.3);\n}\n\n.save-article-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(184, 155, 94, 0.4);\n}\n\n.save-article-btn.is-saved {\n  background: #10b981;\n  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);\n}\n\n.save-article-btn.is-saved:hover {\n  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);\n}\n\n.save-article-btn i {\n  font-size: 1.1rem;\n  transition: transform 0.3s ease;\n}\n\n.save-article-btn.is-saved i {\n  animation: bookmarkPop 0.3s ease;\n}\n\n@keyframes bookmarkPop {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.3); }\n  100% { transform: scale(1); }\n}\n\n.save-article-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n[data-theme=\"dark\"] .save-article-btn {\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .save-article-btn:hover {\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);\n}\n\n.back-to-top {\n  bottom: 100px;\n  right: 30px;\n}\n\n@media (max-width: 768px) {\n  .back-to-top {\n    bottom: 90px;\n    right: 20px;\n  }\n}\n","path":null,"size_bytes":56569,"size_tokens":null},"mindspace-build/blog/blog.js":{"content":"// ==================== BLOG ====================\n\n(function () {\n  'use strict';\n\n  // --- Translation Helper ---\n  function getTranslation(key, fallback) {\n    if (window.translations) {\n      var lang = localStorage.getItem('mindspace-language') || 'en';\n      var langMap = { en: 'en', es: 'es', fr: 'fr', zh: 'zh', hi: 'hi', ko: 'ko', de: 'de', gr: 'gr' };\n      var langKey = langMap[lang] || 'en';\n      if (window.translations[langKey] && window.translations[langKey][key]) {\n        return window.translations[langKey][key];\n      }\n    }\n    return fallback;\n  }\n\n  // ==================== TEXT-TO-SPEECH ====================\n  var speechSynth = window.speechSynthesis;\n  var currentUtterance = null;\n  var isPlaying = false;\n\n  function stopSpeech() {\n    if (speechSynth) {\n      speechSynth.cancel();\n      isPlaying = false;\n      updateAllTTSButtons();\n    }\n  }\n\n  function speakText(text, button) {\n    if (!speechSynth) {\n      alert(getTranslation('tts_not_supported', 'Text-to-speech is not supported in your browser.'));\n      return;\n    }\n\n    if (isPlaying) {\n      stopSpeech();\n      return;\n    }\n\n    currentUtterance = new SpeechSynthesisUtterance(text);\n    currentUtterance.lang = document.documentElement.lang || 'en';\n    currentUtterance.rate = 0.9;\n    currentUtterance.pitch = 1;\n\n    currentUtterance.onstart = function () {\n      isPlaying = true;\n      if (button) {\n        button.classList.add('is-playing');\n        button.setAttribute('aria-pressed', 'true');\n        var icon = button.querySelector('.tts-icon');\n        if (icon) icon.textContent = 'â¹';\n      }\n    };\n\n    currentUtterance.onend = function () {\n      isPlaying = false;\n      updateAllTTSButtons();\n    };\n\n    currentUtterance.onerror = function () {\n      isPlaying = false;\n      updateAllTTSButtons();\n    };\n\n    speechSynth.speak(currentUtterance);\n  }\n\n  function updateAllTTSButtons() {\n    document.querySelectorAll('.mb-ttsBtn').forEach(function (btn) {\n      btn.classList.remove('is-playing');\n      btn.setAttribute('aria-pressed', 'false');\n      var icon = btn.querySelector('.tts-icon');\n      if (icon) icon.textContent = 'ðŸ”Š';\n    });\n  }\n\n  function getArticleText(article) {\n    var title = article.querySelector('.mb-articleCard__title, .mb-featureCard__title, .mb-postCard__title, .mb-listPost__title, .mb-miniCard__title');\n    var excerpt = article.querySelector('.mb-articleCard__desc, .mb-featureCard__desc, .mb-postCard__excerpt, .mb-listPost__excerpt');\n    var subtext = article.querySelector('.mb-featureCard__subtext, .mb-postCard__subtext, .mb-listPost__subtext');\n\n    var text = '';\n    if (title) text += title.textContent.trim() + '. ';\n    if (excerpt) text += excerpt.textContent.trim() + '. ';\n    if (subtext) text += subtext.textContent.trim();\n\n    return text;\n  }\n\n  function addTTSButtons() {\n    var articles = document.querySelectorAll('.mb-articleCard, .mb-featureCard, .mb-postCard, .mb-listPost');\n\n    articles.forEach(function (article) {\n      if (article.querySelector('.mb-ttsBtn')) return;\n\n      var actionsContainer = article.querySelector('.mb-articleCard__body, .mb-featureCard__actions, .mb-postCard__body, .mb-listPost__body');\n      if (!actionsContainer) return;\n\n      var ttsBtn = document.createElement('button');\n      ttsBtn.className = 'mb-ttsBtn';\n      ttsBtn.type = 'button';\n      ttsBtn.setAttribute('aria-label', getTranslation('blog_listen', 'Listen to article'));\n      ttsBtn.setAttribute('aria-pressed', 'false');\n      ttsBtn.setAttribute('data-translate-aria', 'blog_listen');\n      ttsBtn.innerHTML = '<span class=\"tts-icon\" aria-hidden=\"true\">ðŸ”Š</span> <span data-translate=\"blog_listen\">Listen</span>';\n\n      ttsBtn.addEventListener('click', function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var text = getArticleText(article);\n        speakText(text, ttsBtn);\n      });\n\n      if (article.classList.contains('mb-featureCard')) {\n        actionsContainer.appendChild(ttsBtn);\n      } else {\n        var wrapper = document.createElement('div');\n        wrapper.className = 'mb-articleActions';\n        wrapper.appendChild(ttsBtn);\n        actionsContainer.appendChild(wrapper);\n      }\n    });\n  }\n\n  // ==================== READING MODE ====================\n  var readingModeEnabled = localStorage.getItem('mindspace-reading-mode') === 'true';\n\n  function toggleReadingMode() {\n    readingModeEnabled = !readingModeEnabled;\n    localStorage.setItem('mindspace-reading-mode', readingModeEnabled);\n    applyReadingMode();\n    updateReadingModeButton();\n  }\n\n  function applyReadingMode() {\n    document.body.classList.toggle('reading-mode', readingModeEnabled);\n  }\n\n  function updateReadingModeButton() {\n    var btn = document.getElementById('readingModeBtn');\n    if (btn) {\n      btn.classList.toggle('is-active', readingModeEnabled);\n      btn.setAttribute('aria-pressed', readingModeEnabled.toString());\n    }\n  }\n\n  function createReadingModeToggle() {\n    if (document.getElementById('readingModeBtn')) return;\n\n    var container = document.querySelector('.mb-blogHero__chips');\n    if (!container) return;\n\n    var wrapper = document.createElement('div');\n    wrapper.className = 'mb-readingModeWrapper';\n    wrapper.innerHTML =\n      '<button id=\"readingModeBtn\" class=\"mb-readingModeBtn ' + (readingModeEnabled ? 'is-active' : '') + '\" ' +\n      'type=\"button\" ' +\n      'aria-pressed=\"' + readingModeEnabled + '\" ' +\n      'aria-label=\"' + getTranslation('blog_reading_mode', 'Reading Mode') + '\" ' +\n      'data-translate-aria=\"blog_reading_mode\">' +\n      '<span class=\"reading-icon\" aria-hidden=\"true\">ðŸ“–</span> ' +\n      '<span data-translate=\"blog_reading_mode\">Reading Mode</span>' +\n      '</button>';\n\n    container.parentNode.insertBefore(wrapper, container.nextSibling);\n    document.getElementById('readingModeBtn').addEventListener('click', toggleReadingMode);\n    applyReadingMode();\n  }\n\n  // ==================== READING PROGRESS BAR ====================\n  function updateReadingProgress() {\n    var progressFill = document.querySelector('.mb-readingProgress__bar');\n    var progressBar = document.querySelector('.mb-readingProgress');\n    if (!progressFill || !progressBar) return;\n\n    var scrollTop = window.scrollY;\n    var docHeight = document.documentElement.scrollHeight - window.innerHeight;\n    var progress = docHeight > 0 ? Math.min(Math.round((scrollTop / docHeight) * 100), 100) : 0;\n\n    progressFill.style.width = progress + '%';\n    progressBar.setAttribute('aria-valuenow', progress.toString());\n  }\n\n  function createReadingProgressBar() {\n    if (document.querySelector('.mb-readingProgress')) return;\n\n    var progressBar = document.createElement('div');\n    progressBar.className = 'mb-readingProgress';\n    progressBar.setAttribute('role', 'progressbar');\n    progressBar.setAttribute('aria-label', getTranslation('blog_reading_progress', 'Reading progress'));\n    progressBar.setAttribute('aria-valuemin', '0');\n    progressBar.setAttribute('aria-valuemax', '100');\n    progressBar.setAttribute('aria-valuenow', '0');\n    progressBar.setAttribute('data-translate-aria', 'blog_reading_progress');\n    progressBar.innerHTML = '<div class=\"mb-readingProgress__bar\"></div>';\n\n    document.body.appendChild(progressBar);\n    window.addEventListener('scroll', updateReadingProgress, { passive: true });\n    updateReadingProgress();\n  }\n\n  // ==================== KEYBOARD NAVIGATION ====================\n  function enhanceKeyboardNav() {\n    var articles = document.querySelectorAll('.mb-articleCard, .mb-featureCard, .mb-postCard, .mb-listPost, .mb-miniCard, .mb-compactCard');\n\n    articles.forEach(function (article) {\n      article.setAttribute('tabindex', '0');\n\n      article.addEventListener('keydown', function (e) {\n        if (e.key === 'Enter' || e.key === ' ') {\n          var link = article.querySelector('a[href]');\n          if (link && e.target === article) {\n            e.preventDefault();\n            link.click();\n          }\n        }\n      });\n    });\n  }\n\n  // ==================== HOVER EFFECTS ====================\n  function addHoverEffects() {\n    var cards = document.querySelectorAll('.mb-articleCard, .mb-postCard, .mb-listPost, .mb-miniCard, .mb-compactCard');\n\n    cards.forEach(function (card) {\n      card.addEventListener('mouseenter', function () {\n        card.classList.add('is-hovered');\n      });\n      card.addEventListener('mouseleave', function () {\n        card.classList.remove('is-hovered');\n      });\n      card.addEventListener('focus', function () {\n        card.classList.add('is-focused');\n      });\n      card.addEventListener('blur', function () {\n        card.classList.remove('is-focused');\n      });\n    });\n  }\n\n  // ==================== CATEGORY CARD FILTERS ====================\n  function initCategoryCards() {\n    var categoryCards = document.querySelectorAll('.mb-categoryCard[data-filter]');\n    if (categoryCards.length === 0) return;\n\n    categoryCards.forEach(function (card) {\n      card.addEventListener('click', function () {\n        var filter = card.dataset.filter;\n        categoryCards.forEach(function (c) { c.classList.remove('is-active'); });\n        card.classList.add('is-active');\n\n        var stickyChips = document.querySelectorAll('.mb-stickyChip[data-filter]');\n        stickyChips.forEach(function (c) {\n          c.classList.toggle('is-active', c.dataset.filter === filter);\n        });\n\n        filterArticlesByCategory(filter);\n      });\n    });\n\n    var chips = document.querySelectorAll('.mb-chip[data-filter]');\n    if (chips.length > 0) {\n      var observer = new MutationObserver(function () {\n        var activeChip = document.querySelector('.mb-chip.is-active, .mb-chip.active');\n        var activeFilter = activeChip ? activeChip.dataset.filter : 'all';\n        categoryCards.forEach(function (c) {\n          c.classList.toggle('is-active', c.dataset.filter === activeFilter);\n        });\n      });\n      chips.forEach(function (chip) {\n        observer.observe(chip, { attributes: true, attributeFilter: ['class'] });\n      });\n    }\n  }\n\n  // ==================== ARTICLE FILTERING ====================\n  function filterArticlesByCategory(filter) {\n    var allCards = document.querySelectorAll('[data-category]');\n    allCards.forEach(function (card) {\n      if (filter === 'all') {\n        card.style.display = '';\n        card.style.opacity = '1';\n        card.style.transform = '';\n      } else {\n        var match = card.dataset.category.toLowerCase() === filter.toLowerCase();\n        card.style.display = match ? '' : 'none';\n        if (match) {\n          card.style.opacity = '0';\n          card.style.transform = 'translateY(10px)';\n          requestAnimationFrame(function () {\n            card.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n            card.style.opacity = '1';\n            card.style.transform = '';\n          });\n        }\n      }\n    });\n\n    var resultsCount = document.getElementById('resultsCount');\n    var noResults = document.getElementById('noResults');\n    var activeLabel = document.getElementById('activeFilterLabel');\n    if (resultsCount || noResults) {\n      var visible = document.querySelectorAll('[data-category]:not([style*=\"display: none\"])');\n      if (resultsCount) resultsCount.textContent = 'Showing: ' + visible.length + ' posts';\n      if (noResults) noResults.style.display = visible.length === 0 ? '' : 'none';\n      if (activeLabel) activeLabel.textContent = 'Filter: ' + (filter === 'all' ? 'All' : filter);\n    }\n  }\n\n  // ==================== READING DASHBOARD ====================\n  function initDashboard() {\n    var dashboardCards = document.getElementById('dashboardCards');\n    var ringFill = document.getElementById('ringFill');\n    var ringText = document.getElementById('ringText');\n    var streakCount = document.getElementById('streakCount');\n\n    var readArticles = JSON.parse(localStorage.getItem('mindspace-read-articles') || '[]');\n    var totalArticles = 13;\n    var readCount = readArticles.length;\n    var percentage = Math.round((readCount / totalArticles) * 100);\n\n    if (ringFill) {\n      var circumference = 2 * Math.PI * 35;\n      var offset = circumference - (percentage / 100) * circumference;\n      ringFill.style.strokeDasharray = circumference;\n      ringFill.style.strokeDashoffset = offset;\n    }\n    if (ringText) ringText.textContent = percentage + '%';\n\n    var streak = parseInt(localStorage.getItem('mindspace-reading-streak') || '0', 10);\n    if (streakCount) streakCount.textContent = streak;\n\n    if (window.MindSpaceAuth && window.MindSpaceAuth.getUser) {\n      try {\n        var user = window.MindSpaceAuth.getUser();\n        var sb = window.MindSpaceAuth.getSupabase();\n        if (user && sb) {\n          sb.from('profiles').select('current_streak').eq('id', user.id).single().then(function(result) {\n            if (result.data && result.data.current_streak !== undefined) {\n              var dbStreak = result.data.current_streak || 0;\n              if (streakCount) streakCount.textContent = dbStreak;\n              localStorage.setItem('mindspace-reading-streak', String(dbStreak));\n            }\n          });\n        }\n      } catch(e) {}\n    }\n\n    if (dashboardCards) {\n      if (readArticles.length === 0) {\n        dashboardCards.innerHTML =\n          '<div class=\"mb-dashboard__guest\">' +\n          '<p data-translate=\"blog_dashboard_empty\">Start reading to track your progress!</p>' +\n          '</div>';\n      } else {\n        var recent = readArticles.slice(-5).reverse();\n        dashboardCards.innerHTML = recent.map(function (article) {\n          var progress = article.progress || 0;\n          return '<a class=\"mb-dashboard__card\" href=\"' + (article.url || '#') + '\">' +\n            '<img class=\"mb-dashboard__cardThumb\" src=\"' + (article.image || '') + '\" alt=\"\" loading=\"lazy\">' +\n            '<div class=\"mb-dashboard__cardBody\">' +\n            '<span class=\"mb-dashboard__cardTitle\">' + (article.title || 'Article') + '</span>' +\n            '<div class=\"mb-dashboard__cardBar\">' +\n            '<div class=\"mb-dashboard__cardBarFill\" style=\"width: ' + progress + '%\"></div>' +\n            '</div>' +\n            '</div>' +\n            '</a>';\n        }).join('');\n      }\n    }\n  }\n\n  // ==================== FLOATING TABLE OF CONTENTS ====================\n  function initToc() {\n    var tocLinks = document.querySelectorAll('.mb-blogToc__link');\n    var tocProgress = document.getElementById('tocProgress');\n\n    if (tocLinks.length === 0) return;\n\n    var sections = [];\n    tocLinks.forEach(function (link) {\n      var sectionId = link.getAttribute('data-toc-section');\n      var section = sectionId ? document.getElementById(sectionId) : null;\n      if (section) sections.push({ id: sectionId, element: section, link: link });\n    });\n\n    if (sections.length === 0) return;\n\n    function updateToc() {\n      var scrollTop = window.scrollY + 200;\n      var activeIndex = 0;\n\n      sections.forEach(function (section, index) {\n        if (scrollTop >= section.element.offsetTop) {\n          activeIndex = index;\n        }\n      });\n\n      tocLinks.forEach(function (link) { link.classList.remove('is-active'); });\n      if (sections[activeIndex]) sections[activeIndex].link.classList.add('is-active');\n\n      if (tocProgress) {\n        var docHeight = document.documentElement.scrollHeight - window.innerHeight;\n        var progress = docHeight > 0 ? Math.min(Math.round((window.scrollY / docHeight) * 100), 100) : 0;\n        tocProgress.style.height = progress + '%';\n      }\n    }\n\n    window.addEventListener('scroll', updateToc, { passive: true });\n    updateToc();\n\n    tocLinks.forEach(function (link) {\n      link.addEventListener('click', function (e) {\n        e.preventDefault();\n        var sectionId = link.getAttribute('data-toc-section');\n        var section = sectionId ? document.getElementById(sectionId) : null;\n        if (section) {\n          section.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n      });\n    });\n  }\n\n  // ==================== ARTICLE PREVIEW PANEL ====================\n  function initPreviewPanel() {\n    var panel = document.getElementById('previewPanel');\n    var overlay = document.getElementById('previewOverlay');\n    var closeBtn = document.getElementById('previewClose');\n\n    if (!panel || !overlay) return;\n\n    document.addEventListener('click', function (e) {\n      if (e.target.closest('a[href]') || e.target.closest('button') || e.target.closest('.mb-cardBookmark')) return;\n\n      var card = e.target.closest('.mb-articleCard, .mb-postCard, .mb-miniCard, .mb-compactCard, .mb-listPost');\n      if (!card) return;\n\n      e.preventDefault();\n      openPreview(card);\n    });\n\n    function openPreview(card) {\n      var titleEl = card.querySelector('.mb-articleCard__title a, .mb-postCard__title a, .mb-miniCard__title a, .mb-compactCard__title a, .mb-listPost__title a');\n      var imgEl = card.querySelector('img');\n      var excerptEl = card.querySelector('.mb-articleCard__desc, .mb-postCard__excerpt, .mb-listPost__excerpt');\n      var subtextEl = card.querySelector('.mb-postCard__subtext, .mb-listPost__subtext');\n      var hintEl = card.querySelector('.mb-postHint');\n      var pillEl = card.querySelector('.mb-articleCard__source, .mb-postCard__pill, .mb-pill');\n      var metaEl = card.querySelector('.mb-articleCard__meta, .mb-postCard__meta, .mb-miniCard__meta, .mb-compactCard__meta');\n      var moodEl = card.querySelector('.mb-mood');\n      var linkEl = card.querySelector('a[href]');\n\n      var previewTitle = document.getElementById('previewTitle');\n      var previewImg = document.getElementById('previewImg');\n      var previewCategory = document.getElementById('previewCategory');\n      var previewMeta = document.getElementById('previewMeta');\n      var previewMood = document.getElementById('previewMood');\n      var previewExcerpt = document.getElementById('previewExcerpt');\n      var previewTakeawaysList = document.getElementById('previewTakeawaysList');\n      var previewReadBtn = document.getElementById('previewReadBtn');\n\n      if (previewTitle) previewTitle.textContent = titleEl ? titleEl.textContent.trim() : '';\n\n      if (previewImg && imgEl) {\n        previewImg.src = imgEl.src || '';\n        previewImg.alt = imgEl.alt || '';\n      }\n\n      if (previewCategory) {\n        previewCategory.textContent = pillEl ? pillEl.textContent.trim() : '';\n        previewCategory.className = 'mb-previewPanel__category';\n        if (pillEl) {\n          var pillClasses = pillEl.className\n            .replace('mb-articleCard__source', '')\n            .replace('mb-postCard__pill', '')\n            .replace('mb-miniCard__pill', '')\n            .replace('mb-compactCard__pill', '')\n            .replace('mb-pill', '')\n            .trim();\n          if (pillClasses) previewCategory.className += ' ' + pillClasses;\n        }\n      }\n\n      if (previewMeta) previewMeta.textContent = metaEl ? metaEl.textContent.trim() : '';\n\n      if (previewMood && moodEl) {\n        previewMood.textContent = moodEl.textContent.trim();\n        var moodMatch = moodEl.className.match(/mb-mood--\\w+/);\n        previewMood.className = 'mb-previewPanel__mood' + (moodMatch ? ' ' + moodMatch[0] : '');\n      }\n\n      if (previewExcerpt) previewExcerpt.textContent = excerptEl ? excerptEl.textContent.trim() : '';\n\n      if (previewTakeawaysList) {\n        var takeaways = [];\n        if (subtextEl) {\n          subtextEl.textContent.split('.').forEach(function (s) {\n            var trimmed = s.trim();\n            if (trimmed.length > 10) takeaways.push(trimmed);\n          });\n        }\n        if (hintEl) {\n          var hintText = hintEl.textContent.replace(/^(Best for:|What you'll learn:|Quick take:)/i, '').trim();\n          if (hintText) takeaways.push(hintText);\n        }\n        previewTakeawaysList.innerHTML = takeaways.length > 0\n          ? takeaways.map(function (t) { return '<li>' + t + '</li>'; }).join('')\n          : '<li>Click \"Read Full Article\" for the complete content.</li>';\n      }\n\n      if (previewReadBtn) previewReadBtn.href = linkEl ? linkEl.href : '#';\n\n      panel.classList.add('is-open');\n      overlay.classList.add('is-open');\n      document.body.style.overflow = 'hidden';\n    }\n\n    function closePreview() {\n      panel.classList.remove('is-open');\n      overlay.classList.remove('is-open');\n      document.body.style.overflow = '';\n    }\n\n    if (closeBtn) closeBtn.addEventListener('click', closePreview);\n    overlay.addEventListener('click', closePreview);\n\n    document.addEventListener('keydown', function (e) {\n      if (e.key === 'Escape' && panel.classList.contains('is-open')) closePreview();\n    });\n\n    var previewTts = document.getElementById('previewTts');\n    if (previewTts) {\n      previewTts.addEventListener('click', function () {\n        var title = document.getElementById('previewTitle');\n        var excerpt = document.getElementById('previewExcerpt');\n        var text = (title ? title.textContent : '') + '. ' + (excerpt ? excerpt.textContent : '');\n        speakText(text, previewTts);\n      });\n    }\n  }\n\n  // ==================== BOOKMARK VISUAL TOGGLE ====================\n  function initBookmarks() {\n    document.addEventListener('click', function (e) {\n      var btn = e.target.closest('.mb-cardBookmark');\n      if (!btn) return;\n      btn.classList.toggle('is-saved');\n      var icon = btn.querySelector('ion-icon');\n      if (icon) {\n        icon.setAttribute('name', btn.classList.contains('is-saved') ? 'bookmark' : 'bookmark-outline');\n      }\n    });\n  }\n\n  // ==================== CARD READING PROGRESS ====================\n  function initCardProgress() {\n    var readArticles = JSON.parse(localStorage.getItem('mindspace-read-articles') || '[]');\n    if (readArticles.length === 0) return;\n\n    document.querySelectorAll('[data-category]').forEach(function (card) {\n      var link = card.querySelector('a[href]');\n      if (!link) return;\n\n      var url = link.getAttribute('href');\n      var article = readArticles.find(function (a) { return a.url === url; });\n\n      if (article && article.progress > 0) {\n        var existingProgress = card.querySelector('.mb-cardProgress');\n        if (existingProgress) {\n          var fill = existingProgress.querySelector('.mb-cardProgress__bar');\n          if (fill) fill.style.width = article.progress + '%';\n        } else {\n          var progressBar = document.createElement('div');\n          progressBar.className = 'mb-cardProgress';\n          progressBar.innerHTML = '<div class=\"mb-cardProgress__bar\" style=\"width: ' + article.progress + '%\"></div>';\n          var imgWrap = card.querySelector('.mb-articleCard__imgWrap, .mb-postCard__imgWrap, .mb-miniCard__imgWrap, .mb-compactCard__imgWrap, .mb-listPost__imgWrap');\n          if (imgWrap) imgWrap.appendChild(progressBar);\n        }\n      }\n    });\n  }\n\n  // ==================== BACK TO TOP ====================\n  function initBackToTop() {\n    var btn = document.getElementById('backToTop');\n    if (!btn) return;\n\n    window.addEventListener('scroll', function () {\n      btn.classList.toggle('is-visible', window.scrollY > 600);\n    }, { passive: true });\n\n    btn.addEventListener('click', function () {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    });\n  }\n\n  // ==================== SMOOTH SCROLL ====================\n  function initSmoothScroll() {\n    document.querySelectorAll('a[href^=\"#\"]').forEach(function (link) {\n      link.addEventListener('click', function (e) {\n        var href = link.getAttribute('href');\n        if (!href || href === '#') return;\n        var target = document.querySelector(href);\n        if (target) {\n          e.preventDefault();\n          target.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n      });\n    });\n  }\n\n  // ==================== SCROLL REVEAL ====================\n  function initScrollReveal() {\n    var revealEls = document.querySelectorAll('[data-reveal]');\n    if (!revealEls.length) return;\n\n    var observer = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        if (entry.isIntersecting) {\n          entry.target.classList.add('is-revealed');\n          observer.unobserve(entry.target);\n        }\n      });\n    }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });\n\n    revealEls.forEach(function (el) { observer.observe(el); });\n  }\n\n  // ==================== STICKY FILTER CHIPS ====================\n  function initStickyFilters() {\n    var stickyEl = document.getElementById('stickyFilters');\n    var catSection = document.querySelector('.mb-categoryCards');\n    if (!stickyEl || !catSection) return;\n\n    var chips = stickyEl.querySelectorAll('.mb-stickyChip[data-filter]');\n    var categoryCards = document.querySelectorAll('.mb-categoryCard[data-filter]');\n\n    function getNavbarHeight() {\n      var header = document.querySelector('.header');\n      if (!header) return 80;\n      return header.offsetHeight;\n    }\n\n    function updateStickyVisibility() {\n      var rect = catSection.getBoundingClientRect();\n      var navH = getNavbarHeight();\n      var shouldShow = rect.bottom < navH;\n      stickyEl.classList.toggle('is-visible', shouldShow);\n      stickyEl.style.top = navH + 'px';\n    }\n\n    window.addEventListener('scroll', updateStickyVisibility, { passive: true });\n    window.addEventListener('resize', updateStickyVisibility, { passive: true });\n    updateStickyVisibility();\n\n    chips.forEach(function (chip) {\n      chip.addEventListener('click', function () {\n        chips.forEach(function (c) { c.classList.remove('is-active'); });\n        chip.classList.add('is-active');\n        var filter = chip.dataset.filter;\n        categoryCards.forEach(function (c) {\n          c.classList.toggle('is-active', c.dataset.filter === filter);\n        });\n        filterArticlesByCategory(filter);\n      });\n    });\n  }\n\n  // ==================== ROTATING QUOTES ====================\n  function initQuoteRotation() {\n    var quoteEl = document.getElementById('rotatingQuote');\n    var authorEl = document.getElementById('rotatingAuthor');\n    if (!quoteEl || !authorEl) return;\n\n    var quotes = [\n      { text: getTranslation('quote_1_text', \"You don\\u2019t have to control your thoughts. You just have to stop letting them control you.\"), author: getTranslation('quote_1_author', \"Dan Millman\") },\n      { text: getTranslation('quote_2_text', \"Mental health is not a destination, but a process. It\\u2019s about how you drive, not where you\\u2019re going.\"), author: getTranslation('quote_2_author', \"Noam Shpancer\") },\n      { text: getTranslation('quote_3_text', \"There is hope, even when your brain tells you there isn\\u2019t.\"), author: getTranslation('quote_3_author', \"John Green\") },\n      { text: getTranslation('quote_5_text', \"You are not your illness. You have an individual story to tell. You have a name, a history, a personality.\"), author: getTranslation('quote_5_author', \"Julian Seifter\") },\n      { text: getTranslation('quote_6_text', \"Healing takes time, and asking for help is a courageous step.\"), author: getTranslation('quote_6_author', \"Mariska Hargitay\") },\n      { text: getTranslation('quote_4_text', \"Self-care is how you take your power back.\"), author: getTranslation('quote_4_author', \"Lalah Delia\") },\n      { text: getTranslation('quote_7_text', \"Be patient with yourself. Self-growth is tender; it\\u2019s holy ground.\"), author: getTranslation('quote_7_author', \"Stephen Covey\") }\n    ];\n\n    var index = 0;\n    setInterval(function () {\n      index = (index + 1) % quotes.length;\n      quoteEl.style.opacity = '0';\n      authorEl.style.opacity = '0';\n      setTimeout(function () {\n        quoteEl.textContent = quotes[index].text;\n        authorEl.textContent = '\\u2014 ' + quotes[index].author;\n        quoteEl.style.opacity = '1';\n        authorEl.style.opacity = '1';\n      }, 400);\n    }, 8000);\n  }\n\n  // ==================== ANIMATED STAT COUNTERS ====================\n  function initStatCounters() {\n    var statNumbers = document.querySelectorAll('.mb-stats__number[data-count], .mb-heroStats__number[data-count]');\n    if (!statNumbers.length) return;\n\n    var observer = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        if (entry.isIntersecting) {\n          var el = entry.target;\n          var target = parseInt(el.getAttribute('data-count'), 10);\n          var duration = 1500;\n          var start = 0;\n          var startTime = null;\n\n          function animate(timestamp) {\n            if (!startTime) startTime = timestamp;\n            var progress = Math.min((timestamp - startTime) / duration, 1);\n            var eased = 1 - Math.pow(1 - progress, 3);\n            el.textContent = Math.round(eased * target);\n            if (progress < 1) requestAnimationFrame(animate);\n            else el.textContent = target + '+';\n          }\n\n          requestAnimationFrame(animate);\n          observer.unobserve(el);\n        }\n      });\n    }, { threshold: 0.5 });\n\n    statNumbers.forEach(function (el) { observer.observe(el); });\n  }\n\n  // ==================== MOOD-BASED RECOMMENDATIONS ====================\n  function initMoodRecommendations() {\n    var moodBtns = document.querySelectorAll('.mb-moodBtn[data-mood]');\n    var resultsEl = document.getElementById('moodResults');\n    var resultsTitleEl = document.getElementById('moodResultsTitle');\n    var resultsCardsEl = document.getElementById('moodResultsCards');\n    if (!moodBtns.length || !resultsEl) return;\n\n    var moodMap = {\n      anxious: {\n        title: 'When you\\u2019re feeling anxious, try these:',\n        articles: [\n          { title: 'Anxiety Disorders: symptoms, types & treatment', url: '../articles/anxiety.html', category: 'Anxiety', time: '15 min' },\n          { title: 'Meditation & mindfulness: a beginner\\u2019s guide', url: '../articles/mindfulness.html', category: 'Mindfulness', time: '12 min' },\n          { title: 'Anxiety and sleep: the cycle that keeps people stuck', url: 'https://www.sleepfoundation.org/mental-health/anxiety-and-sleep', category: 'Sleep', time: '6 min' }\n        ]\n      },\n      sad: {\n        title: 'When you\\u2019re feeling down, these can help:',\n        articles: [\n          { title: 'Understanding Depression: Symptoms & Treatment', url: '../articles/depression.html', category: 'Depression', time: '12 min' },\n          { title: 'Stories of Hope: Real Recovery Journeys', url: '../articles/recovery-stories.html', category: 'Story', time: '10 min' },\n          { title: 'Mental Health Wins: Celebrating Progress', url: '../articles/mental-health-wins.html', category: 'Story', time: '10 min' }\n        ]\n      },\n      stressed: {\n        title: 'Stressed? These articles offer real coping tools:',\n        articles: [\n          { title: 'Stress: what it is and how to manage it', url: '../articles/stress.html', category: 'Stress', time: '12 min' },\n          { title: 'Mental health basics: daily life & support', url: 'https://www.cdc.gov/mental-health/about/', category: 'Stress', time: '6 min' },\n          { title: 'Workplace Mental Health: A Growing Priority', url: '../articles/workplace-wellness.html', category: 'News', time: '10 min' }\n        ]\n      },\n      tired: {\n        title: 'Rest is important. Start here:',\n        articles: [\n          { title: 'Better Sleep: Your Complete Guide', url: '../articles/sleep.html', category: 'Sleep', time: '10 min' },\n          { title: 'How much sleep do you really need?', url: '../articles/sleep.html', category: 'Sleep', time: '4 min' },\n          { title: 'Meditation & mindfulness: a beginner\\u2019s guide', url: '../articles/mindfulness.html', category: 'Mindfulness', time: '12 min' }\n        ]\n      },\n      hopeful: {\n        title: 'Keep that energy! These will inspire you:',\n        articles: [\n          { title: 'Stories of Hope: Real Recovery Journeys', url: '../articles/recovery-stories.html', category: 'Story', time: '10 min' },\n          { title: 'Community Care: The Power of Coming Together', url: '../articles/community-support.html', category: 'Community', time: '10 min' },\n          { title: 'Mental Health Wins: Celebrating Progress', url: '../articles/mental-health-wins.html', category: 'Story', time: '10 min' }\n        ]\n      },\n      curious: {\n        title: 'Great mindset! Explore these in-depth guides:',\n        articles: [\n          { title: 'Anxiety Disorders: symptoms, types & treatment', url: '../articles/anxiety.html', category: 'Anxiety', time: '15 min' },\n          { title: 'Teen Mental Health: A Complete Guide', url: '../articles/teen-mental-health.html', category: 'Teens', time: '10 min' },\n          { title: 'Breaking: New Research in Mental Health', url: '../articles/mental-health-news.html', category: 'News', time: '10 min' }\n        ]\n      }\n    };\n\n    moodBtns.forEach(function (btn) {\n      btn.addEventListener('click', function () {\n        var mood = btn.dataset.mood;\n        var data = moodMap[mood];\n        if (!data) return;\n\n        moodBtns.forEach(function (b) { b.classList.remove('is-active'); });\n        btn.classList.add('is-active');\n\n        if (resultsTitleEl) resultsTitleEl.textContent = data.title;\n        if (resultsCardsEl) {\n          resultsCardsEl.innerHTML = data.articles.map(function (a) {\n            return '<a class=\"mb-moodRec__card\" href=\"' + a.url + '\">' +\n              '<span class=\"mb-pill\">' + a.category + '</span>' +\n              '<span class=\"mb-moodRec__cardTitle\">' + a.title + '</span>' +\n              '<span class=\"mb-moodRec__cardMeta\">' + a.time + ' read</span>' +\n              '</a>';\n          }).join('');\n        }\n\n        resultsEl.hidden = false;\n        resultsEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n      });\n    });\n  }\n\n  // ==================== INITIALIZATION ====================\n  function init() {\n    addTTSButtons();\n    createReadingModeToggle();\n    createReadingProgressBar();\n    enhanceKeyboardNav();\n    addHoverEffects();\n    initCategoryCards();\n    initDashboard();\n    initToc();\n    initPreviewPanel();\n    initBookmarks();\n    initCardProgress();\n    initBackToTop();\n    initSmoothScroll();\n    initScrollReveal();\n    initStickyFilters();\n    initQuoteRotation();\n    initStatCounters();\n    initMoodRecommendations();\n\n    window.addEventListener('beforeunload', stopSpeech);\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n\n  // --- Public API ---\n  window.MindSpaceBlog = {\n    stopSpeech: stopSpeech,\n    toggleReadingMode: toggleReadingMode,\n    speakText: speakText\n  };\n})();\n","path":null,"size_bytes":34738,"size_tokens":null},"mindspace-build/js/toast.js":{"content":"// ==================== TOAST NOTIFICATIONS ====================\n\nconst ToastManager = (function() {\n  let container = null;\n  \n  function init() {\n    if (container) return;\n    \n    container = document.createElement('div');\n    container.id = 'toast-container';\n    container.setAttribute('role', 'alert');\n    container.setAttribute('aria-live', 'polite');\n    document.body.appendChild(container);\n  }\n  \n  function show(message, type = 'info', duration = 4000) {\n    init();\n    \n    const toast = document.createElement('div');\n    toast.className = `toast toast-${type}`;\n    \n    const iconMap = {\n      success: '<i class=\"fas fa-check-circle\"></i>',\n      error: '<i class=\"fas fa-exclamation-circle\"></i>',\n      warning: '<i class=\"fas fa-exclamation-triangle\"></i>',\n      info: '<i class=\"fas fa-info-circle\"></i>'\n    };\n    \n    toast.innerHTML = `\n      <span class=\"toast-icon\">${iconMap[type] || iconMap.info}</span>\n      <span class=\"toast-message\">${escapeHtml(message)}</span>\n      <button class=\"toast-close\" aria-label=\"Close notification\">\n        <i class=\"fas fa-times\"></i>\n      </button>\n    `;\n    \n    const closeBtn = toast.querySelector('.toast-close');\n    closeBtn.addEventListener('click', () => removeToast(toast));\n    \n    container.appendChild(toast);\n    \n    requestAnimationFrame(() => {\n      toast.classList.add('toast-visible');\n    });\n    \n    if (duration > 0) {\n      setTimeout(() => removeToast(toast), duration);\n    }\n    \n    return toast;\n  }\n  \n  function removeToast(toast) {\n    if (!toast || !toast.parentNode) return;\n    \n    toast.classList.remove('toast-visible');\n    toast.classList.add('toast-hiding');\n    \n    setTimeout(() => {\n      if (toast.parentNode) {\n        toast.parentNode.removeChild(toast);\n      }\n    }, 300);\n  }\n  \n  function escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n  \n  function success(message, duration) {\n    return show(message, 'success', duration);\n  }\n  \n  function error(message, duration) {\n    return show(message, 'error', duration);\n  }\n  \n  function warning(message, duration) {\n    return show(message, 'warning', duration);\n  }\n  \n  function info(message, duration) {\n    return show(message, 'info', duration);\n  }\n  \n  return {\n    show,\n    success,\n    error,\n    warning,\n    info\n  };\n})();\n\nif (typeof window !== 'undefined') {\n  window.ToastManager = ToastManager;\n}\n","path":null,"size_bytes":2465,"size_tokens":null},"js/auth.js":{"content":"// ==================== AUTHENTICATION ====================\n\n// --- Supabase Configuration ---\nconst SUPABASE_URL = \"https://cxjqessxarjayqxvhnhs.supabase.co\";\nconst SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN4anFlc3N4YXJqYXlxeHZobmhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgwMjQwOTEsImV4cCI6MjA4MzYwMDA5MX0.SUI4sPOSPxDiGwqwQr19UOKtbK7KmjMqkX6HUT6-yps\";\n\nlet supabaseClient = null;\nlet authReady = false;\nlet currentAuthUser = null;\nlet authChangeCallbacks = [];\n\n// --- Supabase Client ---\nfunction getSupabase() {\n  if (!supabaseClient && typeof supabase !== 'undefined') {\n    supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n  }\n  return supabaseClient;\n}\n\n// --- User Session ---\nasync function getCurrentUser() {\n  const sb = getSupabase();\n  if (!sb) return null;\n  \n  const { data } = await sb.auth.getSession();\n  return data?.session?.user || null;\n}\n\nasync function signOut() {\n  const sb = getSupabase();\n  if (!sb) return;\n  \n  await sb.auth.signOut();\n}\n\n// --- Path Helpers ---\nfunction getAuthPath() {\n  const path = window.location.pathname;\n  if (path.includes('/blog/') || \n      path.includes('/resourcelib/') ||\n      path.includes('/community/') ||\n      path.includes('/support/') ||\n      path.includes('/auth/') ||\n      path.includes('/articles/') ||\n      path.includes('/profile/') ||\n      path.includes('/find-help/')) {\n    return '../auth/';\n  }\n  return './auth/';\n}\n\nfunction getProfilePath() {\n  const path = window.location.pathname;\n  if (path.includes('/blog/') || \n      path.includes('/resourcelib/') ||\n      path.includes('/community/') ||\n      path.includes('/support/') ||\n      path.includes('/auth/') ||\n      path.includes('/articles/') ||\n      path.includes('/find-help/')) {\n    return '../profile/';\n  }\n  if (path.includes('/profile/')) {\n    return './';\n  }\n  return './profile/';\n}\n\n// --- Redirect Management ---\nfunction saveRedirectUrl() {\n  const currentUrl = window.location.pathname + window.location.search;\n  if (!currentUrl.includes('/auth/')) {\n    sessionStorage.setItem('auth_redirect', currentUrl);\n  }\n}\n\nfunction saveRedirectToProfile() {\n  sessionStorage.setItem('auth_redirect', '/profile/');\n  sessionStorage.setItem('auth_intent', 'manage_profile');\n}\n\nfunction getRedirectUrl() {\n  return sessionStorage.getItem('auth_redirect') || '/';\n}\n\nfunction getAuthIntent() {\n  return sessionStorage.getItem('auth_intent') || null;\n}\n\nfunction clearRedirectUrl() {\n  sessionStorage.removeItem('auth_redirect');\n  sessionStorage.removeItem('auth_intent');\n}\n\n// --- Auth State Broadcasting ---\nfunction broadcastAuthChange(user) {\n  if (currentAuthUser === user && authReady) return;\n  \n  currentAuthUser = user;\n  const wasReady = authReady;\n  authReady = true;\n  \n  authChangeCallbacks.forEach(cb => cb(user));\n  \n  if (!wasReady) {\n    const event = new CustomEvent('mindbalance:authready', {\n      detail: { user: user, isSignedIn: !!user }\n    });\n    window.dispatchEvent(event);\n  }\n  \n  const event = new CustomEvent('mindbalance:authchange', {\n    detail: { user: user, isSignedIn: !!user }\n  });\n  window.dispatchEvent(event);\n}\n\nfunction onAuthReady(callback) {\n  if (authReady) {\n    callback(currentAuthUser);\n  } else {\n    const handler = (e) => {\n      callback(e.detail.user);\n      window.removeEventListener('mindbalance:authready', handler);\n    };\n    window.addEventListener('mindbalance:authready', handler);\n  }\n}\n\nfunction onAuthChange(callback) {\n  if (authChangeCallbacks.indexOf(callback) === -1) {\n    authChangeCallbacks.push(callback);\n  }\n  if (authReady) {\n    callback(currentAuthUser);\n  }\n}\n\n// --- Auth UI Updates ---\nfunction updateAuthUI(user) {\n  const authBtns = document.querySelectorAll('[data-auth-btn]');\n  const authPath = getAuthPath();\n  \n  authBtns.forEach(authBtn => {\n    const spanEl = authBtn.querySelector('.span') || authBtn.querySelector('.auth-text') || authBtn.querySelector('span');\n    const textTarget = spanEl || authBtn;\n    \n    authBtn.href = authPath;\n    \n    if (user) {\n      textTarget.textContent = 'Sign Out';\n      if (textTarget.hasAttribute('data-translate')) {\n        textTarget.setAttribute('data-translate', 'nav_signout');\n      }\n      authBtn.onclick = (e) => {\n        e.preventDefault();\n        signOut();\n      };\n    } else {\n      textTarget.textContent = 'Sign In';\n      if (textTarget.hasAttribute('data-translate')) {\n        textTarget.setAttribute('data-translate', 'nav_signin');\n      }\n      authBtn.onclick = (e) => {\n        e.preventDefault();\n        saveRedirectUrl();\n        window.location.href = authPath;\n      };\n    }\n  });\n  \n  document.querySelectorAll('[data-auth-show]').forEach(el => {\n    if (user) {\n      el.style.display = '';\n      el.removeAttribute('hidden');\n    } else {\n      el.style.display = 'none';\n      el.setAttribute('hidden', '');\n    }\n  });\n  \n  document.querySelectorAll('[data-auth-hide]').forEach(el => {\n    if (user) {\n      el.style.display = 'none';\n      el.setAttribute('hidden', '');\n    } else {\n      el.style.display = '';\n      el.removeAttribute('hidden');\n    }\n  });\n  \n  updateUserButton(user);\n}\n\n// --- Mobile Logout ---\nfunction handleMobileLogout() {\n  signOut();\n}\n\nwindow.handleMobileLogout = handleMobileLogout;\n\n// --- User Button ---\nasync function updateUserButton(user) {\n  const userBtn = document.querySelector('[data-user-btn]');\n  if (!userBtn) return;\n  \n  const icon = userBtn.querySelector('.action-icon');\n  \n  if (user) {\n    userBtn.classList.add('is-signed-in');\n    \n    userBtn.onclick = null;\n    userBtn.href = getProfilePath();\n    \n    try {\n      const sb = getSupabase();\n      if (sb) {\n        const { data: profile } = await sb\n          .from('profiles')\n          .select('avatar_url, display_name')\n          .eq('id', user.id)\n          .single();\n        \n        if (profile?.avatar_url) {\n          if (icon) icon.style.display = 'none';\n          \n          let avatar = userBtn.querySelector('.user-avatar');\n          if (!avatar) {\n            avatar = document.createElement('img');\n            avatar.className = 'user-avatar';\n            avatar.alt = profile.display_name || 'User';\n            userBtn.insertBefore(avatar, userBtn.firstChild);\n          }\n          avatar.src = profile.avatar_url;\n        } else {\n          if (icon) icon.style.display = '';\n          const existingAvatar = userBtn.querySelector('.user-avatar');\n          if (existingAvatar) existingAvatar.remove();\n        }\n      }\n    } catch (e) {\n      console.log('Could not load user avatar');\n      if (icon) icon.style.display = '';\n    }\n  } else {\n    userBtn.classList.remove('is-signed-in');\n    \n    if (icon) icon.style.display = '';\n    const avatar = userBtn.querySelector('.user-avatar');\n    if (avatar) avatar.remove();\n    \n    userBtn.onclick = (e) => {\n      e.preventDefault();\n      saveRedirectToProfile();\n      window.location.href = getAuthPath();\n    };\n  }\n}\n\n// --- Auth Initialization ---\nfunction initAuth() {\n  const sb = getSupabase();\n  if (!sb) return;\n  \n  initUserMenu();\n  \n  sb.auth.onAuthStateChange((event, session) => {\n    const user = session?.user || null;\n    broadcastAuthChange(user);\n    updateAuthUI(user);\n    updateUserMenuUI(user);\n    if (user) {\n      logDailyVisit(user.id);\n    }\n  });\n  \n  getCurrentUser().then(user => {\n    broadcastAuthChange(user);\n    updateAuthUI(user);\n    updateUserMenuUI(user);\n    if (user) {\n      logDailyVisit(user.id);\n    }\n  });\n}\n\n// --- Daily Visit Logging ---\nasync function logDailyVisit(userId) {\n  const sb = getSupabase();\n  if (!sb || !userId) return;\n  \n  const today = new Date().toISOString().split('T')[0];\n  const sessionKey = `daily_visit_logged_${today}`;\n  \n  if (sessionStorage.getItem(sessionKey)) {\n    return;\n  }\n  \n  try {\n    await sb\n      .from('user_engagement')\n      .upsert({\n        user_id: userId,\n        visit_date: today,\n        articles_read: 0\n      }, { \n        onConflict: 'user_id,visit_date',\n        ignoreDuplicates: true\n      });\n    \n    sessionStorage.setItem(sessionKey, 'true');\n    await updateStreakFromActivity(userId);\n  } catch (e) {\n    console.warn('Error logging daily visit:', e);\n  }\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initAuth);\n} else {\n  initAuth();\n}\n\n// ==================== READING ACTIVITY & STREAK TRACKING ====================\n\nasync function logReadingActivity(articleSlug, articleTitle) {\n  const sb = getSupabase();\n  if (!sb) return null;\n  \n  const user = await getCurrentUser();\n  if (!user) return null;\n  \n  const today = new Date().toISOString().split('T')[0];\n  \n  const sessionKey = `reading_logged_${articleSlug}_${today}`;\n  if (sessionStorage.getItem(sessionKey)) {\n    console.log('Already logged reading for this article today');\n    return null;\n  }\n  \n  try {\n    const { data: existing } = await sb\n      .from('user_engagement')\n      .select('articles_read')\n      .eq('user_id', user.id)\n      .eq('visit_date', today)\n      .single();\n    \n    const currentCount = existing?.articles_read || 0;\n    \n    const { data, error } = await sb\n      .from('user_engagement')\n      .upsert({\n        user_id: user.id,\n        visit_date: today,\n        articles_read: currentCount + 1\n      }, { \n        onConflict: 'user_id,visit_date'\n      })\n      .select()\n      .single();\n    \n    if (error) throw error;\n    \n    sessionStorage.setItem(sessionKey, 'true');\n    \n    await updateStreakFromActivity(user.id);\n    return data;\n  } catch (e) {\n    console.error('Error logging reading activity:', e);\n    return null;\n  }\n}\n\n// --- Streak Calculation ---\nasync function updateStreakFromActivity(userId) {\n  const sb = getSupabase();\n  if (!sb) return;\n  \n  try {\n    const { data: engagementDays, error } = await sb\n      .from('user_engagement')\n      .select('visit_date')\n      .eq('user_id', userId)\n      .order('visit_date', { ascending: false });\n    \n    if (error || !engagementDays || engagementDays.length === 0) {\n      return;\n    }\n    \n    let currentStreak = 0;\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    \n    for (let i = 0; i < engagementDays.length; i++) {\n      const visitDate = new Date(engagementDays[i].visit_date + 'T00:00:00');\n      const expectedDate = new Date(today);\n      expectedDate.setDate(expectedDate.getDate() - i);\n      expectedDate.setHours(0, 0, 0, 0);\n      \n      if (visitDate.getTime() === expectedDate.getTime()) {\n        currentStreak++;\n      } else if (i === 0) {\n        const yesterday = new Date(today);\n        yesterday.setDate(yesterday.getDate() - 1);\n        yesterday.setHours(0, 0, 0, 0);\n        \n        if (visitDate.getTime() === yesterday.getTime()) {\n          currentStreak++;\n        } else {\n          break;\n        }\n      } else {\n        break;\n      }\n    }\n    \n    const { data: profile } = await sb\n      .from('profiles')\n      .select('longest_streak')\n      .eq('id', userId)\n      .single();\n    \n    const longestStreak = Math.max(currentStreak, profile?.longest_streak || 0);\n    \n    await sb\n      .from('profiles')\n      .update({\n        current_streak: currentStreak,\n        longest_streak: longestStreak,\n        last_visit_date: today.toISOString().split('T')[0]\n      })\n      .eq('id', userId);\n    \n    window.dispatchEvent(new CustomEvent('mindbalance:streakupdated', {\n      detail: { currentStreak, longestStreak }\n    }));\n    \n  } catch (e) {\n    console.error('Error updating streak:', e);\n  }\n}\n\n// --- Reading Calendar ---\nasync function getReadingCalendar(userId, days = 30) {\n  const sb = getSupabase();\n  if (!sb) return [];\n  \n  const startDate = new Date();\n  startDate.setDate(startDate.getDate() - days);\n  \n  try {\n    const { data, error } = await sb\n      .from('user_engagement')\n      .select('visit_date, articles_read')\n      .eq('user_id', userId)\n      .gte('visit_date', startDate.toISOString().split('T')[0])\n      .order('visit_date', { ascending: true });\n    \n    if (error) throw error;\n    return data || [];\n  } catch (e) {\n    console.error('Error fetching reading calendar:', e);\n    return [];\n  }\n}\n\n// ==================== USER MENU ====================\n\nfunction toggleUserMenu() {\n  const wrapper = document.getElementById('userMenuWrapper');\n  const trigger = document.getElementById('userMenuTrigger');\n  if (!wrapper) return;\n  \n  const isActive = wrapper.classList.toggle('active');\n  if (trigger) {\n    trigger.setAttribute('aria-expanded', isActive);\n  }\n}\n\nfunction closeUserMenu() {\n  const wrapper = document.getElementById('userMenuWrapper');\n  const trigger = document.getElementById('userMenuTrigger');\n  if (wrapper) {\n    wrapper.classList.remove('active');\n  }\n  if (trigger) {\n    trigger.setAttribute('aria-expanded', 'false');\n  }\n}\n\nasync function handleUserMenuLogout() {\n  closeUserMenu();\n  await signOut();\n  window.location.href = '/';\n}\n\n// --- User Menu UI ---\nasync function updateUserMenuUI(user) {\n  const signedInSection = document.querySelector('.user-menu-signed-in');\n  const guestSection = document.querySelector('.user-menu-guest');\n  const userIcon = document.querySelector('[data-user-icon]');\n  const userMenuAvatar = document.getElementById('userMenuAvatar');\n  const userMenuName = document.getElementById('userMenuName');\n  const userMenuEmail = document.getElementById('userMenuEmail');\n  \n  if (user) {\n    if (signedInSection) signedInSection.style.display = 'block';\n    if (guestSection) guestSection.style.display = 'none';\n    \n    let displayName = user.user_metadata?.display_name || user.email?.split('@')[0] || 'User';\n    let avatarUrl = user.user_metadata?.avatar_url || null;\n    \n    if (userMenuEmail) userMenuEmail.textContent = user.email || '';\n    \n    try {\n      const sb = getSupabase();\n      if (sb) {\n        const { data: profile } = await sb\n          .from('profiles')\n          .select('avatar_url, display_name')\n          .eq('id', user.id)\n          .single();\n        \n        if (profile) {\n          if (profile.display_name) displayName = profile.display_name;\n          if (profile.avatar_url) avatarUrl = profile.avatar_url;\n        }\n      }\n    } catch (e) {\n    }\n    \n    if (userMenuName) userMenuName.textContent = displayName;\n    \n    if (userMenuAvatar) {\n      userMenuAvatar.src = avatarUrl || '/assets/images/default-avatar.png';\n    }\n    \n    if (userIcon) {\n      if (avatarUrl) {\n        userIcon.innerHTML = `<img src=\"${avatarUrl}\" alt=\"${displayName}\" class=\"user-avatar-small\">`;\n      } else {\n        userIcon.innerHTML = '<ion-icon name=\"person-outline\"></ion-icon>';\n      }\n    }\n  } else {\n    if (signedInSection) signedInSection.style.display = 'none';\n    if (guestSection) guestSection.style.display = 'block';\n    \n    if (userIcon) {\n      userIcon.innerHTML = '<ion-icon name=\"person-outline\"></ion-icon>';\n    }\n    \n    if (userMenuAvatar) {\n      userMenuAvatar.src = '/assets/images/default-avatar.png';\n    }\n    if (userMenuName) userMenuName.textContent = 'User';\n    if (userMenuEmail) userMenuEmail.textContent = '';\n  }\n}\n\n// --- User Menu Initialization ---\nfunction initUserMenu() {\n  const trigger = document.getElementById('userMenuTrigger');\n  const wrapper = document.getElementById('userMenuWrapper');\n  \n  if (trigger) {\n    trigger.addEventListener('click', (e) => {\n      e.stopPropagation();\n      toggleUserMenu();\n    });\n  }\n  \n  document.addEventListener('click', (e) => {\n    if (wrapper && !wrapper.contains(e.target)) {\n      closeUserMenu();\n    }\n  });\n  \n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n      closeUserMenu();\n    }\n  });\n}\n\n// --- Global Exports ---\nwindow.toggleUserMenu = toggleUserMenu;\nwindow.closeUserMenu = closeUserMenu;\nwindow.handleUserMenuLogout = handleUserMenuLogout;\n\nwindow.MindBalanceAuth = {\n  getSupabase,\n  getCurrentUser,\n  signOut,\n  onAuthReady,\n  onAuthChange,\n  getRedirectUrl,\n  clearRedirectUrl,\n  saveRedirectUrl,\n  isReady: () => authReady,\n  getUser: () => currentAuthUser,\n  logReadingActivity,\n  getReadingCalendar,\n  updateStreakFromActivity,\n  updateUserMenuUI\n};\n","path":null,"size_bytes":16194,"size_tokens":null},"mindspace-build/profile/profile.css":{"content":"/* === VARIABLES === */\n:root {\n  --profile-accent: var(--user-accent);\n  --profile-gradient: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n}\n\n[data-theme=\"dark\"] {\n  --profile-accent: var(--user-accent-light, var(--user-accent));\n  --profile-gradient: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n}\n\n/* === PROFILE BASE === */\n.mb-profile {\n  min-height: 80vh;\n  background: var(--user-accent-soft);\n  padding-top: 120px;\n}\n\n/* === GUEST VIEW === */\n.mb-profile__guest {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 60vh;\n  padding: 40px 20px;\n}\n\n.mb-profile__guest-content {\n  text-align: center;\n  max-width: 400px;\n}\n\n.mb-profile__guest-content ion-icon {\n  font-size: 80px;\n  color: var(--user-accent);\n  margin-bottom: 20px;\n}\n\n.mb-profile__guest-content h1 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 10px;\n}\n\n.mb-profile__guest-content p {\n  color: #6b6b8a;\n  margin-bottom: 25px;\n  line-height: 1.6;\n}\n\n.mb-profile__guest-btn {\n  display: inline-block;\n  padding: 14px 35px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  border-radius: 30px;\n  text-decoration: none;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__guest-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(184, 155, 94, 0.4);\n}\n\n/* === PROFILE WRAPPER === */\n.mb-profile__wrap {\n  max-width: 1400px;\n  margin: 0 auto;\n  padding: 0 40px 60px;\n}\n\n/* === PROFILE HEADER === */\n.mb-profile__header {\n  background: #fff;\n  border-radius: 20px;\n  overflow: hidden;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);\n  margin-bottom: 30px;\n}\n\n/* === COVER IMAGE === */\n.mb-profile__cover {\n  height: 260px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 50%, #8fa67a 100%);\n  position: relative;\n  background-size: cover;\n  background-position: center;\n}\n\n.mb-profile__cover-edit {\n  position: absolute;\n  bottom: 15px;\n  right: 15px;\n  width: 40px;\n  height: 40px;\n  background: rgba(255, 255, 255, 0.9);\n  border: none;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__cover-edit:hover {\n  background: #fff;\n  transform: scale(1.1);\n}\n\n.mb-profile__cover-edit ion-icon {\n  font-size: 1.2rem;\n  color: #1a1a2e;\n}\n\n.mb-profile__info {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 25px;\n  padding: 25px 30px 30px;\n  align-items: flex-start;\n}\n\n.mb-profile__avatar-wrap {\n  position: relative;\n  margin-top: -70px;\n  flex-shrink: 0;\n  width: 140px;\n  height: 140px;\n}\n\n/* === FILE INPUTS === */\n#avatarInput,\n#coverInput {\n  display: none !important;\n  visibility: hidden !important;\n  position: absolute !important;\n  left: -9999px !important;\n}\n\n/* === AVATAR PICKER === */\n.mb-avatar-picker {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 20px;\n}\n\n.mb-avatar-picker[hidden] {\n  display: none !important;\n}\n\n.mb-avatar-picker__content {\n  background: #fff;\n  border-radius: 20px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  padding: 30px;\n  width: 100%;\n  max-width: 420px;\n  max-height: 90vh;\n  overflow-y: auto;\n}\n\n.mb-avatar-picker__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid #eee;\n}\n\n.mb-avatar-picker__header span {\n  font-weight: 600;\n  color: #333;\n  font-size: 1.25rem;\n}\n\n.mb-avatar-picker__close {\n  background: #f5f5f5;\n  border: none;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: #666;\n  line-height: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.mb-avatar-picker__close:hover {\n  background: #e0e0e0;\n  color: #333;\n}\n\n.mb-avatar-picker__presets {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.mb-avatar-preset {\n  width: 80px;\n  height: 80px;\n  padding: 0;\n  border: 4px solid transparent;\n  border-radius: 50%;\n  cursor: pointer;\n  background: none;\n  overflow: hidden;\n  transition: all 0.2s ease;\n}\n\n.mb-avatar-preset:hover {\n  border-color: var(--user-accent);\n  transform: scale(1.08);\n}\n\n.mb-avatar-preset.selected {\n  border-color: var(--user-accent);\n  box-shadow: 0 0 0 4px rgba(184, 155, 94, 0.3);\n}\n\n.mb-avatar-preset img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 50%;\n}\n\n.mb-avatar-picker__upload {\n  padding-top: 20px;\n  border-top: 1px solid #eee;\n}\n\n.mb-avatar-upload-btn {\n  width: 100%;\n  padding: 14px 20px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  transition: all 0.2s ease;\n}\n\n.mb-avatar-upload-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(184, 155, 94, 0.4);\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__content {\n  background: #2d2b3d;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__header {\n  border-color: #3d3a50;\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__header span {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__close {\n  background: #3d3a50;\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__close:hover {\n  background: #4d4a60;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-avatar-picker__upload {\n  border-color: #3d3a50;\n}\n\n/* === AVATAR === */\n.mb-profile__avatar {\n  width: 140px;\n  height: 140px;\n  border-radius: 50%;\n  border: 5px solid #fff;\n  object-fit: cover;\n  background: #f0f0f0;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n}\n\n.mb-profile__avatar-initials {\n  width: 140px;\n  height: 140px;\n  border-radius: 50%;\n  border: 5px solid #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2.5rem;\n  font-weight: 700;\n  color: #fff;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n[data-theme=\"dark\"] .mb-profile__avatar-initials {\n  border-color: #1a1a2e;\n}\n\n.mb-profile__avatar-edit {\n  position: absolute;\n  bottom: 5px;\n  right: 5px;\n  width: 36px;\n  height: 36px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  border: 3px solid #fff;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__avatar-edit:hover {\n  transform: scale(1.1);\n}\n\n.mb-profile__avatar-edit ion-icon {\n  font-size: 1rem;\n  color: #fff;\n}\n\n/* === PROFILE DETAILS === */\n.mb-profile__details {\n  padding-top: 10px;\n  flex: 1;\n  min-width: 200px;\n}\n\n.mb-profile__name {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #1a1a2e;\n  margin-bottom: 4px;\n}\n\n.mb-profile__email {\n  font-size: 0.875rem;\n  color: #6b6b8a;\n  margin-bottom: 10px;\n}\n\n.mb-profile__bio {\n  font-size: 0.95rem;\n  color: #4a4a68;\n  line-height: 1.5;\n  margin-bottom: 15px;\n  max-width: 400px;\n}\n\n/* === TABS === */\n.mb-profile__tabs {\n  display: flex;\n  gap: 10px;\n  background: #fff;\n  padding: 10px;\n  border-radius: 15px;\n  margin-bottom: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n}\n\n.mb-profile__tab {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 14px 20px;\n  background: transparent;\n  border: none;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: #6b6b8a;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__tab ion-icon {\n  font-size: 1.1rem;\n}\n\n.mb-profile__tab:hover {\n  background: var(--user-accent-soft);\n  color: #1a1a2e;\n}\n\n.mb-profile__tab.is-active {\n  background: var(--profile-accent, var(--user-accent));\n  color: #fff;\n}\n\n/* === TAB PANELS === */\n.mb-profile__panel {\n  display: none;\n  background: #fff;\n  border-radius: 15px;\n  padding: 25px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n}\n\n.mb-profile__panel.is-active {\n  display: block;\n}\n\n/* === LOADING STATE === */\n.mb-profile__loading {\n  text-align: center;\n  padding: 60px 20px;\n  color: #6b6b8a;\n}\n\n.mb-profile__spinner {\n  width: 40px;\n  height: 40px;\n  border: 3px solid var(--user-accent-light);\n  border-top-color: var(--profile-accent, var(--user-accent));\n  border-radius: 50%;\n  margin: 0 auto 15px;\n  animation: spin 1s linear infinite;\n}\n\n[data-theme=\"dark\"] .mb-profile__spinner {\n  border-color: #3a3a5a;\n  border-top-color: var(--profile-accent);\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n/* === EMPTY STATE === */\n.mb-profile__empty {\n  text-align: center;\n  padding: 60px 20px;\n  color: #6b6b8a;\n}\n\n.mb-profile__empty ion-icon {\n  font-size: 50px;\n  margin-bottom: 15px;\n  color: var(--user-accent-light);\n}\n\n.mb-profile__empty p {\n  margin-bottom: 15px;\n}\n\n.mb-profile__empty a {\n  color: var(--user-accent);\n  font-weight: 600;\n}\n\n/* === ACTIVITY FEED === */\n.mb-profile__activity {\n  max-height: 500px;\n  overflow-y: auto;\n  padding-right: 5px;\n}\n\n.mb-profile__activity::-webkit-scrollbar {\n  width: 5px;\n}\n\n.mb-profile__activity::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.mb-profile__activity::-webkit-scrollbar-thumb {\n  background: var(--user-accent-light);\n  border-radius: 10px;\n}\n\n[data-theme=\"dark\"] .mb-profile__activity::-webkit-scrollbar-thumb {\n  background: #3d3a50;\n}\n\n.mb-activity-item {\n  display: flex;\n  gap: 15px;\n  padding: 20px 0;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.mb-activity-item:last-child {\n  border-bottom: none;\n}\n\n.mb-activity-item__icon {\n  width: 45px;\n  height: 45px;\n  background: linear-gradient(135deg, var(--user-accent-soft) 0%, #fff 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.mb-activity-item__icon ion-icon {\n  font-size: 1.2rem;\n  color: var(--user-accent);\n}\n\n.mb-activity-item__content {\n  flex: 1;\n}\n\n.mb-activity-item__text {\n  font-size: 0.95rem;\n  color: #1a1a2e;\n  margin-bottom: 5px;\n}\n\n.mb-activity-item__text strong {\n  font-weight: 600;\n}\n\n.mb-activity-item__time {\n  font-size: 0.8rem;\n  color: #6b6b8a;\n}\n\n/* === LIKED POSTS === */\n#likedPosts {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  gap: 20px;\n}\n\n.mb-liked-post {\n  background: #fff;\n  border-radius: 16px;\n  padding: 20px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);\n  cursor: pointer;\n  transition: all 0.25s ease;\n  border: 1px solid rgba(0, 0, 0, 0.04);\n}\n\n.mb-liked-post:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.mb-liked-post__header {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 14px;\n}\n\n.mb-liked-post__avatar {\n  width: 42px;\n  height: 42px;\n  flex-shrink: 0;\n}\n\n.mb-liked-post__avatar img {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid #f0ebe3;\n}\n\n.mb-liked-post__author-info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  min-width: 0;\n}\n\n.mb-liked-post__author-name {\n  font-weight: 600;\n  color: #1a1a2e;\n  font-size: 0.95rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.mb-liked-post__time {\n  font-size: 0.8rem;\n  color: #8a8a9a;\n}\n\n.mb-liked-post__content {\n  margin-bottom: 16px;\n}\n\n.mb-liked-post__content p {\n  color: #4a4a68;\n  font-size: 0.95rem;\n  line-height: 1.6;\n  margin: 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.mb-liked-post__footer {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-top: 14px;\n  border-top: 1px solid #f0ebe3;\n}\n\n.mb-liked-post__stats {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  color: #e74c3c;\n  font-weight: 500;\n  font-size: 0.9rem;\n}\n\n.mb-liked-post__stats ion-icon {\n  font-size: 1.1rem;\n}\n\n.mb-liked-post__view {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  color: var(--user-accent);\n  font-size: 0.85rem;\n  font-weight: 500;\n  transition: gap 0.2s ease;\n}\n\n.mb-liked-post:hover .mb-liked-post__view {\n  gap: 8px;\n}\n\n.mb-liked-post__view ion-icon {\n  font-size: 0.95rem;\n}\n\n[data-theme=\"dark\"] .mb-liked-post {\n  background: #2d2b3d;\n  border-color: rgba(255, 255, 255, 0.05);\n}\n\n[data-theme=\"dark\"] .mb-liked-post:hover {\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-liked-post__avatar img {\n  border-color: #3d3a50;\n}\n\n[data-theme=\"dark\"] .mb-liked-post__author-name {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-liked-post__time {\n  color: #9a9ab0;\n}\n\n[data-theme=\"dark\"] .mb-liked-post__content p {\n  color: #b8b8d0;\n}\n\n[data-theme=\"dark\"] .mb-liked-post__footer {\n  border-color: #3d3a50;\n}\n\n/* === RESPONSIVE === */\n@media (max-width: 768px) {\n  #likedPosts {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* === SETTINGS === */\n.mb-profile__settings-section {\n  margin-bottom: 28px;\n  padding: 20px 24px;\n  background: #faf9f6;\n  border-radius: 14px;\n  border: 1px solid rgba(0,0,0,0.05);\n}\n\n.mb-profile__settings-section h3 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 16px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #ece8e0;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-section {\n  background: #2d2b3d;\n  border-color: rgba(255,255,255,0.08);\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-section h3 {\n  color: #e0e0e8;\n  border-bottom-color: #3d3a50;\n}\n\n.mb-profile__settings-item {\n  margin-bottom: 16px;\n}\n\n.mb-profile__settings-item label {\n  display: block;\n  font-size: 0.85rem;\n  font-weight: 500;\n  color: #4a4a68;\n  margin-bottom: 6px;\n}\n\n.mb-profile__settings-item input,\n.mb-profile__settings-item textarea {\n  width: 100%;\n  padding: 11px 14px;\n  border: 1.5px solid #e0dcd4;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  transition: border-color 0.2s ease;\n  background: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-item input,\n[data-theme=\"dark\"] .mb-profile__settings-item textarea {\n  background: #1e1c2e;\n  border-color: #3d3a50;\n  color: #e0e0e8;\n}\n\n.mb-profile__settings-item input:focus,\n.mb-profile__settings-item textarea:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.mb-profile__settings-toggle {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 0;\n  border-bottom: 1px solid #f0ece4;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-toggle {\n  border-bottom-color: #3d3a50;\n}\n\n.mb-profile__settings-toggle span {\n  font-size: 0.88rem;\n  color: #4a4a68;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-toggle span {\n  color: #b0b0c8;\n}\n\n.mb-profile__save-btn {\n  padding: 11px 28px;\n  background: var(--user-accent);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: opacity 0.2s ease, transform 0.15s ease;\n}\n\n.mb-profile__save-btn:hover {\n  opacity: 0.88;\n  transform: translateY(-1px);\n}\n\n.mb-profile__danger-zone {\n  margin-top: 12px;\n  padding: 20px 24px;\n  background: #fef7f7;\n  border-radius: 14px;\n  border: 1px solid rgba(220, 53, 69, 0.12);\n}\n\n[data-theme=\"dark\"] .mb-profile__danger-zone {\n  background: #2d2030;\n  border-color: rgba(220, 53, 69, 0.2);\n}\n\n.mb-profile__logout-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 22px;\n  background: #fff;\n  border: 1.5px solid #dc3545;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  color: #dc3545;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 0.9rem;\n}\n\n[data-theme=\"dark\"] .mb-profile__logout-btn {\n  background: transparent;\n}\n\n.mb-profile__logout-btn:hover {\n  background: #dc3545;\n  color: #fff;\n}\n\n/* === MODAL === */\n.mb-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 9999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n}\n\n.mb-modal[hidden] {\n  display: none;\n}\n\n.mb-modal__overlay {\n  position: absolute;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.5);\n}\n\n.mb-modal__content {\n  position: relative;\n  background: #fff;\n  border-radius: 20px;\n  padding: 30px;\n  max-width: 450px;\n  width: 100%;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\n}\n\n.mb-modal__close {\n  position: absolute;\n  top: 15px;\n  right: 15px;\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: #6b6b8a;\n  cursor: pointer;\n}\n\n.mb-modal__content h2 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin-bottom: 25px;\n}\n\n.mb-modal__field {\n  margin-bottom: 20px;\n}\n\n.mb-modal__field label {\n  display: block;\n  font-size: 0.875rem;\n  font-weight: 500;\n  margin-bottom: 8px;\n}\n\n.mb-modal__field input,\n.mb-modal__field textarea {\n  width: 100%;\n  padding: 12px 15px;\n  border: 2px solid var(--user-accent-light);\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n}\n\n.mb-modal__field input:focus,\n.mb-modal__field textarea:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.mb-modal__actions {\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n  margin-top: 25px;\n}\n\n.mb-modal__btn {\n  padding: 10px 25px;\n  border-radius: 20px;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.mb-modal__btn--cancel {\n  background: #f0f0f0;\n  border: none;\n  color: #6b6b8a;\n}\n\n.mb-modal__btn--save {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  border: none;\n  color: #fff;\n}\n\n.mb-modal__btn--save:hover {\n  transform: translateY(-2px);\n}\n\n/* === DARK MODE === */\n[data-theme=\"dark\"] .mb-profile {\n  background: #0f0f1a;\n}\n\n[data-theme=\"dark\"] .mb-profile__guest-content ion-icon {\n  color: var(--profile-accent);\n}\n\n[data-theme=\"dark\"] .mb-profile__guest-content h1,\n[data-theme=\"dark\"] .mb-profile__name {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__guest-content p,\n[data-theme=\"dark\"] .mb-profile__bio {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .mb-profile__header,\n[data-theme=\"dark\"] .mb-profile__tabs,\n[data-theme=\"dark\"] .mb-profile__panel {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .mb-profile__avatar {\n  border-color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .mb-profile__email,\n[data-theme=\"dark\"] .mb-profile__stat-label {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n[data-theme=\"dark\"] .mb-profile__stat-num {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__tab {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n[data-theme=\"dark\"] .mb-profile__tab:hover {\n  background: #252542;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-section h3 {\n  color: #fff;\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-item label,\n[data-theme=\"dark\"] .mb-profile__settings-toggle span {\n  color: rgba(255, 255, 255, 0.8);\n}\n\n[data-theme=\"dark\"] .mb-profile__settings-item input,\n[data-theme=\"dark\"] .mb-profile__settings-item textarea {\n  background: #252542;\n  border-color: #3a3a5a;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-activity-item {\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .mb-activity-item__text {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-modal__content {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .mb-modal__content h2,\n[data-theme=\"dark\"] .mb-modal__field label {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-modal__field input,\n[data-theme=\"dark\"] .mb-modal__field textarea {\n  background: #252542;\n  border-color: #3a3a5a;\n  color: #fff;\n}\n\n@media (max-width: 768px) {\n  .mb-profile__info {\n    grid-template-columns: 1fr;\n    text-align: center;\n    gap: 20px;\n  }\n  \n  .mb-profile__avatar-wrap {\n    margin: -50px auto 0;\n    width: 100px;\n    height: 100px;\n  }\n  \n  .mb-profile__avatar {\n    width: 100px;\n    height: 100px;\n  }\n\n  .mb-profile__avatar-initials {\n    width: 100px;\n    height: 100px;\n    font-size: 2rem;\n  }\n  \n  .mb-profile__bio {\n    max-width: none;\n  }\n  \n  .mb-profile__stats {\n    justify-content: center;\n    padding-top: 0;\n  }\n  \n  .mb-profile__tabs {\n    flex-wrap: wrap;\n  }\n  \n  .mb-profile__tab {\n    flex: 1 1 calc(33.33% - 10px);\n    font-size: 0.8rem;\n    padding: 12px 10px;\n  }\n  \n  .mb-profile__tab span:not(ion-icon) {\n    display: none;\n  }\n}\n\n.mb-profile__badges-row {\n  display: none;\n}\n\n.mb-profile__reputation,\n.mb-profile__streak {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 10px 16px;\n  background: linear-gradient(135deg, rgba(212, 165, 116, 0.18) 0%, rgba(212, 165, 116, 0.08) 100%);\n  border-radius: 12px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent);\n  flex: 1;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__reputation:hover,\n.mb-profile__streak:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(184, 155, 94, 0.2);\n}\n\n.mb-profile__reputation ion-icon,\n.mb-profile__streak ion-icon {\n  font-size: 1.1rem;\n}\n\n[data-theme=\"dark\"] .mb-profile__reputation,\n[data-theme=\"dark\"] .mb-profile__streak {\n  background: linear-gradient(135deg, rgba(212, 165, 116, 0.25) 0%, rgba(212, 165, 116, 0.1) 100%);\n}\n\n.mb-profile__activity-filters {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid #e0dcd4;\n}\n\n.mb-profile__filter {\n  padding: 8px 18px;\n  background: #fff;\n  border: 1px solid #e0dcd4;\n  border-radius: 20px;\n  font-size: 0.85rem;\n  font-weight: 500;\n  color: #6b6b8a;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.mb-profile__filter:hover {\n  border-color: var(--user-accent);\n  color: var(--user-accent);\n}\n\n.mb-profile__filter.is-active {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  border-color: transparent;\n  color: #fff;\n}\n\n.mb-profile__liked {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n.mb-profile__liked-post {\n  padding: 20px;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n}\n\n.mb-profile__liked-post .post-author {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 10px;\n  font-size: 0.9rem;\n  color: #6b6b8a;\n}\n\n.mb-profile__liked-post .post-content {\n  color: #1a1a2e;\n  line-height: 1.6;\n  margin-bottom: 10px;\n}\n\n.mb-profile__liked-post .post-meta {\n  font-size: 0.8rem;\n  color: #9a9ab5;\n}\n\n.mb-profile__saved-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n}\n\n.mb-profile__saved-card {\n  background: #fff;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.mb-profile__saved-card:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 20px rgba(0,0,0,0.1);\n}\n\n.mb-profile__saved-card img {\n  width: 100%;\n  height: 150px;\n  object-fit: cover;\n}\n\n.mb-profile__saved-card .card-body {\n  padding: 15px;\n}\n\n.mb-profile__saved-card h4 {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 8px;\n}\n\n.mb-profile__saved-card .saved-date {\n  font-size: 0.8rem;\n  color: #9a9ab5;\n}\n\n.mb-profile__achievements-header {\n  margin-bottom: 25px;\n}\n\n.mb-profile__achievement-stats {\n  display: flex;\n  gap: 25px;\n  justify-content: center;\n}\n\n.mb-profile__achievement-stats span {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: 600;\n  color: var(--user-accent);\n}\n\n.mb-profile__achievements-grid {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 16px;\n}\n\n.mb-profile__badge {\n  padding: 20px 15px;\n  background: #f8f9fc;\n  border-radius: 12px;\n  text-align: center;\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;\n  position: relative;\n  min-height: 160px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.mb-profile__badge:hover {\n  transform: translateY(-2px);\n}\n\n.mb-profile__badge .badge-lock-icon {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  font-size: 0.9rem;\n  color: #9a9ab5;\n  opacity: 0.7;\n}\n\n.mb-profile__badge.unlocked {\n  background: linear-gradient(135deg, #fffdf5 0%, #fff9e6 100%);\n  border: 2px solid rgba(184, 155, 94, 0.5);\n  box-shadow: 0 0 20px rgba(184, 155, 94, 0.25);\n}\n\n.mb-profile__badge.locked {\n  opacity: 0.85;\n}\n\n.mb-profile__badge-icon {\n  width: 55px;\n  height: 55px;\n  margin: 0 auto 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(100, 100, 140, 0.1);\n  border-radius: 50%;\n  font-size: 1.5rem;\n  color: #7a7a9a;\n}\n\n.mb-profile__badge-icon ion-icon {\n  font-size: 1.5rem;\n}\n\n.mb-profile__badge.unlocked .mb-profile__badge-icon {\n  background: linear-gradient(135deg, rgba(212, 165, 116, 0.3) 0%, rgba(184, 155, 94, 0.15) 100%);\n  color: var(--user-accent-grad-end);\n}\n\n.mb-profile__badge h4 {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 6px;\n}\n\n.mb-profile__badge p {\n  font-size: 0.7rem;\n  color: #6b6b8a;\n  line-height: 1.3;\n  flex-grow: 1;\n}\n\n.mb-profile__badge .badge-points {\n  margin-top: 10px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: #9a9ab5;\n}\n\n.mb-profile__badge.unlocked .badge-points {\n  color: var(--user-accent-grad-end);\n}\n\n.mb-profile__wellness {\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n}\n\n.mb-profile__wellness-section {\n  background: #fff;\n  border-radius: 16px;\n  padding: 25px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n}\n\n.mb-profile__wellness-section h3 {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid #e0dcd4;\n}\n\n.mb-profile__wellness-section h3 ion-icon {\n  color: var(--user-accent);\n}\n\n.mb-profile__mood-input {\n  text-align: center;\n  margin-bottom: 25px;\n}\n\n.mb-profile__mood-input p {\n  margin-bottom: 15px;\n  color: #6b6b8a;\n}\n\n.mb-profile__mood-selector {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-bottom: 20px;\n}\n\n.mb-profile__mood-btn {\n  width: 50px;\n  height: 50px;\n  border: 2px solid #e0dcd4;\n  border-radius: 50%;\n  background: #fff;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.mb-profile__mood-btn:hover,\n.mb-profile__mood-btn.is-selected {\n  border-color: var(--user-accent);\n  transform: scale(1.1);\n}\n\n.mb-profile__mood-btn.is-selected {\n  background: linear-gradient(135deg, rgba(212, 165, 116, 0.2) 0%, rgba(212, 165, 116, 0.05) 100%);\n}\n\n.mood-emoji {\n  font-size: 1.5rem;\n}\n\n.mb-profile__mood-note {\n  width: 100%;\n  max-width: 400px;\n  padding: 12px 16px;\n  border: 1px solid #e0dcd4;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  margin-bottom: 15px;\n}\n\n.mb-profile__mood-note:focus {\n  outline: none;\n  border-color: var(--user-accent);\n}\n\n.mb-profile__mood-log-btn {\n  padding: 12px 30px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  color: #fff;\n  border: none;\n  border-radius: 25px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: opacity 0.2s ease;\n}\n\n.mb-profile__mood-log-btn:hover {\n  opacity: 0.9;\n}\n\n.mb-profile__mood-history h4 {\n  font-size: 0.95rem;\n  color: #6b6b8a;\n  margin-bottom: 15px;\n}\n\n.mb-profile__mood-chart {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 16px;\n  padding: 20px;\n  background: var(--user-accent-soft);\n  border-radius: 12px;\n  min-height: auto;\n}\n\n.mb-profile__mood-chart .mood-bar-old {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-profile__mood-chart .mood-bar-old .bar {\n  width: 100%;\n  max-width: 30px;\n  background: linear-gradient(to top, var(--user-accent), var(--user-accent-light));\n  border-radius: 4px 4px 0 0;\n  transition: height 0.3s ease;\n}\n\n.mb-profile__mood-chart .mood-bar-old .date {\n  font-size: 0.7rem;\n  color: #9a9ab5;\n}\n\n.mb-profile__goals-add {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n  flex-wrap: wrap;\n}\n\n.mb-profile__goal-input-row {\n  display: flex;\n  gap: 10px;\n  align-items: stretch;\n  flex-wrap: wrap;\n}\n\n.mb-profile__goal-input {\n  flex: 1;\n  min-width: 200px;\n  padding: 12px 16px;\n  border: 1px solid #e0dcd4;\n  border-radius: 10px;\n  font-size: 0.9rem;\n  background: #faf9f6;\n  transition: border-color 0.2s ease;\n}\n\n.mb-profile__goal-input:focus {\n  border-color: var(--user-accent);\n  outline: none;\n}\n\n.mb-profile__goal-select {\n  padding: 12px 16px;\n  border: 1px solid #e0dcd4;\n  border-radius: 10px;\n  font-size: 0.9rem;\n  background: #faf9f6;\n  min-width: 140px;\n  cursor: pointer;\n  transition: border-color 0.2s ease;\n}\n\n.mb-profile__goal-select:focus {\n  border-color: var(--user-accent);\n  outline: none;\n}\n\n.mb-profile__goal-add-btn {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  padding: 12px 22px;\n  background: var(--user-accent);\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: opacity 0.2s ease, transform 0.15s ease;\n  white-space: nowrap;\n}\n\n.mb-profile__goal-add-btn:hover {\n  opacity: 0.88;\n  transform: translateY(-1px);\n}\n\n.mb-profile__goals-list {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  margin-top: 8px;\n}\n\n.mb-profile__goal-item {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  padding: 14px 18px;\n  background: var(--user-accent-soft);\n  border-radius: 12px;\n  border: 1px solid rgba(0,0,0,0.05);\n  border-left: 4px solid var(--user-accent);\n  transition: box-shadow 0.2s ease;\n}\n\n.mb-profile__goal-item:hover {\n  box-shadow: 0 2px 8px rgba(0,0,0,0.06);\n}\n\n.mb-profile__goal-item[data-category=\"mindfulness\"] { border-left-color: #8b5cf6; }\n.mb-profile__goal-item[data-category=\"exercise\"] { border-left-color: #10b981; }\n.mb-profile__goal-item[data-category=\"social\"] { border-left-color: #f59e0b; }\n.mb-profile__goal-item[data-category=\"sleep\"] { border-left-color: #3B8DD4; }\n.mb-profile__goal-item[data-category=\"nutrition\"] { border-left-color: #ef4444; }\n.mb-profile__goal-item[data-category=\"self-care\"] { border-left-color: #ec4899; }\n\n.mb-profile__goal-item .goal-check {\n  width: 26px;\n  height: 26px;\n  border: 2.5px solid var(--user-accent);\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  transition: all 0.2s ease;\n}\n\n.mb-profile__goal-item .goal-check:hover {\n  background: rgba(91, 164, 230, 0.1);\n}\n\n.mb-profile__goal-item .goal-check.completed {\n  background: var(--user-accent);\n  color: #fff;\n  border-color: var(--user-accent);\n}\n\n.mb-profile__goal-item .goal-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.mb-profile__goal-item .goal-title {\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 4px;\n  font-size: 0.95rem;\n}\n\n.mb-profile__goal-item .goal-category {\n  font-size: 0.78rem;\n  color: #9a9ab5;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-weight: 500;\n  text-transform: capitalize;\n}\n\n.mb-profile__goal-item .goal-delete {\n  color: #c0c0d0;\n  cursor: pointer;\n  transition: color 0.2s ease;\n  padding: 4px;\n  border-radius: 6px;\n}\n\n.mb-profile__goal-item .goal-delete:hover {\n  color: #ef4444;\n  background: rgba(239, 68, 68, 0.08);\n}\n\n.mb-profile__goals-empty {\n  text-align: center;\n  padding: 30px 20px;\n  color: #9a9ab5;\n  font-size: 0.9rem;\n}\n\n.mb-profile__streak-display {\n  display: flex;\n  gap: 16px;\n  justify-content: center;\n  margin-bottom: 28px;\n}\n\n.mb-profile__streak-current,\n.mb-profile__streak-best {\n  text-align: center;\n  padding: 22px 36px;\n  background: var(--user-accent-soft);\n  border-radius: 16px;\n  border: 1px solid rgba(0,0,0,0.06);\n  flex: 1;\n  max-width: 200px;\n  position: relative;\n  overflow: hidden;\n}\n\n.mb-profile__streak-current::before,\n.mb-profile__streak-best::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  background: linear-gradient(90deg, var(--user-accent), var(--user-accent-light, var(--user-accent)));\n  border-radius: 16px 16px 0 0;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-current,\n[data-theme=\"dark\"] .mb-profile__streak-best {\n  background: #2d2b3d;\n  border-color: rgba(255,255,255,0.08);\n}\n\n.streak-number {\n  display: block;\n  font-size: 2.8rem;\n  font-weight: 700;\n  color: var(--user-accent);\n  line-height: 1;\n  margin-bottom: 4px;\n}\n\n.streak-label {\n  font-size: 0.8rem;\n  color: #6b6b8a;\n  margin-top: 6px;\n  font-weight: 500;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n[data-theme=\"dark\"] .streak-label {\n  color: #9a9ab5;\n}\n\n.mb-profile__streak-calendar {\n  display: block;\n  background: #faf9f6;\n  border-radius: 14px;\n  padding: 18px;\n  border: 1px solid rgba(0,0,0,0.06);\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-calendar {\n  background: #2d2b3d;\n  border-color: rgba(255,255,255,0.08);\n}\n\n.streak-calendar-header {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 6px;\n  margin-bottom: 8px;\n}\n\n.streak-day-label {\n  text-align: center;\n  font-size: 0.7rem;\n  font-weight: 600;\n  color: #888;\n  font-family: 'Poppins', sans-serif;\n  text-transform: uppercase;\n  letter-spacing: 0.3px;\n}\n\n.streak-calendar-grid {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 6px;\n}\n\n[data-theme=\"dark\"] .streak-day-label {\n  color: #777;\n}\n\n.streak-day {\n  aspect-ratio: 1;\n  border-radius: 8px;\n  background: #eae6de;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.8rem;\n  font-weight: 500;\n  color: #9a9ab5;\n  min-width: 32px;\n  min-height: 32px;\n  transition: transform 0.15s ease, box-shadow 0.15s ease;\n}\n\n.streak-day.active {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light, var(--user-accent)) 100%);\n  color: #fff;\n  font-weight: 600;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.12);\n}\n\n.streak-day.today {\n  box-shadow: 0 0 0 2.5px var(--user-accent);\n  font-weight: 700;\n}\n\n.streak-day.today.active {\n  box-shadow: 0 0 0 2.5px #fff, 0 0 0 4.5px var(--user-accent);\n}\n\n[data-theme=\"dark\"] .streak-day {\n  background: #3d3a50;\n  color: #9a9ab5;\n}\n\n[data-theme=\"dark\"] .streak-day.today {\n  box-shadow: 0 0 0 2.5px var(--user-accent-light, var(--user-accent));\n}\n\n[data-theme=\"dark\"] .streak-day.today.active {\n  box-shadow: 0 0 0 2.5px #2d2b3d, 0 0 0 4.5px var(--user-accent-light, var(--user-accent));\n}\n\n.streak-milestone-badges {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin-top: 20px;\n}\n\n.streak-milestone-badge {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 14px;\n  border-radius: 20px;\n  font-size: 0.78rem;\n  font-weight: 600;\n  background: #f0ece4;\n  color: #6b6b8a;\n  border: 1px solid rgba(0,0,0,0.06);\n}\n\n.streak-milestone-badge.earned {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light, var(--user-accent)) 100%);\n  color: #fff;\n  border-color: transparent;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n}\n\n[data-theme=\"dark\"] .streak-milestone-badge {\n  background: #3d3a50;\n  color: #9a9ab5;\n  border-color: rgba(255,255,255,0.08);\n}\n\n[data-theme=\"dark\"] .streak-milestone-badge.earned {\n  border-color: transparent;\n}\n\n.mb-profile__settings-section h3 {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-profile__settings-section h3 ion-icon {\n  color: var(--user-accent);\n}\n\n.mb-profile__settings-item label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-profile__settings-item label ion-icon {\n  color: #9a9ab5;\n}\n\n.mb-profile__settings-toggle .toggle-info {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.mb-profile__settings-toggle .toggle-info small {\n  font-size: 0.75rem;\n  color: #9a9ab5;\n}\n\n.mb-profile__theme-picker {\n  margin-bottom: 20px;\n}\n\n.mb-profile__theme-picker label {\n  display: block;\n  margin-bottom: 12px;\n  font-weight: 500;\n  color: #1a1a2e;\n}\n\n.mb-profile__color-options {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.mb-profile__color-btn {\n  width: 40px;\n  height: 40px;\n  border: 3px solid transparent;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: transform 0.2s ease, border-color 0.2s ease;\n}\n\n.mb-profile__color-btn:hover {\n  transform: scale(1.1);\n}\n\n.mb-profile__color-btn.is-active {\n  border-color: #1a1a2e;\n  box-shadow: 0 0 0 3px rgba(26, 26, 46, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-profile__wellness-section,\n[data-theme=\"dark\"] .mb-profile__saved-card {\n  background: #2d2b3d;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge {\n  background: #252540;\n  border: 1px solid rgba(255, 255, 255, 0.08);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge.unlocked {\n  background: linear-gradient(135deg, #2d2b45 0%, #252540 100%);\n  border: 2px solid rgba(212, 165, 116, 0.6);\n  box-shadow: 0 0 25px rgba(212, 165, 116, 0.25);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge h4 {\n  color: #e8e8f0;\n}\n\n[data-theme=\"dark\"] .mb-profile__badge.unlocked h4 {\n  color: #f5e8d8;\n}\n\n[data-theme=\"dark\"] .mb-profile__badge p {\n  color: rgba(255, 255, 255, 0.5);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge .badge-lock-icon {\n  color: rgba(255, 255, 255, 0.35);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge-icon {\n  background: rgba(100, 100, 140, 0.2);\n  color: #7a7a9a;\n}\n\n[data-theme=\"dark\"] .mb-profile__badge.unlocked .mb-profile__badge-icon {\n  background: linear-gradient(135deg, rgba(212, 165, 116, 0.35) 0%, rgba(184, 155, 94, 0.2) 100%);\n  color: var(--user-accent-grad-end);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge .badge-points {\n  color: rgba(255, 255, 255, 0.4);\n}\n\n[data-theme=\"dark\"] .mb-profile__badge.unlocked .badge-points {\n  color: var(--user-accent-grad-end);\n}\n\n[data-theme=\"dark\"] .mb-profile__filter {\n  background: #2d2b3d;\n  border-color: #3d3a50;\n  color: #b0b0c8;\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item,\n[data-theme=\"dark\"] .mb-profile__mood-chart {\n  background: #2d2b3d;\n  border-color: rgba(255,255,255,0.08);\n}\n\n[data-theme=\"dark\"] .mb-profile__goal-item .goal-title {\n  color: #e0e0e8;\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-current,\n[data-theme=\"dark\"] .mb-profile__streak-best {\n  border-color: #3d3a50;\n}\n\n[data-theme=\"dark\"] .streak-number {\n  color: var(--user-accent-light);\n}\n\n[data-theme=\"dark\"] .mb-profile__streak-label {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n[data-theme=\"dark\"] .mb-profile__wellness-section h3 {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__empty-state {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n[data-theme=\"dark\"] .mb-profile__empty-state ion-icon {\n  color: rgba(255, 255, 255, 0.4);\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-note,\n[data-theme=\"dark\"] .mb-profile__goal-input,\n[data-theme=\"dark\"] .mb-profile__goal-select {\n  background: #2d2b3d;\n  border-color: #3d3a50;\n  color: #e0e0e8;\n}\n\n@media (max-width: 992px) {\n  .mb-profile__achievements-grid {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n\n@media (max-width: 768px) {\n  .mb-profile__badges-row {\n    flex-direction: column;\n    align-items: center;\n  }\n  \n  .mb-profile__achievements-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  \n  .mb-profile__streak-display {\n    flex-direction: column;\n    gap: 15px;\n  }\n  \n  .mb-profile__goals-add {\n    flex-direction: column;\n  }\n  \n  .mb-profile__mood-selector {\n    gap: 10px;\n  }\n  \n  .mb-profile__mood-btn {\n    width: 42px;\n    height: 42px;\n  }\n}\n\n.mb-profile__saved-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 25px;\n}\n\n.mb-profile__saved-card {\n  background: #fff;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.mb-profile__saved-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);\n}\n\n.saved-card-link {\n  display: block;\n  text-decoration: none;\n  color: inherit;\n}\n\n.saved-card-link img {\n  width: 100%;\n  height: 160px;\n  object-fit: cover;\n}\n\n.saved-card-link .card-body {\n  padding: 20px;\n}\n\n.saved-category {\n  display: inline-block;\n  padding: 4px 12px;\n  background: rgba(184, 155, 94, 0.1);\n  color: var(--user-accent);\n  font-size: 0.75rem;\n  font-weight: 600;\n  border-radius: 20px;\n  margin-bottom: 10px;\n}\n\n.saved-card-link h4 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.05rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 10px;\n  line-height: 1.4;\n}\n\n.saved-date {\n  font-size: 0.8rem;\n  color: #8888a0;\n}\n\n[data-theme=\"dark\"] .mb-profile__saved-card {\n  background: #2a2a4a;\n}\n\n[data-theme=\"dark\"] .saved-card-link h4 {\n  color: #f0f0f5;\n}\n\n[data-theme=\"dark\"] .saved-category {\n  background: rgba(184, 155, 94, 0.2);\n}\n\n@media (max-width: 768px) {\n  .mb-profile__saved-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n.mb-profile__social-links {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 18px;\n}\n\n.social-link {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 42px;\n  height: 42px;\n  border-radius: 12px;\n  background: color-mix(in srgb, var(--profile-accent, var(--user-accent)) 15%, transparent);\n  color: var(--profile-accent, var(--user-accent));\n  transition: all 0.3s ease;\n  text-decoration: none;\n}\n\n.social-link:hover {\n  background: var(--profile-accent, var(--user-accent));\n  color: #fff;\n  transform: translateY(-3px);\n  box-shadow: 0 6px 20px color-mix(in srgb, var(--profile-accent, var(--user-accent)) 35%, transparent);\n}\n\n.mb-profile__social-links:empty,\n.mb-profile__social-links:not(:has(a:not([hidden]))) {\n  display: none;\n}\n\n.social-link ion-icon {\n  font-size: 1.3rem;\n}\n\n.social-link::after {\n  content: attr(data-tooltip);\n  position: absolute;\n  bottom: calc(100% + 8px);\n  left: 50%;\n  transform: translateX(-50%) translateY(5px);\n  padding: 6px 12px;\n  background: #1a1a2e;\n  color: #fff;\n  font-size: 0.75rem;\n  font-weight: 500;\n  border-radius: 6px;\n  white-space: nowrap;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.2s ease;\n  pointer-events: none;\n}\n\n.social-link:hover::after {\n  opacity: 1;\n  visibility: visible;\n  transform: translateX(-50%) translateY(0);\n}\n\n[data-theme=\"dark\"] .social-link {\n  background: rgba(184, 155, 94, 0.2);\n}\n\n[data-theme=\"dark\"] .social-link::after {\n  background: #f0f0f5;\n  color: #1a1a2e;\n}\n\n.mb-profile__right-section {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  gap: 20px;\n  margin-left: auto;\n  flex-shrink: 0;\n  min-width: 320px;\n}\n\n.mb-profile__stats-card {\n  background: linear-gradient(135deg, #fff 0%, #faf8f5 100%);\n  border-radius: 16px;\n  padding: 20px 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n  border: 1px solid rgba(0, 0, 0, 0.04);\n}\n\n[data-theme=\"dark\"] .mb-profile__stats-card {\n  background: linear-gradient(135deg, #2a2a4a 0%, #252545 100%);\n  border-color: rgba(255, 255, 255, 0.06);\n}\n\n.mb-profile__stats {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin-bottom: 16px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n}\n\n[data-theme=\"dark\"] .mb-profile__stats {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n\n.mb-profile__stat {\n  text-align: center;\n  padding: 10px 12px;\n  border-radius: 12px;\n  background: rgba(0, 0, 0, 0.02);\n  transition: all 0.3s ease;\n  cursor: default;\n  min-width: 50px;\n}\n\n.mb-profile__stat:hover {\n  background: rgba(184, 155, 94, 0.1);\n  transform: translateY(-2px);\n}\n\n[data-theme=\"dark\"] .mb-profile__stat {\n  background: rgba(255, 255, 255, 0.04);\n}\n\n[data-theme=\"dark\"] .mb-profile__stat:hover {\n  background: color-mix(in srgb, var(--profile-accent, var(--user-accent)) 15%, transparent);\n}\n\n.mb-profile__stat-num {\n  display: block;\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.35rem;\n  font-weight: 700;\n  color: var(--profile-accent, #1a1a2e);\n  line-height: 1.2;\n}\n\n.mb-profile__stat.is-clickable {\n  cursor: pointer;\n}\n\n.mb-profile__stat.is-clickable:hover .mb-profile__stat-num {\n  text-decoration: underline;\n}\n\n[data-theme=\"dark\"] .mb-profile__stat-num {\n  color: #fff;\n}\n\n.mb-profile__stat-label {\n  font-size: 0.7rem;\n  color: #6b6b8a;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  font-weight: 500;\n}\n\n.mb-profile__stats-badges {\n  display: flex;\n  gap: 10px;\n  justify-content: center;\n}\n\n.mb-profile__quick-actions {\n  display: flex;\n  flex-direction: row;\n  gap: 10px;\n  flex-wrap: wrap;\n  align-items: center;\n}\n\n.mb-profile__edit-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  background: var(--profile-accent, var(--user-accent));\n  color: #fff;\n  border: none;\n  border-radius: 25px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px color-mix(in srgb, var(--profile-accent, var(--user-accent)) 30%, transparent);\n}\n\n.mb-profile__edit-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px color-mix(in srgb, var(--profile-accent, var(--user-accent)) 40%, transparent);\n}\n\n.mb-profile__edit-btn ion-icon {\n  font-size: 1.1rem;\n}\n\n.mb-profile__action-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 11px 20px;\n  background: transparent;\n  color: #4a4a68;\n  border: 2px solid #e0dcd4;\n  border-radius: 25px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__action-btn:hover {\n  border-color: var(--user-accent);\n  color: var(--user-accent);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(184, 155, 94, 0.15);\n}\n\n.mb-profile__action-btn ion-icon {\n  font-size: 1rem;\n}\n\n.mb-profile__follow-container {\n  display: inline-flex;\n}\n\n.mb-profile__follow-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 12px 24px;\n  background: linear-gradient(135deg, #4a7c59 0%, #6ba17a 100%);\n  color: #fff;\n  border: none;\n  border-radius: 25px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(74, 124, 89, 0.3);\n}\n\n.mb-profile__follow-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(74, 124, 89, 0.4);\n}\n\n.mb-profile__follow-btn:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.mb-profile__follow-btn.is-following {\n  background: linear-gradient(135deg, var(--user-accent-light) 0%, var(--user-accent-soft) 100%);\n  color: #4a4a68;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.mb-profile__follow-btn.is-following:hover {\n  background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);\n  color: #fff;\n  box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);\n}\n\n.mb-profile__follow-btn ion-icon {\n  font-size: 1.1rem;\n}\n\n[data-theme=\"dark\"] .mb-profile__follow-btn.is-following {\n  background: linear-gradient(135deg, #3d3a50 0%, #4a4868 100%);\n  color: #e0e0ea;\n}\n\n[data-theme=\"dark\"] .mb-profile__follow-btn.is-following:hover {\n  background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);\n  color: #fff;\n}\n\n.mb-profile__action-btn.is-copied {\n  background: #10b981;\n  border-color: #10b981;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__action-btn {\n  border-color: #3a3a5a;\n  color: #b0b0c0;\n}\n\n[data-theme=\"dark\"] .mb-profile__action-btn:hover {\n  border-color: var(--user-accent-light);\n  color: var(--user-accent-light);\n}\n\n.mb-profile__completion {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  padding: 15px 20px;\n  background: linear-gradient(135deg, #faf8f5 0%, #f5f0ea 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(184, 155, 94, 0.2);\n  flex-shrink: 0;\n  min-width: 280px;\n}\n\n[data-theme=\"dark\"] .mb-profile__completion {\n  background: linear-gradient(135deg, #2a2a4a 0%, #252545 100%);\n  border-color: rgba(184, 155, 94, 0.3);\n}\n\n.completion-ring {\n  position: relative;\n  width: 60px;\n  height: 60px;\n  flex-shrink: 0;\n}\n\n.completion-ring svg {\n  transform: rotate(-90deg);\n  width: 100%;\n  height: 100%;\n}\n\n.completion-ring__bg {\n  fill: none;\n  stroke: #e0e0ea;\n  stroke-width: 6;\n}\n\n[data-theme=\"dark\"] .completion-ring__bg {\n  stroke: #3a3a5a;\n}\n\n.completion-ring__progress {\n  fill: none;\n  stroke: var(--user-accent);\n  stroke-width: 6;\n  stroke-linecap: round;\n  stroke-dasharray: 283;\n  stroke-dashoffset: 283;\n  transition: stroke-dashoffset 1s ease-out;\n}\n\n.completion-ring.is-complete .completion-ring__progress {\n  stroke: #4caf50;\n}\n\n.completion-ring__text {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  font-weight: 700;\n  color: var(--user-accent);\n}\n\n.completion-ring.is-complete .completion-ring__text {\n  color: #4caf50;\n}\n\n.completion-info {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.completion-title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .completion-title {\n  color: #f0f0f5;\n}\n\n.completion-label {\n  font-size: 0.8rem;\n  color: #6b6b8a;\n  line-height: 1.4;\n}\n\n[data-theme=\"dark\"] .completion-label {\n  color: #a0a0b8;\n}\n\n.completion-label.is-complete {\n  color: #4caf50;\n}\n\n.mb-profile__stat {\n  transition: all 0.3s ease;\n  padding: 10px;\n  border-radius: 12px;\n}\n\n.mb-profile__stat:hover {\n  background: rgba(184, 155, 94, 0.08);\n  transform: translateY(-3px);\n}\n\n.mb-profile__tab {\n  transition: all 0.3s ease;\n}\n\n.mb-profile__tab:hover:not(.is-active) {\n  background: rgba(184, 155, 94, 0.1);\n  transform: translateY(-2px);\n}\n\n.mb-profile__activity-item {\n  transition: all 0.3s ease;\n}\n\n.mb-profile__activity-item:hover {\n  transform: translateX(5px);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\n}\n\n.mb-profile__badge {\n  transition: all 0.3s ease;\n}\n\n.mb-profile__badge:hover:not(.locked) {\n  transform: translateY(-5px) scale(1.02);\n  box-shadow: 0 8px 25px rgba(184, 155, 94, 0.2);\n}\n\n.mb-profile__goal-item {\n  transition: all 0.3s ease;\n}\n\n.mb-profile__goal-item:hover {\n  transform: translateX(5px);\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\n}\n\n.mb-profile__filter {\n  transition: all 0.3s ease;\n}\n\n.mb-profile__filter:hover:not(.is-active) {\n  background: rgba(184, 155, 94, 0.15);\n  transform: scale(1.05);\n}\n\n.mb-profile__tab:focus-visible,\n.mb-profile__action-btn:focus-visible,\n.mb-profile__edit-btn:focus-visible,\n.mb-profile__filter:focus-visible {\n  outline: 2px solid var(--user-accent);\n  outline-offset: 2px;\n}\n\n@keyframes countUp {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.mb-profile__stat-num {\n  animation: countUp 0.5s ease-out;\n}\n\n@keyframes completePulse {\n  0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }\n  50% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }\n}\n\n.completion-ring.is-complete {\n  animation: completePulse 2s ease-in-out infinite;\n  border-radius: 50%;\n}\n\n.completion-ring.is-complete .completion-ring__progress {\n  stroke: #10b981;\n}\n\n.completion-ring.is-complete + .completion-label {\n  color: #10b981;\n}\n\n@media (max-width: 768px) {\n  .mb-profile__completion {\n    order: -1;\n    margin-bottom: 15px;\n  }\n  \n  .completion-ring {\n    width: 60px;\n    height: 60px;\n  }\n  \n  .completion-ring__text {\n    font-size: 0.85rem;\n  }\n  \n  .mb-profile__quick-actions {\n    justify-content: center;\n  }\n}\n\n.mb-profile__preview-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 9999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s ease;\n}\n\n.mb-profile__preview-modal.is-visible {\n  opacity: 1;\n  visibility: visible;\n}\n\n.preview-modal__backdrop {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n}\n\n.preview-modal__content {\n  position: relative;\n  background: #fff;\n  border-radius: 20px;\n  max-width: 400px;\n  width: 90%;\n  overflow: hidden;\n  transform: translateY(20px);\n  transition: transform 0.3s ease;\n}\n\n.mb-profile__preview-modal.is-visible .preview-modal__content {\n  transform: translateY(0);\n}\n\n.preview-modal__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #eee;\n}\n\n.preview-modal__header h3 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n}\n\n.preview-modal__close {\n  width: 36px;\n  height: 36px;\n  border: none;\n  background: #f0f0f5;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n}\n\n.preview-modal__close:hover {\n  background: #e0e0ea;\n}\n\n.preview-modal__close ion-icon {\n  font-size: 1.3rem;\n  color: #666;\n}\n\n.preview-modal__body {\n  padding: 20px;\n}\n\n.preview-card {\n  background: var(--user-accent-soft);\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n}\n\n.preview-cover {\n  height: 80px;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 50%, #8fa67a 100%);\n  background-size: cover;\n  background-position: center;\n}\n\n.preview-info {\n  padding: 15px;\n  text-align: center;\n  margin-top: -40px;\n}\n\n.preview-avatar {\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  border: 3px solid #fff;\n  object-fit: cover;\n  background: #f0f0f0;\n}\n\n.preview-info h4 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin: 10px 0 5px;\n}\n\n.preview-info p {\n  font-size: 0.85rem;\n  color: #6b6b8a;\n  margin-bottom: 12px;\n}\n\n.preview-stats {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  font-size: 0.8rem;\n  color: #8888a0;\n}\n\n.preview-note {\n  text-align: center;\n  font-size: 0.8rem;\n  color: #8888a0;\n  margin-top: 15px;\n}\n\n[data-theme=\"dark\"] .preview-modal__content {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .preview-modal__header {\n  border-color: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .preview-modal__header h3 {\n  color: #f0f0f5;\n}\n\n[data-theme=\"dark\"] .preview-modal__close {\n  background: #3a3a5a;\n}\n\n[data-theme=\"dark\"] .preview-card {\n  background: #2a2a4a;\n}\n\n[data-theme=\"dark\"] .preview-info h4 {\n  color: #f0f0f5;\n}\n\n@media (max-width: 900px) {\n  .mb-profile__info {\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n  }\n  \n  .mb-profile__details {\n    text-align: center;\n  }\n  \n  .mb-profile__right-section {\n    margin-left: 0;\n    align-items: center;\n    width: 100%;\n    min-width: unset;\n  }\n  \n  .mb-profile__stats-card {\n    width: 100%;\n  }\n  \n  .mb-profile__stats {\n    justify-content: center;\n  }\n  \n  .mb-profile__stat {\n    min-width: 45px;\n    padding: 8px 10px;\n  }\n  \n  .mb-profile__stat-num {\n    font-size: 1.15rem;\n  }\n  \n  .mb-profile__quick-actions {\n    justify-content: center;\n  }\n  \n  .mb-profile__edit-btn {\n    padding: 10px 20px;\n    font-size: 0.85rem;\n  }\n  \n  .mb-profile__action-btn {\n    padding: 9px 16px;\n    font-size: 0.8rem;\n  }\n  \n  .mb-profile__social-links {\n    justify-content: center;\n  }\n  \n  .social-link {\n    width: 38px;\n    height: 38px;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .mb-profile__stat,\n  .mb-profile__tab,\n  .mb-profile__activity-item,\n  .mb-profile__badge,\n  .mb-profile__goal-item,\n  .mb-profile__filter,\n  .mb-profile__action-btn,\n  .social-link,\n  .completion-ring__progress {\n    transition: none;\n  }\n  \n  .mb-profile__stat-num {\n    animation: none;\n  }\n  \n  .completion-ring.is-complete {\n    animation: none;\n  }\n  \n  .mb-profile__preview-modal,\n  .preview-modal__content {\n    transition: none;\n  }\n}\n\n.mb-follow-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 9999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.5);\n  padding: 20px;\n}\n\n.mb-follow-modal[hidden] {\n  display: none;\n}\n\n.mb-follow-modal__content {\n  background: #fff;\n  border-radius: 16px;\n  width: 100%;\n  max-width: 400px;\n  max-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .mb-follow-modal__content {\n  background: #2d2b3d;\n}\n\n.mb-follow-modal__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 18px 20px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-follow-modal__header {\n  border-color: rgba(255, 255, 255, 0.1);\n}\n\n.mb-follow-modal__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .mb-follow-modal__title {\n  color: #fff;\n}\n\n.mb-follow-modal__close {\n  width: 32px;\n  height: 32px;\n  border: none;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.mb-follow-modal__close:hover {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n[data-theme=\"dark\"] .mb-follow-modal__close {\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n}\n\n.mb-follow-modal__list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 10px 0;\n}\n\n.mb-follow-modal__empty {\n  text-align: center;\n  padding: 40px 20px;\n  color: #6b6b8a;\n}\n\n.mb-follow-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 20px;\n  transition: background 0.2s ease;\n}\n\n.mb-follow-item:hover {\n  background: rgba(0, 0, 0, 0.03);\n}\n\n[data-theme=\"dark\"] .mb-follow-item:hover {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n.mb-follow-item__avatar {\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  object-fit: cover;\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-light) 100%);\n  flex-shrink: 0;\n}\n\n.mb-follow-item__avatar--initials {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-weight: 700;\n  font-size: 0.95rem;\n  letter-spacing: 0.5px;\n}\n\n.mb-follow-item__info {\n  flex: 1;\n}\n\n.mb-follow-item__name {\n  font-weight: 600;\n  color: #1a1a2e;\n  text-decoration: none;\n  transition: color 0.2s ease;\n}\n\n.mb-follow-item__name:hover {\n  color: var(--profile-accent, var(--user-accent));\n}\n\n[data-theme=\"dark\"] .mb-follow-item__name {\n  color: #fff;\n}\n\n.mb-follow-item__bio {\n  font-size: 0.85rem;\n  color: #6b6b8a;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 200px;\n}\n\n.mb-profile__danger-zone h3 {\n  color: #dc3545;\n}\n\n.mb-profile__danger-zone .mb-profile__logout-btn {\n  margin-bottom: 10px;\n}\n\n.mb-profile__delete-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: #fff;\n  color: #dc3545;\n  border: 2px solid #dc3545;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  width: 100%;\n  justify-content: center;\n}\n\n.mb-profile__delete-btn:hover {\n  background: #dc3545;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-profile__delete-btn {\n  background: transparent;\n}\n\n.mb-delete-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.6);\n  padding: 20px;\n}\n\n.mb-delete-modal[hidden] {\n  display: none;\n}\n\n.mb-delete-modal__content {\n  background: #fff;\n  border-radius: 16px;\n  padding: 30px;\n  max-width: 400px;\n  text-align: center;\n}\n\n[data-theme=\"dark\"] .mb-delete-modal__content {\n  background: #2d2b3d;\n}\n\n.mb-delete-modal__icon {\n  font-size: 48px;\n  color: #dc3545;\n  margin-bottom: 15px;\n}\n\n.mb-delete-modal__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.3rem;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 10px;\n}\n\n[data-theme=\"dark\"] .mb-delete-modal__title {\n  color: #fff;\n}\n\n.mb-delete-modal__text {\n  color: #6b6b8a;\n  margin-bottom: 20px;\n  line-height: 1.6;\n}\n\n.mb-delete-modal__confirm {\n  width: 100%;\n  margin-bottom: 15px;\n}\n\n.mb-delete-modal__confirm input {\n  width: 100%;\n  padding: 12px 15px;\n  border: 2px solid #e0dcd4;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  text-align: center;\n}\n\n.mb-delete-modal__confirm input:focus {\n  outline: none;\n  border-color: #dc3545;\n}\n\n.mb-delete-modal__actions {\n  display: flex;\n  gap: 10px;\n}\n\n.mb-delete-modal__cancel {\n  flex: 1;\n  padding: 12px;\n  background: var(--user-accent-soft);\n  color: #4a4a68;\n  border: none;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.mb-delete-modal__cancel:hover {\n  background: var(--user-accent-light);\n}\n\n.mb-delete-modal__submit {\n  flex: 1;\n  padding: 12px;\n  background: #dc3545;\n  color: #fff;\n  border: none;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  opacity: 0.5;\n  pointer-events: none;\n}\n\n.mb-delete-modal__submit.is-enabled {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.mb-delete-modal__submit.is-enabled:hover {\n  background: #c82333;\n}\n\n.mb-profile__mood-insights {\n  margin-top: 32px;\n  padding-top: 24px;\n  border-top: 1px solid rgba(0, 0, 0, 0.08);\n}\n\n.mb-profile__mood-insights > h4 {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #2d2d2d;\n  margin-bottom: 20px;\n}\n\n.mb-profile__mood-insights > h4 ion-icon {\n  color: var(--profile-accent, var(--user-accent));\n}\n\n.mood-insights__grid {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 16px;\n  margin-bottom: 32px;\n}\n\n@media (max-width: 900px) {\n  .mood-insights__grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (max-width: 500px) {\n  .mood-insights__grid {\n    grid-template-columns: 1fr 1fr;\n    gap: 12px;\n  }\n}\n\n.mood-insight-card {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  padding: 16px;\n  background: #fff;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.mood-insight-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);\n}\n\n.mood-insight-card__icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.mood-insight-card__icon ion-icon {\n  font-size: 1.5rem;\n  color: #fff;\n}\n\n.mood-insight-card__icon--avg {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n}\n\n.mood-insight-card__icon--best {\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n}\n\n.mood-insight-card__icon--entries {\n  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);\n}\n\n.mood-insight-card__icon--streak {\n  background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);\n}\n\n.mood-insight-card__content {\n  display: flex;\n  flex-direction: column;\n}\n\n.mood-insight-card__value {\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #2d2d2d;\n  line-height: 1.2;\n}\n\n.mood-insight-card__label {\n  font-size: 0.8rem;\n  color: #777;\n  margin-top: 2px;\n}\n\n.mood-chart-container {\n  margin-bottom: 28px;\n}\n\n.mood-chart-container h5 {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #555;\n  margin-bottom: 16px;\n}\n\n.mood-line-chart {\n  display: flex;\n  background: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n}\n\n.mood-line-chart__y-axis {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  font-size: 1.2rem;\n  padding-right: 12px;\n  border-right: 1px solid var(--user-accent-light);\n  margin-right: 16px;\n}\n\n.mood-line-chart__graph {\n  flex: 1;\n  height: 120px;\n  position: relative;\n}\n\n.mood-line-chart__svg {\n  width: 100%;\n  height: 100%;\n}\n\n.mood-line-chart__area {\n  opacity: 0.8;\n}\n\n.mood-line-chart__line {\n  filter: drop-shadow(0 2px 4px rgba(212, 168, 83, 0.3));\n}\n\n.mood-line-chart__dots circle {\n  fill: var(--blue-crayola, #2068A8);\n  stroke: #fff;\n  stroke-width: 2;\n  cursor: pointer;\n  transition: r 0.2s ease;\n}\n\n.mood-line-chart__dots circle:hover {\n  r: 8;\n}\n\n.mood-line-chart__x-axis {\n  display: flex;\n  justify-content: space-between;\n  padding: 12px 20px 0 60px;\n  font-size: 0.75rem;\n  color: #888;\n}\n\n.mood-distribution h5 {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #555;\n  margin-bottom: 16px;\n}\n\n.mood-distribution__bars {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  background: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\n}\n\n.mood-distribution__bars .mood-bar {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 12px;\n  width: 100%;\n}\n\n.mood-bar__emoji {\n  font-size: 1.4rem;\n  width: 28px;\n  text-align: center;\n}\n\n.mood-bar__fill-container {\n  flex: 1;\n  min-width: 100px;\n  height: 20px;\n  background: #f0ebe3;\n  border-radius: 10px;\n  overflow: hidden;\n}\n\n.mood-bar__fill {\n  height: 100%;\n  width: 0%;\n  border-radius: 10px;\n  transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.mood-bar[data-mood=\"very_happy\"] .mood-bar__fill {\n  background: linear-gradient(90deg, #43e97b 0%, #38f9d7 100%);\n}\n\n.mood-bar[data-mood=\"happy\"] .mood-bar__fill {\n  background: linear-gradient(90deg, #a8e063 0%, #56ab2f 100%);\n}\n\n.mood-bar[data-mood=\"neutral\"] .mood-bar__fill {\n  background: linear-gradient(90deg, #ffd86f 0%, #fc6262 100%);\n}\n\n.mood-bar[data-mood=\"sad\"] .mood-bar__fill {\n  background: linear-gradient(90deg, #ff9a9e 0%, #fecfef 100%);\n}\n\n.mood-bar[data-mood=\"very_sad\"] .mood-bar__fill {\n  background: linear-gradient(90deg, #a8caba 0%, #5d4e87 100%);\n}\n\n.mood-bar__count {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #555;\n  min-width: 24px;\n  text-align: right;\n}\n\n[data-theme=\"dark\"] .mood-insight-card {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .mood-insight-card__value {\n  color: #bde0fe;\n}\n\n[data-theme=\"dark\"] .mood-insight-card__label {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .mood-line-chart {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .mood-line-chart__y-axis {\n  border-color: #4d4a60;\n}\n\n[data-theme=\"dark\"] .mood-distribution__bars {\n  background: #3d3a50;\n}\n\n[data-theme=\"dark\"] .mood-bar__fill-container {\n  background: #4d4a60;\n}\n\n[data-theme=\"dark\"] .mood-bar__count {\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .mood-chart-container h5,\n[data-theme=\"dark\"] .mood-distribution h5 {\n  color: #ccc;\n}\n\n[data-theme=\"dark\"] .mb-profile__mood-insights > h4 {\n  color: #bde0fe;\n}\n\n.mb-profile__analytics-section {\n  margin-bottom: 24px;\n}\n\n.mb-profile__section-title {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a2e;\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid #e8e8ed;\n}\n\n.mb-profile__section-title ion-icon {\n  font-size: 22px;\n  color: var(--user-accent-grad-end);\n}\n\n.mb-profile__community-section {\n  background: #fff;\n  border-radius: 16px;\n  padding: 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);\n}\n\n[data-theme=\"dark\"] .mb-profile__section-title {\n  color: #f1f1f1;\n  border-color: #3a3a50;\n}\n\n[data-theme=\"dark\"] .mb-profile__section-title ion-icon {\n  color: var(--user-accent-light, var(--user-accent));\n}\n\n[data-theme=\"dark\"] .mb-profile__community-section {\n  background: #242440;\n}\n\n.onboarding-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 12px;\n}\n\n.onboarding-modal[hidden] {\n  display: none;\n}\n\n.onboarding-modal__backdrop {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n}\n\n.onboarding-modal__content {\n  position: relative;\n  background: #fff;\n  border-radius: 16px;\n  max-width: 380px;\n  width: 100%;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);\n  animation: onboardingSlideIn 0.3s ease-out;\n}\n\n@keyframes onboardingSlideIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px) scale(0.97);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.onboarding-modal__header {\n  text-align: center;\n  padding: 20px 20px 15px;\n  background: linear-gradient(135deg, var(--user-accent-grad-end) 0%, var(--user-accent-dark) 100%);\n  color: #fff;\n}\n\n.onboarding-modal__icon {\n  width: 50px;\n  height: 50px;\n  margin: 0 auto 10px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n}\n\n.onboarding-modal__title {\n  font-size: 1.25rem;\n  font-weight: 700;\n  margin-bottom: 4px;\n}\n\n.onboarding-modal__subtitle {\n  font-size: 0.85rem;\n  opacity: 0.9;\n}\n\n.onboarding-modal__body {\n  padding: 20px;\n}\n\n.onboarding-modal__body .form-group {\n  margin-bottom: 16px;\n}\n\n.onboarding-modal__body label {\n  display: block;\n  font-weight: 600;\n  font-size: 0.85rem;\n  color: #1a1a2e;\n  margin-bottom: 6px;\n}\n\n.onboarding-modal__body .required {\n  color: #ef4444;\n}\n\n.onboarding-modal__body input,\n.onboarding-modal__body textarea {\n  width: 100%;\n  padding: 10px 12px;\n  border: 2px solid #e5e7eb;\n  border-radius: 10px;\n  font-size: 0.9rem;\n  font-family: inherit;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n  background: #f9fafb;\n}\n\n.onboarding-modal__body input:focus,\n.onboarding-modal__body textarea:focus {\n  outline: none;\n  border-color: var(--user-accent-grad-end);\n  box-shadow: 0 0 0 3px rgba(212, 165, 116, 0.15);\n  background: #fff;\n}\n\n.onboarding-modal__body textarea {\n  resize: vertical;\n  min-height: 60px;\n}\n\n.onboarding-modal__body .form-hint {\n  display: block;\n  font-size: 0.75rem;\n  color: #6b7280;\n  margin-top: 4px;\n}\n\n.onboarding-modal__footer {\n  padding: 12px 20px 20px;\n  text-align: center;\n}\n\n.onboarding-modal__note {\n  font-size: 0.75rem;\n  color: #6b7280;\n  margin-bottom: 10px;\n}\n\n.onboarding-modal__note i {\n  margin-right: 5px;\n}\n\n.onboarding-modal__footer .btn-primary {\n  width: 100%;\n  padding: 12px 20px;\n  background: linear-gradient(135deg, var(--user-accent-grad-end) 0%, var(--user-accent-dark) 100%);\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;\n}\n\n.onboarding-modal__footer .btn-primary:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 16px rgba(212, 165, 116, 0.35);\n}\n\n.onboarding-modal__footer .btn-primary:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.onboarding-modal__footer .btn-primary i {\n  margin-right: 6px;\n}\n\n@media (max-width: 400px) {\n  .onboarding-modal {\n    padding: 8px;\n  }\n  \n  .onboarding-modal__content {\n    max-width: 100%;\n    border-radius: 12px;\n  }\n  \n  .onboarding-modal__header {\n    padding: 16px 16px 12px;\n  }\n  \n  .onboarding-modal__icon {\n    width: 40px;\n    height: 40px;\n    font-size: 1.25rem;\n  }\n  \n  .onboarding-modal__title {\n    font-size: 1.1rem;\n  }\n  \n  .onboarding-modal__subtitle {\n    font-size: 0.8rem;\n  }\n  \n  .onboarding-modal__body {\n    padding: 16px;\n  }\n  \n  .onboarding-modal__footer {\n    padding: 10px 16px 16px;\n  }\n}\n\n[data-theme=\"dark\"] .onboarding-modal__content {\n  background: #1a1a2e;\n}\n\n[data-theme=\"dark\"] .onboarding-modal__header {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n}\n\n[data-theme=\"dark\"] .onboarding-modal__body label {\n  color: #e5e5e5;\n}\n\n[data-theme=\"dark\"] .onboarding-modal__body input,\n[data-theme=\"dark\"] .onboarding-modal__body textarea {\n  background: #2d2b3d;\n  border-color: #3d3a50;\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .onboarding-modal__body input:focus,\n[data-theme=\"dark\"] .onboarding-modal__body textarea:focus {\n  border-color: var(--user-accent-light, var(--user-accent));\n  box-shadow: 0 0 0 4px rgba(var(--user-accent-rgb, 91, 164, 230), 0.2);\n  background: #2d2b3d;\n}\n\n[data-theme=\"dark\"] .onboarding-modal__body .form-hint,\n[data-theme=\"dark\"] .onboarding-modal__note {\n  color: #a0a0b8;\n}\n\n[data-theme=\"dark\"] .onboarding-modal__footer .btn-primary {\n  background: linear-gradient(135deg, var(--user-accent) 0%, var(--user-accent-dark) 100%);\n}\n\n/* === MOOD ENTRY DELETE BUTTON === */\n.mood-entry-delete {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background: none;\n  border: none;\n  color: #ccc;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  opacity: 0;\n  font-size: 0.85rem;\n}\n\n.mood-entry-card:hover .mood-entry-delete {\n  opacity: 1;\n}\n\n.mood-entry-delete:hover {\n  color: #dc3545;\n  background: rgba(220, 53, 69, 0.1);\n}\n\n[data-theme=\"dark\"] .mood-entry-delete {\n  color: #666;\n}\n\n[data-theme=\"dark\"] .mood-entry-delete:hover {\n  color: #ff6b6b;\n  background: rgba(255, 107, 107, 0.15);\n}\n\n.mood-count-bar {\n  width: 100%;\n  text-align: center;\n  font-size: 0.85rem;\n  color: #8b8ba3;\n  padding: 8px 0 12px;\n  font-weight: 500;\n}\n\n.mood-load-more-wrapper {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  padding: 16px 0 4px;\n}\n\n.mood-load-more-btn {\n  background: var(--user-accent, #5BA4E6);\n  color: #fff;\n  border: none;\n  padding: 10px 28px;\n  border-radius: 10px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: opacity 0.2s ease, transform 0.15s ease;\n}\n\n.mood-load-more-btn:hover {\n  opacity: 0.88;\n  transform: translateY(-1px);\n}\n\n[data-theme=\"dark\"] .mood-count-bar {\n  color: #9a9ab5;\n}\n","path":null,"size_bytes":73462,"size_tokens":null},"api/__init__.py":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"profile/profile.js":{"content":"// ==================== PROFILE ====================\n\"use strict\";\n\n// --- State ---\nlet currentUser = null;\nlet userProfile = null;\nlet allActivities = [];\nlet viewedUserId = null;\nlet isOwnProfile = true;\n\n\n// --- DOM Helpers ---\nfunction createSafeElement(tag, className, textContent) {\n  const el = document.createElement(tag);\n  if (className) el.className = className;\n  if (textContent) el.textContent = textContent;\n  return el;\n}\n\nfunction escapeHtml(str) {\n  if (!str) return '';\n  const div = document.createElement('div');\n  div.textContent = str;\n  return div.innerHTML;\n}\n\n// --- Activity Item ---\nfunction createActivityItem(activity) {\n  const item = createSafeElement('div', 'mb-activity-item card-animated hover-lift');\n  item.dataset.type = activity.type;\n\n  const iconWrap = createSafeElement('div', 'mb-activity-item__icon');\n  const icon = document.createElement('ion-icon');\n  icon.setAttribute('name', activity.icon);\n  iconWrap.appendChild(icon);\n\n  const contentWrap = createSafeElement('div', 'mb-activity-item__content');\n  const text = createSafeElement('p', 'mb-activity-item__text');\n  const typeLabels = {\n    'post': 'You posted',\n    'comment': 'You commented',\n    'article_read': 'Read article',\n    'article_complete': 'Finished reading',\n    'page_view': 'Visited',\n    'mood_checkin': 'Mood check-in',\n    'achievement_unlocked': 'Achievement unlocked',\n    'profile_update': 'Updated profile',\n    'bookmark': 'Bookmarked',\n    'like': 'Liked a post'\n  };\n  const label = typeLabels[activity.type] || activity.type;\n  const showColon = ['post', 'comment'].includes(activity.type) || activity.content !== label;\n  const strong = createSafeElement('strong', null, showColon ? label + ': ' : label);\n  text.appendChild(strong);\n  if (showColon) text.appendChild(document.createTextNode(truncate(activity.content, 100)));\n\n  const time = createSafeElement('span', 'mb-activity-item__time', formatTimeAgo(activity.time));\n  contentWrap.appendChild(text);\n  contentWrap.appendChild(time);\n\n  item.appendChild(iconWrap);\n  item.appendChild(contentWrap);\n  return item;\n}\n\n// --- Empty State ---\nfunction createEmptyState(iconName, message, linkHref, linkText) {\n  const empty = createSafeElement('div', 'mb-profile__empty');\n  const icon = document.createElement('ion-icon');\n  icon.setAttribute('name', iconName);\n  empty.appendChild(icon);\n  empty.appendChild(createSafeElement('p', null, message));\n  if (linkHref && linkText) {\n    const link = createSafeElement('a', null, linkText);\n    link.href = linkHref;\n    empty.appendChild(link);\n  }\n  return empty;\n}\n\n// --- Liked Post Card ---\nfunction createLikedPost(content, createdAt, likeCount, postId, authorName, authorAvatar) {\n  const post = createSafeElement('div', 'mb-liked-post card-animated hover-lift');\n  post.onclick = () => window.location.href = `../community/#post-${postId}`;\n\n  const header = createSafeElement('div', 'mb-liked-post__header');\n\n  const avatarWrap = createSafeElement('div', 'mb-liked-post__avatar');\n  const avatarImg = document.createElement('img');\n  avatarImg.src = authorAvatar || '/assets/images/avatars/avatar1.svg';\n  avatarImg.alt = authorName || 'User';\n  avatarImg.onerror = () => { avatarImg.src = '/assets/images/avatars/avatar1.svg'; };\n  avatarWrap.appendChild(avatarImg);\n\n  const authorInfo = createSafeElement('div', 'mb-liked-post__author-info');\n  authorInfo.appendChild(createSafeElement('span', 'mb-liked-post__author-name', authorName || 'Anonymous'));\n  authorInfo.appendChild(createSafeElement('span', 'mb-liked-post__time', formatTimeAgo(new Date(createdAt))));\n\n  header.appendChild(avatarWrap);\n  header.appendChild(authorInfo);\n\n  const contentWrap = createSafeElement('div', 'mb-liked-post__content');\n  contentWrap.appendChild(createSafeElement('p', null, truncate(content, 200)));\n\n  const footer = createSafeElement('div', 'mb-liked-post__footer');\n\n  const stats = createSafeElement('div', 'mb-liked-post__stats');\n  const heartIcon = document.createElement('ion-icon');\n  heartIcon.setAttribute('name', 'heart');\n  stats.appendChild(heartIcon);\n  stats.appendChild(createSafeElement('span', null, ` ${likeCount || 0}`));\n\n  const viewLink = createSafeElement('span', 'mb-liked-post__view', 'View post');\n  const arrowIcon = document.createElement('ion-icon');\n  arrowIcon.setAttribute('name', 'arrow-forward-outline');\n  viewLink.appendChild(arrowIcon);\n\n  footer.appendChild(stats);\n  footer.appendChild(viewLink);\n\n  post.appendChild(header);\n  post.appendChild(contentWrap);\n  post.appendChild(footer);\n  return post;\n}\n\n// --- Goal Item ---\nfunction createGoalItem(goal) {\n  const item = createSafeElement('div', 'mb-profile__goal-item');\n  if (goal.category) item.setAttribute('data-category', goal.category);\n\n  const categoryIcons = {\n    'mindfulness': 'leaf-outline',\n    'exercise': 'fitness-outline',\n    'sleep': 'moon-outline',\n    'social': 'people-outline',\n    'reading': 'book-outline',\n    'other': 'star-outline'\n  };\n\n  const check = createSafeElement('div', 'goal-check');\n  if (goal.completed) {\n    check.classList.add('completed');\n    const checkIcon = document.createElement('ion-icon');\n    checkIcon.setAttribute('name', 'checkmark');\n    check.appendChild(checkIcon);\n  }\n  check.onclick = () => window.toggleGoalComplete(goal.id, !goal.completed);\n\n  const info = createSafeElement('div', 'goal-info');\n  info.appendChild(createSafeElement('div', 'goal-title', goal.title));\n\n\n  const categoryEl = createSafeElement('div', 'goal-category');\n  const catIcon = document.createElement('ion-icon');\n  catIcon.setAttribute('name', categoryIcons[goal.category] || 'star-outline');\n  categoryEl.appendChild(catIcon);\n  categoryEl.appendChild(document.createTextNode(goal.category.charAt(0).toUpperCase() + goal.category.slice(1)));\n  info.appendChild(categoryEl);\n\n  const deleteBtn = createSafeElement('button', 'goal-delete');\n  const trashIcon = document.createElement('ion-icon');\n  trashIcon.setAttribute('name', 'trash-outline');\n  deleteBtn.appendChild(trashIcon);\n  deleteBtn.onclick = () => window.deleteGoal(goal.id);\n\n  item.appendChild(check);\n  item.appendChild(info);\n  item.appendChild(deleteBtn);\n  return item;\n}\n\n// --- Badge ---\nfunction createBadge(achievement, isUnlocked) {\n  const badge = createSafeElement('div', 'mb-profile__badge card-animated hover-lift');\n  if (isUnlocked) {\n    badge.classList.add('unlocked');\n  } else {\n    badge.classList.add('locked');\n  }\n\n\n  if (!isUnlocked) {\n    const lockIcon = document.createElement('ion-icon');\n    lockIcon.setAttribute('name', 'lock-closed');\n    lockIcon.className = 'badge-lock-icon';\n    badge.appendChild(lockIcon);\n  }\n\n\n  const iconWrap = createSafeElement('div', 'mb-profile__badge-icon');\n  const trophyIcon = document.createElement('ion-icon');\n  trophyIcon.setAttribute('name', 'trophy');\n  iconWrap.appendChild(trophyIcon);\n\n  badge.appendChild(iconWrap);\n  badge.appendChild(createSafeElement('h4', null, achievement.name || 'Achievement'));\n  badge.appendChild(createSafeElement('p', null, achievement.description || ''));\n  badge.appendChild(createSafeElement('div', 'badge-points', `+${achievement.points || 0} pts`));\n\n  return badge;\n}\n\n// --- Mood Bar ---\nfunction createMoodBar(mood) {\n  const bar = createSafeElement('div', 'mood-bar');\n  const moodEmojis = ['ðŸ˜¢', 'ðŸ˜”', 'ðŸ˜', 'ðŸ˜Š', 'ðŸ˜„'];\n  const moodValue = mood.mood_value || 3;\n\n  const barEl = createSafeElement('div', 'bar');\n  barEl.style.height = `${moodValue * 20}px`;\n  barEl.title = mood.note || '';\n  bar.appendChild(barEl);\n  bar.appendChild(createSafeElement('div', 'date', new Date(mood.logged_at).toLocaleDateString('en-US', { weekday: 'short' })));\n\n  return bar;\n}\n\n// --- Saved Article Card ---\nfunction createSavedArticleCard(article) {\n  const card = createSafeElement('div', 'mb-profile__saved-card card-animated hover-lift');\n\n  const link = document.createElement('a');\n  const slug = (article.article_slug || '').replace(/[^a-zA-Z0-9-]/g, '');\n  link.href = `/articles/${slug}.html`;\n  link.className = 'saved-card-link';\n\n  const imgUrl = article.article_image || article.article_thumbnail;\n  if (imgUrl) {\n    if (imgUrl.startsWith('http://') || imgUrl.startsWith('https://') || imgUrl.startsWith('/')) {\n      const img = document.createElement('img');\n      img.src = imgUrl;\n      img.alt = article.article_title || 'Article';\n      img.onerror = () => img.style.display = 'none';\n      link.appendChild(img);\n    }\n  }\n\n  const body = createSafeElement('div', 'card-body');\n  body.appendChild(createSafeElement('span', 'saved-category', article.article_category || 'Article'));\n  body.appendChild(createSafeElement('h4', null, article.article_title || 'Untitled'));\n  body.appendChild(createSafeElement('span', 'saved-date', `Saved ${formatTimeAgo(new Date(article.saved_at))}`));\n\n  link.appendChild(body);\n  card.appendChild(link);\n  return card;\n}\n\n// --- Supabase Client ---\nfunction getSupabaseClient() {\n  if (typeof getSupabase === 'function') {\n    return getSupabase();\n  }\n  return null;\n}\n\n\n// ==================== INITIALIZATION ====================\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  const urlParams = new URLSearchParams(window.location.search);\n  viewedUserId = urlParams.get('user');\n\n  setupTabs();\n  setupPhotoUpload();\n  setupEditProfile();\n  setupSettings();\n  setupActivityFilters();\n  setupMoodSelector();\n  setupGoals();\n  setupSocialLinks();\n  setupPrivacySettings();\n\n  function handleAuth(user) {\n    currentUser = user;\n\n\n    if (viewedUserId) {\n      isOwnProfile = user && user.id === viewedUserId;\n    } else {\n      isOwnProfile = true;\n      viewedUserId = user ? user.id : null;\n    }\n\n\n    window.isOwnProfile = isOwnProfile;\n\n    if (viewedUserId) {\n\n      showProfileView();\n      applyViewMode();\n      loadProfileData(viewedUserId);\n      loadActivityData(viewedUserId);\n      loadFollowerCountsData(viewedUserId);\n      loadReputationPointsData(viewedUserId);\n\n\n      if (typeof ProfileAnalytics !== 'undefined') {\n        ProfileAnalytics.init(viewedUserId);\n      }\n\n\n      if (!isOwnProfile && currentUser) {\n        checkFollowStatus();\n      }\n    } else if (!user) {\n\n      showGuestView();\n    }\n  }\n\n  function waitForAuth() {\n    if (typeof onAuthReady === 'function') {\n      onAuthReady(handleAuth);\n\n      if (typeof onAuthChange === 'function') {\n        onAuthChange((user) => {\n          currentUser = user;\n          if (viewedUserId) {\n            isOwnProfile = user && user.id === viewedUserId;\n            window.isOwnProfile = isOwnProfile;\n            applyViewMode();\n            if (!isOwnProfile && currentUser) {\n              checkFollowStatus();\n            }\n          } else if (user) {\n            isOwnProfile = true;\n            window.isOwnProfile = isOwnProfile;\n            viewedUserId = user.id;\n            showProfileView();\n            applyViewMode();\n            loadProfileData(user.id);\n            loadActivityData(user.id);\n            loadFollowerCountsData(user.id);\n            loadReputationPointsData(user.id);\n\n\n            if (typeof ProfileAnalytics !== 'undefined') {\n              ProfileAnalytics.init(user.id);\n            }\n          } else {\n            showGuestView();\n          }\n        });\n      }\n    } else {\n      window.addEventListener('mindbalance:authready', (e) => {\n        handleAuth(e.detail.user);\n      });\n    }\n  }\n\n  waitForAuth();\n});\n\n\n\n// ==================== VIEW MODE ====================\nfunction applyViewMode() {\n  const editElements = document.querySelectorAll('.mb-profile__edit-btn, .mb-profile__cover-edit, .mb-profile__avatar-edit');\n  const followBtnContainer = document.getElementById('followBtnContainer');\n  const shareBtn = document.getElementById('shareProfileBtn');\n  const viewPublicBtn = document.getElementById('viewPublicBtn');\n\n  if (isOwnProfile) {\n\n    editElements.forEach(el => el.style.display = '');\n    if (followBtnContainer) followBtnContainer.style.display = 'none';\n    if (shareBtn) shareBtn.style.display = 'inline-flex';\n    if (viewPublicBtn) viewPublicBtn.style.display = 'inline-flex';\n\n\n    document.querySelectorAll('.mb-profile__tab').forEach(tab => {\n      tab.style.display = '';\n    });\n  } else {\n\n    editElements.forEach(el => el.style.display = 'none');\n    if (followBtnContainer) followBtnContainer.style.display = 'inline-flex';\n    if (shareBtn) shareBtn.style.display = 'none';\n    if (viewPublicBtn) viewPublicBtn.style.display = 'none';\n\n\n    const settingsTab = document.querySelector('[data-tab=\"settings\"]');\n    const wellnessTab = document.querySelector('[data-tab=\"wellness\"]');\n    const likedPostsTab = document.querySelector('[data-tab=\"liked-posts\"]');\n    const savedTab = document.querySelector('[data-tab=\"saved\"]');\n    if (settingsTab) settingsTab.style.display = 'none';\n    if (wellnessTab) wellnessTab.style.display = 'none';\n    if (likedPostsTab) likedPostsTab.style.display = 'none';\n    if (savedTab) savedTab.style.display = 'none';\n\n\n    checkFollowStatus();\n  }\n}\n\nfunction showGuestView() {\n\n  if (viewedUserId && !isOwnProfile) {\n    showProfileView();\n    applyViewMode();\n    loadProfileData(viewedUserId);\n    loadActivityData(viewedUserId);\n    loadFollowerCountsData(viewedUserId);\n    loadReputationPointsData(viewedUserId);\n  } else {\n\n    window.location.href = '../auth/';\n  }\n}\n\nfunction showProfileView() {\n  document.getElementById('guestView').style.display = 'none';\n  document.getElementById('profileView').style.display = 'block';\n}\n\n\n\n// ==================== DATA LOADING ====================\nasync function loadProfile() {\n  if (currentUser) {\n    loadProfileData(currentUser.id);\n  }\n}\n\nasync function loadProfileData(userId) {\n  if (!userId) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n\n  if (isOwnProfile && currentUser) {\n    document.getElementById('profileEmail').textContent = currentUser.email || '';\n  } else {\n    document.getElementById('profileEmail').textContent = '';\n  }\n\n\n  const { data: profile, error } = await supabaseClient\n    .from('profiles')\n    .select('*')\n    .eq('id', userId)\n    .single();\n\n  if (profile) {\n    userProfile = profile;\n\n    window.userProfile = profile;\n    window.isOwnProfile = isOwnProfile;\n    document.getElementById('profileName').textContent = profile.display_name || profile.username || 'User';\n    document.getElementById('profileBio').textContent = profile.bio || 'No bio yet...';\n\n    const avatarImg = document.getElementById('avatarImg');\n    if (profile.avatar_url) {\n      avatarImg.src = profile.avatar_url;\n      avatarImg.style.display = '';\n      const initialsEl = document.getElementById('avatarInitials');\n      if (initialsEl) initialsEl.style.display = 'none';\n    } else {\n      const name = profile.display_name || profile.username || profile.email || 'U';\n      const initials = name.split(' ').map(w => w[0]).join('').toUpperCase().slice(0, 2) || name.substring(0, 2).toUpperCase();\n      const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--user-accent').trim() || '#5BA4E6';\n      const colors = [accentColor,'#E57373','#64B5F6','#81C784','#FFD54F','#BA68C8','#4DB6AC','#FF8A65','#90A4AE','#A1887F'];\n      const colorIndex = name.charCodeAt(0) % colors.length;\n      let initialsEl = document.getElementById('avatarInitials');\n      if (!initialsEl) {\n        initialsEl = document.createElement('div');\n        initialsEl.id = 'avatarInitials';\n        initialsEl.className = 'mb-profile__avatar-initials';\n        avatarImg.parentElement.appendChild(initialsEl);\n      }\n      initialsEl.textContent = initials;\n      initialsEl.style.background = colors[colorIndex];\n      initialsEl.style.display = 'flex';\n      avatarImg.style.display = 'none';\n    }\n\n    if (profile.cover_url) {\n      document.getElementById('coverPhoto').style.backgroundImage = `url(${profile.cover_url})`;\n    } else {\n      const localCover = localStorage.getItem('profile_cover_url');\n      if (localCover && isOwnProfile) {\n        document.getElementById('coverPhoto').style.backgroundImage = `url(${localCover})`;\n      }\n    }\n\n\n    document.getElementById('settingsName').value = profile.display_name || '';\n    document.getElementById('settingsBio').value = profile.bio || '';\n\n\n    if (profile.social_links) {\n      let links;\n      try {\n        links = typeof profile.social_links === 'string' ? JSON.parse(profile.social_links) : profile.social_links;\n      } catch (e) {\n        links = {};\n      }\n      if (links.website) {\n        document.getElementById('settingsWebsite').value = links.website;\n        const websiteLink = document.getElementById('socialWebsite');\n        const websiteUrl = links.website.startsWith('http') ? links.website : 'https://' + links.website;\n        try {\n          const parsed = new URL(websiteUrl);\n          if (['http:', 'https:'].includes(parsed.protocol)) {\n            websiteLink.href = parsed.href;\n            websiteLink.hidden = false;\n          }\n        } catch (e) {}\n      }\n      if (links.twitter) {\n        document.getElementById('settingsTwitter').value = links.twitter;\n        const twitterLink = document.getElementById('socialTwitter');\n        const handle = links.twitter.replace(/[^a-zA-Z0-9_]/g, '');\n        if (handle) {\n          twitterLink.href = 'https://twitter.com/' + handle;\n          twitterLink.hidden = false;\n        }\n      }\n      if (links.instagram) {\n        document.getElementById('settingsInstagram').value = links.instagram;\n        const instaLink = document.getElementById('socialInstagram');\n        const handle = links.instagram.replace(/[^a-zA-Z0-9_.]/g, '');\n        if (handle) {\n          instaLink.href = 'https://instagram.com/' + handle;\n          instaLink.hidden = false;\n        }\n      }\n    }\n\n\n    updateSocialLinksVisibility();\n\n\n    updateProfileCompletion(profile);\n\n\n    document.getElementById('publicProfile').checked = profile.is_public !== false;\n    document.getElementById('showActivity').checked = profile.show_activity !== false;\n    document.getElementById('showSaved').checked = profile.show_saved === true;\n\n\n    const streakNumberEl = document.getElementById('streakNumber');\n    if (streakNumberEl) streakNumberEl.textContent = profile.current_streak || 0;\n    document.getElementById('bestStreak').textContent = profile.longest_streak || 0;\n\n\n    if (profile.reputation_points) {\n      document.getElementById('reputationPoints').textContent = profile.reputation_points;\n    }\n  } else if (isOwnProfile && currentUser) {\n\n    document.getElementById('profileName').textContent = 'New User';\n\n\n    await supabaseClient.from('profiles').upsert({\n      id: currentUser.id,\n      username: currentUser.email?.split('@')[0] || 'user',\n      created_at: new Date().toISOString()\n    });\n\n\n    profile = { id: currentUser.id, display_name: null };\n  } else {\n\n    document.getElementById('profileName').textContent = 'User';\n  }\n\n\n  loadStatsData(userId);\n\n\n  if (isOwnProfile) {\n    setupRealtimeSubscriptions(userId);\n\n\n    const needsOnboarding = !profile?.display_name || profile.display_name.trim() === '';\n    if (needsOnboarding) {\n      showOnboardingModal();\n    }\n  }\n}\n\n\n// --- Stats ---\nasync function loadStats() {\n  if (currentUser) {\n    loadStatsData(currentUser.id);\n  }\n}\n\nasync function loadStatsData(userId) {\n  if (!userId) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n\n  const { count: postCount } = await supabaseClient\n    .from('posts')\n    .select('*', { count: 'exact', head: true })\n    .eq('author_id', userId);\n\n\n  const { count: commentCount } = await supabaseClient\n    .from('post_comments')\n    .select('*', { count: 'exact', head: true })\n    .eq('author_id', userId);\n\n\n  const { count: likeCount } = await supabaseClient\n    .from('likes')\n    .select('*', { count: 'exact', head: true })\n    .eq('user_id', userId);\n\n  document.getElementById('postCount').textContent = postCount || 0;\n  document.getElementById('commentCount').textContent = commentCount || 0;\n  document.getElementById('likeCount').textContent = likeCount || 0;\n}\n\n\n// --- Activity ---\nasync function loadActivity() {\n  if (currentUser) {\n    loadActivityData(currentUser.id);\n  }\n}\n\nasync function loadActivityData(userId) {\n  if (!userId) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const activityFeed = document.getElementById('activityFeed');\n\n  const [postsRes, commentsRes, logsRes] = await Promise.all([\n    supabaseClient\n      .from('posts')\n      .select('id, content, created_at')\n      .eq('author_id', userId)\n      .order('created_at', { ascending: false })\n      .limit(5),\n    supabaseClient\n      .from('post_comments')\n      .select('id, content, created_at, post_id')\n      .eq('author_id', userId)\n      .order('created_at', { ascending: false })\n      .limit(5),\n    supabaseClient\n      .from('user_activity_logs')\n      .select('id, activity_type, page_url, activity_data, created_at')\n      .eq('user_id', userId)\n      .order('created_at', { ascending: false })\n      .limit(30)\n  ]);\n\n  const posts = postsRes.data;\n  const comments = commentsRes.data;\n  const activityLogs = logsRes.data;\n\n  const activities = [];\n\n  if (posts) {\n    posts.forEach(post => {\n      activities.push({\n        type: 'post',\n        content: post.content,\n        time: new Date(post.created_at),\n        icon: 'create-outline'\n      });\n    });\n  }\n\n  if (comments) {\n    comments.forEach(comment => {\n      activities.push({\n        type: 'comment',\n        content: comment.content,\n        time: new Date(comment.created_at),\n        icon: 'chatbubble-outline'\n      });\n    });\n  }\n\n  if (activityLogs) {\n    const hiddenTypes = ['page_view', 'page_exit'];\n    const activityConfig = {\n      'article_read': { icon: 'book-outline', label: 'Read article' },\n      'article_complete': { icon: 'checkmark-done-outline', label: 'Finished reading' },\n      'mood_checkin': { icon: 'happy-outline', label: 'Mood check-in' },\n      'mood_entry': { icon: 'happy-outline', label: 'Mood check-in' },\n      'achievement_unlocked': { icon: 'trophy-outline', label: 'Achievement unlocked' },\n      'profile_update': { icon: 'person-outline', label: 'Updated profile' },\n      'bookmark': { icon: 'bookmark-outline', label: 'Bookmarked' },\n      'like': { icon: 'heart-outline', label: 'Liked a post' },\n      'resource_view': { icon: 'folder-open-outline', label: 'Viewed resource' },\n      'search': { icon: 'search-outline', label: 'Searched' },\n      'share': { icon: 'share-social-outline', label: 'Shared' },\n      'community_post': { icon: 'chatbubble-outline', label: 'Posted in community' },\n      'community_comment': { icon: 'chatbox-outline', label: 'Commented' },\n      'community_like': { icon: 'heart-outline', label: 'Liked a post' },\n      'follow': { icon: 'person-add-outline', label: 'Followed someone' }\n    };\n    activityLogs.forEach(log => {\n      const logType = log.activity_type || log.action_type || '';\n      if (hiddenTypes.includes(logType)) return;\n      const config = activityConfig[logType] || { icon: 'ellipse-outline', label: logType.replace(/_/g, ' ') };\n      let desc = config.label;\n      try {\n        const rawData = log.activity_data || log.metadata;\n        if (rawData) {\n          const data = typeof rawData === 'string' ? JSON.parse(rawData) : rawData;\n          if (data.article_title) desc += ': ' + data.article_title;\n          else if (data.mood) desc += ': ' + data.mood;\n          else if (data.badge_name) desc += ': ' + data.badge_name;\n          else if (data.resource_title) desc += ': ' + data.resource_title;\n          else if (data.query) desc += ': \"' + data.query + '\"';\n        }\n      } catch (e) {}\n      activities.push({\n        type: logType,\n        content: desc,\n        time: new Date(log.created_at),\n        icon: config.icon\n      });\n    });\n  }\n\n\n  activities.sort((a, b) => b.time - a.time);\n\n\n  allActivities = activities;\n\n  if (activities.length === 0) {\n    activityFeed.innerHTML = '';\n    if (isOwnProfile) {\n      activityFeed.appendChild(createEmptyState('newspaper-outline', 'No activity yet', '../community/', 'Join the conversation'));\n    } else {\n      const viewedName = document.getElementById('profileName')?.textContent || 'This user';\n      activityFeed.appendChild(createEmptyState('newspaper-outline', viewedName + ' has no activity yet', null, null));\n    }\n    return;\n  }\n\n  activityFeed.innerHTML = '';\n  activities.slice(0, 10).forEach(activity => {\n    activityFeed.appendChild(createActivityItem(activity));\n  });\n}\n\n// --- Helpers ---\nfunction truncate(str, length) {\n  if (!str) return '';\n  return str.length > length ? str.substring(0, length) + '...' : str;\n}\n\nfunction formatTimeAgo(date) {\n  const seconds = Math.floor((new Date() - date) / 1000);\n\n  if (seconds < 60) return 'Just now';\n  if (seconds < 3600) return `${Math.floor(seconds / 60)} minutes ago`;\n  if (seconds < 86400) return `${Math.floor(seconds / 3600)} hours ago`;\n  if (seconds < 604800) return `${Math.floor(seconds / 86400)} days ago`;\n\n  return date.toLocaleDateString();\n}\n\n\n// ==================== UI SETUP ====================\nfunction setupTabs() {\n  const tabs = document.querySelectorAll('.mb-profile__tab');\n  const panels = document.querySelectorAll('.mb-profile__panel');\n\n  tabs.forEach(tab => {\n    tab.addEventListener('click', () => {\n      const targetTab = tab.dataset.tab;\n\n\n      tabs.forEach(t => t.classList.remove('is-active'));\n      tab.classList.add('is-active');\n\n\n      panels.forEach(panel => {\n        panel.classList.remove('is-active');\n        if (panel.id === `${targetTab}Panel`) {\n          panel.classList.add('is-active');\n        }\n      });\n\n\n      if (targetTab === 'liked') {\n        loadLikedPosts();\n      } else if (targetTab === 'achievements') {\n        loadAchievements();\n      } else if (targetTab === 'wellness') {\n        loadMoodHistory();\n        loadGoals();\n        loadStreak();\n      } else if (targetTab === 'saved') {\n        loadSavedArticles();\n      }\n    });\n  });\n}\n\n// --- Photo Upload ---\nfunction setupPhotoUpload() {\n  const avatarBtn = document.getElementById('editAvatarBtn');\n  const avatarInput = document.getElementById('avatarInput');\n  const coverBtn = document.getElementById('editCoverBtn');\n  const coverInput = document.getElementById('coverInput');\n  const avatarPicker = document.getElementById('avatarPicker');\n  const closePickerBtn = document.getElementById('closeAvatarPicker');\n  const uploadAvatarBtn = document.getElementById('uploadAvatarBtn');\n  const presetButtons = document.querySelectorAll('.mb-avatar-preset');\n\n  avatarBtn?.addEventListener('click', (e) => {\n    e.stopPropagation();\n    if (avatarPicker) {\n      avatarPicker.hidden = !avatarPicker.hidden;\n    }\n  });\n\n  closePickerBtn?.addEventListener('click', () => {\n    if (avatarPicker) avatarPicker.hidden = true;\n  });\n\n  uploadAvatarBtn?.addEventListener('click', () => {\n    avatarInput?.click();\n    if (avatarPicker) avatarPicker.hidden = true;\n  });\n\n  presetButtons.forEach(btn => {\n    btn.addEventListener('click', async () => {\n      const avatarId = btn.dataset.avatar;\n      if (!avatarId || !currentUser) return;\n\n      const avatarUrl = `/assets/images/avatars/${avatarId}.svg`;\n\n      presetButtons.forEach(b => b.classList.remove('selected'));\n      btn.classList.add('selected');\n\n      await setPresetAvatar(avatarUrl);\n      if (avatarPicker) avatarPicker.hidden = true;\n    });\n  });\n\n  avatarPicker?.addEventListener('click', (e) => {\n    if (e.target === avatarPicker) {\n      avatarPicker.hidden = true;\n    }\n  });\n\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape' && avatarPicker && !avatarPicker.hidden) {\n      avatarPicker.hidden = true;\n      avatarBtn?.focus();\n    }\n  });\n\n  coverBtn?.addEventListener('click', () => coverInput?.click());\n\n  avatarInput?.addEventListener('change', async (e) => {\n    const file = e.target.files[0];\n    if (!file || !currentUser) return;\n\n    await uploadPhoto(file, 'avatar');\n  });\n\n  coverInput?.addEventListener('change', async (e) => {\n    console.log('Cover input change event triggered');\n    const file = e.target.files[0];\n    if (!file) {\n      console.log('No file selected');\n      return;\n    }\n    if (!currentUser) {\n      console.log('No current user - cannot upload');\n      ToastManager.warning('Please log in to upload a cover photo.');\n      return;\n    }\n    console.log('Cover file selected:', file.name, file.size, file.type);\n    await uploadPhoto(file, 'cover');\n  });\n}\n\nasync function setPresetAvatar(avatarUrl) {\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient || !currentUser) return;\n\n  try {\n    await supabaseClient\n      .from('profiles')\n      .upsert({\n        id: currentUser.id,\n        avatar_url: avatarUrl,\n        updated_at: new Date().toISOString()\n      }, { onConflict: 'id' });\n\n    document.getElementById('avatarImg').src = avatarUrl;\n\n\n    if (!userProfile) {\n      userProfile = { id: currentUser.id };\n    }\n    userProfile.avatar_url = avatarUrl;\n    updateProfileCompletion(userProfile);\n  } catch (error) {\n    console.error('Error setting preset avatar:', error);\n    ToastManager.error('Failed to set avatar. Please try again.');\n  }\n}\n\n// --- File Upload ---\nasync function uploadPhoto(file, type) {\n  console.log('uploadPhoto called:', { type, fileName: file?.name, fileSize: file?.size });\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) {\n    console.error('Supabase client not available');\n    ToastManager.error('Unable to connect to server. Please refresh and try again.');\n    return;\n  }\n  if (!currentUser) {\n    console.error('No current user - not logged in');\n    ToastManager.warning('Please log in to upload photos.');\n    return;\n  }\n\n  const fileExt = file.name.split('.').pop().toLowerCase();\n  const fileName = `${currentUser.id}_${type}_${Date.now()}.${fileExt}`;\n  const filePath = `${type}s/${fileName}`;\n\n  console.log('Uploading to storage:', { bucket: 'avatars', filePath });\n\n\n  const { data, error } = await supabaseClient.storage\n    .from('avatars')\n    .upload(filePath, file, { upsert: true });\n\n  if (error) {\n    console.error('Storage upload error:', error);\n    console.error('Error details:', JSON.stringify(error, null, 2));\n    ToastManager.error(`Failed to upload photo: ${error.message || 'Unknown error'}. Please try again.`);\n    return;\n  }\n\n  console.log('Upload successful:', data);\n\n\n  const { data: { publicUrl } } = supabaseClient.storage\n    .from('avatars')\n    .getPublicUrl(filePath);\n\n\n  const updateField = type === 'avatar' ? 'avatar_url' : 'cover_url';\n  console.log('Saving to database:', { updateField, publicUrl });\n\n\n  const { data: updateData, error: updateError } = await supabaseClient\n    .from('profiles')\n    .update({\n      [updateField]: publicUrl,\n      updated_at: new Date().toISOString()\n    })\n    .eq('id', currentUser.id)\n    .select();\n\n  console.log('Update result:', { updateData, updateError });\n\n\n  if (updateError) {\n    console.error('Database update error (possible RLS policy issue):', updateError);\n    console.error('Update error details:', JSON.stringify(updateError, null, 2));\n\n\n    if (updateError.code === '42501' || updateError.message?.includes('policy')) {\n      ToastManager.error('Permission denied. Please check database permissions.');\n      return;\n    }\n\n    if (updateError.code === '42703' && type === 'cover') {\n      console.warn('cover_url column missing from profiles table');\n      if (type === 'cover') {\n        document.getElementById('coverPhoto').style.backgroundImage = `url(${publicUrl})`;\n        localStorage.setItem('profile_cover_url', publicUrl);\n        ToastManager.info('Cover photo updated locally. Database column pending setup.');\n      }\n      return;\n    }\n\n    ToastManager.error(`Failed to update profile: ${updateError.message || 'Unknown error'}. Please try again.`);\n    return;\n  }\n\n\n  if (!updateData || updateData.length === 0) {\n    console.log('No existing profile found, trying insert...');\n    const { error: insertError } = await supabaseClient\n      .from('profiles')\n      .insert({\n        id: currentUser.id,\n        [updateField]: publicUrl,\n        updated_at: new Date().toISOString()\n      });\n\n    if (insertError) {\n      console.error('Database insert error:', insertError);\n      console.error('Insert error details:', JSON.stringify(insertError, null, 2));\n\n\n      if (insertError.code === '42501' || insertError.message?.includes('policy')) {\n        ToastManager.error('Permission denied. Please check database permissions.');\n        return;\n      }\n\n\n      if (insertError.code === '23505') {\n        ToastManager.error('Profile exists but update was blocked. Please contact support.');\n        return;\n      }\n\n      ToastManager.error(`Failed to save photo to profile: ${insertError.message || 'Unknown error'}. Please try again.`);\n      return;\n    }\n    console.log('Insert successful');\n  } else {\n    console.log('Update successful');\n  }\n\n\n  if (!userProfile) {\n    userProfile = { id: currentUser.id };\n  }\n  userProfile[updateField] = publicUrl;\n\n\n  if (type === 'avatar') {\n    document.getElementById('avatarImg').src = publicUrl;\n  } else {\n    document.getElementById('coverPhoto').style.backgroundImage = `url(${publicUrl})`;\n  }\n\n\n  updateProfileCompletion(userProfile);\n}\n\n// --- Edit Profile ---\nfunction setupEditProfile() {\n  const editBtn = document.getElementById('editProfileBtn');\n  const modal = document.getElementById('editModal');\n  const closeButtons = modal?.querySelectorAll('[data-close-modal]');\n  const saveBtn = document.getElementById('saveProfileBtn');\n\n  editBtn?.addEventListener('click', () => {\n    document.getElementById('editName').value = userProfile?.display_name || '';\n    document.getElementById('editBio').value = userProfile?.bio || '';\n    modal.hidden = false;\n  });\n\n  closeButtons?.forEach(btn => {\n    btn.addEventListener('click', () => {\n      modal.hidden = true;\n    });\n  });\n\n  saveBtn?.addEventListener('click', async () => {\n    const name = document.getElementById('editName').value.trim();\n    const bio = document.getElementById('editBio').value.trim();\n\n    if (!currentUser) return;\n\n    const supabaseClient = getSupabaseClient();\n    if (!supabaseClient) return;\n\n\n    const { error } = await supabaseClient\n      .from('profiles')\n      .upsert({\n        id: currentUser.id,\n        display_name: name,\n        bio: bio,\n        updated_at: new Date().toISOString()\n      }, { onConflict: 'id' });\n\n    if (error) {\n      console.error('Save error:', error);\n      ToastManager.error('Failed to save profile. Please try again.');\n      return;\n    }\n\n    document.getElementById('profileName').textContent = name || 'User';\n    document.getElementById('profileBio').textContent = bio || 'No bio yet...';\n    document.getElementById('settingsName').value = name;\n    document.getElementById('settingsBio').value = bio;\n\n    userProfile = { ...userProfile, display_name: name, bio: bio };\n    window.userProfile = userProfile;\n\n\n    updateProfileCompletion(userProfile);\n\n\n    if (window.MindBalanceImmersive?.updateGreeting) {\n      window.MindBalanceImmersive.updateGreeting();\n    }\n\n    modal.hidden = true;\n  });\n}\n\n// --- Settings ---\nfunction setupSettings() {\n  const saveBtn = document.getElementById('saveSettingsBtn');\n  const logoutBtn = document.getElementById('logoutBtn');\n\n  saveBtn?.addEventListener('click', async () => {\n    const name = document.getElementById('settingsName').value.trim();\n    const bio = document.getElementById('settingsBio').value.trim();\n\n    if (!currentUser) return;\n\n    const supabaseClient = getSupabaseClient();\n    if (!supabaseClient) return;\n\n\n    const { error } = await supabaseClient\n      .from('profiles')\n      .upsert({\n        id: currentUser.id,\n        display_name: name,\n        bio: bio,\n        updated_at: new Date().toISOString()\n      }, { onConflict: 'id' });\n\n    if (error) {\n      console.error('Save error:', error);\n      ToastManager.error('Failed to save settings. Please try again.');\n      return;\n    }\n\n    document.getElementById('profileName').textContent = name || 'User';\n    document.getElementById('profileBio').textContent = bio || 'No bio yet...';\n\n    userProfile = { ...userProfile, display_name: name, bio: bio };\n    window.userProfile = userProfile;\n\n\n    updateProfileCompletion(userProfile);\n\n\n    if (window.MindBalanceImmersive?.updateGreeting) {\n      window.MindBalanceImmersive.updateGreeting();\n    }\n\n    ToastManager.success('Settings saved!');\n  });\n\n  logoutBtn?.addEventListener('click', async () => {\n    const supabaseClient = getSupabaseClient();\n    if (!supabaseClient) {\n      window.location.href = '../';\n      return;\n    }\n    await supabaseClient.auth.signOut();\n    window.location.href = '../';\n  });\n}\n\n\n\n// ==================== SOCIAL FEATURES ====================\nasync function loadFollowerCounts() {\n  if (currentUser) {\n    loadFollowerCountsData(currentUser.id);\n  }\n}\n\nasync function loadFollowerCountsData(userId) {\n  if (!userId) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const { count: followerCount } = await supabaseClient\n    .from('followers')\n    .select('*', { count: 'exact', head: true })\n    .eq('following_id', userId);\n\n  const { count: followingCount } = await supabaseClient\n    .from('followers')\n    .select('*', { count: 'exact', head: true })\n    .eq('follower_id', userId);\n\n  document.getElementById('followerCount').textContent = followerCount || 0;\n  document.getElementById('followingCount').textContent = followingCount || 0;\n}\n\n// --- Liked Posts ---\nasync function loadLikedPosts() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const likedContainer = document.getElementById('likedPosts');\n\n  const { data: likes, error } = await supabaseClient\n    .from('post_likes')\n    .select('post_id, created_at, posts(id, content, author_id, created_at, like_count)')\n    .eq('user_id', currentUser.id)\n    .order('created_at', { ascending: false })\n    .limit(20);\n\n  if (error) {\n    const { data: altLikes } = await supabaseClient\n      .from('likes')\n      .select('post_id, created_at')\n      .eq('user_id', currentUser.id)\n      .order('created_at', { ascending: false })\n      .limit(20);\n\n    if (!altLikes || altLikes.length === 0) {\n      likedContainer.innerHTML = '';\n      likedContainer.appendChild(createEmptyState('heart-outline', 'No liked posts yet', '../community/', 'Explore the community'));\n      return;\n    }\n\n    const postIds = altLikes.map(l => l.post_id).filter(Boolean);\n    if (postIds.length === 0) {\n      likedContainer.innerHTML = '';\n      likedContainer.appendChild(createEmptyState('heart-outline', 'No liked posts yet', '../community/', 'Explore the community'));\n      return;\n    }\n\n    const { data: posts } = await supabaseClient\n      .from('posts')\n      .select('id, content, author_id, created_at, like_count')\n      .in('id', postIds);\n\n    if (!posts || posts.length === 0) {\n      likedContainer.innerHTML = '';\n      likedContainer.appendChild(createEmptyState('heart-outline', 'No liked posts yet', '../community/', 'Explore the community'));\n      return;\n    }\n\n\n    const authorIds = [...new Set(posts.map(p => p.author_id).filter(Boolean))];\n    const { data: profiles } = authorIds.length > 0\n      ? await supabaseClient.from('profiles').select('id, display_name, avatar_url').in('id', authorIds)\n      : { data: [] };\n\n    const profileMap = new Map((profiles || []).map(p => [p.id, p]));\n\n    likedContainer.innerHTML = '';\n    posts.forEach(post => {\n      const author = profileMap.get(post.author_id) || {};\n      likedContainer.appendChild(createLikedPost(post.content, post.created_at, post.like_count, post.id, author.display_name, author.avatar_url));\n    });\n    return;\n  }\n\n  if (!likes || likes.length === 0) {\n    likedContainer.innerHTML = '';\n    likedContainer.appendChild(createEmptyState('heart-outline', 'No liked posts yet', '../community/', 'Explore the community'));\n    return;\n  }\n\n\n  const authorIds = [...new Set(likes.filter(l => l.posts).map(l => l.posts.author_id).filter(Boolean))];\n  const { data: profiles } = authorIds.length > 0\n    ? await supabaseClient.from('profiles').select('id, display_name, avatar_url').in('id', authorIds)\n    : { data: [] };\n\n  const profileMap = new Map((profiles || []).map(p => [p.id, p]));\n\n  likedContainer.innerHTML = '';\n  likes.filter(l => l.posts).forEach(like => {\n    const author = profileMap.get(like.posts.author_id) || {};\n    likedContainer.appendChild(createLikedPost(like.posts.content, like.posts.created_at, like.posts.like_count, like.posts.id, author.display_name, author.avatar_url));\n  });\n}\n\n// --- Achievements ---\nasync function loadAchievements() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const grid = document.getElementById('achievementsGrid');\n\n  const { data: allAchievements } = await supabaseClient\n    .from('achievements')\n    .select('*')\n    .order('category', { ascending: true });\n\n  const { data: userAchievements } = await supabaseClient\n    .from('user_achievements')\n    .select('achievement_id, unlocked_at')\n    .eq('user_id', currentUser.id);\n\n  if (!allAchievements || allAchievements.length === 0) {\n    grid.innerHTML = '';\n    grid.appendChild(createEmptyState('trophy-outline', 'No achievements available'));\n    return;\n  }\n\n  const unlockedIds = new Set((userAchievements || []).map(ua => ua.achievement_id));\n  const totalPoints = allAchievements\n    .filter(a => unlockedIds.has(a.id))\n    .reduce((sum, a) => sum + (a.points || 0), 0);\n\n  const totalPointsEl = document.getElementById('totalPoints');\n  if (totalPointsEl) totalPointsEl.textContent = totalPoints;\n\n  if (!grid) return;\n  grid.innerHTML = '';\n  allAchievements.forEach(achievement => {\n    const isUnlocked = unlockedIds.has(achievement.id);\n    grid.appendChild(createBadge(achievement, isUnlocked));\n  });\n\n\n  checkAndAwardBadges(allAchievements, unlockedIds);\n}\n\nasync function checkAndAwardBadges(allAchievements, unlockedIds) {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  if (!allAchievements || !unlockedIds) {\n    const { data: achievements } = await supabaseClient\n      .from('achievements')\n      .select('*');\n\n    const { data: userAchievements } = await supabaseClient\n      .from('user_achievements')\n      .select('achievement_id')\n      .eq('user_id', currentUser.id);\n\n    allAchievements = achievements || [];\n    unlockedIds = new Set((userAchievements || []).map(ua => ua.achievement_id));\n  }\n\n  if (allAchievements.length === 0) return;\n\n\n  const [postsResult, commentsResult, likesResult, moodResult, goalsResult, savedResult, followersResult] = await Promise.all([\n    supabaseClient.from('posts').select('id', { count: 'exact' }).eq('author_id', currentUser.id),\n    supabaseClient.from('post_comments').select('id', { count: 'exact' }).eq('author_id', currentUser.id),\n    supabaseClient.from('posts').select('like_count').eq('author_id', currentUser.id),\n    supabaseClient.from('mood_logs').select('id', { count: 'exact' }).eq('user_id', currentUser.id),\n    supabaseClient.from('wellness_goals').select('id, completed').eq('user_id', currentUser.id),\n    supabaseClient.from('saved_articles').select('id', { count: 'exact' }).eq('user_id', currentUser.id),\n    supabaseClient.from('followers').select('id', { count: 'exact' }).eq('following_id', currentUser.id)\n  ]);\n\n  const postCount = postsResult.count || 0;\n  const commentCount = commentsResult.count || 0;\n  const likesReceived = (likesResult.data || []).reduce((sum, p) => sum + (p.like_count || 0), 0);\n  const moodLogCount = moodResult.count || 0;\n  const goalCount = (goalsResult.data || []).length;\n  const completedGoals = (goalsResult.data || []).filter(g => g.completed).length;\n  const savedCount = savedResult.count || 0;\n  const currentStreak = userProfile?.current_streak || 0;\n  const followerCount = followersResult.count || 0;\n\n  const stats = {\n    posts: postCount,\n    comments: commentCount,\n    likes_received: likesReceived,\n    mood_logs: moodLogCount,\n    goals: goalCount,\n    goals_completed: completedGoals,\n    saves: savedCount,\n    streak: currentStreak,\n    followers: followerCount\n  };\n\n\n  const knownCriteriaTypes = ['posts', 'comments', 'likes_received', 'mood_logs', 'goals', 'goals_completed', 'saves', 'streak', 'profile_complete', 'followers'];\n\n\n  const newBadges = [];\n  for (const achievement of allAchievements) {\n    if (unlockedIds.has(achievement.id)) continue;\n\n    let criteria;\n    try {\n      criteria = typeof achievement.criteria === 'string' ? JSON.parse(achievement.criteria) : achievement.criteria;\n    } catch (e) {\n      continue;\n    }\n    if (!criteria || Object.keys(criteria).length === 0) continue;\n\n\n    const criteriaKeys = Object.keys(criteria);\n    const hasUnknownCriteria = criteriaKeys.some(key => !knownCriteriaTypes.includes(key));\n    if (hasUnknownCriteria) continue;\n\n    let earned = true;\n\n    if (criteria.posts !== undefined && stats.posts < criteria.posts) earned = false;\n    if (criteria.comments !== undefined && stats.comments < criteria.comments) earned = false;\n    if (criteria.likes_received !== undefined && stats.likes_received < criteria.likes_received) earned = false;\n    if (criteria.mood_logs !== undefined && stats.mood_logs < criteria.mood_logs) earned = false;\n    if (criteria.goals !== undefined && stats.goals < criteria.goals) earned = false;\n    if (criteria.goals_completed !== undefined && stats.goals_completed < criteria.goals_completed) earned = false;\n    if (criteria.saves !== undefined && stats.saves < criteria.saves) earned = false;\n    if (criteria.streak !== undefined && stats.streak < criteria.streak) earned = false;\n    if (criteria.followers !== undefined && stats.followers < criteria.followers) earned = false;\n\n\n    if (criteria.profile_complete !== undefined) {\n      const hasAvatar = userProfile?.avatar_url && userProfile.avatar_url.trim() !== '';\n      const hasBio = userProfile?.bio && userProfile.bio.trim() !== '';\n\n\n      let socialLinks = userProfile?.social_links || {};\n      if (typeof socialLinks === 'string') {\n        try {\n          socialLinks = JSON.parse(socialLinks);\n        } catch (e) {\n          socialLinks = {};\n        }\n      }\n      const hasSocialLinks = Object.values(socialLinks).some(link => link && String(link).trim() !== '');\n\n      if (!hasAvatar || !hasBio || !hasSocialLinks) {\n        earned = false;\n      }\n    }\n\n    if (earned) {\n      newBadges.push({\n        user_id: currentUser.id,\n        achievement_id: achievement.id,\n        unlocked_at: new Date().toISOString()\n      });\n    }\n  }\n\n\n  if (newBadges.length > 0) {\n    await supabaseClient.from('user_achievements').insert(newBadges);\n\n    const notifications = newBadges.map(badge => {\n      const achievement = allAchievements.find(a => a.id === badge.achievement_id);\n      return {\n        user_id: currentUser.id,\n        type: 'achievement',\n        from_user_name: 'MindBalance',\n        content: `You earned the \"${achievement?.name || 'Achievement'}\" badge: ${achievement?.description || ''}`,\n        read: false\n      };\n    });\n\n    try {\n      await supabaseClient.from('notifications').insert(notifications);\n    } catch (notifErr) {\n      console.warn('Failed to create achievement notifications:', notifErr);\n    }\n    loadAchievements();\n  }\n}\n\n// --- Saved Articles ---\nasync function loadSavedArticles() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const savedContainer = document.getElementById('savedItems');\n  if (!savedContainer) return;\n\n  try {\n    const { data: articles, error } = await supabaseClient\n      .from('saved_articles')\n      .select('*')\n      .eq('user_id', currentUser.id)\n      .order('saved_at', { ascending: false });\n\n    if (error || !articles || articles.length === 0) {\n      savedContainer.innerHTML = '';\n      savedContainer.appendChild(createEmptyState('bookmark-outline', 'No saved articles yet', '../blog/', 'Browse articles'));\n      return;\n    }\n\n    savedContainer.innerHTML = '';\n    articles.forEach(article => {\n      savedContainer.appendChild(createSavedArticleCard(article));\n    });\n  } catch (err) {\n    console.error('Error loading saved articles:', err);\n    savedContainer.innerHTML = '';\n    savedContainer.appendChild(createEmptyState('alert-circle-outline', 'Could not load saved articles'));\n  }\n}\n\n\n// ==================== WELLNESS ====================\nlet selectedMood = null;\n\nfunction setupMoodSelector() {\n  const moodBtns = document.querySelectorAll('.mb-profile__mood-btn');\n  const logBtn = document.getElementById('logMoodBtn');\n\n  moodBtns.forEach(btn => {\n    btn.addEventListener('click', () => {\n      moodBtns.forEach(b => b.classList.remove('is-selected'));\n      btn.classList.add('is-selected');\n      selectedMood = {\n        score: parseInt(btn.dataset.mood),\n        emoji: btn.dataset.emoji\n      };\n    });\n  });\n\n  logBtn?.addEventListener('click', logMood);\n}\n\nasync function logMood() {\n  if (!currentUser || !selectedMood) {\n    ToastManager.warning('Please select a mood first');\n    return;\n  }\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const note = document.getElementById('moodNote').value.trim();\n\n  const { error } = await supabaseClient\n    .from('mood_logs')\n    .insert({\n      user_id: currentUser.id,\n      mood: selectedMood.emoji,\n      mood_score: selectedMood.score,\n      note: note || null\n    });\n\n  if (error) {\n    console.error('Error logging mood:', error);\n    ToastManager.error('Failed to log mood. Please try again.');\n    return;\n  }\n\n  ToastManager.success('Mood logged successfully!');\n\n  document.getElementById('moodNote').value = '';\n  document.querySelectorAll('.mb-profile__mood-btn').forEach(b => b.classList.remove('is-selected'));\n  selectedMood = null;\n\n  loadMoodHistory();\n\n  checkAndAwardBadges();\n}\n\n// --- Mood History ---\nlet moodHistoryOffset = 0;\nconst MOOD_PAGE_SIZE = 9;\n\nasync function loadMoodHistory(loadMore = false) {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const chart = document.getElementById('moodChart');\n\n  if (!loadMore) {\n    moodHistoryOffset = 0;\n  }\n\n  const { data: moods, error } = await supabaseClient\n    .from('mood_logs')\n    .select('*')\n    .eq('user_id', currentUser.id)\n    .order('created_at', { ascending: false })\n    .range(moodHistoryOffset, moodHistoryOffset + MOOD_PAGE_SIZE - 1);\n\n  const { count: totalCount } = await supabaseClient\n    .from('mood_logs')\n    .select('*', { count: 'exact', head: true })\n    .eq('user_id', currentUser.id);\n\n  const thirtyDaysAgo = new Date();\n  thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n\n  const { data: allMoods } = await supabaseClient\n    .from('mood_logs')\n    .select('*')\n    .eq('user_id', currentUser.id)\n    .gte('created_at', thirtyDaysAgo.toISOString())\n    .order('created_at', { ascending: true });\n\n  if (error || !moods || moods.length === 0) {\n    if (!loadMore) {\n      chart.innerHTML = '';\n      chart.appendChild(createSafeElement('p', 'mb-profile__mood-empty', 'No mood entries yet. Start tracking today!'));\n      hideInsights();\n    }\n    return;\n  }\n\n  const moodEmojis = {\n    'very_sad': 'ðŸ˜¢',\n    'sad': 'ðŸ˜”',\n    'neutral': 'ðŸ˜',\n    'happy': 'ðŸ˜Š',\n    'very_happy': 'ðŸ˜„',\n    'calm': 'ðŸ˜Œ',\n    'okay': 'ðŸ˜',\n    'anxious': 'ðŸ˜°',\n    'stressed': 'ðŸ˜¤'\n  };\n\n  if (!loadMore) {\n    chart.innerHTML = '';\n    chart.classList.add('mb-profile__mood-entries');\n\n    const countBar = createSafeElement('div', 'mood-count-bar');\n    countBar.textContent = `Showing ${Math.min(MOOD_PAGE_SIZE, totalCount)} of ${totalCount} entries`;\n    chart.appendChild(countBar);\n  } else {\n    const existingLoadMore = chart.querySelector('.mood-load-more-wrapper');\n    if (existingLoadMore) existingLoadMore.remove();\n    const existingCount = chart.querySelector('.mood-count-bar');\n    if (existingCount) {\n      existingCount.textContent = `Showing ${moodHistoryOffset + moods.length} of ${totalCount} entries`;\n    }\n  }\n\n  const moodLevels = {\n    'very_sad': 1,\n    'sad': 2,\n    'neutral': 3,\n    'happy': 4,\n    'very_happy': 5,\n    'calm': 4,\n    'okay': 3,\n    'anxious': 2,\n    'stressed': 2\n  };\n\n  moods.reverse().forEach(mood => {\n    const date = new Date(mood.created_at);\n    const dayName = date.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });\n    const timeStr = date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });\n    const emoji = moodEmojis[mood.mood] || 'ðŸ˜';\n    const moodLevel = moodLevels[mood.mood] || 3;\n    const moodLabels = { 1: 'Very Bad', 2: 'Bad', 3: 'Okay', 4: 'Good', 5: 'Great' };\n    const moodLabel = moodLabels[moodLevel];\n\n    const card = createSafeElement('div', 'mood-entry-card');\n    card.setAttribute('data-mood', moodLevel);\n\n    const emojiContainer = createSafeElement('div', 'mood-entry-emoji');\n    const emojiSpan = createSafeElement('span', 'mood-emoji-large', emoji);\n    emojiContainer.appendChild(emojiSpan);\n\n    const contentDiv = createSafeElement('div', 'mood-entry-content');\n\n    const headerDiv = createSafeElement('div', 'mood-entry-header');\n    const moodLabelSpan = createSafeElement('span', 'mood-label', moodLabel);\n    const timeSpan = createSafeElement('span', 'mood-time', timeStr);\n    headerDiv.appendChild(moodLabelSpan);\n    headerDiv.appendChild(timeSpan);\n\n    const dateSpan = createSafeElement('span', 'mood-date', dayName);\n\n    contentDiv.appendChild(headerDiv);\n    contentDiv.appendChild(dateSpan);\n\n    if (mood.note) {\n      const noteDiv = createSafeElement('div', 'mood-note-preview');\n      const noteIcon = createSafeElement('ion-icon');\n      noteIcon.setAttribute('name', 'chatbubble-outline');\n      noteDiv.appendChild(noteIcon);\n      const noteText = createSafeElement('span', '', mood.note);\n      noteDiv.appendChild(noteText);\n      contentDiv.appendChild(noteDiv);\n    }\n\n    card.appendChild(emojiContainer);\n    card.appendChild(contentDiv);\n\n    if (isOwnProfile) {\n      const deleteBtn = createSafeElement('button', 'mood-entry-delete');\n      const delIcon = document.createElement('ion-icon');\n      delIcon.setAttribute('name', 'trash-outline');\n      deleteBtn.appendChild(delIcon);\n      deleteBtn.onclick = async (e) => {\n        e.stopPropagation();\n        if (!confirm('Delete this mood entry?')) return;\n        const supabaseClient = getSupabaseClient();\n        if (!supabaseClient) return;\n        const { error } = await supabaseClient\n          .from('mood_logs')\n          .delete()\n          .eq('id', mood.id)\n          .eq('user_id', currentUser.id);\n        if (!error) {\n          if (typeof showToast === 'function') showToast('Mood entry deleted', 'success');\n          loadMoodHistory();\n        }\n      };\n      card.appendChild(deleteBtn);\n    }\n\n    chart.appendChild(card);\n  });\n\n  moodHistoryOffset += moods.length;\n\n  if (moodHistoryOffset < totalCount) {\n    const loadMoreWrapper = createSafeElement('div', 'mood-load-more-wrapper');\n    const loadMoreBtn = createSafeElement('button', 'mood-load-more-btn', `Load More (${totalCount - moodHistoryOffset} remaining)`);\n    loadMoreBtn.onclick = () => loadMoodHistory(true);\n    loadMoreWrapper.appendChild(loadMoreBtn);\n    chart.appendChild(loadMoreWrapper);\n  }\n\n  if (!loadMore) {\n    updateMoodInsights(allMoods || moods, totalCount || moods.length);\n  }\n}\n\nfunction hideInsights() {\n  const insightsEl = document.getElementById('moodInsights');\n  if (insightsEl) insightsEl.style.display = 'none';\n}\n\nfunction updateMoodInsights(moods, totalCount) {\n  const insightsEl = document.getElementById('moodInsights');\n  if (!insightsEl || moods.length === 0) {\n    if (insightsEl) insightsEl.style.display = 'none';\n    return;\n  }\n\n  insightsEl.style.display = 'block';\n\n  const moodScores = {\n    'very_sad': 1,\n    'sad': 2,\n    'neutral': 3,\n    'happy': 4,\n    'very_happy': 5\n  };\n\n  const moodEmojis = {\n    1: 'ðŸ˜¢', 2: 'ðŸ˜”', 3: 'ðŸ˜', 4: 'ðŸ˜Š', 5: 'ðŸ˜„'\n  };\n\n\n  const scores = moods.map(m => moodScores[m.mood] || 3);\n  const avgScore = scores.reduce((a, b) => a + b, 0) / scores.length;\n  const avgMoodEl = document.getElementById('avgMoodValue');\n  if (avgMoodEl) {\n    const avgEmoji = moodEmojis[Math.round(avgScore)] || 'ðŸ˜';\n    avgMoodEl.textContent = avgEmoji;\n  }\n\n\n  const dayMoods = {};\n  moods.forEach(m => {\n    const day = new Date(m.created_at).toLocaleDateString('en-US', { weekday: 'short' });\n    if (!dayMoods[day]) dayMoods[day] = [];\n    dayMoods[day].push(moodScores[m.mood] || 3);\n  });\n\n  let bestDay = '--';\n  let bestDayAvg = 0;\n  Object.entries(dayMoods).forEach(([day, scores]) => {\n    const avg = scores.reduce((a, b) => a + b, 0) / scores.length;\n    if (avg > bestDayAvg) {\n      bestDayAvg = avg;\n      bestDay = day;\n    }\n  });\n\n  const bestDayEl = document.getElementById('bestDayValue');\n  if (bestDayEl) bestDayEl.textContent = bestDay;\n\n\n  const totalEntriesEl = document.getElementById('totalEntriesValue');\n  if (totalEntriesEl) totalEntriesEl.textContent = totalCount;\n\n\n  const trendEl = document.getElementById('moodTrendValue');\n  if (trendEl && moods.length >= 3) {\n    const halfPoint = Math.floor(moods.length / 2);\n    const recentMoods = moods.slice(halfPoint);\n    const olderMoods = moods.slice(0, halfPoint);\n\n    const recentAvg = recentMoods.map(m => moodScores[m.mood] || 3).reduce((a, b) => a + b, 0) / recentMoods.length;\n    const olderAvg = olderMoods.map(m => moodScores[m.mood] || 3).reduce((a, b) => a + b, 0) / olderMoods.length;\n\n    const diff = recentAvg - olderAvg;\n    if (diff > 0.3) {\n      trendEl.textContent = 'ðŸ“ˆ';\n      trendEl.title = 'Improving';\n    } else if (diff < -0.3) {\n      trendEl.textContent = 'ðŸ“‰';\n      trendEl.title = 'Declining';\n    } else {\n      trendEl.textContent = 'âž¡ï¸';\n      trendEl.title = 'Stable';\n    }\n  } else if (trendEl) {\n    trendEl.textContent = 'âž¡ï¸';\n    trendEl.title = 'Stable';\n  }\n\n\n  updateMoodLineChart(moods);\n\n\n  updateMoodDistribution(moods);\n}\n\n// --- Mood Charts ---\nfunction updateMoodLineChart(moods) {\n  const svgEl = document.getElementById('moodSvg');\n  const lineEl = document.getElementById('moodLine');\n  const areaEl = document.getElementById('moodArea');\n  const dotsEl = document.getElementById('moodDots');\n  const xAxisEl = document.getElementById('moodXAxis');\n\n  if (!svgEl || !lineEl || !areaEl || !dotsEl || moods.length === 0) return;\n\n  const moodScores = {\n    'very_sad': 1,\n    'sad': 2,\n    'neutral': 3,\n    'happy': 4,\n    'very_happy': 5\n  };\n\n\n  const chartMoods = moods.slice(-14);\n\n  const width = 400;\n  const height = 120;\n  const padding = 10;\n\n  const xStep = (width - padding * 2) / (chartMoods.length - 1 || 1);\n\n\n  const points = chartMoods.map((mood, i) => {\n    const x = padding + i * xStep;\n    const score = moodScores[mood.mood] || 3;\n    const y = height - padding - ((score - 1) / 4) * (height - padding * 2);\n    return { x, y, score, date: mood.created_at, note: mood.note };\n  });\n\n\n  if (points.length > 1) {\n    const linePath = points.map((p, i) => `${i === 0 ? 'M' : 'L'} ${p.x} ${p.y}`).join(' ');\n    lineEl.setAttribute('d', linePath);\n\n\n    const areaPath = `${linePath} L ${points[points.length - 1].x} ${height} L ${points[0].x} ${height} Z`;\n    areaEl.setAttribute('d', areaPath);\n  } else if (points.length === 1) {\n    lineEl.setAttribute('d', `M ${points[0].x} ${points[0].y} L ${points[0].x} ${points[0].y}`);\n    areaEl.setAttribute('d', '');\n  }\n\n\n  dotsEl.innerHTML = '';\n  points.forEach((p, i) => {\n    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n    circle.setAttribute('cx', p.x);\n    circle.setAttribute('cy', p.y);\n    circle.setAttribute('r', 5);\n    const dateStr = new Date(p.date).toLocaleDateString();\n    circle.setAttribute('title', `${dateStr}${p.note ? ': ' + p.note : ''}`);\n    dotsEl.appendChild(circle);\n  });\n\n\n  if (xAxisEl) {\n    xAxisEl.innerHTML = '';\n    const showLabels = chartMoods.length <= 7 ? chartMoods : chartMoods.filter((_, i) => i % 2 === 0 || i === chartMoods.length - 1);\n    showLabels.forEach((mood, i) => {\n      const span = document.createElement('span');\n      span.textContent = new Date(mood.created_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n      xAxisEl.appendChild(span);\n    });\n  }\n}\n\nfunction updateMoodDistribution(moods) {\n  const distribution = {\n    'very_happy': 0,\n    'happy': 0,\n    'neutral': 0,\n    'sad': 0,\n    'very_sad': 0\n  };\n\n  moods.forEach(m => {\n    if (distribution.hasOwnProperty(m.mood)) {\n      distribution[m.mood]++;\n    }\n  });\n\n  const total = moods.length;\n  const maxCount = Math.max(...Object.values(distribution), 1);\n\n\n  const barMappings = {\n    'very_happy': { bar: 'moodBarVeryHappy', count: 'moodCountVeryHappy' },\n    'happy': { bar: 'moodBarHappy', count: 'moodCountHappy' },\n    'neutral': { bar: 'moodBarNeutral', count: 'moodCountNeutral' },\n    'sad': { bar: 'moodBarSad', count: 'moodCountSad' },\n    'very_sad': { bar: 'moodBarVerySad', count: 'moodCountVerySad' }\n  };\n\n  Object.entries(barMappings).forEach(([mood, ids]) => {\n    const barEl = document.getElementById(ids.bar);\n    const countEl = document.getElementById(ids.count);\n    const count = distribution[mood];\n    const percentage = (count / maxCount) * 100;\n\n    if (barEl) {\n      setTimeout(() => {\n        barEl.style.width = `${percentage}%`;\n      }, 100);\n    }\n    if (countEl) countEl.textContent = count;\n  });\n}\n\n\n// ==================== GOALS ====================\nfunction setupGoals() {\n  const addBtn = document.getElementById('addGoalBtn');\n  addBtn?.addEventListener('click', addGoal);\n}\n\nasync function loadGoals() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const list = document.getElementById('goalsList');\n\n  const { data: goals, error } = await supabaseClient\n    .from('wellness_goals')\n    .select('*')\n    .eq('user_id', currentUser.id)\n    .order('created_at', { ascending: false });\n\n  if (error || !goals || goals.length === 0) {\n    list.innerHTML = `\n      <div class=\"mb-profile__goals-empty\">\n        <span class=\"empty-icon\">ðŸŽ¯</span>\n        <h4>No goals yet</h4>\n        <p>Set a wellness goal to get started</p>\n      </div>\n    `;\n    return;\n  }\n\n  list.innerHTML = '';\n  goals.forEach(goal => {\n    list.appendChild(createGoalItem(goal));\n  });\n}\n\nasync function addGoal() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const titleInput = document.getElementById('goalTitle');\n  const categorySelect = document.getElementById('goalCategory');\n\n  const title = titleInput.value.trim();\n  const category = categorySelect.value;\n\n  if (!title) {\n    ToastManager.warning('Please enter a goal title');\n    return;\n  }\n\n  const { error } = await supabaseClient\n    .from('wellness_goals')\n    .insert({\n      user_id: currentUser.id,\n      title: title,\n      category: category\n    });\n\n  if (error) {\n    console.error('Error adding goal:', error);\n    ToastManager.error('Failed to add goal. Please try again.');\n    return;\n  }\n\n  titleInput.value = '';\n  loadGoals();\n}\n\nasync function toggleGoalComplete(goalId, completed) {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const updateData = { completed };\n  if (completed) {\n    updateData.completed_at = new Date().toISOString();\n  } else {\n    updateData.completed_at = null;\n  }\n\n  const { error } = await supabaseClient\n    .from('wellness_goals')\n    .update(updateData)\n    .eq('id', goalId)\n    .eq('user_id', currentUser.id);\n\n  if (error) {\n    console.error('Error updating goal:', error);\n    return;\n  }\n\n  loadGoals();\n}\n\nasync function deleteGoal(goalId) {\n  if (!currentUser) return;\n  if (!confirm('Are you sure you want to delete this goal?')) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const { error } = await supabaseClient\n    .from('wellness_goals')\n    .delete()\n    .eq('id', goalId)\n    .eq('user_id', currentUser.id);\n\n  if (error) {\n    console.error('Error deleting goal:', error);\n    return;\n  }\n\n  loadGoals();\n}\n\n// --- Streaks ---\nasync function loadStreak() {\n  if (!currentUser || !userProfile) return;\n\n\n  const streakEl = document.getElementById('streakNumber');\n  const bestEl = document.getElementById('bestStreak');\n  if (streakEl) streakEl.textContent = userProfile.current_streak || 0;\n  if (bestEl) bestEl.textContent = userProfile.longest_streak || 0;\n\n\n  await loadStreakCalendar();\n}\n\nasync function loadStreakCalendar() {\n  const calendarEl = document.getElementById('streakCalendar');\n  if (!calendarEl) return;\n\n\n  const targetUserId = viewedUserId || (currentUser ? currentUser.id : null);\n  if (!targetUserId) return;\n\n\n  let engagementDays = [];\n\n\n  if (window.MindBalanceAuth && window.MindBalanceAuth.getReadingCalendar) {\n    engagementDays = await window.MindBalanceAuth.getReadingCalendar(targetUserId, 28);\n  } else {\n\n    const supabaseClient = getSupabaseClient();\n    if (supabaseClient) {\n      const startDate = new Date();\n      startDate.setDate(startDate.getDate() - 28);\n\n      const { data } = await supabaseClient\n        .from('user_engagement')\n        .select('visit_date, articles_read')\n        .eq('user_id', targetUserId)\n        .gte('visit_date', startDate.toISOString().split('T')[0])\n        .order('visit_date', { ascending: true });\n\n      engagementDays = data || [];\n    }\n  }\n\n\n  const activityMap = new Map();\n  engagementDays.forEach(d => {\n    activityMap.set(d.visit_date, d.articles_read || 1);\n  });\n\n\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n\n  calendarEl.innerHTML = '';\n\n  const headerRow = document.createElement('div');\n  headerRow.className = 'streak-calendar-header';\n  const dayLabels = ['M', 'T', 'W', 'T', 'F', 'S', 'S'];\n  dayLabels.forEach(label => {\n    const labelEl = document.createElement('span');\n    labelEl.className = 'streak-day-label';\n    labelEl.textContent = label;\n    headerRow.appendChild(labelEl);\n  });\n  calendarEl.appendChild(headerRow);\n\n  const gridEl = document.createElement('div');\n  gridEl.className = 'streak-calendar-grid';\n\n  for (let i = 27; i >= 0; i--) {\n    const date = new Date(today);\n    date.setDate(date.getDate() - i);\n    const dateStr = date.toISOString().split('T')[0];\n    const articles = activityMap.get(dateStr) || 0;\n\n    const dayEl = document.createElement('div');\n    dayEl.className = 'streak-day';\n\n    let activityLevel = 0;\n    if (articles > 0) {\n      if (articles >= 5) activityLevel = 4;\n      else if (articles >= 3) activityLevel = 3;\n      else if (articles >= 2) activityLevel = 2;\n      else activityLevel = 1;\n      dayEl.classList.add(`active-${activityLevel}`);\n    }\n\n    if (i === 0) {\n      dayEl.classList.add('today');\n    }\n\n    const tooltip = document.createElement('span');\n    tooltip.className = 'streak-tooltip';\n    const dateLabel = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n    tooltip.textContent = articles > 0\n      ? `${dateLabel}: ${articles} article${articles > 1 ? 's' : ''}`\n      : `${dateLabel}: No activity`;\n    dayEl.appendChild(tooltip);\n\n    gridEl.appendChild(dayEl);\n  }\n\n  calendarEl.appendChild(gridEl);\n\n\n  updateStreakMilestones(userProfile?.current_streak || 0);\n}\n\nfunction updateStreakMilestones(currentStreak) {\n  const milestones = document.querySelectorAll('.streak-milestone');\n  milestones.forEach(milestone => {\n    const days = parseInt(milestone.getAttribute('data-days')) || 0;\n    milestone.classList.remove('achieved', 'locked');\n    if (currentStreak >= days) {\n      milestone.classList.add('achieved');\n    } else {\n      milestone.classList.add('locked');\n    }\n  });\n\n  const calendarEl = document.getElementById('streakCalendar');\n  if (!calendarEl) return;\n  const calendarParent = calendarEl.closest('.mb-profile__streak-calendar');\n  if (!calendarParent) return;\n  let badgeContainer = calendarParent.querySelector('.streak-milestone-badges');\n  if (badgeContainer) badgeContainer.remove();\n\n  badgeContainer = createSafeElement('div', 'streak-milestone-badges');\n  const milestoneList = [\n    { days: 3, icon: '\\u{1F525}', label: '3 Days' },\n    { days: 7, icon: '\\u{2B50}', label: '1 Week' },\n    { days: 14, icon: '\\u{1F4AA}', label: '2 Weeks' },\n    { days: 30, icon: '\\u{1F3C6}', label: '1 Month' },\n    { days: 60, icon: '\\u{1F48E}', label: '2 Months' },\n    { days: 100, icon: '\\u{1F451}', label: '100 Days' }\n  ];\n\n  milestoneList.forEach(m => {\n    const badge = createSafeElement('div', 'streak-milestone-badge');\n    if (currentStreak >= m.days) badge.classList.add('earned');\n    badge.textContent = `${m.icon} ${m.label}`;\n    badgeContainer.appendChild(badge);\n  });\n\n  calendarParent.appendChild(badgeContainer);\n}\n\n\nwindow.addEventListener('mindbalance:streakupdated', (e) => {\n  const { currentStreak, longestStreak } = e.detail;\n\n  const streakEl = document.getElementById('streakNumber');\n  const bestEl = document.getElementById('bestStreak');\n\n  if (streakEl) streakEl.textContent = currentStreak || 0;\n  if (bestEl) bestEl.textContent = longestStreak || 0;\n\n\n  loadStreakCalendar();\n});\n\n\n\n// ==================== REALTIME ====================\nlet realtimeSubscription = null;\n\nfunction setupRealtimeSubscriptions(userId) {\n  if (!userId || !isOwnProfile) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n\n  if (realtimeSubscription) {\n    supabaseClient.removeChannel(realtimeSubscription);\n  }\n\n\n  realtimeSubscription = supabaseClient\n    .channel(`profile-${userId}`)\n    .on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'profiles',\n      filter: `id=eq.${userId}`\n    }, (payload) => {\n      console.log('Profile updated:', payload);\n      if (payload.new) {\n\n        const streakEl = document.getElementById('streakNumber');\n        const bestEl = document.getElementById('bestStreak');\n        if (streakEl && payload.new.current_streak !== undefined) {\n          streakEl.textContent = payload.new.current_streak || 0;\n        }\n        if (bestEl && payload.new.longest_streak !== undefined) {\n          bestEl.textContent = payload.new.longest_streak || 0;\n        }\n      }\n    })\n    .on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'user_engagement',\n      filter: `user_id=eq.${userId}`\n    }, (payload) => {\n      console.log('Engagement updated:', payload);\n\n      loadStreakCalendar();\n    })\n    .on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'posts',\n      filter: `author_id=eq.${userId}`\n    }, () => {\n\n      loadStatsData(userId);\n    })\n    .on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'post_comments',\n      filter: `author_id=eq.${userId}`\n    }, () => {\n\n      loadStatsData(userId);\n    })\n    .subscribe((status) => {\n      console.log('Realtime subscription status:', status);\n    });\n}\n\n\nwindow.addEventListener('beforeunload', () => {\n  if (realtimeSubscription) {\n    const supabaseClient = getSupabaseClient();\n    if (supabaseClient) {\n      supabaseClient.removeChannel(realtimeSubscription);\n    }\n  }\n});\n\n\n// ==================== ACTIVITY FILTERS ====================\nfunction setupActivityFilters() {\n  const filterBtns = document.querySelectorAll('.mb-profile__filter');\n\n  filterBtns.forEach(btn => {\n    btn.addEventListener('click', () => {\n      filterBtns.forEach(b => b.classList.remove('is-active'));\n      btn.classList.add('is-active');\n\n      const filter = btn.dataset.filter;\n      filterActivities(filter);\n    });\n  });\n}\n\nfunction filterActivities(filter) {\n  const activityFeed = document.getElementById('activityFeed');\n\n  let filtered = allActivities;\n  if (filter === 'posts') {\n    filtered = allActivities.filter(a => a.type === 'post');\n  } else if (filter === 'comments') {\n    filtered = allActivities.filter(a => a.type === 'comment');\n  }\n\n  if (filtered.length === 0) {\n    const message = filter === 'all' ? 'activity' : filter;\n    activityFeed.innerHTML = '';\n    if (isOwnProfile) {\n      activityFeed.appendChild(createEmptyState('newspaper-outline', `No ${message} yet`, '../community/', 'Join the conversation'));\n    } else {\n      const viewedName = document.getElementById('profileName')?.textContent || 'This user';\n      activityFeed.appendChild(createEmptyState('newspaper-outline', `${viewedName} has no ${message} yet`, null, null));\n    }\n    return;\n  }\n\n  activityFeed.innerHTML = '';\n  filtered.forEach(activity => {\n    activityFeed.appendChild(createActivityItem(activity));\n  });\n}\n\n\n// ==================== SOCIAL LINKS ====================\nfunction setupSocialLinks() {\n  const saveBtn = document.getElementById('saveSocialBtn');\n  saveBtn?.addEventListener('click', saveSocialLinks);\n}\n\nasync function saveSocialLinks() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const website = document.getElementById('settingsWebsite').value.trim();\n  const twitter = document.getElementById('settingsTwitter').value.trim();\n  const instagram = document.getElementById('settingsInstagram').value.trim();\n\n  const socialLinks = { website, twitter, instagram };\n\n  const { error } = await supabaseClient\n    .from('profiles')\n    .upsert({\n      id: currentUser.id,\n      social_links: socialLinks,\n      updated_at: new Date().toISOString()\n    }, { onConflict: 'id' });\n\n  if (error) {\n    console.error('Error saving social links:', error);\n    ToastManager.error('Failed to save social links. Please try again.');\n    return;\n  }\n\n  userProfile = { ...userProfile, social_links: socialLinks };\n\n\n  updateProfileCompletion(userProfile);\n\n\n  const websiteLink = document.getElementById('socialWebsite');\n  const twitterLink = document.getElementById('socialTwitter');\n  const instaLink = document.getElementById('socialInstagram');\n\n  if (websiteLink) {\n    websiteLink.href = website || '#';\n    websiteLink.hidden = !website;\n  }\n  if (twitterLink && twitter) {\n    const handle = twitter.replace(/[^a-zA-Z0-9_]/g, '');\n    twitterLink.href = 'https://twitter.com/' + handle;\n    twitterLink.hidden = !handle;\n  } else if (twitterLink) {\n    twitterLink.hidden = true;\n  }\n  if (instaLink && instagram) {\n    const handle = instagram.replace(/[^a-zA-Z0-9_.]/g, '');\n    instaLink.href = 'https://instagram.com/' + handle;\n    instaLink.hidden = !handle;\n  } else if (instaLink) {\n    instaLink.hidden = true;\n  }\n\n  updateSocialLinksVisibility();\n  ToastManager.success('Social links saved!');\n}\n\n\n// ==================== PRIVACY ====================\nfunction setupPrivacySettings() {\n  const saveBtn = document.getElementById('savePrivacyBtn');\n  saveBtn?.addEventListener('click', savePrivacySettings);\n}\n\nasync function savePrivacySettings() {\n  if (!currentUser) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const isPublic = document.getElementById('publicProfile').checked;\n  const showActivity = document.getElementById('showActivity').checked;\n  const showSaved = document.getElementById('showSaved').checked;\n\n  const { error } = await supabaseClient\n    .from('profiles')\n    .upsert({\n      id: currentUser.id,\n      is_public: isPublic,\n      show_activity: showActivity,\n      show_saved: showSaved,\n      updated_at: new Date().toISOString()\n    }, { onConflict: 'id' });\n\n  if (error) {\n    console.error('Error saving privacy settings:', error);\n    ToastManager.error('Failed to save privacy settings. Please try again.');\n    return;\n  }\n\n  userProfile = { ...userProfile, is_public: isPublic, show_activity: showActivity, show_saved: showSaved };\n  ToastManager.success('Privacy settings saved!');\n}\n\n\n\n// ==================== REPUTATION ====================\nasync function loadReputationPoints() {\n  if (currentUser) {\n    loadReputationPointsData(currentUser.id);\n  }\n}\n\nasync function loadReputationPointsData(userId) {\n  if (!userId) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  let totalRep = 0;\n\n  const { data: posts } = await supabaseClient\n    .from('posts')\n    .select('like_count')\n    .eq('author_id', userId);\n\n  if (posts) {\n    totalRep += posts.reduce((sum, p) => sum + (p.like_count || 0) * 2, 0);\n  }\n\n  const { count: repCommentCount } = await supabaseClient\n    .from('post_comments')\n    .select('*', { count: 'exact', head: true })\n    .eq('author_id', userId);\n\n  totalRep += (repCommentCount || 0);\n\n  const { data: achievements } = await supabaseClient\n    .from('user_achievements')\n    .select('achievements(points)')\n    .eq('user_id', userId);\n\n  if (achievements) {\n    totalRep += achievements.reduce((sum, a) => sum + (a.achievements?.points || 0), 0);\n  }\n\n  document.getElementById('reputationPoints').textContent = totalRep;\n\n\n  if (isOwnProfile && currentUser && currentUser.id === userId) {\n    await supabaseClient\n      .from('profiles')\n      .upsert({\n        id: userId,\n        reputation_points: totalRep,\n        updated_at: new Date().toISOString()\n      }, { onConflict: 'id' });\n  }\n}\n\n\n\n// ==================== FOLLOW SYSTEM ====================\nasync function checkFollowStatus() {\n  if (!currentUser || !viewedUserId || isOwnProfile) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const { data: follow } = await supabaseClient\n    .from('followers')\n    .select('id')\n    .eq('follower_id', currentUser.id)\n    .eq('following_id', viewedUserId)\n    .single();\n\n  const followBtn = document.getElementById('followBtn');\n  if (followBtn) {\n    if (follow) {\n      followBtn.classList.add('is-following');\n      followBtn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon> Following';\n    } else {\n      followBtn.classList.remove('is-following');\n      followBtn.innerHTML = '<ion-icon name=\"add-outline\"></ion-icon> Follow';\n    }\n  }\n}\n\nasync function toggleFollow() {\n  if (!currentUser) {\n\n    window.location.href = '../auth/?redirect=' + encodeURIComponent(window.location.href);\n    return;\n  }\n\n  if (!viewedUserId || isOwnProfile) return;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const followBtn = document.getElementById('followBtn');\n  if (!followBtn) return;\n\n  const isFollowing = followBtn.classList.contains('is-following');\n\n  followBtn.disabled = true;\n\n  try {\n    if (isFollowing) {\n\n      await supabaseClient\n        .from('followers')\n        .delete()\n        .eq('follower_id', currentUser.id)\n        .eq('following_id', viewedUserId);\n\n      followBtn.classList.remove('is-following');\n      followBtn.innerHTML = '<ion-icon name=\"add-outline\"></ion-icon> Follow';\n    } else {\n\n      await supabaseClient\n        .from('followers')\n        .insert({\n          follower_id: currentUser.id,\n          following_id: viewedUserId\n        });\n\n      followBtn.classList.add('is-following');\n      followBtn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon> Following';\n\n      const fromName = currentUser.user_metadata?.display_name || currentUser.email?.split('@')[0] || 'Someone';\n      try {\n        await supabaseClient.from('notifications').insert({\n          user_id: viewedUserId,\n          type: 'follow',\n          from_user_name: fromName,\n          content: `${fromName} started following you`,\n          read: false\n        });\n      } catch (notifErr) {\n        console.warn('Failed to create follow notification:', notifErr);\n      }\n    }\n\n\n    loadFollowerCountsData(viewedUserId);\n  } catch (err) {\n    console.error('Follow error:', err);\n  } finally {\n    followBtn.disabled = false;\n  }\n}\n\n\nwindow.toggleGoalComplete = toggleGoalComplete;\nwindow.deleteGoal = deleteGoal;\nwindow.toggleFollow = toggleFollow;\n\n\n\n// ==================== PROFILE COMPLETION ====================\nfunction updateProfileCompletion(profile) {\n\n  let hasSocialLinks = false;\n  try {\n    if (profile.social_links) {\n      const links = typeof profile.social_links === 'string'\n        ? JSON.parse(profile.social_links)\n        : profile.social_links;\n      hasSocialLinks = Object.values(links).some(v => v);\n    }\n  } catch (e) {\n    hasSocialLinks = false;\n  }\n\n  const criteria = [\n    { name: 'avatar', check: profile.avatar_url && profile.avatar_url !== '', label: 'Add a profile photo' },\n    { name: 'cover', check: profile.cover_url && profile.cover_url !== '', label: 'Add a cover photo' },\n    { name: 'bio', check: profile.bio && profile.bio.length > 10, label: 'Write a bio (10+ chars)' },\n    { name: 'name', check: profile.display_name && profile.display_name !== '', label: 'Set your display name' },\n    { name: 'social', check: hasSocialLinks, label: 'Add social links' },\n    { name: 'theme', check: profile.theme_color && profile.theme_color !== '', label: 'Choose a theme color' }\n  ];\n\n  const completed = criteria.filter(c => c.check).length;\n  const total = criteria.length;\n  const percent = Math.round((completed / total) * 100);\n\n  const progressCircle = document.getElementById('completionProgress');\n  const percentText = document.getElementById('completionPercent');\n  const label = document.getElementById('completionLabel');\n  const ring = document.getElementById('completionRing');\n\n  if (!progressCircle || !percentText) return;\n\n  const circumference = 2 * Math.PI * 45;\n  const offset = circumference - (percent / 100) * circumference;\n\n  setTimeout(() => {\n    progressCircle.style.strokeDashoffset = offset;\n    percentText.textContent = percent + '%';\n  }, 100);\n\n  if (percent === 100) {\n    label.textContent = 'Profile complete!';\n    label.classList.add('is-complete');\n    if (ring) ring.classList.add('is-complete');\n  } else {\n    label.classList.remove('is-complete');\n    if (ring) ring.classList.remove('is-complete');\n\n    const missing = criteria.filter(c => !c.check);\n    const nextStep = missing[0];\n    label.textContent = nextStep ? nextStep.label : 'Complete your profile';\n  }\n}\n\n\n// --- Quick Actions ---\nfunction setupQuickActions() {\n  const shareBtn = document.getElementById('shareProfileBtn');\n  const viewPublicBtn = document.getElementById('viewPublicBtn');\n\n  if (shareBtn) {\n    shareBtn.addEventListener('click', async () => {\n      const profileUrl = window.location.origin + '/profile/?user=' + (userProfile?.username || currentUser?.id);\n\n      try {\n        await navigator.clipboard.writeText(profileUrl);\n        shareBtn.classList.add('is-copied');\n        shareBtn.innerHTML = '<ion-icon name=\"checkmark-outline\"></ion-icon> Copied!';\n\n        setTimeout(() => {\n          shareBtn.classList.remove('is-copied');\n          shareBtn.innerHTML = '<ion-icon name=\"share-social-outline\"></ion-icon> Share';\n        }, 2000);\n      } catch (err) {\n        prompt('Copy this link:', profileUrl);\n      }\n    });\n  }\n\n  if (viewPublicBtn) {\n    viewPublicBtn.addEventListener('click', () => {\n      showPublicProfilePreview();\n    });\n  }\n}\n\n// --- URL Validation ---\nfunction isValidUrl(url) {\n  if (!url) return false;\n  try {\n    const parsed = new URL(url, window.location.origin);\n    return ['http:', 'https:'].includes(parsed.protocol);\n  } catch {\n    return false;\n  }\n}\n\n\n// ==================== PUBLIC PROFILE PREVIEW ====================\nfunction showPublicProfilePreview() {\n  const modal = document.createElement('div');\n  modal.className = 'mb-profile__preview-modal';\n  modal.setAttribute('role', 'dialog');\n  modal.setAttribute('aria-modal', 'true');\n  modal.setAttribute('aria-labelledby', 'previewTitle');\n\n  const backdrop = document.createElement('div');\n  backdrop.className = 'preview-modal__backdrop';\n\n  const content = document.createElement('div');\n  content.className = 'preview-modal__content';\n\n  const header = document.createElement('div');\n  header.className = 'preview-modal__header';\n  const title = document.createElement('h3');\n  title.id = 'previewTitle';\n  title.textContent = 'Public Profile Preview';\n  const closeBtn = document.createElement('button');\n  closeBtn.className = 'preview-modal__close';\n  closeBtn.setAttribute('aria-label', 'Close preview');\n  closeBtn.innerHTML = '<ion-icon name=\"close-outline\"></ion-icon>';\n  header.appendChild(title);\n  header.appendChild(closeBtn);\n\n  const body = document.createElement('div');\n  body.className = 'preview-modal__body';\n\n  const card = document.createElement('div');\n  card.className = 'preview-card';\n\n  const cover = document.createElement('div');\n  cover.className = 'preview-cover';\n  if (userProfile?.cover_url && isValidUrl(userProfile.cover_url)) {\n    cover.style.backgroundImage = `url(\"${userProfile.cover_url.replace(/\"/g, '')}\")`;\n    cover.style.backgroundSize = 'cover';\n    cover.style.backgroundPosition = 'center';\n  }\n\n  const info = document.createElement('div');\n  info.className = 'preview-info';\n\n  const avatar = document.createElement('img');\n  avatar.className = 'preview-avatar';\n  avatar.alt = 'Avatar';\n  if (userProfile?.avatar_url && isValidUrl(userProfile.avatar_url)) {\n    avatar.src = userProfile.avatar_url;\n  } else {\n    avatar.src = '../assets/images/user.png';\n  }\n\n  const nameEl = document.createElement('h4');\n  nameEl.textContent = userProfile?.display_name || 'User';\n\n  const bioEl = document.createElement('p');\n  bioEl.textContent = userProfile?.bio || 'No bio yet';\n\n  const stats = document.createElement('div');\n  stats.className = 'preview-stats';\n  const postsStat = document.createElement('span');\n  postsStat.textContent = (document.getElementById('postCount')?.textContent || '0') + ' posts';\n  const followersStat = document.createElement('span');\n  followersStat.textContent = (document.getElementById('followerCount')?.textContent || '0') + ' followers';\n  stats.appendChild(postsStat);\n  stats.appendChild(followersStat);\n\n  info.appendChild(avatar);\n  info.appendChild(nameEl);\n  info.appendChild(bioEl);\n  info.appendChild(stats);\n\n  card.appendChild(cover);\n  card.appendChild(info);\n\n  const note = document.createElement('p');\n  note.className = 'preview-note';\n  note.textContent = 'This is how others see your profile when it\\'s public.';\n\n  body.appendChild(card);\n  body.appendChild(note);\n\n  content.appendChild(header);\n  content.appendChild(body);\n\n  modal.appendChild(backdrop);\n  modal.appendChild(content);\n\n  document.body.appendChild(modal);\n  setTimeout(() => modal.classList.add('is-visible'), 10);\n\n  closeBtn.focus();\n\n  backdrop.addEventListener('click', () => closePreviewModal(modal));\n  closeBtn.addEventListener('click', () => closePreviewModal(modal));\n\n  const handleKeydown = (e) => {\n    if (e.key === 'Escape') {\n      closePreviewModal(modal);\n      document.removeEventListener('keydown', handleKeydown);\n    }\n  };\n  document.addEventListener('keydown', handleKeydown);\n}\n\nfunction closePreviewModal(modal) {\n  modal.classList.remove('is-visible');\n  setTimeout(() => modal.remove(), 300);\n}\n\nfunction escapeHtml(text) {\n  const div = document.createElement('div');\n  div.textContent = text || '';\n  return div.innerHTML;\n}\n\n\ndocument.addEventListener('DOMContentLoaded', setupQuickActions);\n\n\nfunction createFollowAvatar(profile) {\n  const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--user-accent').trim() || '#5BA4E6';\n  const colors = [accentColor,'#E57373','#64B5F6','#81C784','#FFD54F','#BA68C8','#4DB6AC','#FF8A65','#90A4AE','#A1887F'];\n  if (profile.avatar_url) {\n    const avatar = document.createElement('img');\n    avatar.className = 'mb-follow-item__avatar';\n    avatar.src = profile.avatar_url;\n    avatar.alt = profile.display_name || 'User';\n    avatar.onerror = () => {\n      const parent = avatar.parentElement;\n      const initialsEl = createInitialsCircle(profile, colors, 'mb-follow-item__avatar');\n      parent.replaceChild(initialsEl, avatar);\n    };\n    return avatar;\n  }\n  return createInitialsCircle(profile, colors, 'mb-follow-item__avatar');\n}\n\nfunction createInitialsCircle(profile, colors, className) {\n  const name = profile.display_name || profile.username || profile.email || 'U';\n  const initials = name.split(' ').map(w => w[0]).join('').toUpperCase().slice(0, 2) || name.substring(0, 2).toUpperCase();\n  const colorIndex = name.charCodeAt(0) % colors.length;\n  const el = document.createElement('div');\n  el.className = className + ' mb-follow-item__avatar--initials';\n  el.textContent = initials;\n  el.style.background = colors[colorIndex];\n  el.setAttribute('aria-label', name);\n  return el;\n}\n\nasync function openFollowersModal() {\n  const modal = document.getElementById('followersModal');\n  const list = document.getElementById('followersList');\n  if (!modal || !list) return;\n\n  modal.hidden = false;\n  list.innerHTML = '<div class=\"mb-follow-modal__empty\">Loading...</div>';\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const userId = viewedUserId || (currentUser ? currentUser.id : null);\n  if (!userId) return;\n\n  let followers = [];\n  try {\n\n    const result = await supabaseClient\n      .from('followers')\n      .select('follower_id')\n      .eq('following_id', userId);\n\n    if (result.error) throw result.error;\n\n\n    if (result.data && result.data.length > 0) {\n      const followerIds = result.data.map(f => f.follower_id);\n      const profilesResult = await supabaseClient\n        .from('profiles')\n        .select('id, display_name, avatar_url, bio')\n        .in('id', followerIds);\n\n      if (profilesResult.data) {\n        followers = profilesResult.data;\n      }\n    }\n  } catch (error) {\n    console.error('Error loading followers:', error);\n    list.innerHTML = '<div class=\"mb-follow-modal__empty\">Failed to load followers</div>';\n    return;\n  }\n\n  if (!followers || followers.length === 0) {\n    list.innerHTML = '<div class=\"mb-follow-modal__empty\">No followers yet</div>';\n    return;\n  }\n\n  list.innerHTML = '';\n  followers.forEach(profile => {\n    if (!profile) return;\n\n    const item = document.createElement('div');\n    item.className = 'mb-follow-item';\n\n    const avatarEl = createFollowAvatar(profile);\n\n    const info = document.createElement('div');\n    info.className = 'mb-follow-item__info';\n\n    const nameLink = document.createElement('a');\n    nameLink.className = 'mb-follow-item__name';\n    nameLink.href = '/profile/?user=' + profile.id;\n    nameLink.textContent = profile.display_name || 'Anonymous';\n\n    const bio = document.createElement('p');\n    bio.className = 'mb-follow-item__bio';\n    bio.textContent = profile.bio || '';\n\n    info.appendChild(nameLink);\n    if (profile.bio) info.appendChild(bio);\n\n    item.appendChild(avatarEl);\n    item.appendChild(info);\n    list.appendChild(item);\n  });\n}\n\nfunction closeFollowersModal() {\n  const modal = document.getElementById('followersModal');\n  if (modal) modal.hidden = true;\n}\n\nasync function openFollowingModal() {\n  const modal = document.getElementById('followingModal');\n  const list = document.getElementById('followingList');\n  if (!modal || !list) return;\n\n  modal.hidden = false;\n  list.innerHTML = '<div class=\"mb-follow-modal__empty\">Loading...</div>';\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  const userId = viewedUserId || (currentUser ? currentUser.id : null);\n  if (!userId) return;\n\n  let following = [];\n  try {\n\n    const result = await supabaseClient\n      .from('followers')\n      .select('following_id')\n      .eq('follower_id', userId);\n\n    if (result.error) throw result.error;\n\n\n    if (result.data && result.data.length > 0) {\n      const followingIds = result.data.map(f => f.following_id);\n      const profilesResult = await supabaseClient\n        .from('profiles')\n        .select('id, display_name, avatar_url, bio')\n        .in('id', followingIds);\n\n      if (profilesResult.data) {\n        following = profilesResult.data;\n      }\n    }\n  } catch (error) {\n    console.error('Error loading following:', error);\n    list.innerHTML = '<div class=\"mb-follow-modal__empty\">Failed to load following</div>';\n    return;\n  }\n\n  if (!following || following.length === 0) {\n    list.innerHTML = '<div class=\"mb-follow-modal__empty\">Not following anyone yet</div>';\n    return;\n  }\n\n  list.innerHTML = '';\n  following.forEach(profile => {\n    if (!profile) return;\n\n    const item = document.createElement('div');\n    item.className = 'mb-follow-item';\n\n    const avatarEl = createFollowAvatar(profile);\n\n    const info = document.createElement('div');\n    info.className = 'mb-follow-item__info';\n\n    const nameLink = document.createElement('a');\n    nameLink.className = 'mb-follow-item__name';\n    nameLink.href = '/profile/?user=' + profile.id;\n    nameLink.textContent = profile.display_name || 'Anonymous';\n\n    const bio = document.createElement('p');\n    bio.className = 'mb-follow-item__bio';\n    bio.textContent = profile.bio || '';\n\n    info.appendChild(nameLink);\n    if (profile.bio) info.appendChild(bio);\n\n    item.appendChild(avatarEl);\n    item.appendChild(info);\n    list.appendChild(item);\n  });\n}\n\nfunction closeFollowingModal() {\n  const modal = document.getElementById('followingModal');\n  if (modal) modal.hidden = true;\n}\n\n\ndocument.addEventListener('click', (e) => {\n  if (e.target.classList.contains('mb-follow-modal')) {\n    e.target.hidden = true;\n  }\n});\n\n\nfunction setupAccountDeletion() {\n  const deleteBtn = document.getElementById('deleteAccountBtn');\n  const confirmInput = document.getElementById('deleteConfirmInput');\n  const confirmBtn = document.getElementById('confirmDeleteBtn');\n\n  deleteBtn?.addEventListener('click', () => {\n    const modal = document.getElementById('deleteModal');\n    if (modal) {\n      modal.hidden = false;\n      confirmInput.value = '';\n      confirmBtn.disabled = true;\n      confirmBtn.classList.remove('is-enabled');\n    }\n  });\n\n  confirmInput?.addEventListener('input', () => {\n    const isValid = confirmInput.value.toUpperCase() === 'DELETE';\n    confirmBtn.disabled = !isValid;\n    confirmBtn.classList.toggle('is-enabled', isValid);\n  });\n\n  confirmBtn?.addEventListener('click', deleteAccount);\n}\n\nfunction closeDeleteModal() {\n  const modal = document.getElementById('deleteModal');\n  if (modal) modal.hidden = true;\n}\n\nasync function deleteAccount() {\n  if (!currentUser) return;\n\n  const confirmInput = document.getElementById('deleteConfirmInput');\n  if (confirmInput.value.toUpperCase() !== 'DELETE') return;\n\n  const confirmBtn = document.getElementById('confirmDeleteBtn');\n  confirmBtn.textContent = 'Deleting...';\n  confirmBtn.disabled = true;\n\n  const supabaseClient = getSupabaseClient();\n  if (!supabaseClient) return;\n\n  try {\n\n    await Promise.all([\n      supabaseClient.from('posts').delete().eq('author_id', currentUser.id),\n      supabaseClient.from('post_comments').delete().eq('author_id', currentUser.id),\n      supabaseClient.from('likes').delete().eq('user_id', currentUser.id),\n      supabaseClient.from('followers').delete().or(`follower_id.eq.${currentUser.id},following_id.eq.${currentUser.id}`),\n      supabaseClient.from('saved_articles').delete().eq('user_id', currentUser.id),\n      supabaseClient.from('mood_logs').delete().eq('user_id', currentUser.id),\n      supabaseClient.from('wellness_goals').delete().eq('user_id', currentUser.id),\n      supabaseClient.from('user_achievements').delete().eq('user_id', currentUser.id),\n      supabaseClient.from('profiles').delete().eq('id', currentUser.id)\n    ]);\n\n\n    await supabaseClient.auth.signOut();\n\n    ToastManager.success('Your account has been deleted. Redirecting to home page...');\n    window.location.href = '/';\n  } catch (error) {\n    console.error('Error deleting account:', error);\n    ToastManager.error('There was an error deleting your account. Please try again or contact support.');\n    confirmBtn.textContent = 'Delete Account';\n    confirmBtn.disabled = false;\n  }\n}\n\n\ndocument.addEventListener('DOMContentLoaded', setupAccountDeletion);\n\n\nfunction updateSocialLinksVisibility() {\n  const container = document.getElementById('socialLinksDisplay');\n  if (!container) return;\n\n  const visibleLinks = container.querySelectorAll('a:not([hidden])');\n  container.style.display = visibleLinks.length > 0 ? 'flex' : 'none';\n}\n\n\nlet onboardingInitialized = false;\n\nfunction showOnboardingModal() {\n  const modal = document.getElementById('onboardingModal');\n  if (!modal) return;\n\n  modal.hidden = false;\n  document.body.style.overflow = 'hidden';\n\n  const displayNameInput = document.getElementById('onboardingDisplayName');\n  const bioInput = document.getElementById('onboardingBio');\n  const saveBtn = document.getElementById('onboardingSaveBtn');\n\n\n  setTimeout(() => displayNameInput?.focus(), 100);\n\n\n  if (onboardingInitialized) return;\n  onboardingInitialized = true;\n\n\n  displayNameInput?.addEventListener('input', () => {\n    const name = displayNameInput.value.trim();\n    saveBtn.disabled = name.length < 2;\n  });\n\n\n  saveBtn?.addEventListener('click', async () => {\n    const displayName = displayNameInput.value.trim();\n    const bio = bioInput.value.trim();\n\n    if (displayName.length < 2) {\n      ToastManager.error('Display name must be at least 2 characters');\n      displayNameInput.focus();\n      return;\n    }\n\n    saveBtn.disabled = true;\n    saveBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Saving...';\n\n    try {\n      const supabaseClient = getSupabaseClient();\n      if (!supabaseClient || !currentUser) {\n        throw new Error('Not authenticated');\n      }\n\n      const { error } = await supabaseClient\n        .from('profiles')\n        .upsert({\n          id: currentUser.id,\n          display_name: displayName,\n          bio: bio || null,\n          updated_at: new Date().toISOString()\n        }, { onConflict: 'id' });\n\n      if (error) throw error;\n\n\n      userProfile = { ...userProfile, display_name: displayName, bio: bio };\n      window.userProfile = userProfile;\n\n\n      document.getElementById('profileName').textContent = displayName;\n      document.getElementById('profileBio').textContent = bio || 'No bio yet...';\n      document.getElementById('settingsName').value = displayName;\n      document.getElementById('settingsBio').value = bio;\n\n\n      updateProfileCompletion(userProfile);\n\n\n      if (window.MindBalanceImmersive?.updateGreeting) {\n        window.MindBalanceImmersive.updateGreeting();\n      }\n\n\n      hideOnboardingModal();\n\n      ToastManager.success('Profile setup complete! Welcome to MindBalance!');\n    } catch (error) {\n      console.error('Onboarding error:', error);\n      ToastManager.error('Failed to save profile. Please try again.');\n      saveBtn.disabled = false;\n      saveBtn.innerHTML = '<i class=\"fas fa-check\"></i> Complete Setup';\n    }\n  });\n}\n\nfunction hideOnboardingModal() {\n  const modal = document.getElementById('onboardingModal');\n  if (!modal) return;\n\n  modal.hidden = true;\n  document.body.style.overflow = '';\n}\n","path":null,"size_bytes":99616,"size_tokens":null},"js/settings-modal.js":{"content":"// ==================== SETTINGS MODAL ====================\n(function() {\n  'use strict';\n\n  // --- Constants ---\n  const STORAGE_KEYS = {\n    theme: 'mindbalance_theme',\n    fontSize: 'mindbalance_font_size',\n    reduceMotion: 'mindbalance_reduce_motion',\n    highContrast: 'mindbalance_high_contrast',\n    colorblind: 'mindbalance_colorblind',\n    adhdMode: 'mindbalance_adhd_mode',\n    dyslexiaFont: 'mindbalance_dyslexia_font',\n    accentColor: 'mindbalance_accent_color',\n    language: 'mindbalance_language',\n    onboardingComplete: 'mindbalance_onboarding_complete',\n    activePreset: 'mindbalance_active_preset'\n  };\n\n  const ACCENT_COLORS = {\n    gold:   { hex: '#af916d', hover: '#9d8260', rgb: '175, 145, 109', light: '#d4c4a8', soft: '#f5f0e8', dark: '#7a6548', gradEnd: '#d4a574', text: '#6b5635', name: 'Gold' },\n    purple: { hex: '#9b7ed9', hover: '#8a6dc8', rgb: '155, 126, 217', light: '#c9b8ec', soft: '#f3eefb', dark: '#6b4fb5', gradEnd: '#b99ae6', text: '#5a3d9e', name: 'Purple' },\n    blue:   { hex: '#4a90d9', hover: '#3d7fc8', rgb: '74, 144, 217',  light: '#a3c8ed', soft: '#eaf2fb', dark: '#2d6ab0', gradEnd: '#6daeed', text: '#245a8c', name: 'Blue' },\n    green:  { hex: '#4db896', hover: '#3fa884', rgb: '77, 184, 150',  light: '#a3dbc7', soft: '#e8f7f1', dark: '#2e8a6a', gradEnd: '#6fd4aa', text: '#267558', name: 'Green' },\n    teal:   { hex: '#38b2ac', hover: '#2d9d98', rgb: '56, 178, 172',  light: '#96d8d4', soft: '#e6f5f4', dark: '#238079', gradEnd: '#5fccc6', text: '#1d6b65', name: 'Teal' },\n    pink:   { hex: '#d97eab', hover: '#c86d9a', rgb: '217, 126, 171', light: '#ecbdd5', soft: '#fbeef4', dark: '#b4547f', gradEnd: '#e9a3c3', text: '#993f6a', name: 'Pink' },\n    orange: { hex: '#e09c5c', hover: '#d08b4b', rgb: '224, 156, 92',  light: '#f0cca3', soft: '#fdf3e8', dark: '#b87430', gradEnd: '#edb87a', text: '#9a6228', name: 'Orange' },\n    red:    { hex: '#e07070', hover: '#d05f5f', rgb: '224, 112, 112', light: '#f0b3b3', soft: '#fdeaea', dark: '#b84444', gradEnd: '#ed9494', text: '#9a3535', name: 'Red' }\n  };\n\n  const THEME_PRESETS = {\n    default: {\n      name: 'Default',\n      description: 'Classic MindBalance',\n      theme: 'light',\n      accent: 'gold',\n      fontSize: 'normal',\n      highContrast: false\n    },\n    ocean: {\n      name: 'Calm Ocean',\n      description: 'Peaceful blue tones',\n      theme: 'light',\n      accent: 'blue',\n      fontSize: 'normal',\n      highContrast: false\n    },\n    sunset: {\n      name: 'Warm Sunset',\n      description: 'Cozy warm colors',\n      theme: 'light',\n      accent: 'orange',\n      fontSize: 'normal',\n      highContrast: false\n    },\n    forest: {\n      name: 'Forest Green',\n      description: 'Natural serenity',\n      theme: 'light',\n      accent: 'green',\n      fontSize: 'normal',\n      highContrast: false\n    },\n    night: {\n      name: 'Night Mode',\n      description: 'Easy on the eyes',\n      theme: 'dark',\n      accent: 'purple',\n      fontSize: 'normal',\n      highContrast: false\n    },\n    contrast: {\n      name: 'High Contrast',\n      description: 'Maximum readability',\n      theme: 'light',\n      accent: 'gold',\n      fontSize: 'large',\n      highContrast: true\n    }\n  };\n\n  const ACCESSIBILITY_FEATURES = [\n    { key: 'reduceMotion', points: 10 },\n    { key: 'highContrast', points: 15 },\n    { key: 'adhdMode', points: 15 },\n    { key: 'dyslexiaFont', points: 20 },\n    { key: 'colorblind', points: 15, checkFn: (val) => val && val !== 'none' }\n  ];\n\n  let currentCategory = 'appearance';\n  // --- State ---\n  let compareMode = false;\n  let savedSettings = {};\n\n  function getPreference(key, defaultValue) {\n  // --- Preferences ---\n    try {\n      const value = localStorage.getItem(key);\n      return value !== null ? value : defaultValue;\n    } catch (e) {\n      return defaultValue;\n    }\n  }\n\n  function setPreference(key, value) {\n    try {\n      localStorage.setItem(key, value);\n    } catch (e) {\n      console.warn('Could not save preference:', key);\n    }\n  }\n\n  function calculateAccessibilityScore() {\n  // --- Accessibility Score ---\n    let score = 25;\n    ACCESSIBILITY_FEATURES.forEach(feature => {\n      const value = getPreference(STORAGE_KEYS[feature.key], 'false');\n      if (feature.checkFn) {\n        if (feature.checkFn(value)) score += feature.points;\n      } else if (value === 'true') {\n        score += feature.points;\n      }\n    });\n    return Math.min(score, 100);\n  }\n\n  function updateAccessibilityScore() {\n    const score = calculateAccessibilityScore();\n    const scoreValue = document.querySelector('.accessibility-score-value');\n    const progressRing = document.querySelector('.progress-ring');\n\n    if (scoreValue) scoreValue.textContent = score;\n    if (progressRing) {\n      const circumference = 2 * Math.PI * 35;\n      const offset = circumference - (score / 100) * circumference;\n      progressRing.style.strokeDasharray = circumference;\n      progressRing.style.strokeDashoffset = offset;\n    }\n  }\n\n  function createSettingsModal() {\n\n  // ==================== MODAL TEMPLATE ====================\n    const modalHTML = `\n      <div class=\"settings-modal-overlay\" id=\"settingsModalOverlay\">\n        <div class=\"settings-modal\">\n          <!-- Left Sidebar -->\n          <div class=\"settings-sidebar\">\n            <div class=\"settings-sidebar-header\">\n              <h2 class=\"settings-sidebar-title\">\n                <ion-icon name=\"settings-outline\"></ion-icon>\n                <span data-translate=\"settings_title\">Settings</span>\n              </h2>\n            </div>\n\n            <div class=\"settings-categories\">\n              <button class=\"settings-category-btn active\" data-category=\"appearance\">\n                <ion-icon name=\"color-palette-outline\"></ion-icon>\n                <span data-translate=\"settings_appearance\">Appearance</span>\n              </button>\n              <button class=\"settings-category-btn\" data-category=\"accessibility\">\n                <ion-icon name=\"accessibility-outline\"></ion-icon>\n                <span data-translate=\"settings_accessibility\">Accessibility</span>\n              </button>\n              <button class=\"settings-category-btn\" data-category=\"reading\">\n                <ion-icon name=\"book-outline\"></ion-icon>\n                <span data-translate=\"settings_reading\">Reading</span>\n              </button>\n              <button class=\"settings-category-btn\" data-category=\"language\">\n                <ion-icon name=\"globe-outline\"></ion-icon>\n                <span data-translate=\"settings_language\">Language</span>\n              </button>\n            </div>\n\n            <!-- Accessibility Score -->\n            <div class=\"settings-accessibility-score\">\n              <div class=\"accessibility-score-ring\">\n                <svg width=\"80\" height=\"80\">\n                  <circle class=\"bg-ring\" cx=\"40\" cy=\"40\" r=\"35\"></circle>\n                  <circle class=\"progress-ring\" cx=\"40\" cy=\"40\" r=\"35\"></circle>\n                </svg>\n                <span class=\"accessibility-score-value\">25</span>\n              </div>\n              <span class=\"accessibility-score-label\" data-translate=\"settings_accessibility_score\">Accessibility Score</span>\n            </div>\n          </div>\n\n          <!-- Main Content -->\n          <div class=\"settings-main\">\n            <div class=\"settings-main-header\">\n              <h3 class=\"settings-main-title\" id=\"settingsPanelTitle\" data-translate=\"settings_appearance\">Appearance</h3>\n              <div class=\"settings-header-actions\">\n                <div class=\"settings-sync-indicator\" id=\"syncIndicator\">\n                  <ion-icon name=\"cloud-done-outline\"></ion-icon>\n                  <span data-translate=\"settings_synced\">Synced</span>\n                </div>\n                <button class=\"settings-compare-toggle\" id=\"compareToggle\">\n                  <ion-icon name=\"git-compare-outline\"></ion-icon>\n                  <span data-translate=\"settings_compare\">Compare</span>\n                </button>\n                <button class=\"settings-close-btn\" id=\"settingsCloseBtn\">\n                  <ion-icon name=\"close-outline\"></ion-icon>\n                </button>\n              </div>\n            </div>\n\n            <!-- Mobile Tabs -->\n            <div class=\"settings-mobile-tabs\">\n              <button class=\"settings-mobile-tab active\" data-category=\"appearance\" data-translate=\"settings_appearance\">Appearance</button>\n              <button class=\"settings-mobile-tab\" data-category=\"accessibility\" data-translate=\"settings_accessibility\">Accessibility</button>\n              <button class=\"settings-mobile-tab\" data-category=\"reading\" data-translate=\"settings_reading\">Reading</button>\n              <button class=\"settings-mobile-tab\" data-category=\"language\" data-translate=\"settings_language\">Language</button>\n            </div>\n\n            <div class=\"settings-content\">\n              <!-- Appearance Panel -->\n              <div class=\"settings-panel active\" id=\"panelAppearance\">\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_theme_presets\">Theme Presets</h4>\n                  <div class=\"theme-presets-grid\">\n                    <div class=\"theme-preset-card theme-preset-default\" data-preset=\"default\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_default\">Default</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_default_desc\">Classic MindBalance</div>\n                    </div>\n                    <div class=\"theme-preset-card theme-preset-ocean\" data-preset=\"ocean\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_ocean\">Calm Ocean</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_ocean_desc\">Peaceful blue tones</div>\n                    </div>\n                    <div class=\"theme-preset-card theme-preset-sunset\" data-preset=\"sunset\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_sunset\">Warm Sunset</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_sunset_desc\">Cozy warm colors</div>\n                    </div>\n                    <div class=\"theme-preset-card theme-preset-forest\" data-preset=\"forest\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_forest\">Forest Green</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_forest_desc\">Natural serenity</div>\n                    </div>\n                    <div class=\"theme-preset-card theme-preset-night\" data-preset=\"night\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_night\">Night Mode</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_night_desc\">Easy on the eyes</div>\n                    </div>\n                    <div class=\"theme-preset-card theme-preset-contrast\" data-preset=\"contrast\">\n                      <div class=\"theme-preset-name\" data-translate=\"settings_preset_contrast\">High Contrast</div>\n                      <div class=\"theme-preset-desc\" data-translate=\"settings_preset_contrast_desc\">Maximum readability</div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_theme\">Theme</h4>\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"moon-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_dark_mode\">Dark Mode</h4>\n                        <p data-translate=\"settings_dark_mode_desc\">Reduce eye strain in low light</p>\n                      </div>\n                    </div>\n                    <label class=\"settings-toggle\">\n                      <input type=\"checkbox\" id=\"settingsDarkMode\" data-theme-toggle>\n                      <span class=\"settings-toggle-slider\"></span>\n                    </label>\n                  </div>\n                </div>\n\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_accent_color\">Accent Color</h4>\n                  <div class=\"accent-color-grid\" id=\"accentColorGrid\">\n                    <!-- Colors will be inserted here -->\n                  </div>\n                </div>\n\n                <!-- Live Preview -->\n                <div class=\"settings-preview\">\n                  <div class=\"settings-preview-title\" data-translate=\"settings_live_preview\">Live Preview</div>\n                  <div class=\"settings-preview-frame\">\n                    <p class=\"preview-sample-text\" style=\"font-size: 18px; font-weight: 600; margin-bottom: 8px;\" data-translate=\"settings_preview_welcome\">Welcome to MindBalance</p>\n                    <p class=\"preview-sample-text\" style=\"font-size: 14px; opacity: 0.8; margin-bottom: 16px;\" data-translate=\"settings_preview_journey\">Your journey to mental wellness starts here.</p>\n                    <span class=\"preview-sample-btn\" data-translate=\"settings_preview_btn\">Get Started</span>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Accessibility Panel -->\n              <div class=\"settings-panel\" id=\"panelAccessibility\">\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_visual_accessibility\">Visual Accessibility</h4>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"contrast-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_high_contrast\">High Contrast</h4>\n                        <p data-translate=\"settings_high_contrast_desc\">Increase contrast for better readability</p>\n                      </div>\n                    </div>\n                    <label class=\"settings-toggle\">\n                      <input type=\"checkbox\" id=\"settingsHighContrast\" data-high-contrast-toggle>\n                      <span class=\"settings-toggle-slider\"></span>\n                    </label>\n                  </div>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"eye-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_colorblind_mode\">Colorblind Mode</h4>\n                        <p data-translate=\"settings_colorblind_desc\">Adjust colors for color vision deficiency</p>\n                      </div>\n                    </div>\n                    <select class=\"settings-select\" id=\"settingsColorblind\" data-colorblind-select>\n                      <option value=\"none\" data-translate=\"settings_colorblind_none\">None</option>\n                      <option value=\"protanopia\" data-translate=\"settings_colorblind_protanopia\">Protanopia (Red-blind)</option>\n                      <option value=\"deuteranopia\" data-translate=\"settings_colorblind_deuteranopia\">Deuteranopia (Green-blind)</option>\n                      <option value=\"tritanopia\" data-translate=\"settings_colorblind_tritanopia\">Tritanopia (Blue-blind)</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_cognitive_accessibility\">Cognitive Accessibility</h4>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"flash-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_focus_mode\">Focus Mode (ADHD)</h4>\n                        <p data-translate=\"settings_focus_mode_desc\">Reduce distractions for better focus</p>\n                      </div>\n                    </div>\n                    <label class=\"settings-toggle\">\n                      <input type=\"checkbox\" id=\"settingsAdhd\" data-adhd-toggle>\n                      <span class=\"settings-toggle-slider\"></span>\n                    </label>\n                  </div>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"text-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_dyslexia_font\">Dyslexia-Friendly Font</h4>\n                        <p data-translate=\"settings_dyslexia_font_desc\">Use OpenDyslexic font for easier reading</p>\n                      </div>\n                    </div>\n                    <label class=\"settings-toggle\">\n                      <input type=\"checkbox\" id=\"settingsDyslexia\" data-dyslexia-toggle>\n                      <span class=\"settings-toggle-slider\"></span>\n                    </label>\n                  </div>\n                </div>\n\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_motion_animation\">Motion & Animation</h4>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"pause-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_reduce_motion\">Reduce Motion</h4>\n                        <p data-translate=\"settings_reduce_motion_desc\">Minimize animations and transitions</p>\n                      </div>\n                    </div>\n                    <label class=\"settings-toggle\">\n                      <input type=\"checkbox\" id=\"settingsReduceMotion\" data-reduce-motion-toggle>\n                      <span class=\"settings-toggle-slider\"></span>\n                    </label>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Reading Panel -->\n              <div class=\"settings-panel\" id=\"panelReading\">\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_text_size\">Text Size</h4>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"resize-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_font_size\">Font Size</h4>\n                        <p data-translate=\"settings_font_size_desc\">Adjust text size for comfortable reading</p>\n                      </div>\n                    </div>\n                    <select class=\"settings-select\" id=\"settingsFontSize\" data-font-size-select>\n                      <option value=\"small\" data-translate=\"settings_font_small\">Small</option>\n                      <option value=\"normal\" data-translate=\"settings_font_normal\">Normal</option>\n                      <option value=\"large\" data-translate=\"settings_font_large\">Large</option>\n                      <option value=\"xlarge\" data-translate=\"settings_font_xlarge\">Extra Large</option>\n                    </select>\n                  </div>\n                </div>\n\n                <!-- Live Preview for Reading -->\n                <div class=\"settings-preview\">\n                  <div class=\"settings-preview-title\" data-translate=\"settings_text_preview\">Text Preview</div>\n                  <div class=\"settings-preview-frame\">\n                    <p class=\"preview-sample-text\" id=\"readingPreviewText\" data-translate=\"settings_reading_preview_text\">\n                      Mental health is just as important as physical health. Taking time each day to check in with yourself, practice mindfulness, and seek support when needed are all crucial steps toward maintaining your wellbeing.\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Language Panel -->\n              <div class=\"settings-panel\" id=\"panelLanguage\">\n                <div class=\"settings-section\">\n                  <h4 class=\"settings-section-title\" data-translate=\"settings_language\">Language</h4>\n\n                  <div class=\"settings-item\">\n                    <div class=\"settings-item-info\">\n                      <div class=\"settings-item-icon\">\n                        <ion-icon name=\"language-outline\"></ion-icon>\n                      </div>\n                      <div class=\"settings-item-text\">\n                        <h4 data-translate=\"settings_display_language\">Display Language</h4>\n                        <p data-translate=\"settings_display_language_desc\">Choose your preferred language</p>\n                      </div>\n                    </div>\n                    <select class=\"settings-select\" id=\"settingsLanguage\" data-language-select>\n                      <option value=\"en\">English</option>\n                      <option value=\"es\">EspaÃ±ol</option>\n                      <option value=\"fr\">FranÃ§ais</option>\n                      <option value=\"zh\">ä¸­æ–‡</option>\n                      <option value=\"hi\">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>\n                      <option value=\"ko\">í•œêµ­ì–´</option>\n                    </select>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Reset Button -->\n              <button class=\"settings-reset-btn\" id=\"settingsResetBtn\">\n                <ion-icon name=\"refresh-outline\"></ion-icon>\n                <span data-translate=\"settings_reset_defaults\">Reset to Defaults</span>\n              </button>\n            </div>\n          </div>\n\n          <!-- Onboarding Overlay -->\n          <div class=\"settings-onboarding\" id=\"settingsOnboarding\">\n            <div class=\"onboarding-card\">\n              <div class=\"onboarding-icon\">\n                <ion-icon name=\"sparkles-outline\"></ion-icon>\n              </div>\n              <h3 class=\"onboarding-title\" data-translate=\"settings_onboarding_title\">Welcome to Settings!</h3>\n              <p class=\"onboarding-text\" data-translate=\"settings_onboarding_text\">\n                Customize your MindBalance experience with theme presets, accessibility options, and more. Your preferences sync across all pages.\n              </p>\n              <button class=\"onboarding-btn\" id=\"onboardingStartBtn\" data-translate=\"settings_onboarding_start\">Let's Get Started</button>\n              <button class=\"onboarding-skip\" id=\"onboardingSkipBtn\" data-translate=\"settings_onboarding_skip\">Skip for now</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n\n    document.body.insertAdjacentHTML('beforeend', modalHTML);\n    initializeAccentColors();\n    initializeEventListeners();\n    loadCurrentSettings();\n    updateAccessibilityScore();\n    checkOnboarding();\n    updateSyncStatus();\n  }\n\n  function initializeAccentColors() {\n\n  // ==================== ACCENT COLORS ====================\n    const grid = document.getElementById('accentColorGrid');\n    if (!grid) return;\n\n    Object.entries(ACCENT_COLORS).forEach(([key, color]) => {\n      const option = document.createElement('div');\n      option.className = 'accent-color-option';\n      option.dataset.color = key;\n      option.style.backgroundColor = color.hex;\n      option.title = color.name;\n      grid.appendChild(option);\n    });\n  }\n\n  function initializeEventListeners() {\n\n  // ==================== EVENT LISTENERS ====================\n    const overlay = document.getElementById('settingsModalOverlay');\n    const closeBtn = document.getElementById('settingsCloseBtn');\n    const categoryBtns = document.querySelectorAll('.settings-category-btn');\n    const mobileTabs = document.querySelectorAll('.settings-mobile-tab');\n    const compareToggle = document.getElementById('compareToggle');\n    const resetBtn = document.getElementById('settingsResetBtn');\n    const onboardingStartBtn = document.getElementById('onboardingStartBtn');\n    const onboardingSkipBtn = document.getElementById('onboardingSkipBtn');\n\n    overlay?.addEventListener('click', (e) => {\n      if (e.target === overlay) closeSettingsModal();\n    });\n\n    closeBtn?.addEventListener('click', closeSettingsModal);\n\n    categoryBtns.forEach(btn => {\n      btn.addEventListener('click', () => switchCategory(btn.dataset.category));\n    });\n\n    mobileTabs.forEach(tab => {\n      tab.addEventListener('click', () => switchCategory(tab.dataset.category));\n    });\n\n    compareToggle?.addEventListener('click', toggleCompareMode);\n    resetBtn?.addEventListener('click', resetToDefaults);\n    onboardingStartBtn?.addEventListener('click', completeOnboarding);\n    onboardingSkipBtn?.addEventListener('click', completeOnboarding);\n\n    document.querySelectorAll('.theme-preset-card').forEach(card => {\n      card.addEventListener('click', () => applyPreset(card.dataset.preset));\n    });\n\n    document.querySelectorAll('.accent-color-option').forEach(option => {\n      option.addEventListener('click', () => selectAccentColor(option.dataset.color));\n    });\n\n    document.getElementById('settingsDarkMode')?.addEventListener('change', (e) => {\n      const theme = e.target.checked ? 'dark' : 'light';\n      setPreference(STORAGE_KEYS.theme, theme);\n      window.MindBalanceSettings?.applyTheme?.(theme);\n      clearActivePreset();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsHighContrast')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.highContrast, e.target.checked);\n      window.MindBalanceSettings?.applyHighContrast?.(e.target.checked);\n      updateAccessibilityScore();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsColorblind')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.colorblind, e.target.value);\n      window.MindBalanceSettings?.applyColorblind?.(e.target.value);\n      updateAccessibilityScore();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsAdhd')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.adhdMode, e.target.checked);\n      window.MindBalanceSettings?.applyAdhdMode?.(e.target.checked);\n      updateAccessibilityScore();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsDyslexia')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.dyslexiaFont, e.target.checked);\n      window.MindBalanceSettings?.applyDyslexiaFont?.(e.target.checked);\n      updateAccessibilityScore();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsReduceMotion')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.reduceMotion, e.target.checked);\n      window.MindBalanceSettings?.applyReduceMotion?.(e.target.checked);\n      updateAccessibilityScore();\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsFontSize')?.addEventListener('change', (e) => {\n      setPreference(STORAGE_KEYS.fontSize, e.target.value);\n      window.MindBalanceSettings?.applyFontSize?.(e.target.value);\n      updateReadingPreview(e.target.value);\n      updateSyncStatus();\n    });\n\n    document.getElementById('settingsLanguage')?.addEventListener('change', (e) => {\n      const lang = e.target.value;\n      setPreference(STORAGE_KEYS.language, lang);\n\n\n      updateSyncStatus();\n    });\n\n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape') closeSettingsModal();\n    });\n  }\n\n  function loadCurrentSettings() {\n  // --- Load Settings ---\n    const darkMode = document.getElementById('settingsDarkMode');\n    const highContrast = document.getElementById('settingsHighContrast');\n    const colorblind = document.getElementById('settingsColorblind');\n    const adhd = document.getElementById('settingsAdhd');\n    const dyslexia = document.getElementById('settingsDyslexia');\n    const reduceMotion = document.getElementById('settingsReduceMotion');\n    const fontSize = document.getElementById('settingsFontSize');\n    const language = document.getElementById('settingsLanguage');\n\n    const theme = getPreference(STORAGE_KEYS.theme, 'light');\n    if (darkMode) darkMode.checked = theme === 'dark';\n\n    if (highContrast) highContrast.checked = getPreference(STORAGE_KEYS.highContrast, 'false') === 'true';\n    if (colorblind) colorblind.value = getPreference(STORAGE_KEYS.colorblind, 'none');\n    if (adhd) adhd.checked = getPreference(STORAGE_KEYS.adhdMode, 'false') === 'true';\n    if (dyslexia) dyslexia.checked = getPreference(STORAGE_KEYS.dyslexiaFont, 'false') === 'true';\n    if (reduceMotion) reduceMotion.checked = getPreference(STORAGE_KEYS.reduceMotion, 'false') === 'true';\n    if (fontSize) fontSize.value = getPreference(STORAGE_KEYS.fontSize, 'normal');\n    if (language) language.value = getPreference(STORAGE_KEYS.language, 'en');\n\n    const activeAccent = getPreference(STORAGE_KEYS.accentColor, 'gold');\n    document.querySelectorAll('.accent-color-option').forEach(option => {\n      option.classList.toggle('active', option.dataset.color === activeAccent);\n    });\n\n    const activePreset = getPreference(STORAGE_KEYS.activePreset, null);\n    if (activePreset) {\n      document.querySelectorAll('.theme-preset-card').forEach(card => {\n        card.classList.toggle('active', card.dataset.preset === activePreset);\n      });\n    }\n\n    updateReadingPreview(getPreference(STORAGE_KEYS.fontSize, 'normal'));\n  }\n\n  function switchCategory(category) {\n  // --- Category Switching ---\n    currentCategory = category;\n\n    document.querySelectorAll('.settings-category-btn').forEach(btn => {\n      btn.classList.toggle('active', btn.dataset.category === category);\n    });\n\n    document.querySelectorAll('.settings-mobile-tab').forEach(tab => {\n      tab.classList.toggle('active', tab.dataset.category === category);\n    });\n\n    document.querySelectorAll('.settings-panel').forEach(panel => {\n      panel.classList.remove('active');\n    });\n\n    const panelMap = {\n      appearance: 'panelAppearance',\n      accessibility: 'panelAccessibility',\n      reading: 'panelReading',\n      language: 'panelLanguage'\n    };\n\n    document.getElementById(panelMap[category])?.classList.add('active');\n\n    const titleMap = {\n      appearance: 'Appearance',\n      accessibility: 'Accessibility',\n      reading: 'Reading',\n      language: 'Language'\n    };\n\n    const titleEl = document.getElementById('settingsPanelTitle');\n    if (titleEl) titleEl.textContent = titleMap[category];\n  }\n\n  function applyPreset(presetKey) {\n  // --- Theme Presets ---\n    const preset = THEME_PRESETS[presetKey];\n    if (!preset) return;\n\n    setPreference(STORAGE_KEYS.theme, preset.theme);\n    setPreference(STORAGE_KEYS.accentColor, preset.accent);\n    setPreference(STORAGE_KEYS.fontSize, preset.fontSize);\n    setPreference(STORAGE_KEYS.highContrast, preset.highContrast);\n    setPreference(STORAGE_KEYS.activePreset, presetKey);\n\n    window.MindBalanceSettings?.applyTheme?.(preset.theme);\n    window.MindBalanceSettings?.applyAccentColor?.(preset.accent);\n    window.MindBalanceSettings?.applyFontSize?.(preset.fontSize);\n    window.MindBalanceSettings?.applyHighContrast?.(preset.highContrast);\n\n    document.querySelectorAll('.theme-preset-card').forEach(card => {\n      card.classList.toggle('active', card.dataset.preset === presetKey);\n    });\n\n    loadCurrentSettings();\n    updateSyncStatus();\n  }\n\n  function clearActivePreset() {\n    setPreference(STORAGE_KEYS.activePreset, '');\n    document.querySelectorAll('.theme-preset-card').forEach(card => {\n      card.classList.remove('active');\n    });\n  }\n\n  function selectAccentColor(colorKey) {\n  // --- Accent Colors ---\n    setPreference(STORAGE_KEYS.accentColor, colorKey);\n    window.MindBalanceSettings?.applyAccentColor?.(colorKey);\n\n    document.querySelectorAll('.accent-color-option').forEach(option => {\n      option.classList.toggle('active', option.dataset.color === colorKey);\n    });\n\n    clearActivePreset();\n    updateSyncStatus();\n  }\n\n  function toggleCompareMode() {\n  // --- Compare Mode ---\n    compareMode = !compareMode;\n    const toggle = document.getElementById('compareToggle');\n    toggle?.classList.toggle('active', compareMode);\n\n    if (compareMode) {\n      savedSettings = {\n        theme: getPreference(STORAGE_KEYS.theme, 'light'),\n        accent: getPreference(STORAGE_KEYS.accentColor, 'gold'),\n        fontSize: getPreference(STORAGE_KEYS.fontSize, 'normal'),\n        highContrast: getPreference(STORAGE_KEYS.highContrast, 'false'),\n        colorblind: getPreference(STORAGE_KEYS.colorblind, 'none'),\n        adhdMode: getPreference(STORAGE_KEYS.adhdMode, 'false'),\n        dyslexiaFont: getPreference(STORAGE_KEYS.dyslexiaFont, 'false'),\n        reduceMotion: getPreference(STORAGE_KEYS.reduceMotion, 'false')\n      };\n\n      window.MindBalanceSettings?.applyTheme?.('light');\n      window.MindBalanceSettings?.applyAccentColor?.('gold');\n      window.MindBalanceSettings?.applyFontSize?.('normal');\n      window.MindBalanceSettings?.applyHighContrast?.(false);\n      window.MindBalanceSettings?.applyColorblind?.('none');\n      window.MindBalanceSettings?.applyAdhdMode?.(false);\n      window.MindBalanceSettings?.applyDyslexiaFont?.(false);\n      window.MindBalanceSettings?.applyReduceMotion?.(false);\n    } else {\n      window.MindBalanceSettings?.applyTheme?.(savedSettings.theme);\n      window.MindBalanceSettings?.applyAccentColor?.(savedSettings.accent);\n      window.MindBalanceSettings?.applyFontSize?.(savedSettings.fontSize);\n      window.MindBalanceSettings?.applyHighContrast?.(savedSettings.highContrast === 'true');\n      window.MindBalanceSettings?.applyColorblind?.(savedSettings.colorblind);\n      window.MindBalanceSettings?.applyAdhdMode?.(savedSettings.adhdMode === 'true');\n      window.MindBalanceSettings?.applyDyslexiaFont?.(savedSettings.dyslexiaFont === 'true');\n      window.MindBalanceSettings?.applyReduceMotion?.(savedSettings.reduceMotion === 'true');\n    }\n  }\n\n  function resetToDefaults() {\n  // --- Reset ---\n    if (!confirm('Reset all settings to defaults? This cannot be undone.')) return;\n\n    Object.values(STORAGE_KEYS).forEach(key => {\n      if (key !== STORAGE_KEYS.onboardingComplete) {\n        localStorage.removeItem(key);\n      }\n    });\n    localStorage.removeItem('mindbalance-language');\n\n    window.MindBalanceSettings?.applyTheme?.('light');\n    window.MindBalanceSettings?.applyAccentColor?.('gold');\n    window.MindBalanceSettings?.applyFontSize?.('normal');\n    window.MindBalanceSettings?.applyHighContrast?.(false);\n    window.MindBalanceSettings?.applyColorblind?.('none');\n    window.MindBalanceSettings?.applyAdhdMode?.(false);\n    window.MindBalanceSettings?.applyDyslexiaFont?.(false);\n    window.MindBalanceSettings?.applyReduceMotion?.(false);\n\n    if (typeof setLanguage === 'function') {\n      setLanguage('en');\n    } else if (window.MindBalanceTranslations?.setLanguage) {\n      window.MindBalanceTranslations.setLanguage('en');\n    }\n    document.querySelectorAll('.language-selector, #languageSelect').forEach(sel => {\n      sel.value = 'en';\n    });\n\n    loadCurrentSettings();\n    updateAccessibilityScore();\n    updateSyncStatus();\n  }\n\n  function updateReadingPreview(size) {\n    const preview = document.getElementById('readingPreviewText');\n    if (!preview) return;\n\n    const sizes = {\n      small: '13px',\n      normal: '15px',\n      large: '18px',\n      xlarge: '22px'\n    };\n\n    preview.style.fontSize = sizes[size] || '15px';\n  }\n\n  function checkOnboarding() {\n  // --- Onboarding ---\n    const onboardingComplete = getPreference(STORAGE_KEYS.onboardingComplete, 'false');\n    if (onboardingComplete !== 'true') {\n      document.getElementById('settingsOnboarding')?.classList.add('active');\n    }\n  }\n\n  function completeOnboarding() {\n    setPreference(STORAGE_KEYS.onboardingComplete, 'true');\n    document.getElementById('settingsOnboarding')?.classList.remove('active');\n  }\n\n  function updateSyncStatus() {\n  // --- Sync Status ---\n    const indicator = document.getElementById('syncIndicator');\n    if (!indicator) return;\n\n    indicator.classList.remove('syncing', 'offline');\n    indicator.innerHTML = '<ion-icon name=\"cloud-done-outline\"></ion-icon><span>Synced</span>';\n\n    indicator.classList.add('syncing');\n    indicator.innerHTML = '<ion-icon name=\"sync-outline\"></ion-icon><span>Syncing...</span>';\n\n    setTimeout(() => {\n      indicator.classList.remove('syncing');\n      indicator.innerHTML = '<ion-icon name=\"cloud-done-outline\"></ion-icon><span>Synced</span>';\n    }, 800);\n  }\n\n  function openSettingsModal() {\n\n  // ==================== MODAL OPEN/CLOSE ====================\n    document.getElementById('settingsModalOverlay')?.classList.add('active');\n    document.body.style.overflow = 'hidden';\n    loadCurrentSettings();\n    updateAccessibilityScore();\n\n\n    if (window.MindBalanceTranslations?.applyTranslations) {\n      const modal = document.getElementById('settingsModalOverlay');\n      if (modal) {\n        window.MindBalanceTranslations.applyTranslations(modal);\n      }\n    }\n  }\n\n  function closeSettingsModal() {\n    document.getElementById('settingsModalOverlay')?.classList.remove('active');\n    document.body.style.overflow = '';\n\n    if (compareMode) {\n      toggleCompareMode();\n    }\n  }\n\n  function init() {\n\n  // ==================== INITIALIZATION ====================\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', createSettingsModal);\n    } else {\n      createSettingsModal();\n    }\n  }\n\n  window.SettingsModal = {\n    open: openSettingsModal,\n    close: closeSettingsModal\n  };\n\n  window.openSettingsModal = openSettingsModal;\n  window.closeSettingsModal = closeSettingsModal;\n\n  init();\n})();\n","path":null,"size_bytes":38596,"size_tokens":null},"mindspace-build/css/toast.css":{"content":"/* === TOAST CONTAINER === */\n#toast-container {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  z-index: 100000;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  pointer-events: none;\n  max-width: 400px;\n  width: calc(100% - 40px);\n}\n\n/* === TOAST BASE === */\n.toast {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 14px 18px;\n  border-radius: 12px;\n  background: #ffffff;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15), 0 2px 8px rgba(0, 0, 0, 0.1);\n  pointer-events: auto;\n  opacity: 0;\n  transform: translateX(100%);\n  transition: opacity 0.3s ease, transform 0.3s ease;\n  font-family: 'Poppins', sans-serif;\n  font-size: 14px;\n  line-height: 1.4;\n  border-left: 4px solid;\n}\n\n.toast-visible {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.toast-hiding {\n  opacity: 0;\n  transform: translateX(100%);\n}\n\n.toast-icon {\n  flex-shrink: 0;\n  font-size: 18px;\n}\n\n.toast-message {\n  flex: 1;\n  color: #333;\n  word-break: break-word;\n}\n\n.toast-close {\n  flex-shrink: 0;\n  background: none;\n  border: none;\n  padding: 4px;\n  cursor: pointer;\n  color: #888;\n  font-size: 14px;\n  transition: color 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.toast-close:hover {\n  color: #333;\n}\n\n/* === TOAST VARIANTS === */\n.toast-success {\n  border-color: #10b981;\n}\n\n.toast-success .toast-icon {\n  color: #10b981;\n}\n\n.toast-error {\n  border-color: #ef4444;\n}\n\n.toast-error .toast-icon {\n  color: #ef4444;\n}\n\n.toast-warning {\n  border-color: #f59e0b;\n}\n\n.toast-warning .toast-icon {\n  color: #f59e0b;\n}\n\n.toast-info {\n  border-color: #3b82f6;\n}\n\n.toast-info .toast-icon {\n  color: #3b82f6;\n}\n\n/* === DARK MODE === */\n[data-theme=\"dark\"] .toast {\n  background: #2d2b3d;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .toast-message {\n  color: #e5e5e5;\n}\n\n[data-theme=\"dark\"] .toast-close {\n  color: #999;\n}\n\n[data-theme=\"dark\"] .toast-close:hover {\n  color: #fff;\n}\n\n/* === REDUCED MOTION === */\n@media (prefers-reduced-motion: reduce) {\n  .toast {\n    transition: opacity 0.15s ease;\n    transform: translateX(0);\n  }\n  \n  .toast-hiding {\n    transform: translateX(0);\n  }\n}\n\n/* === MOBILE RESPONSIVE === */\n@media (max-width: 480px) {\n  #toast-container {\n    top: auto;\n    bottom: 20px;\n    right: 10px;\n    left: 10px;\n    width: auto;\n    max-width: none;\n  }\n  \n  .toast {\n    transform: translateY(100%);\n  }\n  \n  .toast-visible {\n    transform: translateY(0);\n  }\n  \n  .toast-hiding {\n    transform: translateY(100%);\n  }\n}\n","path":null,"size_bytes":2525,"size_tokens":null},"mindspace-build/css/blog-redesign.css":{"content":"/* ============================================================\n   BLOG REDESIGN â€” loaded AFTER style.css to override defaults\n   Major visual overhaul: magazine grid, solid backgrounds, Poppins\n   ============================================================ */\n\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap');\n\n/* === CSS CUSTOM PROPERTIES === */\n:root {\n  --sticky-top: 80px;\n}\n\n/* === KEYFRAMES === */\n@keyframes fadeInUp {\n  from { opacity: 0; transform: translateY(24px); }\n  to   { opacity: 1; transform: translateY(0); }\n}\n\n@keyframes slideInRight {\n  from { transform: translateX(100%); }\n  to   { transform: translateX(0); }\n}\n\n@keyframes progressGrow {\n  from { width: 0; }\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to   { opacity: 1; }\n}\n\n@keyframes float1 {\n  0%, 100% { transform: translate(0, 0) rotate(0deg); }\n  25%      { transform: translate(12px, -18px) rotate(3deg); }\n  50%      { transform: translate(-8px, -30px) rotate(-2deg); }\n  75%      { transform: translate(15px, -12px) rotate(4deg); }\n}\n\n@keyframes float2 {\n  0%, 100% { transform: translate(0, 0) rotate(0deg); }\n  33%      { transform: translate(-20px, -15px) rotate(-4deg); }\n  66%      { transform: translate(10px, -25px) rotate(2deg); }\n}\n\n@keyframes float3 {\n  0%, 100% { transform: translate(0, 0) scale(1); }\n  50%      { transform: translate(8px, -20px) scale(1.08); }\n}\n\n@keyframes pulseGlow {\n  0%, 100% { box-shadow: 0 0 0 0 rgba(var(--user-accent-rgb), 0.25); }\n  50%      { box-shadow: 0 0 18px 4px rgba(var(--user-accent-rgb), 0.18); }\n}\n\n@keyframes countUp {\n  from { opacity: 0; transform: translateY(16px); }\n  to   { opacity: 1; transform: translateY(0); }\n}\n\n@keyframes revealUp {\n  from { opacity: 0; transform: translateY(30px); }\n  to   { opacity: 1; transform: translateY(0); }\n}\n\n@keyframes shimmer {\n  0%   { background-position: -200% center; }\n  100% { background-position: 200% center; }\n}\n\n@keyframes fireFlicker {\n  0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }\n  25%      { transform: scale(1.15) rotate(-4deg); opacity: 0.85; }\n  50%      { transform: scale(0.95) rotate(3deg); opacity: 1; }\n  75%      { transform: scale(1.1) rotate(-2deg); opacity: 0.9; }\n}\n\n/* === UTILITY === */\n.mb-srOnly {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0,0,0,0);\n  border: 0;\n}\n\n/* === SCROLL REVEAL === */\n[data-reveal] {\n  opacity: 0;\n  transform: translateY(30px);\n  transition: opacity 0.6s ease, transform 0.6s ease;\n}\n\n[data-reveal].is-revealed {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n/* ==========================================================\n   1. READING PROGRESS BAR\n   ========================================================== */\n.mb-readingProgress {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background: transparent;\n  z-index: 99998;\n  pointer-events: none;\n}\n\n.mb-readingProgress__bar {\n  height: 100%;\n  width: 0%;\n  background: linear-gradient(90deg, var(--user-accent), var(--user-accent-grad-end, var(--user-accent)));\n  transition: width 0.15s linear;\n  border-radius: 0 2px 2px 0;\n}\n\n/* ==========================================================\n   2. HERO SECTION â€” Two-Column Layout\n   ========================================================== */\n.mb-blogHero {\n  position: relative;\n  overflow: hidden;\n  padding: 100px 24px 80px;\n  background:\n    radial-gradient(ellipse 60% 50% at 70% 30%, rgba(var(--user-accent-rgb), 0.12) 0%, transparent 70%),\n    linear-gradient(\n      180deg,\n      rgba(var(--user-accent-rgb), 0.2) 0%,\n      rgba(var(--user-accent-rgb), 0.06) 50%,\n      transparent 100%\n    );\n}\n\n.mb-blogHero__shapes {\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n  z-index: 0;\n}\n\n.mb-shape {\n  position: absolute;\n  border-radius: 50%;\n  background: rgba(var(--user-accent-rgb), 0.08);\n}\n\n.mb-shape--1 {\n  width: 120px;\n  height: 120px;\n  top: 10%;\n  left: 8%;\n  animation: float1 8s ease-in-out infinite;\n}\n\n.mb-shape--2 {\n  width: 80px;\n  height: 80px;\n  top: 60%;\n  left: 75%;\n  border-radius: 40%;\n  animation: float2 10s ease-in-out infinite 1s;\n}\n\n.mb-shape--3 {\n  width: 150px;\n  height: 150px;\n  top: 20%;\n  right: 5%;\n  animation: float3 12s ease-in-out infinite 2s;\n}\n\n.mb-shape--4 {\n  width: 60px;\n  height: 60px;\n  bottom: 15%;\n  left: 20%;\n  border-radius: 30%;\n  animation: float2 9s ease-in-out infinite 0.5s;\n}\n\n.mb-shape--5 {\n  width: 100px;\n  height: 100px;\n  bottom: 25%;\n  right: 15%;\n  animation: float1 11s ease-in-out infinite 3s;\n}\n\n.mb-blogHero__inner {\n  position: relative;\n  z-index: 1;\n  display: grid;\n  grid-template-columns: 55fr 45fr;\n  gap: 36px;\n  align-items: center;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.mb-blogHero__left {\n  text-align: left;\n}\n\n.mb-blogHero__right {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 14px;\n  align-items: start;\n}\n\n.mb-blogHero__badge {\n  display: inline-block;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.7rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.12em;\n  color: var(--user-accent-text, var(--user-accent));\n  background: var(--user-accent-soft, rgba(var(--user-accent-rgb), 0.1));\n  padding: 8px 20px;\n  border-radius: 20px;\n  margin-bottom: 16px;\n  border-left: 3px solid var(--user-accent);\n  animation: shimmer 3s ease-in-out infinite;\n  background-size: 200% auto;\n}\n\n.mb-blogHero__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: clamp(2.2rem, 4vw, 3.2rem);\n  font-weight: 800;\n  line-height: 1.08;\n  color: var(--text-primary, #1a1a2e);\n  margin-bottom: 0;\n  animation: fadeInUp 0.7s ease both;\n}\n\n.mb-blogHero__accent {\n  color: var(--user-accent);\n}\n\n.mb-blogHero__accent span {\n  color: var(--user-accent);\n  background: linear-gradient(135deg, var(--user-accent), rgba(var(--user-accent-rgb), 0.7));\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.mb-blogHero__lead {\n  font-family: 'Poppins', sans-serif;\n  font-size: clamp(0.95rem, 1.3vw, 1.1rem);\n  color: var(--text-secondary, #666);\n  line-height: 1.75;\n  margin-top: 18px;\n  max-width: 540px;\n  animation: fadeInUp 0.7s ease 0.15s both;\n}\n\n.mb-blogHero__search {\n  display: flex;\n  align-items: center;\n  gap: 0;\n  width: 100%;\n  max-width: 480px;\n  margin: 16px 0 0;\n  background: #fff;\n  border: 2px solid #e0e0e0;\n  border-radius: 14px;\n  overflow: hidden;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);\n  transition: border-color 0.3s ease, box-shadow 0.3s ease;\n  animation: fadeInUp 0.7s ease 0.25s both;\n}\n\n.mb-blogHero__search:focus-within {\n  border-color: var(--user-accent);\n  box-shadow: 0 4px 24px rgba(var(--user-accent-rgb), 0.2), 0 0 0 3px rgba(var(--user-accent-rgb), 0.08);\n}\n\n.mb-blogHero__input {\n  flex: 1;\n  padding: 14px 18px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  border: none;\n  outline: none;\n  background: transparent;\n  color: var(--text-primary, #1a1a2e);\n}\n\n.mb-blogHero__searchBtn {\n  padding: 14px 18px;\n  background: transparent;\n  color: var(--text-secondary, #888);\n  border: none;\n  cursor: pointer;\n  font-size: 1.2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n}\n\n.mb-blogHero__searchBtn:hover {\n  color: var(--user-accent);\n}\n\n.mb-heroStats {\n  display: flex;\n  gap: 20px;\n  margin-top: 24px;\n  animation: fadeInUp 0.7s ease 0.35s both;\n}\n\n.mb-heroStats__item {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  position: relative;\n  padding-right: 20px;\n}\n\n.mb-heroStats__item:not(:last-child)::after {\n  content: '';\n  position: absolute;\n  right: 0;\n  top: 15%;\n  height: 70%;\n  width: 1px;\n  background: rgba(var(--user-accent-rgb), 0.2);\n}\n\n.mb-heroStats__number {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.3rem;\n  font-weight: 800;\n  color: var(--user-accent);\n  line-height: 1.2;\n}\n\n.mb-heroStats__label {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.7rem;\n  font-weight: 500;\n  color: var(--text-secondary, #888);\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n}\n\n.mb-heroCard {\n  position: relative;\n  background: #fff;\n  border-radius: 14px;\n  overflow: hidden;\n  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.1);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  animation: fadeInUp 0.7s ease 0.3s both;\n}\n\n.mb-heroCard:nth-child(2) {\n  animation-delay: 0.5s;\n}\n\n.mb-heroCard:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 16px 48px rgba(0, 0, 0, 0.15);\n}\n\n.mb-heroCard__badge {\n  position: absolute;\n  top: 12px;\n  left: 12px;\n  z-index: 2;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  background: linear-gradient(135deg, #f5c518, #e0a800);\n  color: #1a1a2e;\n  padding: 6px 14px;\n  border-radius: 20px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.7rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n}\n\n.mb-heroCard__badge ion-icon {\n  font-size: 0.85rem;\n}\n\n.mb-heroCard__imgWrap {\n  display: block;\n  position: relative;\n  aspect-ratio: 16 / 7;\n  overflow: hidden;\n  flex-shrink: 0;\n}\n\n.mb-heroCard__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.4s ease;\n}\n\n.mb-heroCard:hover .mb-heroCard__img {\n  transform: scale(1.05);\n}\n\n.mb-heroCard__body {\n  padding: 12px 16px 14px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.mb-heroCard__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.88rem;\n  font-weight: 700;\n  line-height: 1.25;\n  margin: 4px 0;\n}\n\n.mb-heroCard__title a {\n  color: var(--text-primary, #1a1a2e);\n  text-decoration: none;\n  transition: color 0.2s ease;\n}\n\n.mb-heroCard__title a:hover {\n  color: var(--user-accent);\n}\n\n.mb-heroCard__desc {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.78rem;\n  color: var(--text-secondary, #666);\n  line-height: 1.45;\n  margin-bottom: 8px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  flex: 1;\n}\n\n.mb-heroCard__footer {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-top: auto;\n}\n\n[data-theme=\"dark\"] .mb-heroCard {\n  background: #2a2a4a;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-heroCard__title a {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-heroCard__desc {\n  color: #b0b0b0;\n}\n\n.mb-blogHero__chips {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-top: 12px;\n}\n\n/* ==========================================================\n   3. VISUAL CATEGORY CARDS â€” Compact pills\n   ========================================================== */\n.mb-categoryCards {\n  padding: 24px 0;\n}\n\n.mb-categoryCards__scroll {\n  display: flex;\n  gap: 10px;\n  padding: 6px 24px;\n  overflow-x: auto;\n  scroll-snap-type: x mandatory;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-width: none;\n  justify-content: flex-start;\n}\n\n.mb-categoryCards__scroll::-webkit-scrollbar {\n  display: none;\n}\n\n.mb-categoryCard {\n  flex: 0 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n  padding: 12px 16px 10px;\n  background: #fff;\n  border: 1px solid #e8e8e8;\n  border-radius: 12px;\n  cursor: pointer;\n  scroll-snap-align: start;\n  transition: transform 0.25s ease, border-color 0.25s ease, box-shadow 0.25s ease, background 0.25s ease, color 0.25s ease;\n  text-align: center;\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.4rem;\n  color: var(--user-accent);\n  position: relative;\n  overflow: hidden;\n}\n\n.mb-categoryCard span {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.7rem;\n  font-weight: 600;\n  color: var(--text-primary, #333);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 95px;\n  transition: color 0.25s ease;\n}\n\n.mb-categoryCard:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);\n  border-color: var(--user-accent);\n}\n\n.mb-categoryCard:nth-child(1) { border-bottom: 3px solid var(--user-accent); }\n.mb-categoryCard:nth-child(1):hover { background: rgba(var(--user-accent-rgb), 0.06); }\n\n.mb-categoryCard:nth-child(2) { border-bottom: 3px solid #f59e42; }\n.mb-categoryCard:nth-child(2):hover { background: rgba(245, 158, 66, 0.06); color: #f59e42; }\n\n.mb-categoryCard:nth-child(3) { border-bottom: 3px solid #5b7fa5; }\n.mb-categoryCard:nth-child(3):hover { background: rgba(91, 127, 165, 0.06); color: #5b7fa5; }\n\n.mb-categoryCard:nth-child(4) { border-bottom: 3px solid #e05252; }\n.mb-categoryCard:nth-child(4):hover { background: rgba(224, 82, 82, 0.06); color: #e05252; }\n\n.mb-categoryCard:nth-child(5) { border-bottom: 3px solid #4A93D4; }\n.mb-categoryCard:nth-child(5):hover { background: rgba(124, 92, 191, 0.06); color: #4A93D4; }\n\n.mb-categoryCard:nth-child(6) { border-bottom: 3px solid #4db896; }\n.mb-categoryCard:nth-child(6):hover { background: rgba(77, 184, 150, 0.06); color: #4db896; }\n\n.mb-categoryCard:nth-child(7) { border-bottom: 3px solid #e07070; }\n.mb-categoryCard:nth-child(7):hover { background: rgba(224, 112, 112, 0.06); color: #e07070; }\n\n.mb-categoryCard:nth-child(8) { border-bottom: 3px solid #4a90d9; }\n.mb-categoryCard:nth-child(8):hover { background: rgba(74, 144, 217, 0.06); color: #4a90d9; }\n\n.mb-categoryCard:nth-child(9) { border-bottom: 3px solid #d97eab; }\n.mb-categoryCard:nth-child(9):hover { background: rgba(217, 126, 171, 0.06); color: #d97eab; }\n\n.mb-categoryCard:nth-child(10) { border-bottom: 3px solid #38b2ac; }\n.mb-categoryCard:nth-child(10):hover { background: rgba(56, 178, 172, 0.06); color: #38b2ac; }\n\n.mb-categoryCard.is-active {\n  background: var(--user-accent);\n  border-color: var(--user-accent);\n  color: #fff;\n  box-shadow: 0 4px 16px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.mb-categoryCard.is-active span {\n  color: #fff;\n}\n\n.mb-categoryCard:nth-child(2).is-active { background: #f59e42; border-color: #f59e42; }\n.mb-categoryCard:nth-child(3).is-active { background: #5b7fa5; border-color: #5b7fa5; }\n.mb-categoryCard:nth-child(4).is-active { background: #e05252; border-color: #e05252; }\n.mb-categoryCard:nth-child(5).is-active { background: #4A93D4; border-color: #4A93D4; }\n.mb-categoryCard:nth-child(6).is-active { background: #4db896; border-color: #4db896; }\n.mb-categoryCard:nth-child(7).is-active { background: #e07070; border-color: #e07070; }\n.mb-categoryCard:nth-child(8).is-active { background: #4a90d9; border-color: #4a90d9; }\n.mb-categoryCard:nth-child(9).is-active { background: #d97eab; border-color: #d97eab; }\n.mb-categoryCard:nth-child(10).is-active { background: #38b2ac; border-color: #38b2ac; }\n\n/* ==========================================================\n   3b. STICKY FILTER CHIPS â€” Fixed behavior\n   ========================================================== */\n.mb-stickyFilters {\n  position: fixed;\n  top: var(--sticky-top, 80px);\n  left: 0;\n  right: 0;\n  z-index: 999;\n  background: #fff;\n  border-bottom: 1px solid #eee;\n  opacity: 0;\n  pointer-events: none;\n  transform: translateY(-100%);\n  transition: opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1), transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n}\n\n.mb-stickyFilters.is-visible {\n  opacity: 1;\n  pointer-events: auto;\n  transform: translateY(0);\n}\n\n.mb-stickyFilters__inner {\n  display: flex;\n  gap: 8px;\n  padding: 10px 24px;\n  overflow-x: auto;\n  scrollbar-width: none;\n  -webkit-overflow-scrolling: touch;\n  max-width: 1320px;\n  margin: 0 auto;\n}\n\n.mb-stickyFilters__inner::-webkit-scrollbar {\n  display: none;\n}\n\n.mb-stickyChip {\n  flex: 0 0 auto;\n  padding: 6px 16px;\n  border-radius: 20px;\n  border: 1px solid #ddd;\n  background: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.78rem;\n  font-weight: 600;\n  color: var(--text-secondary, #666);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n\n.mb-stickyChip:hover {\n  border-color: var(--user-accent);\n  color: var(--user-accent);\n}\n\n.mb-stickyChip.is-active {\n  background: var(--user-accent);\n  color: #fff;\n  border-color: var(--user-accent);\n}\n\n/* ==========================================================\n   4. READING DASHBOARD â€” Compact, Auth Gated\n   ========================================================== */\n.mb-dashboard {\n  background: #fff;\n  padding: 28px 24px;\n  border-radius: 16px;\n  margin-bottom: 32px;\n  border: 1px solid #eee;\n  border-left: 4px solid;\n  border-image: linear-gradient(180deg, var(--user-accent), rgba(var(--user-accent-rgb), 0.3)) 1;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);\n  transition: background 0.3s ease, box-shadow 0.3s ease;\n}\n\n.mb-dashboard--authed {\n  display: block;\n}\n\n.mb-dashboard--guest {\n  display: none;\n}\n\n.mb-dashboard__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  gap: 16px;\n  margin-bottom: 18px;\n}\n\n.mb-dashboard__greeting {\n  flex: 1;\n}\n\n.mb-dashboard__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: var(--text-primary, #1a1a2e);\n  margin: 0;\n}\n\n.mb-dashboard__subtitle {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  color: var(--text-secondary, #666);\n  margin: 4px 0 0;\n}\n\n.mb-dashboard__stats {\n  display: flex;\n  gap: 20px;\n  align-items: center;\n}\n\n.mb-dashboard__ring {\n  width: 72px;\n  height: 72px;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.mb-dashboard__ring svg {\n  width: 100%;\n  height: 100%;\n  transform: rotate(-90deg);\n}\n\n.mb-dashboard__ringFill {\n  transition: stroke-dashoffset 1.5s ease;\n}\n\n.mb-dashboard__ringText {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.8rem;\n  font-weight: 800;\n  color: var(--user-accent-text, var(--user-accent));\n}\n\n.mb-dashboard__streak {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--user-accent-text, var(--user-accent));\n}\n\n.mb-dashboard__streak ion-icon {\n  color: #e67e22;\n  font-size: 1.3rem;\n  animation: fireFlicker 1.5s ease-in-out infinite;\n}\n\n.mb-dashboard__streakCount {\n  font-size: 1.4rem;\n  font-weight: 800;\n}\n\n.mb-dashboard__streakLabel {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: var(--text-secondary, #666);\n}\n\n.mb-dashboard__cards {\n  display: flex;\n  gap: 14px;\n  overflow-x: auto;\n  scroll-snap-type: x mandatory;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-width: none;\n  padding-bottom: 4px;\n}\n\n.mb-dashboard__cards::-webkit-scrollbar {\n  display: none;\n}\n\n.mb-dashboard__card {\n  flex: 0 0 260px;\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  padding: 12px;\n  background: #f9f9fb;\n  border: 1px solid #eee;\n  border-radius: 12px;\n  scroll-snap-align: start;\n  transition: box-shadow 0.25s ease, transform 0.25s ease;\n  cursor: pointer;\n  text-decoration: none;\n  color: inherit;\n}\n\n.mb-dashboard__card:hover {\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);\n  transform: translateY(-2px);\n}\n\n.mb-dashboard__cardThumb {\n  width: 52px;\n  height: 52px;\n  border-radius: 10px;\n  object-fit: cover;\n  flex-shrink: 0;\n}\n\n.mb-dashboard__cardBody {\n  flex: 1;\n  min-width: 0;\n}\n\n.mb-dashboard__cardTitle {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  font-weight: 600;\n  color: var(--text-primary, #333);\n  display: block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-bottom: 6px;\n}\n\n.mb-dashboard__cardBar {\n  height: 4px;\n  background: #e8e8e8;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.mb-dashboard__cardBarFill {\n  height: 100%;\n  background: linear-gradient(90deg, var(--user-accent), rgba(var(--user-accent-rgb), 0.6));\n  border-radius: 4px;\n  transition: width 0.6s ease;\n}\n\n.mb-dashboard__guest {\n  text-align: center;\n  padding: 20px 16px;\n  color: var(--text-secondary, #666);\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n}\n\n.mb-dashboard__guest a {\n  color: var(--user-accent);\n  font-weight: 600;\n  text-decoration: underline;\n  text-underline-offset: 2px;\n}\n\n/* ==========================================================\n   5. STAT COUNTERS â€” Compact Inline\n   ========================================================== */\n.mb-stats {\n  padding: 16px 0;\n  margin-top: 20px;\n}\n\n.mb-stats__grid {\n  display: flex;\n  gap: 20px;\n  flex-wrap: wrap;\n  align-items: center;\n}\n\n.mb-stats__item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  position: relative;\n}\n\n.mb-stats__item:not(:last-child)::after {\n  content: '';\n  width: 1px;\n  height: 16px;\n  background: rgba(var(--user-accent-rgb), 0.2);\n  margin-left: 14px;\n}\n\n.mb-stats__number {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 800;\n  color: var(--user-accent);\n  line-height: 1;\n  animation: countUp 0.6s ease both;\n}\n\n.mb-stats__label {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: var(--text-secondary, #777);\n  text-transform: uppercase;\n  letter-spacing: 0.03em;\n}\n\n/* ==========================================================\n   6. ARTICLE OF THE DAY\n   ========================================================== */\n.mb-articleOfDay {\n  position: relative;\n  padding: 0;\n  margin-bottom: 40px;\n}\n\n.mb-articleOfDay__badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 16px;\n  background: var(--user-accent);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.7rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.06em;\n  border-radius: 20px;\n  margin-bottom: 16px;\n  animation: pulseGlow 3s ease-in-out infinite;\n}\n\n.mb-articleOfDay__badge ion-icon {\n  font-size: 0.9rem;\n}\n\n.mb-articleOfDay__card {\n  display: flex;\n  flex-direction: column;\n  background: #fff;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  transition: box-shadow 0.3s ease, transform 0.3s ease;\n}\n\n.mb-articleOfDay__card:hover {\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);\n  transform: translateY(-4px);\n}\n\n.mb-articleOfDay__imgWrap {\n  position: relative;\n  overflow: hidden;\n  aspect-ratio: 16 / 10;\n}\n\n.mb-articleOfDay__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.5s ease;\n}\n\n.mb-articleOfDay__card:hover .mb-articleOfDay__img {\n  transform: scale(1.05);\n}\n\n.mb-articleOfDay__overlay {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(to top, rgba(0,0,0,0.2) 0%, transparent 60%);\n}\n\n.mb-articleOfDay__content {\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.mb-articleOfDay__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.3rem;\n  font-weight: 700;\n  line-height: 1.25;\n  color: var(--text-primary, #1a1a2e);\n  margin: 0;\n}\n\n.mb-articleOfDay__title a {\n  color: inherit;\n  text-decoration: none;\n  transition: color 0.2s ease;\n}\n\n.mb-articleOfDay__title a:hover {\n  color: var(--user-accent);\n}\n\n.mb-articleOfDay__desc {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  line-height: 1.6;\n  color: var(--text-secondary, #555);\n  margin: 0;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.mb-articleOfDay__actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex-wrap: wrap;\n  margin-top: 4px;\n}\n\n.mb-blogHero__right .mb-articleOfDay {\n  margin-bottom: 0;\n}\n\n.mb-blogHero__right .mb-articleOfDay__card {\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);\n}\n\n/* ==========================================================\n   7. FEATURED SPOTLIGHT â€” Side by Side\n   ========================================================== */\n.mb-featuredSpotlight {\n  margin-bottom: 48px;\n}\n\n.mb-featureCard {\n  display: grid;\n  grid-template-columns: 45% 55%;\n  background: #fff;\n  border: 1px solid #eee;\n  border-radius: 16px;\n  overflow: hidden;\n  transition: box-shadow 0.35s ease;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);\n}\n\n.mb-featureCard:hover {\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);\n}\n\n.mb-featureCard__imgWrap {\n  position: relative;\n  overflow: hidden;\n  display: block;\n  min-height: 320px;\n}\n\n.mb-featureCard__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n  transition: transform 0.6s ease;\n}\n\n.mb-featureCard:hover .mb-featureCard__img {\n  transform: scale(1.05);\n}\n\n.mb-featureCard__overlay {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(to right, transparent 60%, rgba(0,0,0,0.03) 100%);\n}\n\n.mb-featureCard__content {\n  padding: 32px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 10px;\n}\n\n.mb-featureCard__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 700;\n  line-height: 1.25;\n  color: var(--text-primary, #1a1a2e);\n  margin: 0;\n}\n\n.mb-featureCard__title a {\n  color: inherit;\n  text-decoration: none;\n  transition: color 0.2s ease;\n}\n\n.mb-featureCard__title a:hover {\n  color: var(--user-accent);\n}\n\n.mb-featureCard__desc {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  line-height: 1.7;\n  color: var(--text-secondary, #555);\n  margin: 0;\n}\n\n.mb-featureCard__subtext {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  color: var(--text-secondary, #888);\n  line-height: 1.55;\n  margin: 0;\n}\n\n/* ==========================================================\n   8. PILLS, BUTTONS & META\n   ========================================================== */\n.mb-pill {\n  display: inline-block;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.7rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n  padding: 4px 12px;\n  border-radius: 6px;\n  background: var(--user-accent-soft, rgba(var(--user-accent-rgb), 0.1));\n  color: var(--user-accent);\n}\n\n.mb-pill--news { background: #dbeafe; color: #2563eb; }\n.mb-pill--story { background: #fce7f3; color: #db2777; }\n.mb-pill--community { background: #d1fae5; color: #059669; }\n\n.mb-metaRow {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex-wrap: wrap;\n  margin-bottom: 10px;\n}\n\n.mb-metaDot {\n  color: var(--text-secondary, #ccc);\n  font-size: 0.65rem;\n}\n\n.mb-metaText {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.8rem;\n  font-weight: 500;\n  color: var(--text-secondary, #888);\n}\n\n.mb-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.88rem;\n  font-weight: 600;\n  padding: 12px 24px;\n  border-radius: 10px;\n  border: none;\n  cursor: pointer;\n  text-decoration: none;\n  transition: background 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;\n  background: var(--user-accent);\n  color: #fff;\n}\n\n.mb-btn:hover {\n  background: var(--user-accent-dark, var(--user-accent));\n  color: #fff;\n  box-shadow: 0 4px 16px rgba(var(--user-accent-rgb), 0.25);\n  transform: translateY(-1px);\n}\n\n.mb-btn--ghost {\n  background: transparent;\n  border: 1.5px solid var(--user-accent);\n  color: var(--user-accent);\n}\n\n.mb-btn--ghost:hover {\n  background: var(--user-accent-soft, rgba(var(--user-accent-rgb), 0.08));\n  color: var(--user-accent);\n  box-shadow: none;\n}\n\n.mb-btn--sm {\n  font-size: 0.82rem;\n  padding: 8px 18px;\n  border-radius: 8px;\n}\n\n.mb-postHint {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  color: var(--text-secondary, #666);\n  background: rgba(var(--user-accent-rgb), 0.04);\n  padding: 8px 12px;\n  border-radius: 8px;\n  border-left: 3px solid var(--user-accent);\n  margin-bottom: 8px;\n}\n\n/* ==========================================================\n   9. BLOG GRID LAYOUT\n   ========================================================== */\n.mb-blog {\n  position: relative;\n}\n\n.mb-blogGrid {\n  display: grid;\n  grid-template-columns: 1fr 300px;\n  gap: 2rem;\n  max-width: 1320px;\n  margin: 0 auto;\n  padding: 2rem 24px;\n}\n\n.mb-blogContent {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 1.5rem 24px;\n}\n\n.mb-articleGrid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 24px;\n}\n\n.mb-articleCard {\n  background: #fff;\n  border-radius: 14px;\n  overflow: hidden;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);\n  border: 1px solid rgba(0, 0, 0, 0.06);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  display: flex;\n  flex-direction: column;\n}\n\n.mb-articleCard:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 28px rgba(0, 0, 0, 0.1);\n}\n\n.mb-articleCard__imgWrap {\n  display: block;\n  position: relative;\n  aspect-ratio: 16 / 9;\n  overflow: hidden;\n}\n\n.mb-articleCard__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.4s ease;\n}\n\n.mb-articleCard:hover .mb-articleCard__img {\n  transform: scale(1.04);\n}\n\n.mb-articleCard__body {\n  padding: 16px 18px 18px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.mb-articleCard__meta {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-bottom: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.75rem;\n}\n\n.mb-articleCard__source,\n.mb-articleCard__readtime {\n  color: var(--text-secondary, #888);\n}\n\n.mb-articleCard__audio {\n  display: inline-flex;\n  align-items: center;\n  gap: 3px;\n  color: var(--user-accent);\n  font-weight: 600;\n}\n\n.mb-articleCard__audio ion-icon {\n  font-size: 0.85rem;\n}\n\n.mb-articleCard__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  font-weight: 700;\n  line-height: 1.3;\n  margin-bottom: 6px;\n}\n\n.mb-articleCard__title a {\n  color: var(--text-primary, #1a1a2e);\n  text-decoration: none;\n  transition: color 0.2s ease;\n}\n\n.mb-articleCard__title a:hover {\n  color: var(--user-accent);\n}\n\n.mb-articleCard__desc {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  color: var(--text-secondary, #666);\n  line-height: 1.5;\n  margin-bottom: 12px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  flex: 1;\n}\n\n[data-theme=\"dark\"] .mb-articleCard {\n  background: #2a2a4a;\n  border-color: rgba(255, 255, 255, 0.06);\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);\n}\n\n[data-theme=\"dark\"] .mb-articleCard:hover {\n  box-shadow: 0 8px 28px rgba(0, 0, 0, 0.35);\n}\n\n[data-theme=\"dark\"] .mb-articleCard__title a {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-articleCard__desc {\n  color: #b0b0b0;\n}\n\n.mb-posts {\n  flex: 1;\n  min-width: 0;\n}\n\n.mb-resultsBar {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 16px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  color: var(--text-secondary, #777);\n  border-bottom: 1px solid #eee;\n  margin-bottom: 28px;\n  background: #fafafa;\n  border-radius: 10px;\n}\n\n.mb-resultsBar__left {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.mb-resultsBar__count {\n  font-weight: 600;\n  color: var(--text-primary, #333);\n}\n\n.mb-resultsBar__active {\n  font-size: 0.78rem;\n  color: var(--user-accent);\n}\n\n.mb-resultsBar__right {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.mb-resultsBar__reset {\n  background: none;\n  border: 1px solid #ddd;\n  padding: 5px 16px;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.78rem;\n  color: var(--text-secondary, #666);\n  cursor: pointer;\n  transition: border-color 0.2s, color 0.2s, background 0.2s;\n}\n\n.mb-resultsBar__reset:hover {\n  border-color: var(--user-accent);\n  color: var(--user-accent);\n  background: rgba(var(--user-accent-rgb), 0.04);\n}\n\n.mb-emptyState {\n  display: none;\n  text-align: center;\n  padding: 56px 24px;\n  color: var(--text-secondary, #666);\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n}\n\n.mb-emptyState.is-visible {\n  display: block;\n}\n\n/* Section headings */\n.mb-sectionHead {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 1.5rem;\n  padding-bottom: 0.6rem;\n  border-bottom: 2px solid rgba(var(--user-accent-rgb), 0.15);\n  position: relative;\n}\n\n.mb-sectionHead__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--text-primary, #1a1a2e);\n  line-height: 1.3;\n  margin: 0;\n}\n\n.mb-sectionHead__subtitle {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  color: var(--text-secondary, #888);\n}\n\n.mb-sectionHead__more {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  font-weight: 600;\n  color: var(--user-accent);\n  text-decoration: none;\n  transition: opacity 0.2s;\n}\n\n.mb-sectionHead__more:hover {\n  text-decoration: underline;\n  opacity: 0.85;\n}\n\n/* ==========================================================\n   10. ARTICLE CARD GRIDS\n   ========================================================== */\n.mb-3up {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 24px;\n  margin-bottom: 40px;\n}\n\n.mb-2up {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 24px;\n  margin-bottom: 40px;\n}\n\n.mb-3grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 20px;\n  margin-bottom: 40px;\n}\n\n/* ==========================================================\n   11. POST CARD â€” Magazine Style\n   ========================================================== */\n.mb-postCard {\n  background: #fff;\n  border-radius: 12px;\n  overflow: hidden;\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  position: relative;\n  animation: fadeInUp 0.5s ease both;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);\n}\n\n.mb-postCard:nth-child(2) { animation-delay: 0.08s; }\n.mb-postCard:nth-child(3) { animation-delay: 0.16s; }\n\n.mb-postCard:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.1);\n}\n\n.mb-postCard__imgWrap {\n  position: relative;\n  overflow: hidden;\n  display: block;\n  aspect-ratio: 16 / 9;\n}\n\n.mb-postCard__imgWrap img,\n.mb-postCard__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n  border-radius: 12px 12px 0 0;\n  transition: transform 0.5s ease;\n}\n\n.mb-postCard:hover .mb-postCard__imgWrap img,\n.mb-postCard:hover .mb-postCard__img {\n  transform: scale(1.06);\n}\n\n.mb-postCard__body {\n  padding: 20px;\n  position: relative;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.mb-postCard__topRow {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-bottom: 10px;\n}\n\n.mb-postCard__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 600;\n  line-height: 1.35;\n  margin: 0 0 8px;\n  color: var(--text-primary, #1a1a2e);\n}\n\n.mb-postCard__title a {\n  color: inherit;\n  text-decoration: none;\n  transition: color 0.2s ease;\n}\n\n.mb-postCard__title a:hover {\n  color: var(--user-accent);\n}\n\n.mb-postCard__meta {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.8rem;\n  font-weight: 500;\n  color: var(--text-secondary, #888);\n  margin-bottom: 8px;\n}\n\n.mb-postCard__excerpt {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  font-weight: 400;\n  line-height: 1.65;\n  color: var(--text-secondary, #666);\n  margin-bottom: 12px;\n  flex: 1;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.mb-postCard__subtext {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  color: var(--text-secondary, #888);\n  line-height: 1.55;\n  margin: 0 0 8px;\n}\n\n.mb-linkArrow {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  font-weight: 600;\n  color: var(--user-accent);\n  text-decoration: none;\n  transition: gap 0.2s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.mb-linkArrow:hover {\n  gap: 8px;\n  color: var(--user-accent-dark, var(--user-accent));\n}\n\n.mb-tts-badge-overlay {\n  position: absolute;\n  top: 0.7rem;\n  right: 0.7rem;\n  background: rgba(255,255,255,0.92);\n  border-radius: 50%;\n  width: 34px;\n  height: 34px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1rem;\n  color: var(--user-accent);\n  z-index: 2;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n}\n\n.mb-new-badge {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  background: var(--user-accent);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.6rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  padding: 3px 8px;\n  border-radius: 4px;\n  letter-spacing: 0.05em;\n  z-index: 2;\n}\n\n/* ==========================================================\n   12. MOOD INDICATORS\n   ========================================================== */\n.mb-mood {\n  display: inline-flex;\n  align-items: center;\n  gap: 5px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.68rem;\n  font-weight: 500;\n  padding: 3px 10px;\n  border-radius: 12px;\n}\n\n.mb-mood--uplifting   { background: #dcfce7; color: #16a34a; }\n.mb-mood--informative { background: #dbeafe; color: #2563eb; }\n.mb-mood--personal    { background: #ede9fe; color: #7c3aed; }\n.mb-mood--heavy       { background: #fef3c7; color: #d97706; }\n\n/* ==========================================================\n   13. BOOKMARK BUTTON\n   ========================================================== */\n.mb-cardBookmark {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  width: 34px;\n  height: 34px;\n  border-radius: 10px;\n  background: #fff;\n  border: 1px solid #eee;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.9rem;\n  color: var(--text-secondary, #888);\n  cursor: pointer;\n  opacity: 0;\n  transform: scale(0.85);\n  transition: opacity 0.2s ease, transform 0.2s ease, color 0.2s ease, background 0.2s ease;\n  z-index: 3;\n}\n\n.mb-postCard:hover .mb-cardBookmark,\n.mb-featureCard:hover .mb-cardBookmark {\n  opacity: 1;\n  transform: scale(1);\n}\n\n.mb-cardBookmark:hover {\n  color: var(--user-accent);\n  background: var(--user-accent-soft, rgba(var(--user-accent-rgb), 0.08));\n  border-color: rgba(var(--user-accent-rgb), 0.3);\n}\n\n.mb-cardBookmark.is-saved {\n  opacity: 1;\n  color: var(--user-accent);\n  background: var(--user-accent-soft, rgba(var(--user-accent-rgb), 0.08));\n}\n\n.mb-cardProgress {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background: rgba(0, 0, 0, 0.08);\n}\n\n.mb-cardProgress__bar {\n  height: 100%;\n  background: linear-gradient(90deg, var(--user-accent), rgba(var(--user-accent-rgb), 0.6));\n  border-radius: 0 2px 2px 0;\n  transition: width 0.4s ease;\n}\n\n/* ==========================================================\n   14. ARTICLE PREVIEW PANEL\n   ========================================================== */\n.mb-previewOverlay {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 9989;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.3s ease, visibility 0s 0.3s;\n}\n\n.mb-previewOverlay.is-open {\n  opacity: 1;\n  visibility: visible;\n  transition: opacity 0.3s ease, visibility 0s;\n}\n\n.mb-previewPanel {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 480px;\n  max-width: 100%;\n  background: #fff;\n  z-index: 9990;\n  transform: translateX(100%);\n  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  flex-direction: column;\n  box-shadow: -6px 0 30px rgba(0, 0, 0, 0.15);\n}\n\n.mb-previewPanel.is-open {\n  transform: translateX(0);\n}\n\n.mb-previewPanel__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 18px 22px;\n  border-bottom: 1px solid #eee;\n  flex-shrink: 0;\n}\n\n.mb-previewPanel__category {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.7rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  color: var(--user-accent);\n}\n\n.mb-previewPanel__close {\n  width: 38px;\n  height: 38px;\n  border-radius: 10px;\n  border: 1px solid #eee;\n  background: transparent;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.2rem;\n  color: var(--text-primary, #333);\n  cursor: pointer;\n  transition: background 0.2s ease;\n}\n\n.mb-previewPanel__close:hover {\n  background: #f5f5f5;\n}\n\n.mb-previewPanel__body {\n  flex: 1;\n  overflow-y: auto;\n  padding: 22px;\n}\n\n.mb-previewPanel__img {\n  width: 100%;\n  border-radius: 12px;\n  margin-bottom: 18px;\n  object-fit: cover;\n  max-height: 260px;\n}\n\n.mb-previewPanel__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.35rem;\n  font-weight: 700;\n  color: var(--text-primary, #1a1a2e);\n  line-height: 1.3;\n  margin-bottom: 10px;\n}\n\n.mb-previewPanel__meta {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.8rem;\n  color: var(--text-secondary, #888);\n  margin-bottom: 8px;\n}\n\n.mb-previewPanel__mood {\n  display: inline-block;\n  font-size: 0.72rem;\n  padding: 3px 10px;\n  border-radius: 12px;\n  margin-bottom: 16px;\n}\n\n.mb-previewPanel__excerpt {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.92rem;\n  line-height: 1.7;\n  color: var(--text-secondary, #555);\n  margin-bottom: 20px;\n}\n\n.mb-previewPanel__takeaways h4 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.88rem;\n  font-weight: 700;\n  color: var(--text-primary, #333);\n  margin: 0 0 10px;\n}\n\n.mb-previewPanel__takeawaysList {\n  padding-left: 0;\n  list-style: none;\n}\n\n.mb-previewPanel__takeawaysList li {\n  position: relative;\n  padding-left: 18px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.88rem;\n  line-height: 1.65;\n  color: var(--text-primary, #333);\n  margin-bottom: 8px;\n}\n\n.mb-previewPanel__takeawaysList li::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 9px;\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: var(--user-accent);\n}\n\n.mb-previewPanel__tts {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 18px;\n  border: 1px solid #ddd;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  font-weight: 500;\n  color: var(--text-primary, #333);\n  cursor: pointer;\n  background: transparent;\n  transition: border-color 0.2s ease, background 0.2s ease;\n  margin-bottom: 16px;\n}\n\n.mb-previewPanel__tts:hover {\n  border-color: var(--user-accent);\n  background: var(--user-accent-soft, rgba(var(--user-accent-rgb), 0.08));\n}\n\n.mb-previewPanel__footer {\n  padding: 16px 22px;\n  border-top: 1px solid #eee;\n  flex-shrink: 0;\n}\n\n.mb-previewPanel__readBtn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  width: 100%;\n  padding: 14px;\n  text-align: center;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: #fff;\n  background: var(--user-accent);\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  text-decoration: none;\n  transition: background 0.2s ease, box-shadow 0.2s ease;\n}\n\n.mb-previewPanel__readBtn:hover {\n  background: var(--user-accent-dark, var(--user-accent));\n  color: #fff;\n  box-shadow: 0 4px 16px rgba(var(--user-accent-rgb), 0.25);\n}\n\n/* ==========================================================\n   15. FLOATING TABLE OF CONTENTS\n   ========================================================== */\n.mb-blogToc {\n  position: sticky;\n  top: 120px;\n  width: 200px;\n  max-height: calc(100vh - 160px);\n  overflow-y: auto;\n  padding: 16px 0 16px 16px;\n  scrollbar-width: none;\n  display: none;\n  flex-shrink: 0;\n}\n\n.mb-blogToc::-webkit-scrollbar {\n  display: none;\n}\n\n.mb-blogToc__progress {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 3px;\n  height: 100%;\n  background: #eee;\n  border-radius: 2px;\n}\n\n.mb-blogToc__nav {\n  position: relative;\n  padding-left: 16px;\n  border-left: 2px solid #eee;\n}\n\n.mb-blogToc__link {\n  display: block;\n  padding: 6px 0;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.75rem;\n  color: var(--text-secondary, #777);\n  transition: color 0.2s ease;\n  line-height: 1.4;\n  text-decoration: none;\n}\n\n.mb-blogToc__link:hover {\n  color: var(--user-accent);\n}\n\n.mb-blogToc__link.is-active {\n  color: var(--user-accent);\n  font-weight: 600;\n}\n\n/* ==========================================================\n   16. NEWSLETTER CTA â€” Full Width Banner\n   ========================================================== */\n.mb-newsletterCta {\n  background: linear-gradient(\n    135deg,\n    var(--user-accent) 0%,\n    rgba(var(--user-accent-rgb), 0.85) 100%\n  );\n  border: none;\n  border-radius: 16px;\n  padding: 48px 36px;\n  text-align: center;\n  margin: 48px 0;\n  box-shadow: 0 4px 20px rgba(var(--user-accent-rgb), 0.2);\n}\n\n.mb-newsletterCta__icon {\n  font-size: 2.2rem;\n  color: #fff;\n  margin-bottom: 14px;\n}\n\n.mb-newsletterCta__content {\n  margin-bottom: 24px;\n}\n\n.mb-newsletterCta__text h3,\n.mb-newsletterCta__text h4 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: #fff;\n  margin: 0 0 8px;\n}\n\n.mb-newsletterCta__text p {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  color: rgba(255, 255, 255, 0.9);\n  max-width: 460px;\n  margin: 0 auto;\n  line-height: 1.65;\n}\n\n.mb-newsletterCta__form {\n  display: flex;\n  gap: 0;\n  max-width: 440px;\n  margin: 0 auto;\n  border-radius: 12px;\n  overflow: hidden;\n  background: #fff;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n}\n\n.mb-newsletterCta__form input[type=\"email\"] {\n  flex: 1;\n  padding: 14px 18px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  border: none;\n  outline: none;\n  background: transparent;\n  color: #333;\n}\n\n.mb-newsletterCta__form button {\n  padding: 14px 28px;\n  background: var(--user-accent);\n  color: #fff;\n  border: none;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.88rem;\n  font-weight: 600;\n  cursor: pointer;\n  white-space: nowrap;\n  transition: background 0.2s ease;\n}\n\n.mb-newsletterCta__form button:hover {\n  background: var(--user-accent-dark, var(--user-accent));\n}\n\n/* ==========================================================\n   17. COMMUNITY HUB CTA â€” Full Width Banner\n   ========================================================== */\n.mb-communityCta {\n  background: linear-gradient(\n    135deg,\n    rgba(var(--user-accent-rgb), 0.08) 0%,\n    rgba(var(--user-accent-rgb), 0.02) 100%\n  );\n  border: 1px solid rgba(var(--user-accent-rgb), 0.12);\n  border-radius: 16px;\n  padding: 40px 36px;\n  display: flex;\n  align-items: center;\n  gap: 28px;\n  margin: 48px 0;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.mb-communityCta:hover {\n  border-color: rgba(var(--user-accent-rgb), 0.3);\n  box-shadow: 0 6px 24px rgba(var(--user-accent-rgb), 0.1);\n}\n\n.mb-communityCta__icon {\n  font-size: 2.8rem;\n  color: var(--user-accent);\n  flex-shrink: 0;\n}\n\n.mb-communityCta__content {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.mb-communityCta__text h3,\n.mb-communityCta__text h4 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: var(--text-primary, #1a1a2e);\n  margin: 0 0 6px;\n}\n\n.mb-communityCta__text p {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  color: var(--text-secondary, #666);\n  line-height: 1.65;\n  margin: 0;\n}\n\n.mb-communityCta__btn {\n  flex-shrink: 0;\n  padding: 12px 26px;\n  background: var(--user-accent);\n  color: #fff;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.88rem;\n  font-weight: 600;\n  transition: background 0.2s ease, box-shadow 0.2s ease;\n  white-space: nowrap;\n  text-decoration: none;\n}\n\n.mb-communityCta__btn:hover {\n  background: var(--user-accent-dark, var(--user-accent));\n  color: #fff;\n  box-shadow: 0 4px 12px rgba(var(--user-accent-rgb), 0.2);\n}\n\n/* ==========================================================\n   18. BACK TO TOP\n   ========================================================== */\n.back-to-top {\n  position: fixed;\n  bottom: 28px;\n  right: 28px;\n  width: 46px;\n  height: 46px;\n  border-radius: 50%;\n  background: var(--user-accent);\n  color: #fff;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.2rem;\n  cursor: pointer;\n  opacity: 0;\n  visibility: hidden;\n  transform: translateY(12px);\n  transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease, background 0.2s ease;\n  z-index: 999;\n  box-shadow: 0 4px 16px rgba(var(--user-accent-rgb), 0.3);\n}\n\n.back-to-top.is-visible {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n\n.back-to-top:hover {\n  background: var(--user-accent-dark, var(--user-accent));\n  transform: translateY(-3px);\n}\n\n/* ==========================================================\n   19. MINI CARDS â€” 2up compact horizontal\n   ========================================================== */\n.mb-2up.mb-2up--mini {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n}\n\n.mb-miniCard {\n  display: grid;\n  grid-template-columns: 120px 1fr;\n  background: #fff;\n  border-radius: 12px;\n  overflow: hidden;\n  transition: box-shadow 0.25s ease, transform 0.25s ease;\n  position: relative;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);\n}\n\n.mb-miniCard:hover {\n  box-shadow: 0 8px 28px rgba(0,0,0,0.1);\n  transform: translateY(-4px);\n}\n\n.mb-miniCard__imgWrap {\n  position: relative;\n  overflow: hidden;\n}\n\n.mb-miniCard__img {\n  width: 120px;\n  height: 120px;\n  object-fit: cover;\n  border-radius: 12px 0 0 12px;\n  transition: transform 0.5s ease;\n}\n\n.mb-miniCard:hover .mb-miniCard__img {\n  transform: scale(1.06);\n}\n\n.mb-miniCard__content {\n  padding: 14px 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 0.35rem;\n}\n\n.mb-miniCard__pill {\n  font-size: 0.7rem;\n}\n\n.mb-miniCard__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  font-weight: 600;\n  line-height: 1.35;\n  margin: 0;\n}\n\n.mb-miniCard__title a {\n  color: var(--text-primary, #1a1a2e);\n  text-decoration: none;\n  transition: color 0.2s;\n}\n\n.mb-miniCard__title a:hover {\n  color: var(--user-accent);\n}\n\n.mb-miniCard__meta {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.75rem;\n  color: var(--text-secondary, #888);\n}\n\n.mb-miniCard .mb-postHint {\n  font-size: 0.75rem;\n  margin: 0;\n}\n\n.mb-miniCard .mb-linkArrow {\n  font-size: 0.78rem;\n}\n\n.mb-miniCard .mb-cardBookmark {\n  position: absolute;\n  top: 0.5rem;\n  right: 0.5rem;\n}\n\n/* ==========================================================\n   20. LIST STACK / LIST POSTS â€” Horizontal Cards\n   ========================================================== */\n.mb-listStack {\n  display: flex;\n  flex-direction: column;\n  gap: 0;\n  margin-bottom: 2rem;\n}\n\n.mb-listPost {\n  display: grid;\n  grid-template-columns: 200px 1fr;\n  background: #fff;\n  border-bottom: 1px solid #eee;\n  overflow: hidden;\n  transition: background 0.25s ease;\n  padding: 20px 0;\n}\n\n.mb-listPost:first-child {\n  padding-top: 0;\n}\n\n.mb-listPost:last-child {\n  border-bottom: none;\n}\n\n.mb-listPost:hover {\n  background: rgba(var(--user-accent-rgb), 0.02);\n}\n\n.mb-listPost__imgWrap {\n  position: relative;\n  overflow: hidden;\n  border-radius: 12px;\n}\n\n.mb-listPost__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  min-height: 160px;\n  border-radius: 12px;\n  transition: transform 0.5s ease;\n}\n\n.mb-listPost:hover .mb-listPost__img {\n  transform: scale(1.05);\n}\n\n.mb-listPost__body {\n  padding: 0 0 0 24px;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  justify-content: center;\n}\n\n.mb-listPost__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 600;\n  line-height: 1.35;\n  margin: 0;\n}\n\n.mb-listPost__title a {\n  color: var(--text-primary, #1a1a2e);\n  text-decoration: none;\n  transition: color 0.2s;\n}\n\n.mb-listPost__title a:hover {\n  color: var(--user-accent);\n}\n\n.mb-listPost__excerpt {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  color: var(--text-secondary, #555);\n  line-height: 1.6;\n  margin: 0;\n}\n\n.mb-listPost__subtext {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.8rem;\n  color: var(--text-secondary, #888);\n  line-height: 1.55;\n  margin: 0;\n}\n\n.mb-listPost .mb-postHint {\n  font-size: 0.78rem;\n}\n\n.mb-listPost .mb-linkArrow {\n  font-size: 0.82rem;\n  margin-top: auto;\n}\n\n/* ==========================================================\n   21. COMPACT CARDS â€” 3grid\n   ========================================================== */\n.mb-compactCard {\n  background: #fff;\n  border-radius: 12px;\n  overflow: hidden;\n  padding-bottom: 1rem;\n  transition: box-shadow 0.25s ease, transform 0.25s ease;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);\n}\n\n.mb-compactCard:hover {\n  box-shadow: 0 8px 28px rgba(0,0,0,0.1);\n  transform: translateY(-4px);\n}\n\n.mb-compactCard__imgWrap {\n  position: relative;\n  display: block;\n  overflow: hidden;\n  aspect-ratio: 16 / 10;\n}\n\n.mb-compactCard__img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.5s ease;\n}\n\n.mb-compactCard:hover .mb-compactCard__img {\n  transform: scale(1.06);\n}\n\n.mb-compactCard__imgWrap::after {\n  content: '';\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(to top, rgba(0,0,0,0.1) 0%, transparent 50%);\n  pointer-events: none;\n}\n\n.mb-compactCard__pill {\n  position: absolute;\n  bottom: 0.6rem;\n  left: 0.6rem;\n  z-index: 2;\n  background: rgba(255,255,255,0.92);\n  font-size: 0.7rem;\n}\n\n.mb-compactCard > .mb-mood {\n  display: inline-block;\n  margin: 0.8rem 1rem 0;\n}\n\n.mb-compactCard__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.92rem;\n  font-weight: 600;\n  line-height: 1.35;\n  margin: 0.35rem 1rem 0;\n}\n\n.mb-compactCard__title a {\n  color: var(--text-primary, #1a1a2e);\n  text-decoration: none;\n  transition: color 0.2s;\n}\n\n.mb-compactCard__title a:hover {\n  color: var(--user-accent);\n}\n\n.mb-compactCard__meta {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.75rem;\n  color: var(--text-secondary, #888);\n  margin: 0.25rem 1rem 0;\n}\n\n.mb-compactCard .mb-postHint {\n  font-size: 0.75rem;\n  margin: 0.3rem 1rem 0;\n}\n\n/* ==========================================================\n   22. SIDEBAR WIDGETS\n   ========================================================== */\n.mb-sidebar {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.mb-widget {\n  background: #fff;\n  border: 1px solid #eee;\n  border-radius: 14px;\n  padding: 1.25rem;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.03);\n}\n\n.mb-widget__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n  color: var(--text-primary, #1a1a2e);\n  margin-bottom: 0.8rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 2px solid rgba(var(--user-accent-rgb), 0.15);\n}\n\n.mb-widget__text {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  color: var(--text-secondary, #666);\n  line-height: 1.55;\n  margin: 0 0 0.8rem;\n}\n\n.mb-sideSearch__input {\n  width: 100%;\n  padding: 11px 14px;\n  border: 1px solid #e0e0e0;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  outline: none;\n  transition: border-color 0.2s;\n  background: #fafafa;\n  box-sizing: border-box;\n}\n\n.mb-sideSearch__input:focus {\n  border-color: var(--user-accent);\n}\n\n.mb-trending {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.mb-trending__item {\n  display: flex;\n  gap: 0.7rem;\n  text-decoration: none;\n  padding: 0.5rem;\n  border-radius: 10px;\n  transition: background 0.2s;\n}\n\n.mb-trending__item:hover {\n  background: rgba(var(--user-accent-rgb), 0.04);\n}\n\n.mb-trending__thumb {\n  width: 60px;\n  height: 50px;\n  border-radius: 8px;\n  object-fit: cover;\n  flex-shrink: 0;\n}\n\n.mb-trending__kicker {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.62rem;\n  font-weight: 700;\n  color: var(--user-accent);\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n}\n\n.mb-trending__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.8rem;\n  font-weight: 600;\n  color: var(--text-primary, #1a1a2e);\n  line-height: 1.3;\n}\n\n.mb-trending__text .mb-postHint {\n  font-size: 0.68rem;\n  padding: 3px 6px;\n  margin-top: 3px;\n}\n\n.mb-cats {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.mb-catBtn {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  padding: 8px 12px;\n  border: none;\n  background: none;\n  border-radius: 8px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.8rem;\n  color: var(--text-secondary, #555);\n  cursor: pointer;\n  transition: background 0.2s, color 0.2s;\n}\n\n.mb-catBtn:hover,\n.mb-catBtn.is-active {\n  background: var(--user-accent-soft, rgba(var(--user-accent-rgb), 0.06));\n  color: var(--user-accent);\n  font-weight: 600;\n}\n\n.mb-savedList {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.mb-savedEmpty {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  color: var(--text-secondary, #888);\n  text-align: center;\n  padding: 0.5rem;\n}\n\n.mb-savedItem {\n  padding: 8px;\n  border-radius: 8px;\n  background: #fafafa;\n  border: 1px solid #eee;\n}\n\n.mb-savedItem__link {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  font-weight: 600;\n  color: var(--text-primary, #333);\n  text-decoration: none;\n  display: block;\n  margin-bottom: 4px;\n}\n\n.mb-savedItem__link:hover {\n  color: var(--user-accent);\n}\n\n.mb-savedItem__meta {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.72rem;\n  color: var(--text-secondary, #888);\n  margin-bottom: 4px;\n}\n\n.mb-savedItem__remove {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.72rem;\n  color: #e05252;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  transition: opacity 0.2s;\n}\n\n.mb-savedItem__remove:hover {\n  opacity: 0.7;\n}\n\n.mb-authLinks {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-top: 0.8rem;\n}\n\n.mb-authBtn {\n  display: block;\n  text-align: center;\n  padding: 10px 16px;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  font-weight: 600;\n  text-decoration: none;\n  background: var(--user-accent);\n  color: #fff;\n  border: none;\n  cursor: pointer;\n  transition: opacity 0.2s;\n}\n\n.mb-authBtn:hover {\n  opacity: 0.9;\n}\n\n.mb-authBtn--ghost {\n  background: transparent;\n  border: 1.5px solid var(--user-accent);\n  color: var(--user-accent);\n}\n\n.mb-actions {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.mb-actionBtn {\n  display: block;\n  text-align: center;\n  padding: 10px 16px;\n  border-radius: 10px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  font-weight: 600;\n  text-decoration: none;\n  background: var(--user-accent);\n  color: #fff;\n  transition: opacity 0.2s;\n}\n\n.mb-actionBtn:hover {\n  opacity: 0.9;\n}\n\n.mb-actionBtn--ghost {\n  background: transparent;\n  border: 1.5px solid var(--user-accent);\n  color: var(--user-accent);\n}\n\n.mb-loadMore {\n  text-align: center;\n  margin: 2rem 0;\n}\n\n.mb-loadMore__btn {\n  padding: 12px 36px;\n  border: 2px solid var(--user-accent);\n  border-radius: 12px;\n  background: transparent;\n  color: var(--user-accent);\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.25s, color 0.25s, box-shadow 0.25s;\n}\n\n.mb-loadMore__btn:hover {\n  background: var(--user-accent);\n  color: #fff;\n  box-shadow: 0 4px 16px rgba(var(--user-accent-rgb), 0.2);\n}\n\n/* ==========================================================\n   23. TOAST\n   ========================================================== */\n.mb-toast {\n  position: fixed;\n  bottom: 24px;\n  left: 50%;\n  transform: translateX(-50%) translateY(100px);\n  background: #333;\n  color: #fff;\n  padding: 12px 28px;\n  border-radius: 12px;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  z-index: 9999;\n  opacity: 0;\n  transition: transform 0.3s ease, opacity 0.3s ease;\n  pointer-events: none;\n  box-shadow: 0 4px 16px rgba(0,0,0,0.2);\n}\n\n.mb-toast.is-visible,\n.mb-toast.is-show {\n  transform: translateX(-50%) translateY(0);\n  opacity: 1;\n}\n\n/* ==========================================================\n   24. READING MODE\n   ========================================================== */\n.mb-readingModeWrapper {\n  margin-top: 12px;\n}\n\n.mb-readingModeBtn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 18px;\n  border-radius: 10px;\n  border: 1px solid #ddd;\n  background: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.82rem;\n  font-weight: 600;\n  color: var(--text-secondary, #666);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.mb-readingModeBtn:hover {\n  border-color: var(--user-accent);\n  color: var(--user-accent);\n}\n\n.mb-readingModeBtn.is-active {\n  background: var(--user-accent);\n  color: #fff;\n  border-color: var(--user-accent);\n}\n\nbody.reading-mode .mb-sidebar,\nbody.reading-mode .mb-categoryCards,\nbody.reading-mode .mb-stickyFilters,\nbody.reading-mode .mb-blogToc {\n  display: none !important;\n}\n\nbody.reading-mode .mb-blogGrid {\n  grid-template-columns: 1fr;\n  max-width: 800px;\n}\n\n/* ==========================================================\n   25. TTS BUTTON\n   ========================================================== */\n.mb-ttsBtn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 14px;\n  border-radius: 8px;\n  border: 1px solid #ddd;\n  background: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.78rem;\n  font-weight: 500;\n  color: var(--text-secondary, #666);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.mb-ttsBtn:hover {\n  border-color: var(--user-accent);\n  color: var(--user-accent);\n}\n\n.mb-ttsBtn.is-playing {\n  background: var(--user-accent);\n  color: #fff;\n  border-color: var(--user-accent);\n}\n\n.mb-articleActions {\n  margin-top: 8px;\n}\n\n/* ==========================================================\n   26. INSPIRATIONAL QUOTE BANNER\n   ========================================================== */\n.mb-quoteBanner {\n  position: relative;\n  width: 100%;\n  padding: 64px 32px;\n  background: linear-gradient(\n    135deg,\n    rgba(var(--user-accent-rgb), 0.06) 0%,\n    rgba(var(--user-accent-rgb), 0.02) 100%\n  );\n  text-align: center;\n  overflow: hidden;\n  margin: 40px 0;\n  border-radius: 16px;\n}\n\n.mb-quoteBanner__icon {\n  font-family: 'Poppins', sans-serif;\n  font-size: 5rem;\n  color: rgba(var(--user-accent-rgb), 0.15);\n  margin-bottom: 12px;\n  display: block;\n  line-height: 1;\n}\n\n.mb-quoteBanner__text {\n  font-family: 'Poppins', sans-serif;\n  font-size: clamp(1.2rem, 2vw, 1.6rem);\n  font-weight: 500;\n  font-style: italic;\n  color: var(--text-primary, #1a1a2e);\n  line-height: 1.7;\n  max-width: 680px;\n  margin: 0 auto 16px;\n}\n\n.mb-quoteBanner__author {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.8rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.12em;\n  color: var(--user-accent);\n}\n\n/* ==========================================================\n   26b. COMMUNITY CTA BANNER\n   ========================================================== */\n.mb-communityCta {\n  justify-content: space-between;\n  gap: 24px;\n  padding: 32px 40px;\n  background: var(--bg-secondary, #f5f0eb);\n  margin: 40px 0;\n}\n\n.mb-communityCta__content {\n  gap: 16px;\n}\n\n.mb-communityCta__icon {\n  font-size: 2.4rem;\n  color: var(--user-accent);\n  flex-shrink: 0;\n}\n\n.mb-communityCta__text h3 {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: var(--text-primary, #1a1a2e);\n  margin: 0 0 4px;\n}\n\n.mb-communityCta__text p {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  font-weight: 400;\n  color: var(--text-secondary, #666);\n  margin: 0;\n}\n\n.mb-communityCta__btn {\n  flex-shrink: 0;\n  display: inline-flex;\n  align-items: center;\n  padding: 12px 24px;\n  background: var(--user-accent);\n  color: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.85rem;\n  font-weight: 600;\n  border-radius: 10px;\n  text-decoration: none;\n  transition: opacity 0.2s ease, transform 0.2s ease;\n  white-space: nowrap;\n}\n\n.mb-communityCta__btn:hover {\n  opacity: 0.9;\n  transform: translateY(-1px);\n}\n\n/* ==========================================================\n   27. MOOD-BASED RECOMMENDATIONS\n   ========================================================== */\n.mb-moodRec {\n  padding: 48px 0;\n  text-align: center;\n}\n\n.mb-moodRec__header {\n  margin-bottom: 32px;\n}\n\n.mb-moodRec__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--text-primary, #1a1a2e);\n  margin: 0 0 8px;\n}\n\n.mb-moodRec__subtitle {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  color: var(--text-secondary, #666);\n  margin: 0;\n}\n\n.mb-moodRec__moods,\n.mb-moodRec__buttons {\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n  flex-wrap: wrap;\n  margin-bottom: 32px;\n}\n\n.mb-moodBtn {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 22px;\n  border-radius: 24px;\n  border: 2px solid #e0e0e0;\n  background: #fff;\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.88rem;\n  font-weight: 600;\n  color: var(--text-primary, #333);\n  cursor: pointer;\n  transition: all 0.25s ease;\n}\n\n.mb-moodBtn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 16px rgba(0,0,0,0.06);\n}\n\n.mb-moodBtn.is-active {\n  border-color: var(--user-accent);\n  background: var(--user-accent-soft, rgba(var(--user-accent-rgb), 0.08));\n  color: var(--user-accent);\n  box-shadow: 0 4px 16px rgba(var(--user-accent-rgb), 0.15);\n}\n\n.mb-moodBtn__emoji {\n  font-size: 1.2rem;\n}\n\n.mb-moodRec__results {\n  margin-top: 32px;\n  text-align: left;\n}\n\n.mb-moodRec__resultsTitle {\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: var(--user-accent, #5BA4E6);\n  margin: 0 0 16px;\n}\n\n.mb-moodRec__cards {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 16px;\n}\n\n.mb-moodRec__card {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 20px;\n  background: #fff;\n  border-radius: 12px;\n  border: 1px solid #e8e8e8;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\n  text-decoration: none;\n  color: inherit;\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\n.mb-moodRec__card:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);\n}\n\n.mb-moodRec__card .mb-pill {\n  align-self: flex-start;\n}\n\n.mb-moodRec__cardTitle {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: var(--text-primary, #1a1a2e);\n  line-height: 1.4;\n}\n\n.mb-moodRec__cardMeta {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.8rem;\n  color: var(--text-secondary, #888);\n}\n\n/* ==========================================================\n   28. POPULAR THIS WEEK\n   ========================================================== */\n.mb-popular {\n  padding: 40px 0;\n}\n\n.mb-popular__list,\n.mb-popular__grid {\n  display: flex;\n  flex-direction: column;\n}\n\n.mb-popular__item {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  padding: 16px 12px;\n  border-bottom: 1px solid #eee;\n  transition: background 0.2s ease;\n  text-decoration: none;\n  color: inherit;\n}\n\n.mb-popular__item:last-child {\n  border-bottom: none;\n}\n\n.mb-popular__item:hover {\n  background: rgba(var(--user-accent-rgb), 0.03);\n}\n\n.mb-popular__rank {\n  width: 42px;\n  height: 42px;\n  border-radius: 50%;\n  background: rgba(var(--user-accent-rgb), 0.1);\n  color: var(--user-accent);\n  font-family: 'Poppins', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 800;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.mb-popular__info {\n  flex: 1;\n  min-width: 0;\n}\n\n.mb-popular__name,\n.mb-popular__title {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: var(--text-primary, #333);\n  margin: 0 0 4px;\n  display: block;\n}\n\n.mb-popular__meta {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.78rem;\n  color: var(--text-secondary, #888);\n  display: block;\n}\n\n.mb-popular__views {\n  font-family: 'Poppins', sans-serif;\n  font-size: 0.78rem;\n  font-weight: 600;\n  color: var(--text-secondary, #888);\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n/* ==========================================================\n   29. FOOTER NEWSLETTER (sidebar widget version)\n   ========================================================== */\n\n/* ==========================================================\n   30. DARK MODE SUPPORT\n   ========================================================== */\n[data-theme=\"dark\"] .mb-blogHero {\n  background:\n    radial-gradient(ellipse 60% 50% at 70% 30%, rgba(var(--user-accent-rgb), 0.08) 0%, transparent 70%),\n    linear-gradient(\n      180deg,\n      rgba(var(--user-accent-rgb), 0.12) 0%,\n      rgba(var(--user-accent-rgb), 0.03) 50%,\n      transparent 100%\n    );\n}\n\n[data-theme=\"dark\"] .mb-shape {\n  background: rgba(var(--user-accent-rgb), 0.06);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__title {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-blogHero__lead {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-blogHero__search {\n  background: #1a1a2e;\n  border-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-blogHero__input {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-categoryCard {\n  background: #252545;\n  border-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-categoryCard.is-active {\n  background: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-categoryCard span {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-categoryCard.is-active span {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-stickyFilters {\n  background: #1a1a2e;\n  border-bottom-color: rgba(255,255,255,0.1);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-stickyChip {\n  background: #252545;\n  border-color: rgba(255,255,255,0.1);\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-stickyChip.is-active {\n  background: var(--user-accent);\n  color: #fff;\n  border-color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-dashboard {\n  background: #1a1a2e;\n  border-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-dashboard__title {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-dashboard__subtitle {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-dashboard__card {\n  background: #2a2a4a;\n  border-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-dashboard__cardTitle {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-dashboard__cardBar {\n  background: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-stats__item::after {\n  background: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-stats__label {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-articleOfDay {\n  background: transparent;\n}\n\n[data-theme=\"dark\"] .mb-articleOfDay__card {\n  background: #2a2a4a;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-articleOfDay__title,\n[data-theme=\"dark\"] .mb-articleOfDay__title a {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-articleOfDay__desc {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-postCard {\n  background: #2a2a4a;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-postCard:hover {\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);\n}\n\n[data-theme=\"dark\"] .mb-postCard__title,\n[data-theme=\"dark\"] .mb-postCard__title a {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-postCard__excerpt {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-postCard__meta {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-postCard__subtext {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-featureCard {\n  background: #2a2a4a;\n  border-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-featureCard:hover {\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);\n}\n\n[data-theme=\"dark\"] .mb-featureCard__title,\n[data-theme=\"dark\"] .mb-featureCard__title a {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-featureCard__desc {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-featureCard__subtext {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-pill {\n  background: rgba(var(--user-accent-rgb), 0.15);\n  color: var(--user-accent-light, var(--user-accent));\n}\n\n[data-theme=\"dark\"] .mb-pill--news { background: #0c2337; color: #60a5fa; }\n[data-theme=\"dark\"] .mb-pill--story { background: #2e0a1f; color: #f9a8d4; }\n[data-theme=\"dark\"] .mb-pill--community { background: #052e16; color: #6ee7b7; }\n\n[data-theme=\"dark\"] .mb-cardBookmark {\n  background: #2a2a4a;\n  border-color: rgba(255,255,255,0.1);\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-cardBookmark:hover {\n  background: rgba(var(--user-accent-rgb), 0.15);\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-previewOverlay {\n  background: rgba(0, 0, 0, 0.6);\n}\n\n[data-theme=\"dark\"] .mb-previewPanel {\n  background: #1a1a2e;\n  box-shadow: -6px 0 36px rgba(0, 0, 0, 0.5);\n}\n\n[data-theme=\"dark\"] .mb-previewPanel__header {\n  border-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-previewPanel__close {\n  border-color: rgba(255,255,255,0.1);\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-previewPanel__close:hover {\n  background: #252545;\n}\n\n[data-theme=\"dark\"] .mb-previewPanel__title {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-previewPanel__excerpt {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-previewPanel__meta {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-previewPanel__takeaways h4 {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-previewPanel__takeawaysList li {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-previewPanel__tts {\n  border-color: rgba(255,255,255,0.1);\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-previewPanel__footer {\n  border-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-blogToc__progress {\n  background: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-blogToc__nav {\n  border-left-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-blogToc__link {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-newsletterCta {\n  background: linear-gradient(135deg, var(--user-accent) 0%, rgba(var(--user-accent-rgb), 0.85) 100%);\n}\n\n[data-theme=\"dark\"] .mb-newsletterCta__text h3,\n[data-theme=\"dark\"] .mb-newsletterCta__text h4 {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-newsletterCta__text p {\n  color: rgba(255, 255, 255, 0.85);\n}\n\n[data-theme=\"dark\"] .mb-newsletterCta__form {\n  background: #1a1a2e;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-newsletterCta__form input {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-communityCta {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.1) 0%, rgba(var(--user-accent-rgb), 0.03) 100%);\n  border-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-communityCta__text h3,\n[data-theme=\"dark\"] .mb-communityCta__text h4 {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-communityCta__text p {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-sectionHead {\n  border-bottom-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-sectionHead__title {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-resultsBar {\n  background: #252545;\n  border-bottom-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-resultsBar__count {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-resultsBar__reset {\n  border-color: rgba(255,255,255,0.1);\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-resultsBar__reset:hover {\n  background: rgba(var(--user-accent-rgb), 0.1);\n}\n\n[data-theme=\"dark\"] .back-to-top {\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\n}\n\n[data-theme=\"dark\"] .mb-readingProgress__bar {\n  box-shadow: 0 0 6px rgba(var(--user-accent-rgb), 0.4);\n}\n\n[data-theme=\"dark\"] .mb-mood--uplifting   { background: #052e16; color: #4ade80; }\n[data-theme=\"dark\"] .mb-mood--informative { background: #172554; color: #60a5fa; }\n[data-theme=\"dark\"] .mb-mood--personal    { background: #2e1065; color: #a78bfa; }\n[data-theme=\"dark\"] .mb-mood--heavy       { background: #451a03; color: #fbbf24; }\n\n[data-theme=\"dark\"] .mb-postHint {\n  background: rgba(var(--user-accent-rgb), 0.1);\n  border-left-color: var(--user-accent);\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-miniCard {\n  background: #2a2a4a;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-miniCard:hover {\n  box-shadow: 0 8px 28px rgba(0,0,0,0.4);\n}\n\n[data-theme=\"dark\"] .mb-miniCard__title a {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-miniCard__meta {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-listPost {\n  background: transparent;\n  border-bottom-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-listPost:hover {\n  background: rgba(var(--user-accent-rgb), 0.04);\n}\n\n[data-theme=\"dark\"] .mb-listPost__title a {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-listPost__excerpt {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-listPost__subtext {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-compactCard {\n  background: #2a2a4a;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .mb-compactCard:hover {\n  box-shadow: 0 8px 28px rgba(0,0,0,0.4);\n}\n\n[data-theme=\"dark\"] .mb-compactCard__title a {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-compactCard__meta {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-compactCard__pill {\n  background: rgba(0,0,0,0.75);\n}\n\n[data-theme=\"dark\"] .mb-tts-badge-overlay {\n  background: rgba(26,26,46,0.9);\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-widget {\n  background: #1a1a2e;\n  border-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-widget__title {\n  color: #e0e0e0;\n  border-bottom-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-widget__text {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-sideSearch__input {\n  background: #252545;\n  border-color: rgba(255,255,255,0.1);\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-trending__item:hover {\n  background: #252545;\n}\n\n[data-theme=\"dark\"] .mb-trending__title {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-catBtn {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-catBtn:hover,\n[data-theme=\"dark\"] .mb-catBtn.is-active {\n  background: rgba(var(--user-accent-rgb), 0.1);\n}\n\n[data-theme=\"dark\"] .mb-savedItem {\n  background: #252545;\n  border-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-savedItem__link {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-savedItem__meta {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-loadMore__btn {\n  border-color: var(--user-accent);\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-loadMore__btn:hover {\n  background: var(--user-accent);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-emptyState {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-btn {\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-btn--ghost {\n  color: var(--user-accent-light, var(--user-accent));\n  border-color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-toast {\n  background: #252545;\n  color: #e0e0e0;\n  box-shadow: 0 4px 20px rgba(0,0,0,0.4);\n}\n\n[data-theme=\"dark\"] .mb-readingModeBtn {\n  background: #252545;\n  border-color: rgba(255,255,255,0.1);\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-readingModeBtn.is-active {\n  background: var(--user-accent);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-ttsBtn {\n  background: #252545;\n  border-color: rgba(255,255,255,0.1);\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-ttsBtn.is-playing {\n  background: var(--user-accent);\n  color: #fff;\n}\n\n[data-theme=\"dark\"] .mb-quoteBanner {\n  background: linear-gradient(135deg, rgba(var(--user-accent-rgb), 0.08) 0%, rgba(var(--user-accent-rgb), 0.03) 100%);\n}\n\n[data-theme=\"dark\"] .mb-quoteBanner__text {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-quoteBanner__icon {\n  color: rgba(var(--user-accent-rgb), 0.1);\n}\n\n[data-theme=\"dark\"] .mb-communityCta {\n  background: rgba(var(--user-accent-rgb), 0.08);\n}\n\n[data-theme=\"dark\"] .mb-communityCta__text h3 {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-communityCta__text p {\n  color: #aaa;\n}\n\n[data-theme=\"dark\"] .mb-moodRec__title {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-moodRec__subtitle {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-moodBtn {\n  background: #252545;\n  border-color: rgba(255,255,255,0.1);\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-moodBtn.is-active {\n  border-color: var(--user-accent);\n  background: rgba(var(--user-accent-rgb), 0.12);\n  color: var(--user-accent);\n}\n\n[data-theme=\"dark\"] .mb-moodRec__card {\n  background: #252545;\n  border-color: rgba(255,255,255,0.08);\n}\n\n[data-theme=\"dark\"] .mb-moodRec__card:hover {\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);\n}\n\n[data-theme=\"dark\"] .mb-moodRec__cardTitle {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-moodRec__cardMeta {\n  color: #999;\n}\n\n[data-theme=\"dark\"] .mb-popular__item {\n  border-bottom-color: rgba(255,255,255,0.1);\n}\n\n[data-theme=\"dark\"] .mb-popular__item:hover {\n  background: rgba(var(--user-accent-rgb), 0.04);\n}\n\n[data-theme=\"dark\"] .mb-popular__rank {\n  background: rgba(var(--user-accent-rgb), 0.12);\n}\n\n[data-theme=\"dark\"] .mb-popular__name,\n[data-theme=\"dark\"] .mb-popular__title {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-popular__meta,\n[data-theme=\"dark\"] .mb-popular__views {\n  color: #888;\n}\n\n\n[data-theme=\"dark\"] .mb-blogGrid {\n  color: #e0e0e0;\n}\n\n[data-theme=\"dark\"] .mb-metaText {\n  color: #888;\n}\n\n[data-theme=\"dark\"] .mb-dashboard__guest {\n  color: #b0b0b0;\n}\n\n[data-theme=\"dark\"] .mb-new-badge {\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n/* ==========================================================\n   31. HIGH CONTRAST MODE\n   ========================================================== */\n[data-high-contrast=\"true\"] .mb-postCard {\n  border: 2px solid #333;\n}\n\n[data-high-contrast=\"true\"] .mb-categoryCard {\n  border: 2px solid #444;\n}\n\n[data-high-contrast=\"true\"] .mb-blogHero__search {\n  border: 2px solid #333;\n}\n\n[data-high-contrast=\"true\"] .mb-previewPanel {\n  border-left: 3px solid #333;\n}\n\n[data-high-contrast=\"true\"] .mb-sectionHead {\n  border-bottom-width: 3px;\n}\n\n[data-high-contrast=\"true\"] .mb-newsletterCta,\n[data-high-contrast=\"true\"] .mb-communityCta {\n  border: 2px solid #555;\n}\n\n[data-high-contrast=\"true\"] .mb-featureCard {\n  border-width: 2px;\n}\n\n[data-high-contrast=\"true\"] .mb-articleOfDay__card {\n  border: 2px solid #555;\n}\n\n[data-high-contrast=\"true\"] .mb-miniCard,\n[data-high-contrast=\"true\"] .mb-listPost,\n[data-high-contrast=\"true\"] .mb-compactCard {\n  border: 2px solid #444;\n}\n\n/* ==========================================================\n   32. RESPONSIVE BREAKPOINTS\n   ========================================================== */\n\n@media (min-width: 1400px) {\n  .mb-blogToc {\n    display: block;\n  }\n}\n\n@media (min-width: 1200px) {\n  .mb-categoryCards__scroll {\n    justify-content: center;\n    flex-wrap: wrap;\n    overflow-x: visible;\n  }\n\n  .mb-communityCta {\n    flex-direction: row;\n    text-align: left;\n  }\n\n  .mb-blogHero__inner {\n    max-width: 1200px;\n  }\n}\n\n@media (max-width: 1199px) {\n  .mb-blogHero {\n    padding: 72px 20px 56px;\n  }\n\n  .mb-blogHero__inner {\n    grid-template-columns: 1fr;\n    text-align: center;\n    max-width: 800px;\n  }\n\n  .mb-blogHero__left {\n    text-align: center;\n  }\n\n  .mb-blogHero__lead {\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  .mb-blogHero__search {\n    margin: 16px auto 0;\n  }\n\n  .mb-heroStats {\n    justify-content: center;\n  }\n\n  .mb-heroStats__item {\n    align-items: center;\n  }\n\n  .mb-blogHero__right {\n    grid-template-columns: 1fr 1fr;\n  }\n\n  .mb-stats__grid {\n    justify-content: center;\n  }\n\n  .mb-blogHero__right {\n    justify-content: center;\n  }\n\n  .mb-featureCard {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-featureCard__imgWrap {\n    min-height: 260px;\n  }\n\n  .mb-3up {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  .mb-3grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  .mb-listPost {\n    grid-template-columns: 200px 1fr;\n  }\n\n  .mb-blogGrid {\n    grid-template-columns: 1fr 260px;\n  }\n\n  .mb-communityCta {\n    flex-direction: column;\n    text-align: center;\n  }\n\n  .mb-communityCta__content {\n    flex-direction: column;\n  }\n\n  .mb-moodRec__cards {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (max-width: 991px) {\n  .mb-articleGrid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  .mb-2up {\n    grid-template-columns: 1fr;\n  }\n}\n\n@media (max-width: 576px) {\n  .mb-articleGrid {\n    grid-template-columns: 1fr;\n    gap: 16px;\n  }\n\n  .mb-moodRec__cards {\n    grid-template-columns: 1fr;\n  }\n}\n\n@media (max-width: 767px) {\n  .mb-blogHero {\n    padding: 56px 16px 40px;\n  }\n\n  .mb-blogHero__title {\n    font-size: 1.8rem;\n  }\n\n  .mb-blogHero__lead {\n    font-size: 0.9rem;\n    margin-bottom: 16px;\n  }\n\n  .mb-blogHero__search {\n    max-width: 100%;\n  }\n\n  .mb-shape--1,\n  .mb-shape--3,\n  .mb-shape--5 {\n    display: none;\n  }\n\n  .mb-categoryCards__scroll {\n    padding: 4px 16px;\n    gap: 8px;\n  }\n\n  .mb-categoryCard {\n    padding: 10px 12px 8px;\n    font-size: 1.3rem;\n  }\n\n  .mb-categoryCard span {\n    font-size: 0.65rem;\n  }\n\n  .mb-stickyFilters__inner {\n    padding: 8px 16px;\n  }\n\n  .mb-dashboard {\n    padding: 20px 16px;\n  }\n\n  .mb-dashboard__header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .mb-stats__grid {\n    gap: 12px;\n  }\n\n  .mb-3up,\n  .mb-3grid {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-2up {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-2up.mb-2up--mini {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-miniCard {\n    grid-template-columns: 100px 1fr;\n  }\n\n  .mb-miniCard__img {\n    width: 100px;\n    height: 100px;\n  }\n\n  .mb-listPost {\n    grid-template-columns: 1fr;\n    padding: 16px 0;\n  }\n\n  .mb-listPost__imgWrap {\n    aspect-ratio: 16 / 9;\n  }\n\n  .mb-listPost__img {\n    min-height: 160px;\n    max-height: 220px;\n  }\n\n  .mb-listPost__body {\n    padding: 16px 0 0;\n  }\n\n  .mb-featureCard {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-featureCard__content {\n    padding: 20px;\n  }\n\n  .mb-featureCard__title {\n    font-size: 1.25rem;\n  }\n\n  .mb-newsletterCta {\n    padding: 32px 20px;\n    margin: 32px 0;\n  }\n\n  .mb-newsletterCta__form {\n    flex-direction: column;\n    border-radius: 10px;\n  }\n\n  .mb-newsletterCta__form input[type=\"email\"] {\n    border-bottom: 1px solid rgba(0,0,0,0.08);\n  }\n\n  .mb-newsletterCta__form button {\n    border-radius: 0 0 10px 10px;\n    padding: 14px;\n  }\n\n  .mb-communityCta {\n    padding: 28px 20px;\n    flex-direction: column;\n    text-align: center;\n    margin: 32px 0;\n  }\n\n  .mb-communityCta__content {\n    flex-direction: column;\n  }\n\n  .mb-communityCta__btn {\n    width: 100%;\n    text-align: center;\n    padding: 12px;\n  }\n\n  .mb-sectionHead {\n    margin-bottom: 20px;\n  }\n\n  .mb-sectionHead__title {\n    font-size: 1.2rem;\n  }\n\n  .mb-resultsBar {\n    flex-direction: column;\n    gap: 8px;\n    align-items: flex-start;\n    padding: 10px 12px;\n  }\n\n  .mb-previewPanel {\n    width: 100%;\n  }\n\n  .mb-previewPanel__title {\n    font-size: 1.15rem;\n  }\n\n  .back-to-top {\n    bottom: 20px;\n    right: 20px;\n    width: 40px;\n    height: 40px;\n  }\n\n  .mb-blogGrid {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-sidebar {\n    order: 2;\n  }\n\n  .mb-quoteBanner {\n    padding: 40px 20px;\n  }\n\n  .mb-quoteBanner__text {\n    font-size: 1.1rem;\n  }\n\n  .mb-moodRec__cards {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-moodBtn {\n    padding: 8px 16px;\n    font-size: 0.82rem;\n  }\n\n  .mb-popular__item {\n    gap: 14px;\n    padding: 12px 8px;\n  }\n\n  .mb-popular__rank {\n    width: 36px;\n    height: 36px;\n    font-size: 0.95rem;\n  }\n}\n\n@media (max-width: 576px) {\n  .mb-blogHero {\n    padding: 48px 14px 36px;\n  }\n\n  .mb-blogHero__title {\n    font-size: 1.7rem;\n  }\n\n  .mb-stats__grid {\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .mb-stats__item:not(:last-child)::after {\n    display: none;\n  }\n\n  .mb-articleOfDay__content {\n    padding: 16px;\n  }\n}\n\n@media (max-width: 480px) {\n  .mb-blogHero {\n    padding: 44px 12px 32px;\n  }\n\n  .mb-blogHero__right {\n    grid-template-columns: 1fr;\n  }\n\n  .mb-blogHero__title {\n    font-size: 1.6rem;\n  }\n\n  .mb-blogHero__badge {\n    font-size: 0.65rem;\n    padding: 6px 14px;\n  }\n\n  .mb-blogHero__input {\n    padding: 12px 14px;\n    font-size: 0.88rem;\n  }\n\n  .mb-categoryCard {\n    padding: 8px 10px 6px;\n    font-size: 1.2rem;\n  }\n\n  .mb-categoryCard span {\n    font-size: 0.6rem;\n  }\n\n  .mb-stats__number {\n    font-size: 0.95rem;\n  }\n\n  .mb-stats__label {\n    font-size: 0.68rem;\n  }\n\n  .mb-articleOfDay {\n    margin-bottom: 24px;\n  }\n\n  .mb-featureCard__title {\n    font-size: 1.1rem;\n  }\n\n  .mb-dashboard {\n    border-radius: 12px;\n  }\n\n  .mb-moodRec__moods,\n  .mb-moodRec__buttons {\n    gap: 8px;\n  }\n\n  .mb-moodBtn {\n    padding: 8px 14px;\n    font-size: 0.78rem;\n  }\n\n  .mb-moodBtn__emoji {\n    font-size: 1.1rem;\n  }\n}\n\n/* ==========================================================\n   33. TRANSITIONS & ANIMATIONS\n   ========================================================== */\n.mb-postCard,\n.mb-categoryCard,\n.mb-dashboard__card,\n.mb-communityCta,\n.mb-newsletterCta,\n.mb-featureCard,\n.mb-miniCard,\n.mb-listPost,\n.mb-compactCard {\n  transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  *,\n  *::before,\n  *::after {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n    scroll-behavior: auto !important;\n  }\n\n  [data-reveal] {\n    opacity: 1 !important;\n    transform: none !important;\n  }\n\n  .mb-postCard:hover,\n  .mb-categoryCard:hover,\n  .mb-dashboard__card:hover,\n  .mb-miniCard:hover,\n  .mb-listPost:hover,\n  .mb-compactCard:hover,\n  .back-to-top.is-visible,\n  .back-to-top:hover {\n    transform: none;\n  }\n}\n\n/* ==========================================================\n   PRINT STYLES\n   ========================================================== */\n@media print {\n  .mb-readingProgress,\n  .mb-blogToc,\n  .mb-previewPanel,\n  .mb-previewOverlay,\n  .back-to-top,\n  .mb-categoryCards,\n  .mb-stickyFilters,\n  .mb-dashboard,\n  .mb-newsletterCta,\n  .mb-communityCta,\n  .mb-quoteBanner,\n  .mb-moodRec,\n  .mb-popular,\n  .mb-stats {\n    display: none !important;\n  }\n}\n","path":null,"size_bytes":88885,"size_tokens":null},"mindspace-build/js/haptics.js":{"content":"(function () {\n  'use strict';\n\n  const supportsVibrate = 'vibrate' in navigator;\n  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');\n\n  const patterns = {\n    light: [10],\n    medium: [20],\n    heavy: [30],\n    success: [10, 50, 20],\n    error: [30, 50, 30, 50, 30],\n    select: [5]\n  };\n\n  function vibrate(type) {\n    if (prefersReducedMotion.matches) return;\n    if (!supportsVibrate) return;\n    const pattern = patterns[type] || patterns.light;\n    try {\n      navigator.vibrate(pattern);\n    } catch (e) {}\n  }\n\n  function tapAnimation(el) {\n    if (!el || prefersReducedMotion.matches) return;\n    el.classList.remove('haptic-tap');\n    void el.offsetWidth;\n    el.classList.add('haptic-tap');\n  }\n\n  function feedback(el, type) {\n    vibrate(type || 'light');\n    tapAnimation(el);\n  }\n\n  const interactiveSelectors = [\n    'button',\n    'a.btn',\n    '.btn',\n    '.cta-btn',\n    '.nav-link',\n    '.topbar__dot',\n    '.mb-categoryCard',\n    '.mb-articleCard',\n    '.mb-filterChip',\n    '.mb-stickyFilter__btn',\n    '.mood-option',\n    '.checkin-submit',\n    '.achievement-card',\n    '.community-like-btn',\n    '.community-comment-btn',\n    '.settings-toggle',\n    '.toggle-switch',\n    '.theme-option',\n    'input[type=\"checkbox\"]',\n    'input[type=\"radio\"]',\n    '.tab-btn',\n    '.accordion-header',\n    '.dropdown-trigger',\n    '.mobile-nav-toggle',\n    '.hamburger',\n    '[role=\"button\"]',\n    '[data-haptic]'\n  ];\n\n  function getHapticType(el) {\n    if (el.hasAttribute('data-haptic')) {\n      return el.getAttribute('data-haptic');\n    }\n    if (el.closest('.mood-option') || el.closest('.checkin-submit')) return 'medium';\n    if (el.closest('.achievement-card')) return 'success';\n    if (el.closest('.community-like-btn')) return 'light';\n    if (el.closest('.get-help-btn') || el.closest('[data-translate=\"nav_crisis\"]')) return 'heavy';\n    return 'light';\n  }\n\n  function isInteractive(el) {\n    for (let i = 0; i < interactiveSelectors.length; i++) {\n      if (el.matches(interactiveSelectors[i])) return true;\n    }\n    return false;\n  }\n\n  function findInteractiveAncestor(el) {\n    let current = el;\n    let depth = 0;\n    while (current && depth < 5) {\n      if (isInteractive(current)) return current;\n      current = current.parentElement;\n      depth++;\n    }\n    return null;\n  }\n\n  document.addEventListener('pointerdown', function (e) {\n    const target = findInteractiveAncestor(e.target);\n    if (!target) return;\n    const type = getHapticType(target);\n    feedback(target, type);\n  }, { passive: true });\n\n  window.MindSpaceHaptics = {\n    vibrate: vibrate,\n    tap: tapAnimation,\n    feedback: feedback\n  };\n})();\n","path":null,"size_bytes":2683,"size_tokens":null}},"version":2}